{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-c36933d4\"],{\"0538\":function(t,e,n){\"use strict\";var i=n(\"da84\"),r=n(\"e330\"),a=n(\"59ed\"),s=n(\"861d\"),o=n(\"1a2d\"),u=n(\"f36a\"),l=n(\"40d5\"),c=i.Function,h=r([].concat),f=r([].join),d={},p=function(t,e,n){if(!o(d,e)){for(var i=[],r=0;r<e;r++)i[r]=\"a[\"+r+\"]\";d[e]=c(\"C,a\",\"return new C(\"+f(i,\",\")+\")\")}return d[e](t,n)};t.exports=l?c.bind:function(t){var e=a(this),n=e.prototype,i=u(arguments,1),r=function(){var n=h(i,u(arguments));return this instanceof r?p(e,n.length,n):e.apply(t,n)};return s(n)&&(r.prototype=n),r}},\"0541\":function(t,e,n){var i=n(\"23e7\"),r=n(\"1a2d\");i({target:\"Object\",stat:!0},{hasOwn:r})},\"0a06\":function(t,e,n){\"use strict\";var i=n(\"c532\"),r=n(\"30b5\"),a=n(\"f6b4\"),s=n(\"5270\"),o=n(\"4a7b\"),u=n(\"848b\"),l=u.validators;function c(t){this.defaults=t,this.interceptors={request:new a,response:new a}}c.prototype.request=function(t,e){\"string\"===typeof t?(e=e||{},e.url=t):e=t||{},e=o(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method=\"get\";var n=e.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var i=[],r=!0;this.interceptors.request.forEach((function(t){\"function\"===typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,i.unshift(t.fulfilled,t.rejected))}));var a,c=[];if(this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)})),!r){var h=[s,void 0];Array.prototype.unshift.apply(h,i),h=h.concat(c),a=Promise.resolve(e);while(h.length)a=a.then(h.shift(),h.shift());return a}var f=e;while(i.length){var d=i.shift(),p=i.shift();try{f=d(f)}catch(g){p(g);break}}try{a=s(f)}catch(g){return Promise.reject(g)}while(c.length)a=a.then(c.shift(),c.shift());return a},c.prototype.getUri=function(t){return t=o(this.defaults,t),r(t.url,t.params,t.paramsSerializer).replace(/^\\?/,\"\")},i.forEach([\"delete\",\"get\",\"head\",\"options\"],(function(t){c.prototype[t]=function(e,n){return this.request(o(n||{},{method:t,url:e,data:(n||{}).data}))}})),i.forEach([\"post\",\"put\",\"patch\"],(function(t){c.prototype[t]=function(e,n,i){return this.request(o(i||{},{method:t,url:e,data:n}))}})),t.exports=c},\"0b25\":function(t,e,n){var i=n(\"da84\"),r=n(\"5926\"),a=n(\"50c4\"),s=i.RangeError;t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=a(e);if(e!==n)throw s(\"Wrong length or index\");return n}},\"0c47\":function(t,e,n){var i=n(\"da84\"),r=n(\"d44e\");r(i.JSON,\"JSON\",!0)},\"0df6\":function(t,e,n){\"use strict\";t.exports=function(t){return function(e){return t.apply(null,e)}}},\"0eb6\":function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"7c37\"),a=n(\"d066\"),s=n(\"d039\"),o=n(\"7c73\"),u=n(\"5c6c\"),l=n(\"9bf2\").f,c=n(\"37e8\").f,h=n(\"6eeb\"),f=n(\"1a2d\"),d=n(\"19aa\"),p=n(\"825a\"),g=n(\"aa1f\"),v=n(\"e391\"),m=n(\"cf98\"),y=n(\"c770\"),_=n(\"69f3\"),x=n(\"83ab\"),b=n(\"c430\"),w=\"DOMException\",S=\"DATA_CLONE_ERR\",C=a(\"Error\"),M=a(w)||function(){try{var t=a(\"MessageChannel\")||r(\"worker_threads\").MessageChannel;(new t).port1.postMessage(new WeakMap)}catch(e){if(e.name==S&&25==e.code)return e.constructor}}(),T=M&&M.prototype,k=C.prototype,A=_.set,E=_.getterFor(w),O=\"stack\"in C(w),P=function(t){return f(m,t)&&m[t].m?m[t].c:0},I=function(){d(this,L);var t=arguments.length,e=v(t<1?void 0:arguments[0]),n=v(t<2?void 0:arguments[1],\"Error\"),i=P(n);if(A(this,{type:w,name:n,message:e,code:i}),x||(this.name=n,this.message=e,this.code=i),O){var r=C(e);r.name=w,l(this,\"stack\",u(1,y(r.stack,1)))}},L=I.prototype=o(k),D=function(t){return{enumerable:!0,configurable:!0,get:t}},R=function(t){return D((function(){return E(this)[t]}))};x&&c(L,{name:R(\"name\"),message:R(\"message\"),code:R(\"code\")}),l(L,\"constructor\",u(1,I));var N=s((function(){return!(new M instanceof C)})),F=N||s((function(){return k.toString!==g||\"2: 1\"!==String(new M(1,2))})),B=N||s((function(){return 25!==new M(1,\"DataCloneError\").code})),z=N||25!==M[S]||25!==T[S],j=b?F||B||z:N;i({global:!0,forced:j},{DOMException:j?I:M});var U=a(w),V=U.prototype;for(var W in F&&(b||M===U)&&h(V,\"toString\",g),B&&x&&M===U&&l(V,\"code\",D((function(){return P(p(this).name)}))),m)if(f(m,W)){var G=m[W],H=G.s,X=u(6,G.c);f(U,H)||l(U,H,X),f(V,H)||l(V,H,X)}},1:function(t,e){},\"10d1\":function(t,e,n){\"use strict\";var i,r=n(\"da84\"),a=n(\"e330\"),s=n(\"e2cc\"),o=n(\"f183\"),u=n(\"6d61\"),l=n(\"acac\"),c=n(\"861d\"),h=n(\"4fad\"),f=n(\"69f3\").enforce,d=n(\"7f9a\"),p=!r.ActiveXObject&&\"ActiveXObject\"in r,g=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},v=u(\"WeakMap\",g,l);if(d&&p){i=l.getConstructor(g,\"WeakMap\",!0),o.enable();var m=v.prototype,y=a(m[\"delete\"]),_=a(m.has),x=a(m.get),b=a(m.set);s(m,{delete:function(t){if(c(t)&&!h(t)){var e=f(this);return e.frozen||(e.frozen=new i),y(this,t)||e.frozen[\"delete\"](t)}return y(this,t)},has:function(t){if(c(t)&&!h(t)){var e=f(this);return e.frozen||(e.frozen=new i),_(this,t)||e.frozen.has(t)}return _(this,t)},get:function(t){if(c(t)&&!h(t)){var e=f(this);return e.frozen||(e.frozen=new i),_(this,t)?x(this,t):e.frozen.get(t)}return x(this,t)},set:function(t,e){if(c(t)&&!h(t)){var n=f(this);n.frozen||(n.frozen=new i),_(this,t)?b(this,t,e):n.frozen.set(t,e)}else b(this,t,e);return this}})}},1148:function(t,e,n){\"use strict\";var i=n(\"da84\"),r=n(\"5926\"),a=n(\"577e\"),s=n(\"1d80\"),o=i.RangeError;t.exports=function(t){var e=a(s(this)),n=\"\",i=r(t);if(i<0||i==1/0)throw o(\"Wrong number of repetitions\");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},\"129f\":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},\"143c\":function(t,e,n){var i=n(\"74e8\");i(\"Int32\",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},1448:function(t,e,n){var i=n(\"dfb9\"),r=n(\"b6b7\");t.exports=function(t,e){return i(r(t),e)}},\"145e\":function(t,e,n){\"use strict\";var i=n(\"7b0b\"),r=n(\"23cb\"),a=n(\"07fa\"),s=Math.min;t.exports=[].copyWithin||function(t,e){var n=i(this),o=a(n),u=r(t,o),l=r(e,o),c=arguments.length>2?arguments[2]:void 0,h=s((void 0===c?o:r(c,o))-l,o-u),f=1;l<u&&u<l+h&&(f=-1,l+=h-1,u+=h-1);while(h-- >0)l in n?n[u]=n[l]:delete n[u],u+=f,l+=f;return n}},\"170b\":function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"50c4\"),a=n(\"23cb\"),s=n(\"b6b7\"),o=i.aTypedArray,u=i.exportTypedArrayMethod;u(\"subarray\",(function(t,e){var n=o(this),i=n.length,u=a(t,i),l=s(n);return new l(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,r((void 0===e?i:a(e,i))-u))}))},\"182d\":function(t,e,n){var i=n(\"da84\"),r=n(\"f8cd\"),a=i.RangeError;t.exports=function(t,e){var n=r(t);if(n%e)throw a(\"Wrong offset\");return n}},\"1d2b\":function(t,e,n){\"use strict\";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},\"1fb5\":function(t,e,n){\"use strict\";e.byteLength=c,e.toByteArray=f,e.fromByteArray=g;for(var i=[],r=[],a=\"undefined\"!==typeof Uint8Array?Uint8Array:Array,s=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",o=0,u=s.length;o<u;++o)i[o]=s[o],r[s.charCodeAt(o)]=o;function l(t){var e=t.length;if(e%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var n=t.indexOf(\"=\");-1===n&&(n=e);var i=n===e?0:4-n%4;return[n,i]}function c(t){var e=l(t),n=e[0],i=e[1];return 3*(n+i)/4-i}function h(t,e,n){return 3*(e+n)/4-n}function f(t){var e,n,i=l(t),s=i[0],o=i[1],u=new a(h(t,s,o)),c=0,f=o>0?s-4:s;for(n=0;n<f;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;return 2===o&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[c++]=255&e),1===o&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e),u}function d(t){return i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}function p(t,e,n){for(var i,r=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),r.push(d(i));return r.join(\"\")}function g(t){for(var e,n=t.length,r=n%3,a=[],s=16383,o=0,u=n-r;o<u;o+=s)a.push(p(t,o,o+s>u?u:o+s));return 1===r?(e=t[n-1],a.push(i[e>>2]+i[e<<4&63]+\"==\")):2===r&&(e=(t[n-2]<<8)+t[n-1],a.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+\"=\")),a.join(\"\")}r[\"-\".charCodeAt(0)]=62,r[\"_\".charCodeAt(0)]=63},2:function(t,e){},\"219c\":function(t,e,n){\"use strict\";var i=n(\"da84\"),r=n(\"e330\"),a=n(\"d039\"),s=n(\"59ed\"),o=n(\"addb\"),u=n(\"ebb5\"),l=n(\"04d1\"),c=n(\"d998\"),h=n(\"2d00\"),f=n(\"512c\"),d=i.Array,p=u.aTypedArray,g=u.exportTypedArrayMethod,v=i.Uint16Array,m=v&&r(v.prototype.sort),y=!!m&&!(a((function(){m(new v(2),null)}))&&a((function(){m(new v(2),{})}))),_=!!m&&!a((function(){if(h)return h<74;if(l)return l<67;if(c)return!0;if(f)return f<602;var t,e,n=new v(516),i=d(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,i[t]=t-2*e+3;for(m(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==i[t])return!0})),x=function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!==n?-1:e!==e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}};g(\"sort\",(function(t){return void 0!==t&&s(t),_?m(this,t):o(p(this),x(t))}),!_||y)},\"23dc\":function(t,e,n){var i=n(\"d44e\");i(Math,\"Math\",!0)},\"25a1\":function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"d58f\").right,a=i.aTypedArray,s=i.exportTypedArrayMethod;s(\"reduceRight\",(function(t){var e=arguments.length;return r(a(this),t,e,e>1?arguments[1]:void 0)}))},\"278c\":function(t,e,n){var i=n(\"c135\"),r=n(\"9b42\"),a=n(\"6613\"),s=n(\"c240\");function o(t,e){return i(t)||r(t,e)||a(t,e)||s()}t.exports=o,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},2954:function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"b6b7\"),a=n(\"d039\"),s=n(\"f36a\"),o=i.aTypedArray,u=i.exportTypedArrayMethod,l=a((function(){new Int8Array(1).slice()}));u(\"slice\",(function(t,e){var n=s(o(this),t,e),i=r(this),a=0,u=n.length,l=new i(u);while(u>a)l[a]=n[a++];return l}),l)},\"2af1\":function(t,e,n){var i=n(\"23e7\"),r=n(\"f748\");i({target:\"Math\",stat:!0},{sign:r})},\"2cbb\":function(t,e,n){(function(t,i){var r,a,s,o=n(\"c973\").default,u=n(\"6374\").default,l=n(\"9523\").default,c=n(\"278c\").default,h=n(\"6b58\").default,f=n(\"8962\").default,d=n(\"36c6\").default,p=n(\"ded3\").default,g=n(\"3c96\").default,v=n(\"ed6d\").default,m=n(\"2d0d\").default,y=n(\"970b\").default,_=n(\"5bc3\").default,x=n(\"7037\").default;n(\"96cf\"),n(\"a4d3\"),n(\"e01a\"),n(\"d3b7\"),n(\"d9e2\"),n(\"3410\"),n(\"159b\"),n(\"b0c0\"),n(\"ddb0\"),n(\"fb6a\"),n(\"6c57\"),n(\"4d63\"),n(\"c607\"),n(\"ac1f\"),n(\"2c3e\"),n(\"25f0\"),n(\"00b4\"),n(\"0541\"),n(\"5319\"),n(\"1276\"),n(\"5377\"),n(\"b64b\"),n(\"33d1\"),n(\"ea98\"),n(\"d28b\"),n(\"3ca3\"),n(\"466d\"),n(\"0eb6\"),n(\"b7ef\"),n(\"8bd4\"),n(\"a434\"),n(\"99af\"),n(\"bf19\"),n(\"498a\"),n(\"e9c4\"),n(\"a15b\"),n(\"841c\"),n(\"c19f\"),n(\"9861\"),n(\"a630\"),n(\"c906\"),n(\"cee8\"),n(\"e439\"),n(\"7039\"),n(\"a9e3\"),n(\"4de4\"),n(\"4e82\"),n(\"90d7\"),n(\"cb29\"),n(\"d81d\"),n(\"944a\"),n(\"0c47\"),n(\"23dc\"),n(\"dca8\"),n(\"fd87\"),n(\"907a\"),n(\"9a8c\"),n(\"a975\"),n(\"735e\"),n(\"c1ac\"),n(\"d139\"),n(\"3a7b\"),n(\"d5d6\"),n(\"82f8\"),n(\"e91f\"),n(\"60bd\"),n(\"5f96\"),n(\"3280\"),n(\"3fcc\"),n(\"ca91\"),n(\"25a1\"),n(\"cd26\"),n(\"3c5d\"),n(\"2954\"),n(\"649e\"),n(\"219c\"),n(\"170b\"),n(\"b39a\"),n(\"72f7\"),n(\"5cc6\"),n(\"8a59\"),n(\"8b09\"),n(\"84c32\"),n(\"143c\"),n(\"fb2c\"),n(\"cfc3\"),n(\"4a9b\"),n(\"38cf\"),n(\"35b3\"),n(\"4c53\"),n(\"8ba4\"),n(\"10d1\"),n(\"aff5\"),n(\"4ec9\"),n(\"6062\"),n(\"2af1\"),n(\"7db0\"),n(\"f8c9\"),function(t,n){\"object\"==x(e)&&\"object\"==x(i)?i.exports=n():(a=[],r=n,s=\"function\"===typeof r?r.apply(e,a):r,void 0===s||(i.exports=s))}(self,(function(){return function(){var e={1553:function(t){t=function(t){\"use strict\";var e,n=Object.prototype,i=n.hasOwnProperty,r=\"function\"==typeof Symbol?Symbol:{},a=r.iterator||\"@@iterator\",s=r.asyncIterator||\"@@asyncIterator\",o=r.toStringTag||\"@@toStringTag\";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},\"\")}catch(n){u=function(t,e,n){return t[e]=n}}function l(t,n,i,r){var a,s,o,u;return n=n&&n.prototype instanceof v?n:v,n=Object.create(n.prototype),r=new T(r||[]),n._invoke=(a=t,s=i,o=r,u=h,function(t,n){if(u===d)throw new Error(\"Generator is already running\");if(u===p){if(\"throw\"===t)throw n;return A()}for(o.method=t,o.arg=n;;){var i=o.delegate;if(i){var r=function t(n,i){var r;if((r=n.iterator[i.method])===e){if(i.delegate=null,\"throw\"===i.method){if(n.iterator.return&&(i.method=\"return\",i.arg=e,t(n,i),\"throw\"===i.method))return g;i.method=\"throw\",i.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return g}return\"throw\"===(r=c(r,n.iterator,i.arg)).type?(i.method=\"throw\",i.arg=r.arg,i.delegate=null,g):(r=r.arg)?r.done?(i[n.resultName]=r.value,i.next=n.nextLoc,\"return\"!==i.method&&(i.method=\"next\",i.arg=e),i.delegate=null,g):r:(i.method=\"throw\",i.arg=new TypeError(\"iterator result is not an object\"),i.delegate=null,g)}(i,o);if(r){if(r===g)continue;return r}}if(\"next\"===o.method)o.sent=o._sent=o.arg;else if(\"throw\"===o.method){if(u===h)throw u=p,o.arg;o.dispatchException(o.arg)}else\"return\"===o.method&&o.abrupt(\"return\",o.arg);if(u=d,\"normal\"===(r=c(a,s,o)).type){if(u=o.done?p:f,r.arg!==g)return{value:r.arg,done:o.done}}else\"throw\"===r.type&&(u=p,o.method=\"throw\",o.arg=r.arg)}}),n}function c(t,e,n){try{return{type:\"normal\",arg:t.call(e,n)}}catch(t){return{type:\"throw\",arg:t}}}t.wrap=l;var h=\"suspendedStart\",f=\"suspendedYield\",d=\"executing\",p=\"completed\",g={};function v(){}function m(){}function y(){}var _={};u(_,a,(function(){return this})),(r=(r=Object.getPrototypeOf)&&r(r(k([]))))&&r!==n&&i.call(r,a)&&(_=r);var b=y.prototype=v.prototype=Object.create(_);function w(t){[\"next\",\"throw\",\"return\"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){var n;this._invoke=function(r,a){function s(){return new e((function(n,s){!function n(r,a,s,o){if(\"throw\"!==(r=c(t[r],t,a)).type){var u=r.arg;return(a=u.value)&&\"object\"==x(a)&&i.call(a,\"__await\")?e.resolve(a.__await).then((function(t){n(\"next\",t,s,o)}),(function(t){n(\"throw\",t,s,o)})):e.resolve(a).then((function(t){u.value=t,s(u)}),(function(t){return n(\"throw\",t,s,o)}))}o(r.arg)}(r,a,n,s)}))}return n=n?n.then(s,s):s()}}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type=\"normal\",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(C,this),this.reset(!0)}function k(t){if(t){if(n=t[a])return n.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var n,r=-1;return(n=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n}).next=n}}return{next:A}}function A(){return{value:e,done:!0}}return u(b,\"constructor\",m.prototype=y),u(y,\"constructor\",m),m.displayName=u(y,o,\"GeneratorFunction\"),t.isGeneratorFunction=function(t){return!!(t=\"function\"==typeof t&&t.constructor)&&(t===m||\"GeneratorFunction\"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,o,\"GeneratorFunction\")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(S.prototype),u(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var s=new S(l(e,n,i,r),a);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(b),u(b,o,\"Generator\"),u(b,a,(function(){return this})),u(b,\"toString\",(function(){return\"[object Generator]\"})),t.keys=function(t){var e,n=[];for(e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=k,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)\"t\"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\"throw\"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return o.type=\"throw\",o.arg=t,n.next=i,r&&(n.method=\"next\",n.arg=e),!!r}for(var a=this.tryEntries.length-1;0<=a;--a){var s=this.tryEntries[a],o=s.completion;if(\"root\"===s.tryLoc)return r(\"end\");if(s.tryLoc<=this.prev){var u=i.call(s,\"catchLoc\"),l=i.call(s,\"finallyLoc\");if(u&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error(\"try statement without catch or finally\");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,\"finallyLoc\")&&this.prev<r.finallyLoc){var a=r;break}}var s=(a=a&&(\"break\"===t||\"continue\"===t)&&a.tryLoc<=e&&e<=a.finallyLoc?null:a)?a.completion:{};return s.type=t,s.arg=e,a?(this.method=\"next\",this.next=a.finallyLoc,g):this.complete(s)},complete:function(t,e){if(\"throw\"===t.type)throw t.arg;return\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=this.arg=t.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i,r=n.completion;return\"throw\"===r.type&&(i=r.arg,M(n)),i}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,n,i){return this.delegate={iterator:k(t),resultName:n,nextLoc:i},\"next\"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=t}catch(n){\"object\"==(\"undefined\"===typeof globalThis?\"undefined\":x(globalThis))?globalThis.regeneratorRuntime=t:Function(\"r\",\"regeneratorRuntime = r\")(t)}},7757:function(t,e,n){t.exports=n(1553)},1234:function(t,e){!function(t){\"use strict\";var e={3:\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\",5:\"class enum extends super const export import\",6:\"enum\",strict:\"implements interface let package private protected public static yield\",strictBind:\"eval arguments\"},n=\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\",i={5:n,\"5module\":n+\" export import\",6:n+\" const class extends export import super\"},r=/^in(stanceof)?$/,a=\"ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ\",s=\"‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿\",o=new RegExp(\"[\"+a+\"]\"),u=new RegExp(\"[\"+a+s+\"]\"),l=(a=s=null,[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938]),c=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239];function h(t,e){for(var n=65536,i=0;i<e.length;i+=2){if((n+=e[i])>t)return!1;if((n+=e[i+1])>=t)return!0}}function f(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&o.test(String.fromCharCode(t)):!1!==e&&h(t,l)))}function d(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&u.test(String.fromCharCode(t)):!1!==e&&(h(t,l)||h(t,c)))))}var p=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function g(t,e){return new p(t,{beforeExpr:!0,binop:e})}var v={beforeExpr:!0},m={startsExpr:!0},y={};function _(t,e){return void 0===e&&(e={}),e.keyword=t,y[t]=new p(t,e)}var b={num:new p(\"num\",m),regexp:new p(\"regexp\",m),string:new p(\"string\",m),name:new p(\"name\",m),privateId:new p(\"privateId\",m),eof:new p(\"eof\"),bracketL:new p(\"[\",{beforeExpr:!0,startsExpr:!0}),bracketR:new p(\"]\"),braceL:new p(\"{\",{beforeExpr:!0,startsExpr:!0}),braceR:new p(\"}\"),parenL:new p(\"(\",{beforeExpr:!0,startsExpr:!0}),parenR:new p(\")\"),comma:new p(\",\",v),semi:new p(\";\",v),colon:new p(\":\",v),dot:new p(\".\"),question:new p(\"?\",v),questionDot:new p(\"?.\"),arrow:new p(\"=>\",v),template:new p(\"template\"),invalidTemplate:new p(\"invalidTemplate\"),ellipsis:new p(\"...\",v),backQuote:new p(\"`\",m),dollarBraceL:new p(\"${\",{beforeExpr:!0,startsExpr:!0}),eq:new p(\"=\",{beforeExpr:!0,isAssign:!0}),assign:new p(\"_=\",{beforeExpr:!0,isAssign:!0}),incDec:new p(\"++/--\",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new p(\"!/~\",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:g(\"||\",1),logicalAND:g(\"&&\",2),bitwiseOR:g(\"|\",3),bitwiseXOR:g(\"^\",4),bitwiseAND:g(\"&\",5),equality:g(\"==/!=/===/!==\",6),relational:g(\"</>/<=/>=\",7),bitShift:g(\"<</>>/>>>\",8),plusMin:new p(\"+/-\",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:g(\"%\",10),star:g(\"*\",10),slash:g(\"/\",10),starstar:new p(\"**\",{beforeExpr:!0}),coalesce:g(\"??\",1),_break:_(\"break\"),_case:_(\"case\",v),_catch:_(\"catch\"),_continue:_(\"continue\"),_debugger:_(\"debugger\"),_default:_(\"default\",v),_do:_(\"do\",{isLoop:!0,beforeExpr:!0}),_else:_(\"else\",v),_finally:_(\"finally\"),_for:_(\"for\",{isLoop:!0}),_function:_(\"function\",m),_if:_(\"if\"),_return:_(\"return\",v),_switch:_(\"switch\"),_throw:_(\"throw\",v),_try:_(\"try\"),_var:_(\"var\"),_const:_(\"const\"),_while:_(\"while\",{isLoop:!0}),_with:_(\"with\"),_new:_(\"new\",{beforeExpr:!0,startsExpr:!0}),_this:_(\"this\",m),_super:_(\"super\",m),_class:_(\"class\",m),_extends:_(\"extends\",v),_export:_(\"export\"),_import:_(\"import\",m),_null:_(\"null\",m),_true:_(\"true\",m),_false:_(\"false\",m),_in:_(\"in\",{beforeExpr:!0,binop:7}),_instanceof:_(\"instanceof\",{beforeExpr:!0,binop:7}),_typeof:_(\"typeof\",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:_(\"void\",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:_(\"delete\",{beforeExpr:!0,prefix:!0,startsExpr:!0})},w=/\\r\\n?|\\n|\\u2028|\\u2029/,S=new RegExp(w.source,\"g\");function C(t){return 10===t||13===t||8232===t||8233===t}function M(t,e,n){void 0===n&&(n=t.length);for(var i=e;i<n;i++){var r=t.charCodeAt(i);if(C(r))return i<n-1&&13===r&&10===t.charCodeAt(i+1)?i+2:i+1}return-1}var T=/[\\u1680\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/,k=/(?:\\s|\\/\\/.*|\\/\\*[^]*?\\*\\/)*/g,A=Object.prototype,E=A.hasOwnProperty,O=A.toString,P=Object.hasOwn||function(t,e){return E.call(t,e)},I=Array.isArray||function(t){return\"[object Array]\"===O.call(t)};function L(t){return new RegExp(\"^(?:\"+t.replace(/ /g,\"|\")+\")$\")}var D=/(?:[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])/,R=function(t,e){this.line=t,this.column=e};R.prototype.offset=function(t){return new R(this.line,this.column+t)};var N=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function F(t,e){for(var n=1,i=0;;){var r=M(t,i,e);if(r<0)return new R(n,e-i);++n,i=r}}var B={ecmaVersion:null,sourceType:\"script\",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},z=!1;function j(t){var e={};for(var n in B)e[n]=t&&P(t,n)?t[n]:B[n];if(\"latest\"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!z&&\"object\"==(\"undefined\"===typeof console?\"undefined\":x(console))&&console.warn&&(z=!0,console.warn(\"Since Acorn 8.0.0, options.ecmaVersion is required.\\nDefaulting to 2020, but this will stop working in the future.\")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),I(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return I(e.onComment)&&(e.onComment=function(t,e){return function(n,i,r,a,s,o){var u={type:n?\"Block\":\"Line\",value:i,start:r,end:a};t.locations&&(u.loc=new N(this,s,o)),t.ranges&&(u.range=[r,a]),e.push(u)}}(e,e.onComment)),e}var U=256;function V(t,e){return 2|(t?4:0)|(e?8:0)}var W=function(t,n,r){this.options=t=j(t),this.sourceFile=t.sourceFile,this.keywords=L(i[t.ecmaVersion>=6?6:\"module\"===t.sourceType?\"5module\":5]);var a=\"\";!0!==t.allowReserved&&(a=e[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],\"module\"===t.sourceType&&(a+=\" await\")),this.reservedWords=L(a);var s=(a?a+\" \":\"\")+e.strict;this.reservedWordsStrict=L(s),this.reservedWordsStrictBind=L(s+\" \"+e.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(\"\\n\",r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(w).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=\"module\"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&\"#!\"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]},G={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};W.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},G.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},G.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},G.inAsync.get=function(){return(4&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},G.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&U)return!1;if(2&e.flags)return(4&e.flags)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},G.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(64&e)>0||n||this.options.allowSuperOutsideMethod},G.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},G.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},G.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(258&e)>0||n},G.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&U)>0},W.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,i=0;i<t.length;i++)n=t[i](n);return n},W.parse=function(t,e){return new this(e,t).parse()},W.parseExpressionAt=function(t,e,n){var i=new this(n,t,e);return i.nextToken(),i.parseExpression()},W.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(W.prototype,G);var H=W.prototype,X=/^(?:'((?:\\\\.|[^'\\\\])*?)'|\"((?:\\\\.|[^\"\\\\])*?)\")/;function Y(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}H.strictDirective=function(t){for(;;){k.lastIndex=t,t+=k.exec(this.input)[0].length;var e=X.exec(this.input.slice(t));if(!e)return!1;if(\"use strict\"===(e[1]||e[2])){k.lastIndex=t+e[0].length;var n=k.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return\";\"===r||\"}\"===r||w.test(n[0])&&!(/[(`.[+\\-/*%<>=,?^&]/.test(r)||\"!\"===r&&\"=\"===this.input.charAt(i+1))}t+=e[0].length,k.lastIndex=t,t+=k.exec(this.input)[0].length,\";\"===this.input[t]&&t++}},H.eat=function(t){return this.type===t&&(this.next(),!0)},H.isContextual=function(t){return this.type===b.name&&this.value===t&&!this.containsEsc},H.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},H.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},H.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||w.test(this.input.slice(this.lastTokEnd,this.start))},H.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},H.semicolon=function(){this.eat(b.semi)||this.insertSemicolon()||this.unexpected()},H.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},H.expect=function(t){this.eat(t)||this.unexpected()},H.unexpected=function(t){this.raise(null!=t?t:this.start,\"Unexpected token\")},H.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,\"Comma is not permitted after the rest element\");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,\"Parenthesized pattern\")}},H.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,i=t.doubleProto;if(!e)return n>=0||i>=0;n>=0&&this.raise(n,\"Shorthand property assignments are valid only in destructuring patterns\"),i>=0&&this.raiseRecoverable(i,\"Redefinition of __proto__ property\")},H.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,\"Yield expression cannot be a default value\"),this.awaitPos&&this.raise(this.awaitPos,\"Await expression cannot be a default value\")},H.isSimpleAssignTarget=function(t){return\"ParenthesizedExpression\"===t.type?this.isSimpleAssignTarget(t.expression):\"Identifier\"===t.type||\"MemberExpression\"===t.type};var q=W.prototype;q.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==b.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var a=r[i];this.raiseRecoverable(this.undefinedExports[a].start,\"Export '\"+a+\"' is not defined\")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,\"Program\")};var J={kind:\"loop\"},Z={kind:\"switch\"};q.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual(\"let\"))return!1;k.lastIndex=this.pos;var e=k.exec(this.input),n=this.pos+e[0].length,i=this.input.charCodeAt(n);if(91===i||92===i||i>55295&&i<56320)return!0;if(t)return!1;if(123===i)return!0;if(f(i,!0)){for(var a=n+1;d(i=this.input.charCodeAt(a),!0);)++a;if(92===i||i>55295&&i<56320)return!0;var s=this.input.slice(n,a);if(!r.test(s))return!0}return!1},q.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual(\"async\"))return!1;k.lastIndex=this.pos;var t,e=k.exec(this.input),n=this.pos+e[0].length;return!(w.test(this.input.slice(this.pos,n))||\"function\"!==this.input.slice(n,n+8)||n+8!==this.input.length&&(d(t=this.input.charCodeAt(n+8))||t>55295&&t<56320))},q.parseStatement=function(t,e,n){var i,r=this.type,a=this.startNode();switch(this.isLet(t)&&(r=b._var,i=\"let\"),r){case b._break:case b._continue:return this.parseBreakContinueStatement(a,r.keyword);case b._debugger:return this.parseDebuggerStatement(a);case b._do:return this.parseDoStatement(a);case b._for:return this.parseForStatement(a);case b._function:return t&&(this.strict||\"if\"!==t&&\"label\"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!t);case b._class:return t&&this.unexpected(),this.parseClass(a,!0);case b._if:return this.parseIfStatement(a);case b._return:return this.parseReturnStatement(a);case b._switch:return this.parseSwitchStatement(a);case b._throw:return this.parseThrowStatement(a);case b._try:return this.parseTryStatement(a);case b._const:case b._var:return i=i||this.value,t&&\"var\"!==i&&this.unexpected(),this.parseVarStatement(a,i);case b._while:return this.parseWhileStatement(a);case b._with:return this.parseWithStatement(a);case b.braceL:return this.parseBlock(!0,a);case b.semi:return this.parseEmptyStatement(a);case b._export:case b._import:if(this.options.ecmaVersion>10&&r===b._import){k.lastIndex=this.pos;var s=k.exec(this.input),o=this.pos+s[0].length,u=this.input.charCodeAt(o);if(40===u||46===u)return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,\"'import' and 'export' may only appear at the top level\"),this.inModule||this.raise(this.start,\"'import' and 'export' may appear only with 'sourceType: module'\")),r===b._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!t);var l=this.value,c=this.parseExpression();return r===b.name&&\"Identifier\"===c.type&&this.eat(b.colon)?this.parseLabeledStatement(a,l,c,t):this.parseExpressionStatement(a,c)}},q.parseBreakContinueStatement=function(t,e){var n=\"break\"===e;this.next(),this.eat(b.semi)||this.insertSemicolon()?t.label=null:this.type!==b.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(n||\"loop\"===r.kind))break;if(t.label&&n)break}}return i===this.labels.length&&this.raise(t.start,\"Unsyntactic \"+e),this.finishNode(t,n?\"BreakStatement\":\"ContinueStatement\")},q.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,\"DebuggerStatement\")},q.parseDoStatement=function(t){return this.next(),this.labels.push(J),t.body=this.parseStatement(\"do\"),this.labels.pop(),this.expect(b._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(t,\"DoWhileStatement\")},q.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual(\"await\")?this.lastTokStart:-1;if(this.labels.push(J),this.enterScope(0),this.expect(b.parenL),this.type===b.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===b._var||this.type===b._const||n){var i=this.startNode(),r=n?\"let\":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,\"VariableDeclaration\"),(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual(\"of\"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===b._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var a=this.isContextual(\"let\"),s=!1,o=new Y,u=this.parseExpression(!(e>-1)||\"await\",o);return this.type===b._in||(s=this.options.ecmaVersion>=6&&this.isContextual(\"of\"))?(this.options.ecmaVersion>=9&&(this.type===b._in?e>-1&&this.unexpected(e):t.await=e>-1),a&&s&&this.raise(u.start,\"The left-hand side of a for-of loop may not start with 'let'.\"),this.toAssignable(u,!1,o),this.checkLValPattern(u),this.parseForIn(t,u)):(this.checkExpressionErrors(o,!0),e>-1&&this.unexpected(e),this.parseFor(t,u))},q.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,Q|(n?0:$),!1,e)},q.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(\"if\"),t.alternate=this.eat(b._else)?this.parseStatement(\"if\"):null,this.finishNode(t,\"IfStatement\")},q.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,\"'return' outside of function\"),this.next(),this.eat(b.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,\"ReturnStatement\")},q.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(b.braceL),this.labels.push(Z),this.enterScope(0);for(var n=!1;this.type!==b.braceR;)if(this.type===b._case||this.type===b._default){var i=this.type===b._case;e&&this.finishNode(e,\"SwitchCase\"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,\"Multiple default clauses\"),n=!0,e.test=null),this.expect(b.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,\"SwitchCase\"),this.next(),this.labels.pop(),this.finishNode(t,\"SwitchStatement\")},q.parseThrowStatement=function(t){return this.next(),w.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,\"Illegal newline after throw\"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,\"ThrowStatement\")};var K=[];q.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===b._catch){var e=this.startNode();if(this.next(),this.eat(b.parenL)){e.param=this.parseBindingAtom();var n=\"Identifier\"===e.param.type;this.enterScope(n?32:0),this.checkLValPattern(e.param,n?4:2),this.expect(b.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,\"CatchClause\")}return t.finalizer=this.eat(b._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,\"Missing catch or finally clause\"),this.finishNode(t,\"TryStatement\")},q.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,\"VariableDeclaration\")},q.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(J),t.body=this.parseStatement(\"while\"),this.labels.pop(),this.finishNode(t,\"WhileStatement\")},q.parseWithStatement=function(t){return this.strict&&this.raise(this.start,\"'with' in strict mode\"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(\"with\"),this.finishNode(t,\"WithStatement\")},q.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,\"EmptyStatement\")},q.parseLabeledStatement=function(t,e,n,i){for(var r=0,a=this.labels;r<a.length;r+=1)a[r].name===e&&this.raise(n.start,\"Label '\"+e+\"' is already declared\");for(var s=this.type.isLoop?\"loop\":this.type===b._switch?\"switch\":null,o=this.labels.length-1;o>=0;o--){var u=this.labels[o];if(u.statementStart!==t.start)break;u.statementStart=this.start,u.kind=s}return this.labels.push({name:e,kind:s,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf(\"label\")?i+\"label\":i:\"label\"),this.labels.pop(),t.label=n,this.finishNode(t,\"LabeledStatement\")},q.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,\"ExpressionStatement\")},q.parseBlock=function(t,e,n){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(b.braceL),t&&this.enterScope(0);this.type!==b.braceR;){var i=this.parseStatement(null);e.body.push(i)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,\"BlockStatement\")},q.parseFor=function(t,e){return t.init=e,this.expect(b.semi),t.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),t.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),t.body=this.parseStatement(\"for\"),this.exitScope(),this.labels.pop(),this.finishNode(t,\"ForStatement\")},q.parseForIn=function(t,e){var n=this.type===b._in;return this.next(),\"VariableDeclaration\"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||\"var\"!==e.kind||\"Identifier\"!==e.declarations[0].id.type)&&this.raise(e.start,(n?\"for-in\":\"for-of\")+\" loop variable declaration may not have an initializer\"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(b.parenR),t.body=this.parseStatement(\"for\"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?\"ForInStatement\":\"ForOfStatement\")},q.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(b.eq)?i.init=this.parseMaybeAssign(e):\"const\"!==n||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual(\"of\")?\"Identifier\"===i.id.type||e&&(this.type===b._in||this.isContextual(\"of\"))?i.init=null:this.raise(this.lastTokEnd,\"Complex binding patterns require an initialization value\"):this.unexpected(),t.declarations.push(this.finishNode(i,\"VariableDeclarator\")),!this.eat(b.comma))break}return t},q.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,\"var\"===e?1:2,!1)};var Q=1,$=2;function tt(t,e){var n=e.key.name,i=t[n],r=\"true\";return\"MethodDefinition\"!==e.type||\"get\"!==e.kind&&\"set\"!==e.kind||(r=(e.static?\"s\":\"i\")+e.kind),\"iget\"===i&&\"iset\"===r||\"iset\"===i&&\"iget\"===r||\"sget\"===i&&\"sset\"===r||\"sset\"===i&&\"sget\"===r?(t[n]=\"true\",!1):!!i||(t[n]=r,!1)}function et(t,e){var n=t.computed,i=t.key;return!n&&(\"Identifier\"===i.type&&i.name===e||\"Literal\"===i.type&&i.value===e)}q.parseFunction=function(t,e,n,i,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===b.star&&e&$&&this.unexpected(),t.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&Q&&(t.id=4&e&&this.type!==b.name?null:this.parseIdent(),!t.id||e&$||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var a=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(V(t.async,t.generator)),e&Q||(t.id=this.type===b.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1,r),this.yieldPos=a,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(t,e&Q?\"FunctionDeclaration\":\"FunctionExpression\")},q.parseFunctionParams=function(t){this.expect(b.parenL),t.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},q.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.enterClassBody(),r=this.startNode(),a=!1;for(r.body=[],this.expect(b.braceL);this.type!==b.braceR;){var s=this.parseClassElement(null!==t.superClass);s&&(r.body.push(s),\"MethodDefinition\"===s.type&&\"constructor\"===s.kind?(a&&this.raise(s.start,\"Duplicate constructor in the same class\"),a=!0):s.key&&\"PrivateIdentifier\"===s.key.type&&tt(i,s)&&this.raiseRecoverable(s.key.start,\"Identifier '#\"+s.key.name+\"' has already been declared\"))}return this.strict=n,this.next(),t.body=this.finishNode(r,\"ClassBody\"),this.exitClassBody(),this.finishNode(t,e?\"ClassDeclaration\":\"ClassExpression\")},q.parseClassElement=function(t){if(this.eat(b.semi))return null;var e=this.options.ecmaVersion,n=this.startNode(),i=\"\",r=!1,a=!1,s=\"method\",o=!1;if(this.eatContextual(\"static\")){if(e>=13&&this.eat(b.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===b.star?o=!0:i=\"static\"}if(n.static=o,!i&&e>=8&&this.eatContextual(\"async\")&&(!this.isClassElementNameStart()&&this.type!==b.star||this.canInsertSemicolon()?i=\"async\":a=!0),!i&&(e>=9||!a)&&this.eat(b.star)&&(r=!0),!i&&!a&&!r){var u=this.value;(this.eatContextual(\"get\")||this.eatContextual(\"set\"))&&(this.isClassElementNameStart()?s=u:i=u)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,\"Identifier\")):this.parseClassElementName(n),e<13||this.type===b.parenL||\"method\"!==s||r||a){var l=!n.static&&et(n,\"constructor\"),c=l&&t;l&&\"method\"!==s&&this.raise(n.key.start,\"Constructor can't have get/set modifier\"),n.kind=l?\"constructor\":s,this.parseClassMethod(n,r,a,c)}else this.parseClassField(n);return n},q.isClassElementNameStart=function(){return this.type===b.name||this.type===b.privateId||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword},q.parseClassElementName=function(t){this.type===b.privateId?(\"constructor\"===this.value&&this.raise(this.start,\"Classes can't have an element named '#constructor'\"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)},q.parseClassMethod=function(t,e,n,i){var r=t.key;\"constructor\"===t.kind?(e&&this.raise(r.start,\"Constructor can't be a generator\"),n&&this.raise(r.start,\"Constructor can't be an async method\")):t.static&&et(t,\"prototype\")&&this.raise(r.start,\"Classes may not have a static property named prototype\");var a=t.value=this.parseMethod(e,n,i);return\"get\"===t.kind&&0!==a.params.length&&this.raiseRecoverable(a.start,\"getter should have no params\"),\"set\"===t.kind&&1!==a.params.length&&this.raiseRecoverable(a.start,\"setter should have exactly one param\"),\"set\"===t.kind&&\"RestElement\"===a.params[0].type&&this.raiseRecoverable(a.params[0].start,\"Setter cannot use rest params\"),this.finishNode(t,\"MethodDefinition\")},q.parseClassField=function(t){if(et(t,\"constructor\")?this.raise(t.key.start,\"Classes can't have a field named 'constructor'\"):t.static&&et(t,\"prototype\")&&this.raise(t.key.start,\"Classes can't have a static field named 'prototype'\"),this.eat(b.eq)){var e=this.currentThisScope(),n=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=n}else t.value=null;return this.semicolon(),this.finishNode(t,\"PropertyDefinition\")},q.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(320);this.type!==b.braceR;){var n=this.parseStatement(null);t.body.push(n)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,\"StaticBlock\")},q.parseClassId=function(t,e){this.type===b.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},q.parseClassSuper=function(t){t.superClass=this.eat(b._extends)?this.parseExprSubscripts(!1):null},q.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared},q.exitClassBody=function(){for(var t=this.privateNameStack.pop(),e=t.declared,n=t.used,i=this.privateNameStack.length,r=0===i?null:this.privateNameStack[i-1],a=0;a<n.length;++a){var s=n[a];P(e,s.name)||(r?r.used.push(s):this.raiseRecoverable(s.start,\"Private field '#\"+s.name+\"' must be declared in an enclosing class\"))}},q.parseExport=function(t,e){if(this.next(),this.eat(b.star))return this.options.ecmaVersion>=11&&(this.eatContextual(\"as\")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported.name,this.lastTokStart)):t.exported=null),this.expectContextual(\"from\"),this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,\"ExportAllDeclaration\");if(this.eat(b._default)){var n;if(this.checkExport(e,\"default\",this.lastTokStart),this.type===b._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(i,4|Q,!1,n)}else if(this.type===b._class){var r=this.startNode();t.declaration=this.parseClass(r,\"nullableID\")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,\"ExportDefaultDeclaration\")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),\"VariableDeclaration\"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual(\"from\"))this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,s=t.specifiers;a<s.length;a+=1){var o=s[a];this.checkUnreserved(o.local),this.checkLocalExport(o.local),\"Literal\"===o.local.type&&this.raise(o.local.start,\"A string literal cannot be used as an exported binding without `from`.\")}t.source=null}this.semicolon()}return this.finishNode(t,\"ExportNamedDeclaration\")},q.checkExport=function(t,e,n){t&&(P(t,e)&&this.raiseRecoverable(n,\"Duplicate export '\"+e+\"'\"),t[e]=!0)},q.checkPatternExport=function(t,e){var n=e.type;if(\"Identifier\"===n)this.checkExport(t,e.name,e.start);else if(\"ObjectPattern\"===n)for(var i=0,r=e.properties;i<r.length;i+=1){var a=r[i];this.checkPatternExport(t,a)}else if(\"ArrayPattern\"===n)for(var s=0,o=e.elements;s<o.length;s+=1){var u=o[s];u&&this.checkPatternExport(t,u)}else\"Property\"===n?this.checkPatternExport(t,e.value):\"AssignmentPattern\"===n?this.checkPatternExport(t,e.left):\"RestElement\"===n?this.checkPatternExport(t,e.argument):\"ParenthesizedExpression\"===n&&this.checkPatternExport(t,e.expression)},q.checkVariableExport=function(t,e){if(t)for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.checkPatternExport(t,r.id)}},q.shouldParseExportStatement=function(){return\"var\"===this.type.keyword||\"const\"===this.type.keyword||\"class\"===this.type.keyword||\"function\"===this.type.keyword||this.isLet()||this.isAsyncFunction()},q.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var i=this.startNode();i.local=this.parseModuleExportName(),i.exported=this.eatContextual(\"as\")?this.parseModuleExportName():i.local,this.checkExport(t,i.exported[\"Identifier\"===i.exported.type?\"name\":\"value\"],i.exported.start),e.push(this.finishNode(i,\"ExportSpecifier\"))}return e},q.parseImport=function(t){return this.next(),this.type===b.string?(t.specifiers=K,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual(\"from\"),t.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,\"ImportDeclaration\")},q.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===b.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,2),t.push(this.finishNode(n,\"ImportDefaultSpecifier\")),!this.eat(b.comma))return t}if(this.type===b.star){var i=this.startNode();return this.next(),this.expectContextual(\"as\"),i.local=this.parseIdent(),this.checkLValSimple(i.local,2),t.push(this.finishNode(i,\"ImportNamespaceSpecifier\")),t}for(this.expect(b.braceL);!this.eat(b.braceR);){if(e)e=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var r=this.startNode();r.imported=this.parseModuleExportName(),this.eatContextual(\"as\")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLValSimple(r.local,2),t.push(this.finishNode(r,\"ImportSpecifier\"))}return t},q.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===b.string){var t=this.parseLiteral(this.value);return D.test(t.value)&&this.raise(t.start,\"An export name cannot include a lone surrogate.\"),t}return this.parseIdent(!0)},q.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},q.isDirectiveCandidate=function(t){return\"ExpressionStatement\"===t.type&&\"Literal\"===t.expression.type&&\"string\"==typeof t.expression.value&&('\"'===this.input[t.start]||\"'\"===this.input[t.start])};var nt=W.prototype;nt.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case\"Identifier\":this.inAsync&&\"await\"===t.name&&this.raise(t.start,\"Cannot use 'await' as identifier inside an async function\");break;case\"ObjectPattern\":case\"ArrayPattern\":case\"AssignmentPattern\":case\"RestElement\":break;case\"ObjectExpression\":t.type=\"ObjectPattern\",n&&this.checkPatternErrors(n,!0);for(var i=0,r=t.properties;i<r.length;i+=1){var a=r[i];this.toAssignable(a,e),\"RestElement\"!==a.type||\"ArrayPattern\"!==a.argument.type&&\"ObjectPattern\"!==a.argument.type||this.raise(a.argument.start,\"Unexpected token\")}break;case\"Property\":\"init\"!==t.kind&&this.raise(t.key.start,\"Object pattern can't contain getter or setter\"),this.toAssignable(t.value,e);break;case\"ArrayExpression\":t.type=\"ArrayPattern\",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case\"SpreadElement\":t.type=\"RestElement\",this.toAssignable(t.argument,e),\"AssignmentPattern\"===t.argument.type&&this.raise(t.argument.start,\"Rest elements cannot have a default value\");break;case\"AssignmentExpression\":\"=\"!==t.operator&&this.raise(t.left.end,\"Only '=' operator can be used for specifying default value.\"),t.type=\"AssignmentPattern\",delete t.operator,this.toAssignable(t.left,e);break;case\"ParenthesizedExpression\":this.toAssignable(t.expression,e,n);break;case\"ChainExpression\":this.raiseRecoverable(t.start,\"Optional chaining cannot appear in left-hand side\");break;case\"MemberExpression\":if(!e)break;default:this.raise(t.start,\"Assigning to rvalue\")}else n&&this.checkPatternErrors(n,!0);return t},nt.toAssignableList=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];r&&this.toAssignable(r,e)}if(n){var a=t[n-1];6===this.options.ecmaVersion&&e&&a&&\"RestElement\"===a.type&&\"Identifier\"!==a.argument.type&&this.unexpected(a.argument.start)}return t},nt.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,\"SpreadElement\")},nt.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==b.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,\"RestElement\")},nt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case b.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(t,\"ArrayPattern\");case b.braceL:return this.parseObj(!0)}return this.parseIdent()},nt.parseBindingList=function(t,e,n){for(var i=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(b.comma),e&&this.type===b.comma)i.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===b.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),i.push(a),this.type===b.comma&&this.raise(this.start,\"Comma is not permitted after the rest element\"),this.expect(t);break}var s=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(s),i.push(s)}return i},nt.parseBindingListItem=function(t){return t},nt.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return n;var i=this.startNodeAt(t,e);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,\"AssignmentPattern\")},nt.checkLValSimple=function(t,e,n){void 0===e&&(e=0);var i=0!==e;switch(t.type){case\"Identifier\":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(i?\"Binding \":\"Assigning to \")+t.name+\" in strict mode\"),i&&(2===e&&\"let\"===t.name&&this.raiseRecoverable(t.start,\"let is disallowed as a lexically bound name\"),n&&(P(n,t.name)&&this.raiseRecoverable(t.start,\"Argument name clash\"),n[t.name]=!0),5!==e&&this.declareName(t.name,e,t.start));break;case\"ChainExpression\":this.raiseRecoverable(t.start,\"Optional chaining cannot appear in left-hand side\");break;case\"MemberExpression\":i&&this.raiseRecoverable(t.start,\"Binding member expression\");break;case\"ParenthesizedExpression\":return i&&this.raiseRecoverable(t.start,\"Binding parenthesized expression\"),this.checkLValSimple(t.expression,e,n);default:this.raise(t.start,(i?\"Binding\":\"Assigning to\")+\" rvalue\")}},nt.checkLValPattern=function(t,e,n){switch(void 0===e&&(e=0),t.type){case\"ObjectPattern\":for(var i=0,r=t.properties;i<r.length;i+=1){var a=r[i];this.checkLValInnerPattern(a,e,n)}break;case\"ArrayPattern\":for(var s=0,o=t.elements;s<o.length;s+=1){var u=o[s];u&&this.checkLValInnerPattern(u,e,n)}break;default:this.checkLValSimple(t,e,n)}},nt.checkLValInnerPattern=function(t,e,n){switch(void 0===e&&(e=0),t.type){case\"Property\":this.checkLValInnerPattern(t.value,e,n);break;case\"AssignmentPattern\":this.checkLValPattern(t.left,e,n);break;case\"RestElement\":this.checkLValPattern(t.argument,e,n);break;default:this.checkLValPattern(t,e,n)}};var it=function(t,e,n,i,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=i,this.generator=!!r},rt={b_stat:new it(\"{\",!1),b_expr:new it(\"{\",!0),b_tmpl:new it(\"${\",!1),p_stat:new it(\"(\",!1),p_expr:new it(\"(\",!0),q_tmpl:new it(\"`\",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new it(\"function\",!1),f_expr:new it(\"function\",!0),f_expr_gen:new it(\"function\",!0,!1,null,!0),f_gen:new it(\"function\",!1,!1,null,!0)},at=W.prototype;at.initialContext=function(){return[rt.b_stat]},at.curContext=function(){return this.context[this.context.length-1]},at.braceIsBlock=function(t){var e=this.curContext();return e===rt.f_expr||e===rt.f_stat||(t!==b.colon||e!==rt.b_stat&&e!==rt.b_expr?t===b._return||t===b.name&&this.exprAllowed?w.test(this.input.slice(this.lastTokEnd,this.start)):t===b._else||t===b.semi||t===b.eof||t===b.parenR||t===b.arrow||(t===b.braceL?e===rt.b_stat:t!==b._var&&t!==b._const&&t!==b.name&&!this.exprAllowed):!e.isExpr)},at.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if(\"function\"===e.token)return e.generator}return!1},at.updateContext=function(t){var e,n=this.type;n.keyword&&t===b.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},at.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===rt.b_stat&&\"function\"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?rt.b_stat:rt.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(rt.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(t){var e=t===b._if||t===b._for||t===b._with||t===b._while;this.context.push(e?rt.p_stat:rt.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=b._class.updateContext=function(t){!t.beforeExpr||t===b._else||t===b.semi&&this.curContext()!==rt.p_stat||t===b._return&&w.test(this.input.slice(this.lastTokEnd,this.start))||(t===b.colon||t===b.braceL)&&this.curContext()===rt.b_stat?this.context.push(rt.f_stat):this.context.push(rt.f_expr),this.exprAllowed=!1},b.backQuote.updateContext=function(){this.curContext()===rt.q_tmpl?this.context.pop():this.context.push(rt.q_tmpl),this.exprAllowed=!1},b.star.updateContext=function(t){if(t===b._function){var e=this.context.length-1;this.context[e]===rt.f_expr?this.context[e]=rt.f_expr_gen:this.context[e]=rt.f_gen}this.exprAllowed=!0},b.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==b.dot&&(\"of\"===this.value&&!this.exprAllowed||\"yield\"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var st=W.prototype;function ot(t){return\"MemberExpression\"===t.type&&\"PrivateIdentifier\"===t.property.type||\"ChainExpression\"===t.type&&ot(t.expression)}st.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&\"SpreadElement\"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,r=t.key;switch(r.type){case\"Identifier\":i=r.name;break;case\"Literal\":i=String(r.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)\"__proto__\"===i&&\"init\"===a&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,\"Redefinition of __proto__ property\")),e.proto=!0);else{var s=e[i=\"$\"+i];s?(\"init\"===a?this.strict&&s.init||s.get||s.set:s.init||s[a])&&this.raiseRecoverable(r.start,\"Redefinition of property\"):s=e[i]={init:!1,get:!1,set:!1},s[a]=!0}}},st.parseExpression=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===b.comma){var a=this.startNodeAt(n,i);for(a.expressions=[r];this.eat(b.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,\"SequenceExpression\")}return r},st.parseMaybeAssign=function(t,e,n){if(this.isContextual(\"yield\")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,r=-1,a=-1,s=-1;e?(r=e.parenthesizedAssign,a=e.trailingComma,s=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new Y,i=!0);var o=this.start,u=this.startLoc;this.type!==b.parenL&&this.type!==b.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=\"await\"===t);var l=this.parseMaybeConditional(t,e);if(n&&(l=n.call(this,l,o,u)),this.type.isAssign){var c=this.startNodeAt(o,u);return c.operator=this.value,this.type===b.eq&&(l=this.toAssignable(l,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=l.start&&(e.shorthandAssign=-1),this.type===b.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(t),s>-1&&(e.doubleProto=s),this.finishNode(c,\"AssignmentExpression\")}return i&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),a>-1&&(e.trailingComma=a),l},st.parseMaybeConditional=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(b.question)){var a=this.startNodeAt(n,i);return a.test=r,a.consequent=this.parseMaybeAssign(),this.expect(b.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,\"ConditionalExpression\")}return r},st.parseExprOps=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||r.start===n&&\"ArrowFunctionExpression\"===r.type?r:this.parseExprOp(r,n,i,-1,t)},st.parseExprOp=function(t,e,n,i,r){var a=this.type.binop;if(null!=a&&(!r||this.type!==b._in)&&a>i){var s=this.type===b.logicalOR||this.type===b.logicalAND,o=this.type===b.coalesce;o&&(a=b.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),l,c,a,r),f=this.buildBinary(e,n,t,h,u,s||o);return(s&&this.type===b.coalesce||o&&(this.type===b.logicalOR||this.type===b.logicalAND))&&this.raiseRecoverable(this.start,\"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses\"),this.parseExprOp(f,e,n,i,r)}return t},st.buildBinary=function(t,e,n,i,r,a){\"PrivateIdentifier\"===i.type&&this.raise(i.start,\"Private identifier can only be left side of binary expression\");var s=this.startNodeAt(t,e);return s.left=n,s.operator=r,s.right=i,this.finishNode(s,a?\"LogicalExpression\":\"BinaryExpression\")},st.parseMaybeUnary=function(t,e,n,i){var r,a=this.start,s=this.startLoc;if(this.isContextual(\"await\")&&this.canAwait)r=this.parseAwait(i),e=!0;else if(this.type.prefix){var o=this.startNode(),u=this.type===b.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,u,i),this.checkExpressionErrors(t,!0),u?this.checkLValSimple(o.argument):this.strict&&\"delete\"===o.operator&&\"Identifier\"===o.argument.type?this.raiseRecoverable(o.start,\"Deleting local variable in strict mode\"):\"delete\"===o.operator&&ot(o.argument)?this.raiseRecoverable(o.start,\"Private fields can not be deleted\"):e=!0,r=this.finishNode(o,u?\"UpdateExpression\":\"UnaryExpression\")}else if(e||this.type!==b.privateId){if(r=this.parseExprSubscripts(t,i),this.checkExpressionErrors(t))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(a,s);l.operator=this.value,l.prefix=!1,l.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(l,\"UpdateExpression\")}}else(i||0===this.privateNameStack.length)&&this.unexpected(),r=this.parsePrivateIdent(),this.type!==b._in&&this.unexpected();return n||!this.eat(b.starstar)?r:e?void this.unexpected(this.lastTokStart):this.buildBinary(a,s,r,this.parseMaybeUnary(null,!1,!1,i),\"**\",!1)},st.parseExprSubscripts=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprAtom(t,e);if(\"ArrowFunctionExpression\"===r.type&&\")\"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var a=this.parseSubscripts(r,n,i,!1,e);return t&&\"MemberExpression\"===a.type&&(t.parenthesizedAssign>=a.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=a.start&&(t.parenthesizedBind=-1),t.trailingComma>=a.start&&(t.trailingComma=-1)),a},st.parseSubscripts=function(t,e,n,i,r){for(var a=this.options.ecmaVersion>=8&&\"Identifier\"===t.type&&\"async\"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,s=!1;;){var o=this.parseSubscript(t,e,n,i,a,s,r);if(o.optional&&(s=!0),o===t||\"ArrowFunctionExpression\"===o.type){if(s){var u=this.startNodeAt(e,n);u.expression=o,o=this.finishNode(u,\"ChainExpression\")}return o}t=o}},st.parseSubscript=function(t,e,n,i,r,a,s){var o=this.options.ecmaVersion>=11,u=o&&this.eat(b.questionDot);i&&u&&this.raise(this.lastTokStart,\"Optional chaining cannot appear in the callee of new expressions\");var l=this.eat(b.bracketL);if(l||u&&this.type!==b.parenL&&this.type!==b.backQuote||this.eat(b.dot)){var c=this.startNodeAt(e,n);c.object=t,l?(c.property=this.parseExpression(),this.expect(b.bracketR)):this.type===b.privateId&&\"Super\"!==t.type?c.property=this.parsePrivateIdent():c.property=this.parseIdent(\"never\"!==this.options.allowReserved),c.computed=!!l,o&&(c.optional=u),t=this.finishNode(c,\"MemberExpression\")}else if(!i&&this.eat(b.parenL)){var h=new Y,f=this.yieldPos,d=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!u&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,\"Cannot use 'await' as identifier inside an async function\"),this.yieldPos=f,this.awaitPos=d,this.awaitIdentPos=p,this.parseArrowExpression(this.startNodeAt(e,n),g,!0,s);this.checkExpressionErrors(h,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var v=this.startNodeAt(e,n);v.callee=t,v.arguments=g,o&&(v.optional=u),t=this.finishNode(v,\"CallExpression\")}else if(this.type===b.backQuote){(u||a)&&this.raise(this.start,\"Optional chaining cannot appear in the tag of tagged template expressions\");var m=this.startNodeAt(e,n);m.tag=t,m.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(m,\"TaggedTemplateExpression\")}return t},st.parseExprAtom=function(t,e){this.type===b.slash&&this.readRegexp();var n,i=this.potentialArrowAt===this.start;switch(this.type){case b._super:return this.allowSuper||this.raise(this.start,\"'super' keyword outside a method\"),n=this.startNode(),this.next(),this.type!==b.parenL||this.allowDirectSuper||this.raise(n.start,\"super() call outside constructor of a subclass\"),this.type!==b.dot&&this.type!==b.bracketL&&this.type!==b.parenL&&this.unexpected(),this.finishNode(n,\"Super\");case b._this:return n=this.startNode(),this.next(),this.finishNode(n,\"ThisExpression\");case b.name:var r=this.start,a=this.startLoc,s=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&\"async\"===o.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.overrideContext(rt.f_expr),this.parseFunction(this.startNodeAt(r,a),0,!1,!0,e);if(i&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(r,a),[o],!1,e);if(this.options.ecmaVersion>=8&&\"async\"===o.name&&this.type===b.name&&!s&&(!this.potentialArrowInForAwait||\"of\"!==this.value||this.containsEsc))return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,a),[o],!0,e)}return o;case b.regexp:var u=this.value;return(n=this.parseLiteral(u.value)).regex={pattern:u.pattern,flags:u.flags},n;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(n=this.startNode()).value=this.type===b._null?null:this.type===b._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,\"Literal\");case b.parenL:var l=this.start,c=this.parseParenAndDistinguishExpression(i,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(t.parenthesizedAssign=l),t.parenthesizedBind<0&&(t.parenthesizedBind=l)),c;case b.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(b.bracketR,!0,!0,t),this.finishNode(n,\"ArrayExpression\");case b.braceL:return this.overrideContext(rt.b_expr),this.parseObj(!1,t);case b._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();case b._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},st.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,\"Escape sequence in keyword import\");var e=this.parseIdent(!0);switch(this.type){case b.parenL:return this.parseDynamicImport(t);case b.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}},st.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(b.parenR)){var e=this.start;this.eat(b.comma)&&this.eat(b.parenR)?this.raiseRecoverable(e,\"Trailing comma is not allowed in import()\"):this.unexpected(e)}return this.finishNode(t,\"ImportExpression\")},st.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),\"meta\"!==t.property.name&&this.raiseRecoverable(t.property.start,\"The only valid meta property for import is 'import.meta'\"),e&&this.raiseRecoverable(t.start,\"'import.meta' must not contain escaped characters\"),\"module\"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,\"Cannot use 'import.meta' outside a module\"),this.finishNode(t,\"MetaProperty\")},st.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,\"\")),this.next(),this.finishNode(e,\"Literal\")},st.parseParenExpression=function(){this.expect(b.parenL);var t=this.parseExpression();return this.expect(b.parenR),t},st.parseParenAndDistinguishExpression=function(t,e){var n,i=this.start,r=this.startLoc,a=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,o=this.start,u=this.startLoc,l=[],c=!0,h=!1,f=new Y,d=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(c?c=!1:this.expect(b.comma),a&&this.afterTrailingComma(b.parenR,!0)){h=!0;break}if(this.type===b.ellipsis){s=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===b.comma&&this.raise(this.start,\"Comma is not permitted after the rest element\");break}l.push(this.parseMaybeAssign(!1,f,this.parseParenItem))}var g=this.lastTokEnd,v=this.lastTokEndLoc;if(this.expect(b.parenR),t&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(i,r,l,e);l.length&&!h||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,l.length>1?((n=this.startNodeAt(o,u)).expressions=l,this.finishNodeAt(n,\"SequenceExpression\",g,v)):n=l[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(i,r);return m.expression=n,this.finishNode(m,\"ParenthesizedExpression\")}return n},st.parseParenItem=function(t){return t},st.parseParenArrowList=function(t,e,n,i){return this.parseArrowExpression(this.startNodeAt(t,e),n,!1,i)};var ut=[];st.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,\"Escape sequence in keyword new\");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(b.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),\"target\"!==t.property.name&&this.raiseRecoverable(t.property.start,\"The only valid meta property for new is 'new.target'\"),n&&this.raiseRecoverable(t.start,\"'new.target' must not contain escaped characters\"),this.allowNewDotTarget||this.raiseRecoverable(t.start,\"'new.target' can only be used in functions and class static block\"),this.finishNode(t,\"MetaProperty\")}var i=this.start,r=this.startLoc,a=this.type===b._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0,!1),a&&\"ImportExpression\"===t.callee.type&&this.raise(i,\"Cannot use new with import()\"),this.eat(b.parenL)?t.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1):t.arguments=ut,this.finishNode(t,\"NewExpression\")},st.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===b.invalidTemplate?(e||this.raiseRecoverable(this.start,\"Bad escape sequence in untagged template literal\"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\\r\\n?/g,\"\\n\"),cooked:this.value},this.next(),n.tail=this.type===b.backQuote,this.finishNode(n,\"TemplateElement\")},st.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(n.quasis=[i];!i.tail;)this.type===b.eof&&this.raise(this.pos,\"Unterminated template literal\"),this.expect(b.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(b.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,\"TemplateLiteral\")},st.isAsyncProp=function(t){return!t.computed&&\"Identifier\"===t.key.type&&\"async\"===t.key.name&&(this.type===b.name||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===b.star)&&!w.test(this.input.slice(this.lastTokEnd,this.start))},st.parseObj=function(t,e){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(b.braceR);){if(i)i=!1;else if(this.expect(b.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(b.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,r,e),n.properties.push(a)}return this.finishNode(n,t?\"ObjectPattern\":\"ObjectExpression\")},st.parseProperty=function(t,e){var n,i,r,a,s=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(b.ellipsis))return t?(s.argument=this.parseIdent(!1),this.type===b.comma&&this.raise(this.start,\"Comma is not permitted after the rest element\"),this.finishNode(s,\"RestElement\")):(this.type===b.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),s.argument=this.parseMaybeAssign(!1,e),this.type===b.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(s,\"SpreadElement\"));this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(t||e)&&(r=this.start,a=this.startLoc),t||(n=this.eat(b.star)));var o=this.containsEsc;return this.parsePropertyName(s),!t&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(s)?(i=!0,n=this.options.ecmaVersion>=9&&this.eat(b.star),this.parsePropertyName(s,e)):i=!1,this.parsePropertyValue(s,t,n,i,r,a,e,o),this.finishNode(s,\"Property\")},st.parsePropertyValue=function(t,e,n,i,r,a,s,o){if((n||i)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,s),t.kind=\"init\";else if(this.options.ecmaVersion>=6&&this.type===b.parenL)e&&this.unexpected(),t.kind=\"init\",t.method=!0,t.value=this.parseMethod(n,i);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||\"Identifier\"!==t.key.type||\"get\"!==t.key.name&&\"set\"!==t.key.name||this.type===b.comma||this.type===b.braceR||this.type===b.eq)this.options.ecmaVersion>=6&&!t.computed&&\"Identifier\"===t.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(t.key),\"await\"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind=\"init\",e?t.value=this.parseMaybeDefault(r,a,this.copyNode(t.key)):this.type===b.eq&&s?(s.shorthandAssign<0&&(s.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,a,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected();else{(n||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u=\"get\"===t.kind?0:1;if(t.value.params.length!==u){var l=t.value.start;\"get\"===t.kind?this.raiseRecoverable(l,\"getter should have no params\"):this.raiseRecoverable(l,\"setter should have exactly one param\")}else\"set\"===t.kind&&\"RestElement\"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,\"Setter cannot use rest params\")}},st.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(b.bracketR),t.key;t.computed=!1}return t.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent(\"never\"!==this.options.allowReserved)},st.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},st.parseMethod=function(t,e,n){var i=this.startNode(),r=this.yieldPos,a=this.awaitPos,s=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|V(e,i.generator)|(n?128:0)),this.expect(b.parenL),i.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=s,this.finishNode(i,\"FunctionExpression\")},st.parseArrowExpression=function(t,e,n,i){var r=this.yieldPos,a=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|V(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,i),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=s,this.finishNode(t,\"ArrowFunctionExpression\")},st.parseFunctionBody=function(t,e,n,i){var r=e&&this.type!==b.braceL,a=this.strict,s=!1;if(r)t.body=this.parseMaybeAssign(i),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);a&&!o||(s=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,\"Illegal 'use strict' directive in function with non-simple parameter list\");var u=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(t,!a&&!s&&!e&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,5),t.body=this.parseBlock(!1,void 0,s&&!a),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=u}this.exitScope()},st.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1)if(\"Identifier\"!==n[e].type)return!1;return!0},st.checkParams=function(t,e){for(var n=Object.create(null),i=0,r=t.params;i<r.length;i+=1){var a=r[i];this.checkLValInnerPattern(a,1,e?null:n)}},st.parseExprList=function(t,e,n,i){for(var r=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(b.comma),e&&this.afterTrailingComma(t))break;var s=void 0;n&&this.type===b.comma?s=null:this.type===b.ellipsis?(s=this.parseSpread(i),i&&this.type===b.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):s=this.parseMaybeAssign(!1,i),r.push(s)}return r},st.checkUnreserved=function(t){var e=t.start,n=t.end,i=t.name;this.inGenerator&&\"yield\"===i&&this.raiseRecoverable(e,\"Cannot use 'yield' as identifier inside a generator\"),this.inAsync&&\"await\"===i&&this.raiseRecoverable(e,\"Cannot use 'await' as identifier inside an async function\"),this.currentThisScope().inClassFieldInit&&\"arguments\"===i&&this.raiseRecoverable(e,\"Cannot use 'arguments' in class field initializer\"),!this.inClassStaticBlock||\"arguments\"!==i&&\"await\"!==i||this.raise(e,\"Cannot use \"+i+\" in class static initialization block\"),this.keywords.test(i)&&this.raise(e,\"Unexpected keyword '\"+i+\"'\"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf(\"\\\\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||\"await\"!==i||this.raiseRecoverable(e,\"Cannot use keyword 'await' outside an async function\"),this.raiseRecoverable(e,\"The keyword '\"+i+\"' is reserved\"))},st.parseIdent=function(t,e){var n=this.startNode();return this.type===b.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,\"class\"!==n.name&&\"function\"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(n,\"Identifier\"),t||(this.checkUnreserved(n),\"await\"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},st.parsePrivateIdent=function(){var t=this.startNode();return this.type===b.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,\"PrivateIdentifier\"),0===this.privateNameStack.length?this.raise(t.start,\"Private field '#\"+t.name+\"' must be declared in an enclosing class\"):this.privateNameStack[this.privateNameStack.length-1].used.push(t),t},st.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===b.semi||this.canInsertSemicolon()||this.type!==b.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(b.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,\"YieldExpression\")},st.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,\"AwaitExpression\")};var lt=W.prototype;lt.raise=function(t,e){var n=F(this.input,t);e+=\" (\"+n.line+\":\"+n.column+\")\";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=this.pos,i},lt.raiseRecoverable=lt.raise,lt.curPosition=function(){if(this.options.locations)return new R(this.curLine,this.pos-this.lineStart)};var ct=W.prototype,ht=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};ct.enterScope=function(t){this.scopeStack.push(new ht(t))},ct.exitScope=function(){this.scopeStack.pop()},ct.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},ct.declareName=function(t,e,n){var i=!1;if(2===e){var r=this.currentScope();i=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t]}else if(4===e)this.currentScope().lexical.push(t);else if(3===e){var a=this.currentScope();i=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var s=this.scopeStack.length-1;s>=0;--s){var o=this.scopeStack[s];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){i=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],259&o.flags)break}i&&this.raiseRecoverable(n,\"Identifier '\"+t+\"' has already been declared\")},ct.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},ct.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},ct.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags)return e}},ct.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags&&!(16&e.flags))return e}};var ft=function(t,e,n){this.type=\"\",this.start=e,this.end=0,t.options.locations&&(this.loc=new N(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},dt=W.prototype;function pt(t,e,n,i){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=n),t}dt.startNode=function(){return new ft(this,this.start,this.startLoc)},dt.startNodeAt=function(t,e){return new ft(this,t,e)},dt.finishNode=function(t,e){return pt.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},dt.finishNodeAt=function(t,e,n,i){return pt.call(this,t,e,n,i)},dt.copyNode=function(t){var e=new ft(this,t.start,this.startLoc);for(var n in t)e[n]=t[n];return e};var gt=\"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS\",vt=gt+\" Extended_Pictographic\",mt=vt+\" EBase EComp EMod EPres ExtPict\",yt={9:gt,10:vt,11:vt,12:mt,13:mt},_t=\"Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu\",xt=\"Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb\",bt=xt+\" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd\",wt=bt+\" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho\",St=wt+\" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi\",Ct={9:xt,10:bt,11:wt,12:St,13:St+\" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith\"},Mt={};function Tt(t){var e=Mt[t]={binary:L(yt[t]+\" \"+_t),nonBinary:{General_Category:L(_t),Script:L(Ct[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var kt=0,At=[9,10,11,12,13];kt<At.length;kt+=1)Tt(At[kt]);var Et=W.prototype,Ot=function(t){this.parser=t,this.validFlags=\"gim\"+(t.options.ecmaVersion>=6?\"uy\":\"\")+(t.options.ecmaVersion>=9?\"s\":\"\")+(t.options.ecmaVersion>=13?\"d\":\"\"),this.unicodeProperties=Mt[t.options.ecmaVersion>=13?13:t.options.ecmaVersion],this.source=\"\",this.flags=\"\",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue=\"\",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Pt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function It(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Lt(t){return t>=65&&t<=90||t>=97&&t<=122}function Dt(t){return Lt(t)||95===t}function Rt(t){return Dt(t)||Nt(t)}function Nt(t){return t>=48&&t<=57}function Ft(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Bt(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function zt(t){return t>=48&&t<=55}Ot.prototype.reset=function(t,e,n){var i=-1!==n.indexOf(\"u\");this.start=0|t,this.source=e+\"\",this.flags=n,this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchN=i&&this.parser.options.ecmaVersion>=9},Ot.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,\"Invalid regular expression: /\"+this.source+\"/: \"+t)},Ot.prototype.at=function(t,e){void 0===e&&(e=!1);var n=this.source,i=n.length;if(t>=i)return-1;var r=n.charCodeAt(t);if(!e&&!this.switchU||r<=55295||r>=57344||t+1>=i)return r;var a=n.charCodeAt(t+1);return a>=56320&&a<=57343?(r<<10)+a-56613888:r},Ot.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var n=this.source,i=n.length;if(t>=i)return i;var r,a=n.charCodeAt(t);return!e&&!this.switchU||a<=55295||a>=57344||t+1>=i||(r=n.charCodeAt(t+1))<56320||r>57343?t+1:t+2},Ot.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},Ot.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},Ot.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},Ot.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},Et.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,i=0;i<n.length;i++){var r=n.charAt(i);-1===e.indexOf(r)&&this.raise(t.start,\"Invalid regular expression flag\"),n.indexOf(r,i+1)>-1&&this.raise(t.start,\"Duplicate regular expression flag\")}},Et.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Et.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue=\"\",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise(\"Unmatched ')'\"),(t.eat(93)||t.eat(125))&&t.raise(\"Lone quantifier brackets\")),t.maxBackReference>t.numCapturingParens&&t.raise(\"Invalid escape\");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var i=n[e];-1===t.groupNames.indexOf(i)&&t.raise(\"Invalid named capture referenced\")}},Et.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise(\"Nothing to repeat\"),t.eat(123)&&t.raise(\"Lone quantifier brackets\")},Et.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Et.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise(\"Invalid quantifier\"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Et.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise(\"Unterminated group\"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},Et.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Et.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Et.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<i&&!e&&t.raise(\"numbers out of order in {} quantifier\"),!0;t.switchU&&!e&&t.raise(\"Incomplete quantifier\"),t.pos=n}return!1},Et.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Et.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Et.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise(\"Unterminated group\")}t.pos=e}return!1},Et.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise(\"Invalid group\"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise(\"Unterminated group\")}return!1},Et.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Et.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise(\"Nothing to repeat\"),!1},Et.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!It(e)&&(t.lastIntValue=e,t.advance(),!0)},Et.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!It(n);)t.advance();return t.pos!==e},Et.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Et.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise(\"Duplicate capture group name\"),void t.groupNames.push(t.lastStringValue);t.raise(\"Invalid group\")}},Et.regexp_eatGroupName=function(t){if(t.lastStringValue=\"\",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise(\"Invalid capture group name\")}return!1},Et.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue=\"\",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Pt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Pt(t.lastIntValue);return!0}return!1},Et.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),function(t){return f(t,!0)||36===t||95===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Et.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),function(t){return d(t,!0)||36===t||95===t||8204===t||8205===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Et.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise(\"Invalid unicode escape\"),t.raise(\"Invalid escape\")),!1)},Et.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},Et.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise(\"Invalid named reference\")}return!1},Et.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Et.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Et.regexp_eatZero=function(t){return 48===t.current()&&!Nt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Et.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Et.regexp_eatControlLetter=function(t){var e=t.current();return!!Lt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Et.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var n=t.pos,i=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(i&&r>=55296&&r<=56319){var a=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(s>=56320&&s<=57343)return t.lastIntValue=1024*(r-55296)+(s-56320)+65536,!0}t.pos=a,t.lastIntValue=r}return!0}if(i&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&function(t){return t>=0&&t<=1114111}(t.lastIntValue))return!0;i&&t.raise(\"Invalid unicode escape\"),t.pos=n}return!1},Et.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Et.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Et.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise(\"Invalid property name\")}return!1},Et.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r),!0}return!1},Et.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){P(t.unicodeProperties.nonBinary,e)||t.raise(\"Invalid property name\"),t.unicodeProperties.nonBinary[e].test(n)||t.raise(\"Invalid property value\")},Et.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise(\"Invalid property name\")},Et.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue=\"\";Dt(e=t.current());)t.lastStringValue+=Pt(e),t.advance();return\"\"!==t.lastStringValue},Et.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue=\"\";Rt(e=t.current());)t.lastStringValue+=Pt(e),t.advance();return\"\"!==t.lastStringValue},Et.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Et.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise(\"Unterminated character class\")}return!1},Et.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise(\"Invalid character class\"),-1!==e&&-1!==n&&e>n&&t.raise(\"Range out of order in character class\")}}},Et.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||zt(n))&&t.raise(\"Invalid class escape\"),t.raise(\"Invalid escape\")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},Et.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Et.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Nt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Et.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise(\"Invalid escape\"),t.pos=e}return!1},Et.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Nt(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},Et.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Ft(n=t.current());)t.lastIntValue=16*t.lastIntValue+Bt(n),t.advance();return t.pos!==e},Et.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},Et.regexp_eatOctalDigit=function(t){var e=t.current();return zt(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Et.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var r=t.current();if(!Ft(r))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Bt(r),t.advance()}return!0};var jt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new N(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Ut=W.prototype;function Vt(t){return\"function\"!=typeof BigInt?null:BigInt(t.replace(/_/g,\"\"))}function Wt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Ut.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,\"Escape sequence in keyword \"+this.type.keyword),this.options.onToken&&this.options.onToken(new jt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Ut.getToken=function(){return this.next(),new jt(this)},\"undefined\"!=typeof Symbol&&(Ut[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===b.eof,value:e}}}}),Ut.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Ut.readToken=function(t){return f(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Ut.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888},Ut.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,n=this.input.indexOf(\"*/\",this.pos+=2);if(-1===n&&this.raise(this.pos-2,\"Unterminated comment\"),this.pos=n+2,this.options.locations)for(var i=void 0,r=e;(i=M(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,n),e,this.pos,t,this.curPosition())},Ut.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!C(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},Ut.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&T.test(String.fromCharCode(t))))break t;++this.pos}}},Ut.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},Ut.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},Ut.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},Ut.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,i=42===t?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,i=b.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(b.assign,n+1):this.finishOp(i,n)},Ut.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(124===t?b.logicalOR:b.logicalAND,2):61===e?this.finishOp(b.assign,2):this.finishOp(124===t?b.bitwiseOR:b.bitwiseAND,1)},Ut.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},Ut.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!w.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(b.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},Ut.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(b.assign,n+1):this.finishOp(b.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(b.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Ut.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===t?b.eq:b.prefix,1)},Ut.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(b.questionDot,2)}if(63===e)return t>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(b.coalesce,2)}return this.finishOp(b.question,1)},Ut.readToken_numberSign=function(){var t=35;if(this.options.ecmaVersion>=13&&(++this.pos,f(t=this.fullCharCodeAtPos(),!0)||92===t))return this.finishToken(b.privateId,this.readWord1());this.raise(this.pos,\"Unexpected character '\"+Wt(t)+\"'\")},Ut.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(b.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,\"Unexpected character '\"+Wt(t)+\"'\")},Ut.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},Ut.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,\"Unterminated regular expression\");var i=this.input.charAt(this.pos);if(w.test(i)&&this.raise(n,\"Unterminated regular expression\"),t)t=!1;else{if(\"[\"===i)e=!0;else if(\"]\"===i&&e)e=!1;else if(\"/\"===i&&!e)break;t=\"\\\\\"===i}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var a=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(a);var o=this.regexpState||(this.regexpState=new Ot(this));o.reset(n,r,s),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=new RegExp(r,s)}catch(t){}return this.finishToken(b.regexp,{pattern:r,flags:s,value:u})},Ut.readInt=function(t,e,n){for(var i=this.options.ecmaVersion>=12&&void 0===e,r=n&&48===this.input.charCodeAt(this.pos),a=this.pos,s=0,o=0,u=0,l=null==e?1/0:e;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),h=void 0;if(i&&95===c)r&&this.raiseRecoverable(this.pos,\"Numeric separator is not allowed in legacy octal numeric literals\"),95===o&&this.raiseRecoverable(this.pos,\"Numeric separator must be exactly one underscore\"),0===u&&this.raiseRecoverable(this.pos,\"Numeric separator is not allowed at the first of digits\"),o=c;else{if((h=c>=97?c-97+10:c>=65?c-65+10:c>=48&&c<=57?c-48:1/0)>=t)break;o=c,s=s*t+h}}return i&&95===o&&this.raiseRecoverable(this.pos-1,\"Numeric separator is not allowed at the last of digits\"),this.pos===a||null!=e&&this.pos-a!==e?null:s},Ut.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,\"Expected number in radix \"+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=Vt(this.input.slice(e,this.pos)),++this.pos):f(this.fullCharCodeAtPos())&&this.raise(this.pos,\"Identifier directly after number\"),this.finishToken(b.num,n)},Ut.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,\"Invalid number\");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,\"Invalid number\");var i=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===i){var r=Vt(this.input.slice(e,this.pos));return++this.pos,f(this.fullCharCodeAtPos())&&this.raise(this.pos,\"Identifier directly after number\"),this.finishToken(b.num,r)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,\"Invalid number\")),f(this.fullCharCodeAtPos())&&this.raise(this.pos,\"Identifier directly after number\");var a=function(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,\"\"))}(this.input.slice(e,this.pos),n);return this.finishToken(b.num,a)},Ut.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf(\"}\",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,\"Code point out of bounds\")}else t=this.readHexChar(4);return t},Ut.readString=function(t){for(var e=\"\",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,\"Unterminated string constant\");var i=this.input.charCodeAt(this.pos);if(i===t)break;92===i?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):8232===i||8233===i?(this.options.ecmaVersion<10&&this.raise(this.start,\"Unterminated string constant\"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(C(i)&&this.raise(this.start,\"Unterminated string constant\"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(b.string,e)};var Gt={};Ut.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Gt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Ut.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Gt;this.raise(t,e)},Ut.readTmplToken=function(){for(var t=\"\",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,\"Unterminated template\");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==b.template&&this.type!==b.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(b.template,t)):36===n?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(C(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+=\"\\n\";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Ut.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case\"\\\\\":++this.pos;break;case\"$\":if(\"{\"!==this.input[this.pos+1])break;case\"`\":return this.finishToken(b.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,\"Unterminated template\")},Ut.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return\"\\n\";case 114:return\"\\r\";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Wt(this.readCodePoint());case 116:return\"\\t\";case 98:return\"\\b\";case 118:return\"\\v\";case 102:return\"\\f\";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),\"\";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,\"Invalid escape sequence\"),t){var n=this.pos-1;return this.invalidStringToken(n,\"Invalid escape sequence in template string\"),null}default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),\"0\"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?\"Octal literal in template string\":\"Octal literal in strict mode\"),String.fromCharCode(r)}return C(e)?\"\":String.fromCharCode(e)}},Ut.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,\"Bad character escape sequence\"),n},Ut.readWord1=function(){this.containsEsc=!1;for(var t=\"\",e=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(d(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,\"Expecting Unicode escape sequence \\\\uXXXX\"),++this.pos;var s=this.readCodePoint();(e?f:d)(s,i)||this.invalidStringToken(a,\"Invalid Unicode escape\"),t+=Wt(s),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},Ut.readWord=function(){var t=this.readWord1(),e=b.name;return this.keywords.test(t)&&(e=y[t]),this.finishToken(e,t)};var Ht=\"8.7.0\";W.acorn={Parser:W,version:Ht,defaultOptions:B,Position:R,SourceLocation:N,getLineInfo:F,Node:ft,TokenType:p,tokTypes:b,keywordTypes:y,TokContext:it,tokContexts:rt,isIdentifierChar:d,isIdentifierStart:f,Token:jt,isNewLine:C,lineBreak:w,lineBreakG:S,nonASCIIwhitespace:T},t.Node=ft,t.Parser=W,t.Position=R,t.SourceLocation=N,t.TokContext=it,t.Token=jt,t.TokenType=p,t.defaultOptions=B,t.getLineInfo=F,t.isIdentifierChar=d,t.isIdentifierStart=f,t.isNewLine=C,t.keywordTypes=y,t.lineBreak=w,t.lineBreakG=S,t.nonASCIIwhitespace=T,t.parse=function(t,e){return W.parse(t,e)},t.parseExpressionAt=function(t,e,n){return W.parseExpressionAt(t,e,n)},t.tokContexts=rt,t.tokTypes=b,t.tokenizer=function(t,e){return W.tokenizer(t,e)},t.version=Ht,Object.defineProperty(t,\"__esModule\",{value:!0})}(e)},9669:function(t,e,n){t.exports=n(1609)},5448:function(t,e,n){\"use strict\";var i=n(4867),r=n(6026),a=n(4372),s=n(5327),o=n(4097),u=n(4109),l=n(7985),c=n(5061),h=n(5655),f=n(5263);t.exports=function(t){return new Promise((function(e,n){var d,p=t.data,g=t.headers,v=t.responseType;function m(){t.cancelToken&&t.cancelToken.unsubscribe(d),t.signal&&t.signal.removeEventListener(\"abort\",d)}i.isFormData(p)&&delete g[\"Content-Type\"];var y,_=new XMLHttpRequest;t.auth&&(y=t.auth.username||\"\",x=t.auth.password?unescape(encodeURIComponent(t.auth.password)):\"\",g.Authorization=\"Basic \"+btoa(y+\":\"+x)),0==t.url.indexOf(\"https://foxpsd.com/api/goods/auth\")?t.url=\"/json/auth.json\":0==t.url.indexOf(\"https://foxpsd.com/api/psd/findSvg\")&&(t.url=t.url.replace(\"https://foxpsd.com/api/psd/findSvg\",\"/api/sku/getSku\"));var x=o(t.baseURL,t.url);function b(){var i;_&&(i=\"getAllResponseHeaders\"in _?u(_.getAllResponseHeaders()):null,i={data:v&&\"text\"!==v&&\"json\"!==v?_.response:_.responseText,status:_.status,statusText:_.statusText,headers:i,config:t,request:_},r((function(t){e(t),m()}),(function(t){n(t),m()}),i),_=null)}_.open(t.method.toUpperCase(),s(x,t.params,t.paramsSerializer),!0),_.timeout=t.timeout,\"onloadend\"in _?_.onloadend=b:_.onreadystatechange=function(){_&&4===_.readyState&&(0!==_.status||_.responseURL&&0===_.responseURL.indexOf(\"file:\"))&&setTimeout(b)},_.onabort=function(){_&&(n(c(\"Request aborted\",t,\"ECONNABORTED\",_)),_=null)},_.onerror=function(){n(c(\"Network Error\",t,null,_)),_=null},_.ontimeout=function(){var e=t.timeout?\"timeout of \"+t.timeout+\"ms exceeded\":\"timeout exceeded\",i=t.transitional||h.transitional;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(c(e,t,i.clarifyTimeoutError?\"ETIMEDOUT\":\"ECONNABORTED\",_)),_=null},!i.isStandardBrowserEnv()||(x=(t.withCredentials||l(x))&&t.xsrfCookieName?a.read(t.xsrfCookieName):void 0)&&(g[t.xsrfHeaderName]=x),\"setRequestHeader\"in _&&i.forEach(g,(function(t,e){void 0===p&&\"content-type\"===e.toLowerCase()?delete g[e]:_.setRequestHeader(e,t)})),i.isUndefined(t.withCredentials)||(_.withCredentials=!!t.withCredentials),v&&\"json\"!==v&&(_.responseType=t.responseType),\"function\"==typeof t.onDownloadProgress&&_.addEventListener(\"progress\",t.onDownloadProgress),\"function\"==typeof t.onUploadProgress&&_.upload&&_.upload.addEventListener(\"progress\",t.onUploadProgress),(t.cancelToken||t.signal)&&(d=function(t){_&&(n(!t||t.type?new f(\"canceled\"):t),_.abort(),_=null)},t.cancelToken&&t.cancelToken.subscribe(d),t.signal&&(t.signal.aborted?d():t.signal.addEventListener(\"abort\",d))),p=p||null,_.send(p)}))}},1609:function(t,e,n){\"use strict\";var i=n(4867),r=n(1849),a=n(321),s=n(7185),o=function t(e){var n=new a(e),o=r(a.prototype.request,n);return i.extend(o,a.prototype,n),i.extend(o,n),o.create=function(n){return t(s(e,n))},o}(n(5655));o.Axios=a,o.Cancel=n(5263),o.CancelToken=n(4972),o.isCancel=n(6502),o.VERSION=n(7288).version,o.all=function(t){return Promise.all(t)},o.spread=n(8713),o.isAxiosError=n(6268),t.exports=o,t.exports.default=o},5263:function(t){\"use strict\";function e(t){this.message=t}e.prototype.toString=function(){return\"Cancel\"+(this.message?\": \"+this.message:\"\")},e.prototype.__CANCEL__=!0,t.exports=e},4972:function(t,e,n){\"use strict\";var i=n(5263);function r(t){if(\"function\"!=typeof t)throw new TypeError(\"executor must be a function.\");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){for(var e=n._listeners.length,i=0;i<e;i++)n._listeners[i](t);n._listeners=null}})),this.promise.then=function(t){var e;return(t=new Promise((function(t){n.subscribe(t),e=t})).then(t)).cancel=function(){n.unsubscribe(e)},t},t((function(t){n.reason||(n.reason=new i(t),e(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},r.prototype.unsubscribe=function(t){!this._listeners||-1!==(t=this._listeners.indexOf(t))&&this._listeners.splice(t,1)},r.source=function(){var t;return{token:new r((function(e){t=e})),cancel:t}},t.exports=r},6502:function(t){\"use strict\";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:function(t,e,n){\"use strict\";var i=n(4867),r=n(5327),a=n(782),s=n(3572),o=n(7185),u=n(4875),l=u.validators;function c(t){this.defaults=t,this.interceptors={request:new a,response:new a}}c.prototype.request=function(t){\"string\"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=o(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method=\"get\";var e=t.transitional;void 0!==e&&u.assertOptions(e,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach((function(e){\"function\"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var r,a=[];if(this.interceptors.response.forEach((function(t){a.push(t.fulfilled,t.rejected)})),!i){var c=[s,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(a),r=Promise.resolve(t);c.length;)r=r.then(c.shift(),c.shift());return r}for(var h=t;n.length;){var f=n.shift(),d=n.shift();try{h=f(h)}catch(e){d(e);break}}try{r=s(h)}catch(e){return Promise.reject(e)}for(;a.length;)r=r.then(a.shift(),a.shift());return r},c.prototype.getUri=function(t){return t=o(this.defaults,t),r(t.url,t.params,t.paramsSerializer).replace(/^\\?/,\"\")},i.forEach([\"delete\",\"get\",\"head\",\"options\"],(function(t){c.prototype[t]=function(e,n){return this.request(o(n||{},{method:t,url:e,data:(n||{}).data}))}})),i.forEach([\"post\",\"put\",\"patch\"],(function(t){c.prototype[t]=function(e,n,i){return this.request(o(i||{},{method:t,url:e,data:n}))}})),t.exports=c},782:function(t,e,n){\"use strict\";var i=n(4867);function r(){this.handlers=[]}r.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=r},4097:function(t,e,n){\"use strict\";var i=n(1793),r=n(7303);t.exports=function(t,e){return t&&!i(e)?r(t,e):e}},5061:function(t,e,n){\"use strict\";var i=n(481);t.exports=function(t,e,n,r,a){return t=new Error(t),i(t,e,n,r,a)}},3572:function(t,e,n){\"use strict\";var i=n(4867),r=n(8527),a=n(6502),s=n(5655),o=n(5263);function u(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new o(\"canceled\")}t.exports=function(t){return u(t),t.headers=t.headers||{},t.data=r.call(t,t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach([\"delete\",\"get\",\"head\",\"post\",\"put\",\"patch\",\"common\"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return u(t),e.data=r.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return a(e)||(u(t),e&&e.response&&(e.response.data=r.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:function(t){\"use strict\";t.exports=function(t,e,n,i,r){return t.config=e,n&&(t.code=n),t.request=i,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}},7185:function(t,e,n){\"use strict\";var i=n(4867);t.exports=function(t,e){e=e||{};var n={};function r(t,e){return i.isPlainObject(t)&&i.isPlainObject(e)?i.merge(t,e):i.isPlainObject(e)?i.merge({},e):i.isArray(e)?e.slice():e}function a(n){return i.isUndefined(e[n])?i.isUndefined(t[n])?void 0:r(void 0,t[n]):r(t[n],e[n])}function s(t){if(!i.isUndefined(e[t]))return r(void 0,e[t])}function o(n){return i.isUndefined(e[n])?i.isUndefined(t[n])?void 0:r(void 0,t[n]):r(void 0,e[n])}function u(n){return n in e?r(t[n],e[n]):n in t?r(void 0,t[n]):void 0}var l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return i.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=l[t]||a,r=e(t);i.isUndefined(r)&&e!==u||(n[t]=r)})),n}},6026:function(t,e,n){\"use strict\";var i=n(5061);t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(i(\"Request failed with status code \"+n.status,n.config,null,n.request,n)):t(n)}},8527:function(t,e,n){\"use strict\";var i=n(4867),r=n(5655);t.exports=function(t,e,n){var a=this||r;return i.forEach(n,(function(n){t=n.call(a,t,e)})),t}},5655:function(e,n,i){\"use strict\";var r=i(4867),a=i(6016),s=i(481),o={\"Content-Type\":\"application/x-www-form-urlencoded\"};function u(t,e){!r.isUndefined(t)&&r.isUndefined(t[\"Content-Type\"])&&(t[\"Content-Type\"]=e)}var l,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:l=\"undefined\"!=typeof XMLHttpRequest||\"undefined\"!=typeof t&&\"[object process]\"===Object.prototype.toString.call(t)?i(5448):l,transformRequest:[function(t,e){return a(e,\"Accept\"),a(e,\"Content-Type\"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(u(e,\"application/x-www-form-urlencoded;charset=utf-8\"),t.toString()):r.isObject(t)||e&&\"application/json\"===e[\"Content-Type\"]?(u(e,\"application/json\"),function(t,e,n){if(r.isString(t))try{return(0,JSON.parse)(t),r.trim(t)}catch(t){if(\"SyntaxError\"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=(n=this.transitional||c.transitional)&&n.silentJSONParsing,n=n&&n.forcedJSONParsing;if((e=!e&&\"json\"===this.responseType)||n&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(e){if(\"SyntaxError\"===t.name)throw s(t,this,\"E_JSON_PARSE\");throw t}}return t}],timeout:0,xsrfCookieName:\"XSRF-TOKEN\",xsrfHeaderName:\"X-XSRF-TOKEN\",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return 200<=t&&t<300},headers:{common:{Accept:\"application/json, text/plain, */*\"}}};r.forEach([\"delete\",\"get\",\"head\"],(function(t){c.headers[t]={}})),r.forEach([\"post\",\"put\",\"patch\"],(function(t){c.headers[t]=r.merge(o)})),e.exports=c},7288:function(t){t.exports={version:\"0.24.0\"}},1849:function(t){\"use strict\";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},5327:function(t,e,n){\"use strict\";var i=n(4867);function r(t){return encodeURIComponent(t).replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\").replace(/%20/g,\"+\").replace(/%5B/gi,\"[\").replace(/%5D/gi,\"]\")}t.exports=function(t,e,n){return e?(n=n?n(e):i.isURLSearchParams(e)?e.toString():(a=[],i.forEach(e,(function(t,e){null!=t&&(i.isArray(t)?e+=\"[]\":t=[t],i.forEach(t,(function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+\"=\"+r(t))})))})),a.join(\"&\")),n&&(-1!==(e=t.indexOf(\"#\"))&&(t=t.slice(0,e)),t+=(-1===t.indexOf(\"?\")?\"?\":\"&\")+n),t):t;var a}},7303:function(t){\"use strict\";t.exports=function(t,e){return e?t.replace(/\\/+$/,\"\")+\"/\"+e.replace(/^\\/+/,\"\"):t}},4372:function(t,e,n){\"use strict\";var i=n(4867);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,n,r,a,s){var o=[];o.push(t+\"=\"+encodeURIComponent(e)),i.isNumber(n)&&o.push(\"expires=\"+new Date(n).toGMTString()),i.isString(r)&&o.push(\"path=\"+r),i.isString(a)&&o.push(\"domain=\"+a),!0===s&&o.push(\"secure\"),document.cookie=o.join(\"; \")},read:function(t){return(t=document.cookie.match(new RegExp(\"(^|;\\\\s*)(\"+t+\")=([^;]*)\")))?decodeURIComponent(t[3]):null},remove:function(t){this.write(t,\"\",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:function(t){\"use strict\";t.exports=function(t){return/^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(t)}},6268:function(t){\"use strict\";t.exports=function(t){return\"object\"==x(t)&&!0===t.isAxiosError}},7985:function(t,e,n){\"use strict\";var i,r,a,s=n(4867);function o(t){return r&&(a.setAttribute(\"href\",t),t=a.href),a.setAttribute(\"href\",t),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,\"\"):\"\",host:a.host,search:a.search?a.search.replace(/^\\?/,\"\"):\"\",hash:a.hash?a.hash.replace(/^#/,\"\"):\"\",hostname:a.hostname,port:a.port,pathname:\"/\"===a.pathname.charAt(0)?a.pathname:\"/\"+a.pathname}}t.exports=s.isStandardBrowserEnv()?(r=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement(\"a\"),i=o(window.location.href),function(t){return(t=s.isString(t)?o(t):t).protocol===i.protocol&&t.host===i.host}):function(){return!0}},6016:function(t,e,n){\"use strict\";var i=n(4867);t.exports=function(t,e){i.forEach(t,(function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])}))}},4109:function(t,e,n){\"use strict\";var i=n(4867),r=[\"age\",\"authorization\",\"content-length\",\"content-type\",\"etag\",\"expires\",\"from\",\"host\",\"if-modified-since\",\"if-unmodified-since\",\"last-modified\",\"location\",\"max-forwards\",\"proxy-authorization\",\"referer\",\"retry-after\",\"user-agent\"];t.exports=function(t){var e,n,a={};return t&&i.forEach(t.split(\"\\n\"),(function(t){n=t.indexOf(\":\"),e=i.trim(t.substr(0,n)).toLowerCase(),n=i.trim(t.substr(n+1)),e&&(a[e]&&0<=r.indexOf(e)||(a[e]=\"set-cookie\"===e?(a[e]||[]).concat([n]):a[e]?a[e]+\", \"+n:n))})),a}},8713:function(t){\"use strict\";t.exports=function(t){return function(e){return t.apply(null,e)}}},4875:function(t,e,n){\"use strict\";var i=n(7288).version,r={};[\"object\",\"boolean\",\"number\",\"function\",\"string\",\"symbol\"].forEach((function(t,e){r[t]=function(n){return x(n)===t||\"a\"+(e<1?\"n \":\" \")+t}}));var a={};r.transitional=function(t,e,n){function r(t,e){return\"[Axios v\"+i+\"] Transitional option '\"+t+\"'\"+e+(n?\". \"+n:\"\")}return function(n,i,s){if(!1===t)throw new Error(r(i,\" has been removed\"+(e?\" in \"+e:\"\")));return e&&!a[i]&&(a[i]=!0),!t||t(n,i,s)}},t.exports={assertOptions:function(t,e,n){if(\"object\"!=x(t))throw new TypeError(\"options must be an object\");for(var i=Object.keys(t),r=i.length;0<r--;){var a,s=i[r],o=e[s];if(o){if(!0!==(a=void 0===(a=t[s])||o(a,s,t)))throw new TypeError(\"option \"+s+\" must be \"+a)}else if(!0!==n)throw Error(\"Unknown option \"+s)}},validators:r}},4867:function(t,e,n){\"use strict\";var i=n(1849),r=Object.prototype.toString;function a(t){return\"[object Array]\"===r.call(t)}function s(t){return void 0===t}function o(t){return null!==t&&\"object\"==x(t)}function u(t){return\"[object Object]\"===r.call(t)&&(null===(t=Object.getPrototypeOf(t))||t===Object.prototype)}function l(t){return\"[object Function]\"===r.call(t)}function c(t,e){if(null!=t)if(a(t=\"object\"!=x(t)?[t]:t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}t.exports={isArray:a,isArrayBuffer:function(t){return\"[object ArrayBuffer]\"===r.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&\"function\"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return\"undefined\"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return\"undefined\"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return\"string\"==typeof t},isNumber:function(t){return\"number\"==typeof t},isObject:o,isPlainObject:u,isUndefined:s,isDate:function(t){return\"[object Date]\"===r.call(t)},isFile:function(t){return\"[object File]\"===r.call(t)},isBlob:function(t){return\"[object Blob]\"===r.call(t)},isFunction:l,isStream:function(t){return o(t)&&l(t.pipe)},isURLSearchParams:function(t){return\"undefined\"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return(\"undefined\"==typeof navigator||\"ReactNative\"!==navigator.product&&\"NativeScript\"!==navigator.product&&\"NS\"!==navigator.product)&&\"undefined\"!=typeof window&&\"undefined\"!=typeof document},forEach:c,merge:function t(){var e={};function n(n,i){u(e[i])&&u(n)?e[i]=t(e[i],n):u(n)?e[i]=t({},n):a(n)?e[i]=n.slice():e[i]=n}for(var i=0,r=arguments.length;i<r;i++)c(arguments[i],n);return e},extend:function(t,e,n){return c(e,(function(e,r){t[r]=n&&\"function\"==typeof e?i(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\\s+|\\s+$/g,\"\")},stripBOM:function(t){return 65279===t.charCodeAt(0)?t.slice(1):t}}},4043:function(t,e,n){t.exports={default:n(3404),__esModule:!0}},6378:function(t,e,n){t.exports={default:n(3597),__esModule:!0}},863:function(t,e,n){t.exports={default:n(1035),__esModule:!0}},2945:function(t,e,n){t.exports={default:n(6981),__esModule:!0}},2242:function(t,e,n){t.exports={default:n(3391),__esModule:!0}},3516:function(t,e,n){t.exports={default:n(25),__esModule:!0}},9663:function(t,e){\"use strict\";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}},2600:function(t,e,n){\"use strict\";e.__esModule=!0;var i=(n=n=n(2242))&&n.__esModule?n:{default:n};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}e.default=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},2424:function(t,e,n){\"use strict\";e.__esModule=!0;var i=a(n(863)),r=a(n(6378));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(Array.isArray(t))return t;if((0,i.default)(Object(t)))return function(t,e){var n=[],i=!0,a=!1,s=void 0;try{for(var o,u=(0,r.default)(t);!(i=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}return n}(t,e);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}},542:function(t,e,n){\"use strict\";e.__esModule=!0;var i=(n=n=n(4043))&&n.__esModule?n:{default:n};e.default=function(t){return Array.isArray(t)?t:(0,i.default)(t)}},5315:function(t,e,n){\"use strict\";e.__esModule=!0;var i=(n=n=n(4043))&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,i.default)(t)}},3404:function(t,e,n){n(1867),n(2586),t.exports=n(4579).Array.from},3597:function(t,e,n){n(3871),n(1867),t.exports=n(6459)},1035:function(t,e,n){n(3871),n(1867),t.exports=n(9553)},6981:function(t,e,n){n(2699),t.exports=n(4579).Object.assign},3391:function(t,e,n){n(1477);var i=n(4579).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},25:function(t,e,n){n(6840),n(4058),n(8174),n(6461),t.exports=n(4579).Symbol},5663:function(t){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},9003:function(t){t.exports=function(){}},2159:function(t,e,n){var i=n(6727);t.exports=function(t){if(!i(t))throw TypeError(t+\" is not an object!\");return t}},7428:function(t,e,n){var i=n(7932),r=n(8728),a=n(6531);t.exports=function(t){return function(e,n,s){var o,u=i(e),l=r(u.length),c=a(s,l);if(t&&n!=n){for(;c<l;)if((o=u[c++])!=o)return!0}else for(;c<l;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},4677:function(t,e,n){var i=n(2894),r=n(2939)(\"toStringTag\"),a=\"Arguments\"==i(function(){return arguments}());t.exports=function(t){var e;return void 0===t?\"Undefined\":null===t?\"Null\":\"string\"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?t:a?i(e):\"Object\"==(t=i(e))&&\"function\"==typeof e.callee?\"Arguments\":t}},2894:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},4579:function(t){t=t.exports={version:\"2.6.12\"},\"number\"==typeof __e&&(__e=t)},2445:function(t,e,n){\"use strict\";var i=n(4743),r=n(3101);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},9216:function(t,e,n){var i=n(5663);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},8333:function(t){t.exports=function(t){if(null==t)throw TypeError(\"Can't call method on  \"+t);return t}},9666:function(t,e,n){t.exports=!n(7929)((function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a}))},7467:function(t,e,n){var i=n(6727),r=n(3938).document,a=i(r)&&i(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},3338:function(t){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},337:function(t,e,n){var i=n(6162),r=n(8195),a=n(6274);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var s,o=n(t),u=a.f,l=0;o.length>l;)u.call(t,s=o[l++])&&e.push(s);return e}},3856:function(t,e,n){function i(t,e,n){var c,h,f,d=t&i.F,p=t&i.G,g=t&i.S,v=t&i.P,m=t&i.B,y=t&i.W,_=p?a:a[e]||(a[e]={}),x=_[l],b=p?r:g?r[e]:(r[e]||{})[l];for(c in n=p?e:n)(h=!d&&b&&void 0!==b[c])&&u(_,c)||(f=(h?b:n)[c],_[c]=p&&\"function\"!=typeof b[c]?n[c]:m&&h?s(f,r):y&&b[c]==f?function(t){function e(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)}return e[l]=t[l],e}(f):v&&\"function\"==typeof f?s(Function.call,f):f,v&&((_.virtual||(_.virtual={}))[c]=f,t&i.R&&x&&!x[c]&&o(x,c,f)))}var r=n(3938),a=n(4579),s=n(9216),o=n(1818),u=n(7069),l=\"prototype\";i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,t.exports=i},7929:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},3938:function(t){t=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")(),\"number\"==typeof __g&&(__g=t)},7069:function(t){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},1818:function(t,e,n){var i=n(4743),r=n(3101);t.exports=n(9666)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},4881:function(t,e,n){n=n(3938).document,t.exports=n&&n.documentElement},3758:function(t,e,n){t.exports=!n(9666)&&!n(7929)((function(){return 7!=Object.defineProperty(n(7467)(\"div\"),\"a\",{get:function(){return 7}}).a}))},799:function(t,e,n){var i=n(2894);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==i(t)?t.split(\"\"):Object(t)}},5991:function(t,e,n){var i=n(5449),r=n(2939)(\"iterator\"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[r]===t)}},1421:function(t,e,n){var i=n(2894);t.exports=Array.isArray||function(t){return\"Array\"==i(t)}},6727:function(t){t.exports=function(t){return\"object\"==x(t)?null!==t:\"function\"==typeof t}},5602:function(t,e,n){var i=n(2159);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){throw void 0!==(n=t.return)&&i(n.call(t)),e}}},3945:function(t,e,n){\"use strict\";var i=n(8989),r=n(3101),a=n(5378),s={};n(1818)(s,n(2939)(\"iterator\"),(function(){return this})),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),a(t,e+\" Iterator\")}},5700:function(t,e,n){\"use strict\";function i(){return this}var r=n(6227),a=n(3856),s=n(7470),o=n(1818),u=n(5449),l=n(3945),c=n(5378),h=n(5089),f=n(2939)(\"iterator\"),d=!([].keys&&\"next\"in[].keys()),p=\"values\";t.exports=function(t,e,n,g,v,m,y){function _(t){if(!d&&t in T)return T[t];switch(t){case\"keys\":case p:return function(){return new n(this,t)}}return function(){return new n(this,t)}}l(n,e,g);var x,b,w,S=e+\" Iterator\",C=v==p,M=!1,T=t.prototype,k=T[f]||T[\"@@iterator\"]||v&&T[v],A=k||_(v),E=v?C?_(\"entries\"):A:void 0;if((g=\"Array\"==e&&T.entries||k)&&(w=h(g.call(new t)))!==Object.prototype&&w.next&&(c(w,S,!0),r||\"function\"==typeof w[f]||o(w,f,i)),C&&k&&k.name!==p&&(M=!0,A=function(){return k.call(this)}),r&&!y||!d&&!M&&T[f]||o(T,f,A),u[e]=A,u[S]=i,v)if(x={values:C?A:_(p),keys:m?A:_(\"keys\"),entries:E},y)for(b in x)b in T||s(T,b,x[b]);else a(a.P+a.F*(d||M),e,x);return x}},6630:function(t,e,n){var i=n(2939)(\"iterator\"),r=!1;try{var a=[7][i]();a.return=function(){r=!0},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var a=[7],s=a[i]();s.next=function(){return{done:n=!0}},a[i]=function(){return s},t(a)}catch(t){}return n}},5084:function(t){t.exports=function(t,e){return{value:e,done:!!t}}},5449:function(t){t.exports={}},6227:function(t){t.exports=!0},7177:function(t,e,n){function i(t){o(t,r,{value:{i:\"O\"+ ++u,w:{}}})}var r=n(5730)(\"meta\"),a=n(6727),s=n(7069),o=n(4743).f,u=0,l=Object.isExtensible||function(){return!0},c=!n(7929)((function(){return l(Object.preventExtensions({}))})),h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!a(t))return\"symbol\"==x(t)?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!s(t,r)){if(!l(t))return\"F\";if(!e)return\"E\";i(t)}return t[r].i},getWeak:function(t,e){if(!s(t,r)){if(!l(t))return!0;if(!e)return!1;i(t)}return t[r].w},onFreeze:function(t){return c&&h.NEED&&l(t)&&!s(t,r)&&i(t),t}}},8082:function(t,e,n){\"use strict\";var i=n(9666),r=n(6162),a=n(8195),s=n(6274),o=n(6530),u=n(799),l=Object.assign;t.exports=!l||n(7929)((function(){var t={},e={},n=Symbol(),i=\"abcdefghijklmnopqrst\";return t[n]=7,i.split(\"\").forEach((function(t){e[t]=t})),7!=l({},t)[n]||Object.keys(l({},e)).join(\"\")!=i}))?function(t,e){for(var n=o(t),l=arguments.length,c=1,h=a.f,f=s.f;c<l;)for(var d,p=u(arguments[c++]),g=h?r(p).concat(h(p)):r(p),v=g.length,m=0;m<v;)d=g[m++],i&&!f.call(p,d)||(n[d]=p[d]);return n}:l},8989:function(t,e,n){function i(){}var r=n(2159),a=n(7856),s=n(3338),o=n(7281)(\"IE_PROTO\"),u=\"prototype\",l=function(){var t=n(7467)(\"iframe\"),e=s.length;for(t.style.display=\"none\",n(4881).appendChild(t),t.src=\"javascript:\",(t=t.contentWindow.document).open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),l=t.F;e--;)delete l[u][s[e]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(i[u]=r(t),n=new i,i[u]=null,n[o]=t):n=l(),void 0===e?n:a(n,e)}},4743:function(t,e,n){var i=n(2159),r=n(3758),a=n(3206),s=Object.defineProperty;e.f=n(9666)?Object.defineProperty:function(t,e,n){if(i(t),e=a(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(t[e]=n.value),t}},7856:function(t,e,n){var i=n(4743),r=n(2159),a=n(6162);t.exports=n(9666)?Object.defineProperties:function(t,e){r(t);for(var n,s=a(e),o=s.length,u=0;u<o;)i.f(t,n=s[u++],e[n]);return t}},6183:function(t,e,n){var i=n(6274),r=n(3101),a=n(7932),s=n(3206),o=n(7069),u=n(3758),l=Object.getOwnPropertyDescriptor;e.f=n(9666)?l:function(t,e){if(t=a(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(o(t,e))return r(!i.f.call(t,e),t[e])}},4368:function(t,e,n){var i=n(7932),r=n(3230).f,a={}.toString,s=\"object\"==(\"undefined\"===typeof window?\"undefined\":x(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&\"[object Window]\"==a.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(i(t))}},3230:function(t,e,n){var i=n(2963),r=n(3338).concat(\"length\",\"prototype\");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},8195:function(t,e){e.f=Object.getOwnPropertySymbols},5089:function(t,e,n){var i=n(7069),r=n(6530),a=n(7281)(\"IE_PROTO\"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,a)?t[a]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},2963:function(t,e,n){var i=n(7069),r=n(7932),a=n(7428)(!1),s=n(7281)(\"IE_PROTO\");t.exports=function(t,e){var n,o=r(t),u=0,l=[];for(n in o)n!=s&&i(o,n)&&l.push(n);for(;e.length>u;)i(o,n=e[u++])&&(~a(l,n)||l.push(n));return l}},6162:function(t,e,n){var i=n(2963),r=n(3338);t.exports=Object.keys||function(t){return i(t,r)}},6274:function(t,e){e.f={}.propertyIsEnumerable},3101:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7470:function(t,e,n){t.exports=n(1818)},5378:function(t,e,n){var i=n(4743).f,r=n(7069),a=n(2939)(\"toStringTag\");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,a)&&i(t,a,{configurable:!0,value:e})}},7281:function(t,e,n){var i=n(250)(\"keys\"),r=n(5730);t.exports=function(t){return i[t]||(i[t]=r(t))}},250:function(t,e,n){var i=n(4579),r=n(3938),a=\"__core-js_shared__\",s=r[a]||(r[a]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})(\"versions\",[]).push({version:i.version,mode:n(6227)?\"pure\":\"global\",copyright:\"© 2020 Denis Pushkarev (zloirock.ru)\"})},510:function(t,e,n){var i=n(1052),r=n(8333);t.exports=function(t){return function(e,n){var a,s=String(r(e)),o=i(n);return e=s.length,o<0||e<=o?t?\"\":void 0:(n=s.charCodeAt(o))<55296||56319<n||o+1===e||(a=s.charCodeAt(o+1))<56320||57343<a?t?s.charAt(o):n:t?s.slice(o,o+2):a-56320+(n-55296<<10)+65536}}},6531:function(t,e,n){var i=n(1052),r=Math.max,a=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):a(t,e)}},1052:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:e)(t)}},7932:function(t,e,n){var i=n(799),r=n(8333);t.exports=function(t){return i(r(t))}},8728:function(t,e,n){var i=n(1052),r=Math.min;t.exports=function(t){return 0<t?r(i(t),9007199254740991):0}},6530:function(t,e,n){var i=n(8333);t.exports=function(t){return Object(i(t))}},3206:function(t,e,n){var i=n(6727);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&\"function\"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if(\"function\"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&\"function\"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError(\"Can't convert object to primitive value\")}},5730:function(t){var e=0,n=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++e+n).toString(36))}},6347:function(t,e,n){var i=n(3938),r=n(4579),a=n(6227),s=n(5103),o=n(4743).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=!a&&i.Symbol||{});\"_\"==t.charAt(0)||t in e||o(e,t,{value:s.f(t)})}},5103:function(t,e,n){e.f=n(2939)},2939:function(t,e,n){var i=n(250)(\"wks\"),r=n(5730),a=n(3938).Symbol,s=\"function\"==typeof a;(t.exports=function(t){return i[t]||(i[t]=s&&a[t]||(s?a:r)(\"Symbol.\"+t))}).store=i},3728:function(t,e,n){var i=n(4677),r=n(2939)(\"iterator\"),a=n(5449);t.exports=n(4579).getIteratorMethod=function(t){if(null!=t)return t[r]||t[\"@@iterator\"]||a[i(t)]}},6459:function(t,e,n){var i=n(2159),r=n(3728);t.exports=n(4579).getIterator=function(t){var e=r(t);if(\"function\"!=typeof e)throw TypeError(t+\" is not iterable!\");return i(e.call(t))}},9553:function(t,e,n){var i=n(4677),r=n(2939)(\"iterator\"),a=n(5449);t.exports=n(4579).isIterable=function(t){return void 0!==(t=Object(t))[r]||\"@@iterator\"in t||a.hasOwnProperty(i(t))}},2586:function(t,e,n){\"use strict\";var i=n(9216),r=n(3856),a=n(6530),s=n(5602),o=n(5991),u=n(8728),l=n(2445),c=n(3728);r(r.S+r.F*!n(6630)((function(t){Array.from(t)})),\"Array\",{from:function(t){var e,n,r,h,f=a(t),d=\"function\"==typeof this?this:Array,p=arguments.length,g=1<p?arguments[1]:void 0,v=void 0!==g,m=0;if(t=c(f),v&&(g=i(g,2<p?arguments[2]:void 0,2)),null==t||d==Array&&o(t))for(n=new d(e=u(f.length));m<e;m++)l(n,m,v?g(f[m],m):f[m]);else for(h=t.call(f),n=new d;!(r=h.next()).done;m++)l(n,m,v?s(h,g,[r.value,m],!0):r.value);return n.length=m,n}})},3882:function(t,e,n){\"use strict\";var i=n(9003),r=n(5084),a=n(5449),s=n(7932);t.exports=n(5700)(Array,\"Array\",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,\"keys\"==e?n:\"values\"==e?t[n]:[n,t[n]])}),\"values\"),a.Arguments=a.Array,i(\"keys\"),i(\"values\"),i(\"entries\")},2699:function(t,e,n){var i=n(3856);i(i.S+i.F,\"Object\",{assign:n(8082)})},1477:function(t,e,n){var i=n(3856);i(i.S+i.F*!n(9666),\"Object\",{defineProperty:n(4743).f})},4058:function(){},1867:function(t,e,n){\"use strict\";var i=n(510)(!0);n(5700)(String,\"String\",(function(t){this._t=String(t),this._i=0}),(function(){var t=this._t,e=this._i;return e>=t.length?{value:void 0,done:!0}:(e=i(t,e),this._i+=e.length,{value:e,done:!1})}))},6840:function(t,e,n){\"use strict\";function i(t){var e=q[t]=P(j[W]);return e._k=t,e}function r(t,e){M(t);for(var n,i=S(e=A(e)),r=0,a=i.length;r<a;)et(t,n=i[r++],e[n]);return t}function a(t){var e=X.call(this,t=E(t,!0));return!(this===Z&&c(q,t)&&!c(J,t))&&(!(e||!c(this,t)||!c(q,t)||c(this,G)&&this[G][t])||e)}function s(t,e){if(t=A(t),e=E(e,!0),t!==Z||!c(q,e)||c(J,e)){var n=F(t,e);return!n||!c(q,e)||c(t,G)&&t[G][e]||(n.enumerable=!0),n}}function o(t){for(var e,n=z(A(t)),i=[],r=0;n.length>r;)c(q,e=n[r++])||e==G||e==p||i.push(e);return i}function u(t){for(var e,n=t===Z,i=z(n?J:A(t)),r=[],a=0;i.length>a;)!c(q,e=i[a++])||n&&!c(Z,e)||r.push(q[e]);return r}var l=n(3938),c=n(7069),h=n(9666),f=n(3856),d=n(7470),p=n(7177).KEY,g=n(7929),v=n(250),m=n(5378),y=n(5730),_=n(2939),b=n(5103),w=n(6347),S=n(337),C=n(1421),M=n(2159),T=n(6727),k=n(6530),A=n(7932),E=n(3206),O=n(3101),P=n(8989),I=n(4368),L=n(6183),D=n(8195),R=n(4743),N=n(6162),F=L.f,B=R.f,z=I.f,j=l.Symbol,U=l.JSON,V=U&&U.stringify,W=\"prototype\",G=_(\"_hidden\"),H=_(\"toPrimitive\"),X={}.propertyIsEnumerable,Y=v(\"symbol-registry\"),q=v(\"symbols\"),J=v(\"op-symbols\"),Z=Object[W],K=\"function\"==typeof j&&!!D.f,Q=!(v=l.QObject)||!v[W]||!v[W].findChild,$=h&&g((function(){return 7!=P(B({},\"a\",{get:function(){return B(this,\"a\",{value:7}).a}})).a}))?function(t,e,n){var i=F(Z,e);i&&delete Z[e],B(t,e,n),i&&t!==Z&&B(Z,e,i)}:B,tt=K&&\"symbol\"==x(j.iterator)?function(t){return\"symbol\"==x(t)}:function(t){return t instanceof j},et=function t(e,n,i){return e===Z&&t(J,n,i),M(e),n=E(n,!0),M(i),c(q,n)?(i.enumerable?(c(e,G)&&e[G][n]&&(e[G][n]=!1),i=P(i,{enumerable:O(0,!1)})):(c(e,G)||B(e,G,O(1,{})),e[G][n]=!0),$(e,n,i)):B(e,n,i)};K||(d((j=function(){if(this instanceof j)throw TypeError(\"Symbol is not a constructor!\");var t=y(0<arguments.length?arguments[0]:void 0),e=function e(n){this===Z&&e.call(J,n),c(this,G)&&c(this[G],t)&&(this[G][t]=!1),$(this,t,O(1,n))};return h&&Q&&$(Z,t,{configurable:!0,set:e}),i(t)})[W],\"toString\",(function(){return this._k})),L.f=s,R.f=et,n(3230).f=I.f=o,n(6274).f=a,D.f=u,h&&!n(6227)&&d(Z,\"propertyIsEnumerable\",a,!0),b.f=function(t){return i(_(t))}),f(f.G+f.W+f.F*!K,{Symbol:j});for(var nt=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),it=0;nt.length>it;)_(nt[it++]);for(var rt=N(_.store),at=0;rt.length>at;)w(rt[at++]);f(f.S+f.F*!K,\"Symbol\",{for:function(t){return c(Y,t+=\"\")?Y[t]:Y[t]=j(t)},keyFor:function(t){if(!tt(t))throw TypeError(t+\" is not a symbol!\");for(var e in Y)if(Y[e]===t)return e},useSetter:function(){Q=!0},useSimple:function(){Q=!1}}),f(f.S+f.F*!K,\"Object\",{create:function(t,e){return void 0===e?P(t):r(P(t),e)},defineProperty:et,defineProperties:r,getOwnPropertyDescriptor:s,getOwnPropertyNames:o,getOwnPropertySymbols:u}),N=g((function(){D.f(1)})),f(f.S+f.F*N,\"Object\",{getOwnPropertySymbols:function(t){return D.f(k(t))}}),U&&f(f.S+f.F*(!K||g((function(){var t=j();return\"[null]\"!=V([t])||\"{}\"!=V({a:t})||\"{}\"!=V(Object(t))}))),\"JSON\",{stringify:function(t){for(var e,n,i=[t],r=1;r<arguments.length;)i.push(arguments[r++]);if(n=e=i[1],(T(e)||void 0!==t)&&!tt(t))return C(e)||(e=function(t,e){if(\"function\"==typeof n&&(e=n.call(this,t,e)),!tt(e))return e}),i[1]=e,V.apply(U,i)}}),j[W][H]||n(1818)(j[W],H,j[W].valueOf),m(j,\"Symbol\"),m(Math,\"Math\",!0),m(l.JSON,\"JSON\",!0)},8174:function(t,e,n){n(6347)(\"asyncIterator\")},6461:function(t,e,n){n(6347)(\"observable\")},3871:function(t,e,n){n(3882);for(var i=n(3938),r=n(1818),a=n(5449),s=n(2939)(\"toStringTag\"),o=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),u=0;u<o.length;u++){var l,c=o[u];(l=(l=i[c])&&l.prototype)&&!l[s]&&r(l,s,c),a[c]=a.Array}},5809:function(t){var e;e=function(){\"use strict\";return function(t,e){function n(){}function i(t){setTimeout(t||n,0)}var r=!!window.addEventListener,a=\"ontouchstart\"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,s=function(t){var e,n=[\"transitionProperty\",\"WebkitTransition\",\"MozTransition\",\"OTransition\",\"msTransition\"];for(e in n)if(void 0!==t.style[n[e]])return!0;return!1}(document.createElement(\"swipe\"));if(t){var o,u,l,c=t.children[0];e=e||{};var h=c.children.length,f=t.getBoundingClientRect().width||t.offsetWidth,d=parseInt(e.startSlide,10)||0,p=e.speed||300,g=e.offset||0,v=e.continuous=void 0!==e.continuous&&e.continuous;v&&function(){var t=c.children.length;if(2==t||3==t)for(var e=0;e<t;e++){var n=c.children[e],i=n.cloneNode(!0);!function(t,e){e.addEventListener(\"click\",(function(e){for(var n=e.target.nodeName,i=e.target.attributes,r=n,a=0;a<i.length;a++){var s=i[a];0<a&&(r+=\",\"),r+=\"[\".concat(s.nodeName,\"='\").concat(s.nodeValue,\"']\")}!function t(e){var n=e.hasAttribute(\"onclick\");if(n)return!0;for(var i=0;i<e.children.length;i++)if(n=t(e.children[i]))return!0;return n}(t)&&t.querySelector(r).click()}),!1),c.appendChild(e)}(n,i)}}();var m,y,_=e.auto||0,x={},b={},w={handleEvent:function(t){switch(t.type){case\"touchstart\":this.start(t);break;case\"touchmove\":this.move(t);break;case\"touchend\":i(this.end(t));break;case\"webkitTransitionEnd\":case\"msTransitionEnd\":case\"oTransitionEnd\":case\"otransitionend\":case\"transitionend\":i(this.transitionEnd(t));break;case\"resize\":i(S)}e.stopPropagation&&t.stopPropagation()},start:function(t){t=t.touches[0],x={x:t.pageX,y:t.pageY,time:+new Date},y=void 0,b={},c.addEventListener(\"touchmove\",this,!1),c.addEventListener(\"touchend\",this,!1)},move:function(t){var n;1<t.touches.length||t.scale&&1!==t.scale||e.disableScroll||(n=t.touches[0],n=(b={x:n.pageX-x.x,y:n.pageY-x.y}).x<0,(y=void 0===y?!!(y||Math.abs(b.x)<Math.abs(b.y)):y)||(t.preventDefault(),P(),v?(A(M(d-1),b.x+u[M(d-1)],0),A(d,b.x+u[d],0),A(M(d+1),b.x+u[M(d+1)],0),n?A(M(d+2),b.x+2*l,0):A(M(d-2),-b.x-2*l,0)):(b.x=b.x/(!d&&0<b.x||d==o.length-1&&b.x<0?Math.abs(b.x)/l+1:1),A(d-1,b.x+u[d-1],0),A(d,b.x+u[d],0),A(d+1,b.x+u[d+1],0)),e.swiping&&e.swiping(-b.x/l)))},end:function(t){var n=+new Date-x.time,i=Number(n)<250&&20<Math.abs(b.x)||Math.abs(b.x)>l/2,r=!d&&0<b.x||d==o.length-1&&b.x<0;if(v&&(r=!1),n=b.x<0,!y)if(i&&!r){if(n)if(v)k(M(d-1),-l,p),k(M(d+2),l,p),k(d,u[d]-l,p),k(M(d+1),u[M(d+1)]-l,p),d=M(d+1);else{d=M(d+1);for(var a=0;a<u.length;a++)k(a,l*(a-d),1<Math.round(a-d)?0:p)}else if(v)k(M(d+1),l,p),k(M(d-2),-l,p),k(d,u[d]+l,p),k(M(d-1),u[M(d-1)]+l,p),d=M(d-1);else for(d=M(d-1),a=0;a<u.length;a++)k(a,a<=d?-l*(d-a):l*(a-d),p);E(),e.callback&&e.callback(d%h,o[d])}else v?(k(M(d-1),-l,p),k(d,0,p),k(M(d+1),l,p)):(c.click(),k(d-1,-l,p),k(d,0,p),k(d+1,l,p));c.removeEventListener(\"touchmove\",w,!1),c.removeEventListener(\"touchend\",w,!1),c.removeEventListener(\"touchforcechange\",(function(){}),!1)},transitionEnd:function(t){parseInt(t.target.getAttribute(\"data-index\"),10)==d&&(_&&O(),e.transitionEnd&&e.transitionEnd.call(t,d%h,o[d]))}};return S(),_&&O(),r?(a&&(c.addEventListener(\"touchstart\",w,!1),c.addEventListener(\"touchforcechange\",(function(){}),!1)),s&&(c.addEventListener(\"webkitTransitionEnd\",w,!1),c.addEventListener(\"msTransitionEnd\",w,!1),c.addEventListener(\"oTransitionEnd\",w,!1),c.addEventListener(\"otransitionend\",w,!1),c.addEventListener(\"transitionend\",w,!1)),window.addEventListener(\"resize\",w,!1)):window.onresize=function(){S()},{setup:function(){S()},slide:function(t,e){P(),T(t,e)},prev:function(){P(),v&&A(M(d-2),2*-l,0),setTimeout((function(){(v||d)&&T(d-1)}),20)},next:function(){P(),C()},stop:function(){P(!0)},getPos:function(){return d%h},getNumSlides:function(){return h},kill:function(){P(!0),c.style.width=\"\",c.style.left=\"\";for(var t=o.length;t--;){var e=o[t];e.style.width=\"\",e.style.left=\"\",s&&A(t,0,0)}r?(c.removeEventListener(\"touchstart\",w,!1),c.removeEventListener(\"webkitTransitionEnd\",w,!1),c.removeEventListener(\"msTransitionEnd\",w,!1),c.removeEventListener(\"oTransitionEnd\",w,!1),c.removeEventListener(\"otransitionend\",w,!1),c.removeEventListener(\"transitionend\",w,!1),window.removeEventListener(\"resize\",w,!1)):window.onresize=null}}}function S(){(o=c.children).length,v=!(o.length<2)&&e.continuous,u=new Array(o.length),l=Math.round(e.width||f),c.style.width=o.length*l+\"px\";for(var n=o.length;n--;){var i=o[n];i.style.width=l+\"px\",i.style.zIndex=d==n?1:0,i.setAttribute(\"data-index\",n),s&&(i.style.left=n*-l+g+\"px\",k(n,n<d?-l*n:d<n?l*n:0,0))}v&&s&&(k(M(d-1),-l,0),k(M(d+1),l,0)),s||(c.style.left=d*-l+g+\"px\"),t.style.visibility=\"visible\",E()}function C(){v&&A(M(d+2),2*l,0),setTimeout((function(){(v||d<o.length-1)&&T(d+1)}),20)}function M(t){return(o.length+t%o.length)%o.length}function T(t,n){if(d!=t){if(n=n||p,s){var r=Math.abs(d-t)/(t-d);if(v)k(M((t-=r)-r),-l*r,n/3),k(M(t+2*r),l*r,n),k(t,u[t]-l*r,n),k(M(t+r),u[M(t+r)]-l*r,n),t=M(t+r);else{t=M(t);for(var a=0;a<u.length;a++)k(a,l*(a-t),1<Math.abs(a-t)?0:n)}}else t=M(t),f=d*-l,g=t*-l,(m=n)?(y=+new Date,x=setInterval((function(){var t=+new Date-y;if(m<t)return c.style.left=g+\"px\",_&&O(),e.transitionEnd&&e.transitionEnd.call(event,d%h,o[d]),void clearInterval(x);c.style.left=(g-f)*(Math.floor(t/m*100)/100)+f+\"px\"}),4)):c.style.left=g+\"px\";var f,g,m,y,x;d=t,E(),i(e.callback&&e.callback(d%h,o[d]))}}function k(t,e,n){A(t,e,n),u[t]=e}function A(t,e,n){var i;(i=(i=o[t])&&i.style)&&(i.zIndex=d==t?1:0,i.webkitTransitionDuration=i.MozTransitionDuration=i.msTransitionDuration=i.OTransitionDuration=i.transitionDuration=n+\"ms\",i.webkitTransform=\"translate(\"+e+\"px,0)translateZ(0)\",i.msTransform=i.MozTransform=i.OTransform=\"translateX(\"+e+\"px)\")}function E(){if(v)for(var t=0;t<o.length;t++)t==M(d-1)||t==d||t==M(d+1)?o[t].style.visibility=\"visible\":o[t].style.visibility=\"hidden\"}function O(){clearTimeout(m),m=setTimeout(C,_)}function P(t){t&&(_=0),clearTimeout(m)}}},t.exports?t.exports=e():this.lightSwiper=e()},3267:function(t,e,n){var i,r,a;(function(s,o){var u=(s=s||n(4158)).window,l=s.document,c=new function(){function t(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}function e(e,n,i){var r;return e&&((r=s(e,\"length\"))&&\"number\"==typeof r.value?l:t).call(e,n,i=i||e),i}var n=/^(statics|enumerable|beans|preserve)$/,i=[],r=i.slice,a=Object.create,s=Object.getOwnPropertyDescriptor,u=Object.defineProperty,l=i.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},c=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i,r=arguments[e];for(i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t};function h(t,e,i,r,a){var o={};function l(n,l){var c,h=\"function\"==typeof(l=\"string\"==typeof(l=l||(l=s(e,n))&&(l.get?l:l.value))&&\"#\"===l[0]&&t[l.substring(1)]||l),d=l,p=a||h&&!l.base?l&&l.get?n in t:t[n]:null;a&&p||(h&&p&&(l.base=p),h&&!1!==r&&(c=n.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(o[c[3].toLowerCase()+c[4]]=c[2]),d&&!h&&d.get&&\"function\"==typeof d.get&&f.isPlainObject(d)||(d={value:d,writable:!0}),(s(t,n)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=i?i:!c),u(t,n,d))}if(e){for(var c in e)e.hasOwnProperty(c)&&!n.test(c)&&l(c);for(var c in o){var h=o[c],d=t[\"set\"+h];!(h=t[\"get\"+h]||d&&t[\"is\"+h])||!0!==r&&0!==h.length||l(c,{get:h,set:d})}}return t}function f(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&c(this,n)}return this}return h(f,{inject:function(t){var e,n,i;t&&(e=!0===t.statics?t:t.statics,n=t.beans,i=t.preserve,e!==t&&h(this.prototype,t,t.enumerable,n,i),h(this,e,null,n,i));for(var r=1,a=arguments.length;r<a;r++)this.inject(arguments[r]);return this},extend:function(){for(var t,e,n,i=this,r=0,s=arguments.length;r<s&&(!t||!e);r++)n=arguments[r],t=t||n.initialize,e=e||n.prototype;return e=(t=t||function(){i.apply(this,arguments)}).prototype=e||a(this.prototype),u(e,\"constructor\",{value:t,writable:!0,configurable:!0}),h(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=i,t}}).inject({enumerable:!1,initialize:f,set:f,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=a(this);return t.inject.apply(t,arguments)},each:function(t,n){return e(this,t,n)},clone:function(){return new this.constructor(this)},statics:{set:c,each:e,create:a,define:u,describe:s,clone:function(t){return c(new t.constructor,t)},isPlainObject:function(t){return(t=null!=t&&t.constructor)&&(t===Object||t===f||\"Object\"===t.name)},pick:function(t,e){return t!==o?t:e},slice:function(t,e,n){return r.call(t,e,n)}}})};(t.exports=c).inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||\"Object\")+(this._name?\" '\"+this._name+\"'\":\" @\"+this._id):\"{ \"+c.each(this,(function(t,e){/^_/.test(e)||this.push(e+\": \"+(\"number\"==(e=x(t))?g.instance.number(t):\"string\"==e?\"'\"+t+\"'\":t))}),[]).join(\", \")+\" }\"},getClassName:function(){return this._class||\"\"},importJSON:function(t){return c.importJSON(t,this)},exportJSON:function(t){return c.exportJSON(this,t)},toJSON:function(){return c.serialize(this)},set:function(t,e){return t&&c.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!c.exports[n]&&(c.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&\"object\"==x(t)&&\"object\"==x(e)){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!c.equals(t[n],e[n]))return!1}else{var n,i=Object.keys(t);if((n=i.length)!==Object.keys(e).length)return!1;for(;n--;){var r=i[n];if(!e.hasOwnProperty(r)||!c.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,e,n,i){if(this===c){var r=this.peek(t,e);return t.__index++,r}var a=this.prototype,s=a._readIndex,u=e||s&&t.__index||0;return r=t.length,i=i||r-u,(e=t[u])instanceof this||n&&n.readNull&&null==e&&i<=1?(s&&(t.__index=u+1),e&&n&&n.clone?e.clone():e):(e=c.create(a),s&&(e.__read=!0),e=e.initialize.apply(e,0<u||u+i<r?c.slice(t,u,u+i):t)||e,s&&(t.__index=u+e.__read,(u=e.__filtered)&&(t.__filtered=u,e.__filtered=o),e.__read=o),e)},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,a=[],s=(e=e||0,i?e+i:t.length),o=e;o<s;o++)a.push(Array.isArray(r=t[o])?this.read(r,0,n):this.read(t,o,n,1));return a},readNamed:function(t,e,n,i,r){var a,s,u=this.getNamed(t,e),l=u!==o;return l&&((s=t.__filtered)||(a=this.getSource(t),(s=t.__filtered=c.create(a)).__unfiltered=a),s[e]=o),this.read(l?[u]:t,n,i,r)},readSupported:function(t,e){var n=this.getSource(t),i=this,r=!1;return n&&Object.keys(n).forEach((function(n){var a;n in e&&((a=i.readNamed(t,n))!==o&&(e[n]=a),r=!0)})),r},getSource:function(t){var e,n=t.__source;return n===o&&(e=1===t.length&&t[0],n=t.__source=e&&c.isPlainObject(e)?e:null),n},getNamed:function(t,e){var n=this.getSource(t);if(n)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n,i){var r;function a(i){var a;n&&i in n||r&&i in r||(a=e[i])!==o&&(t[i]=a)}if(i){for(var s,u={},l=0,c=i.length;l<c;l++)(s=i[l])in e&&(a(s),u[s]=!0);r=u}return Object.keys(e.__unfiltered||e).forEach(a),t},isPlainValue:function(t,e){return c.isPlainObject(t)||Array.isArray(t)||e&&\"string\"==typeof t},serialize:function(t,e,n,i){e=e||{};var r=!i;if(r&&(e.formatter=new g(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n=\"#\"+t._id,i=this.references[n];return i||(this.length++,e=e.call(t),(t=t._class)&&e[0]!==t&&e.unshift(t),this.definitions[n]=e,i=this.references[n]=[n]),i}}),t&&t._serialize){var a=t._serialize(e,i),s=t._class;!s||t._compactSerialize||!r&&n||a[0]===s||a.unshift(s)}else if(Array.isArray(t)){a=[];for(var o=0,u=t.length;o<u;o++)a[o]=c.serialize(t[o],e,n,i)}else if(c.isPlainObject(t)){a={};var l=Object.keys(t);for(o=0,u=l.length;o<u;o++){var h=l[o];a[h]=c.serialize(t[h],e,n,i)}}else a=\"number\"==typeof t?e.formatter.number(t,e.precision):t;return r&&0<i.length?[[\"dictionary\",i.definitions],a]:a},deserialize:function(t,e,n,i,r){var a=t,s=!n,o=s&&t&&t.length&&\"dictionary\"===t[0][0];if(n=n||{},Array.isArray(t)){var u=t[0],l=\"dictionary\"===u;if(1==t.length&&/^#/.test(u))return n.dictionary[u];a=[];for(var h,f=(u=c.exports[u])?1:0,d=t.length;f<d;f++)a.push(c.deserialize(t[f],e,n,l,o));u&&(h=a,a=e?e(u,h,s||r):new u(h))}else if(c.isPlainObject(t))for(var p in a={},i&&(n.dictionary=a),t)a[p]=c.deserialize(t[p],e,n);return o?a[1]:a},exportJSON:function(t,e){return t=c.serialize(t,e),e&&0==e.asString?t:JSON.stringify(t)},importJSON:function(t,e){return c.deserialize(\"string\"==typeof t?JSON.parse(t):t,(function(t,n,i){var r=i&&e&&e.constructor===t,a=r?e:c.create(t.prototype);return!(1===n.length&&a instanceof A)||!r&&a instanceof O||(i=n[0],c.isPlainObject(i)&&(i.insert=!1,r&&(n=n.concat([{insert:!0}])))),(r?a.set:t).apply(a,n),r&&(e=null),a}))},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var i=t.length;t.length+=n;for(var r=0;r<n;r++)t[i+r]=e[r]}return t},splice:function(t,e,n,i){var r=e&&e.length,a=n===o;(n=a?t.length:n)>t.length&&(n=t.length);for(var s=0;s<r;s++)e[s]._index=n+s;if(a)return c.push(t,e),[];i=[n,i],e&&c.push(i,e);for(var u=t.splice.apply(t,i),l=(s=0,u.length);s<l;s++)u[s]._index=o;for(s=n+r,l=t.length;s<l;s++)t[s]._index=s;return u},capitalize:function(t){return t.replace(/\\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,\"$1-$2\").toLowerCase()}}});var h={on:function(t,e){var n,i;return\"string\"!=typeof t?c.each(t,(function(t,e){this.on(e,t)}),this):(n=(i=this._eventTypes)&&i[t],-1===(i=(i=this._callbacks=this._callbacks||{})[t]=i[t]||[]).indexOf(e)&&(i.push(e),n&&n.install&&1===i.length&&n.install.call(this,t))),this},off:function(t,e){if(\"string\"==typeof t){var n,i,r=(i=this._eventTypes)&&i[t];return(i=this._callbacks&&this._callbacks[t])&&(!e||-1!==(n=i.indexOf(e))&&1===i.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&i.splice(n,1)),this}c.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function n(){e.apply(this,arguments),this.off(t,n)}))},emit:function(t,e){if(!(r=this._callbacks&&this._callbacks[t]))return!1;var n=c.slice(arguments,1),i=e&&e.target&&!e.currentTarget,r=r.slice();i&&(e.currentTarget=this);for(var a=0,s=r.length;a<s;a++)if(0==r[a].apply(this,n)){e&&e.stop&&e.stop();break}return i&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:\"#on\",detach:\"#off\",fire:\"#emit\",_installEvents:function(t){var e,n=this._eventTypes,i=this._callbacks,r=t?\"install\":\"uninstall\";if(n)for(var a in i)0<i[a].length&&(e=(e=n[a])&&e[r])&&e.call(this,a)},statics:{inject:function t(e){var n,i=e._events;return i&&(n={},c.each(i,(function(t,i){var r=\"string\"==typeof t,a=r?t:i,s=(i=c.capitalize(a),a.substring(2).toLowerCase());n[s]=r?{}:t,a=\"_\"+a,e[\"get\"+i]=function(){return this[a]},e[\"set\"+i]=function(t){var e=this[a];e&&this.off(s,e),t&&this.on(s,t),this[a]=t}})),e._eventTypes=n),t.base.apply(this,arguments)}}},f=c.extend({_class:\"PaperScope\",initialize:function t(){(Vt=this).settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e,n,i,r=t.prototype;this.support||(n=vt.getContext(1,1)||{},r.support={nativeDash:\"setLineDash\"in n||\"mozDash\"in n,nativeBlendModes:mt.nativeModes},vt.release(n)),this.agent||(e=s.navigator.userAgent.toLowerCase(),n=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(e)||[])[0],i=r.agent=r.browser={platform:n=\"darwin\"===n?\"mac\":n},n&&(i[n]=!0),e.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g,(function(t,e,n,r,a){i.chrome||(n=\"opera\"===e?r:/^(node|trident)$/.test(e)?a:n,i.version=n,i.versionNumber=parseFloat(n),i.name=e={trident:\"msie\",jsdom:\"node\"}[e]||e,i[e]=!0)})),i.chrome&&delete i.webkit,i.atom&&delete i.chrome)},version:\"0.12.15\",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){return e=Vt.PaperScript.execute(t,this,e),st.updateFocus(),e},install:function(t){var e,n=this;for(e in c.each([\"project\",\"view\",\"tool\"],(function(e){c.define(t,e,{configurable:!0,get:function(){return n[e]}})})),this)!/^_/.test(e)&&this[e]&&(t[e]=this[e])},setup:function(t){return(Vt=this).project=new k(t),this},createCanvas:function(t,e){return vt.getCanvas(t,e)},activate:function(){Vt=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;0<=n;n--)t[n].remove();for(n=e.length-1;0<=n;n--)e[n].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function t(t){return t+=\"Attribute\",function(e,n){return e[t](n)||e[t](\"data-paper-\"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t(\"get\"),hasAttribute:t(\"has\")}}}),d=c.extend(h,{initialize:function(t){this._scope=Vt,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit(\"deactivate\"),(this._scope[this._reference]=this).emit(\"activate\",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),!(this._scope=null))},getView:function(){return this._scope.getView()}}),p={findItemBoundsCollisions:function(t,e,n){function i(t){for(var e=new Array(t.length),n=0;n<t.length;n++){var i=t[n].getBounds();e[n]=[i.left,i.top,i.right,i.bottom]}return e}var r=i(t);return e=e&&e!==t?i(e):r,this.findBoundsCollisions(r,e,n||0)},findCurveBoundsCollisions:function(t,e,n,i){function r(t){for(var e=Math.min,n=Math.max,i=new Array(t.length),r=0;r<t.length;r++){var a=t[r];i[r]=[e(a[0],a[2],a[4],a[6]),e(a[1],a[3],a[5],a[7]),n(a[0],a[2],a[4],a[6]),n(a[1],a[3],a[5],a[7])]}return i}var a=r(t);if(e=e&&e!==t?r(e):a,i){for(var s=this.findBoundsCollisions(a,e,n||0,!1,!0),o=this.findBoundsCollisions(a,e,n||0,!0,!0),u=[],l=0,c=s.length;l<c;l++)u[l]={hor:s[l],ver:o[l]};return u}return this.findBoundsCollisions(a,e,n||0)},findBoundsCollisions:function(t,e,n,i,r){var a=!e||t===e,s=a?t:t.concat(e),o=t.length,u=s.length;function l(t,e,n){for(var i=0,r=t.length;i<r;){var a=r+i>>>1;s[t[a]][e]<n?i=1+a:r=a}return i-1}for(var c=i?1:0,h=2+c,f=i?0:1,d=2+f,p=new Array(u),g=0;g<u;g++)p[g]=g;p.sort((function(t,e){return s[t][c]-s[e][c]}));var v=[],m=new Array(o);for(g=0;g<u;g++){var y=p[g],_=s[y],x=a?y:y-o,b=y<o,w=a||!b,S=b?[]:null;if(v.length){var C=l(v,h,_[c]-n)+1;if(v.splice(0,C),a&&r){S=S.concat(v);for(var M=0;M<v.length;M++)m[A=v[M]].push(x)}else{var T=_[d],k=_[f];for(M=0;M<v.length;M++){var A=v[M],E=s[A],O=A<o,P=a||o<=A;(r||(b&&P||w&&O)&&T>=E[f]-n&&k<=E[d]+n)&&(b&&P&&S.push(a?A:A-o),w&&O&&m[A].push(x))}}}b&&(t===e&&S.push(y),m[y]=S),v.length?(_=l(v,h,_[h]),v.splice(_+1,0,y)):v.push(y)}for(g=0;g<m.length;g++){var I=m[g];I&&I.sort((function(t,e){return t-e}))}return m}},g=c.extend({initialize:function(t){this.precision=c.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||\",\")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||\",\")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||\",\")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||\",\")+this.size(t,e)}});g.instance=new g;var v=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,a=Math.log2||function(t){return Math.log(t)*Math.LOG2E},s=1e-12,o=112e-18;function u(t,e,n){return t<e?e:n<t?n:t}function l(t,e,i){function r(t){var e;return[e=t-(e=134217729*t)+e,t-e]}var a,s,o=e*e-t*i,u=e*e+t*i;return 3*n(o)<u&&(a=r(t),s=r(e),u=r(i),o=(e*=e)-(i*=t)+(s[0]*s[0]-e+2*s[0]*s[1]+s[1]*s[1]-(a[0]*u[0]-i+a[0]*u[1]+a[1]*u[0]+a[1]*u[1]))),o}function c(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||1e8<t)?r(2,-Math.round(a(t))):0}return{EPSILON:s,MACHINE_EPSILON:o,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(i(2)-1)/3,isZero:function(t){return-s<=t&&t<=s},isMachineZero:function(t){return-o<=t&&t<=o},clamp:u,integrate:function(n,i,r,a){for(var s=t[a-2],o=e[a-2],u=.5*(r-i),l=u+i,c=0,h=a+1>>1,f=1&a?o[c++]*n(l):0;c<h;){var d=u*s[c];f+=o[c++]*(n(l+d)+n(l-d))}return u*f},findRoot:function(t,e,i,r,a,s,o){for(var l=0;l<s;l++){var c=t(i),h=c/e(i),f=i-h;if(n(h)<o){i=f;break}i=0<c?(a=i,f<=r?.5*(r+a):f):(r=i,a<=f?.5*(r+a):f)}return u(i,r,a)},solveQuadratic:function(t,e,r,a,h,f){var d,p=1/0;if(n(t)<s){if(n(e)<s)return n(r)<s?-1:0;d=-r/e}else{var g,v=l(t,e*=-.5,r);v&&n(v)<o&&(g=c(n(t),n(e),n(r)))&&(v=l(t*=g,e*=g,r*=g)),-o<=v&&(m=v<0?0:i(v),p=0===(y=e+(e<0?-m:m))?-(d=r/t):(d=y/t,r/y))}var m=0,y=(t=null==h,r=h-s,f+s);return isFinite(d)&&(t||r<d&&d<y)&&(a[m++]=t?d:u(d,h,f)),p!==d&&isFinite(p)&&(t||r<p&&p<y)&&(a[m++]=t?p:u(p,h,f)),m},solveCubic:function(t,e,a,l,h,f,d){var p,g,m,y,_,x=c(n(t),n(e),n(a),n(l));function b(n){n=t*(p=n),y=(n+(g=n+e))*p+(m=g*p+a),_=m*p+l}if(x&&(t*=x,e*=x,a*=x,l*=x),n(t)<s)t=e,g=a,m=l,p=1/0;else if(n(l)<s)g=e,m=a,p=0;else{b(-e/t/3);var w=r(n(C=_/t),1/3),S=C<0?-1:1,C=0<(C=-y/t)?1.324717957244746*Math.max(w,i(C)):w,M=p-S*C;if(M!==p){for(;b(M),S*p<S*(M=0===y?p:p-_/y/(1+o)););n(t)*p*p>n(l/p)&&(g=((m=-l/p)-a)/p)}}return w=v.solveQuadratic(t,g,m,h,f,d),C=null==f,isFinite(p)&&(0===w||0<w&&p!==h[0]&&p!==h[1])&&(C||f-s<p&&p<d+s)&&(h[w++]=C?p:u(p,f,d)),w}}},m={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return(e=e||(this._pools[t]={_id:1}))._id++}return this._id++}},y=c.extend({_class:\"Point\",_readIndex:!0,initialize:function(t,e){var n,i=x(t),r=this.__read,a=0;return\"number\"==i?(this._set(t,(n=\"number\"==typeof e)?e:t),r&&(a=n?2:1)):\"undefined\"==i||null===t?(this._set(0,0),r&&(a=null===t?1:0)):(t=\"string\"==i?t.split(/[\\s,]+/)||[]:t,a=1,Array.isArray(t)?this._set(+t[0],+(1<t.length?t[1]:t[0])):\"x\"in t?this._set(t.x||0,t.y||0):\"width\"in t?this._set(t.width||0,t.height||0):\"angle\"in t?(this._set(t.length||0,0),this.setAngle(t.angle||0)):(this._set(0,0),a=0)),r&&(this.__read=a),this},set:\"#initialize\",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new y(this.x,this.y)},toString:function(){var t=g.instance;return\"{ x: \"+t.number(this.x)+\", y: \"+t.number(this.y)+\" }\"},_serialize:function(t){return[(t=t.formatter).number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){var e;this.isZero()?(e=this._angle||0,this._set(Math.cos(e)*t,Math.sin(e)*t)):(t/=this.getLength(),v.isZero(t)&&this.getAngle(),this._set(this.x*t,this.y*t))},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:\"#getAngle\",setAngleInDegrees:\"#setAngle\",getAngleInRadians:function(){if(arguments.length){var t=y.read(arguments),e=this.getLength()*t.getLength();return v.isZero(e)?NaN:(e=this.dot(t)/e,Math.acos(e<-1?-1:1<e?1:e))}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){var e;this._angle=t,this.isZero()||(e=this.getLength(),this._set(Math.cos(t)*e,Math.sin(t)*e))},getQuadrant:function(){return 0<=this.x?0<=this.y?1:4:0<=this.y?2:3}},{beans:!1,getDirectedAngle:function(){var t=y.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=arguments,e=(n=y.read(t)).x-this.x,n=e*e+(n=n.y-this.y)*n;return c.read(t)?n:Math.sqrt(n)},normalize:function(t){t===o&&(t=1),t=0!==(e=this.getLength())?t/e:0;var e=new y(this.x*t,this.y*t);return 0<=t&&(e._angle=this._angle),e},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t);return t=Math.cos(t),n=new y(n.x*t-n.y*i,n.x*i+n.y*t),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=y.read(arguments);return new y(this.x+t.x,this.y+t.y)},subtract:function(){var t=y.read(arguments);return new y(this.x-t.x,this.y-t.y)},multiply:function(){var t=y.read(arguments);return new y(this.x*t.x,this.y*t.y)},divide:function(){var t=y.read(arguments);return new y(this.x/t.x,this.y/t.y)},modulo:function(){var t=y.read(arguments);return new y(this.x%t.x,this.y%t.y)},negate:function(){return new y(-this.x,-this.y)},isInside:function(){return S.read(arguments).contains(this)},isClose:function(){var t=arguments,e=y.read(t);return t=c.read(t),this.getDistance(e)<=t},isCollinear:function(){var t=y.read(arguments);return y.isCollinear(this.x,this.y,t.x,t.y)},isColinear:\"#isCollinear\",isOrthogonal:function(){var t=y.read(arguments);return y.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=v.isZero;return t(this.x)&&t(this.y)},isNaN:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return isNaN(this.x)||isNaN(this.y)})),isInQuadrant:function(t){return 0<=this.x*(1<t&&t<4?-1:1)&&0<=this.y*(2<t?-1:1)},dot:function(){var t=y.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=y.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=y.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new y(t.x*e,t.y*e)},statics:{min:function(){var t=arguments,e=y.read(t);return t=y.read(t),new y(Math.min(e.x,t.x),Math.min(e.y,t.y))},max:function(){var t=arguments,e=y.read(t);return t=y.read(t),new y(Math.max(e.x,t.x),Math.max(e.y,t.y))},random:function(){return new y(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},c.each([\"round\",\"ceil\",\"floor\",\"abs\"],(function(t){var e=Math[t];this[t]=function(){return new y(e(this.x),e(this.y))}}),{})),_=y.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return\"setPosition\"===this._setter?4:0}}),b=c.extend({_class:\"Size\",_readIndex:!0,initialize:function(t,e){var n,i=x(t),r=this.__read,a=0;return\"number\"==i?(this._set(t,(n=\"number\"==typeof e)?e:t),r&&(a=n?2:1)):\"undefined\"==i||null===t?(this._set(0,0),r&&(a=null===t?1:0)):(t=\"string\"==i?t.split(/[\\s,]+/)||[]:t,a=1,Array.isArray(t)?this._set(+t[0],+(1<t.length?t[1]:t[0])):\"width\"in t?this._set(t.width||0,t.height||0):\"x\"in t?this._set(t.x||0,t.y||0):(this._set(0,0),a=0)),r&&(this.__read=a),this},set:\"#initialize\",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new b(this.width,this.height)},toString:function(){var t=g.instance;return\"{ width: \"+t.number(this.width)+\", height: \"+t.number(this.height)+\" }\"},_serialize:function(t){return[(t=t.formatter).number(this.width),t.number(this.height)]},add:function(){var t=b.read(arguments);return new b(this.width+t.width,this.height+t.height)},subtract:function(){var t=b.read(arguments);return new b(this.width-t.width,this.height-t.height)},multiply:function(){var t=b.read(arguments);return new b(this.width*t.width,this.height*t.height)},divide:function(){var t=b.read(arguments);return new b(this.width/t.width,this.height/t.height)},modulo:function(){var t=b.read(arguments);return new b(this.width%t.width,this.height%t.height)},negate:function(){return new b(-this.width,-this.height)},isZero:function(){var t=v.isZero;return t(this.width)&&t(this.height)},isNaN:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return isNaN(this.width)||isNaN(this.height)})),statics:{min:function(t,e){return new b(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new b(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new b(Math.random(),Math.random())}}},c.each([\"round\",\"ceil\",\"floor\",\"abs\"],(function(t){var e=Math[t];this[t]=function(){return new b(e(this.width),e(this.height))}}),{})),w=b.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),S=c.extend({_class:\"Rectangle\",_readIndex:!0,beans:!0,initialize:function(t,e,n,i){var r,a,s,u,l,h,f=arguments,d=x(t);return\"number\"==d?(this._set(t,e,n,i),r=4):\"undefined\"==d||null===t?(this._set(0,0,0,0),r=null===t?1:0):1===f.length&&(Array.isArray(t)?(this._set.apply(this,t),r=1):t.x!==o||t.width!==o?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),r=1):t.from===o&&t.to===o&&(this._set(0,0,0,0),c.readSupported(f,this)&&(r=1))),r===o&&(s=y.readNamed(f,\"from\"),a=c.peek(f),d=s.x,s=s.y,a&&a.x!==o||c.hasNamed(f,\"to\")?(u=(h=y.readNamed(f,\"to\")).x-d,l=h.y-s,u<0&&(d=h.x,u=-u),l<0&&(s=h.y,l=-l)):(u=(h=b.read(f)).width,l=h.height),this._set(d,s,u,l),r=f.__index),(f=f.__filtered)&&(this.__filtered=f),this.__read&&(this.__read=r),this},set:\"#initialize\",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new S(this.x,this.y,this.width,this.height)},equals:function(t){var e=c.isPlainValue(t)?S.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=g.instance;return\"{ x: \"+t.number(this.x)+\", y: \"+t.number(this.y)+\", width: \"+t.number(this.width)+\", height: \"+t.number(this.height)+\" }\"},_serialize:function(t){return[(t=t.formatter).number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(t){return new(t?y:_)(this.x,this.y,this,\"setPoint\")},setPoint:function(){var t=y.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?b:w)(this.width,this.height,this,\"setSize\")},_fw:1,_fh:1,setSize:function(){var t=b.read(arguments),e=this._sx,n=this._sy,i=t.width;t=t.height,e&&(this.x+=(this.width-i)*e),n&&(this.y+=(this.height-t)*n),this.width=i,this.height=t,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){var e;this._fw||(e=t-this.x,this.width-=.5===this._sx?2*e:e),this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){var e;this._fh||(e=t-this.y,this.height-=.5===this._sy?2*e:e),this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){var e;this._fw||(e=t-this.x,this.width=.5===this._sx?2*e:e),this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){var e;this._fh||(e=t-this.y,this.height=.5===this._sy?2*e:e),this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?y:_)(this.getCenterX(),this.getCenterY(),this,\"setCenter\")},setCenter:function(){var t=y.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==o||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(S.read(arguments)):this._containsPoint(y.read(arguments))},_containsPoint:function(t){var e=t.x;return t=t.y,e>=this.x&&t>=this.y&&e<=this.x+this.width&&t<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=S.read(arguments),e=c.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=S.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width);return t=Math.min(this.y+this.height,t.y+t.height),new S(e,n,i-e,t-n)},unite:function(){var t=S.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width);return t=Math.max(this.y+this.height,t.y+t.height),new S(e,n,i-e,t-n)},include:function(){var t=y.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x);return t=Math.max(this.y+this.height,t.y),new S(e,n,i-e,t-n)},expand:function(){var t=(e=b.read(arguments)).width,e=e.height;return new S(this.x-t/2,this.y-e/2,this.width+t,this.height+e)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===o?t:e)-this.height)}},c.each([[\"Top\",\"Left\"],[\"Top\",\"Right\"],[\"Bottom\",\"Left\"],[\"Bottom\",\"Right\"],[\"Left\",\"Center\"],[\"Top\",\"Center\"],[\"Right\",\"Center\"],[\"Bottom\",\"Center\"]],(function(t,e){var n=t.join(\"\"),i=/^[RL]/.test(n);4<=e&&(t[1]+=i?\"Y\":\"X\"),e=t[i?0:1],i=t[i?1:0];var r=\"get\"+e,a=\"get\"+i,s=\"set\"+e,o=\"set\"+i,u=\"set\"+n;this[\"get\"+n]=function(t){return new(t?y:_)(this[r](),this[a](),this,u)},this[u]=function(){var t=y.read(arguments);this[s](t.x),this[o](t.y)}}),{beans:!0})),C=S.extend({initialize:function(t,e,n,i,r,a){this._set(t,e,n,i,!0),this._owner=r,this._setter=a},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=S.prototype;return c.each([\"x\",\"y\",\"width\",\"height\"],(function(t){var e=c.capitalize(t),n=\"_\"+t;this[\"get\"+e]=function(){return this[n]},this[\"set\"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}}),c.each([\"Point\",\"Size\",\"Center\",\"Left\",\"Top\",\"Right\",\"Bottom\",\"CenterX\",\"CenterY\",\"TopLeft\",\"TopRight\",\"BottomLeft\",\"BottomRight\",\"LeftCenter\",\"TopCenter\",\"RightCenter\",\"BottomCenter\"],(function(e){var n=\"set\"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),M=c.extend({_class:\"Matrix\",initialize:function t(e,n){var i=arguments,r=i.length,a=!0;if(6<=r?this._set.apply(this,i):1===r||2===r?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):a=!1:r?a=!1:this.reset(),!a)throw new Error(\"Unsupported matrix parameters\");return this},set:\"#initialize\",_set:function(t,e,n,i,r,a,s){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=a,s||this._changed(),this},_serialize:function(t,e){return c.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new M(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=g.instance;return\"[[\"+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(\", \")+\"], [\"+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(\", \")+\"]]\"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,c.pick(t,!0),e),this.isIdentity())},translate:function(){var t=(e=y.read(arguments)).x,e=e.y;return this._tx+=t*this._a+e*this._c,this._ty+=t*this._b+e*this._d,this._changed(),this},scale:function(){var t=arguments,e=y.read(t);return(t=y.read(t,0,{readNull:!0}))&&this.translate(t),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,t&&this.translate(t.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=(u=y.read(arguments,1)).x,n=u.y,i=Math.cos(t),r=Math.sin(t),a=e-e*i+n*r,s=n-e*r-n*i,o=this._a,u=this._b;return e=this._c,n=this._d,this._a=i*o+r*e,this._b=i*u+r*n,this._c=-r*o+i*e,this._d=-r*u+i*n,this._tx+=a*o+s*e,this._ty+=a*u+s*n,this._changed(),this},shear:function(){var t=arguments,e=y.read(t),n=y.read(t,0,{readNull:!0});n&&this.translate(n);var i=this._a;return t=this._b,this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*i,this._d+=e.x*t,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var t=arguments,e=y.read(t),n=y.read(t,0,{readNull:!0});return t=Math.PI/180,t=new y(Math.tan(e.x*t),Math.tan(e.y*t)),this.shear(t,n)},append:function(t,e){var n,i,r,a,s,o,u,l,c;return t&&(n=this._a,i=this._b,r=this._c,a=this._d,s=t._a,o=t._c,u=t._b,l=t._d,c=t._tx,t=t._ty,this._a=s*n+u*r,this._c=o*n+l*r,this._b=s*i+u*a,this._d=o*i+l*a,this._tx+=c*n+t*r,this._ty+=c*i+t*a,e||this._changed()),this},prepend:function(t,e){var n,i,r,a,s,o,u,l,c,h,f;return t&&(n=this._a,i=this._b,r=this._c,a=this._d,s=this._tx,o=this._ty,u=t._a,l=t._c,c=t._b,h=t._d,f=t._tx,t=t._ty,this._a=u*n+l*i,this._c=u*r+l*a,this._b=c*n+h*i,this._d=c*r+h*a,this._tx=u*s+l*o+f,this._ty=c*s+h*o+t,e||this._changed()),this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,a=this._ty,s=t*i-e*n,o=null;return s&&!isNaN(s)&&isFinite(r)&&isFinite(a)&&(this._a=i/s,this._b=-e/s,this._c=-n/s,this._d=t/s,this._tx=(n*a-i*r)/s,this._ty=(e*r-t*a)/s,o=this),o},inverted:function(){return this.clone().invert()},concatenate:\"#append\",preConcatenate:\"#prepend\",chain:\"#appended\",_shiftless:function(){return new M(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(y.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x;return t=t.y,(e=e||new y)._set(i*this._a+t*this._c+this._tx,i*this._b+t*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var a=t[i],s=t[i+1];e[i]=a*this._a+s*this._c+this._tx,e[i+1]=a*this._b+s*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width;return t=[e,n,i,n,i,t=n+t.height,e,t],this._transformCoordinates(t,t,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),a=r.slice(),s=2;s<8;s++){var o=i[s],u=1&s;o<r[u]?r[u]=o:o>a[u]&&(a[u]=o)}return(e=e||new S)._set(r[0],r[1],a[0]-r[0],a[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(y.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,a=this._c,s=this._d,o=this._tx,u=this._ty,l=i*s-r*a,c=null;return l&&!isNaN(l)&&isFinite(o)&&isFinite(u)&&(u=t.x-this._tx,t=t.y-this._ty,c=(e=e||new y)._set((u*s-t*a)/l,(t*i-u*r)/l,n)),c},decompose:function(){var t,e,n,i,r=this._a,a=this._b,s=this._c,o=this._d,u=r*o-a*s,l=Math.sqrt,c=Math.atan2,h=180/Math.PI;return i=0!==r||0!==a?(t=l(r*r+a*a),e=Math.acos(r/t)*(0<a?1:-1),n=[t,u/t],[c(r*s+a*o,t*t),0]):0!==s||0!==o?(i=l(s*s+o*o),e=Math.asin(s/i)*(0<o?1:-1),n=[u/i,i],[0,c(r*s+a*o,i*i)]):n=[e=0,0],{translation:this.getTranslation(),rotation:e*h,scaling:new y(n),skewing:new y(i[0]*h,i[1]*h)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new y(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each([\"a\",\"b\",\"c\",\"d\",\"tx\",\"ty\"],(function(t){var e=c.capitalize(t),n=\"_\"+t;this[\"get\"+e]=function(){return this[n]},this[\"set\"+e]=function(t){this[n]=t,this._changed()}}),{})),T=c.extend({_class:\"Line\",initialize:function(t,e,n,i,r){(4<=arguments.length?(this._px=t,this._py=e,this._vx=n,this._vy=i,r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,n))||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new y(this._px,this._py)},getVector:function(){return new y(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return T.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return T.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return T.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return y.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return y.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,a,s,o,u,l){if(u||(n-=t,i-=e,s-=r,o-=a),u=n*o-i*s,!v.isMachineZero(u)&&(o=(s*(a=e-a)-o*(r=t-r))/u,u=(n*a-i*r)/u,l||-1e-12<o&&o<1+1e-12&&-1e-12<u&&u<1+1e-12))return new y(t+(o=l?o:o<=0?0:1<=o?1:o)*n,e+o*i)},getSide:function(t,e,n,i,r,a,s,o){return s||(n-=t,i-=e),e=(t=r-t)*i-(a-e)*n,(e=!o&&v.isMachineZero(e)&&0<=(e=(t*n+t*n)/(n*n+i*i))&&e<=1?0:e)<0?-1:0<e?1:0},getSignedDistance:function(t,e,n,i,r,a,s){return s||(n-=t,i-=e),0===n?0<i?r-t:t-r:0===i?n<0?a-e:e-a:((r-t)*i-(a-e)*n)/(n<i?i*Math.sqrt(1+n*n/(i*i)):n*Math.sqrt(1+i*i/(n*n)))},getDistance:function(t,e,n,i,r,a,s){return Math.abs(T.getSignedDistance(t,e,n,i,r,a,s))}}}),k=d.extend({_class:\"Project\",_list:\"projects\",_reference:\"project\",_compactSerialize:!0,initialize:function(t){d.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Z(null,null,this),this._view=st.create(this,t||vt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return c.serialize(this._children,t,!0,e)},_changed:function(t,e){1&t&&(r=this._view)&&(r._needsUpdate=!0,!r._requested&&r._autoUpdate&&r.requestUpdate());var n,i,r,a=this._changes;a&&e&&((r=(n=this._changesById)[i=e._id])?r.flags|=t:a.push(n[i]={item:e,flags:t}))},clear:function(){for(var t=this._children,e=t.length-1;0<=e;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new O({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:L,match:function(n){var i=n._definition;return n=i._id,e[n]||(e[n]=!0,t.push(i)),!1}}),t},getSymbols:\"getSymbolDefinitions\",getSelectedItems:function(){var t,e=this._selectionItems,n=[];for(t in e){var i=e[t],r=i._selection;1&r&&i.isInserted()?n.push(i):r||this._updateSelection(i)}return n},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t,e=this._selectionItems;for(t in e)e[t].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(o,t)},insertLayer:function(t,e){return e instanceof O?(e._remove(!1,!0),c.splice(this._children,[e],t,0),e._setProject(this,!0),(t=e._name)&&e.setName(t),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)):e=null,e},_insertItem:function(t,e,n){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(o,new O(A.NO_INSERT),!0)).insertChild(t,e),n&&e.activate&&e.activate(),e},getItems:function(t){return A._getItems(this,t)},getItem:function(t){return A._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return c.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){\"mouseup\"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r,a=n[i];for(r in e){var s=e[r];s&&s!=n&&delete s[a._id]}a.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,r=new c({offset:new y(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new M],updateMatrix:!0}),a=0,s=i.length;a<s;a++)i[a].draw(t,r);if(t.restore(),0<this._selectionCount){t.save(),t.strokeWidth=1;var o,u=this._selectionItems,l=this._scope.settings.handleSize,h=this._updateVersion;for(o in u)u[o]._drawSelection(t,e,l,u,h);t.restore()}}}),A=c.extend(h,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=c.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:\"Item\",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:\"normal\",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new M,pivot:null,visible:!0,blendMode:\"normal\",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:[\"applyMatrix\"]},new function(){var t=[\"onMouseDown\",\"onMouseUp\",\"onMouseDrag\",\"onClick\",\"onDoubleClick\",\"onMouseMove\",\"onMouseEnter\",\"onMouseLeave\"];return c.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&c.isPlainObject(t),i=n&&!0===t.internal,r=this._matrix=new M,a=n&&t.project||Vt.project,s=Vt.settings;return this._id=i?null:m.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&s.applyMatrix,e&&r.translate(e),(r._owner=this)._style=new Z(a._currentStyle,this,a),i||n&&0==t.insert||!s.insertItems&&(!n||!0!==t.insert)?this._setProject(a):(n&&t.parent||a)._insertItem(o,this,!0),n&&t!==A.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){var n={},i=this;function r(r){for(var a in r){var s=i[a];c.equals(s,\"leading\"===a?1.2*r.fontSize:r[a])||(n[a]=c.serialize(s,t,\"data\"!==a,e))}}return r(this._serializeFields),this instanceof E||r(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,n=this._parent||e,i=this._project;8&t&&(this._bounds=this._position=this._decomposed=o),16&t&&(this._globalMatrix=o),n&&72&t&&A._clearBoundsCache(n),2&t&&A._clearBoundsCache(this),i&&i._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+\"\")throw new Error(\"Names consisting only of numbers are not supported.\");var e,n=this._getOwner();t&&n&&(e=n._children,((n=n._namedChildren)[t]=n[t]||[]).push(this),t in e||(e[t]=this)),this._name=t||o,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},c.each([\"locked\",\"visible\",\"blendMode\",\"opacity\",\"guide\"],(function(t){var e=c.capitalize(t),n=\"_\"+t,i={locked:256,visible:265};this[\"get\"+e]=function(){return this[n]},this[\"set\"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(i[t]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){t!==this._selection&&(this._selection=t,(t=this._project)&&(t._updateSelection(this),this._changed(257)))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&((this._clipMask=t)&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){return new(t?y:_)((t=this._position||(this._position=this._getPositionFromBounds())).x,t.y,this,\"setPosition\")},setPosition:function(){this.translate(y.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new _(t.x,t.y,this,\"setPivot\"):null},setPivot:function(){this._pivot=y.read(arguments,0,{clone:!0,readNull:!0}),this._position=o}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var n=e||t instanceof M,i=c.set({},n?e:t,this._boundsOptions);return i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this),i=this._getCachedBounds(n&&t,i).rect,arguments.length?i:new C(i.x,i.y,i.width,i.height,this,\"setBounds\")},setBounds:function(){var t=S.read(arguments),e=this.getBounds(),n=this._matrix,i=new M,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new M).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(A._updateBoundsCache(this,e.cacheItem),A._getBounds(n,t,e)):new S},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join(\"\")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var i,r=e.internal&&!n,a=e.cacheItem,s=r?null:this._matrix._orNullIfIdentity(),o=a&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,r);return n=this._bounds,A._updateBoundsCache(this._parent||this._symbol,a),o&&n&&o in n?{rect:(i=n[o]).rect.clone(),nonscaling:i.nonscaling}:(s=(t=this._getBounds(t||s,e)).rect||t,e=this._style,e=t.nonscaling||e.hasStroke()&&!e.getStrokeScaling(),o&&(n||(this._bounds=n={}),i=n[o]={rect:s.clone(),nonscaling:e,internal:r}),{rect:s,nonscaling:e})},_getStrokeMatrix:function(t,e){return(t=(e=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item)?e.getViewMatrix().invert():t)&&t._shiftless()},statics:{_updateBoundsCache:function(t,e){var n;t&&e&&(n=e._id,(t=t._boundsCache=t._boundsCache||{ids:{},list:[]}).ids[n]||(t.list.push(e),t.ids[n]=e))},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=o;for(var n=0,i=e.list,r=i.length;n<r;n++){var a=i[n];a!==t&&(a._bounds=a._position=o,a._boundsCache&&A._clearBoundsCache(a))}}},_getBounds:function(t,e,n){var i=l=1/0,r=c=-l,a=!1;n=n||{};for(var s=0,o=t.length;s<o;s++){var u,l,c,h=t[s];h._visible&&!h.isEmpty(!0)&&(h=(u=h._getCachedBounds(e&&e.appended(h._matrix),n,!0)).rect,l=Math.min(h.x,l),i=Math.min(h.y,i),c=Math.max(h.x+h.width,c),r=Math.max(h.y+h.height,r),u.nonscaling&&(a=!0))}return{rect:isFinite(l)?new S(l,i,c-l,r-i):new S,nonscaling:a}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e,n=this.getRotation();null!=n&&null!=t&&(e=this._decomposed,this.rotate(t-n),e&&(e.rotation=t,this._decomposed=e))},getScaling:function(){var t=(t=this._decompose())&&t.scaling;return new _(t?t.x:1,t?t.y:1,this,\"setScaling\")},setScaling:function(){var t,e,n,i,r=this.getScaling(),a=y.read(arguments,0,{clone:!0,readNull:!0});r&&a&&!r.equals(a)&&(t=this.getRotation(),e=this._decomposed,n=new M,(i=v.isZero)(r.x)||i(r.y)?(n.translate(e.translation),t&&n.rotate(t),n.scale(a.x,a.y),this._matrix.set(n)):(i=this.getPosition(!0),n.translate(i),t&&n.rotate(t),n.scale(a.x/r.x,a.y/r.y),t&&n.rotate(-t),n.translate(i.negate()),this.transform(n)),e&&(e.scaling=a,this._decomposed=e))},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){if(i=this._globalMatrix)for(var e=this._parent,n=[];e;){if(!e._globalMatrix){for(var i=null,r=0,a=n.length;r<a;r++)n[r]._globalMatrix=null;break}n.push(e),e=e._parent}return i||(i=this._globalMatrix=this._matrix.clone(),(e=this._parent)&&i.prepend(e.getGlobalMatrix(!0))),t?i:i.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:\"#getApplyMatrix\",setTransformContent:\"#setApplyMatrix\"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof O)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:\"#getParent\",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return c.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(A.NO_INSERT),n=this._children,i=c.pick(t?t.insert:o,t===o||!0===t);t=c.pick(t?t.deep:o,!0),n&&e.copyAttributes(this),n&&!t||e.copyContent(this),n||e.copyAttributes(this),i&&e.insertAbove(this);var r=this._name;if(i=this._parent,r&&i){n=i._children;for(var a=r,s=1;n[r];)r=a+\" \"+s++;r!==a&&e.setName(r)}return e},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=[\"_locked\",\"_visible\",\"_blendMode\",\"_opacity\",\"_clipMask\",\"_guide\"],i=0,r=n.length;i<r;i++){var a=n[i];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var s=t._data;e=t._name,this._data=s?c.clone(s):null,e&&this.setName(e)},rasterize:function(t,e){var n,i;c.isPlainObject(t)?(s=t.resolution,n=t.insert,i=t.raster):(s=t,n=e),i?i.matrix.reset(!0):i=new I(A.NO_INSERT);var r=this.getStrokeBounds(),a=(s||this.getView().getResolution())/72,s=(t=r.getTopLeft().floor(),e=r.getBottomRight().ceil(),new b(e.subtract(t)));return r=s.multiply(a),i.setSize(r,!0),r.isZero()||(e=i.getContext(!0),r=(new M).scale(a).translate(t.negate()),e.save(),r.applyToContext(e),this.draw(e,new c({matrices:[r]})),e.restore()),i.transform((new M).translate(t.add(s.divide(2))).scale(1/a)),n!==o&&!n||i.insertAbove(this),i},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(y.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;0<=n;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return S.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new U.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof A&&0<this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length}},new function(){function t(){var t=arguments;return this._hitTest(y.read(t),R.getOptions(t))}function e(){var t=arguments,e=y.read(t),n=R.getOptions(t);return t=[],this._hitTest(e,new c({all:t},n)),t}function n(t,e,n,i){var r=this._children;if(r)for(var a=r.length-1;0<=a;a--){var s;if((s=(s=r[a])!==i&&s._hitTest(t,e,n))&&!e.all)return s}return null}return k.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var i=this._matrix,r=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(e.tolerance,1e-12),s=e._tolerancePadding=new b(U._getStrokePadding(a,i._shiftless().invert()));if(!(t=i._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(s.multiply(2))._containsPoint(t))return null;var o,u,l=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==c.hyphenate(this._class)||e.class&&!(this instanceof e.class)),h=e.match,f=this;function d(t){return(t=t&&h&&!h(t)?null:t)&&e.all&&e.all.push(t),t}function p(e,n){var i=n?o[\"get\"+n]():f.getPosition();if(t.subtract(i).divide(s).length<=1)return new R(e,f,{name:n?c.hyphenate(n):e,point:i})}var g=e.position;if(n=e.center,a=e.bounds,l&&this._parent&&(g||n||a)){if((n||a)&&(o=this.getInternalBounds()),!(u=g&&p(\"position\")||n&&p(\"center\",\"Center\"))&&a)for(var v=[\"TopLeft\",\"TopRight\",\"BottomLeft\",\"BottomRight\",\"LeftCenter\",\"TopCenter\",\"RightCenter\",\"BottomCenter\"],m=0;m<8&&!u;m++)u=p(\"bounds\",v[m]);u=d(u)}return(u=u||this._hitTestChildren(t,e,r)||l&&d(this._hitTestSelf(t,e,r,this.getStrokeScaling()?null:r._shiftless().invert()))||null)&&u.point&&(u.point=i.transform(u.point)),u},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new R(\"fill\",this)},matches:function(t,e){var n=x(t);if(\"object\"==n){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1;return!0}if(\"function\"==n)return t(this);if(\"match\"===t)return e(this);if(n=/^(empty|editable)$/.test(t)?this[\"is\"+c.capitalize(t)]():\"type\"===t?c.hyphenate(this._class):this[t],\"class\"===t){if(\"function\"==typeof e)return this instanceof e;n=this._class}if(\"function\"==typeof e)return!!e(n);if(e){if(e.test)return e.test(n);if(c.isPlainObject(e))return function t(e,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(i=n[i],c.isPlainObject(r)&&c.isPlainObject(i)){if(!t(r,i))return!1}else if(!c.equals(r,i))return!1}return!0}(e,n)}return c.equals(n,e)},getItems:function(t){return A._getItems(this,t,this._matrix)},getItem:function(t){return A._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,r,a){var s,o,u;r||(o=(s=\"object\"==x(n)&&n)&&s.overlapping,u=s&&s.inside,l=(y=o||u)&&S.read([y]),r={items:[],recursive:s&&!1!==s.recursive,inside:!!u,overlapping:!!o,rect:l,path:o&&new U.Rectangle({rectangle:l,insert:!1})},s&&(n=c.filter({},n,{recursive:!0,inside:!0,overlapping:!0})));var l,h=e._children,f=r.items;i=(l=r.rect)&&(i||new M);for(var d=0,p=h&&h.length;d<p;d++){var g=h[d],v=i&&i.appended(g._matrix),m=!0;if(l){var y=g.getBounds(v);if(!l.intersects(y))continue;l.contains(y)||r.overlapping&&(y.contains(l)||r.path.intersects(g,v))||(m=!1)}if(m&&g.matches(n)&&(f.push(g),a))break;if(!1!==r.recursive&&t(g,n,v,r,a),a&&0<f.length)break}return f}}},{importJSON:function(t){return(t=c.importJSON(t,this))!==this?this.addChild(t):t},addChild:function(t){return this.insertChild(o,t)},insertChild:function(t,e){return(e=e?this.insertChildren(t,[e]):null)&&e[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&0<e.length){for(var i={},r=(e=c.slice(e)).length-1;0<=r;r--){var a=(l=e[r])&&l._id;!l||i[a]?e.splice(r,1):(l._remove(!1,!0),i[a]=!0)}c.splice(n,e,t,0);for(var s=this._project,o=s._changes,u=(r=0,e.length);r<u;r++){var l,h=(l=e[r])._name;l._parent=this,l._setProject(s,!0),h&&l.setName(h),o&&l._changed(5)}this._changed(11)}else e=null;return e},_insertItem:\"#insertChild\",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(o,this):null},appendTop:\"#addChild\",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:\"#insertAbove\",moveBelow:\"#insertBelow\",addTo:function(t){return t._insertItem(o,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;return e&&1===e.length?(t=e[0].reduce(t),this._parent?(t.insertAbove(this),this.remove()):t.remove(),t):this},_removeNamed:function(){var t,e,n,i,r=this._getOwner();r&&(t=r._children,-1!==(r=(i=(e=r._namedChildren)[n=this._name])?i.indexOf(this):-1)&&(t[n]==this&&delete t[n],i.splice(r,1),i.length?t[n]=i[0]:delete e[n]))},_remove:function(t,e){var n=this._getOwner(),i=this._project,r=this._index;return this._style&&this._style._dispose(),!(!n||(this._name&&this._removeNamed(),null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(n._children,null,r,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null))},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){return(t=t&&t.insertBelow(this))&&this.remove(),t},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=c.pick(e,this._children.length);for(var n=c.splice(this._children,null,t,e-t),i=n.length-1;0<=i;i--)n[i]._remove(!0,!1);return 0<n.length&&this._changed(11),n},clear:\"#removeChildren\",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,n=e?e.length:0;if(t){for(var i=0;i<n;i++)if(!e[i].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){for(var e=[];e.unshift(t),t=t._parent;);return e}for(var n=e(this),i=e(t),r=0,a=Math.min(n.length,i.length);r<a;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&0<this._children.length},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},c.each([\"rotate\",\"scale\",\"shear\",\"skew\"],(function(t){var e=\"rotate\"===t;this[t]=function(){var n=arguments,i=(e?c:y).read(n);return n=y.read(n,0,{readNull:!0}),this.transform((new M)[t](i,n||this.getPosition(!0)))}}),{translate:function(){var t=new M;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n){var i,r,a=this._matrix,s=t&&!t.isIdentity(),o=n&&this._canApplyMatrix||this._applyMatrix&&(s||!a.isIdentity()||e&&this._children);if(!s&&!o)return this;s&&(!t.isInvertible()&&a.isInvertible()&&(a._backup=a.getValues()),a.prepend(t,!0),i=(r=this._style).getFillColor(!0),r=r.getStrokeColor(!0),i&&i.transform(t),r&&r.transform(t)),(o=o&&this._transformContent(a,e,n))&&((e=this._pivot)&&a._transformPoint(e,e,!0),a.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0));var u=this._bounds;if(a=this._position,(s||o)&&this._changed(25),(n=s&&u&&t.decompose())&&n.skewing.isZero()&&n.rotation%90==0){for(var l in u){var c=u[l];c.nonscaling?delete u[l]:!o&&c.internal||(c=c.rect,t._transformBounds(c,c))}(n=(this._bounds=u)[this._getBoundsCacheKey(this._boundsOptions||{})])&&(this._position=this._getPositionFromBounds(n.rect))}else s&&a&&this._pivot&&(this._position=t._transformPoint(a,a));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,a=i.length;r<a;r++)i[r].transform(t,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(y.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(y.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(y.read(arguments))},localToParent:function(){return this._matrix._transformPoint(y.read(arguments))},fitBounds:function(t,e){t=S.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width;r=(e?r<i:i<r)?t.width/n.width:t.height/n.height,(r=new S(new y,new b(n.width*r,n.height*r))).setCenter(t.getCenter()),this.setBounds(r)}}),{_setStyles:function(t,e,n){var i,r,a=this._style,s=this._matrix;a.hasFill()&&(t.fillStyle=a.getFillColor().toCanvasStyle(t,s)),a.hasStroke()&&(t.strokeStyle=a.getStrokeColor().toCanvasStyle(t,s),t.lineWidth=a.getStrokeWidth(),i=a.getStrokeJoin(),r=a.getStrokeCap(),s=a.getMiterLimit(),i&&(t.lineJoin=i),r&&(t.lineCap=r),s&&(t.miterLimit=s),Vt.support.nativeDash&&(r=a.getDashArray(),s=a.getDashOffset(),r&&r.length&&(\"setLineDash\"in t?(t.setLineDash(r),t.lineDashOffset=s):(t.mozDash=r,t.mozDashOffset=s)))),a.hasShadow()&&(e=e.pixelRatio||1,e=(n=n._shiftless().prepend((new M).scale(e,e))).transform(new y(a.getShadowBlur(),0)),n=n.transform(this.getShadowOffset()),t.shadowColor=a.getShadowColor().toCanvasStyle(t),t.shadowBlur=e.getLength(),t.shadowOffsetX=n.x,t.shadowOffsetY=n.y)},draw:function(t,e,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var i=e.matrices,r=e.viewMatrix,a=this._matrix;if((p=i[i.length-1].appended(a)).isInvertible()){r=r?r.appended(p):p,i.push(p),e.updateMatrix&&(this._globalMatrix=p);var s,o,u,l=this._blendMode,c=v.clamp(this._opacity,0,1),h=\"normal\"===l,f=mt.nativeModes[l],d=h&&1===c||e.dontStart||e.clip||(f||h&&c<1)&&this._canComposite(),p=e.pixelRatio||1;if(!d){if(!(g=this.getStrokeBounds(r)).width||!g.height)return void i.pop();u=e.offset,o=e.offset=g.getTopLeft().floor(),s=t,t=vt.getContext(g.getSize().ceil().add(1).multiply(p)),1!==p&&t.scale(p,p)}t.save(),h=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r;var g=!d&&e.clipItem;n=!h||g,d?(t.globalAlpha=c,f&&(t.globalCompositeOperation=l)):n&&t.translate(-o.x,-o.y),n&&(d?a:r).applyToContext(t),g&&e.clipItem.draw(t,e.extend({clip:!0})),h&&(t.setTransform(p,0,0,p,0,0),(g=e.offset)&&t.translate(-g.x,-g.y)),this._draw(t,e,r,h),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),d||(mt.process(l,t,s,c,o.subtract(u).multiply(p)),vt.release(t),e.offset=u)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof V)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var a=1&(o=this._selection),s=2&o||a&&this._selectBounds,o=4&o;if(((a=!!this._drawSelected&&a)||s||o)&&this._isUpdated(r)){var u=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),l=(e=e.appended(this.getGlobalMatrix(!0)),n/2);if(t.strokeStyle=t.fillStyle=u?u.toCanvasStyle(t):\"#009dec\",a&&this._drawSelected(t,e,i),o){i=this.getPosition(!0);var c=(i=(o=this._parent)?o.localToGlobal(i):i).x,h=i.y;t.beginPath(),t.arc(c,h,l,0,2*Math.PI,!0),t.stroke();for(var f=[[0,-1],[1,0],[0,1],[-1,0]],d=l,p=n+1,g=0;g<4;g++){var v=(m=f[g])[0],m=m[1];t.moveTo(c+v*d,h+m*d),t.lineTo(c+v*p,h+m*p),t.stroke()}}if(s){var y=e._transformCorners(this.getInternalBounds());for(t.beginPath(),g=0;g<8;g++)t[g?\"lineTo\":\"moveTo\"](y[g],y[++g]);for(t.closePath(),t.stroke(),g=0;g<8;g++)t.fillRect(y[g]-l,y[++g]-l,n,n)}}},_canComposite:function(){return!1}},c.each([\"down\",\"drag\",\"up\",\"move\"],(function(t){this[\"removeOn\"+c.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t){var n;t[e]&&(n=\"mouse\"+e,(e=(e=this._project)._removeSets=e._removeSets||{})[n]=e[n]||{},e[n][this._id]=this)}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var i=n&&n.easing,r=n&&n.start,a=(n=null!=n&&(\"number\"==typeof n?n:n.duration),new pt(this,t,e,n,i,r));return n&&this.on(\"frame\",(function t(e){a._handleFrame(1e3*e.time),a.running||this.off(\"frame\",t)})),a},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),E=A.extend({_class:\"Group\",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),2050&e&&(this._clipItem=o)},_getClipItem:function(){if((t=this._clipItem)===o){for(var t=null,e=this._children,n=0,i=e.length;n<i;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(e),c.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,a=0,s=r.length;a<s;a++){var o=r[a];o!==i&&o.draw(t,e)}}}),O=E.extend({_class:\"Layer\",initialize:function(){E.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),P=A.extend({_class:\"Shape\",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&c.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:\"#getType\",setShape:\"#setType\",getSize:function(){var t=this._size;return new w(t.width,t.height,this,\"setSize\")},setSize:function(){var t,e,n,i=b.read(arguments);this._size?this._size.equals(i)||(t=this._type,e=i.width,n=i.height,\"rectangle\"===t?this._radius.set(b.min(this._radius,i.divide(2).abs())):\"circle\"===t?(e=n=(e+n)/2,this._radius=e/2):\"ellipse\"===t&&this._radius._set(e/2,n/2),this._size._set(e,n),this._changed(9)):this._size=i.clone()},getRadius:function(){var t=this._radius;return\"circle\"===this._type?t:new w(t.width,t.height,this,\"setRadius\")},setRadius:function(t){var e=this._type;if(\"circle\"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=b.read(arguments),this._radius){if(this._radius.equals(t))return;this._radius.set(t),\"rectangle\"===e?(n=b.max(this._size,t.multiply(2)),this._size.set(n)):\"ellipse\"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(U[c.capitalize(this._type)])({center:new y,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),Vt.settings.applyMatrix&&e.setApplyMatrix(!0),t!==o&&!t||e.insertAbove(this),e},toShape:\"#clone\",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,i){var r,a,s,o,u,l=this._style,c=l.hasFill(),h=l.hasStroke(),f=e.dontFinish||e.clip,d=!i;(c||h||f)&&(s=this._type,o=this._radius,u=\"circle\"===s,e.dontStart||t.beginPath(),d&&u?t.arc(0,0,o,0,2*Math.PI,!0):(r=u?o:o.width,a=u?o:o.height,o=(u=this._size).width,u=u.height,d&&\"rectangle\"===s&&0===r&&0===a?t.rect(-o/2,-u/2,o,u):(u=[-(d=o/2),-(s=u/2)+a,-d,(u=a*(o=.44771525016920644))-s,(o*=r)-d,-s,-d+r,-s,d-r,-s,d-o,-s,d,u-s,d,-s+a,d,s-a,d,s-u,d-o,s,d-r,s,-d+r,s,o-d,s,-d,s-u,-d,s-a],i&&i.transform(u,u,32),t.moveTo(u[0],u[1]),t.bezierCurveTo(u[2],u[3],u[4],u[5],u[6],u[7]),d!==r&&t.lineTo(u[8],u[9]),t.bezierCurveTo(u[10],u[11],u[12],u[13],u[14],u[15]),s!==a&&t.lineTo(u[16],u[17]),t.bezierCurveTo(u[18],u[19],u[20],u[21],u[22],u[23]),d!==r&&t.lineTo(u[24],u[25]),t.bezierCurveTo(u[26],u[27],u[28],u[29],u[30],u[31]))),t.closePath()),f||!c&&!h||(this._setStyles(t,e,n),c&&(t.fill(l.getFillRule()),t.shadowColor=\"rgba(0,0,0,0)\"),h&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new S(this._size).setCenter(0,0),i=this._style;return i=e.stroke&&i.hasStroke()&&i.getStrokeWidth(),t&&(n=t._transformBounds(n)),i?n.expand(U._getStrokePadding(i,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),a=1;a<=4;a++){var s=new y(1<a&&a<4?-1:1,2<a?-1:1),o=s.multiply(r),u=o.subtract(s.multiply(i));if(new S(n?o.add(s.multiply(n)):o,u).contains(e))return{point:u,quadrant:a}}}function e(t,e,n,i){return t=t.divide(e),(!i||t.isInQuadrant(i))&&t.subtract(t.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if(\"rectangle\"!==this._type)return n.divide(this.size).getLength()<=.5;var i=t(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:e.base.call(this,n)},_hitTestSelf:function n(i,r,a,s){var o,u,l,c=!1,h=this._style,f=r.stroke&&h.hasStroke(),d=r.fill&&h.hasFill();return(f||d)&&(u=this._type,o=this._radius,l=f?h.getStrokeWidth()/2:0,d=r._tolerancePadding.add(U._getStrokePadding(l,!h.getStrokeScaling()&&s)),c=\"rectangle\"===u?(h=t(this,i,l=d.multiply(2)))?e(i.subtract(h.point),o,d,h.quadrant):(h=(u=new S(this._size).setCenter(0,0)).expand(l),l=u.expand(l.negate()),h._containsPoint(i)&&!l._containsPoint(i)):e(i,o,d)),c?new R(f?\"stroke\":\"fill\",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,r){var a=c.create(P.prototype);return a._type=t,a._size=n,a._radius=i,a._initialize(c.getNamed(r),e),a}return{Circle:function(){var e=arguments,n=y.readNamed(e,\"center\"),i=c.readNamed(e,\"radius\");return t(\"circle\",n,new b(2*i),i,e)},Rectangle:function(){var e=arguments,n=S.readNamed(e,\"rectangle\"),i=b.min(b.readNamed(e,\"radius\"),n.getSize(!0).divide(2));return t(\"rectangle\",n.getCenter(!0),n.getSize(!0),i,e)},Ellipse:function(){var e=arguments,n=P._readEllipse(e),i=n.radius;return t(\"ellipse\",n.center,i.multiply(2),i,e)},_readEllipse:function(t){var e,n;return n=c.hasNamed(t,\"radius\")?(e=y.readNamed(t,\"center\"),b.readNamed(t,\"radius\")):(e=(n=S.readNamed(t,\"rectangle\")).getCenter(!0),n.getSize(!0).divide(2)),{center:e,radius:n}}}}}),I=A.extend({_class:\"Raster\",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:[\"crossOrigin\"],_smoothing:\"low\",beans:!0,initialize:function(t,e){var n,i;this._initialize(t,e!==o&&y.read(arguments))||((i=\"string\"==(i=x(t))?l.getElementById(t):\"object\"==i?t:null)&&i!==A.NO_INSERT&&(i.getContext||null!=i.naturalHeight?n=i:i&&((i=b.read(arguments)).isZero()||(n=vt.getCanvas(i)))),n?this.setImage(n):this.setSource(t)),this._size||(this._size=new b,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;e?this._setImage(e):n&&((e=vt.getCanvas(t._size)).getContext(\"2d\").drawImage(n,0,0),this._setImage(e)),this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new w(t?t.width:0,t?t.height:0,this,\"setSize\")},setSize:function(t,e){var n,i=b.read(arguments);i.equals(this._size)?e&&this.clear():0<i.width&&0<i.height?(n=!e&&this.getElement(),this._setImage(vt.getCanvas(i)),n&&this.getContext(!0).drawImage(n,0,0,i.width,i.height)):(this._canvas&&vt.release(this._canvas),this._size=i.clone())},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new y(0,0).transform(t),n=new y(1,0).transform(t).subtract(e);return e=new y(0,1).transform(t).subtract(e),new b(72/n.getLength(),72/e.getLength())},getPpi:\"#getResolution\",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),i=t&&t.type||\"load\";n&&e.responds(i)&&(Vt=n._scope,e.emit(i,new ut(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&Q.add(t,{load:function(i){e._setImage(t),n(i)},error:n})},_setImage:function(t){this._canvas&&vt.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new b(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=vt.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){vt.release(t)}}return this._canvas},setCanvas:\"#setImage\",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext(\"2d\")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new s.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),t&&(e.src=t),this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||\"\"},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=\"string\"==typeof t?t:t?\"low\":\"off\",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=S.read(arguments),e=vt.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=S.read(arguments),e=new I(A.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=(t=this._image)&&t.src;return/^data:/.test(t)?t:(t=this.getCanvas())?t.toDataURL.apply(t,arguments):null},drawImage:function(t){var e=y.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){if(t?t instanceof j?r=(i=t).getBounds():\"object\"==x(t)&&(\"width\"in t?r=new S(t):\"x\"in t&&(r=new S(t.x-.5,t.y-.5,1,1))):r=this.getBounds(),!r)return null;var e=Math.min(r.width,32),n=Math.min(r.height,32);(t=I._sampleContext)?t.clearRect(0,0,33,33):t=I._sampleContext=vt.getContext(new b(32)),t.save(),(r=(new M).scale(e/r.width,n/r.height).translate(-r.x,-r.y)).applyToContext(t),i&&i.draw(t,new c({clip:!0,matrices:[r]})),this._matrix.applyToContext(t);var i=this.getElement(),r=this._size;i&&t.drawImage(i,-r.width/2,-r.height/2),t.restore();for(var a=t.getImageData(.5,.5,Math.ceil(e),Math.ceil(n)).data,s=[0,0,0],o=0,u=0,l=a.length;u<l;u+=4){var h=a[u+3];o+=h,h/=255,s[0]+=a[u]*h,s[1]+=a[u+1]*h,s[2]+=a[u+2]*h}for(u=0;u<3;u++)s[u]/=o;return o?Y.read(s):null},getPixel:function(){var t=y.read(arguments);return t=this.getContext().getImageData(t.x,t.y,1,1).data,new Y(\"rgb\",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var t,e=arguments,n=y.read(e),i=(t=Y.read(e))._convert(\"rgb\"),r=t._alpha,a=this.getContext(!0);(t=(e=a.createImageData(1,1)).data)[0]=255*i[0],t[1]=255*i[1],t[2]=255*i[2],t[3]=null!=r?255*r:255,a.putImageData(e,n.x,n.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=b.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=S.read(arguments);return t.isEmpty()&&(t=new S(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=y.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new S(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new R(\"pixel\",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var i=this.getElement();i&&0<i.width&&0<i.height&&(t.globalAlpha=v.clamp(this._opacity,0,1),this._setStyles(t,e,n),e=this._smoothing,K.setPrefixed(t,(n=\"off\"===e)?\"imageSmoothingEnabled\":\"imageSmoothingQuality\",!n&&e),t.drawImage(i,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),L=A.extend({_class:\"SymbolItem\",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==o&&y.read(arguments,1))||this.setDefinition(t instanceof D?t:new D(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:\"#getDefinition\",setSymbol:\"#setDefinition\",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){return e=e.extend({all:!1}),(n=this._definition._item._hitTest(t,e,n))&&(n.item=this),n},_draw:function(t,e){this._definition._item.draw(t,e)}}),D=c.extend({_class:\"SymbolDefinition\",initialize:function(t,e){this._id=m.get(),this.project=Vt.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return c.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&A._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),(this._item=t).remove(),t.setSelected(!1),e||t.setPosition(new y),(t._symbol=this)._changed(9)},getDefinition:\"#getItem\",setDefinition:\"#setItem\",place:function(t){return new L(this,t)},clone:function(){return new D(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),R=c.extend({_class:\"HitResult\",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){return t=t&&c.read(t),new c({type:null,tolerance:Vt.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),N=c.extend({_class:\"Segment\",beans:!0,_selection:0,initialize:function(t,e,n,i,r,a){var s,u,l,c,h=arguments.length;0<h&&(null==t||\"object\"==x(t)?c=1===h&&t&&\"point\"in t?(s=t.point,u=t.handleIn,l=t.handleOut,t.selection):(s=t,u=e,l=n,i):(s=[t,e],u=n!==o?[n,i]:null,l=r!==o?[r,a]:null)),new F(s,this,\"_point\"),new F(u,this,\"_handleIn\"),new F(l,this,\"_handleOut\"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,i=this._selection;return n=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n,i&&n.push(i),c.serialize(n,t,!0,e)},_changed:function(t){var e,n,i,r=this._path;r&&(e=r._curves,n=this._index,e&&(t&&t!==this._point&&t!==this._handleIn||!(i=0<n?e[n-1]:r._closed?e[e.length-1]:null)||i._changed(),t&&t!==this._point&&t!==this._handleOut||!(i=e[n])||i._changed()),r._changed(41))},getPoint:function(){return this._point},setPoint:function(){this._point.set(y.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(y.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(y.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==o?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(0<e&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new z(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var i=t||{},r=i.type,a=i.factor,s=this.getPrevious(),u=this.getNext(),l=(s||this)._point,c=this._point,h=(u||this)._point,f=l.getDistance(c);if(t=c.getDistance(h),r&&\"catmull-rom\"!==r){if(\"geometric\"!==r)throw new Error(\"Smoothing method '\"+r+\"' not supported.\");s&&u&&(i=l.subtract(h),r=(g=a===o?.4:a)*f/(f+t),e||this.setHandleIn(i.multiply(r)),n||this.setHandleOut(i.multiply(r-g)))}else{var d,p,g=a===o?.5:a;f=(a=Math.pow(f,g))*a,g=(t=Math.pow(t,g))*t,!e&&s&&(d=2*g+3*t*a+f,this.setHandleIn(0!=(p=3*t*(t+a))?new y((g*l._x+d*c._x-f*h._x)/p-c._x,(g*l._y+d*c._y-f*h._y)/p-c._y):new y)),!n&&u&&(d=2*f+3*a*t+g,this.setHandleOut(0!=(p=3*a*(a+t))?new y((f*h._x+d*c._x-g*l._x)/p-c._x,(f*h._y+d*c._y-g*l._y)/p-c._y):new y))}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new N(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new N(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=[\"point: \"+this._point];return this._handleIn.isZero()||t.push(\"handleIn: \"+this._handleIn),this._handleOut.isZero()||t.push(\"handleOut: \"+this._handleOut),\"{ \"+t.join(\", \")+\" }\"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,a=t._point,s=e._point,o=t._handleIn;n=e._handleIn,e=e._handleOut,t=t._handleOut,this._point._set(i*a._x+r*s._x,i*a._y+r*s._y,!0),this._handleIn._set(i*o._x+r*n._x,i*o._y+r*n._y,!0),this._handleOut._set(i*t._x+r*e._x,i*t._y+r*e._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,s=i._x,o=i._y,u=2;return e[0]=s,e[1]=o,r&&(e[u++]=r._x+s,e[u++]=r._y+o),a&&(e[u++]=a._x+s,e[u++]=a._y+o),t&&(t._transformCoordinates(e,e,u/2),s=e[0],o=e[1],n?(i._x=s,i._y=o,u=2,r&&(r._x=e[u++]-s,r._y=e[u++]-o),a&&(a._x=e[u++]-s,a._y=e[u++]-o)):(r||(e[u++]=s,e[u++]=o),a||(e[u++]=s,e[u++]=o))),e}}),F=y.extend({initialize:function(t,e,n){var i,r,a;t?(i=t[0])!==o?r=t[1]:((i=(a=t).x)===o&&(i=(a=y.read(arguments)).x),r=a.y,a=a.selected):i=r=0,this._x=i,this._y=r,(this._owner=e)[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=v.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),B=c.extend({_class:\"Curve\",beans:!0,initialize:function(t,e,n,i,r,a,s,o){var u,l,c,h,f,d,p=arguments.length;3===p?(this._path=t,u=e,l=n):p?1===p?\"segment1\"in t?(u=new N(t.segment1),l=new N(t.segment2)):\"point1\"in t?(c=t.point1,f=t.handle1,d=t.handle2,h=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],h=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===p?(u=new N(t),l=new N(e)):4===p?(c=t,f=e,d=n,h=i):8===p&&(c=[t,e],h=[s,o],f=[n-t,i-e],d=[r-s,a-o]):(u=new N,l=new N),this._segment1=u||new N(c,null,f),this._segment2=l||new N(h,d,null)},_serialize:function(t,e){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=o},clone:function(){return new B(this._segment1,this._segment2)},toString:function(){var t=[\"point1: \"+this._segment1._point];return this._segment1._handleOut.isZero()||t.push(\"handle1: \"+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push(\"handle2: \"+this._segment2._handleIn),t.push(\"point2: \"+this._segment2._point),\"{ \"+t.join(\", \")+\" }\"},classify:function(){return B.classify(this.getValues())},remove:function(){var t,e,n=!1;return this._path&&(e=(t=this._segment2)._handleOut,(n=t.remove())&&this._segment1._handleOut.set(e)),n},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(y.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(y.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(y.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(y.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return B.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new y(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=B.getLength(this.getValues(),0,1)),this._length},getArea:function(){return B.getArea(this.getValues())},getLine:function(){return new T(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new B(B.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return B.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n,i,r,a,s,o,u=null;return 1e-8<=t&&t<=1-1e-8&&(n=(o=B.subdivide(this.getValues(),t))[0],i=o[1],r=e||this.hasHandles(),a=this._segment1,s=this._segment2,t=this._path,r&&(a._handleOut._set(n[2]-n[0],n[3]-n[1]),s._handleIn._set(i[4]-i[6],i[5]-i[7])),o=n[6],e=n[7],e=new N(new y(o,e),r&&new y(n[4]-o,n[5]-e),r&&new y(i[2]-o,i[3]-e)),u=t?(t.insert(a._index+1,e),this.getNext()):(this._segment2=e,this._changed(),new B(e,s))),u},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===o?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===o?.5:e?t:this.getTimeAt(t))},reversed:function(){return new B(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,a=t._handleOut,s=e._handleIn,o=e._point;return t=r.x,e=r.y,r=o.x,o=o.y,o=i?[t,e,t,e,r,o,r,o]:[t,e,t+a._x,e+a._y,r+s._x,o+s._y,r,o],n&&n._transformCoordinates(o,o,4),o},subdivide:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=1-(e=e===o?.5:e),f=h*n+e*r,d=h*i+e*a,p=h*r+e*s,g=h*a+e*u;return r=h*u+e*c,a=h*f+e*p,u=h*p+e*(t=h*s+e*l),p=h*g+e*r,[[n,i,f,d,a,s=h*d+e*g,g=h*a+e*u,e=h*s+e*p],[g,e,u,p,t,r,l,c]]},getMonoCurves:function(t,e){var n,i,r=[],a=t[0+(o=e?0:1)],s=t[2+o],o=(e=t[4+o],t[6+o]);return s<=a==e<=s&&e<=s==o<=e||B.isStraight(t)||!(i=v.solveQuadratic(3*(s-e)-a+o,2*(a+e)-4*s,s-a,n=[],1e-8,1-1e-8))?r.push(t):(n.sort(),s=n[0],a=B.subdivide(t,s),r.push(a[0]),1<i&&(s=(n[1]-s)/(1-s),a=B.subdivide(a[1],s),r.push(a[0])),r.push(a[1])),r},solveCubic:function(t,e,n,i,r,a){var s=t[e],o=t[e+2],u=t[e+4];return t=t[e+6],e=0,s<n&&t<n&&o<n&&u<n||n<s&&n<t&&n<o&&n<u?e:v.solveCubic(t-s-(t=3*(o-s))-(o=3*(u-o)-t),o,t,s-n,i,r,a)},getTimeOf:function(t,e){var n=new y(t[0],t[1]),i=new y(t[6],t[7]);if(null===(e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null))for(var r=[e.x,e.y],a=[],s=0;s<2;s++)for(var o=B.solveCubic(t,s,r[s],a,0,1),u=0;u<o;u++){var l=a[u];if(e.isClose(B.getPoint(t,l),1e-7))return l}return e.isClose(n,1e-7)?0:e.isClose(i,1e-7)?1:null},getNearestTime:function(t,e){if(B.isStraight(t)){var n=t[0],i=t[1],r=t[6]-n,a=t[7]-i,s=r*r+a*a;return 0==s||(s=((e.x-n)*r+(e.y-i)*a)/s)<1e-12?0:.999999999999<s?1:B.getTimeOf(t,new y(n+s*r,i+s*a))}var o=1/0,u=0;function l(n){if(0<=n&&n<=1){var i=e.getDistance(B.getPoint(t,n),!0);return i<o?(o=i,u=n,1):void 0}}for(var c=0;c<=100;c++)l(c/100);for(var h=.005;1e-8<h;)l(u-h)||l(u+h)||(h/=2);return u},getPart:function(t,e,n){var i,r=n<e;return r&&(i=e,e=n,n=i),0<e&&(t=B.subdivide(t,e)[1]),n<1&&(t=B.subdivide(t,(n-e)/(1-e))[0]),r?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],o=t[5],u=t[6];return r=3*r-2*n-u,a=3*a-2*i-(t=t[7]),n=3*s-2*u-n,i=3*o-2*t-i,Math.max(r*r,n*n)+Math.max(a*a,i*i)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6];return 3*(((t=t[7])-n)*(i+a)-(o-e)*(r+s)+r*(e-a)-i*(n-s)+t*(a+e/3)-o*(s+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)B._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new S(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,a,s,o,u){function l(t,e){var n=t-e;e=t+e,n<s[r]&&(s[r]=n),e>o[r]&&(o[r]=e)}var c=s[r]+(a/=2),h=o[r]-a;if(t<c||e<c||n<c||i<c||h<t||h<e||h<n||h<i)if(e<t!=e<i&&n<t!=n<i)l(t,0),l(i,0);else{var f=v.solveQuadratic(3*(e-n)-t+i,2*(t+n)-4*e,e-t,u);l(i,0);for(var d=0;d<f;d++){var p=u[d],g=1-p;1e-8<=p&&p<=1-1e-8&&l(g*g*g*t+3*g*g*p*e+3*g*p*p*n+p*p*p*i,a)}}}}},c.each([\"getBounds\",\"getStrokeBounds\",\"getHandleBounds\"],(function(t){this[t]=function(){return this._bounds||(this._bounds={}),(this._bounds[t]||(this._bounds[t]=U[t]([this._segment1,this._segment2],!1,this._path))).clone()}}),{}),c.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(n)){var a=new T(t,i);if(a.getDistance(t.add(e))<1e-7&&a.getDistance(i.add(n))<1e-7)return i=r.dot(r),e=r.dot(e)/i,i=r.dot(n)/i,0<=e&&e<=1&&i<=0&&-1<=i}return!1},isLinear:function(t,e,n,i){return t=i.subtract(t).divide(3),e.equals(t)&&n.negate().equals(t)}},(function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],a=e[6],s=e[7];return t(new y(i,r),new y(e[2]-i,e[3]-r),new y(e[4]-a,e[5]-s),new y(a,s),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&0<=t&&t<=1?new z(this,t):null},getTimeAt:function(t,e){return B.getTimeAt(this.getValues(),t,e)},getParameterAt:\"#getTimeAt\",getTimesWithTangent:function(){var t=y.read(arguments);return t.isZero()?[]:B.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(y.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return B.getTimeOf(this.getValues(),y.read(arguments))},getParameterOf:\"#getTimeOf\",getNearestLocation:function(){var t=y.read(arguments),e=this.getValues(),n=B.getNearestTime(e,t);return e=B.getPoint(e,n),new z(this,n,e,null,t.getDistance(e))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()}},new function(){var t=[\"getPoint\",\"getTangent\",\"getNormal\",\"getWeightedTangent\",\"getWeightedNormal\",\"getCurvature\"];return c.each(t,(function(t){this[t+\"At\"]=function(e,n){var i=this.getValues();return B[t](i,n?e:B.getTimeAt(i,e))},this[t+\"AtTime\"]=function(e){return B[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],u=(t=t[7],9*(i-a)+3*(o-e)),l=6*(e+a)-12*i,c=3*(i-e),h=9*(r-s)+3*(t-n),f=6*(n+s)-12*r,d=3*(r-n);return function(t){var e=(u*t+l)*t+c;return t=(h*t+f)*t+d,Math.sqrt(e*e+t*t)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,i){if(null==e||e<0||1<e)return null;var r=t[0],a=t[1],s=t[2],o=t[3],u=t[4],l=t[5],c=t[6],h=t[7];(x=v.isZero)(s-r)&&x(o-a)&&(s=r,o=a),x(u-c)&&x(l-h)&&(u=c,l=h);var f,d,p=3*(s-r),g=3*(u-s)-p,m=c-r-p-g,_=3*(o-a),x=h-a-_-(t=3*(l-o)-_);return 0===n?(f=0===e?r:1===e?c:((m*e+g)*e+p)*e+r,d=0===e?a:1===e?h:((x*e+t)*e+_)*e+a):(d=e<1e-8?(f=p,_):1-1e-8<e?(f=3*(c-u),3*(h-l)):(f=(3*m*e+2*g)*e+p,(3*x*e+2*t)*e+_),i&&(0===f&&0===d&&(e<1e-8||1-1e-8<e)&&(f=u-s,d=l-o),(o=Math.sqrt(f*f+d*d))&&(f/=o,d/=o)),3===n&&(u=6*m*e+2*g,l=6*x*e+2*t,f=0!==(t=Math.pow(f*f+d*d,1.5))?(f*l-d*u)/t:0,d=0)),2===n?new y(d,-f):new y(f,d)}return{statics:{classify:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],u=t[6],l=(t=i*(n-(l=t[7]))+r*(u-e)+e*l-n*u,u=(r=(i=3*(a*(r-n)+s*(e-i)+i*n-r*e))-t)-t+(e*(l-s)+n*(a-u)+u*s-l*a),0!==(s=Math.sqrt(u*u+r*r+i*i))?1/s:0);function c(t,e,n){var i=e!==o,r=i&&0<e&&e<1,a=i&&0<n&&n<1;return!i||(r||a)&&(\"loop\"!==t||r&&a)||(r=a=!(t=\"arch\")),{type:t,roots:r||a?r&&a?e<n?[e,n]:[n,e]:[r?e:n]:null}}return s=\"serpentine\",r*=l,i*=l,(a=v.isZero)(u*=l)?a(r)?c(a(i)?\"line\":\"quadratic\"):c(s,i/(3*r)):a(i=3*r*r-4*u*i)?c(\"cusp\",r/(2*u)):c(0<i?s:\"loop\",(r+(a=0<i?Math.sqrt(i/3):Math.sqrt(-i)))/(u*=2),(r-a)/u)},getLength:function(n,i,r,a){if(i===o&&(i=0),r===o&&(r=1),B.isStraight(n)){var s=n;r<1&&(s=B.subdivide(s,r)[0],i/=r);var u=(s=0<i?B.subdivide(s,i)[1]:s)[6]-s[0];return s=s[7]-s[1],Math.sqrt(u*u+s*s)}return v.integrate(a||t(n),i,r,e(i,r))},getTimeAt:function(n,i,r){if(r===o&&(r=i<0?1:0),0===i)return r;var a=Math.abs,s=0<i,u=s?r:0,l=s?1:r,c=t(n),h=B.getLength(n,u,l,c);if(n=a(i)-h,a(n)<1e-12)return s?l:u;if(1e-12<n)return null;var f=0;return v.findRoot((function(t){return f+=v.integrate(c,r,t,e(r,t)),r=t,f-i}),c,r+i/h,u,l,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=3*i-e-3*a+t[6];return a=3*e-6*i+3*a,i=-3*e+3*i,t=3*r-n-3*s+t[7],s=3*n-6*r+3*s,n=-3*n+3*r,r=[],v.solveCubic(9*(o*o+t*t),9*(o*a+s*t),2*(a*a+s*s)+3*(i*o+n*t),i*a+s*n,r,1e-8,1-1e-8),r.sort()}}}},new function(){function t(t,e,n,i,r,a,s){var o=!s&&n.getPrevious()===r,u=!s&&n!==r&&n.getNext()===r;null!==i&&(o?1e-8:0)<=i&&i<=(u?1-1e-8:1)&&null!==a&&(u?1e-8:0)<=a&&a<=(o?1-1e-8:1)&&(i=new z(n,i,null,s),s=new z(r,a,null,s),(i._intersection=s)._intersection=i,e&&!e(i)||z.insert(t,i,!0))}function e(i,r,a,s,o,u,l,c,h,f,d,p,g){if(4096<=++h||40<=++c)return h;var v,m,y,_,x,b,w=r[0],S=r[1],C=r[6],M=r[7],k=T.getSignedDistance,A=k(w,S,C,M,r[2],r[3]),E=k(w,S,C,M,r[4],r[5]),O=(y=0<A*E?.75:4/9)*Math.min(0,A,E),P=y*Math.max(0,A,E),I=k(w,S,C,M,i[0],i[1]),L=k(w,S,C,M,i[2],i[3]);return C=function(t,e,n,i){var r=[0,t],a=[1/3,e],s=[2/3,n],o=[1,i];return o=(e-=(2*t+i)/3)*(t=n-(t+2*i)/3)<0?[[r,a,o],[r,s,o]]:[2<=(i=e/t)?[r,a,o]:i<=.5?[r,s,o]:[r,a,s,o],[r,o]],(e||t)<0?o.reverse():o}(I,L,y=k(w,S,C,M,i[4],i[5]),S=k(w,S,C,M,i[6],i[7])),M=C[0],C=C[1],0===A&&0===E&&0===I&&0===L&&0===y&&0===S||null==(v=n(M,C,O,P))||null==(m=n(M.reverse(),C.reverse(),O,P))||(P=f+(d-f)*v,d=f+(d-f)*m,Math.max(g-p,d-P)<1e-9?(_=(P+d)/2,b=(p+g)/2,t(o,u,l?s:a,l?b:_,l?a:s,l?_:b)):(i=B.getPart(i,v,m),f=g-p,h=.8<m-v?f<d-P?(_=(P+d)/2,h=e(r,(x=B.subdivide(i,.5))[0],s,a,o,u,!l,c,h,p,g,P,_),e(r,x[1],s,a,o,u,!l,c,h,p,g,_,d)):(b=(p+g)/2,h=e((x=B.subdivide(r,.5))[0],i,s,a,o,u,!l,c,h,p,b,P,d),e(x[1],i,s,a,o,u,!l,c,h,b,g,P,d)):0==f||1e-9<=f?e(r,i,s,a,o,u,!l,c,h,p,g,P,d):e(i,r,a,s,o,u,l,c,h,P,d,p,g))),h}function n(t,e,n,r){return t[0][1]<n?i(t,!0,n):e[0][1]>r?i(e,!1,r):t[0][0]}function i(t,e,n){for(var i=t[0][0],r=t[0][1],a=1,s=t.length;a<s;a++){var o=t[a][0],u=t[a][1];if(e?n<=u:u<=n)return u===n?o:i+(n-r)*(o-i)/(u-r);i=o,r=u}return null}function r(t,e,n,i,r){var a=v.isZero;if(a(i)&&a(r))return null===(a=B.getTimeOf(t,new y(e,n)))?[]:[a];i=Math.atan2(-r,i);for(var s=Math.sin(i),o=Math.cos(i),u=[],l=(i=[],0);l<8;l+=2){var c=t[l]-e,h=t[l+1]-n;u.push(c*o-h*s,c*s+h*o)}return B.solveCubic(u,1,0,i,0,1),i}function a(e,n,i,a,s,o,u){for(var l=n[0],c=n[1],h=r(e,l,c,n[6]-l,n[7]-c),f=0,d=h.length;f<d;f++){var p=h[f],g=B.getPoint(e,p);null!==(g=B.getTimeOf(n,g))&&t(s,o,u?a:i,u?g:p,u?i:a,u?p:g)}}function s(e,n,i,r,a,s){var o=T.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);o&&t(a,s,i,B.getTimeOf(e,o),r,B.getTimeOf(n,o))}function o(n,i,r,o,u,c){var h=Math.min;if((_=Math.max)(n[0],n[2],n[4],n[6])+1e-12>h(i[0],i[2],i[4],i[6])&&h(n[0],n[2],n[4],n[6])-1e-12<_(i[0],i[2],i[4],i[6])&&_(n[1],n[3],n[5],n[7])+1e-12>h(i[1],i[3],i[5],i[7])&&h(n[1],n[3],n[5],n[7])-1e-12<_(i[1],i[3],i[5],i[7])){var f=l(n,i);if(f)for(var d=0;d<2;d++){var p=f[d];t(u,c,r,p[0],o,p[1],!0)}else{var g=B.isStraight(n),v=B.isStraight(i),m=g&&v,_=(h=g&&!v,u.length);if((m?s:g||v?a:e)(h?i:n,h?n:i,h?o:r,h?r:o,u,c,h,0,0,0,1,0,1),!m||u.length===_)for(d=0;d<4;d++){var x=d>>1,b=1&d,w=6*b,S=new y(n[S=6*x],n[1+S]);w=new y(i[w],i[1+w]),S.isClose(w,1e-12)&&t(u,c,r,x,o,b)}}}return u}function u(e,n,i,r){return\"loop\"===(e=B.classify(e)).type&&t(i,r,n,(e=e.roots)[0],n,e[1]),i}function l(t,e){function n(t){var e=t[6]-t[0];return e*e+(t=t[7]-t[1])*t}var i,r=Math.abs,a=T.getDistance,s=1e-7,o=B.isStraight(t),u=B.isStraight(e),l=o&&u,c=(i=n(t)<n(e))?e:t,h=i?t:e,f=c[0],d=c[1],p=c[6]-f;if(a(f,d,p,i=c[7]-d,h[0],h[1],!0)<s&&a(f,d,p,i,h[6],h[7],!0)<s)!l&&a(f,d,p,i,c[2],c[3],!0)<s&&a(f,d,p,i,c[4],c[5],!0)<s&&a(f,d,p,i,h[2],h[3],!0)<s&&a(f,d,p,i,h[4],h[5],!0)<s&&(o=u=l=!0);else if(l)return null;if(o^u)return null;for(var g=[t,e],v=[],m=0;m<4&&v.length<2;m++){var _=1&m,x=1^_,b=m>>1;if(null!=(x=B.getTimeOf(g[_],new y(g[x][b?6:0],g[x][b?7:1])))&&(b=_?[b,x]:[x,b],(!v.length||1e-8<r(b[0]-v[0][0])&&1e-8<r(b[1]-v[0][1]))&&v.push(b)),2<m&&!v.length)break}return 2!==v.length?v=null:l||(t=B.getPart(t,v[0][0],v[1][0]),(r((e=B.getPart(e,v[0][1],v[1][1]))[2]-t[2])>s||r(e[3]-t[3])>s||r(e[4]-t[4])>s||r(e[5]-t[5])>s)&&(v=null)),v}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?o(e,n,this,t,[]):u(e,this,[])},statics:{getOverlaps:l,getIntersections:function(t,e,n,i,r,a){for(var s=!e,l=t.length,c=(e=s?t:e).length,h=new Array(l),f=s?h:new Array(c),d=[],g=0;g<l;g++)h[g]=t[g].getValues(i);if(!s)for(g=0;g<c;g++)f[g]=e[g].getValues(r);for(var v=p.findCurveBoundsCollisions(h,f,1e-7),m=0;m<l;m++){var y=t[m],_=h[m];s&&u(_,y,d,n);var x=v[m];if(x)for(var b=0;b<x.length;b++){if(a&&d.length)return d;var w,S=x[b];(!s||m<S)&&(w=e[S],o(_,f[S],y,w,d,n))}}return d},getCurveLineIntersections:r,getTimesWithTangent:function(t,e){var n,i=t[0],r=t[1],a=t[2],s=t[3],o=t[4],u=t[5],l=t[6],c=t[7];return e=(t=e.normalize()).x,l=3*l-9*o+9*a-3*i,c=3*c-9*u+9*s-3*r,o=6*o-12*a+6*i,u=6*u-12*s+6*r,a=3*a-3*i,i=3*s-3*r,s=2*l*(t=t.y)-2*c*e,r=[],Math.abs(s)<v.CURVETIME_EPSILON?0==(s=l*u-c*o)||0<=(n=-(l*i-c*a)/s)&&n<=1&&r.push(n):(n=o*t-u*e,0<=(i=(o*o-4*l*a)*t*t+(-2*o*u+4*c*a+4*l*i)*e*t+(u*u-4*c*i)*e*e)&&0!=s&&(i=(-n+(e=Math.sqrt(i)))/s,0<=(s=-(n+e)/s)&&s<=1&&r.push(s),0<=i&&i<=1&&r.push(i))),r}}}}),z=c.extend({_class:\"CurveLocation\",initialize:function(t,e,n,i,r){var a;.99999999<=e&&(a=t.getNext())&&(e=0,t=a),this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var e=t.getCurve();e?this._setCurve(e):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t,e,n=this._segment;return n||(t=this.getCurve(),0===(e=this.getTime())?n=t._segment1:1===e?n=t._segment2:null!=e&&(n=t.getPartLength(0,e)<t.getPartLength(e,1)?t._segment1:t._segment2),this._segment=n),n},getCurve:function(){var t=this._path,e=this;function n(t){if((t=t&&t.getCurve())&&null!=(e._time=t.getTimeOf(e._point)))return e._setCurve(t),t}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:\"#getTime\",getPoint:function(){return this._point},getOffset:function(){if(null==(t=this._offset)){var t=0,e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t,e,n=this._curveOffset;return null==n&&(t=this.getCurve(),e=this.getTime(),this._curveOffset=n=null!=e&&t&&t.getPartLength(0,e)),n},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t;return(t=(t=this.getCurve())&&t.divideAtTime(this.getTime()))&&this._setSegment(t._segment1),t},split:function(){var t,e=(t=this.getCurve())._path;return(t=t&&t.splitAtTime(this.getTime()))&&this._setSegment(e.getLastSegment()),t},equals:function(t,e){var n,i,r,a,s=this===t;return!s&&t instanceof z&&(r=this.getCurve(),a=t.getCurve(),(n=r._path)===a._path&&(r=(i=Math.abs)(this.getOffset()-t.getOffset()),a=!e&&this._intersection,t=!e&&t._intersection,s=(r<1e-7||n&&i(n.getLength()-r)<1e-7)&&(!a&&!t||a&&t&&a.equals(t,!0)))),s},toString:function(){var t=[],e=this.getPoint(),n=g.instance;return e&&t.push(\"point: \"+e),null!=(e=this.getIndex())&&t.push(\"index: \"+e),null!=(e=this.getTime())&&t.push(\"time: \"+n.number(e)),null!=this._distance&&t.push(\"distance: \"+n.number(this._distance)),\"{ \"+t.join(\", \")+\" }\"},isTouching:function(){if((e=this._intersection)&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),e=e.getCurve();return!(t.isStraight()&&e.isStraight()&&t.getLine().intersect(e.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),i=1-1e-8,r=1e-8<=e&&e<=i,a=1e-8<=n&&n<=i;if(r&&a)return!this.isTouching();var s=this.getCurve(),o=s&&e<1e-8?s.getPrevious():s,u=t.getCurve(),l=u&&n<1e-8?u.getPrevious():u;if(i<e&&(s=s.getNext()),i<n&&(u=u.getNext()),!(o&&s&&l&&u))return!1;var c=[];function h(t,e){var n=t.getValues(),i=(t=(i=B.classify(n).roots||B.getPeaks(n)).length,B.getLength(n,e&&t?i[t-1]:0,!e&&t?i[0]:1));c.push(t?i:i/32)}function f(t,e,n){return e<n?e<t&&t<n:e<t||t<n}return r||(h(o,!0),h(s,!1)),a||(h(l,!0),h(u,!1)),t=this.getPoint(),i=Math.min.apply(Math,c),s=r?s.getTangentAtTime(e):s.getPointAt(i).subtract(t),o=r?s.negate():o.getPointAt(-i).subtract(t),u=a?u.getTangentAtTime(n):u.getPointAt(i).subtract(t),t=a?u.negate():l.getPointAt(-i).subtract(t),o=o.getAngle(),s=s.getAngle(),t=t.getAngle(),u=u.getAngle(),!!(r?f(o,t,u)^f(s,t,u)&&f(o,u,t)^f(s,u,t):f(t,o,s)^f(u,o,s)&&f(t,s,o)^f(u,s,o))},hasOverlap:function(){return!!this._overlap}},c.each(B._evaluateMethods,(function(t){var e=t+\"At\";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}}),{preserve:!0}),new function(){function t(t,e,n){var i=t.length,r=0,a=i-1;function s(n,r){for(var a=n+r;-1<=a&&a<=i;a+=r){var s=t[(a%i+i)%i];if(!e.getPoint().isClose(s.getPoint(),1e-7))break;if(e.equals(s))return s}return null}for(;r<=a;){var o,u=r+a>>>1,l=t[u];if(n&&(o=e.equals(l)?l:s(u,-1)||s(u,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var c=e.getPath(),h=l.getPath();(c!==h?c._id-h._id:e.getIndex()+e.getTime()-(l.getIndex()+l.getTime()))<0?a=u-1:r=1+u}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;0<=i;i--)t(n,e[i]._intersection,!1);return n}}}}),j=A.extend({_class:\"PathItem\",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;return c.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:\"string\"==typeof t&&(e=t),n?i=(i=n[0])&&Array.isArray(i[0]):e&&(i=1<(e.match(/m/gi)||[]).length||/z\\s*\\S+/i.test(e)),new(i?V:U)(t)}},_asPathItem:function(){return this},isClockwise:function(){return 0<=this.getArea()},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,i=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),r=!1,a=new y,s=new y;function o(t,e){return t=+h[t],r&&(t+=a[e]),t}function u(t){return new y(o(t,\"x\"),o(t+1,\"y\"))}this.clear();for(var l=0,c=i&&i.length;l<c;l++){var h,f=i[l],d=f[0],p=d.toLowerCase(),g=(h=f.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g))&&h.length;switch(r=d===p,\"z\"!==e||/[mz]/.test(p)||this.moveTo(a),p){case\"m\":case\"l\":for(var v=\"m\"===p,m=0;m<g;m+=2)this[v?\"moveTo\":\"lineTo\"](a=u(m)),v&&(s=a,v=!1);n=a;break;case\"h\":case\"v\":var _=\"h\"===p?\"x\":\"y\";for(a=a.clone(),m=0;m<g;m++)a[_]=o(m,_),this.lineTo(a);n=a;break;case\"c\":for(m=0;m<g;m+=6)this.cubicCurveTo(u(m),n=u(m+2),a=u(m+4));break;case\"s\":for(m=0;m<g;m+=4)this.cubicCurveTo(/[cs]/.test(e)?a.multiply(2).subtract(n):a,n=u(m),a=u(m+2)),e=p;break;case\"q\":for(m=0;m<g;m+=4)this.quadraticCurveTo(n=u(m),a=u(m+2));break;case\"t\":for(m=0;m<g;m+=2)this.quadraticCurveTo(n=/[qt]/.test(e)?a.multiply(2).subtract(n):a,a=u(m)),e=p;break;case\"a\":for(m=0;m<g;m+=7)this.arcTo(a=u(m+5),new b(+h[m],+h[m+1]),+h[m+2],+h[m+4],+h[m+3]);break;case\"z\":this.closePath(1e-12),a=s}e=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){return(t=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{}).onPath||!!(\"evenodd\"===this.getFillRule()?1&t.windingL||1&t.windingR:t.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,a=this._matrix._orNullIfIdentity();return n=r?a:(n||t._matrix)._orNullIfIdentity(),r||this.getBounds(a).intersects(t.getBounds(n),1e-12)?B.getIntersections(this.getCurves(),!r&&t.getCurves(),e,a,n,i):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.isCrossing()}))},getNearestLocation:function(){for(var t=y.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,a=e.length;r<a;r++){var s=e[r].getNearestLocation(t);s._distance<n&&(n=s._distance,i=s)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()},interpolate:function(t,e,n){var i=!this._children,r=i?\"_segments\":\"_children\",a=t[r],s=e[r],o=this[r];if(!a||!s||a.length!==s.length)throw new Error(\"Invalid operands in interpolate() call: \"+t+\", \"+e);e=o.length;var u=s.length;if(e<u)for(var l=i?N:U,c=e;c<u;c++)this.add(new l);else u<e&&this[i?\"removeSegments\":\"removeChildren\"](u,e);for(c=0;c<u;c++)o[c].interpolate(a[c],s[c],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=n.length,a=(t=i.length,[]),s=0;e=!0;for(var o=p.findItemBoundsCollisions(n,i,v.GEOMETRIC_EPSILON),u=r-1;0<=u&&e;u--){var l=n[u],c=(e=!1,o[u]);if(c)for(var h=c.length-1;0<=h&&!e;h--)l.compare(i[c[h]])&&(a[c[h]]||(a[c[h]]=!0,s++),e=!0)}e=e&&s===t}return e}}),U=j.extend({_class:\"Path\",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=arguments;(e=Array.isArray(t)?\"object\"==x(t[0])?t:e:!t||t.size!==o||t.x===o&&t.point===o?null:e)&&0<e.length?this.setSegments(e):(this._curves=o,this._segmentSelection=0,e||\"string\"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&c.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=o,32&e)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 64&e&&(this._bounds=o)},getStyle:function(){var t=this._parent;return(t instanceof V?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e,n=this.isFullySelected(),i=t&&t.length;this._segments.length=0,this._segmentSelection=0,this._curves=o,i&&(\"boolean\"==typeof(e=t[i-1])&&(this.setClosed(e),i--),this._add(N.readList(t,0,{},i))),n&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t)for(var n=this._countCurves(),i=(t=this._curves=new Array(n),0);i<n;i++)t[i]=new B(this,e[i],e[i+1]||e[0]);return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){var e;this._closed!=(t=!!t)&&(this._closed=t,this._curves&&(e=this._curves.length=this._countCurves(),t&&(this._curves[e-1]=new B(this,this._segments[e-1],this._segments[0]))),this._changed(41))}},{beans:!0,getPathData:function(t,e){var n,i,r,a,s,o,u,l,c=this._segments,h=c.length,f=new g(e),d=new Array(6),p=!0,v=[];function m(e,c){e._transformCoordinates(t,d),n=d[0],i=d[1],p?(v.push(\"M\"+f.pair(n,i)),p=!1):(s=d[2],o=d[3],s===n&&o===i&&u===r&&l===a?c||(e=n-r,c=i-a,v.push(0==e?\"v\"+f.number(c):0==c?\"h\"+f.number(e):\"l\"+f.pair(e,c))):v.push(\"c\"+f.pair(u-r,l-a)+\" \"+f.pair(s-r,o-a)+\" \"+f.pair(n-r,i-a))),r=n,a=i,u=d[4],l=d[5]}if(!h)return\"\";for(var y=0;y<h;y++)m(c[y]);return this._closed&&0<h&&(m(c[0],!0),v.push(\"z\")),v.join(\"\")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,a=(e=(h=null==e)?n.length:e,0);a<r;a++){var s=t[a];(s=s._path?t[a]=s.clone():s)._path=this,s._index=e+a,s._selection&&this._updateSelection(s,0,s._selection)}if(h)c.push(n,t);else{n.splice.apply(n,[e,0].concat(t)),a=e+r;for(var o=n.length;a<o;a++)n[a]._index=a}if(i){var u=this._countCurves(),l=0<e&&e+r-1===u?e-1:e,h=l,f=Math.min(l+r,u);for(t._curves&&(i.splice.apply(i,[l,0].concat(t._curves)),h+=t._curves.length),a=h;a<f;a++)i.splice(a,0,new B(this,null,null));this._adjustCurves(l,f)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,a=t;a<e;a++)(n=r[a])._path=this,n._segment1=i[a],n._segment2=i[a+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&0<t?t-1:t},add:function(t){var e=arguments;return 1<e.length&&\"number\"!=typeof t?this._add(N.readList(e)):this._add([N.read(e)])[0]},insert:function(t,e){var n=arguments;return 2<n.length&&\"number\"!=typeof e?this._add(N.readList(n,1),t):this._add([N.read(n,1)],t)[0]},addSegment:function(){return this._add([N.read(arguments)])[0]},insertSegment:function(t){return this._add([N.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(N.readList(t))},insertSegments:function(t,e){return this._add(N.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=c.pick(e,this._segments.length);var i=this._segments,r=this._curves,a=i.length,s=i.splice(t,e-t),o=s.length;if(!o)return s;for(var u=0;u<o;u++){var l=s[u];l._selection&&this._updateSelection(l,l._selection,0),l._index=l._path=null}u=t;for(var h=i.length;u<h;u++)i[u]._index=u;if(r){for(t=0<t&&e===a+(this._closed?1:0)?t-1:t,u=(r=r.splice(t,o)).length-1;0<=u;u--)r[u]._path=null;n&&(s._curves=r.slice(1)),this._adjustCurves(t,t)}return this._changed(41),s},clear:\"#removeSegments\",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){if(null==(n=this._area)){for(var t=this._segments,e=this._closed,n=0,i=0,r=t.length;i<r;i++){var a=i+1===r;n+=B.getArea(B.getValues(t[i],t[a?0:i+1],null,a&&!e))}this._area=n}return n},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&0<t&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,0<(this._segmentSelection+=n-e)&&this.setSelected(!0)},divideAt:function(t){var e;return(t=this.getLocationAt(t))&&(e=t.getCurve().divideAt(t.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e,n=this.getLocationAt(t),i=n&&n.index;return 1-1e-8<(t=n&&n.time)&&(i++,t=0),n=this.getCurves(),0<=i&&i<n.length?(1e-8<=t&&n[i++].divideAtTime(t),i=this.removeSegments(i,this._segments.length,!0),this._closed?(this.setClosed(!1),e=this):((e=new U(A.NO_INSERT)).insertAbove(this),e.copyAttributes(this)),e._add(i,0),this.addSegment(i[0]),e):null},split:function(t,e){return null!=(e=e===o?t:(t=this.getCurves()[t])&&t.getLocationAtTime(e))?this.splitAt(e):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;r&&r._point.isClose(a._point,n)&&t.reverse(),e=t.getFirstSegment(),r&&r._point.isClose(e._point,n)?(r.setHandleOut(e._handleOut),this._add(i.slice(1))):((r=this.getFirstSegment())&&r._point.isClose(e._point,n)&&t.reverse(),a=t.getLastSegment(),r&&r._point.isClose(a._point,n)?(r.setHandleIn(a._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())),t._closed&&this._add([i[0]]),t.remove()}return(i=this.getFirstSegment())!==(t=this.getLastSegment())&&i._point.isClose(t._point,n)&&(i.setHandleIn(t._handleIn),t.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;0<=r;r--){var a=e[r];!a.hasHandles()&&(!a.hasLength(i)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new W(this,t||.25,256,!0).parts,n=e.length,i=[],r=0;r<n;r++)i.push(new N(e[r].curve.slice(0,2)));!this._closed&&0<n&&i.push(new N(e[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){return(t=new G(this).fit(t||2.5))&&this.setSegments(t),!!t},smooth:function(t){var e=this,n=t||{},i=(t=n.type||\"asymmetric\",this._segments),r=i.length,a=this._closed;function s(t,n){var i=t&&t.index;if(null!=i){var s=t.path;if(s&&s!==e)throw new Error(t._class+\" \"+i+\" of \"+s+\" is not part of \"+e);n&&t instanceof B&&i++}else i=\"number\"==typeof t?t:n;return Math.min(i<0&&a?i%r:i<0?i+r:i,r-1)}var u=a&&n.from===o&&n.to===o,l=s(n.from,0),c=s(n.to,r-1);if(c<l&&(a?l-=r:(f=l,l=c,c=f)),/^(?:asymmetric|continuous)$/.test(t)){var h=\"asymmetric\"===t,f=Math.min,d=(t=c-l+1)-1,p=t=u?f(t,4):1,g=(t=t,[]);if(a||(p=f(1,l),t=f(1,r-c-1)),!((d+=p+t)<=1)){for(var v=0,m=l-p;v<=d;v++,m++)g[v]=i[(m<0?m+r:m)%r]._point;var y=d-1,_=[E=g[0]._x+2*g[1]._x],x=[O=g[0]._y+2*g[1]._y],b=[A=2],w=[],S=[];for(v=1;v<d;v++)var C=v<y,M=C?4:h?3:8,T=C?2:h?0:1,k=(C||h?1:2)/A,A=b[v]=(C?4:h?2:7)-k,E=_[v]=M*g[v]._x+T*g[v+1]._x-k*E,O=x[v]=M*g[v]._y+T*g[v+1]._y-k*O;for(w[y]=_[y]/b[y],S[y]=x[y]/b[y],v=d-2;0<=v;v--)w[v]=(_[v]-w[v+1])/b[v],S[v]=(x[v]-S[v+1])/b[v];w[d]=(3*g[d]._x-w[y])/2,S[d]=(3*g[d]._y-S[y])/2,v=p;var P=d-t;for(m=l;v<=P;v++,m++){var I=i[m<0?m+r:m],L=I._point,D=w[v]-L._x;L=S[v]-L._y,(u||v<P)&&I.setHandleOut(D,L),(u||p<v)&&I.setHandleIn(-D,-L)}}}else for(v=l;v<=c;v++)i[v<0?v+r:v].smooth(n,!u&&v===l,!u&&v===c)},toShape:function(t){if(!this._closed)return null;var e,n,i,r,a,s=this._segments;function u(t,e){var n=s[t],i=n.getNext();return e=(t=s[e]).getNext(),n._handleOut.isZero()&&i._handleIn.isZero()&&t._handleOut.isZero()&&e._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(e._point.subtract(t._point))}function l(t){var e=s[t],n=e.getNext(),i=e._handleOut,r=n._handleIn,a=.5522847498307936;if(i.isOrthogonal(r))return t=e._point,e=n._point,(n=new T(t,i,!0).intersect(new T(e,r,!0),!0))&&v.isZero(i.getLength()/n.subtract(t).getLength()-a)&&v.isZero(r.getLength()/n.subtract(e).getLength()-a)}function c(t,e){return s[t]._point.getDistance(s[e]._point)}if(!this.hasHandles()&&4===s.length&&u(0,2)&&u(1,3)&&(a=(h=s[r=1]).getPrevious(),r=h.getNext(),a._handleOut.isZero()&&h._handleIn.isZero()&&h._handleOut.isZero()&&r._handleIn.isZero()&&h._point.subtract(a._point).isOrthogonal(r._point.subtract(h._point)))?(e=P.Rectangle,n=new b(c(0,3),c(0,1)),i=s[1]._point.add(s[2]._point).divide(2)):8===s.length&&l(0)&&l(2)&&l(4)&&l(6)&&u(1,5)&&u(3,7)?(e=P.Rectangle,f=(n=new b(c(1,6),c(0,3))).subtract(new b(c(0,7),c(1,2))).divide(2),i=s[3]._point.add(s[4]._point).divide(2)):4===s.length&&l(0)&&l(1)&&l(2)&&l(3)&&(f=v.isZero(c(0,2)-c(1,3))?(e=P.Circle,c(0,2)/2):(e=P.Ellipse,new b(c(2,0)/2,c(3,1)/2)),i=s[1]._point),e){var h=this.getPosition(!0),f=new e({center:h,size:n,radius:f,insert:!1});return f.copyAttributes(this,!0),f._matrix.prepend(this._matrix),f.rotate(i.subtract(h).getAngle()+90),t!==o&&!t||f.insertAbove(this),f}return null},toPath:\"#clone\",compare:function t(e){if(!e||e instanceof V)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),r=n.length,a=i.length;if(!r||!a)return r==a;for(var s,o,u=n[0].getValues(),l=[],c=0,h=0,f=0;f<a;f++){var d=i[f].getValues();if(l.push(d),v=B.getOverlaps(u,d)){s=!f&&0<v[0][0]?a-1:f,o=v[0][1];break}}var p,g=Math.abs;for(d=l[s];u&&d;){var v=B.getOverlaps(u,d);if(v&&g(v[0][0]-h)<1e-8){1===(h=v[1][0])&&(u=++c<r?n[c].getValues():null,h=0);var m=v[0][1];if(g(m-o)<1e-8){if(p=p||[s,m],1===(o=v[1][1])&&(d=l[s=++s>=a?0:s]||i[s].getValues(),o=0),!u)return p[0]===s&&p[1]===o;continue}}break}return!1},_hitTestSelf:function(t,e,n,i){var r,a,s,o,u,l,c=this,h=this.getStyle(),f=this._segments,d=f.length,p=this._closed,g=e._tolerancePadding,v=g,m=e.stroke&&h.hasStroke(),y=e.fill&&h.hasFill(),_=e.curves,x=m?h.getStrokeWidth()/2:y&&0<e.tolerance||_?0:null;function b(e,n){return t.subtract(e).divide(n).length<=1}function w(t,n,i){if(!e.selected||n.isSelected()){var r=t._point;if(b(n=n!==r?n.add(r):n,v))return new R(i,c,{segment:t,point:n})}}function S(t,n){return(n||e.segments)&&w(t,t._point,\"segment\")||!n&&e.handles&&(w(t,t._handleIn,\"handle-in\")||w(t,t._handleOut,\"handle-out\"))}function C(t){o.add(t)}function M(e){var n=p||0<e._index&&e._index<d-1;return\"round\"===(n?r:a)?b(e._point,v):(o=new U({internal:!0,closed:!0}),n?e.isSmooth()||U._addBevelJoin(e,r,x,s,null,i,C,!0):\"square\"===a&&U._addSquareCap(e,a,x,null,i,C,!0),!o.isEmpty()&&(o.contains(t)||(e=o.getNearestLocation(t))&&b(e.getPoint(),g)))}if(null!==x&&(0<x?(r=h.getStrokeJoin(),a=h.getStrokeCap(),s=h.getMiterLimit(),v=v.add(U._getStrokePadding(x,i))):r=a=\"round\"),!e.ends||e.segments||p){if(e.segments||e.handles)for(var T=0;T<d;T++)if(u=S(f[T]))return u}else if(u=S(f[0],!0)||S(f[d-1],!0))return u;if(null!==x&&((l=this.getNearestLocation(t))&&(0===(h=l.getTime())||1===h&&1<d?M(l.getSegment())||(l=null):b(l.getPoint(),v)||(l=null)),!l&&\"miter\"===r&&1<d))for(T=0;T<d;T++){var k=f[T];if(t.getDistance(k._point)<=s*x&&M(k)){l=k.getLocation();break}}return!l&&y&&this._contains(t)||l&&!m&&!_?new R(\"fill\",this):l?new R(m?\"stroke\":\"curve\",this,{location:l,point:l.getPoint()}):null}},c.each(B._evaluateMethods,(function(t){this[t+\"At\"]=function(e){return(e=this.getLocationAt(e))&&e[t]()}}),{beans:!1,getLocationOf:function(){for(var t=y.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if(\"number\"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var a=n,s=e[i];if(t<(n+=s.getLength()))return s.getLocationAt(t-a)}if(0<e.length&&t<=this.getLength())return new z(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=y.read(arguments);if(t.isZero())return[];for(var e=[],n=0,i=this.getCurves(),r=0,a=i.length;r<a;r++){for(var s=i[r],o=s.getTimesWithTangent(t),u=0,l=o.length;u<l;u++){var c=n+s.getOffsetAtTime(o[u]);e.indexOf(c)<0&&e.push(c)}n+=s.length}return e}}),new function(){function t(t,e,n){var i,r,a,s,o,u,l,c,h=e._segments,f=h.length,d=new Array(6),p=!0;function g(e){var h,f;r=n?(e._transformCoordinates(n,d),i=d[0],d[1]):(h=e._point,i=h._x,h._y),p?(t.moveTo(i,r),p=!1):(u=n?(o=d[2],d[3]):(f=e._handleIn,o=i+f._x,r+f._y),o===i&&u===r&&l===a&&c===s?t.lineTo(i,r):t.bezierCurveTo(l,c,o,u,i,r)),a=i,s=r,c=n?(l=d[4],d[5]):(f=e._handleOut,l=a+f._x,s+f._y)}for(var v=0;v<f;v++)g(h[v]);e._closed&&0<f&&g(h[0])}return{_draw:function(e,n,i,r){var a=n.dontStart,s=n.dontFinish||n.clip,o=this.getStyle(),u=o.hasFill(),l=o.hasStroke(),c=o.getDashArray(),h=!Vt.support.nativeDash&&l&&c&&c.length;function f(t){return c[(t%h+h)%h]}if(a||e.beginPath(),(u||l&&!h||s)&&(t(e,this,r),this._closed&&e.closePath()),!s&&(u||l)&&(this._setStyles(e,n,i),u&&(e.fill(o.getFillRule()),e.shadowColor=\"rgba(0,0,0,0)\"),l)){if(h){a||e.beginPath();for(var d,p=new W(this,.25,32,!1,r),g=p.length,v=-o.getDashOffset(),m=0;0<v;)v-=f(m--)+f(m--);for(;v<g;)d=v+f(m++),(0<v||0<d)&&p.drawPart(e,Math.max(v,0),Math.max(d,0)),v=d+f(m++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,i){if(!(i<=0))for(var r,a,s=i/2,o=i-2,u=s-1,l=new Array(6),c=0,h=e.length;c<h;c++){var f=e[c],d=f._selection;f._transformCoordinates(n,l),r=l[0],a=l[1],2&d&&p(2),4&d&&p(4),t.fillRect(r-s,a-s,i,i),0<o&&!(1&d)&&(d=t.fillStyle,t.fillStyle=\"#ffffff\",t.fillRect(r-u,a-u,o,o),t.fillStyle=d)}function p(e){var n=l[e];e=l[e+1],r==n&&a==e||(t.beginPath(),t.moveTo(r,a),t.lineTo(n,e),t.stroke(),t.beginPath(),t.arc(n,e,s,0,2*Math.PI,!0),t.fill())}}(e,this._segments,n,Vt.settings.handleSize)}}},new function(){function t(t){if(!(t=t._segments).length)throw new Error(\"Use a moveTo() command first\");return t[t.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new N(y.read(arguments))])},moveBy:function(){throw new Error(\"moveBy() is unsupported on Path items.\")},lineTo:function(){this._add([new N(y.read(arguments))])},cubicCurveTo:function(){var e=arguments,n=y.read(e),i=y.read(e),r=y.read(e);(e=t(this)).setHandleOut(n.subtract(e._point)),this._add([new N(r,i.subtract(r))])},quadraticCurveTo:function(){var e=arguments,n=y.read(e),i=y.read(e);e=t(this)._point,this.cubicCurveTo(n.add(e.subtract(n).multiply(1/3)),n.add(i.subtract(n).multiply(1/3)),i)},curveTo:function(){var e=arguments,n=y.read(e),i=y.read(e),r=c.pick(c.read(e),.5),a=1-r;if(e=t(this)._point,(a=n.subtract(e.multiply(a*a)).subtract(i.multiply(r*r)).divide(2*r*a)).isNaN())throw new Error(\"Cannot put a curve through points with parameter = \"+r);this.quadraticCurveTo(a,i)},arcTo:function(){var e,n=arguments,i=Math.abs,r=Math.sqrt,a=t(this),s=a._point,o=y.read(n),u=c.peek(n);if(\"boolean\"==typeof(p=c.pick(u,!0)))var l=(m=s.add(o).divide(2)).add(m.subtract(s).rotate(p?-90:90));else if(c.remain(n)<=2)l=o,o=y.read(n);else if(!s.equals(o)){var h=b.read(n);if((f=v.isZero)(h.width)||f(h.height))return this.lineTo(o);var f,d=c.read(n),p=!!c.read(n),g=!!c.read(n),m=s.add(o).divide(2),_=(R=s.subtract(m).rotate(-d)).x,x=R.y,w=(k=i(h.width))*k;if(1<(h=r((f=_*_)/w+(n=x*x)/(u=(A=i(h.height))*A)))&&(w=(k*=h)*k,u=(A*=h)*A),(h=i(h=(w*u-w*n-u*f)/(w*n+u*f))<1e-12?0:h)<0)throw new Error(\"Cannot create an arc with the given arguments\");S=new y(k*x/A,-A*_/k).multiply((g===p?-1:1)*r(h)).rotate(d).add(m),d=(C=(e=(new M).translate(S).rotate(d).scale(k,A))._inverseTransform(s)).getDirectedAngle(e._inverseTransform(o)),!p&&0<d?d-=360:p&&d<0&&(d+=360)}if(l){var S,C,k=new T(s.add(l).divide(2),l.subtract(s).rotate(90),!0),A=new T(l.add(o).divide(2),o.subtract(l).rotate(90),!0);if(l=(p=new T(s,o)).getSide(l),!(S=k.intersect(A,!0))){if(!l)return this.lineTo(o);throw new Error(\"Cannot create an arc with the given arguments\")}d=(C=s.subtract(S)).getDirectedAngle(o.subtract(S)),0===(p=p.getSide(S,!0))?d=l*i(d):l===p&&(d+=d<0?360:-360)}if(d){for(var E=360<=(i=i(d))?4:Math.ceil((i-1e-7)/90),O=d/E,P=(d=O*Math.PI/360,4/3*Math.sin(d)/(1+Math.cos(d))),I=[],L=0;L<=E;L++){var D,R=o,F=null;L<E&&(F=C.rotate(90).multiply(P),e?(R=e._transformPoint(C),F=e._transformPoint(C.add(F)).subtract(R)):R=S.add(C)),L?(D=C.rotate(-90).multiply(P),e&&(D=e._transformPoint(C.add(D)).subtract(R)),I.push(new N(R,D,F))):a.setHandleOut(F),C=C.rotate(O)}this._add(I)}},lineBy:function(){var e=y.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=arguments,n=y.read(e),i=y.read(e),r=c.read(e);e=t(this)._point,this.curveTo(e.add(n),e.add(i),r)},cubicCurveBy:function(){var e=arguments,n=y.read(e),i=y.read(e),r=y.read(e);e=t(this)._point,this.cubicCurveTo(e.add(n),e.add(i),e.add(r))},quadraticCurveBy:function(){var e=arguments,n=y.read(e),i=y.read(e);e=t(this)._point,this.quadraticCurveTo(e.add(n),e.add(i))},arcBy:function(){var e=arguments,n=t(this)._point,i=n.add(y.read(e)),r=c.pick(c.peek(e),!0);\"boolean\"==typeof r?this.arcTo(i,r):this.arcTo(i,n.add(y.read(e)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?\"getHandleBounds\":e.stroke?\"getStrokeBounds\":\"getBounds\";return U[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,a){var s=t[0];if(!s)return new S;var o=new Array(6),u=s._transformCoordinates(i,new Array(6)),l=u.slice(0,2),c=l.slice(),h=new Array(2);function f(t){t._transformCoordinates(i,o);for(var e=0;e<2;e++)B._addBounds(u[e],u[e+4],o[e+2],o[e],e,a?a[e]:0,l,c,h);t=u,u=o,o=t}for(var d=1,p=t.length;d<p;d++)f(t[d]);return e&&f(s),new S(l[0],l[1],c[0]-l[0],c[1]-l[1])},getStrokeBounds:function(t,e,n,i,r){var a=n.getStyle(),s=a.hasStroke(),o=a.getStrokeWidth(),u=s&&n._getStrokeMatrix(i,r),l=s&&U._getStrokePadding(o,u),c=U.getBounds(t,e,n,i,r,l);if(!s)return c;var h=o/2,f=a.getStrokeJoin(),d=(o=a.getStrokeCap(),a.getMiterLimit()),p=new S(new b(l));function g(t){c=c.include(t)}function v(t){c=c.unite(p.setCenter(t._point.transform(i)))}function m(t,e){\"round\"===e||t.isSmooth()?v(t):U._addBevelJoin(t,e,h,d,i,u,g)}function y(t,e){\"round\"===e?v(t):U._addSquareCap(t,e,h,i,u,g)}var _=t.length-(e?0:1);if(0<_){for(var x=1;x<_;x++)m(t[x],f);e?m(t[0],f):(y(t[0],o),y(t[t.length-1],o))}return c},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new y(t,0).transform(e),i=new y(0,t).transform(e),r=n.getAngleInRadians(),a=n.getLength();return t=i.getLength(),e=Math.sin(r),n=Math.cos(r),i=Math.tan(r),r=Math.atan2(t*i,a),i=Math.atan2(t,i*a),[Math.abs(a*Math.cos(r)*n+t*Math.sin(r)*e),Math.abs(t*Math.sin(i)*n+a*Math.cos(i)*e)]},_addBevelJoin:function(t,e,n,i,r,a,s,o){t=(u=t.getCurve()).getPrevious(),r=u.getPoint1().transform(r),t=t.getNormalAtTime(1).multiply(n).transform(a);var u=u.getNormalAtTime(0).multiply(n).transform(a);((a=t.getDirectedAngle(u))<0||180<=a)&&(t=t.negate(),u=u.negate()),o&&s(r),s(r.add(t)),\"miter\"!==e||(t=new T(r.add(t),new y(-t.y,t.x),!0).intersect(new T(r.add(u),new y(-u.y,u.x),!0),!0))&&r.getDistance(t)<=i*n&&s(t),s(r.add(u))},_addSquareCap:function(t,e,n,i,r,a,s){i=t._point.transform(i),r=(t=t.getLocation()).getNormal().multiply(0===t.getTime()?n:-n).transform(r),\"square\"===e&&(s&&(a(i.subtract(r)),a(i.add(r))),i=i.add(r.rotate(-90))),a(i.add(r)),a(i.subtract(r))},getHandleBounds:function(t,e,n,i,r){var a,s,o,u=n.getStyle();r.stroke&&u.hasStroke()&&(o=n._getStrokeMatrix(i,r),r=n=u.getStrokeWidth()/2,\"miter\"===u.getStrokeJoin()&&(r=n*u.getMiterLimit()),\"square\"===u.getStrokeCap()&&(r=Math.max(r,n*Math.SQRT2)),a=U._getStrokePadding(n,o),s=U._getStrokePadding(r,o));for(var l=new Array(6),c=1/0,h=-c,f=c,d=h,p=0,g=t.length;p<g;p++){t[p]._transformCoordinates(i,l);for(var v=0;v<6;v+=2){var m,y=(m=v?a:s)?m[0]:0,_=m?m[1]:0,x=l[v],b=l[v+1];(m=x-y)<c&&(c=m),h<(x+=y)&&(h=x),(y=b-_)<f&&(f=y),d<(_=b+_)&&(d=_)}}return new S(c,f,h-c,d-f)}}});U.inject({statics:new function(){var t=.5522847498307936,e=[new N([-1,0],[0,t],[0,-t]),new N([0,-1],[-t,0],[t,0]),new N([1,0],[0,-t],[0,t]),new N([0,1],[t,0],[-t,0])];function n(t,e,n){var i=c.getNamed(n);return(n=new U(i&&0==i.insert&&A.NO_INSERT))._add(t),n._closed=e,n.set(i,{insert:!0})}function i(t,i,r){for(var a=new Array(4),s=0;s<4;s++){var o=e[s];a[s]=new N(o._point.multiply(i).add(t),o._handleIn.multiply(i),o._handleOut.multiply(i))}return n(a,!0,r)}return{Line:function(){var t=arguments;return n([new N(y.readNamed(t,\"from\")),new N(y.readNamed(t,\"to\"))],!1,t)},Circle:function(){var t=arguments,e=y.readNamed(t,\"center\"),n=c.readNamed(t,\"radius\");return i(e,new b(n),t)},Rectangle:function(){var e,i,r=arguments,a=S.readNamed(r,\"rectangle\"),s=b.readNamed(r,\"radius\",0,{readNull:!0}),o=a.getBottomLeft(!0),u=a.getTopLeft(!0),l=a.getTopRight(!0),c=a.getBottomRight(!0);return n(!s||s.isZero()?[new N(o),new N(u),new N(l),new N(c)]:(e=(s=b.min(s,a.getSize(!0).divide(2))).width,i=s.height,a=e*t,s=i*t,[new N(o.add(e,0),null,[-a,0]),new N(o.subtract(0,i),[0,s]),new N(u.add(0,i),null,[0,-s]),new N(u.add(e,0),[-a,0],null),new N(l.subtract(e,0),null,[a,0]),new N(l.add(0,i),[0,-s],null),new N(c.subtract(0,i),null,[0,s]),new N(c.subtract(e,0),[a,0])]),!0,r)},RoundRectangle:\"#Rectangle\",Ellipse:function(){var t=arguments,e=P._readEllipse(t);return i(e.center,e.radius,t)},Oval:\"#Ellipse\",Arc:function(){var t=arguments,e=y.readNamed(t,\"from\"),n=y.readNamed(t,\"through\"),i=y.readNamed(t,\"to\"),r=c.getNamed(t);return(t=new U(r&&0==r.insert&&A.NO_INSERT)).moveTo(e),t.arcTo(n,i),t.set(r)},RegularPolygon:function(){for(var t=arguments,e=y.readNamed(t,\"center\"),i=c.readNamed(t,\"sides\"),r=c.readNamed(t,\"radius\"),a=360/i,s=i%3==0,o=new y(0,s?-r:r),u=s?-1:.5,l=new Array(i),h=0;h<i;h++)l[h]=new N(e.add(o.rotate((h+u)*a)));return n(l,!0,t)},Star:function(){for(var t=arguments,e=y.readNamed(t,\"center\"),i=2*c.readNamed(t,\"points\"),r=c.readNamed(t,\"radius1\"),a=c.readNamed(t,\"radius2\"),s=360/i,o=new y(0,-1),u=new Array(i),l=0;l<i;l++)u[l]=new N(e.add(o.rotate(s*l).multiply(l%2?a:r)));return n(u,!0,t)}}}});var V=j.extend({_class:\"CompoundPath\",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(\"string\"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,r=i[0];r&&\"number\"==typeof r[0]&&(i=[i]);for(var a=n.length-1;0<=a;a--){var s=i[a];i!==n||s instanceof U||(i=c.slice(i)),Array.isArray(s)?i[a]=new U({segments:s,insert:!1}):s instanceof V&&(i.splice.apply(i,[a,1].concat(s.removeChildren())),s.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n,i=this._children,r=i.length-1;0<=r;r--)(n=i[r].reduce(e)).isEmpty()&&n.remove();return i.length?t.base.call(this):((n=new U(A.NO_INSERT)).copyAttributes(this),n.insertAbove(this),this.remove(),n)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)c.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,a=n.length;r<a;r++){var s=n[r],o=s._matrix;i.push(s.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return i.join(\"\")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===U||\"path\"===n.type?n:c.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,s=r.length;a<s;a++)r[a].draw(t,e,i);e.clip||(this._setStyles(t,e,n),(n=this._style).hasFill()&&(t.fill(n.getFillRule()),t.shadowColor=\"rgba(0,0,0,0)\"),n.hasStroke()&&t.stroke())}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,a=i.length;r<a;r++){var s=i[r],o=s._matrix;n[s._id]||s._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){if(t=t._children,e&&!t.length)throw new Error(\"Use a moveTo() command first\");return t[t.length-1]}return c.each([\"lineTo\",\"cubicCurveTo\",\"quadraticCurveTo\",\"curveTo\",\"arcTo\",\"lineBy\",\"cubicCurveBy\",\"quadraticCurveBy\",\"curveBy\",\"arcBy\"],(function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}}),{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new U(A.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=(n=t(this,!0))&&n.getLastSegment(),n=y.read(arguments);this.moveTo(e?n.add(e._point):n)},closePath:function(e){t(this,!0).closePath(e)}})},c.each([\"reverse\",\"flatten\",\"simplify\",\"smooth\"],(function(t){this[t]=function(e){for(var n,i=this._children,r=0,a=i.length;r<a;r++)n=i[r][t](e)||n;return n}}),{}));j.inject(new function(){var t=Math.min,e=Math.max,n=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,\"-1\":!0}};function r(t){return t._children||[t]}function a(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(e){for(var i=r(n),a=0,s=i.length;a<s;a++)(t=i[a])._closed||t.isEmpty()||(t.closePath(1e-12),t.getFirstSegment().setHandleIn(0,0),t.getLastSegment().setHandleOut(0,0));n=n.resolveCrossings().reorient(\"nonzero\"===n.getFillRule(),!0)}return n}function s(t,e,n,i,r){var a=new V(A.NO_INSERT);return a.addChildren(t,!0),a=a.reduce({simplify:e}),r&&0==r.insert||a.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),a.copyAttributes(n,!0),a}function u(t){return t.hasOverlap()||t.isCrossing()}function l(t,e,n,o){if(o&&(0==o.trace||o.stroke)&&/^(subtract|intersect)$/.test(n))return h(t,e,n);var l=a(t,!0),f=e&&t!==e&&a(e,!0),d=i[n];d[n]=!0,f&&(d.subtract||d.exclude)^f.isClockwise()^l.isClockwise()&&f.reverse();var v,y=m(z.expand(l.getIntersections(f,u))),b=r(l),w=(n=f&&r(f),[]),S=[];function C(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];c.push(w,i._segments),c.push(S,i.getCurves()),i._overlapsOnly=!0}}function M(t){for(var e=[],n=0,i=t&&t.length;n<i;n++)e.push(S[t[n]]);return e}if(y.length){C(b),n&&C(n);for(var T=new Array(S.length),k=0,A=S.length;k<A;k++)T[k]=S[k].getValues();var E=p.findCurveBoundsCollisions(T,T,0,!0),O={};for(k=0;k<S.length;k++){var P=S[k],I=P._path._id;(O[I]=O[I]||{})[P.getIndex()]={hor:M(E[k].hor),ver:M(E[k].ver)}}for(k=0,A=y.length;k<A;k++)_(y[k]._segment,l,f,O,d);for(k=0,A=w.length;k<A;k++){var L=w[k],D=L._intersection;L._winding||_(L,l,f,O,d),D&&D._overlap||(L._path._overlapsOnly=!1)}v=x(w,d)}else v=g(n?b.concat(n):b.slice(),(function(t){return!!d[t]}));return s(v,!0,t,e,o)}function h(t,e,n){var i=a(t),r=a(e),o=i.getIntersections(r,u),l=\"subtract\"===n,c=\"divide\"===n,h={},f=[];function d(t){return!h[t._id]&&(c||r.contains(t.getPointAt(t.getLength()/2))^l)&&(f.unshift(t),h[t._id]=!0)}for(var p=o.length-1;0<=p;p--){var g=o[p].split();g&&(d(g)&&g.getFirstSegment().setHandleIn(0,0),i.getLastSegment().setHandleOut(0,0))}return d(i),s(f,!1,t,e)}function f(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;(t._next=e)._previous=t}}function d(t){for(var e=t.length-1;0<=e;e--)t[e].clearHandles()}function g(t,e,i){var r=t&&t.length;if(r){var a=c.each(t,(function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}}),{}),s=t.slice().sort((function(t,e){return n(e.getArea())-n(t.getArea())})),o=s[0],u=p.findItemBoundsCollisions(s,null,v.GEOMETRIC_EPSILON);null==i&&(i=o.isClockwise());for(var l=0;l<r;l++){var h,f=s[l],d=a[f._id],g=0,m=u[l];if(m)for(var y=null,_=m.length-1;0<=_;_--)if(m[_]<l){y=y||f.getInteriorPoint();var x=s[m[_]];if(x.contains(y)){var b=a[x._id];g=b.winding,d.winding+=g,d.container=b.exclude?b.container:x;break}}e(d.winding)===e(g)?(d.exclude=!0,t[d.index]=null):(h=d.container,f.setClockwise(h?!h.isClockwise():i))}}return t}function m(t,e,n){var i,r,a,s=e&&[],o=!1,u=n||[],l=n&&{};function c(t){return t._path._id+\".\"+t._segment1._index}for(var h=(n&&n.length)-1;0<=h;h--)(p=n[h])._path&&(l[c(p)]=!0);for(h=t.length-1;0<=h;h--){var p,g=(w=t[h])._time,v=g,m=e&&!e(w);if((p=w._curve)&&(p!==r?(o=!p.hasHandles()||l&&l[c(p)],i=[],a=null,r=p):1e-8<=a&&(g/=a)),m)i&&i.push(w);else{if(e&&s.unshift(w),a=v,g<1e-8)y=p._segment1;else if(1-1e-8<g)y=p._segment2;else{v=p.divideAtTime(g,!0),o&&u.push(p,v);for(var y=v._segment1,_=i.length-1;0<=_;_--){var x=i[_];x._time=(x._time-g)/(1-g)}}w._setSegment(y);var b=y._intersection,w=w._intersection;if(b){f(b,w);for(var S=b;S;)f(S._intersection,b),S=S._next}else y._intersection=w}}return n||d(u),s||t}function y(i,r,a,s,o){var u,l=Array.isArray(r)?r:r[a?\"hor\":\"ver\"],c=a?1:0,h=1^c,f=[i.x,i.y],d=f[c],p=f[h],g=1e-6,v=d-1e-9,m=d+1e-9,_=0,x=0,b=0,w=0,S=!1,C=!1,M=1,T=[];function k(n){var u=n[h+0],l=n[h+2],f=n[h+4],_=n[h+6];if(p<=e(u,l,f,_)&&p>=t(u,l,f,_)){u=n[c+0],l=n[c+2],f=n[c+4],_=n[c+6];for(var x,C=v>e(u,l,f,_)||m<t(u,l,f,_)?[n]:B.getMonoCurves(n,a),k=0,A=C.length;k<A;k++)if(x=function(n){var u=n[h+0],l=n[h+6];if(!(p<t(u,l)||p>e(u,l))){var f=n[c+0],_=n[c+2],x=n[c+4],C=n[c+6];if(u!==l){var k=p===u?0:p!==l&&!(v>e(f,_,x,C)||m<t(f,_,x,C))&&0<B.solveCubic(n,h,p,T,0,1)?T[0]:1,A=0===k?f:1===k?C:B.getPoint(n,k)[a?\"y\":\"x\"];return _=l<u?1:-1,x=L[h]>L[h+6]?1:-1,l=L[c+6],p!==u?(A<v?b+=_:m<A?w+=_:S=!0,d-g<A&&A<d+g&&(M/=2)):(_!=x?f<v?b+=_:m<f&&(w+=_):f!=l&&(l<m&&m<A?(w+=_,S=!0):v<l&&A<v&&(b+=_,S=!0)),M/=4),L=n,!o&&v<A&&A<m&&0===B.getTangent(n,k)[a?\"x\":\"y\"]&&y(i,r,!a,s,!0)}(f<m&&v<C||C<m&&v<f)&&(S=!0)}}(C[k]))return x}}for(var A=0,E=l.length;A<E;A++){var O=l[A],P=O._path,I=O.getValues();if(!(A&&l[A-1]._path===P||(L=null,P._closed||(u=B.getValues(P.getLastCurve().getSegment2(),O.getSegment1(),null,!s))[h]!==u[h+6]&&(L=u),L)))for(var L=I,D=P.getLastCurve();D&&D!==O;){var R=D.getValues();if(R[h]!==R[h+6]){L=R;break}D=D.getPrevious()}if(I=k(I))return I;if(A+1===E||l[A+1]._path!==P){if(u&&(I=k(u)))return I;_+=b=!S||b||w?b:w=P.isClockwise(s)^a?1:-1,x+=w,b=w=0,S=S&&!(C=!0),u=null}}return _=n(_),x=n(x),{winding:e(_,x),windingL:_,windingR:x,quality:M,onPath:C}}function _(t,e,i,r,a){var s=[],o=t,u=0;do{}while((m=t.getCurve())&&(f=m.getLength(),s.push({segment:t,curve:m,length:f}),u+=f),(t=t.getNext())&&!t._intersection&&t!==o);for(var l=[.5,.25,.75],c={winding:0,quality:-1},h=0;h<l.length&&c.quality<.5;h++)for(var f=u*l[h],d=0,p=s.length;d<p;d++){var g=(S=s[d]).length;if(f<=g){var m,_=(m=S.curve)._path,x=(C=_._parent)instanceof V?C:_,b=v.clamp(m.getTimeAt(f),.001,.999),w=m.getPointAtTime(b),S=n(m.getTangentAtTime(b).y)<Math.SQRT1_2,C=null;if(a.subtract&&i&&(b=(x===e?i:e)._getWinding(w,S,!0),x===e&&b.winding||x===i&&!b.winding)){if(b.quality<1)continue;C={winding:0,quality:1}}(C=C||y(w,r[_._id][m.getIndex()],S,!0)).quality>c.quality&&(c=C);break}f-=g}for(d=s.length-1;0<=d;d--)s[d].segment._winding=c}function x(t,e){var n,i=[];function r(t){return!(!t||t._visited||e&&(!e[(t=t._winding||{}).winding]||e.unite&&2===t.winding&&t.windingL&&t.windingR))}function a(t){if(t)for(var e=0,i=n.length;e<i;e++)if(t===n[e])return!0;return!1}function s(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}t.sort((function(t,e){var n=t._intersection,i=e._intersection,r=!(!n||!n._overlap),a=!(!i||!i._overlap),s=t._path,o=e._path;return r^a?r?1:-1:!n^!i?n?1:-1:s!==o?s._id-o._id:t._index-e._index}));for(var o=0,u=t.length;o<u;o++){var l,c,h,f,d,p=t[o],g=r(p),v=null,m=!1,y=!0,_=[];for(g&&p._path._overlapsOnly&&(f=p._path,d=p._intersection._segment._path,f.compare(d)&&(f.getArea()&&i.push(f.clone(!1)),s(f),s(d),g=!1));g;){var x=!v,b=function(t,e){var i=t._intersection,s=i,o=[];function u(i,s){for(;i&&i!==s;){var u,l=i._segment,c=l&&l._path;c&&(c=(u=l.getNext()||c.getFirstSegment())._intersection,l!==t&&(a(l)||a(u)||u&&r(l)&&(r(u)||c&&r(c._segment)))&&o.push(l),e&&n.push(l)),i=i._next}}if(e&&(n=[t]),i){for(u(i);i&&i._previous;)i=i._previous;u(i,s)}return o}(p,x),w=b.shift(),S=!(m=!x&&(a(p)||a(w)))&&w;if(x&&(v=new U(A.NO_INSERT),l=null),m){(p.isFirst()||p.isLast())&&(y=p._path._closed),p._visited=!0;break}if(S&&l&&(_.push(l),l=null),l||(S&&b.push(p),l={start:v._segments.length,crossings:b,visited:c=[],handleIn:h}),!r(p=S?w:p)){v.removeSegments(l.start);for(var C=0,M=c.length;C<M;C++)c[C]._visited=!1;for(c.length=0;(p=l&&l.crossings.shift())&&p._path||(p=null,(l=_.pop())&&(c=l.visited,h=l.handleIn)),l&&!r(p););if(!p)break}w=p.getNext(),v.add(new N(p._point,h,w&&p._handleOut)),p._visited=!0,c.push(p),p=w||p._path.getFirstSegment(),h=w&&w._handleIn}m&&(y&&(v.getFirstSegment().setHandleIn(h),v.setClosed(y)),0!==v.getArea()&&i.push(v))}return i}return{_getWinding:function(t,e,n){return y(t,this.getCurves(),e,n)},unite:function(t,e){return l(this,t,\"unite\",e)},intersect:function(t,e){return l(this,t,\"intersect\",e)},subtract:function(t,e){return l(this,t,\"subtract\",e)},exclude:function(t,e){return l(this,t,\"exclude\",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?h(this,t,\"divide\"):s([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t,e){return(t=t&&t._intersection)&&t._overlap&&t._path===e}var i,r=!1,a=!1,s=this.getIntersections(null,(function(t){return t.hasOverlap()?r=!0:t.isCrossing()&&(a=!0)})),o=r&&a&&[];if(s=z.expand(s),r)for(var u=m(s,(function(t){return t.hasOverlap()}),o),l=u.length-1;0<=l;l--){var h=(g=u[l])._path,f=g._segment,p=f.getPrevious(),g=f.getNext();n(p,h)&&n(g,h)&&(f.remove(),p._handleOut._set(0,0),g._handleIn._set(0,0),p===f||p.getCurve().hasLength()||(g._handleIn.set(p._handleIn),p.remove()))}return a&&(m(s,r&&function(t){var e=t.getCurve(),n=t.getSegment(),i=(t=(i=t._intersection)._curve,i._segment);if(e&&t&&e._path&&t._path)return!0;n&&(n._intersection=null),i&&(i._intersection=null)},o),o&&d(o),e=x(c.each(e,(function(t){c.push(this,t._segments)}),[]))),1<(o=e.length)&&t?(e!==t&&this.setChildren(e),i=this):1!==o||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),i=this),i||((i=new V(A.NO_INSERT)).addChildren(e),(i=i.reduce()).copyAttributes(this),this.replaceWith(i)),i},reorient:function(t,e){var n=this._children;return n&&n.length?this.setChildren(g(this.removeChildren(),(function(e){return!!(t?e:1&e)}),e)):e!==o&&this.setClockwise(e),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var i=this.getCurves(),r=n.y,a=[],s=[],o=0,u=i.length;o<u;o++){var l=i[o].getValues(),c=l[1],h=l[3],f=l[5],d=l[7];if(r>=t(c,h,f,d)&&r<=e(c,h,f,d))for(var p=B.getMonoCurves(l),g=0,v=p.length;g<v;g++){var m=p[g],y=m[1],_=m[7];y!==_&&(y<=r&&r<=_||_<=r&&r<=y)&&(m=r===y?m[0]:r===_?m[6]:1===B.solveCubic(m,1,r,s,0,1)?B.getPoint(m,s[0]).x:(m[0]+m[6])/2,a.push(m))}}1<a.length&&(a.sort((function(t,e){return t-e})),n.x=(a[0]+a[1])/2)}return n}}});var W=c.extend({_class:\"PathFlattener\",initialize:function(t,e,n,i,r){var a,s=[],o=[],u=0,l=1/(n||32),c=t._segments,h=c[0];function f(t,n){n=B.getValues(t,n,r),s.push(n),function t(n,r,a,s){var c,h;!(l<s-a)||i&&B.isStraight(n)||B.isFlatEnough(n,e||.25)?(c=n[6]-n[0],h=n[7]-n[1],0<(h=Math.sqrt(c*c+h*h))&&(u+=h,o.push({offset:u,curve:n,index:r,time:s}))):(h=B.subdivide(n,.5),n=(a+s)/2,t(h[0],r,a,n),t(h[1],r,n,s))}(n,t._index,0,1)}for(var d=1,p=c.length;d<p;d++)f(h,a=c[d]),h=a;t._closed&&f(a||h,c[0]),this.curves=s,this.parts=o,this.length=u,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;(e=r)&&!(n[--r].offset<t););for(;e<i;e++){var a=n[e];if(a.offset>=t){var s=(o=n[(this.index=e)-1])&&o.index===a.index?o.time:0,o=o?o.offset:0;return{index:a.index,time:s+(a.time-s)*(t-o)/(a.offset-o)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),a=i.index,s=r.index;a<=s;a++){var o=B.getPart(this.curves[a],a===i.index?i.time:0,a===r.index?r.time:1);a===i.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},c.each(B._evaluateMethods,(function(t){this[t+\"At\"]=function(e){return e=this._get(e),B[t](this.curves[e.index],e.time)}}),{})),G=c.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=(t=t._closed,0),a=i.length;r<a;r++){var s=i[r].point;e&&e.equals(s)||n.push(e=s.clone())}t&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=t},fit:function(t){var e=this.points,n=e.length,i=null;return 0<n&&(i=[new N(e[0])],1<n&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,a){var s=this.points;if(i-n!=1){for(var o,u=this.chordLengthParameterize(n,i),l=Math.max(e,e*e),c=!0,h=0;h<=4;h++){var f=this.generateBezier(n,i,u,r,a),d=this.findMaxError(n,i,f,u);if(d.error<e&&c)return void this.addCurve(t,f);if(o=d.index,d.error>=l)break;c=this.reparameterize(n,i,u,f),l=d.error}var p=s[o-1].subtract(s[o+1]);this.fitCubic(t,e,n,o,r,p),this.fitCubic(t,e,o,i,p.negate(),a)}else{var g=s[n];p=s[i],s=g.getDistance(p)/3,this.addCurve(t,[g,g.add(r.normalize(s)),p.add(a.normalize(s)),p])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new N(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var a=Math.abs,s=this.points,o=s[t],u=s[e],l=[[0,0],[0,0]],c=[0,0],h=0,f=e-t+1;h<f;h++){var d=(v=1-(y=n[h]))*v*v,p=(m=3*y*v)*v,g=m*y,v=y*y*y,m=i.normalize(p),y=r.normalize(g);v=s[t+h].subtract(o.multiply(d+p)).subtract(u.multiply(g+v)),l[0][0]+=m.dot(m),l[0][1]+=m.dot(y),l[1][0]=l[0][1],l[1][1]+=y.dot(y),c[0]+=m.dot(v),c[1]+=y.dot(v)}var _,x;1e-12<a(e=l[0][0]*l[1][1]-l[1][0]*l[0][1])?(x=l[0][0]*c[1]-l[1][0]*c[0],_=(c[0]*l[1][1]-c[1]*l[0][1])/e,x/=e):(e=l[0][0]+l[0][1],S=l[1][0]+l[1][1],_=x=1e-12<a(e)?c[0]/e:1e-12<a(S)?c[1]/S:0);var b,w,S=1e-12*(a=u.getDistance(o));return _<S||x<S?_=x=a/3:(S=u.subtract(o),b=i.normalize(_),w=r.normalize(x),b.dot(S)-w.dot(S)>a*a&&(_=x=a/3,b=w=null)),[o,o.add(b||i.normalize(_)),u.add(w||r.normalize(x)),u]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);r=1;for(var a=n.length;r<a;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],a=0;a<=2;a++)i[a]=t[a+1].subtract(t[a]).multiply(3);for(a=0;a<=1;a++)r[a]=i[a+1].subtract(i[a]).multiply(2);var s=this.evaluate(3,t,n),o=this.evaluate(2,i,n),u=this.evaluate(1,r,n);return e=s.subtract(e),u=o.dot(o)+e.dot(u),v.isMachineZero(u)?n:n-e.dot(o)/u},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var a=0;a<=t-r;a++)i[a]=i[a].multiply(1-n).add(i[a+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),a=0,s=t+1;s<e;s++){var o;a<=(o=(o=this.evaluate(3,n,i[s-t]).subtract(this.points[s])).x*o.x+o.y*o.y)&&(a=o,r=s)}return{error:a,index:r}}}),H=A.extend({_class:\"TextItem\",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content=\"\",this._lines=[];var e=t&&c.isPlainObject(t)&&t.x===o&&t.y===o;this._initialize(e&&t,!e&&y.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=\"\"+t,this._lines=this._content.split(/\\r\\n|\\n|\\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:\"#getStyle\",setCharacterStyle:\"#setStyle\",getParagraphStyle:\"#getStyle\",setParagraphStyle:\"#setStyle\"}),X=H.extend({_class:\"PointText\",initialize:function(){H.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new _(t.x,t.y,this,\"setPoint\")},setPoint:function(){var t=y.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=(n=this._style).hasFill(),a=n.hasStroke(),s=n.getLeading(),o=t.shadowColor;t.font=n.getFontStyle(),t.textAlign=n.getJustification();for(var u=0,l=i.length;u<l;u++){t.shadowColor=o;var c=i[u];r&&(t.fillText(c,0,0),t.shadowColor=\"rgba(0,0,0,0)\"),a&&t.strokeText(c,0,0),t.translate(0,s)}}},_getBounds:function(t,e){var n=this._style,i=(s=this._lines).length,r=n.getJustification(),a=n.getLeading(),s=(n=this.getView().getTextWidth(n.getFontStyle(),s),0);return\"left\"!==r&&(s-=n/(\"center\"===r?2:1)),a=new S(s,i?-.75*a:0,n,i*a),t?t._transformBounds(a,a):a}}),Y=c.extend(new function(){var t,e={gray:[\"gray\"],rgb:[\"red\",\"green\",\"blue\"],hsb:[\"hue\",\"saturation\",\"brightness\"],hsl:[\"hue\",\"saturation\",\"lightness\"],gradient:[\"gradient\",\"origin\",\"destination\",\"highlight\"]},n={},i={transparent:[0,0,0,0]},r=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],a={\"rgb-hsb\":function(t,e,n){var i=Math.max(t,e,n),r=i-Math.min(t,e,n);return[0==r?0:60*(i==t?(e-n)/r+(e<n?6:0):i==e?(n-t)/r+2:(t-e)/r+4),0===i?0:r/i,i]},\"hsb-rgb\":function(t,e,n){t=(t/60%6+6)%6;var i=Math.floor(t);return[(t=[n,n*(1-e),n*(1-e*(t-=i)),n*(1-e*(1-t))])[(i=r[i])[0]],t[i[1]],t[i[2]]]},\"rgb-hsl\":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),a=i-r,s=0==a,o=(i+r)/2;return[s?0:60*(i==t?(e-n)/a+(e<n?6:0):i==e?(n-t)/a+2:(t-e)/a+4),s?0:o<.5?a/(i+r):a/(2-i-r),o]},\"hsl-rgb\":function(t,e,n){if(0===e)return[n,n,n];for(var i=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,s=[],o=0;o<3;o++){var u=i[o];u<0&&(u+=1),1<u&&--u,s[o]=6*u<1?a+6*(r-a)*u:2*u<1?r:3*u<2?a+(r-a)*(2/3-u)*6:a}return s},\"rgb-gray\":function(t,e,n){return[.2989*t+.587*e+.114*n]},\"gray-rgb\":function(t){return[t,t,t]},\"gray-hsb\":function(t){return[0,0,t]},\"gray-hsl\":function(t){return[0,0,t]},\"gradient-rgb\":function(){return[]},\"rgb-gradient\":function(){return[]}};return c.each(e,(function(t,i){n[i]=[],c.each(t,(function(t,r){var a=c.capitalize(t),s=/^(hue|saturation)$/.test(t),o=n[i][r]=\"gradient\"===i?\"gradient\"===t?function(t){var e=this._components[0];return e!==(t=q.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return y.read(arguments,0,{readNull:\"highlight\"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this[\"get\"+a]=function(){return(this._type===i||s&&/^hs[bl]$/.test(this._type)?this._components:this._convert(i))[r]},this[\"set\"+a]=function(t){this._type===i||s&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=e[i],this._type=i),this._components[r]=o.call(this,t),this._changed()}}),this)}),{_class:\"Color\",_readIndex:!0,initialize:function r(a){var s,o,l,h=arguments,f=this.__read,d=0,p=null!=(a=Array.isArray(a)?(h=a)[0]:a)&&x(a);if(\"string\"===p&&a in e&&(g=a,a=h[1],Array.isArray(a)?(s=a,m=h[2]):(f&&(d=1),h=c.slice(h,1),p=x(a))),!s){if(o=\"number\"===p?h:\"object\"===p&&null!=a.length?a:null){var g=g||(3<=o.length?\"rgb\":\"gray\"),v=e[g].length,m=o[v];f&&(d+=o===arguments?v+(null!=m?1:0):1),o.length>v&&(o=c.slice(o,0,v))}else if(\"string\"===p)v=function(e){var n=e.match(/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i)||e.match(/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i),r=\"rgb\";if(n)for(var a=n[4]?4:3,s=new Array(a),o=0;o<a;o++){var l=n[o+1];s[o]=parseInt(1==l.length?l+l:l,16)/255}else if(n=e.match(/^(rgb|hsl)a?\\((.*)\\)$/)){r=n[1],s=n[2].trim().split(/[,\\s]+/g);for(var c=\"hsl\"===r,h=(o=0,Math.min(s.length,4));o<h;o++){var f,d=s[o];l=parseFloat(d),c?0===o?(f=d.match(/([a-z]*)$/)[1],l*={turn:360,rad:180/Math.PI,grad:.9}[f]||1):o<3&&(l/=100):o<3&&(l/=/%$/.test(d)?100:255),s[o]=l}}else{var p,g=i[e];s=(g=g||(u?(t||((t=vt.getContext(1,1)).globalCompositeOperation=\"copy\"),t.fillStyle=\"rgba(0,0,0,0)\",t.fillStyle=e,t.fillRect(0,0,1,1),p=t.getImageData(0,0,1,1).data,i[e]=[p[0]/255,p[1]/255,p[2]/255]):[0,0,0])).slice()}return[r,s]}(a),g=v[0],4===(s=v[1]).length&&(m=s[3],s.length--);else if(\"object\"===p)if(a.constructor===r){if(g=a._type,s=a._components.slice(),m=a._alpha,\"gradient\"===g)for(var y=1,_=s.length;y<_;y++){var b=s[y];b&&(s[y]=b.clone())}}else if(a.constructor===q)g=\"gradient\",o=h;else{var w=e[g=\"hue\"in a?\"lightness\"in a?\"hsl\":\"hsb\":\"gradient\"in a||\"stops\"in a||\"radial\"in a?\"gradient\":\"gray\"in a?\"gray\":\"rgb\"],S=n[g];for(this._components=s=[],y=0,_=w.length;y<_;y++)null==(l=a[w[y]])&&!y&&\"gradient\"===g&&\"stops\"in a&&(l={stops:a.stops,radial:a.radial}),null!=(l=S[y].call(this,l))&&(s[y]=l);m=a.alpha}f&&g&&(d=1)}if(this._type=g||\"rgb\",!s)for(this._components=s=[],y=0,_=(S=n[this._type]).length;y<_;y++)null!=(l=S[y].call(this,o&&o[y]))&&(s[y]=l);return this._components=s,this._properties=e[this._type],this._alpha=m,f&&(this.__read=d),this},set:\"#initialize\",_serialize:function(t,e){var n=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var e;return this._type===t?this._components.slice():(e=a[this._type+\"-\"+t])?e.apply(this,this._components):a[\"rgb-\"+t].apply(this,a[this._type+\"-rgb\"].apply(this,this._components))},convert:function(t){return new Y(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=c.isPlainValue(t,!0)?Y.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&c.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n=\"gradient\"===this._type,i=g.instance,r=0,a=t.length;r<a;r++){var s=this._components[r];null!=s&&e.push(t[r]+\": \"+(n?s:i.number(s)))}return null!=this._alpha&&e.push(\"alpha: \"+i.number(this._alpha)),\"{ \"+e.join(\", \")+\" }\"},toCSS:function(t){var e=this._convert(\"rgb\"),n=t||null==this._alpha?1:this._alpha;function i(t){return Math.round(255*(t<0?0:1<t?1:t))}return e=[i(e[0]),i(e[1]),i(e[2])],n<1&&e.push(n<0?0:n),t?\"#\"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?\"rgba(\":\"rgb(\")+e.join(\",\")+\")\"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if(\"gradient\"!==this._type)return this._canvasStyle=this.toCSS();var n,i=(o=this._components)[0],r=i._stops,a=o[1],s=o[2],o=o[3];(e=e&&e.inverted())&&(a=e._transformPoint(a),s=e._transformPoint(s),o=o&&e._transformPoint(o)),n=i._radial?(e=s.getDistance(a),!o||(i=o.subtract(a)).getLength()>e&&(o=a.add(i.normalize(e-.1))),t.createRadialGradient((o=o||a).x,o.y,0,a.x,a.y,e)):t.createLinearGradient(a.x,a.y,s.x,s.y);for(var u=0,l=r.length;u<l;u++){var c=r[u],h=c._offset;n.addColorStop(null==h?u/(l-1):h,c._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if(\"gradient\"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new Y(t(),t(),t())},_setOwner:function(t,e,n){return t&&!(t=t._owner&&e&&t._owner!==e?t.clone():t)._owner^!e&&(t._owner=e||null,t._setter=n||null),t}}})},new function(){return c.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=Y.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),a=0,s=i.length;a<s;a++)r[a]=t(i[a],r[a]);return new Y(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),q=c.extend({_class:\"Gradient\",initialize:function(t,e){this._id=m.get(),t&&c.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||[\"white\",\"black\"]),null==this._radial&&this.setRadial(\"string\"==typeof e&&\"radial\"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return c.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){-1!=(t=this._owners?this._owners.indexOf(t):-1)&&(this._owners.splice(t,1),this._owners.length||(this._owners=o))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new q(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error(\"Gradient stop list needs to contain at least two stops.\");var e=this._stops;if(e)for(var n=0,i=e.length;n<i;n++)e[n]._owner=o;for(n=0,i=(e=this._stops=J.readList(t,0,{clone:!0})).length;n<i;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),J=c.extend({_class:\"GradientStop\",initialize:function(t,e){var n=t,i=e;\"object\"==x(t)&&e===o&&(Array.isArray(t)&&\"number\"!=typeof t[0]?(n=t[0],i=t[1]):(\"color\"in t||\"offset\"in t||\"rampPoint\"in t)&&(n=t.color,i=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new J(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return c.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:\"#getOffset\",setRampPoint:\"#setOffset\",getColor:function(){return this._color},setColor:function(){Y._setOwner(this._color,null),this._color=Y._setOwner(Y.read(arguments,0),this,\"setColor\"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Z=c.extend(new function(){var t={fillColor:null,fillRule:\"nonzero\",strokeColor:null,strokeWidth:1,strokeCap:\"butt\",strokeJoin:\"miter\",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new y,selectedColor:null},e=c.set({},t,{fontFamily:\"sans-serif\",fontWeight:\"normal\",fontSize:12,leading:null,justification:\"left\"}),n=c.set({},e,{fillColor:new Y}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},a={_class:\"Style\",beans:!0,initialize:function(i,r,a){this._values={},this._owner=r,this._project=r&&r._project||a||Vt.project,this._defaults=!r||r instanceof E?e:r instanceof H?n:t,i&&this.set(i)}};return c.each(e,(function(t,e){var n=/Color$/.test(e),s=\"shadowOffset\"===e,u=c.capitalize(e),l=i[e],h=\"set\"+u,f=\"get\"+u;a[h]=function(t){var i,r=this._owner,a=r&&r._children,s=a&&0<a.length&&!(r instanceof V);if(s)for(var o=0,u=a.length;o<u;o++)a[o]._style[h](t);\"selectedColor\"!==e&&s||!(e in this._defaults)||(i=this._values[e])!==t&&(n&&(i&&(Y._setOwner(i,null),i._canvasStyle=null),t&&t.constructor===Y&&(t=Y._setOwner(t,r,s&&h))),this._values[e]=t,r&&r._changed(l||129))},a[f]=function(t){var i,r=this._owner,a=r&&r._children,u=a&&0<a.length&&!(r instanceof V);if(u&&!t)for(var l=0,d=a.length;l<d;l++){var p=a[l]._style[f]();if(l){if(!c.equals(i,p))return o}else i=p}else e in this._defaults&&((i=this._values[e])===o?(i=this._defaults[e])&&i.clone&&(i=i.clone()):!(t=n?Y:s?y:null)||i&&i.constructor===t||(this._values[e]=i=t.read([i],0,{readNull:!0,clone:!0})));return i&&n?Y._setOwner(i,r,u&&h):i},r[f]=function(t){return this._style[f](t)},r[h]=function(t){this._style[h](t)}})),c.each({Font:\"FontFamily\",WindingRule:\"FillRule\"},(function(t,e){var n=\"get\"+e;e=\"set\"+e,a[n]=r[n]=\"#get\"+t,a[e]=r[e]=\"#set\"+t})),A.inject(r),a},{set:function(t){var e,n=t instanceof Z,i=n?t._values:t;if(i)for(var r in i)r in this._defaults&&(e=i[r],this[r]=e&&n&&e.clone?e.clone():e)},equals:function(t){function e(t,e,n){var i,r=t._values,a=e._values,s=e._defaults;for(i in r){var u=r[i],l=a[i];if(!(n&&i in a||c.equals(u,l===o?s[i]:l)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t=this.getFillColor();t&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&0<t.alpha},hasStroke:function(){var t=this.getStrokeColor();return!!t&&0<t.alpha&&0<this.getStrokeWidth()},hasShadow:function(){var t=this.getShadowColor();return!!t&&0<t.alpha&&(0<this.getShadowBlur()||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+\" \"+t+(/[a-z]/i.test(t+\"\")?\" \":\"px \")+this.getFontFamily()},getFont:\"#getFontFamily\",setFont:\"#setFontFamily\",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),K=new function(){function t(t,e,n,i){for(var r=[\"\",\"webkit\",\"moz\",\"Moz\",\"ms\",\"o\"],a=e[0].toUpperCase()+e.substring(1),s=0;s<6;s++){var o;if((o=(o=r[s])?o+a:e)in t){if(!n)return t[o];t[o]=i;break}}}return{getStyles:function(t){var e;return(e=(e=t&&9!==t.nodeType?t.ownerDocument:t)&&e.defaultView)&&e.getComputedStyle(t,\"\")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,a=i.documentElement;try{n=t.getBoundingClientRect()}catch(t){n={left:0,top:0,width:0,height:0}}var s=n.left-(a.clientLeft||r.clientLeft||0);return t=n.top-(a.clientTop||r.clientTop||0),e||(s+=(i=i.defaultView).pageXOffset||a.scrollLeft||r.scrollLeft,t+=i.pageYOffset||a.scrollTop||r.scrollTop),new S(s,t,n.width,n.height)},getViewportBounds:function(t){t=(e=t.ownerDocument).defaultView;var e=e.documentElement;return new S(0,0,t.innerWidth||e.clientWidth,t.innerHeight||e.clientHeight)},getOffset:function(t,e){return K.getBounds(t,e).getPoint()},getSize:function(t){return K.getBounds(t,!0).getSize()},isInvisible:function(t){return K.getSize(t).equals(new b(0,0))},isInView:function(t){return!K.isInvisible(t)&&K.getViewportBounds(t).intersects(K.getBounds(t,!0))},isInserted:function(t){return l.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if(\"object\"==x(n))for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},Q={add:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\\s,]+/g),a=0,s=r.length;a<s;a++){var o=r[a];t.addEventListener(o,i,t===l&&(\"touchstart\"===o||\"touchmove\"===o)&&{passive:!1})}},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\\s,]+/g),a=0,s=r.length;a<s;a++)t.removeEventListener(r[a],i,!1)},getPoint:function(t){return t=t.targetTouches?(t.targetTouches.length?t.targetTouches:t.changedTouches)[0]:t,new y(t.pageX||t.clientX+l.documentElement.scrollLeft,t.pageY||t.clientY+l.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Q.getPoint(t).subtract(K.getOffset(e||Q.getTarget(t)))}};Q.requestAnimationFrame=new function(){var t,e=K.getPrefixed(u,\"requestAnimationFrame\"),n=!1,i=[];function r(){var t=i;i=[];for(var a=0,s=t.length;a<s;a++)t[a]();(n=e&&i.length)&&e(r)}return function(a){i.push(a),e?n||(e(r),n=!0):t=t||setInterval(r,1e3/60)}};var $,tt,et,nt,it,rt,at,st=c.extend(h,{_class:\"View\",initialize:function t(e,n){function i(t){return n[t]||parseInt(n.getAttribute(t),10)}function r(){var t=K.getSize(n);return t.isNaN()||t.isZero()?new b(i(\"width\"),i(\"height\")):t}var a,s,o,c,h;u&&n?(this._id=n.getAttribute(\"id\"),null==this._id&&n.setAttribute(\"id\",this._id=\"paper-view-\"+t._id++),Q.add(n,this._viewEvents),K.setPrefixed(n.style,{userDrag:h=\"none\",userSelect:h,touchCallout:h,contentZooming:h,tapHighlightColor:\"rgba(0,0,0,0)\"}),f.hasAttribute(n,\"resize\")&&Q.add(u,(s=this)._windowEvents={resize:function(){s.setViewSize(r())}}),a=r(),f.hasAttribute(n,\"stats\")&&\"undefined\"!=typeof Stats&&(this._stats=new Stats,c=(o=this._stats.domElement).style,h=K.getOffset(n),c.position=\"absolute\",c.left=h.x+\"px\",c.top=h.y+\"px\",l.body.appendChild(o))):(a=new b(n),n=null),this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,t._views.push(this),((t._viewsById[this._id]=this)._matrix=new M)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Vt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;st._focused===this&&(st._focused=null),st._views.splice(st._views.indexOf(this),1),delete st._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Q.remove(this._element,this._viewEvents),Q.remove(u,this._windowEvents),this._element=this._project=null,this.off(\"frame\"),this._animate=!1,this._frameItems={},!0},_events:c.each(A._itemHandlers.concat([\"onResize\",\"onKeyDown\",\"onKeyUp\"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){(this._autoUpdate=t)&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){var t;this._requested||(t=this,Q.requestAnimationFrame((function(){var e;t._requested=!1,t._animate&&(t.requestUpdate(),e=t._element,K.getPrefixed(l,\"hidden\")&&\"true\"!==f.getAttribute(e,\"keepalive\")||!K.isInView(e)||t._handleFrame()),t._autoUpdate&&t.update()})),this._requested=!0)},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Vt=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit(\"frame\",new c({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on(\"frame\",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off(\"frame\",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems)(e=this._frameItems[e]).item.emit(\"frame\",new c(t,{time:e.time+=t.delta,count:e.count++}))},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=o},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new w(t.width,t.height,this,\"setViewSize\")},setViewSize:function(){var t=b.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit(\"resize\",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new S(new y,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return K.isInView(this._element)},isInserted:function(){return K.isInserted(this._element)},getPixelSize:function(t){var e,n,i=this._element;return i?(n=i.parentNode,(i=l.createElement(\"div\")).style.fontSize=t,n.appendChild(i),e=parseFloat(K.getStyles(i).fontSize),n.removeChild(i)):e=parseFloat(e),e},getTextWidth:function(t,e){return 0}},c.each([\"rotate\",\"scale\",\"shear\",\"skew\"],(function(t){var e=\"rotate\"===t;this[t]=function(){var n=arguments,i=(e?c:y).read(n);return n=y.read(n,0,{readNull:!0}),this.transform((new M)[t](i,n||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new M;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=y.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new M).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new _(t.x,t.y,this,\"setScaling\")},setScaling:function(){var t=this.getScaling(),e=y.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(y.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(y.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(y.read(arguments))},getEventPoint:function(t){return this.viewToProject(Q.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return l&&\"string\"==typeof e&&(e=l.getElementById(e)),new(u?ot:st)(t,e)}}},new function(){if(u){var t,e,n,i,r,a=!1,s=!1;(c=u.navigator).pointerEnabled||c.msPointerEnabled?(n=\"pointerdown MSPointerDown\",i=\"pointermove MSPointerMove\",r=\"pointerup pointercancel MSPointerUp MSPointerCancel\"):(n=\"touchstart\",i=\"touchmove\",r=\"touchend touchcancel\",\"ontouchstart\"in u&&c.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=\" mousedown\",i+=\" mousemove\",r+=\" mouseup\"));var o={},c={mouseout:function(t){var e,n,i,r=st._focused,a=Q.getRelatedTarget(t);!r||a&&\"HTML\"!==a.nodeName||(n=(e=Q.getOffset(t,r._element)).x,a=(i=Math.abs)(n),e.x=i(i=a-(1<<25))<a?i*(n<0?-1:1):n,T(r,t,r.viewToProject(e)))},scroll:M};o[n]=function(t){var e=st._focused=C(t);a||(a=!0,e._handleMouseEvent(\"mousedown\",t))},c[i]=function(n){var i,r=st._focused;s||((i=C(n))?r!==i&&(r&&T(r,n),t=t||r,r=st._focused=e=i):e&&e===r&&(t&&!t.isInserted()&&(t=null),r=st._focused=t,t=null,M())),r&&T(r,n)},c[n]=function(){s=!0},c[r]=function(t){var e=st._focused;e&&a&&e._handleMouseEvent(\"mouseup\",t),s=a=!1},Q.add(l,c),Q.add(u,{load:M});var h,f,d,p,g,v,m,y,_=!1,x=!1,b={doubleclick:\"click\",mousedrag:\"mousemove\"},w=!1,S={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:o,_handleMouseEvent:function(t,e,n){var i=this._itemEvents,r=i.native[t],s=\"mousemove\"===t,o=this._scope.tool,u=this;function l(t){return i.virtual[t]||u.responds(t)||o&&o.responds(t)}s&&a&&l(\"mousedrag\")&&(t=\"mousedrag\"),n=n||this.getEventPoint(e);var c,b=this.getBounds().contains(n),S=(c=r&&b&&u._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}))&&c.item||null,C=!1;if((c={})[t.substr(5)]=!0,r&&S!==p&&(p&&k(p,null,\"mouseleave\",e,n),S&&k(S,null,\"mouseenter\",e,n),p=S),w^b&&(k(this,null,b?\"mouseenter\":\"mouseleave\",e,n),C=!0),!b&&!c.drag||n.equals(f)||(A(this,S,s?t:\"mousemove\",e,n,f),C=!0),w=b,c.down&&b||c.up&&h){if(A(this,S,t,e,n,h),c.down){if(y=S===v&&Date.now()-m<300,d=v=S,!x&&S){for(var M=S;M&&!M.responds(\"mousedrag\");)M=M._parent;M&&(g=S)}h=n}else c.up&&(x||S!==d||(m=Date.now(),A(this,S,y?\"doubleclick\":\"click\",e,n,h),y=!1),d=g=null);C=!(w=!1)}f=n,C&&o&&(_=o._handleMouseEvent(t,e,n,c)||_),!1!==e.cancelable&&(_&&!c.move||c.down&&l(\"mouseup\"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){var r,a=this._scope,s=a.tool;function o(s){s.responds(t)&&(Vt=a,s.emit(t,r=r||new lt(t,e,n,i)))}this.isVisible()&&(o(this),s&&s.responds(t)&&o(s))},_countItemEvent:function(t,e){var n,i=(r=this._itemEvents).native,r=r.virtual;for(n in S)i[n]=(i[n]||0)+(S[n][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:M,_resetState:function(){a=s=_=w=!1,t=e=h=f=d=p=g=v=m=y=null}}}}function C(t){return(t=Q.getTarget(t)).getAttribute&&st._viewsById[t.getAttribute(\"id\")]}function M(){var t=st._focused;if(!t||!t.isVisible())for(var n=0,i=st._views.length;n<i;n++)if((t=st._views[n]).isVisible()){st._focused=e=t;break}}function T(t,e,n){t._handleMouseEvent(\"mousemove\",e,n)}function k(t,e,n,i,r,a,s){for(var o,u=!1;t&&t!==s&&!function t(n,s){if(n.responds(s)){if(o=o||new ht(s,i,r,e||n,a?r.subtract(a):null),n.emit(s,o)&&(_=!0,o.prevented&&(x=!0),o.stopped))return u=!0}else if(s=b[s])return t(n,s)}(t,n);)t=t._parent;return u}function A(t,e,n,i,r,a){return t._project.removeOn(n),x=_=!1,g&&k(g,null,n,i,r,a)||e&&e!==g&&!e.isDescendant(g)&&k(e,null,\"mousedrag\"===n?\"mousemove\":n,i,r,a,g)||k(t,g||e||t,n,i,r,a)}}),ot=st.extend({_class:\"CanvasView\",initialize:function(t,e){if(!(e instanceof u.HTMLCanvasElement)){var n=b.read(arguments,1);if(n.isZero())throw new Error(\"Cannot create CanvasView with the provided argument: \"+c.slice(arguments,1));e=vt.getCanvas(n)}var i=this._context=e.getContext(\"2d\");i.save(),this._pixelRatio=1,/^off|false$/.test(f.getAttribute(e,\"hidpi\"))||(n=u.devicePixelRatio||1,i=K.getPrefixed(i,\"backingStorePixelRatio\")||1,this._pixelRatio=n/i),st.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i,r,a=this._pixelRatio;t.base.call(this,e*a,n*a),1!==a&&(r=this._element,i=this._context,f.hasAttribute(r,\"resize\")||((r=r.style).width=e+\"px\",r.height=n+\"px\"),i.restore(),i.save(),i.scale(a,a))},getContext:function(){return this._context},getPixelSize:function t(e){var n,i,r=Vt.agent;return r&&r.firefox?n=t.base.call(this,e):(r=(i=this._context).font,i.font=e+\" serif\",n=parseFloat(i.font),i.font=r),n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var a=0,s=e.length;a<s;a++)r=Math.max(r,n.measureText(e[a]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),!(this._needsUpdate=!1)}}),ut=c.extend({_class:\"Event\",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return ct.modifiers}}),lt=ut.extend({_class:\"KeyEvent\",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return\"{ type: '\"+this.type+\"', key: '\"+this.key+\"', character: '\"+this.character+\"', modifiers: \"+this.getModifiers()+\" }\"}}),ct=new function(){var t,e,n={\"\\t\":\"tab\",\" \":\"space\",\"\\b\":\"backspace\",\"\":\"delete\",Spacebar:\"space\",Del:\"delete\",Win:\"meta\",Esc:\"escape\"},i={tab:\"\\t\",space:\" \",enter:\"\\r\"},r={},a={},s=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=Vt&&Vt.agent;return t&&t.mac?this.meta:this.control}}});function h(t){var e=t.key||t.keyIdentifier;return e=/^U\\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):\"Unidentified\"===e||e===o?String.fromCharCode(t.keyCode):e,n[e]||(1<e.length?c.hyphenate(e):e.toLowerCase())}function f(e,n,i,o){var u,l=st._focused;if((r[n]=e)?a[n]=i:delete a[n],1<n.length&&(u=c.camelize(n))in s){s[u]=e;var h=Vt&&Vt.agent;if(\"meta\"===u&&h&&h.mac)if(e)t={};else{for(var d in t)d in a&&f(!1,d,t[d],o);t=null}}else e&&t&&(t[n]=i);l&&l._handleKeyEvent(e?\"keydown\":\"keyup\",o,n,i)}return Q.add(l,{keydown:function(t){var n=h(t),r=Vt&&Vt.agent;1<n.length||r&&r.chrome&&(t.altKey||r.mac&&t.metaKey||!r.mac&&t.ctrlKey)?f(!0,n,i[n]||(1<n.length?\"\":n),t):e=n},keypress:function(t){var n,i;e&&(n=h(t),i=32<=(i=t.charCode)?String.fromCharCode(i):1<n.length?\"\":n,f(!0,n=n!==e?i.toLowerCase():n,i,t),e=null)},keyup:function(t){var e=h(t);e in a&&f(!1,e,a[e],t)}}),Q.add(u,{blur:function(t){for(var e in a)f(!1,e,a[e],t)}}),{modifiers:s,isDown:function(t){return!!r[t]}}},ht=ut.extend({_class:\"MouseEvent\",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return\"{ type: '\"+this.type+\"', point: \"+this.point+\", target: \"+this.target+(this.delta?\", delta: \"+this.delta:\"\")+\", modifiers: \"+this.getModifiers()+\" }\"}}),ft=ut.extend({_class:\"ToolEvent\",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?\"_downCount\":\"_moveCount\"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?\"downCount\":\"count\"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)n=(e=n)._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return\"{ type: \"+this.type+\", point: \"+this.getPoint()+\", count: \"+this.getCount()+\", modifiers: \"+this.getModifiers()+\" }\"}}),dt=d.extend({_class:\"Tool\",_list:\"tools\",_reference:\"tool\",_events:[\"onMouseDown\",\"onMouseUp\",\"onMouseDrag\",\"onMouseMove\",\"onActivate\",\"onDeactivate\",\"onEditOptions\",\"onKeyDown\",\"onKeyUp\"],initialize:function(t){d.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){null!=(this._minDistance=t)&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){Vt=this._scope,i.drag&&!this.responds(t)&&(t=\"mousemove\");var r=i.move||i.drag,a=this.responds(t),s=this.minDistance,o=this.maxDistance,u=!1,l=this;function c(t,e){var a=n,s=r?l._point:l._downPoint||a;if(r){if(0<=l._moveCount&&a.equals(s))return;if(s&&(null!=t||null!=e)){var o=a.subtract(s),u=o.getLength();if(u<(t||0))return;e&&(a=s.add(o.normalize(Math.min(u,e))))}l._moveCount++}return l._point=a,l._lastPoint=s||a,i.down&&(l._moveCount=-1,l._downPoint=a,l._downCount++),1}function h(){a&&(u=l.emit(t,new ft(l,t,e))||u)}if(i.down)c(),h();else if(i.up)c(null,o),h();else if(a)for(;c(s,o);)h();return u}}),pt=c.extend(h,{_class:\"Tween\",statics:{easings:new c({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(e,n,i,r,a,s){this.object=e;var o=x(a);e=\"function\"==o,this.type=e?o:\"string\"==o?a:\"linear\",this.easing=e?a:t.easings[this.type],this.duration=r,this.running=!1,this._then=null,this._startTime=null,r=n||i,this._keys=r?Object.keys(r):[],this._parsedKeys=this._parseKeys(this._keys),this._from=r&&this._getState(n),this._to=r&&this._getState(i),!1!==s&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){function e(e){return\"function\"==typeof e?e(n,t):e}1<=t&&(t=1,this.running=!1);for(var n=this.easing(t),i=this._keys,r=0,a=i&&i.length;r<a;r++){var s=i[r],o=e(this._from[s]),u=e(this._to[s]);o=o&&u&&o.__add&&u.__add?u.__subtract(o).__multiply(n).__add(o):(u-o)*n+o,this._setProperty(this._parsedKeys[s],o)}this.responds(\"update\")&&this.emit(\"update\",new c({progress:t,factor:n})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},i=0,r=e.length;i<r;i++){var a,s=e[i],o=this._parsedKeys[s],u=this._getProperty(o);t?(a=this._resolveValue(u,t[s]),this._setProperty(o,a),a=(a=this._getProperty(o))&&a.clone?a.clone():a,this._setProperty(o,u)):a=u&&u.clone?u.clone():u,n[s]=a}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\\-\\*\\/]=/)?this._calculate(t,n[0],e[1]):e}if(\"string\"==typeof e&&(n=e.match(/^[+\\-*/]=(.*)/)))return n=JSON.parse(n[1].replace(/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g,'\"$2\": ')),this._calculate(t,e[0],n)}return e},_calculate:function(t,e,n){return Vt.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n],a=r.replace(/\\.([^.]*)/g,\"/$1\").replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g,\"/$1\");e[r]=a.split(\"/\")}return e},_getProperty:function(t,e){for(var n=this.object,i=0,r=t.length-(e||0);i<r&&n;i++)n=n[t[i]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}}),gt=function(t){var e=new s.XMLHttpRequest;return e.open((t.method||\"get\").toUpperCase(),t.url,c.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,i='Could not load \"'+t.url+'\" (Status: '+n+\")\";if(!t.onError)throw new Error(i);t.onError(i,n)},e.send(null)},vt=c.exports.CanvasProvider={canvases:[],getCanvas:function(t,e){if(!u)return null;var n,i=!0;\"object\"==x(t)&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=l.createElement(\"canvas\"),i=!1);var r=n.getContext(\"2d\");if(!r)throw new Error(\"Canvas \"+n+\" is unable to provide a 2D context.\");return n.width===t&&n.height===e?i&&r.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),r.save(),n},getContext:function(t,e){return(e=this.getCanvas(t,e))?e.getContext(\"2d\"):null},release:function(t){(t=t&&t.canvas?t.canvas:t)&&t.getContext&&(t.getContext(\"2d\").restore(),this.canvases.push(t))}},mt=new function(){var t,e,n,i,r,a,s,o,u,l,h,f=Math.min,d=Math.max,p=Math.abs;function g(t,e,n){return.2989*t+.587*e+.114*n}function v(t,e,n,i){var r,a=i-g(t,e,n);i=g(u=t+a,l=e+a,h=n+a),n=f(u,l,h),a=d(u,l,h),n<0&&(u=i+(u-i)*i/(r=i-n),l=i+(l-i)*i/r,h=i+(h-i)*i/r),255<a&&(u=i+(u-i)*(r=255-i)/(a-=i),l=i+(l-i)*r/a,h=i+(h-i)*r/a)}function m(t,e,n){return d(t,e,n)-f(t,e,n)}function y(t,e,n,i){var r=[t,e,n],a=d(t,e,n);n=f(t,e,n),e=0===f(n=n===t?0:n===e?1:2,a=a===t?0:a===e?1:2)?1===d(n,a)?2:1:0,r[a]>r[n]?(r[e]=(r[e]-r[n])*i/(r[a]-r[n]),r[a]=i):r[e]=r[a]=0,r[n]=0,u=r[0],l=r[1],h=r[2]}var _={multiply:function(){u=r*t/255,l=a*e/255,h=s*n/255},screen:function(){u=r+t-r*t/255,l=a+e-a*e/255,h=s+n-s*n/255},overlay:function(){u=r<128?2*r*t/255:255-2*(255-r)*(255-t)/255,l=a<128?2*a*e/255:255-2*(255-a)*(255-e)/255,h=s<128?2*s*n/255:255-2*(255-s)*(255-n)/255},\"soft-light\":function(){var i=t*r/255;u=i+r*(255-(255-r)*(255-t)/255-i)/255,l=(i=e*a/255)+a*(255-(255-a)*(255-e)/255-i)/255,h=(i=n*s/255)+s*(255-(255-s)*(255-n)/255-i)/255},\"hard-light\":function(){u=t<128?2*t*r/255:255-2*(255-t)*(255-r)/255,l=e<128?2*e*a/255:255-2*(255-e)*(255-a)/255,h=n<128?2*n*s/255:255-2*(255-n)*(255-s)/255},\"color-dodge\":function(){u=0===r?0:255===t?255:f(255,255*r/(255-t)),l=0===a?0:255===e?255:f(255,255*a/(255-e)),h=0===s?0:255===n?255:f(255,255*s/(255-n))},\"color-burn\":function(){u=255===r?255:0===t?0:d(0,255-255*(255-r)/t),l=255===a?255:0===e?0:d(0,255-255*(255-a)/e),h=255===s?255:0===n?0:d(0,255-255*(255-s)/n)},darken:function(){u=r<t?r:t,l=a<e?a:e,h=s<n?s:n},lighten:function(){u=t<r?r:t,l=e<a?a:e,h=n<s?s:n},difference:function(){(u=r-t)<0&&(u=-u),(l=a-e)<0&&(l=-l),(h=s-n)<0&&(h=-h)},exclusion:function(){u=r+t*(255-r-r)/255,l=a+e*(255-a-a)/255,h=s+n*(255-s-s)/255},hue:function(){y(t,e,n,m(r,a,s)),v(u,l,h,g(r,a,s))},saturation:function(){y(r,a,s,m(t,e,n)),v(u,l,h,g(r,a,s))},luminosity:function(){v(r,a,s,g(t,e,n))},color:function(){v(t,e,n,g(r,a,s))},add:function(){u=f(r+t,255),l=f(a+e,255),h=f(s+n,255)},subtract:function(){u=d(r-t,0),l=d(a-e,0),h=d(s-n,0)},average:function(){u=(r+t)/2,l=(a+e)/2,h=(s+n)/2},negation:function(){u=255-p(255-t-r),l=255-p(255-e-a),h=255-p(255-n-s)}},x=this.nativeModes=c.each([\"source-over\",\"source-in\",\"source-out\",\"source-atop\",\"destination-over\",\"destination-in\",\"destination-out\",\"destination-atop\",\"lighter\",\"darker\",\"copy\",\"xor\"],(function(t){this[t]=!0}),{}),b=vt.getContext(1,1);b&&(c.each(_,(function(t,e){var n=\"darken\"===e,i=!1;b.save();try{b.fillStyle=n?\"#300\":\"#a00\",b.fillRect(0,0,1,1),b.globalCompositeOperation=e,b.globalCompositeOperation===e&&(b.fillStyle=n?\"#a00\":\"#300\",b.fillRect(0,0,1,1),i=b.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(t){}b.restore(),x[e]=i})),vt.release(b)),this.process=function(c,f,d,p,g){var v=f.canvas,m=\"normal\"===c;if(m||x[c])d.save(),d.setTransform(1,0,0,1,0,0),d.globalAlpha=p,m||(d.globalCompositeOperation=c),d.drawImage(v,g.x,g.y),d.restore();else{var y=_[c];if(y){for(var b=(c=d.getImageData(g.x,g.y,v.width,v.height)).data,w=f.getImageData(0,0,v.width,v.height).data,S=0,C=b.length;S<C;S+=4){t=w[S],r=b[S],e=w[S+1],a=b[S+1],n=w[S+2],s=b[S+2],i=w[S+3],o=b[S+3],y();var M=i*p/255,T=1-M;b[S]=M*u+T*r,b[S+1]=M*l+T*a,b[S+2]=M*h+T*s,b[S+3]=i*p+T*o}d.putImageData(c,g.x,g.y)}}}},yt=new function(){var t=\"http://www.w3.org/2000/svg\",e=\"http://www.w3.org/2000/xmlns\",n=\"http://www.w3.org/1999/xlink\",i={href:n,xlink:e,xmlns:e+\"/\",\"xmlns:xlink\":e+\"/\"};function r(t,e,n){for(var r in e){var a=e[r],s=i[r];\"number\"==typeof a&&n&&(a=n.number(a)),s?t.setAttributeNS(s,r,a):t.setAttribute(r,a)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,i){return r(l.createElementNS(t,e),n,i)},get:function(t,e){var n=i[e];return\"null\"===(e=n?t.getAttributeNS(n,e):t.getAttribute(e))?null:e},set:r}},_t=c.each({fillColor:[\"fill\",\"color\"],fillRule:[\"fill-rule\",\"string\"],strokeColor:[\"stroke\",\"color\"],strokeWidth:[\"stroke-width\",\"number\"],strokeCap:[\"stroke-linecap\",\"string\"],strokeJoin:[\"stroke-linejoin\",\"string\"],strokeScaling:[\"vector-effect\",\"lookup\",{true:\"none\",false:\"non-scaling-stroke\"},function(t,e){return!e&&(t instanceof j||t instanceof P||t instanceof H)}],miterLimit:[\"stroke-miterlimit\",\"number\"],dashArray:[\"stroke-dasharray\",\"array\"],dashOffset:[\"stroke-dashoffset\",\"number\"],fontFamily:[\"font-family\",\"string\"],fontWeight:[\"font-weight\",\"string\"],fontSize:[\"font-size\",\"number\"],justification:[\"text-anchor\",\"lookup\",{left:\"start\",center:\"middle\",right:\"end\"}],opacity:[\"opacity\",\"number\"],blendMode:[\"mix-blend-mode\",\"style\"]},(function(t,e){var n=c.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&c.each(i,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:\"get\"+n,set:\"set\"+n}}),{});function xt(t,e,n){var i,r,a=new c,s=t.getTranslation();return e&&(t.isInvertible()?(i=(t=t._shiftless())._inverseTransform(s),s=null):i=new y,a[n?\"cx\":\"x\"]=i.x,a[n?\"cy\":\"y\"]=i.y),t.isIdentity()||((r=t.decompose())?(e=[],n=r.rotation,i=r.scaling,r=r.skewing,s&&!s.isZero()&&e.push(\"translate(\"+$.point(s)+\")\"),n&&e.push(\"rotate(\"+$.number(n)+\")\"),v.isZero(i.x-1)&&v.isZero(i.y-1)||e.push(\"scale(\"+$.point(i)+\")\"),r.x&&e.push(\"skewX(\"+$.number(r.x)+\")\"),r.y&&e.push(\"skewY(\"+$.number(r.y)+\")\"),a.transform=e.join(\" \")):a.transform=\"matrix(\"+t.getValues().join(\",\")+\")\"),a}function bt(t,e){for(var n=xt(t._matrix),i=t._children,r=yt.create(\"g\",n,$),a=0,s=i.length;a<s;a++){var o,u=i[a],l=Tt(u,e);l&&(u.isClipMask()?((o=yt.create(\"clipPath\")).appendChild(l),Ct(u,o,\"clip\"),yt.set(r,{\"clip-path\":\"url(#\"+o.id+\")\"})):r.appendChild(l))}return r}function wt(t){var e,n=t._type,i=t._radius,r=xt(t._matrix,!0,\"rectangle\"!==n);return\"rectangle\"===n&&(n=\"rect\",t=(e=t._size).width,e=e.height,r.x-=t/2,r.y-=e/2,r.width=t,r.height=e,i.isZero()&&(i=null)),i&&(\"circle\"===n?r.r=i:(r.rx=i.width,r.ry=i.height)),yt.create(n,r,$)}function St(t,e){return tt=tt||{ids:{},svgs:{}},t&&tt.svgs[e+\"-\"+(t._id||t.__id||(t.__id=m.get(\"svg\")))]}function Ct(t,e,n){tt||St();var i=tt.ids[n]=(tt.ids[n]||0)+1;e.id=n+\"-\"+i,tt.svgs[n+\"-\"+(t._id||t.__id)]=e}function Mt(t,e){var n=t,i=null;if(tt){for(var r in n=\"svg\"===t.nodeName.toLowerCase()&&t,tt.svgs)i||(n||(n=yt.create(\"svg\")).appendChild(t),i=n.insertBefore(yt.create(\"defs\"),n.firstChild)),i.appendChild(tt.svgs[r]);tt=null}return e.asString?(new s.XMLSerializer).serializeToString(n):n}function Tt(t,e,n){var i=et[t._class],r=i&&i(t,e);return r&&((i=e.onExport)&&(r=i(t,r,e)||r),(e=JSON.stringify(t._data))&&\"{}\"!==e&&\"null\"!==e&&r.setAttribute(\"data-paper-data\",e)),r&&function(t,e,n){var i={},r=!n&&t.getParent(),a=[];return null!=t._name&&(i.id=t._name),c.each(_t,(function(e){var n=e.get,s=e.type,o=t[n]();(e.exportFilter?!e.exportFilter(t,o):r&&c.equals(r[n](),o))||(\"color\"!==s||null==o||(n=o.getAlpha())<1&&(i[e.attribute+\"-opacity\"]=n),\"style\"===s?a.push(e.attribute+\": \"+o):i[e.attribute]=null==o?\"none\":\"color\"===s?o.gradient?function(t){if(!(o=St(t,\"color\"))){var e,n,i=t.getGradient(),r=i._radial,a=t.getOrigin(),s=t.getDestination();r?(e={cx:a.x,cy:a.y,r:a.getDistance(s)},(n=t.getHighlight())&&(e.fx=n.x,e.fy=n.y)):e={x1:a.x,y1:a.y,x2:s.x,y2:s.y},e.gradientUnits=\"userSpaceOnUse\";for(var o=yt.create((r?\"radial\":\"linear\")+\"Gradient\",e,$),u=i._stops,l=0,c=u.length;l<c;l++){var h,f=(h=u[l])._color,d=f.getAlpha();e={offset:null==(h=h._offset)?l/(c-1):h},f&&(e[\"stop-color\"]=f.toCSS(!0)),d<1&&(e[\"stop-opacity\"]=d),o.appendChild(yt.create(\"stop\",e,$))}Ct(t,o,\"color\")}return\"url(#\"+o.id+\")\"}(o):o.toCSS(!0):\"array\"===s?o.join(\",\"):\"lookup\"===s?e.toSVG[o]:o)})),a.length&&(i.style=a.join(\";\")),1===i.opacity&&delete i.opacity,t._visible||(i.visibility=\"hidden\"),yt.set(e,i,$)}(t,r,n)}function kt(t){return $=new g((t=t||{}).precision),t}function At(t,e,n,i,r,a){return n=null==(a=yt.get(t,e)||a)?i?null:n?\"\":0:n?a:parseFloat(a),/%\\s*$/.test(a)?n/100*(r?1:nt[/x|^width/.test(e)?\"width\":\"height\"]):n}function Et(t,e,n,i,r,a,s){return e=At(t,e||\"x\",!1,i,r,a),n=At(t,n||\"y\",!1,i,r,s),!i||null!=e&&null!=n?new y(e,n):null}function Ot(t,e,n,i,r){return e=At(t,e||\"width\",!1,i,r),n=At(t,n||\"height\",!1,i,r),!i||null!=e&&null!=n?new b(e,n):null}function Pt(t,e,n){return\"none\"===t?null:\"number\"===e?parseFloat(t):\"array\"===e?t?t.split(/[\\s,]+/g).map(parseFloat):[]:\"color\"===e?zt(t)||t:\"lookup\"===e?n[t]:t}function It(t,e,n,i){var r=t.childNodes,a=\"clippath\"===e,s=\"defs\"===e,o=new E,u=o._project,l=(e=u._currentStyle,[]);if(a||s||(o=Bt(o,t,i),u._currentStyle=o._style.clone()),i)for(var c=t.querySelectorAll(\"defs\"),h=0,f=c.length;h<f;h++)jt(c[h],n,!1);for(h=0,f=r.length;h<f;h++){var d,p=r[h];1!==p.nodeType||/^defs$/i.test(p.nodeName)||!(d=jt(p,n,!1))||d instanceof D||l.push(d)}return o.addChildren(l),a&&(o=Bt(o.reduce(),t,i)),u._currentStyle=e,(a||s)&&(o.remove(),o=null),o}function Lt(t,e){for(var n=t.getAttribute(\"points\").match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),i=[],r=0,a=n.length;r<a;r+=2)i.push(new y(parseFloat(n[r]),parseFloat(n[r+1])));return t=new U(i),\"polygon\"===e&&t.closePath(),t}function Dt(t,e){var n;if(e=\"radialgradient\"===e,h=(At(t,\"href\",!0)||\"\").substring(1))(n=it[h].getGradient())._radial^e&&((n=n.clone())._radial=e);else{for(var i=t.childNodes,r=[],a=0,s=i.length;a<s;a++){var o=i[a];1===o.nodeType&&r.push(Bt(new J,o))}n=new q(r,e)}var u,l,c,h=\"userSpaceOnUse\"!==At(t,\"gradientUnits\",!0);return e?(l=(u=Et(t,\"cx\",\"cy\",!1,h,\"50%\",\"50%\")).add(At(t,\"r\",!1,!1,h,\"50%\"),0),c=Et(t,\"fx\",\"fy\",!0,h)):(u=Et(t,\"x1\",\"y1\",!1,h,\"0%\",\"0%\"),l=Et(t,\"x2\",\"y2\",!1,h,\"100%\",\"0%\")),Bt(new Y(n,u,l,c),t)._scaleToBounds=h,null}function Rt(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||\"\").split(/\\)\\s*/g),a=new M,s=0,o=r.length;s<o;s++){if(!(l=r[s]))break;for(var u=l.split(/\\(\\s*/),l=u[0],c=u[1].split(/[\\s,]+/g),h=0,f=c.length;h<f;h++)c[h]=parseFloat(c[h]);switch(l){case\"matrix\":a.append(new M(c[0],c[1],c[2],c[3],c[4],c[5]));break;case\"rotate\":a.rotate(c[0],c[1]||0,c[2]||0);break;case\"translate\":a.translate(c[0],c[1]||0);break;case\"scale\":a.scale(c);break;case\"skewX\":a.skew(c[0],0);break;case\"skewY\":a.skew(0,c[0])}}t.transform(a)}}function Nt(t,e,n){(n=t[n=\"fill-opacity\"===n?\"getFillColor\":\"getStrokeColor\"]&&t[n]())&&n.setAlpha(parseFloat(e))}function Ft(t,e,n){var i;return!(i=(i=t.attributes[e])&&i.value)&&t.style&&(e=c.camelize(e),(i=t.style[e])||n.node[e]===n.parent[e]||(i=n.node[e])),i?\"none\"===i?null:i:o}function Bt(t,e,n){var i=e.parentNode,r={node:K.getStyles(e)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&K.getStyles(i)||{}};return c.each(at,(function(n,i){var a=Ft(e,i,r);t=a!==o&&n(t,a,i,e,r)||t})),t}function zt(t){return(t=(t=(t=t&&t.match(/\\((?:[\"'#]*)([^\"')]+)/))&&t[1])&&it[u?t.replace(u.location.href.split(\"#\")[0]+\"#\",\"\"):t])&&t._scaleToBounds&&((t=t.clone())._scaleToBounds=!0),t}function jt(t,e,n){var i,r,a,s=\"#document\"!==(p=t.nodeName.toLowerCase()),o=l.body;n&&s&&(nt=Vt.getView().getSize(),nt=Ot(t,null,null,!0)||nt,i=yt.create(\"svg\",{style:\"stroke-width: 1px; stroke-miterlimit: 10\"}),r=t.parentNode,a=t.nextSibling,i.appendChild(t),o.appendChild(i));var u=Vt.settings,h=u.applyMatrix,f=u.insertItems;u.applyMatrix=!1,u.insertItems=!1;var d=rt[p],p=d&&d(t,p,e,n)||null;return u.insertItems=f,u.applyMatrix=h,p&&(!s||p instanceof E||(p=Bt(p,t,n)),u=e.onImport,s=s&&t.getAttribute(\"data-paper-data\"),u&&(p=u(t,p,e)||p),e.expandShapes&&p instanceof P&&(p.remove(),p=p.toPath()),s&&(p._data=JSON.parse(s))),i&&(o.removeChild(i),r&&(a?r.insertBefore(t,a):r.appendChild(t))),n&&(it={},p&&c.pick(e.applyMatrix,h)&&p.matrix.apply(!0,!0)),p}function Ut(t,e,n){if(!t)return null;e=\"function\"==typeof e?{onLoad:e}:e||{};var i=Vt,r=null;function a(a){try{var l=\"object\"==x(a)?a:(new s.DOMParser).parseFromString(a.trim(),\"image/svg+xml\");if(!l.nodeName)throw l=null,new Error(\"Unsupported SVG source: \"+t);Vt=i,r=jt(l,e,!0),e&&!1===e.insert||n._insertItem(o,r);var c=e.onLoad;c&&c(r,a)}catch(a){u(a)}}function u(t,n){var i=e.onError;if(!i)throw new Error(t);i(t,n)}if(\"string\"!=typeof t||/^[\\s\\S]*</.test(t)){if(\"undefined\"!=typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){a(c.result)},c.onerror=function(){u(c.error)},c.readAsText(t)}a(t)}else{var h=l.getElementById(t);h?a(h):gt({url:t,async:!0,onLoad:a,onError:u})}return r}et={Group:bt,Layer:bt,Raster:function(t,e){var n=xt(t._matrix,!0),i=t.getSize(),r=t.getImage();return n.x-=i.width/2,n.y-=i.height/2,n.width=i.width,n.height=i.height,n.href=0==e.embedImages&&r&&r.src||t.toDataURL(),yt.create(\"image\",n,$)},Path:function(t,e){var n=e.matchShapes;if(n){var i=t.toShape(!1);if(i)return wt(i)}var r=t._segments,a=r.length,s=xt(t._matrix);if(n&&2<=a&&!t.hasHandles())if(2<a){for(var o=t._closed?\"polygon\":\"polyline\",u=[],l=0;l<a;l++)u.push($.point(r[l]._point));s.points=u.join(\" \")}else o=\"line\",i=r[0]._point,n=r[1]._point,s.set({x1:i.x,y1:i.y,x2:n.x,y2:n.y});else o=\"path\",s.d=t.getPathData(null,e.precision);return yt.create(o,s,$)},Shape:wt,CompoundPath:function(t,e){var n=xt(t._matrix);return(e=t.getPathData(null,e.precision))&&(n.d=e),yt.create(\"path\",n,$)},SymbolItem:function(t,e){var n=xt(t._matrix,!0),i=t._definition,r=St(i,\"symbol\"),a=i._item;return t=a.getStrokeBounds(),r||((r=yt.create(\"symbol\",{viewBox:$.rectangle(t)})).appendChild(Tt(a,e)),Ct(i,r,\"symbol\")),n.href=\"#\"+r.id,n.x+=t.x,n.y+=t.y,n.width=t.width,n.height=t.height,n.overflow=\"visible\",yt.create(\"use\",n,$)},PointText:function(t){var e=yt.create(\"text\",xt(t._matrix,!0),$);return e.textContent=t._content,e}},A.inject({exportSVG:function(t){return Mt(Tt(this,t=kt(t),!0),t)}}),k.inject({exportSVG:function(t){t=kt(t);var e=this._children,n=this.getView(),i=c.pick(t.bounds,\"view\"),r=(r=t.matrix||\"view\"===i&&n._matrix)&&M.read([r]);n=\"view\"===i?new S([0,0],n.getViewSize()):\"content\"===i?A._getBounds(e,r,{stroke:!0}).rect:S.read([i],0,{readNull:!0}),i={version:\"1.1\",xmlns:yt.svg,\"xmlns:xlink\":yt.xlink},n&&(i.width=n.width,i.height=n.height,(n.x||0===n.x||n.y||0===n.y)&&(i.viewBox=$.rectangle(n)));var a=i=yt.create(\"svg\",i,$);r&&!r.isIdentity()&&(a=i.appendChild(yt.create(\"g\",xt(r),$)));for(var s=0,o=e.length;s<o;s++)a.appendChild(Tt(e[s],t,!0));return Mt(i,t)}}),it={},rt={\"#document\":function(t,e,n,i){for(var r=t.childNodes,a=0,s=r.length;a<s;a++){var o=r[a];if(1===o.nodeType)return jt(o,n,i)}},g:It,svg:It,clippath:It,polygon:Lt,polyline:Lt,path:function(t){return j.create(t.getAttribute(\"d\"))},lineargradient:Dt,radialgradient:Dt,image:function(t){var e=new I(At(t,\"href\",!0));return e.on(\"load\",(function(){var e=Ot(t);this.setSize(e),e=Et(t).add(e.divide(2)),this._matrix.append((new M).translate(e))})),e},symbol:function(t,e,n,i){return new D(It(t,e,n,i),!0)},defs:It,use:function(t){var e=(At(t,\"href\",!0)||\"\").substring(1);return e=it[e],t=Et(t),e?e instanceof D?e.place(t):e.clone().translate(t):null},circle:function(t){return new P.Circle(Et(t,\"cx\",\"cy\"),At(t,\"r\"))},ellipse:function(t){return new P.Ellipse({center:Et(t,\"cx\",\"cy\"),radius:Ot(t,\"rx\",\"ry\")})},rect:function(t){return new P.Rectangle(new S(Et(t),Ot(t)),Ot(t,\"rx\",\"ry\"))},line:function(t){return new U.Line(Et(t,\"x1\",\"y1\"),Et(t,\"x2\",\"y2\"))},text:function(t){var e=new X(Et(t).add(Et(t,\"dx\",\"dy\")));return e.setContent(t.textContent.trim()||\"\"),e},switch:It},at=c.set(c.each(_t,(function(t){this[t.attribute]=function(e,n){e[t.set]&&(e[t.set](Pt(n,t.type,t.fromSVG)),\"color\"!==t.type||(n=e[t.get]())&&n._scaleToBounds&&(e=e.getBounds(),n.transform((new M).translate(e.getPoint()).scale(e.getSize()))))}}),{}),{id:function(t,e){(it[e]=t).setName&&t.setName(e)},\"clip-path\":function(t,e){if(e=zt(e)){if((e=e.clone()).setClipMask(!0),!(t instanceof E))return new E(e,t);t.insertChild(0,e)}},gradientTransform:Rt,transform:Rt,\"fill-opacity\":Nt,\"stroke-opacity\":Nt,visibility:function(t,e){t.setVisible&&t.setVisible(\"visible\"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},\"stop-color\":function(t,e){t.setColor&&t.setColor(e)},\"stop-opacity\":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){var n;t.setOffset&&(n=e.match(/(.*)%$/),t.setOffset(n?n[1]/100:parseFloat(e)))},viewBox:function(t,e,n,i,r){var a,s,o=new S(Pt(e,\"array\"));e=Ot(i,null,null,!0),t instanceof E?(s=e?e.divide(o.getSize()):1,a=(new M).scale(s).translate(o.getPoint().negate()),s=t):t instanceof D&&(e&&o.setSize(e),s=t._item),s&&(\"visible\"!==Ft(i,\"overflow\",r)&&((o=new P.Rectangle(o)).setClipMask(!0),s.addChild(o)),a&&s.transform(a))}}),A.inject({importSVG:function(t,e){return Ut(t,e,this)}}),k.inject({importSVG:function(t,e){return this.activate(),Ut(t,e,this)}}),c.exports.PaperScript=function(){var t,e,h=this,d=h.acorn;if(!d)try{d=n(1234)}catch(t){}function p(t,e){return(h.acorn||d).parse(t,e)}d||(d=t=m={},e=function(t){\"use strict\";var e,n,i,r;t.version=\"0.5.0\",t.parse=function(t,r){return n=String(t),i=n.length,s(r),Xt(),function(t){m=y=o,e.locations&&(_=new Ht),x=w=null,b=[],Zt();var n=t||ue(),i=!0;for(t||(n.body=[]);f!==P;){var r=xe();n.body.push(r),i&&he(r)&&ae(!0),i=!1}return ce(n,\"Program\")}(e.program)};var a=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function s(t){for(var n in e=t||{},a)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=a[n]);r=e.sourceFile||null}var o,u,l,c,h,f,d,p,g,v,m,y,_,x,b,w,S=t.getLineInfo=function(t,e){for(var n=1,i=0;;){Vt.lastIndex=i;var r=Vt.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};function C(t,e){var i=S(n,t);throw e+=\" (\"+i.line+\":\"+i.column+\")\",(e=new SyntaxError(e)).pos=t,e.loc=i,e.raisedAt=o,e}t.tokenize=function(t,r){n=String(t),i=n.length,s(r),Xt();var a={};function m(t){return y=l,Zt(t),a.start=u,a.end=l,a.startLoc=c,a.endLoc=h,a.type=f,a.value=d,a}return m.jumpTo=function(t,i){var r;if(o=t,e.locations)for(g=1,v=Vt.lastIndex=0;(r=Vt.exec(n))&&r.index<t;)++g,v=r.index+r[0].length;p=i,Jt()},m};var M,T=[],k={type:\"num\"},A={type:\"regexp\"},E={type:\"string\"},O={type:\"name\"},P={type:\"eof\"},I={keyword:\"break\"},L={keyword:\"case\",beforeExpr:!0},D={keyword:\"catch\"},R={keyword:\"continue\"},N={keyword:\"debugger\"},F={keyword:\"default\"},B={keyword:\"do\",isLoop:!0},z={keyword:\"else\",beforeExpr:!0},j={keyword:\"finally\"},U={keyword:\"for\",isLoop:!0},V={keyword:\"function\"},W={keyword:\"if\"},G={keyword:\"return\",beforeExpr:!0},H={keyword:\"switch\"},X={keyword:\"throw\",beforeExpr:!0},Y={keyword:\"try\"},q={keyword:\"var\"},J={keyword:\"while\",isLoop:!0},Z={keyword:\"with\"},K={keyword:\"new\",beforeExpr:!0},Q={keyword:\"this\"},$={keyword:\"null\",atomValue:null},tt={keyword:\"true\",atomValue:!0},et={keyword:\"false\",atomValue:!1},nt={keyword:\"in\",binop:7,beforeExpr:!0},it={break:I,case:L,catch:D,continue:R,debugger:N,default:F,do:B,else:z,finally:j,for:U,function:V,if:W,return:G,switch:H,throw:X,try:Y,var:q,while:J,with:Z,null:$,true:tt,false:et,new:K,in:nt,instanceof:{keyword:\"instanceof\",binop:7,beforeExpr:!0},this:Q,typeof:{keyword:\"typeof\",prefix:!0,beforeExpr:!0},void:{keyword:\"void\",prefix:!0,beforeExpr:!0},delete:{keyword:\"delete\",prefix:!0,beforeExpr:!0}},rt={type:\"[\",beforeExpr:!0},at={type:\"]\"},st={type:\"{\",beforeExpr:!0},ot={type:\"}\"},ut={type:\"(\",beforeExpr:!0},lt={type:\")\"},ct={type:\",\",beforeExpr:!0},ht={type:\";\",beforeExpr:!0},ft={type:\":\",beforeExpr:!0},dt={type:\".\"},pt={type:\"?\",beforeExpr:!0},gt={binop:10,beforeExpr:!0},vt={isAssign:!0,beforeExpr:!0},mt={isAssign:!0,beforeExpr:!0},yt={postfix:!0,prefix:!0,isUpdate:!0},_t={prefix:!0,beforeExpr:!0},xt={binop:1,beforeExpr:!0},bt={binop:2,beforeExpr:!0},wt={binop:3,beforeExpr:!0},St={binop:4,beforeExpr:!0},Ct={binop:5,beforeExpr:!0},Mt={binop:6,beforeExpr:!0},Tt={binop:7,beforeExpr:!0},kt={binop:8,beforeExpr:!0},At={binop:9,prefix:!0,beforeExpr:!0},Et={binop:10,beforeExpr:!0};for(M in t.tokTypes={bracketL:rt,bracketR:at,braceL:st,braceR:ot,parenL:ut,parenR:lt,comma:ct,semi:ht,colon:ft,dot:dt,question:pt,slash:gt,eq:vt,name:O,eof:P,num:k,regexp:A,string:E},it)t.tokTypes[\"_\"+M]=it[M];function Ot(t){t=t.split(\" \");var e=\"\",n=[];t:for(var i=0;i<t.length;++i){for(var r=0;r<n.length;++r)if(n[r][0].length==t[i].length){n[r].push(t[i]);continue t}n.push([t[i]])}function a(t){if(1==t.length)return e+=\"return str === \"+JSON.stringify(t[0])+\";\";e+=\"switch(str){\";for(var n=0;n<t.length;++n)e+=\"case \"+JSON.stringify(t[n])+\":\";e+=\"return true}return false;\"}if(3<n.length){for(n.sort((function(t,e){return e.length-t.length})),e+=\"switch(str.length){\",i=0;i<n.length;++i){var s=n[i];e+=\"case \"+s[0].length+\":\",a(s)}e+=\"}\"}else a(t);return new Function(\"str\",e)}var Pt,It=Ot(\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\"),Lt=Ot(\"class enum extends super const export import\"),Dt=Ot(\"implements interface let package private protected public static yield\"),Rt=Ot(\"eval arguments\"),Nt=Ot(\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\"),Ft=/[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/,Bt=\"ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ\",zt=new RegExp(\"[\"+Bt+\"]\"),jt=new RegExp(\"[\"+Bt+\"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]\"),Ut=/[\\n\\r\\u2028\\u2029]/,Vt=/\\r\\n|[\\n\\r\\u2028\\u2029]/g,Wt=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||170<=t&&zt.test(String.fromCharCode(t)))},Gt=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||170<=t&&jt.test(String.fromCharCode(t))))};function Ht(){this.line=g,this.column=o-v}function Xt(){g=1,o=v=0,p=!0,Jt()}function Yt(t,n){l=o,e.locations&&(h=new Ht),f=t,Jt(),d=n,p=t.beforeExpr}function qt(){for(var t=o,r=e.onComment&&e.locations&&new Ht,a=n.charCodeAt(o+=2);o<i&&10!==a&&13!==a&&8232!==a&&8233!==a;)++o,a=n.charCodeAt(o);e.onComment&&e.onComment(!1,n.slice(t+2,o),t,o,r,e.locations&&new Ht)}function Jt(){for(;o<i;){var t,r=n.charCodeAt(o);if(32===r)++o;else if(13===r)++o,10===(t=n.charCodeAt(o))&&++o,e.locations&&(++g,v=o);else if(10===r||8232===r||8233===r)++o,e.locations&&(++g,v=o);else if(8<r&&r<14)++o;else if(47===r)if(42===(t=n.charCodeAt(o+1)))!function(){var t,i=e.onComment&&e.locations&&new Ht,r=o,a=n.indexOf(\"*/\",o+=2);if(-1===a&&C(o-2,\"Unterminated comment\"),o=a+2,e.locations)for(Vt.lastIndex=r;(t=Vt.exec(n))&&t.index<o;)++g,v=t.index+t[0].length;e.onComment&&e.onComment(!0,n.slice(r+2,a),r,o,i,e.locations&&new Ht)}();else{if(47!==t)break;qt()}else if(160===r)++o;else{if(!(5760<=r&&Ft.test(String.fromCharCode(r))))break;++o}}}function Zt(t){if(t?o=u+1:u=o,e.locations&&(c=new Ht),t)return Qt();if(i<=o)return Yt(P);var r=n.charCodeAt(o);if(Wt(r)||92===r)return ie();if(t=function(t){switch(t){case 46:return 48<=(h=n.charCodeAt(o+1))&&h<=57?te(!0):(++o,Yt(dt));case 40:return++o,Yt(ut);case 41:return++o,Yt(lt);case 59:return++o,Yt(ht);case 44:return++o,Yt(ct);case 91:return++o,Yt(rt);case 93:return++o,Yt(at);case 123:return++o,Yt(st);case 125:return++o,Yt(ot);case 58:return++o,Yt(ft);case 63:return++o,Yt(pt);case 48:var r=n.charCodeAt(o+1);if(120===r||88===r)return function(){o+=2;var t=$t(16);return null==t&&C(u+2,\"Expected hexadecimal number\"),Wt(n.charCodeAt(o))&&C(o,\"Identifier directly after number\"),Yt(k,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return te(!1);case 34:case 39:return function(t){o++;for(var r=\"\";;){i<=o&&C(u,\"Unterminated string constant\");var a=n.charCodeAt(o);if(a===t)return++o,Yt(E,r);if(92===a){a=n.charCodeAt(++o);var s=/^[0-7]+/.exec(n.slice(o,o+3));for(s=s&&s[0];s&&255<parseInt(s,8);)s=s.slice(0,-1);if(++o,s=\"0\"===s?null:s)w&&C(o-2,\"Octal literal in strict mode\"),r+=String.fromCharCode(parseInt(s,8)),o+=s.length-1;else switch(a){case 110:r+=\"\\n\";break;case 114:r+=\"\\r\";break;case 120:r+=String.fromCharCode(ee(2));break;case 117:r+=String.fromCharCode(ee(4));break;case 85:r+=String.fromCharCode(ee(8));break;case 116:r+=\"\\t\";break;case 98:r+=\"\\b\";break;case 118:r+=\"\\v\";break;case 102:r+=\"\\f\";break;case 48:r+=\"\\0\";break;case 13:10===n.charCodeAt(o)&&++o;case 10:e.locations&&(v=o,++g);break;default:r+=String.fromCharCode(a)}}else 13!==a&&10!==a&&8232!==a&&8233!==a||C(u,\"Unterminated string constant\"),r+=String.fromCharCode(a),++o}}(t);case 47:return c=n.charCodeAt(o+1),p?(++o,Qt()):61===c?Kt(mt,2):Kt(gt,1);case 37:case 42:return 61===n.charCodeAt(o+1)?Kt(mt,2):Kt(Et,1);case 124:case 38:return r=t,(c=n.charCodeAt(o+1))===r?Kt(124===r?xt:bt,2):61===c?Kt(mt,2):Kt(124===r?wt:Ct,1);case 94:return 61===n.charCodeAt(o+1)?Kt(mt,2):Kt(St,1);case 43:case 45:return s=t,(l=n.charCodeAt(o+1))===s?45==l&&62==n.charCodeAt(o+2)&&Ut.test(n.slice(y,o))?(o+=3,qt(),Jt(),Zt()):Kt(yt,2):61===l?Kt(mt,2):Kt(At,1);case 60:case 62:return s=t,a=1,(l=n.charCodeAt(o+1))===s?(a=62===s&&62===n.charCodeAt(o+2)?3:2,61===n.charCodeAt(o+a)?Kt(mt,a+1):Kt(kt,a)):33==l&&60==s&&45==n.charCodeAt(o+2)&&45==n.charCodeAt(o+3)?(o+=4,qt(),Jt(),Zt()):(61===l&&(a=61===n.charCodeAt(o+2)?3:2),Kt(Tt,a));case 61:case 33:return a=t,61===n.charCodeAt(o+1)?Kt(Mt,61===n.charCodeAt(o+2)?3:2):Kt(61===a?vt:_t,1);case 126:return Kt(_t,1)}var a,s,l,c,h;return!1}(r),!1===t){if(\"\\\\\"===(r=String.fromCharCode(r))||zt.test(r))return ie();C(o,\"Unexpected character '\"+r+\"'\")}return t}function Kt(t,e){var i=n.slice(o,o+e);o+=e,Yt(t,i)}function Qt(){for(var t,e,r=o;;){i<=o&&C(r,\"Unterminated regular expression\");var a=n.charAt(o);if(Ut.test(a)&&C(r,\"Unterminated regular expression\"),t)t=!1;else{if(\"[\"===a)e=!0;else if(\"]\"===a&&e)e=!1;else if(\"/\"===a&&!e)break;t=\"\\\\\"===a}++o}var s=n.slice(r,o);++o;var u=ne();u&&!/^[gmsiy]*$/.test(u)&&C(r,\"Invalid regexp flag\");try{var l=new RegExp(s,u)}catch(t){t instanceof SyntaxError&&C(r,t.message),C(t)}return Yt(A,l)}function $t(t,e){for(var i=o,r=0,a=0,s=null==e?1/0:e;a<s;++a){var u;if(t<=(u=97<=(u=n.charCodeAt(o))?u-97+10:65<=u?u-65+10:48<=u&&u<=57?u-48:1/0))break;++o,r=r*t+u}return o===i||null!=e&&o-i!==e?null:r}function te(t){var e,i=o,r=!1,a=48===n.charCodeAt(o);return t||null!==$t(10)||C(i,\"Invalid number\"),46===n.charCodeAt(o)&&(++o,$t(10),r=!0),69!==(t=n.charCodeAt(o))&&101!==t||(43!==(t=n.charCodeAt(++o))&&45!==t||++o,null===$t(10)&&C(i,\"Invalid number\"),r=!0),Wt(n.charCodeAt(o))&&C(o,\"Identifier directly after number\"),t=n.slice(i,o),r?e=parseFloat(t):a&&1!==t.length?/[89]/.test(t)||w?C(i,\"Invalid number\"):e=parseInt(t,8):e=parseInt(t,10),Yt(k,e)}function ee(t){return null===(t=$t(16,t))&&C(u,\"Bad character escape sequence\"),t}function ne(){for(var t,e=!(Pt=!1),i=o;;){var r=n.charCodeAt(o);if(Gt(r))Pt&&(t+=n.charAt(o)),++o;else{if(92!==r)break;Pt||(t=n.slice(i,o)),Pt=!0,117!=n.charCodeAt(++o)&&C(o,\"Expecting Unicode escape sequence \\\\uXXXX\"),++o;var a=ee(4);(r=String.fromCharCode(a))||C(o-1,\"Invalid Unicode escape\"),(e?Wt:Gt)(a)||C(o-4,\"Invalid Unicode escape\"),t+=r}e=!1}return Pt?t:n.slice(i,o)}function ie(){var t=ne(),e=O;return Yt(e=!Pt&&Nt(t)?it[t]:e,t)}function re(){m=u,y=l,_=h,Zt()}function ae(t){if(w=t,o=u,e.locations)for(;o<v;)v=n.lastIndexOf(\"\\n\",v-2)+1,--g;Jt(),Zt()}function se(){this.type=null,this.start=u,this.end=null}function oe(){this.start=c,(this.end=null)!==r&&(this.source=r)}function ue(){var t=new se;return e.locations&&(t.loc=new oe),e.directSourceFile&&(t.sourceFile=e.directSourceFile),e.ranges&&(t.range=[u,0]),t}function le(t){var n=new se;return n.start=t.start,e.locations&&(n.loc=new oe,n.loc.start=t.loc.start),e.ranges&&(n.range=[t.range[0],0]),n}function ce(t,n){return t.type=n,t.end=y,e.locations&&(t.loc.end=_),e.ranges&&(t.range[1]=y),t}function he(t){return 5<=e.ecmaVersion&&\"ExpressionStatement\"===t.type&&\"Literal\"===t.expression.type&&\"use strict\"===t.expression.value}function fe(t){return f===t&&(re(),1)}function de(){return!e.strictSemicolons&&(f===P||f===ot||Ut.test(n.slice(y,u)))}function pe(){fe(ht)||de()||ve()}function ge(t){(f===t?re:ve)()}function ve(){C(u,\"Unexpected token\")}function me(t){\"Identifier\"!==t.type&&\"MemberExpression\"!==t.type&&C(t.start,\"Assigning to rvalue\"),w&&\"Identifier\"===t.type&&Rt(t.name)&&C(t.start,\"Assigning to \"+t.name+\" in strict mode\")}var ye={kind:\"loop\"},_e={kind:\"switch\"};function xe(){(f===gt||f===mt&&\"/=\"==d)&&Zt(!0);var t,i,r,a=f,s=ue();switch(a){case I:case R:re();var o=a===I;fe(ht)||de()?s.label=null:f!==O?ve():(s.label=De(),pe());for(var l=0;l<b.length;++l){var c=b[l];if(null==s.label||c.name===s.label.name){if(null!=c.kind&&(o||\"loop\"===c.kind))break;if(s.label&&o)break}}return l===b.length&&C(s.start,\"Unsyntactic \"+a.keyword),ce(s,o?\"BreakStatement\":\"ContinueStatement\");case N:return re(),pe(),ce(s,\"DebuggerStatement\");case B:return re(),b.push(ye),s.body=xe(),b.pop(),ge(J),s.test=be(),pe(),ce(s,\"DoWhileStatement\");case U:if(re(),b.push(ye),ge(ut),f===ht)return Se(s,null);if(f===q){var h=ue();return re(),Me(h,!0),ce(h,\"VariableDeclaration\"),1===h.declarations.length&&fe(nt)?Ce(s,h):Se(s,h)}return h=Te(!1,!0),fe(nt)?(me(h),Ce(s,h)):Se(s,h);case V:return re(),Ie(s,!0);case W:return re(),s.test=be(),s.consequent=xe(),s.alternate=fe(z)?xe():null,ce(s,\"IfStatement\");case G:return x||e.allowReturnOutsideFunction||C(u,\"'return' outside of function\"),re(),fe(ht)||de()?s.argument=null:(s.argument=Te(),pe()),ce(s,\"ReturnStatement\");case H:for(re(),s.discriminant=be(),s.cases=[],ge(st),b.push(_e);f!=ot;)f===L||f===F?(r=f===L,t&&ce(t,\"SwitchCase\"),s.cases.push(t=ue()),t.consequent=[],re(),r?t.test=Te():(i&&C(m,\"Multiple default clauses\"),i=!0,t.test=null),ge(ft)):(t||ve(),t.consequent.push(xe()));return t&&ce(t,\"SwitchCase\"),re(),b.pop(),ce(s,\"SwitchStatement\");case X:return re(),Ut.test(n.slice(y,u))&&C(y,\"Illegal newline after throw\"),s.argument=Te(),pe(),ce(s,\"ThrowStatement\");case Y:return re(),s.block=we(),s.handler=null,f===D&&(v=ue(),re(),ge(ut),v.param=De(),w&&Rt(v.param.name)&&C(v.param.start,\"Binding \"+v.param.name+\" in strict mode\"),ge(lt),v.guard=null,v.body=we(),s.handler=ce(v,\"CatchClause\")),s.guardedHandlers=T,s.finalizer=fe(j)?we():null,s.handler||s.finalizer||C(s.start,\"Missing catch or finally clause\"),ce(s,\"TryStatement\");case q:return re(),Me(s),pe(),ce(s,\"VariableDeclaration\");case J:return re(),s.test=be(),b.push(ye),s.body=xe(),b.pop(),ce(s,\"WhileStatement\");case Z:return w&&C(u,\"'with' in strict mode\"),re(),s.object=be(),s.body=xe(),ce(s,\"WithStatement\");case st:return we();case ht:return re(),ce(s,\"EmptyStatement\");default:var p=d,g=Te();if(a===O&&\"Identifier\"===g.type&&fe(ft)){for(l=0;l<b.length;++l)b[l].name===p&&C(g.start,\"Label '\"+p+\"' is already declared\");var v=f.isLoop?\"loop\":f===H?\"switch\":null;return b.push({name:p,kind:v}),s.body=xe(),b.pop(),s.label=g,ce(s,\"LabeledStatement\")}return s.expression=g,pe(),ce(s,\"ExpressionStatement\")}}function be(){ge(ut);var t=Te();return ge(lt),t}function we(t){var e,n=ue(),i=!0,r=!1;for(n.body=[],ge(st);!fe(ot);){var a=xe();n.body.push(a),i&&t&&he(a)&&(e=r,ae(r=!0)),i=!1}return r&&!e&&ae(!1),ce(n,\"BlockStatement\")}function Se(t,e){return t.init=e,ge(ht),t.test=f===ht?null:Te(),ge(ht),t.update=f===lt?null:Te(),ge(lt),t.body=xe(),b.pop(),ce(t,\"ForStatement\")}function Ce(t,e){return t.left=e,t.right=Te(),ge(lt),t.body=xe(),b.pop(),ce(t,\"ForInStatement\")}function Me(t,e){for(t.declarations=[],t.kind=\"var\";;){var n=ue();if(n.id=De(),w&&Rt(n.id.name)&&C(n.id.start,\"Binding \"+n.id.name+\" in strict mode\"),n.init=fe(vt)?Te(!0,e):null,t.declarations.push(ce(n,\"VariableDeclarator\")),!fe(ct))break}return t}function Te(t,e){var n=ke(e);if(t||f!==ct)return n;var i=le(n);for(i.expressions=[n];fe(ct);)i.expressions.push(ke(e));return ce(i,\"SequenceExpression\")}function ke(t){var e=function(t){var e=function(t){return function t(e,n,i){var r=f.binop;if(null!=r&&(!i||f!==nt)&&n<r){var a=le(e);a.left=e,a.operator=d;var s=f;return re(),a.right=t(Ae(),r,i),t(s=ce(a,s===xt||s===bt?\"LogicalExpression\":\"BinaryExpression\"),n,i)}return e}(Ae(),-1,t)}(t);if(fe(pt)){var n=le(e);return n.test=e,n.consequent=Te(!0),ge(ft),n.alternate=Te(!0,t),ce(n,\"ConditionalExpression\")}return e}(t);if(f.isAssign){var n=le(e);return n.operator=d,n.left=e,re(),n.right=ke(t),me(e),ce(n,\"AssignmentExpression\")}return e}function Ae(){if(f.prefix){var t=ue(),e=f.isUpdate;return t.operator=d,t.prefix=!0,p=!0,re(),t.argument=Ae(),e?me(t.argument):w&&\"delete\"===t.operator&&\"Identifier\"===t.argument.type&&C(t.start,\"Deleting local variable in strict mode\"),ce(t,e?\"UpdateExpression\":\"UnaryExpression\")}for(var n=Ee(Oe());f.postfix&&!de();)(t=le(n)).operator=d,t.prefix=!1,me(t.argument=n),re(),n=ce(t,\"UpdateExpression\");return n}function Ee(t,e){var n;return fe(dt)?((n=le(t)).object=t,n.property=De(!0),n.computed=!1,Ee(ce(n,\"MemberExpression\"),e)):fe(rt)?((n=le(t)).object=t,n.property=Te(),n.computed=!0,ge(at),Ee(ce(n,\"MemberExpression\"),e)):e||!fe(ut)?t:((n=le(t)).callee=t,n.arguments=Le(lt,!1),Ee(ce(n,\"CallExpression\"),e))}function Oe(){switch(f){case Q:var t=ue();return re(),ce(t,\"ThisExpression\");case O:return De();case k:case E:case A:return(t=ue()).value=d,t.raw=n.slice(u,l),re(),ce(t,\"Literal\");case $:case tt:case et:return(t=ue()).value=f.atomValue,t.raw=f.keyword,re(),ce(t,\"Literal\");case ut:var i=c,r=u;re();var a=Te();return a.start=r,a.end=l,e.locations&&(a.loc.start=i,a.loc.end=h),e.ranges&&(a.range=[r,l]),ge(lt),a;case rt:return t=ue(),re(),t.elements=Le(at,!0,!0),ce(t,\"ArrayExpression\");case st:return function(){var t=ue(),n=!0,i=!1;for(t.properties=[],re();!fe(ot);){if(n)n=!1;else if(ge(ct),e.allowTrailingCommas&&fe(ot))break;var r,a={key:Pe()},s=!1;if(fe(ft)?(a.value=Te(!0),r=a.kind=\"init\"):5<=e.ecmaVersion&&\"Identifier\"===a.key.type&&(\"get\"===a.key.name||\"set\"===a.key.name)?(s=i=!0,r=a.kind=a.key.name,a.key=Pe(),f!==ut&&ve(),a.value=Ie(ue(),!1)):ve(),\"Identifier\"===a.key.type&&(w||i))for(var o=0;o<t.properties.length;++o){var u,l=t.properties[o];l.key.name!==a.key.name||(u=!((u=r==l.kind||s&&\"init\"===l.kind||\"init\"===r&&(\"get\"===l.kind||\"set\"===l.kind))&&!w&&\"init\"===r&&\"init\"===l.kind)&&u)&&C(a.key.start,\"Redefinition of property\")}t.properties.push(a)}return ce(t,\"ObjectExpression\")}();case V:return t=ue(),re(),Ie(t,!1);case K:return function(){var t=ue();return re(),t.callee=Ee(Oe(),!0),fe(ut)?t.arguments=Le(lt,!1):t.arguments=T,ce(t,\"NewExpression\")}();default:ve()}}function Pe(){return f===k||f===E?Oe():De(!0)}function Ie(t,e){f===O?t.id=De():e?ve():t.id=null,t.params=[];var n=!0;for(ge(ut);!fe(lt);)n?n=!1:ge(ct),t.params.push(De());var i=x,r=b;if(x=!0,b=[],t.body=we(!0),x=i,b=r,w||t.body.body.length&&he(t.body.body[0]))for(var a=t.id?-1:0;a<t.params.length;++a){var s=a<0?t.id:t.params[a];if((Dt(s.name)||Rt(s.name))&&C(s.start,\"Defining '\"+s.name+\"' in strict mode\"),0<=a)for(var o=0;o<a;++o)s.name===t.params[o].name&&C(s.start,\"Argument name clash in strict mode\")}return ce(t,e?\"FunctionDeclaration\":\"FunctionExpression\")}function Le(t,n,i){for(var r=[],a=!0;!fe(t);){if(a)a=!1;else if(ge(ct),n&&e.allowTrailingCommas&&fe(t))break;i&&f===ct?r.push(null):r.push(Te(!0))}return r}function De(t){var i=ue();return t&&\"everywhere\"==e.forbidReserved&&(t=!1),f===O?(!t&&(e.forbidReserved&&(3===e.ecmaVersion?It:Lt)(d)||w&&Dt(d))&&-1==n.slice(u,l).indexOf(\"\\\\\")&&C(u,\"The keyword '\"+d+\"' is reserved\"),i.name=d):t&&f.keyword?i.name=f.keyword:ve(),p=!1,re(),ce(i,\"Identifier\")}},\"object\"==x(t)&&\"object\"==x(m)?e(t):(i=[t],(a=\"function\"==typeof(r=e)?r.apply(t,i):r)===o||(m.exports=a)),d.version||(d=null));var g={\"+\":\"__add\",\"-\":\"__subtract\",\"*\":\"__multiply\",\"/\":\"__divide\",\"%\":\"__modulo\",\"==\":\"__equals\",\"!=\":\"__equals\"},v={\"-\":\"__negate\",\"+\":\"__self\"},m=c.each([\"add\",\"subtract\",\"multiply\",\"divide\",\"modulo\",\"equals\",\"negate\"],(function(t){this[\"__\"+t]=\"#\"+t}),{__self:function(){return this}});function _(t,e,n){var i=g[e];if(t&&t[i])return i=t[i](n),\"!=\"===e?!i:i;switch(e){case\"+\":return t+n;case\"-\":return t-n;case\"*\":return t*n;case\"/\":return t/n;case\"%\":return t%n;case\"==\":return t==n;case\"!=\":return t!=n}}function w(t,e){var n=v[t];if(e&&e[n])return e[n]();switch(t){case\"+\":return+e;case\"-\":return-e}}function S(t,e){if(!t)return\"\";var n=[];function i(t){for(var e=0,i=n.length;e<i;e++){var r=n[e];if(r[0]>=t)break;t+=r[1]}return t}function r(e){return t.substring(i(e.range[0]),i(e.range[1]))}function a(e,r){for(var a=i(e.range[0]),s=(e=i(e.range[1]),0),o=n.length-1;0<=o;o--)if(a>n[o][0]){s=o+1;break}n.splice(s,0,[a,r.length-e+a]),t=t.substring(0,a)+r+t.substring(e)}var o,c=(e=e||{}).url||\"\",h=e.sourceMaps,f=e.paperFeatures||{},d=e.source||t,m=e.offset||0,y=Vt.agent,_=y.versionNumber,b=!1;return e=/\\r\\n|\\n|\\r/gm,h&&(y.chrome&&30<=_||y.webkit&&537.76<=_||y.firefox&&23<=_||y.node)&&(y.node?m-=2:u&&c&&!u.location.href.indexOf(c)&&(m=(o=l.getElementsByTagName(\"html\")[0].innerHTML).substr(0,o.indexOf(t)+1).match(e).length+1),(o=[\"AA\"+function(t){var e=\"\";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var n=31&t;(t>>=5)&&(n|=32),e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[n]}return e}((b=0<m&&!(y.chrome&&36<=_||y.safari&&600<=_||y.firefox&&40<=_||y.node))?0:m)+\"A\"]).length=(t.match(e)||[]).length+1+(b?m:0),o={version:3,file:c,names:[],mappings:o.join(\";AACA\"),sourceRoot:\"\",sources:[c],sourcesContent:[d]}),!1===f.operatorOverloading&&!1===f.moduleExports||function e(n,s,o){if(n){for(var u in n)if(\"range\"!==u&&\"loc\"!==u){var l=n[u];if(Array.isArray(l))for(var c=0,h=l.length;c<h;c++)e(l[c],n,o);else l&&\"object\"==x(l)&&e(l,n,o)}!1!==o.operatorOverloading&&function(e,n){switch(e.type){case\"UnaryExpression\":e.operator in v&&\"Literal\"!==e.argument.type&&(s=r(e.argument),a(e,'$__(\"'+e.operator+'\", '+s+\")\"));break;case\"BinaryExpression\":e.operator in g&&\"Literal\"!==e.left.type&&(o=r(e.left),u=r(e.right),c=e.left,h=e.right,c=t.substring(i(c.range[1]),i(h.range[0])),h=e.operator,a(e,\"__$__(\"+o+\",\"+c.replace(new RegExp(\"\\\\\"+h),'\"'+h+'\"')+\", \"+u+\")\"));break;case\"UpdateExpression\":case\"AssignmentExpression\":var s,o,u,l;\"ForStatement\"===(c=n&&n.type)||\"BinaryExpression\"===c&&/^[=!<>]/.test(n.operator)||\"MemberExpression\"===c&&n.computed||(\"UpdateExpression\"===e.type?(h=(s=r(e.argument))+\" = \"+(l=\"__$__(\"+s+', \"'+e.operator[0]+'\", 1)'),e.prefix?h=\"(\"+h+\")\":\"AssignmentExpression\"!==c&&\"VariableDeclarator\"!==c&&\"BinaryExpression\"!==c||(h=s+\"; \"+(h=r(n.left||n.id)===s?l:h)),a(e,h)):/^.=$/.test(e.operator)&&\"Literal\"!==e.left.type&&(o=r(e.left),u=r(e.right),l=o+\" = __$__(\"+o+', \"'+e.operator[0]+'\", '+u+\")\",a(e,/^\\(.*\\)$/.test(r(e))?\"(\"+l+\")\":l)))}var c,h}(n,s),!1!==o.moduleExports&&function(t){switch(t.type){case\"ExportDefaultDeclaration\":a({range:[t.start,t.declaration.start]},\"module.exports = \");break;case\"ExportNamedDeclaration\":var e,n=t.declaration,i=t.specifiers;n?(e=n.declarations)&&(e.forEach((function(t){a(t,\"module.exports.\"+r(t))})),a({range:[t.start,n.start+n.kind.length]},\"\")):!i||(i=i.map((function(t){return\"module.exports.\"+(t=r(t))+\" = \"+t+\"; \"})).join(\"\"))&&a(t,i)}}(n)}}(p(t,{ranges:!0,preserveParens:!0,sourceType:\"module\"}),null,f),o&&(b&&(t=new Array(m+1).join(\"\\n\")+t),/^(inline|both)$/.test(h)&&(t+=\"\\n//# sourceMappingURL=data:application/json;base64,\"+s.btoa(unescape(encodeURIComponent(JSON.stringify(o))))),t+=\"\\n//# sourceURL=\"+(c||\"paperscript\")),{url:c,source:d,code:t,map:o}}function C(t,e,n){var i,r=(Vt=e).getView(),a=/\\btool\\.\\w+|\\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\\b/.test(t)&&!/\\bnew\\s+Tool\\b/.test(t)?new dt:null,s=a?a._events:[],o=[\"onFrame\",\"onResize\"].concat(s),u=[],h=[],f=\"object\"==x(t)?t:S(t,n);function d(e,n){for(var i in e)!n&&/^_/.test(i)||!new RegExp(\"([\\\\b\\\\s\\\\W]|^)\"+i.replace(/\\$/g,\"\\\\$\")+\"\\\\b\").test(t)||(u.push(i),h.push(e[i]))}t=f.code,d({__$__:_,$__:w,paper:e,tool:a},!0),d(e),t=\"var module = { exports: {} }; \"+t;var p=c.each(o,(function(e){new RegExp(\"\\\\s+\"+e+\"\\\\b\").test(t)&&(u.push(e),this.push(\"module.exports.\"+e+\" = \"+e+\";\"))}),[]).join(\"\\n\");p&&(t+=\"\\n\"+p),t+=\"\\nreturn module.exports;\",n=Vt.agent,l&&(n.chrome||n.firefox&&n.versionNumber<40)?(f=l.createElement(\"script\"),o=l.head||l.getElementsByTagName(\"head\")[0],n.firefox&&(t=\"\\n\"+t),f.appendChild(l.createTextNode(\"document.__paperscript__ = function(\"+u+\") {\"+t+\"\\n}\")),o.appendChild(f),i=l.__paperscript__,delete l.__paperscript__,o.removeChild(f)):i=Function(u,t);var g=(p=i&&i.apply(e,h))||{};return c.each(s,(function(t){var e=g[t];e&&(a[t]=e)})),r&&(g.onResize&&r.setOnResize(g.onResize),r.emit(\"resize\",{size:r.size,delta:new y}),g.onFrame&&r.setOnFrame(g.onFrame),r.requestUpdate()),p}function M(t){if(/^text\\/(?:x-|)paperscript$/.test(t.type)&&\"true\"!==f.getAttribute(t,\"ignore\")){var e=f.getAttribute(t,\"canvas\"),n=l.getElementById(e),i=t.src||t.getAttribute(\"data-src\"),r=f.hasAttribute(t,\"async\"),a=\"data-paper-scope\";if(!n)throw new Error('Unable to find canvas with id \"'+e+'\"');var s=f.get(n.getAttribute(a))||(new f).setup(n);return n.setAttribute(a,s._id),i?gt({url:i,async:r,mimeType:\"text/plain\",onLoad:function(t){C(t,s,i)}}):C(t.innerHTML,s,t.baseURI),t.setAttribute(\"data-paper-ignore\",\"true\"),s}}function T(){c.each(l&&l.getElementsByTagName(\"script\"),M)}return y.inject(m),b.inject(m),Y.inject(m),u&&(\"complete\"===l.readyState?setTimeout(T):Q.add(u,{load:T})),{compile:S,execute:C,load:function(t){return t?M(t):T()},parse:p,calculateBinary:_,calculateUnary:w}}.call(this);var Vt=new(f.inject(c.exports,{Base:c,Numerical:v,Key:ct,DomEvent:Q,DomElement:K,document:l,window:u,Symbol:D,PlacedSymbol:L}));return Vt.agent.node&&n(858)(Vt),(a=\"function\"==typeof(r=Vt)?r.call(e,n,e,t):r)===o||(t.exports=a),Vt}).call(this,\"object\"==(\"undefined\"===typeof self?\"undefined\":x(self))?self:null)},2321:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Vector=e.Matrix=void 0;var i=r(n(8993));function r(t){return t&&t.__esModule?t:{default:t}}n=r(n(715)),e.Matrix=i.default,e.Vector=n.default},8993:function(t,e){\"use strict\";function n(t){this.m=[(t=t||[1,0,0,1,0,0])[0],t[1],t[2],t[3],t[4],t[5]]}Object.defineProperty(e,\"__esModule\",{value:!0}),n.prototype.unit=function(){return this.m=[1,0,0,1,0,0],this},n.prototype.multiply=function(t){var e=this.m,i=void 0,r=(i=t instanceof n?t.m:t,e[0]*i[0]+e[2]*i[1]),a=e[1]*i[0]+e[3]*i[1],s=e[0]*i[2]+e[2]*i[3],o=e[1]*i[2]+e[3]*i[3];return t=e[0]*i[4]+e[2]*i[5]+e[4],i=e[1]*i[4]+e[3]*i[5]+e[5],e[0]=r,e[1]=a,e[2]=s,e[3]=o,e[4]=t,e[5]=i,this},n.prototype.inverse=function(){var t=new n(this.m),e=t.m,i=1/(e[0]*e[3]-e[1]*e[2]),r=e[3]*i,a=-e[1]*i,s=-e[2]*i,o=e[0]*i,u=i*(e[2]*e[5]-e[3]*e[4]);return i*=e[1]*e[4]-e[0]*e[5],e[0]=r,e[1]=a,e[2]=s,e[3]=o,e[4]=u,e[5]=i,t},n.prototype.translate=function(t,e){return this.multiply([1,0,0,1,t,e])},n.prototype.rotate=function(t){var e=t*Math.PI/180;return t=Math.cos(e),e=Math.sin(e),this.multiply([t,e,-e,t,0,0])},n.prototype.skew=function(t,e){return e|=0,t=t*Math.PI/180,e=e*Math.PI/180,t=Math.tan(t),e=Math.tan(e),this.multiply([1,e,t,1,0,0])},n.prototype.scale=function(t,e){return this.multiply([t,0,0,e,0,0])},n.prototype.transformPoint=function(t,e){var n=t,i=e;return[t=n*this.m[0]+i*this.m[2]+this.m[4],e=n*this.m[1]+i*this.m[3]+this.m[5]]},n.prototype.transformVector=function(t,e){var n=t,i=e;return[t=n*this.m[0]+i*this.m[2],e=n*this.m[1]+i*this.m[3]]},e.default=n},715:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=a(n(2424)),r=a(n(9663));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,0];(0,r.default)(this,s);var n=(u=(0,i.default)(t,3))[0],a=u[1],o=u[2],u=(t=(0,i.default)(e,3))[0];e=t[1],o=o||0,t=(t=t[2])||0,this.x=n-u,this.y=a-e,this.z=o-t}(0,a(n(2600)).default)(s,[{key:\"unit\",value:function(){var t=this.length;return new s([this.x/t,this.y/t,this.z/t])}},{key:\"dot\",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:\"cross\",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y;return new s([n*(t=t.z)-i*a,i*r-e*t,e*a-r*n])}},{key:\"length\",get:function(){var t=this.x,e=this.y,n=this.z;return Math.sqrt(t*t+e*e+n*n)}}]),n=s,e.default=n},1820:function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t,e,r,a,s,o,u,l,c){var h=Math.sin(c*n/360),f=Math.cos(c*n/360),d=f*(t-r)/2+h*(e-a)/2;if(c=-h*(t-r)/2+f*(e-a)/2,0==d&&0==c)return[];if(0===u||0===l)return[];u=Math.abs(u),l=Math.abs(l),1<(c=d*d/(u*u)+c*c/(l*l))&&(u*=Math.sqrt(c),l*=Math.sqrt(c));var p=function(t,e,r,a,s,o,u,l,c,h){var f=h*(t-r)/2+c*(e-a)/2,d=-c*(t-r)/2+h*(e-a)/2,p=u*u,g=l*l,v=f*f,m=d*d,y=p*g-p*m-g*v;return y<0&&(y=0),y/=p*m+g*v,r=h*(s=(y=Math.sqrt(y)*(s===o?-1:1))*u/l*d)-c*(y=y*-l/u*f)+(t+r)/2,h=c*s+h*y+(e+a)/2,e=(f-s)/u,a=(d-y)/l,u=(-f-s)/u,y=(-d-y)/l,l=i(1,0,e,a),y=i(e,a,u,y),0===o&&0<y&&(y-=n),1===o&&y<0&&(y+=n),[r,h,l,y]}(t,e,r,a,s,o,u,l,h,f),g=[],v=p[2],m=p[3],y=Math.max(Math.ceil(Math.abs(m)/(n/4)),1);m/=y;for(var _=0;_<y;_++)g.push(function(t,e){var n=4/3*Math.tan(e/4),i=Math.cos(t),r=Math.sin(t),a=Math.cos(t+e);return[i,r,i-r*n,r+i*n,a+(e=Math.sin(t+e))*n,e-a*n,a,e]}(v,m)),v+=m;return g.map((function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],i=t[e+1],r=h*(n*=u)+f*(i*=l);t[e+0]=f*n-h*i+p[0],t[e+1]=r+p[1]}return t}))};var n=2*Math.PI;function i(t,e,n,i){var r=t*n+e*i;return(r=1<r?1:r)<-1&&(r=-1),(t*i-e*n<0?-1:1)*Math.acos(r)}},9011:function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=0,n=0,i=0,r=0;return t.map((function(t){var a=(t=t.slice())[0],s=a.toUpperCase();if(a!=s)switch(t[0]=s,a){case\"a\":t[6]+=i,t[7]+=r;break;case\"v\":t[1]+=r;break;case\"h\":t[1]+=i;break;default:for(var o=1;o<t.length;)t[o++]+=i,t[o++]+=r}switch(s){case\"Z\":i=e,r=n;break;case\"H\":i=t[1];break;case\"V\":r=t[1];break;case\"M\":i=e=t[1],r=n=t[2];break;default:i=t[t.length-2],r=t[t.length-1]}return t}))}},9944:function(t,e,n){\"use strict\";var i=v(n(5315)),r=v(n(2424)),a=v(n(542)),s=v(n(2945)),o=v(n(9663)),u=v(n(2600)),l=v(n(3516)),c=n(2321),h=n(817),f=v(n(3653)),d=v(n(9011)),p=v(n(2061)),g=v(n(4049));function v(t){return t&&t.__esModule?t:{default:t}}var m=(0,l.default)(\"initialPath\"),y=(0,l.default)(\"path\"),_=(0,l.default)(\"bounds\"),x=(0,l.default)(\"savedPaths\"),b=(0,l.default)(\"renderProps\"),w=(0,l.default)(\"beginPath\");function S(t){if((0,o.default)(this,S),!(0,g.default)(t))throw new Error(\"Not an SVG path!\");this[m]=(0,d.default)((0,f.default)(t)),this[y]=(0,p.default)(this[m]),this[_]=null,this[x]=[],this[b]={},this[w]=!1}(0,u.default)(S,[{key:\"save\",value:function(){return this[x].push({path:this[y],bounds:this[_],renderProps:(0,s.default)({},this[b])}),this}},{key:\"restore\",value:function(){var t,e,n;return this[x].length&&(t=(n=this[x].pop()).path,e=n.bounds,n=n.renderProps,this[y]=t,this[_]=e,this[b]=n),this}},{key:\"isPointInPath\",value:function(t,e){return(0,h.isPointInPath)(this,t,e)}},{key:\"isPointInStroke\",value:function(t,e,n){var i=n.lineWidth,r=n.lineCap;if(n=n.lineJoin,h.isPointInStroke)return(0,h.isPointInStroke)(this,t,e,{lineWidth:void 0===i?1:i,lineCap:void 0===r?\"butt\":r,lineJoin:void 0===n?\"miter\":n})}},{key:\"getPointAtLength\",value:function(t){return(0,h.getPointAtLength)(this.d,t)}},{key:\"getTotalLength\",value:function(){return(0,h.getTotalLength)(this.d)}},{key:\"transform\",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this[_]=null;var i=new c.Matrix(e),s=this[y];return this[y]=s.map((function(t){for(var e=(0,a.default)(t),n=(t=e[0],e.slice(1)),s=[t],o=0;o<n.length;o+=2){var u=n[o],l=n[o+1];u=i.transformPoint(u,l),u=(l=(0,r.default)(u,2))[0],l=l[1],s.push(u,l)}return s})),this}},{key:\"translate\",value:function(t,e){return e=(new c.Matrix).translate(t,e),this.transform.apply(this,(0,i.default)(e.m))}},{key:\"rotate\",value:function(t){return t=(new c.Matrix).rotate(t),this.transform.apply(this,(0,i.default)(t.m))}},{key:\"scale\",value:function(t,e){return null==e&&(e=t),e=(new c.Matrix).scale(t,e),this.transform.apply(this,(0,i.default)(e.m))}},{key:\"skew\",value:function(t,e){return e=(new c.Matrix).skew(t,e),this.transform.apply(this,(0,i.default)(e.m))}},{key:\"trim\",value:function(){var t=(e=(0,r.default)(this.bounds,2))[0],e=e[1];return this.translate(-t,-e),this}},{key:\"beginPath\",value:function(){return this[w]=!0,this}},{key:\"to\",value:function(t){var e=this[y],n=this[b];return e.length&&(this[w]&&t.beginPath(),e.forEach((function(e){e=(n=(0,a.default)(e))[0];var n=n.slice(1);(\"M\"===e?t.moveTo:t.bezierCurveTo).apply(t,(0,i.default)(n))})),this.isClosed&&t.closePath()),(0,s.default)(t,n),{stroke:function(){return t.stroke(),this},fill:function(){return t.fill(),this}}}},{key:\"strokeStyle\",value:function(t){return this[b].strokeStyle=t,this}},{key:\"fillStyle\",value:function(t){return this[b].fillStyle=t,this}},{key:\"lineWidth\",value:function(t){return this[b].lineWidth=t,this}},{key:\"lineCap\",value:function(t){return this[b].lineCap=t,this}},{key:\"lineJoin\",value:function(t){return this[b].lineJoin=t,this}},{key:\"bounds\",get:function(){if(!this[_]){var t=this[y];if(this[_]=[0,0,0,0],t.length){for(var e=[1/0,1/0,-1/0,-1/0],n=0,i=t.length;n<i;n++)for(var r=t[n].slice(1),a=0;a<r.length;a+=2)r[a+0]<e[0]&&(e[0]=r[a+0]),r[a+1]<e[1]&&(e[1]=r[a+1]),r[a+0]>e[2]&&(e[2]=r[a+0]),r[a+1]>e[3]&&(e[3]=r[a+1]);this[_]=e}}return this[_]}},{key:\"size\",get:function(){var t=this.bounds;return[t[2]-t[0],t[3]-t[1]]}},{key:\"center\",get:function(){var t=(0,r.default)(this.bounds,4),e=t[0],n=t[1];return[(e+t[2])/2,(n+t[3])/2]}},{key:\"d\",get:function(){var t=this[y].map((function(t){return(t=(0,a.default)(t))[0]+t.slice(1).join()})).join(\"\");return this.isClosed&&(t+=\"Z\"),t}},{key:\"path\",get:function(){return this[y]}},{key:\"isClosed\",get:function(){var t=this[m][this[m].length-1];return t&&\"Z\"===t[0]}}]),u=S,e.Z=u},4049:function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){return\"string\"==typeof t&&(t=t.trim(),!!(/^[mzlhvcsqta]\\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\\dz]$/i.test(t)&&4<t.length))}},2061:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=a(n(2424));e.default=function(t){for(var e,n=[],a=0,u=0,l=0,c=0,h=null,f=null,d=0,p=0,g=0,v=t.length;g<v;g++){var m=t[g],y=m[0];switch(y){case\"M\":l=m[1],c=m[2];break;case\"A\":var _=(0,r.default)(d,p,m[6],m[7],m[4],m[5],m[1],m[2],m[3]);if(!_.length)continue;_=_.map((function(t){return(t=(0,i.default)(t,8))[0],t[1],{x1:t[2],y1:t[3],x2:t[4],y2:t[5],x:t[6],y:t[7]}}));for(var x,b=0;b<_.length;b++)m=[\"C\",(x=_[b]).x1,x.y1,x.x2,x.y2,x.x,x.y],b<_.length-1&&n.push(m);break;case\"S\":var w=d,S=p;\"C\"!=e&&\"S\"!=e||(w+=w-a,S+=S-u),m=[\"C\",w,S,m[1],m[2],m[3],m[4]];break;case\"T\":f=\"Q\"==e||\"T\"==e?(h=2*d-h,2*p-f):(h=d,p),m=o(d,p,h,f,m[1],m[2]);break;case\"Q\":h=m[1],f=m[2],m=o(d,p,m[1],m[2],m[3],m[4]);break;case\"L\":m=s(d,p,m[1],m[2]);break;case\"H\":m=s(d,p,m[1],p);break;case\"V\":m=s(d,p,d,m[1]);break;case\"Z\":m=s(d,p,l,c)}e=y,d=m[m.length-2],p=m[m.length-1],u=4<m.length?(a=m[m.length-4],m[m.length-3]):(a=d,p),n.push(m)}return n};var r=a(n(1820));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,i){return[\"C\",t,e,n,i,n,i]}function o(t,e,n,i,r,a){return[\"C\",t/3+2/3*n,e/3+2/3*i,r/3+2/3*n,a/3+2/3*i,r,a]}},3653:function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(t){var e=[];return t.replace(i,(function(t,i,a){var s=i.toLowerCase();for(a=function(t){return(t=t.match(r))?t.map(Number):[]}(a),\"m\"==s&&2<a.length&&(e.push([i].concat(a.splice(0,2))),s=\"l\",i=\"m\"==i?\"l\":\"L\");;){if(a.length==n[s])return a.unshift(i),e.push(a);if(a.length<n[s])throw new Error(\"malformed path data\");e.push([i].concat(a.splice(0,n[s])))}})),e};var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi,r=/-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/gi},817:function(t,e){\"use strict\";function n(t){var e=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");return e.setAttribute(\"d\",t),e}Object.defineProperty(e,\"__esModule\",{value:!0}),e.getPointAtLength=function(t,e){return[e=(t=n(t).getPointAtLength(e)).x,t=t.y]},e.getTotalLength=function(t,e){return n(t).getTotalLength(e)},e.isPointInPath=function(t,e,n){return t=t.d,i=i||document.createElement(\"canvas\").getContext(\"2d\"),t=new Path2D(t),i.isPointInPath(t,e,n)},e.isPointInStroke=function(t,e,n,r){var a=t.d,s=(t=void 0===(s=r.lineWidth)?1:s,void 0===(s=r.lineCap)?\"butt\":s);if(r=void 0===(r=r.lineJoin)?\"miter\":r,(i=i||document.createElement(\"canvas\").getContext(\"2d\")).isPointInStroke)return i.save(),i.lineWidth=t,i.lineCap=s,i.lineJoin=r,a=new Path2D(a),n=i.isPointInStroke(a,e,n),i.restore(),n};var i=null},858:function(){},4158:function(){}},n={};function i(t){var r=n[t];return void 0!==r||(r=n[t]={exports:{}},e[t].call(r.exports,r,r.exports,i)),r.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var r={};return function(){\"use strict\";var t;i.d(r,{default:function(){return Mg}});var e={};function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,\"prototype\",{writable:!1}),t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(i,r)}function S(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(t){w(a,i,r,s,o,\"next\",t)}function o(t){w(a,i,r,s,o,\"throw\",t)}s(void 0)}))}}i.r(e),i.d(e,{ACESFilmicToneMapping:function(){return Kt},AddEquation:function(){return xt},AddOperation:function(){return Xt},AdditiveAnimationBlendMode:function(){return Un},AdditiveBlending:function(){return vt},AlphaFormat:function(){return Pe},AlwaysDepth:function(){return Ft},AlwaysStencilFunc:function(){return fi},AmbientLight:function(){return zf},AmbientLightProbe:function(){return nd},AnimationClip:function(){return hf},AnimationLoader:function(){return yf},AnimationMixer:function(){return Ad},AnimationObjectGroup:function(){return Td},AnimationUtils:function(){return Kh},ArcCurve:function(){return Bc},ArrayCamera:function(){return ol},ArrowHelper:function(){return vp},Audio:function(){return pd},AudioAnalyser:function(){return xd},AudioContext:function(){return $f},AudioListener:function(){return dd},AudioLoader:function(){return td},AxesHelper:function(){return mp},AxisHelper:function(){return function(t){return new mp(t)}},BackSide:function(){return ct},BasicDepthPacking:function(){return Yn},BasicShadowMap:function(){return at},BinaryTextureLoader:function(){return function(t){return new wf(t)}},Bone:function(){return Yl},BooleanKeyframeTrack:function(){return rf},BoundingBoxHelper:function(){return function(t,e){return new fp(t,e)}},Box2:function(){return Bd},Box3:function(){return ir},Box3Helper:function(){return dp},BoxBufferGeometry:function(){return cs},BoxGeometry:function(){return cs},BoxHelper:function(){return fp},BufferAttribute:function(){return Ta},BufferGeometry:function(){return Ga},BufferGeometryLoader:function(){return Yf},ByteType:function(){return xe},Cache:function(){return ff},Camera:function(){return gs},CameraHelper:function(){return op},CanvasRenderer:function(){return function(){}},CanvasTexture:function(){return Mc},CatmullRomCurve3:function(){return Hc},CineonToneMapping:function(){return Zt},CircleBufferGeometry:function(){return Tc},CircleGeometry:function(){return Tc},ClampToEdgeWrapping:function(){return oe},Clock:function(){return od},Color:function(){return wa},ColorKeyframeTrack:function(){return af},CompressedTexture:function(){return Cc},CompressedTextureLoader:function(){return _f},ConeBufferGeometry:function(){return Ac},ConeGeometry:function(){return Ac},CubeCamera:function(){return ms},CubeReflectionMapping:function(){return te},CubeRefractionMapping:function(){return ee},CubeTexture:function(){return ys},CubeTextureLoader:function(){return bf},CubeUVReflectionMapping:function(){return re},CubeUVRefractionMapping:function(){return ae},CubicBezierCurve:function(){return Jc},CubicBezierCurve3:function(){return Zc},CubicInterpolant:function(){return $h},CullFaceBack:function(){return nt},CullFaceFront:function(){return it},CullFaceFrontBack:function(){return rt},CullFaceNone:function(){return et},Curve:function(){return Nc},CurvePath:function(){return ih},CustomBlending:function(){return _t},CustomToneMapping:function(){return Qt},CylinderBufferGeometry:function(){return kc},CylinderGeometry:function(){return kc},Cylindrical:function(){return Nd},DataTexture:function(){return ql},DataTexture2DArray:function(){return ho},DataTexture3D:function(){return yo},DataTextureLoader:function(){return wf},DataUtils:function(){return bp},DecrementStencilOp:function(){return ei},DecrementWrapStencilOp:function(){return ii},DefaultLoadingManager:function(){return pf},DepthFormat:function(){return Ne},DepthStencilFormat:function(){return Fe},DepthTexture:function(){return hl},DirectionalLight:function(){return Bf},DirectionalLightHelper:function(){return rp},DiscreteInterpolant:function(){return ef},DodecahedronBufferGeometry:function(){return Oc},DodecahedronGeometry:function(){return Oc},DoubleSide:function(){return ht},DstAlphaFactor:function(){return Pt},DstColorFactor:function(){return Lt},DynamicBufferAttribute:function(){return function(t,e){return new Ta(t,e).setUsage(pi)}},DynamicCopyUsage:function(){return xi},DynamicDrawUsage:function(){return pi},DynamicReadUsage:function(){return mi},EdgesGeometry:function(){return Rc},EdgesHelper:function(){return function(t,e){return new dc(new Rc(t.geometry),new rc({color:void 0!==e?e:16777215}))}},EllipseCurve:function(){return Fc},EqualDepth:function(){return jt},EqualStencilFunc:function(){return oi},EquirectangularReflectionMapping:function(){return ne},EquirectangularRefractionMapping:function(){return ie},Euler:function(){return Ur},EventDispatcher:function(){return Ci},ExtrudeBufferGeometry:function(){return Th},ExtrudeGeometry:function(){return Th},FaceColors:function(){return Mp},FileLoader:function(){return mf},FlatShading:function(){return ft},Float16BufferAttribute:function(){return Da},Float32Attribute:function(){return function(t,e){return new Ra(t,e)}},Float32BufferAttribute:function(){return Ra},Float64Attribute:function(){return function(t,e){return new Na(t,e)}},Float64BufferAttribute:function(){return Na},FloatType:function(){return Me},Fog:function(){return ml},FogExp2:function(){return vl},Font:function(){return function(){}},FontLoader:function(){return function(){}},FramebufferTexture:function(){return Sc},FrontSide:function(){return lt},Frustum:function(){return Ts},GLBufferAttribute:function(){return Pd},GLSL1:function(){return wi},GLSL3:function(){return Si},GreaterDepth:function(){return Vt},GreaterEqualDepth:function(){return Ut},GreaterEqualStencilFunc:function(){return hi},GreaterStencilFunc:function(){return li},GridHelper:function(){return $d},Group:function(){return ul},HalfFloatType:function(){return Te},HemisphereLight:function(){return Mf},HemisphereLightHelper:function(){return Qd},HemisphereLightProbe:function(){return ed},IcosahedronBufferGeometry:function(){return Ah},IcosahedronGeometry:function(){return Ah},ImageBitmapLoader:function(){return Qf},ImageLoader:function(){return xf},ImageUtils:function(){return Hi},ImmediateRenderObject:function(){return function(){}},IncrementStencilOp:function(){return ti},IncrementWrapStencilOp:function(){return ni},InstancedBufferAttribute:function(){return Ql},InstancedBufferGeometry:function(){return Hf},InstancedInterleavedBuffer:function(){return Od},InstancedMesh:function(){return ic},Int16Attribute:function(){return function(t,e){return new Oa(t,e)}},Int16BufferAttribute:function(){return Oa},Int32Attribute:function(){return function(t,e){return new Ia(t,e)}},Int32BufferAttribute:function(){return Ia},Int8Attribute:function(){return function(t,e){return new ka(t,e)}},Int8BufferAttribute:function(){return ka},IntType:function(){return Se},InterleavedBuffer:function(){return _l},InterleavedBufferAttribute:function(){return bl},Interpolant:function(){return Qh},InterpolateDiscrete:function(){return Dn},InterpolateLinear:function(){return Rn},InterpolateSmooth:function(){return Nn},InvertStencilOp:function(){return ri},JSONLoader:function(){return function(){}},KeepStencilOp:function(){return Qn},KeyframeTrack:function(){return nf},LOD:function(){return jl},LatheBufferGeometry:function(){return Eh},LatheGeometry:function(){return Eh},Layers:function(){return Vr},LensFlare:function(){return function(){}},LessDepth:function(){return Bt},LessEqualDepth:function(){return zt},LessEqualStencilFunc:function(){return ui},LessStencilFunc:function(){return si},Light:function(){return Cf},LightProbe:function(){return Vf},Line:function(){return cc},Line3:function(){return Ud},LineBasicMaterial:function(){return rc},LineCurve:function(){return Kc},LineCurve3:function(){return Qc},LineDashedMaterial:function(){return Jh},LineLoop:function(){return pc},LinePieces:function(){return Sp},LineSegments:function(){return dc},LineStrip:function(){return wp},LinearEncoding:function(){return Hn},LinearFilter:function(){return pe},LinearInterpolant:function(){return tf},LinearMipMapLinearFilter:function(){return ye},LinearMipMapNearestFilter:function(){return ve},LinearMipmapLinearFilter:function(){return me},LinearMipmapNearestFilter:function(){return ge},LinearToneMapping:function(){return qt},Loader:function(){return gf},LoaderUtils:function(){return Gf},LoadingManager:function(){return df},LoopOnce:function(){return Pn},LoopPingPong:function(){return Ln},LoopRepeat:function(){return In},LuminanceAlphaFormat:function(){return Re},LuminanceFormat:function(){return De},MOUSE:function(){return $},Material:function(){return ga},MaterialLoader:function(){return Wf},Math:function(){return Fi},MathUtils:function(){return Fi},Matrix3:function(){return zi},Matrix4:function(){return Pr},MaxEquation:function(){return Ct},Mesh:function(){return us},MeshBasicMaterial:function(){return Sa},MeshDepthMaterial:function(){return el},MeshDistanceMaterial:function(){return nl},MeshFaceMaterial:function(){return function(t){return t}},MeshLambertMaterial:function(){return Yh},MeshMatcapMaterial:function(){return qh},MeshNormalMaterial:function(){return Xh},MeshPhongMaterial:function(){return Gh},MeshPhysicalMaterial:function(){return Wh},MeshStandardMaterial:function(){return Vh},MeshToonMaterial:function(){return Hh},MinEquation:function(){return St},MirroredRepeatWrapping:function(){return ue},MixOperation:function(){return Ht},MultiMaterial:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.isMultiMaterial=!0,(t.materials=t).clone=function(){return t.slice()},t}},MultiplyBlending:function(){return yt},MultiplyOperation:function(){return Gt},NearestFilter:function(){return le},NearestMipMapLinearFilter:function(){return de},NearestMipMapNearestFilter:function(){return he},NearestMipmapLinearFilter:function(){return fe},NearestMipmapNearestFilter:function(){return ce},NeverDepth:function(){return Nt},NeverStencilFunc:function(){return ai},NoBlending:function(){return pt},NoColors:function(){return Cp},NoToneMapping:function(){return Yt},NormalAnimationBlendMode:function(){return jn},NormalBlending:function(){return gt},NotEqualDepth:function(){return Wt},NotEqualStencilFunc:function(){return ci},NumberKeyframeTrack:function(){return sf},Object3D:function(){return na},ObjectLoader:function(){return qf},ObjectSpaceNormalMap:function(){return Zn},OctahedronBufferGeometry:function(){return Oh},OctahedronGeometry:function(){return Oh},OneFactor:function(){return Tt},OneMinusDstAlphaFactor:function(){return It},OneMinusDstColorFactor:function(){return Dt},OneMinusSrcAlphaFactor:function(){return Ot},OneMinusSrcColorFactor:function(){return At},OrthographicCamera:function(){return zs},PCFShadowMap:function(){return st},PCFSoftShadowMap:function(){return ot},PMREMGenerator:function(){return $s},ParametricGeometry:function(){return function(){return new Ga}},Particle:function(){return function(t){return new Nl(t)}},ParticleBasicMaterial:function(){return function(t){return new gc(t)}},ParticleSystem:function(){return function(t,e){return new xc(t,e)}},ParticleSystemMaterial:function(){return function(t){return new gc(t)}},Path:function(){return rh},PerspectiveCamera:function(){return vs},Plane:function(){return Ss},PlaneBufferGeometry:function(){return Es},PlaneGeometry:function(){return Es},PlaneHelper:function(){return pp},PointCloud:function(){return function(t,e){return new xc(t,e)}},PointCloudMaterial:function(){return function(t){return new gc(t)}},PointLight:function(){return Nf},PointLightHelper:function(){return qd},Points:function(){return xc},PointsMaterial:function(){return gc},PolarGridHelper:function(){return tp},PolyhedronBufferGeometry:function(){return Ec},PolyhedronGeometry:function(){return Ec},PositionalAudio:function(){return _d},PropertyBinding:function(){return Md},PropertyMixer:function(){return bd},QuadraticBezierCurve:function(){return $c},QuadraticBezierCurve3:function(){return th},Quaternion:function(){return $i},QuaternionKeyframeTrack:function(){return uf},QuaternionLinearInterpolant:function(){return of},REVISION:function(){return Q},RGBADepthPacking:function(){return qn},RGBAFormat:function(){return Le},RGBAIntegerFormat:function(){return We},RGBA_ASTC_10x10_Format:function(){return dn},RGBA_ASTC_10x5_Format:function(){return cn},RGBA_ASTC_10x6_Format:function(){return hn},RGBA_ASTC_10x8_Format:function(){return fn},RGBA_ASTC_12x10_Format:function(){return pn},RGBA_ASTC_12x12_Format:function(){return gn},RGBA_ASTC_4x4_Format:function(){return en},RGBA_ASTC_5x4_Format:function(){return nn},RGBA_ASTC_5x5_Format:function(){return rn},RGBA_ASTC_6x5_Format:function(){return an},RGBA_ASTC_6x6_Format:function(){return sn},RGBA_ASTC_8x5_Format:function(){return on},RGBA_ASTC_8x6_Format:function(){return un},RGBA_ASTC_8x8_Format:function(){return ln},RGBA_BPTC_Format:function(){return vn},RGBA_ETC2_EAC_Format:function(){return tn},RGBA_PVRTC_2BPPV1_Format:function(){return Ke},RGBA_PVRTC_4BPPV1_Format:function(){return Ze},RGBA_S3TC_DXT1_Format:function(){return He},RGBA_S3TC_DXT3_Format:function(){return Xe},RGBA_S3TC_DXT5_Format:function(){return Ye},RGBFormat:function(){return Ie},RGBIntegerFormat:function(){return Ve},RGB_ETC1_Format:function(){return Qe},RGB_ETC2_Format:function(){return $e},RGB_PVRTC_2BPPV1_Format:function(){return Je},RGB_PVRTC_4BPPV1_Format:function(){return qe},RGB_S3TC_DXT1_Format:function(){return Ge},RGFormat:function(){return je},RGIntegerFormat:function(){return Ue},RawShaderMaterial:function(){return js},Ray:function(){return Or},Raycaster:function(){return Id},RectAreaLight:function(){return jf},RedFormat:function(){return Be},RedIntegerFormat:function(){return ze},ReinhardToneMapping:function(){return Jt},RepeatWrapping:function(){return se},ReplaceStencilOp:function(){return $n},ReverseSubtractEquation:function(){return wt},RingBufferGeometry:function(){return Ph},RingGeometry:function(){return Ph},SRGB8_ALPHA8_ASTC_10x10_Format:function(){return An},SRGB8_ALPHA8_ASTC_10x5_Format:function(){return Mn},SRGB8_ALPHA8_ASTC_10x6_Format:function(){return Tn},SRGB8_ALPHA8_ASTC_10x8_Format:function(){return kn},SRGB8_ALPHA8_ASTC_12x10_Format:function(){return En},SRGB8_ALPHA8_ASTC_12x12_Format:function(){return On},SRGB8_ALPHA8_ASTC_4x4_Format:function(){return mn},SRGB8_ALPHA8_ASTC_5x4_Format:function(){return yn},SRGB8_ALPHA8_ASTC_5x5_Format:function(){return _n},SRGB8_ALPHA8_ASTC_6x5_Format:function(){return xn},SRGB8_ALPHA8_ASTC_6x6_Format:function(){return bn},SRGB8_ALPHA8_ASTC_8x5_Format:function(){return wn},SRGB8_ALPHA8_ASTC_8x6_Format:function(){return Sn},SRGB8_ALPHA8_ASTC_8x8_Format:function(){return Cn},Scene:function(){return yl},SceneUtils:function(){return kp},ShaderChunk:function(){return Os},ShaderLib:function(){return Is},ShaderMaterial:function(){return ps},ShadowMaterial:function(){return Uh},Shape:function(){return ah},ShapeBufferGeometry:function(){return Ih},ShapeGeometry:function(){return Ih},ShapePath:function(){return yp},ShapeUtils:function(){return Sh},ShortType:function(){return be},Skeleton:function(){return Kl},SkeletonHelper:function(){return Yd},SkinnedMesh:function(){return Xl},SmoothShading:function(){return dt},Sphere:function(){return wr},SphereBufferGeometry:function(){return Lh},SphereGeometry:function(){return Lh},Spherical:function(){return Rd},SphericalHarmonics3:function(){return Uf},SplineCurve:function(){return eh},SpotLight:function(){return Pf},SpotLightHelper:function(){return Wd},Sprite:function(){return Nl},SpriteMaterial:function(){return Sl},SrcAlphaFactor:function(){return Et},SrcAlphaSaturateFactor:function(){return Rt},SrcColorFactor:function(){return kt},StaticCopyUsage:function(){return _i},StaticDrawUsage:function(){return di},StaticReadUsage:function(){return vi},StereoCamera:function(){return sd},StreamCopyUsage:function(){return bi},StreamDrawUsage:function(){return gi},StreamReadUsage:function(){return yi},StringKeyframeTrack:function(){return lf},SubtractEquation:function(){return bt},SubtractiveBlending:function(){return mt},TOUCH:function(){return tt},TangentSpaceNormalMap:function(){return Jn},TetrahedronBufferGeometry:function(){return Dh},TetrahedronGeometry:function(){return Dh},TextGeometry:function(){return function(){return new Ga}},Texture:function(){return Yi},TextureLoader:function(){return Sf},TorusBufferGeometry:function(){return Rh},TorusGeometry:function(){return Rh},TorusKnotBufferGeometry:function(){return Nh},TorusKnotGeometry:function(){return Nh},Triangle:function(){return da},TriangleFanDrawMode:function(){return Gn},TriangleStripDrawMode:function(){return Wn},TrianglesDrawMode:function(){return Vn},TubeBufferGeometry:function(){return Fh},TubeGeometry:function(){return Fh},UVMapping:function(){return $t},Uint16Attribute:function(){return function(t,e){return new Pa(t,e)}},Uint16BufferAttribute:function(){return Pa},Uint32Attribute:function(){return function(t,e){return new La(t,e)}},Uint32BufferAttribute:function(){return La},Uint8Attribute:function(){return function(t,e){return new Aa(t,e)}},Uint8BufferAttribute:function(){return Aa},Uint8ClampedAttribute:function(){return function(t,e){return new Ea(t,e)}},Uint8ClampedBufferAttribute:function(){return Ea},Uniform:function(){return Ed},UniformsLib:function(){return Ps},UniformsUtils:function(){return ds},UnsignedByteType:function(){return _e},UnsignedInt248Type:function(){return Oe},UnsignedIntType:function(){return Ce},UnsignedShort4444Type:function(){return ke},UnsignedShort5551Type:function(){return Ae},UnsignedShort565Type:function(){return Ee},UnsignedShortType:function(){return we},VSMShadowMap:function(){return ut},Vector2:function(){return Bi},Vector3:function(){return tr},Vector4:function(){return Ji},VectorKeyframeTrack:function(){return cf},Vertex:function(){return function(t,e,n){return new tr(t,e,n)}},VertexColors:function(){return Tp},VideoTexture:function(){return wc},WebGL1Renderer:function(){return gl},WebGLCubeRenderTarget:function(){return _s},WebGLMultipleRenderTargets:function(){return Ki},WebGLMultisampleRenderTarget:function(){return Qi},WebGLRenderTarget:function(){return Zi},WebGLRenderTargetCube:function(){return function(t,e,n){return new _s(t,n)}},WebGLRenderer:function(){return pl},WebGLUtils:function(){return sl},WireframeGeometry:function(){return Bh},WireframeHelper:function(){return function(t,e){return new dc(new Bh(t.geometry),new rc({color:void 0!==e?e:16777215}))}},WrapAroundEnding:function(){return zn},XHRLoader:function(){return function(t){return new mf(t)}},ZeroCurvatureEnding:function(){return Fn},ZeroFactor:function(){return Mt},ZeroSlopeEnding:function(){return Bn},ZeroStencilOp:function(){return Kn},sRGBEncoding:function(){return Xn}});var C=i(7757),M=i.n(C),T=i(5809),k=i.n(T);function A(t,e){var n=O,i=\"undefined\"!=typeof Symbol&&t[Symbol[n(134)]]||t[\"@@iterator\"];if(!i){if(Array[n(182)](t)||(i=function(t,e){var n=O;if(t){if(x(t)===n(114))return E(t,e);var i=Object[n(141)][n(193)][n(162)](t).slice(8,-1);return(i=i===n(133)&&t[n(142)]?t.constructor[n(211)]:i)===n(163)||\"Set\"===i?Array[n(190)](t):i===n(149)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[n(158)](i)?E(t,e):void 0}}(t))||e&&t&&x(t[n(198)])===n(157)){i&&(t=i);var r=0;return{s:e=function(){},n:function(){return r>=t[n(198)]?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(n(113))}var a,s=!0,o=!1;return{s:function(){i=i[n(162)](t)},n:function(){var t=n,e=i[t(202)]();return s=e[t(161)],e},e:function(t){o=!0,a=t},f:function(){var t=n;try{s||null==i[t(205)]||i.return()}finally{if(o)throw a}}}}function E(t,e){var n=O;(null==e||e>t[n(198)])&&(e=t[n(198)]);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function O(t,e){var n=R();return(O=function(t,e){return n[t-=113]})(t,e)}!function(){for(var t=O,e=R();;)try{if(627684==+parseInt(t(206))+parseInt(t(156))/2+parseInt(t(122))/3*(parseInt(t(210))/4)+-parseInt(t(135))/5*(-parseInt(t(170))/6)+parseInt(t(188))/7+-parseInt(t(179))/8+-parseInt(t(119))/9*(parseInt(t(125))/10))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();var P,I=(s(L,[{key:(P=O)(167),value:function(){var t=P,e=(i=this[t(155)]())[t(164)],n=i[t(147)],i=i[t(180)];return this[t(126)][t(191)](e),this[t(147)]=n,this[t(164)]=e,this[t(180)]=i,this[t(174)](i),this[t(171)](n),this.createSwiper(e)}},{key:P(194),value:function(t){var e=P;this[e(116)]&&this[e(116)](t)}},{key:P(155),value:function(){var t=P,e=document[t(159)](t(154));e[t(181)][t(169)]=t(196),e[t(181)][t(128)]=\"relative\",e[t(189)]=this[t(131)];var n=document[t(159)](t(154));n[t(181)][t(169)]=\"hidden\",n[t(181)][t(128)]=t(212);var i=document[t(159)](t(154));return i[t(189)]=t(208),i[t(181)][t(151)]=t(136),i[t(181)][t(185)]=t(183),i[t(181)].justifyContent=t(183),i[t(181)][t(213)]=t(146),e[t(191)](n),e[t(191)](i),{swiperEl:e,swiperWrap:n,dotWrap:i}}},{key:\"renderDots\",value:function(t){var e,n=P,i=1,r=A(this[n(173)]);try{for(r.s();!(e=r.n()).done;){e[n(160)];var a=document[n(159)](n(154));a[n(189)]=n(115),a.style[n(192)]=\"10px\",a.style[n(117)]=n(146),a[n(181)][n(172)]=n(146),a[n(181)][n(197)]=n(166),a.style[n(127)]=n(178),1==i&&(a.style[n(197)]=n(209)),t[n(191)](a),i++}}catch(t){r.e(t)}finally{r.f()}}},{key:P(171),value:function(t){var e,n=P,i=1,r=A(this[n(173)]);try{for(r.s();!(e=r.n())[n(161)];){var a=e[n(160)],s=document[n(159)](n(154));s.style.float=\"left\",s[n(181)][n(128)]=n(212),s[n(181)][n(117)]=n(124);var o=document.createElement(n(165));o.id=n(199).concat(i),o.style.position=\"absolute\",o[n(181)][n(201)]=n(186),o[n(181)].top=n(186),o.style[n(195)]=n(203),o[n(181)][n(168)]=3,o[n(181)].maxWidth=n(124),o[n(181)][n(172)]=\"100%\",o[n(187)]=a[n(153)]+n(118),s.appendChild(o);var u=document[n(159)](\"canvas\");u.width=1e3<this.baseWidth?this[n(148)]:1e3,u[n(172)]=1e3<this[n(145)]?this[n(145)]:1e3,u[n(181)][n(117)]=\"\".concat(this.baseWidth,\"px\"),u[n(181)][n(172)]=\"\"[n(130)](this[n(145)],\"px\"),u.id=\"foxpsd_preview_\".concat(i),s.appendChild(u),t[n(191)](s),i++}}catch(t){r.e(t)}finally{r.f()}}},{key:P(144),value:function(t){var e=P,n=this,i=this;this[e(150)]=new(k())(document[e(204)](\".\"[e(130)](this[e(131)])),{callback:function(t,n){var r=e;i[r(194)]&&i[r(194)](t);for(var a=document[r(177)](\".\"[r(130)](i[r(131)],r(120))),s=0;s<a[r(198)];s++)s==t?a[s].style[r(197)]=r(209):a[s].style.background=r(166)}});var r=D(\"https://img.foxpsd.com/foxpsd_left.png\");r[e(189)]=e(137),t[e(191)](r);var a=this[e(150)][e(140)]();r.onclick=function(){var t=e;0==n.mySwiper[t(176)]()?n[t(150)][t(138)](a-1):n.mySwiper.prev()},(r=D(e(143)))[e(189)]=e(184),r[e(181)][e(201)]=e(207),r[e(181)][e(175)]=\"10px\",t[e(191)](r),r[e(121)]=function(){var t=e;n[t(150)][t(176)]()==a-1?n[t(150)][t(138)](0):n[t(150)][t(202)]()}}}]),L);function L(t,e){var i=O,r=void 0===(a=e.baseWidth)?0:a,a=void 0===(s=e.baseHeight)?0:s,s=void 0===(s=e[i(126)])?null:s;e=e[i(194)],n(this,L),this[i(126)]=s,this[i(173)]=t,this[i(148)]=r,this.baseHeight=a,this._onchange=e,this[i(164)]=null,this.swiperWrap=null,this[i(180)]=null,this[i(150)]=null,this.swiperClass=i(129)}function D(t){var e,n=O,i=document[n(159)](n(154));return i.style.position=\"absolute\",i[n(181)][n(201)]=n(132),i[n(181)][n(117)]=n(123),i[n(181)][n(172)]=n(123),i.style[n(152)]=n(186),i[n(181)][n(168)]=\"10\",i[n(181)][n(213)]=n(139),i.style[n(197)]=\"rgba(0,0,0,.3)\",i[n(181)].borderRadius=\"1000px\",i[n(181)].padding=n(146),i[n(191)]((e=t,n=O,(t=document[n(159)](n(165))).src=e,t[n(181)][n(117)]=n(124),t[n(181)][n(172)]=n(124),t[n(181)][n(192)]=n(200),t)),i}function R(){var t=[\"50%\",\"src\",\"7282499woIVyp\",\"className\",\"from\",\"appendChild\",\"borderRadius\",\"toString\",\"onchange\",\"transform\",\"hidden\",\"background\",\"length\",\"foxpsd_mask_\",\"1000px\",\"left\",\"next\",\"translate(-50%,-50%)\",\"querySelector\",\"return\",\"563340vrJwkn\",\"auto\",\"foxpsd-dot-wrap\",\"#38f\",\"372FwMEXB\",\"name\",\"relative\",\"marginTop\",\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\"string\",\"foxpsd-dot\",\"_onchange\",\"width\",\"?imageMogr2/thumbnail/500x/strip/quality/70/format/webp\",\"24508989wOoifg\",\" .foxpsd-dot\",\"onclick\",\"24246ltmvVv\",\"30px\",\"100%\",\"10dPRoVt\",\"element\",\"margin\",\"position\",\"foxpsd-swiper\",\"concat\",\"swiperClass\",\"10px\",\"Object\",\"iterator\",\"10VtFtNX\",\"flex\",\"foxpsd-left-btn\",\"slide\",\"-15px\",\"getNumSlides\",\"prototype\",\"constructor\",\"https://img.foxpsd.com/foxpsd_right.png\",\"createSwiper\",\"baseHeight\",\"5px\",\"swiperWrap\",\"baseWidth\",\"Arguments\",\"mySwiper\",\"display\",\"top\",\"img_url\",\"div\",\"renderHtml\",\"592586zCuvab\",\"number\",\"test\",\"createElement\",\"value\",\"done\",\"call\",\"Map\",\"swiperEl\",\"img\",\"#999\",\"int\",\"zIndex\",\"overflow\",\"3630972XkyBLm\",\"renderSwiperItem\",\"height\",\"xiaoguotuList\",\"renderDots\",\"right\",\"getPos\",\"querySelectorAll\",\"0 5px\",\"4088280GAqRsW\",\"dotWrap\",\"style\",\"isArray\",\"center\",\"foxpsd-right-btn\",\"alignItems\"];return(R=function(){return t})()}var N=i(3267),F=i.n(N),B=i(9669),z=i.n(B);function j(t,e){var n=H,i=\"undefined\"!=typeof Symbol&&t[Symbol[n(358)]]||t[\"@@iterator\"];if(!i){if(Array[n(408)](t)||(i=function(t,e){var n=H;if(t){if(x(t)===n(366))return U(t,e);var i=Object[n(365)][n(375)][n(421)](t).slice(8,-1);return(i=i===n(367)&&t[n(373)]?t[n(373)][n(355)]:i)===n(368)||i===n(377)?Array.from(t):i===n(390)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[n(349)](i)?U(t,e):void 0}}(t))||e&&t&&x(t[n(350)])===n(394)){i&&(t=i);var r=0;return{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(n(343))}var a,s=!0,o=!1;return{s:function(){i=i[n(421)](t)},n:function(){var t=i[n(410)]();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw a}}}}function U(t,e){var n=H;(null==e||e>t[n(350)])&&(e=t[n(350)]);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function V(){var t=[\"rect\",\"prev\",\"split\",\"width\",\"height\",\"Arguments\",\"get\",\"replace\",\"src\",\"number\",\"push\",\"readAsDataURL\",\"3427925tdngOE\",\"?imageMogr2\",\"6VDEVON\",\"apply\",\"lastIndexOf\",\"Matrix3\",\"abrupt\",\"result\",\"setAttribute\",\"Anonymous\",\"mark\",\"isArray\",\"responseXML\",\"next\",\"substring\",\"data-matrix3\",\"path\",\"svg\",\"getAttribute\",\"?imageView2\",\"wrap\",\"return\",\"getTime\",\"10DqNNzY\",\"call\",\"end\",\"xlink:href\",\":application/octet-stream;\",\"href\",\"concat\",\"12422RtNPby\",\"sent\",\"wrapHeight\",\"8sptldt\",\"2787333MxmnwC\",\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\"84276VEJXPq\",\"indexOf\",\"4FBVhDT\",\"map\",\"2413098drBXHI\",\"test\",\"length\",\"___\",\"wrapWidth\",\"data-rect\",\"originalSize\",\"name\",\"data\",\"blob\",\"iterator\",\"4017kgxDeF\",\"8375631mTxVaJ\",\"getElementsByTagName\",\"image\",\"abs\",\"forEach\",\"prototype\",\"string\",\"Object\",\"Map\",\"BoundingRect\",\"parentNode\",\":image/\",\"points\",\"constructor\",\"random\",\"toString\",\"6791337VECDHK\",\"Set\",\"getElementById\",\"stop\",\"img_url\",\"crossorigin\",\"187whyKRa\",\"transform\",\"value\"];return(V=function(){return t})()}function W(){var t=H,e=(new Date)[t(419)]();return Math[t(363)]((1+Math[t(374)]())*e|0).toString(16)}!function(){for(var t=H,e=V();;)try{if(623612==-parseInt(t(382))*(parseInt(t(338))/2)+parseInt(t(342))/3*(parseInt(t(346))/4)+-parseInt(t(397))/5*(-parseInt(t(399))/6)+parseInt(t(376))/7*(-parseInt(t(341))/8)+-parseInt(t(348))/9+-parseInt(t(420))/10*(parseInt(t(360))/11)+parseInt(t(344))/12*(parseInt(t(359))/13))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();var G=\"?imageMogr2/strip/quality/70/format/webp\";function H(t,e){var n=V();return(H=function(t,e){return n[t-=334]})(t,e)}function X(){var t=H;return(X=S(M()[t(407)]((function t(e){var n,i,r,a,s,o,u,l,c,h,f,d,p,g,v,m,y;return M().wrap((function(t){for(var _=H;;)switch(t[_(386)]=t[_(410)]){case 0:return t[_(410)]=2,z()[_(391)](e);case 2:g=t[_(339)],n=g.request[_(409)],i=[],r=[],g=n[_(361)](_(414))[0],a=Number(g[_(415)](\"width\")),s=Number(g[_(415)](_(389))),g=n.getElementsByTagName(_(362)),o=j(g);try{for(o.s();!(u=o.n()).done;)l=u[_(384)],c=l.getAttribute(_(334)),-1!=(h=l[_(415)](_(336)))[_(345)](_(416))&&-1!=h[_(345)](_(398))||(l[_(405)](_(336),h+G),l[_(405)](_(334),c+G))}catch(t){o.e(t)}finally{o.f()}for(f=n[_(361)](\"g\"),d=0;d<f[_(350)];d++)p=f[d][_(415)](\"id\"),f[d][_(405)](\"id\",\"\".concat(W(),\"_\")[_(337)](p));g=n[_(361)](\"use\"),v=j(g);try{for(y=function(){var t,e,o=_,u=m.value,l={},c=u[o(415)](o(334))[o(392)](\"#\",\"\"),h=(e=n[o(378)](c))[o(415)](\"href\");l[o(380)]=h,r[o(395)](Y(h)),c=Number(e.getAttribute(o(388))),h=Number(e[o(415)](o(389))),l[o(354)]=\"\".concat(c,\",\")[o(337)](h),l[o(352)]=a,l[o(340)]=s,(e=u[o(415)](o(383)))?(t=(t=e[o(411)](7,e.length-1)[o(387)](\",\")).map((function(t){return Number(t)})),e=[1,0,0,1,c/2,h/2],t=[(t=t)[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]],u.setAttribute(o(383),\"matrix(\".concat(t.join(),\")\"))):(t=Number(u[o(415)](\"x\"))||0,p=Number(u[o(415)](\"y\"))||0,u[o(405)](\"x\",t+c/2),u.setAttribute(\"y\",p+h/2));var f,d,p=u[o(370)][o(415)](\"clip-path\");p&&(p=p[o(411)](5,p[o(350)]-1),f=n[o(378)](p).getElementsByTagName(o(413))[0].getAttribute(\"d\"),l.clipPath=f),l[o(402)]=u[o(415)](o(412)),l[o(402)]&&(l[o(402)]=l.Matrix3[o(387)](\",\")[o(347)]((function(t){return Number(t)})),l.Matrix3=[l[o(402)][0],l[o(402)][3],l[o(402)][6],l.Matrix3[1],l[o(402)][4],l[o(402)][7],l[o(402)][2],l[o(402)][5],l[o(402)][8]]),l[o(385)]=u[o(415)](o(353)),l[o(385)]&&(l[o(385)]=l[o(385)].split(\",\")[o(347)]((function(t){return Number(t)}))),l.BoundingRect=u[o(415)](\"data-BoundingRect\"),l[o(369)]&&(l[o(369)]=l[o(369)][o(387)](\",\")[o(347)]((function(t){return Number(t)}))),u[o(415)](\"data-points-x\")&&(l[o(372)]=(p=u[(h=o)(415)](\"data-points-x\").split(\",\"),f=u[h(415)](\"data-points-y\")[h(387)](\",\"),d=[],[p,f][h(364)]((function(t,e){t.forEach((function(t,n){d[n]||(d[n]={}),d[n][0==e?\"x\":\"y\"]=Number(t)}))})),d)),u[o(415)](\"id\")&&(l.id=u[o(415)](\"id\")+o(351)+W(),u.setAttribute(\"id\",l.id)),i[o(395)](l)},v.s();!(m=v.n()).done;)y()}catch(t){v.e(t)}finally{v.f()}return t[_(403)](_(418),{layerInfo:i,docementSvg:n,wrapWidth:a,wrapHeight:s});case 18:case _(422):return t[_(379)]()}}),t)}))))[t(400)](this,arguments)}function Y(t){return new Promise((e=H,n=S(M()[e(407)]((function n(i){var r,a=e;return M()[a(417)]((function(e){for(var n=a;;)switch(e.prev=e[n(410)]){case 0:(r=new Image)[n(381)]=n(406),r.onload=function(){i(r)},r[n(393)]=t;case 4:case\"end\":return e[n(379)]()}}),n)}))),function(t){return n[e(400)](this,arguments)}));var e,n}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function J(t,e){if(t){if(\"string\"==typeof t)return q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Map\"===(n=\"Object\"===n&&t.constructor?t.constructor.name:n)||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(t,e):void 0}}function Z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(null!=n){var i,r,a=[],s=!0,o=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(a.push(i.value),!e||a.length!==e);s=!0);}catch(t){o=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(o)throw r}}return a}}(t,e)||J(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function K(t){return function(t){if(Array.isArray(t))return q(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t[\"@@iterator\"])return Array.from(t)}(t)||J(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}for(var Q=\"136\",$={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},tt={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},et=0,nt=1,it=2,rt=3,at=0,st=1,ot=2,ut=3,lt=0,ct=1,ht=2,ft=1,dt=2,pt=0,gt=1,vt=2,mt=3,yt=4,_t=5,xt=100,bt=101,wt=102,St=103,Ct=104,Mt=200,Tt=201,kt=202,At=203,Et=204,Ot=205,Pt=206,It=207,Lt=208,Dt=209,Rt=210,Nt=0,Ft=1,Bt=2,zt=3,jt=4,Ut=5,Vt=6,Wt=7,Gt=0,Ht=1,Xt=2,Yt=0,qt=1,Jt=2,Zt=3,Kt=4,Qt=5,$t=300,te=301,ee=302,ne=303,ie=304,re=306,ae=307,se=1e3,oe=1001,ue=1002,le=1003,ce=1004,he=1004,fe=1005,de=1005,pe=1006,ge=1007,ve=1007,me=1008,ye=1008,_e=1009,xe=1010,be=1011,we=1012,Se=1013,Ce=1014,Me=1015,Te=1016,ke=1017,Ae=1018,Ee=1019,Oe=1020,Pe=1021,Ie=1022,Le=1023,De=1024,Re=1025,Ne=1026,Fe=1027,Be=1028,ze=1029,je=1030,Ue=1031,Ve=1032,We=1033,Ge=33776,He=33777,Xe=33778,Ye=33779,qe=35840,Je=35841,Ze=35842,Ke=35843,Qe=36196,$e=37492,tn=37496,en=37808,nn=37809,rn=37810,an=37811,sn=37812,on=37813,un=37814,ln=37815,cn=37816,hn=37817,fn=37818,dn=37819,pn=37820,gn=37821,vn=36492,mn=37840,yn=37841,_n=37842,xn=37843,bn=37844,wn=37845,Sn=37846,Cn=37847,Mn=37848,Tn=37849,kn=37850,An=37851,En=37852,On=37853,Pn=2200,In=2201,Ln=2202,Dn=2300,Rn=2301,Nn=2302,Fn=2400,Bn=2401,zn=2402,jn=2500,Un=2501,Vn=0,Wn=1,Gn=2,Hn=3e3,Xn=3001,Yn=3200,qn=3201,Jn=0,Zn=1,Kn=0,Qn=7680,$n=7681,ti=7682,ei=7683,ni=34055,ii=34056,ri=5386,ai=512,si=513,oi=514,ui=515,li=516,ci=517,hi=518,fi=519,di=35044,pi=35048,gi=35040,vi=35045,mi=35049,yi=35041,_i=35046,xi=35050,bi=35042,wi=\"100\",Si=\"300 es\",Ci=function(){function t(){y(this,t)}return _(t,[{key:\"addEventListener\",value:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}},{key:\"hasEventListener\",value:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}},{key:\"removeEventListener\",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];void 0===n||-1!==(e=n.indexOf(e))&&n.splice(e,1)}}},{key:\"dispatchEvent\",value:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t);t.target=null}}}}]),t}(),Mi=[],Ti=0;Ti<256;Ti++)Mi[Ti]=(Ti<16?\"0\":\"\")+Ti.toString(16);var ki=1234567,Ai=Math.PI/180,Ei=180/Math.PI;function Oi(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Mi[255&t]+Mi[t>>8&255]+Mi[t>>16&255]+Mi[t>>24&255]+\"-\"+Mi[255&e]+Mi[e>>8&255]+\"-\"+Mi[e>>16&15|64]+Mi[e>>24&255]+\"-\"+Mi[63&n|128]+Mi[n>>8&255]+\"-\"+Mi[n>>16&255]+Mi[n>>24&255]+Mi[255&i]+Mi[i>>8&255]+Mi[i>>16&255]+Mi[i>>24&255]).toUpperCase()}function Pi(t,e,n){return Math.max(e,Math.min(n,t))}function Ii(t,e){return(t%e+e)%e}function Li(t,e,n){return(1-n)*t+n*e}function Di(t){return 0==(t&t-1)&&0!==t}function Ri(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Ni(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var Fi=Object.freeze({__proto__:null,DEG2RAD:Ai,RAD2DEG:Ei,generateUUID:Oi,clamp:Pi,euclideanModulo:Ii,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:Li,damp:function(t,e,n,i){return Li(t,e,1-Math.exp(-n*i))},pingpong:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(Ii(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(ki=t%2147483647),ki=16807*ki%2147483647,(ki-1)/2147483646},degToRad:function(t){return t*Ai},radToDeg:function(t){return t*Ei},isPowerOfTwo:Di,ceilPowerOfTwo:Ri,floorPowerOfTwo:Ni,setQuaternionFromProperEuler:function(t,e,n,i,r){var a=Math.cos,s=Math.sin,o=a(n/2),u=s(n/2),l=a((e+i)/2),c=s((e+i)/2),h=a((e-i)/2),f=s((e-i)/2),d=a((i-e)/2),p=s((i-e)/2);switch(r){case\"XYX\":t.set(o*c,u*h,u*f,o*l);break;case\"YZY\":t.set(u*f,o*c,u*h,o*l);break;case\"ZXZ\":t.set(u*h,u*f,o*c,o*l);break;case\"XZX\":t.set(o*c,u*p,u*d,o*l);break;case\"YXY\":t.set(u*d,o*c,u*p,o*l);break;case\"ZYZ\":t.set(u*p,u*d,o*c,o*l)}}}),Bi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;y(this,e),this.x=t,this.y=n}return _(e,[{key:\"width\",get:function(){return this.x},set:function(t){this.x=t}},{key:\"height\",get:function(){return this.y},set:function(t){this.y=t}},{key:\"set\",value:function(t,e){return this.x=t,this.y=e,this}},{key:\"setScalar\",value:function(t){return this.x=t,this.y=t,this}},{key:\"setX\",value:function(t){return this.x=t,this}},{key:\"setY\",value:function(t){return this.y=t,this}},{key:\"setComponent\",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error(\"index is out of range: \"+t)}return this}},{key:\"getComponent\",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error(\"index is out of range: \"+t)}}},{key:\"clone\",value:function(){return new this.constructor(this.x,this.y)}},{key:\"copy\",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:\"add\",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)}},{key:\"addScalar\",value:function(t){return this.x+=t,this.y+=t,this}},{key:\"addVectors\",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:\"addScaledVector\",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}},{key:\"sub\",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)}},{key:\"subScalar\",value:function(t){return this.x-=t,this.y-=t,this}},{key:\"subVectors\",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:\"multiply\",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:\"multiplyScalar\",value:function(t){return this.x*=t,this.y*=t,this}},{key:\"divide\",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:\"divideScalar\",value:function(t){return this.multiplyScalar(1/t)}},{key:\"applyMatrix3\",value:function(t){var e=this.x,n=this.y;return t=t.elements,this.x=t[0]*e+t[3]*n+t[6],this.y=t[1]*e+t[4]*n+t[7],this}},{key:\"min\",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:\"max\",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:\"clamp\",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}},{key:\"clampScalar\",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}},{key:\"clampLength\",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:\"floor\",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:\"ceil\",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:\"round\",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:\"roundToZero\",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:\"negate\",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:\"dot\",value:function(t){return this.x*t.x+this.y*t.y}},{key:\"cross\",value:function(t){return this.x*t.y-this.y*t.x}},{key:\"lengthSq\",value:function(){return this.x*this.x+this.y*this.y}},{key:\"length\",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:\"manhattanLength\",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:\"normalize\",value:function(){return this.divideScalar(this.length()||1)}},{key:\"angle\",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:\"distanceTo\",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:\"distanceToSquared\",value:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t}},{key:\"manhattanDistanceTo\",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:\"setLength\",value:function(t){return this.normalize().multiplyScalar(t)}},{key:\"lerp\",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:\"lerpVectors\",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}},{key:\"equals\",value:function(t){return t.x===this.x&&t.y===this.y}},{key:\"fromArray\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:\"toArray\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:\"fromBufferAttribute\",value:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this}},{key:\"rotateAround\",value:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x;return e=this.y-t.y,this.x=r*n-e*i+t.x,this.y=r*i+e*n+t.y,this}},{key:\"random\",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:t,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:case\"end\":return t.stop()}}),t,this)}))}]),e}(Symbol.iterator);Bi.prototype.isVector2=!0;var zi=function(){function t(){y(this,t),this.elements=[1,0,0,0,1,0,0,0,1]}return _(t,[{key:\"set\",value:function(t,e,n,i,r,a,s,o,u){var l=this.elements;return l[0]=t,l[1]=i,l[2]=s,l[3]=e,l[4]=r,l[5]=o,l[6]=n,l[7]=a,l[8]=u,this}},{key:\"identity\",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:\"copy\",value:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this}},{key:\"extractBasis\",value:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:\"setFromMatrix4\",value:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:\"multiply\",value:function(t){return this.multiplyMatrices(this,t)}},{key:\"premultiply\",value:function(t){return this.multiplyMatrices(t,this)}},{key:\"multiplyMatrices\",value:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],s=n[3],o=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=i[0],g=i[3],v=i[6],m=i[1],y=i[4];return t=i[7],e=i[2],n=i[5],i=i[8],r[0]=a*p+s*m+o*e,r[3]=a*g+s*y+o*n,r[6]=a*v+s*t+o*i,r[1]=u*p+l*m+c*e,r[4]=u*g+l*y+c*n,r[7]=u*v+l*t+c*i,r[2]=h*p+f*m+d*e,r[5]=h*g+f*y+d*n,r[8]=h*v+f*t+d*i,this}},{key:\"multiplyScalar\",value:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}},{key:\"determinant\",value:function(){var t,e=(t=this.elements)[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],u=t[7];return e*a*(t=t[8])-e*s*u-n*r*t+n*s*o+i*r*u-i*a*o}},{key:\"invert\",value:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],u=t[7],l=t[8],c=l*a-s*u,h=s*o-l*r,f=u*r-a*o,d=e*c+n*h+i*f;if(0==d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return t[0]=c*p,t[1]=(i*u-l*n)*p,t[2]=(s*n-i*a)*p,t[3]=h*p,t[4]=(l*e-i*o)*p,t[5]=(i*r-s*e)*p,t[6]=f*p,t[7]=(n*o-u*e)*p,t[8]=(a*e-n*r)*p,this}},{key:\"transpose\",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:\"getNormalMatrix\",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:\"transposeIntoArray\",value:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}},{key:\"setUvTransform\",value:function(t,e,n,i,r,a,s){var o=Math.cos(r);return r=Math.sin(r),this.set(n*o,n*r,-n*(o*a+r*s)+a+t,-i*r,i*o,-i*(-r*a+o*s)+s+e,0,0,1),this}},{key:\"scale\",value:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}},{key:\"rotate\",value:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],a=i[3],s=i[6],o=i[1],u=i[4];return t=i[7],i[0]=e*r+n*o,i[3]=e*a+n*u,i[6]=e*s+n*t,i[1]=-n*r+e*o,i[4]=-n*a+e*u,i[7]=-n*s+e*t,this}},{key:\"translate\",value:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}},{key:\"equals\",value:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}},{key:\"fromArray\",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=t[n+e];return this}},{key:\"toArray\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},{key:\"clone\",value:function(){return(new this.constructor).fromArray(this.elements)}}]),t}();function ji(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}zi.prototype.isMatrix3=!0;var Ui,Vi={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Wi(t,e){return new Vi[t](e)}function Gi(t){return document.createElementNS(\"http://www.w3.org/1999/xhtml\",t)}var Hi=function(){function t(){y(this,t)}return _(t,null,[{key:\"getDataURL\",value:function(t){if(/^data:/i.test(t.src))return t.src;if(\"undefined\"==typeof HTMLCanvasElement)return t.src;var e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Ui&&(Ui=Gi(\"canvas\")),Ui.width=t.width,Ui.height=t.height;var n=Ui.getContext(\"2d\");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Ui}return 2048<e.width||2048<e.height?e.toDataURL(\"image/jpeg\",.6):e.toDataURL(\"image/png\")}}]),t}(),Xi=0,Yi=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oe,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:oe,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:pe,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:me,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Le,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:_e,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Hn;return y(this,n),t=e.call(this),Object.defineProperty(g(t),\"id\",{value:Xi++}),t.uuid=Oi(),t.name=\"\",t.image=i,t.mipmaps=[],t.mapping=r,t.wrapS=a,t.wrapT=s,t.magFilter=o,t.minFilter=u,t.anisotropy=h,t.format=l,t.internalFormat=null,t.type=c,t.offset=new Bi(0,0),t.repeat=new Bi(1,1),t.center=new Bi(0,0),t.rotation=0,t.matrixAutoUpdate=!0,t.matrix=new zi,t.generateMipmaps=!0,t.premultiplyAlpha=!1,t.flipY=!0,t.unpackAlignment=4,t.encoding=f,t.userData={},t.version=0,t.onUpdate=null,t.isRenderTargetTexture=!1,t}return _(n,[{key:\"updateMatrix\",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}},{key:\"toJSON\",value:function(t){var e=void 0===t||\"string\"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=Oi()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var a=0,s=i.length;a<s;a++)i[a].isDataTexture?r.push(qi(i[a].image)):r.push(qi(i[a]))}else r=qi(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return\"{}\"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}},{key:\"transformUv\",value:function(t){if(this.mapping!==$t)return t;if(t.applyMatrix3(this.matrix),t.x<0||1<t.x)switch(this.wrapS){case se:t.x=t.x-Math.floor(t.x);break;case oe:t.x=t.x<0?0:1;break;case ue:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||1<t.y)switch(this.wrapT){case se:t.y=t.y-Math.floor(t.y);break;case oe:t.y=t.y<0?0:1;break;case ue:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}},{key:\"needsUpdate\",set:function(t){!0===t&&this.version++}}]),n}(Ci);function qi(t){return\"undefined\"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||\"undefined\"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&t instanceof ImageBitmap?Hi.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:{}}Yi.DEFAULT_IMAGE=void 0,Yi.DEFAULT_MAPPING=$t,Yi.prototype.isTexture=!0;var Ji=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;y(this,e),this.x=t,this.y=n,this.z=i,this.w=r}return _(e,[{key:\"width\",get:function(){return this.z},set:function(t){this.z=t}},{key:\"height\",get:function(){return this.w},set:function(t){this.w=t}},{key:\"set\",value:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}},{key:\"setScalar\",value:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}},{key:\"setX\",value:function(t){return this.x=t,this}},{key:\"setY\",value:function(t){return this.y=t,this}},{key:\"setZ\",value:function(t){return this.z=t,this}},{key:\"setW\",value:function(t){return this.w=t,this}},{key:\"setComponent\",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error(\"index is out of range: \"+t)}return this}},{key:\"getComponent\",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(\"index is out of range: \"+t)}}},{key:\"clone\",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:\"copy\",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}},{key:\"add\",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}},{key:\"addScalar\",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}},{key:\"addVectors\",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}},{key:\"addScaledVector\",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}},{key:\"sub\",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}},{key:\"subScalar\",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}},{key:\"subVectors\",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}},{key:\"multiply\",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:\"multiplyScalar\",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:\"applyMatrix4\",value:function(t){var e=this.x,n=this.y,i=this.z,r=this.w;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i+t[12]*r,this.y=t[1]*e+t[5]*n+t[9]*i+t[13]*r,this.z=t[2]*e+t[6]*n+t[10]*i+t[14]*r,this.w=t[3]*e+t[7]*n+t[11]*i+t[15]*r,this}},{key:\"divideScalar\",value:function(t){return this.multiplyScalar(1/t)}},{key:\"setAxisAngleFromQuaternion\",value:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}},{key:\"setAxisAngleFromRotationMatrix\",value:function(t){var e,n,i,r,a=(y=t.elements)[0],s=y[4],o=y[8],u=y[1],l=y[5],c=y[9],h=y[2],f=y[6],d=y[10];if(Math.abs(s-u)<.01&&Math.abs(o-h)<.01&&Math.abs(c-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(o+h)<.1&&Math.abs(c+f)<.1&&Math.abs(a+l+d-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var p=(a+1)/2,g=(l+1)/2,v=(d+1)/2,m=(s+u)/4,y=(t=(o+h)/4,(c+f)/4);return g<p&&v<p?r=p<.01?(n=0,i=.707106781):(n=Math.sqrt(p),i=m/n,t/n):v<g?r=g<.01?(n=.707106781,i=0,.707106781):(i=Math.sqrt(g),n=m/i,y/i):v<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=t/r,i=y/r),this.set(n,i,r,e),this}var _=Math.sqrt((f-c)*(f-c)+(o-h)*(o-h)+(u-s)*(u-s));return Math.abs(_)<.001&&(_=1),this.x=(f-c)/_,this.y=(o-h)/_,this.z=(u-s)/_,this.w=Math.acos((a+l+d-1)/2),this}},{key:\"min\",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}},{key:\"max\",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}},{key:\"clamp\",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}},{key:\"clampScalar\",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}},{key:\"clampLength\",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:\"floor\",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:\"ceil\",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:\"round\",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:\"roundToZero\",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:\"negate\",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:\"dot\",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:\"lengthSq\",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:\"length\",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:\"manhattanLength\",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:\"normalize\",value:function(){return this.divideScalar(this.length()||1)}},{key:\"setLength\",value:function(t){return this.normalize().multiplyScalar(t)}},{key:\"lerp\",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}},{key:\"lerpVectors\",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}},{key:\"equals\",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}},{key:\"fromArray\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}},{key:\"toArray\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}},{key:\"fromBufferAttribute\",value:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},{key:\"random\",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:t,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:return t.next=8,this.w;case 8:case\"end\":return t.stop()}}),t,this)}))}]),e}(Symbol.iterator);Ji.prototype.isVector4=!0;var Zi=function(t){v(n,t);var e=m(n);function n(t,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y(this,n),r=e.call(this),r.width=t,r.height=i,r.depth=1,r.scissor=new Ji(0,0,t,i),r.scissorTest=!1,r.viewport=new Ji(0,0,t,i),r.texture=new Yi(void 0,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),r.texture.isRenderTargetTexture=!0,r.texture.image={width:t,height:i,depth:1},r.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,r.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,r.texture.minFilter=void 0!==a.minFilter?a.minFilter:pe,r.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,r.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,r.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,r}return _(n,[{key:\"setTexture\",value:function(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}},{key:\"setSize\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image=p({},this.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}}]),n}(Ci);Zi.prototype.isWebGLRenderTarget=!0;var Ki=function(t){v(n,t);var e=m(n);function n(t,i,r){var a;y(this,n),a=e.call(this,t,i);var s=a.texture;a.texture=[];for(var o=0;o<r;o++)a.texture[o]=s.clone();return a}return _(n,[{key:\"setSize\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(var i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}},{key:\"copy\",value:function(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture;for(var e=this.texture.length=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}]),n}(Zi);Ki.prototype.isWebGLMultipleRenderTargets=!0;var Qi=function(t){v(n,t);var e=m(n);function n(t,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y(this,n),r=e.call(this,t,i,a),r.samples=4,r.ignoreDepthForMultisampleCopy=void 0===a.ignoreDepth||a.ignoreDepth,r.useRenderToTexture=void 0!==a.useRenderToTexture&&a.useRenderToTexture,r.useRenderbuffer=!1===r.useRenderToTexture,r}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.samples=t.samples,this.useRenderToTexture=t.useRenderToTexture,this.useRenderbuffer=t.useRenderbuffer,this}}]),n}(Zi);Qi.prototype.isWebGLMultisampleRenderTarget=!0;var $i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;y(this,t),this._x=e,this._y=n,this._z=i,this._w=r}return _(t,[{key:\"x\",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:\"y\",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:\"z\",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:\"w\",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},{key:\"set\",value:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}},{key:\"clone\",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:\"copy\",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:\"setFromEuler\",value:function(t,e){if(!t||!t.isEuler)throw new Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");var n=t._x,i=t._y,r=t._z;t=t._order;var a=Math.cos,s=Math.sin,o=a(n/2),u=a(i/2),l=a(r/2),c=s(n/2),h=s(i/2),f=s(r/2);switch(t){case\"XYZ\":this._x=c*u*l+o*h*f,this._y=o*h*l-c*u*f,this._z=o*u*f+c*h*l,this._w=o*u*l-c*h*f;break;case\"YXZ\":this._x=c*u*l+o*h*f,this._y=o*h*l-c*u*f,this._z=o*u*f-c*h*l,this._w=o*u*l+c*h*f;break;case\"ZXY\":this._x=c*u*l-o*h*f,this._y=o*h*l+c*u*f,this._z=o*u*f+c*h*l,this._w=o*u*l-c*h*f;break;case\"ZYX\":this._x=c*u*l-o*h*f,this._y=o*h*l+c*u*f,this._z=o*u*f-c*h*l,this._w=o*u*l+c*h*f;break;case\"YZX\":this._x=c*u*l+o*h*f,this._y=o*h*l+c*u*f,this._z=o*u*f-c*h*l,this._w=o*u*l-c*h*f;break;case\"XZY\":this._x=c*u*l-o*h*f,this._y=o*h*l-c*u*f,this._z=o*u*f+c*h*l,this._w=o*u*l+c*h*f}return!1!==e&&this._onChangeCallback(),this}},{key:\"setFromAxisAngle\",value:function(t,e){var n=e/2;return e=Math.sin(n),this._x=t.x*e,this._y=t.y*e,this._z=t.z*e,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:\"setFromRotationMatrix\",value:function(t){var e,n,i=(n=t.elements)[0],r=n[4],a=n[8],s=n[1],o=n[5],u=n[9],l=n[2],c=n[6];return 0<(n=i+o+(t=n[10]))?(n=.5/Math.sqrt(n+1),this._w=.25/n,this._x=(c-u)*n,this._y=(a-l)*n,this._z=(s-r)*n):o<i&&t<i?(e=2*Math.sqrt(1+i-o-t),this._w=(c-u)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(a+l)/e):t<o?(e=2*Math.sqrt(1+o-i-t),this._w=(a-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(u+c)/e):(o=2*Math.sqrt(1+t-i-o),this._w=(s-r)/o,this._x=(a+l)/o,this._y=(u+c)/o,this._z=.25*o),this._onChangeCallback(),this}},{key:\"setFromUnitVectors\",value:function(t,e){var n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=n,this.normalize()}},{key:\"angleTo\",value:function(t){return 2*Math.acos(Math.abs(Pi(this.dot(t),-1,1)))}},{key:\"rotateTowards\",value:function(t,e){var n=this.angleTo(t);return 0===n||(n=Math.min(1,e/n),this.slerp(t,n)),this}},{key:\"identity\",value:function(){return this.set(0,0,0,1)}},{key:\"invert\",value:function(){return this.conjugate()}},{key:\"conjugate\",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:\"dot\",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:\"lengthSq\",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:\"length\",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:\"normalize\",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:\"multiply\",value:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)}},{key:\"premultiply\",value:function(t){return this.multiplyQuaternions(t,this)}},{key:\"multiplyQuaternions\",value:function(t,e){var n=t._x,i=t._y,r=t._z,a=t._w,s=e._x,o=e._y;return t=e._z,e=e._w,this._x=n*e+a*s+i*t-r*o,this._y=i*e+a*o+r*s-n*t,this._z=r*e+a*t+n*o-i*s,this._w=a*e-n*s-i*o-r*t,this._onChangeCallback(),this}},{key:\"slerp\",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w,s=a*t._w+n*t._x+i*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),1<=s)return this._w=a,this._x=n,this._y=i,this._z=r,this;var o=1-s*s;if(o<=Number.EPSILON){var u=1-e;return this._w=u*a+e*this._w,this._x=u*n+e*this._x,this._y=u*i+e*this._y,this._z=u*r+e*this._z,this.normalize(),this._onChangeCallback(),this}return t=Math.sqrt(o),u=Math.atan2(t,s),o=Math.sin((1-e)*u)/t,t=Math.sin(e*u)/t,this._w=a*o+this._w*t,this._x=n*o+this._x*t,this._y=i*o+this._y*t,this._z=r*o+this._z*t,this._onChangeCallback(),this}},{key:\"slerpQuaternions\",value:function(t,e,n){this.copy(t).slerp(e,n)}},{key:\"random\",value:function(){var t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random();return t=2*Math.PI*Math.random(),this.set(e*Math.cos(i),n*Math.sin(t),n*Math.cos(t),e*Math.sin(i))}},{key:\"equals\",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:\"fromArray\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:\"toArray\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:\"fromBufferAttribute\",value:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}},{key:\"_onChange\",value:function(t){return this._onChangeCallback=t,this}},{key:\"_onChangeCallback\",value:function(){}}],[{key:\"slerp\",value:function(t,e,n,i){return n.slerpQuaternions(t,e,i)}},{key:\"slerpFlat\",value:function(t,e,n,i,r,a,s){var o=n[i+0],u=n[i+1],l=n[i+2],c=n[i+3],h=r[a+0],f=r[a+1],d=r[a+2];if(n=r[a+3],0===s)return t[e+0]=o,t[e+1]=u,t[e+2]=l,void(t[e+3]=c);if(1===s)return t[e+0]=h,t[e+1]=f,t[e+2]=d,void(t[e+3]=n);if(c!==n||o!==h||u!==f||l!==d){var p=1-s;r=0<=(i=o*h+u*f+l*d+c*n)?1:-1,(a=1-i*i)>Number.EPSILON&&(a=Math.sqrt(a),i=Math.atan2(a,i*r),p=Math.sin(p*i)/a,s=Math.sin(s*i)/a),o=o*p+h*(r*=s),u=u*p+f*r,l=l*p+d*r,c=c*p+n*r,p===1-s&&(o*=s=1/Math.sqrt(o*o+u*u+l*l+c*c),u*=s,l*=s,c*=s)}t[e]=o,t[e+1]=u,t[e+2]=l,t[e+3]=c}},{key:\"multiplyQuaternionsFlat\",value:function(t,e,n,i,r,a){var s=n[i],o=n[i+1],u=n[i+2],l=n[i+3],c=r[a];return n=r[a+1],i=r[a+2],a=r[a+3],t[e]=s*a+l*c+o*i-u*n,t[e+1]=o*a+l*n+u*c-s*i,t[e+2]=u*a+l*i+s*n-o*c,t[e+3]=l*a-s*c-o*n-u*i,t}}]),t}();$i.prototype.isQuaternion=!0;var tr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;y(this,e),this.x=t,this.y=n,this.z=i}return _(e,[{key:\"set\",value:function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}},{key:\"setScalar\",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:\"setX\",value:function(t){return this.x=t,this}},{key:\"setY\",value:function(t){return this.y=t,this}},{key:\"setZ\",value:function(t){return this.z=t,this}},{key:\"setComponent\",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error(\"index is out of range: \"+t)}return this}},{key:\"getComponent\",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(\"index is out of range: \"+t)}}},{key:\"clone\",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:\"copy\",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:\"add\",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:\"addScalar\",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:\"addVectors\",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:\"addScaledVector\",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:\"sub\",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:\"subScalar\",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:\"subVectors\",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:\"multiply\",value:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:\"multiplyScalar\",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:\"multiplyVectors\",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:\"applyEuler\",value:function(t){return t&&t.isEuler,this.applyQuaternion(nr.setFromEuler(t))}},{key:\"applyAxisAngle\",value:function(t,e){return this.applyQuaternion(nr.setFromAxisAngle(t,e))}},{key:\"applyMatrix3\",value:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[3]*n+t[6]*i,this.y=t[1]*e+t[4]*n+t[7]*i,this.z=t[2]*e+t[5]*n+t[8]*i,this}},{key:\"applyNormalMatrix\",value:function(t){return this.applyMatrix3(t).normalize()}},{key:\"applyMatrix4\",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return t=1/(r[3]*e+r[7]*n+r[11]*i+r[15]),this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*t,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*t,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*t,this}},{key:\"applyQuaternion\",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,s=t.z,o=t.w,u=o*e+a*i-s*n,l=o*n+s*e-r*i;return t=o*i+r*n-a*e,i=-r*e-a*n-s*i,this.x=u*o+i*-r+l*-s-t*-a,this.y=l*o+i*-a+t*-r-u*-s,this.z=t*o+i*-s+u*-a-l*-r,this}},{key:\"project\",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:\"unproject\",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:\"transformDirection\",value:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i,this.y=t[1]*e+t[5]*n+t[9]*i,this.z=t[2]*e+t[6]*n+t[10]*i,this.normalize()}},{key:\"divide\",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:\"divideScalar\",value:function(t){return this.multiplyScalar(1/t)}},{key:\"min\",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:\"max\",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:\"clamp\",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:\"clampScalar\",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:\"clampLength\",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:\"floor\",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:\"ceil\",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:\"round\",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:\"roundToZero\",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:\"negate\",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:\"dot\",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:\"lengthSq\",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:\"length\",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:\"manhattanLength\",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:\"normalize\",value:function(){return this.divideScalar(this.length()||1)}},{key:\"setLength\",value:function(t){return this.normalize().multiplyScalar(t)}},{key:\"lerp\",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:\"lerpVectors\",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}},{key:\"cross\",value:function(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)}},{key:\"crossVectors\",value:function(t,e){var n=t.x,i=t.y,r=t.z,a=e.x;return t=e.y,e=e.z,this.x=i*e-r*t,this.y=r*a-n*e,this.z=n*t-i*a,this}},{key:\"projectOnVector\",value:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))}},{key:\"projectOnPlane\",value:function(t){return er.copy(this).projectOnVector(t),this.sub(er)}},{key:\"reflect\",value:function(t){return this.sub(er.copy(t).multiplyScalar(2*this.dot(t)))}},{key:\"angleTo\",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(e=this.dot(t)/e,Math.acos(Pi(e,-1,1)))}},{key:\"distanceTo\",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:\"distanceToSquared\",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n+(t=this.z-t.z)*t}},{key:\"manhattanDistanceTo\",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:\"setFromSpherical\",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:\"setFromSphericalCoords\",value:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}},{key:\"setFromCylindrical\",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:\"setFromCylindricalCoords\",value:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}},{key:\"setFromMatrixPosition\",value:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:\"setFromMatrixScale\",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=n,this.z=t,this}},{key:\"setFromMatrixColumn\",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:\"setFromMatrix3Column\",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:\"equals\",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:\"fromArray\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:\"toArray\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:\"fromBufferAttribute\",value:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:\"random\",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:\"randomDirection\",value:function(){var t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(t,2));return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}},{key:t,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:case\"end\":return t.stop()}}),t,this)}))}]),e}(Symbol.iterator);tr.prototype.isVector3=!0;var er=new tr,nr=new $i,ir=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tr(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr(-1/0,-1/0,-1/0);y(this,t),this.min=e,this.max=n}return _(t,[{key:\"set\",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:\"setFromArray\",value:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,u=t.length;o<u;o+=3){var l=t[o],c=t[o+1],h=t[o+2];l<e&&(e=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(e,n,i),this.max.set(r,a,s),this}},{key:\"setFromBufferAttribute\",value:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,u=t.count;o<u;o++){var l=t.getX(o),c=t.getY(o),h=t.getZ(o);l<e&&(e=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(e,n,i),this.max.set(r,a,s),this}},{key:\"setFromPoints\",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:\"setFromCenterAndSize\",value:function(t,e){return e=ar.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this}},{key:\"setFromObject\",value:function(t){return this.makeEmpty(),this.expandByObject(t)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:\"makeEmpty\",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:\"isEmpty\",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:\"getCenter\",value:function(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:\"getSize\",value:function(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:\"expandByPoint\",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:\"expandByVector\",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:\"expandByScalar\",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:\"expandByObject\",value:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),sr.copy(e.boundingBox),sr.applyMatrix4(t.matrixWorld),this.union(sr));for(var n=t.children,i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this}},{key:\"containsPoint\",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}},{key:\"containsBox\",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:\"getParameter\",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:\"intersectsBox\",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}},{key:\"intersectsSphere\",value:function(t){return this.clampPoint(t.center,ar),ar.distanceToSquared(t.center)<=t.radius*t.radius}},{key:\"intersectsPlane\",value:function(t){var e,n;return n=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x),0<t.normal.y?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}},{key:\"intersectsTriangle\",value:function(t){return!this.isEmpty()&&(this.getCenter(dr),pr.subVectors(this.max,dr),or.subVectors(t.a,dr),ur.subVectors(t.b,dr),lr.subVectors(t.c,dr),cr.subVectors(ur,or),hr.subVectors(lr,ur),fr.subVectors(or,lr),!!mr([0,-cr.z,cr.y,0,-hr.z,hr.y,0,-fr.z,fr.y,cr.z,0,-cr.x,hr.z,0,-hr.x,fr.z,0,-fr.x,-cr.y,cr.x,0,-hr.y,hr.x,0,-fr.y,fr.x,0],or,ur,lr,pr)&&!!mr([1,0,0,0,1,0,0,0,1],or,ur,lr,pr)&&(gr.crossVectors(cr,hr),mr([gr.x,gr.y,gr.z],or,ur,lr,pr)))}},{key:\"clampPoint\",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:\"distanceToPoint\",value:function(t){return ar.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:\"getBoundingSphere\",value:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(ar).length(),t}},{key:\"intersect\",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:\"union\",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:\"applyMatrix4\",value:function(t){return this.isEmpty()||(rr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),rr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),rr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),rr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),rr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),rr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),rr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),rr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(rr)),this}},{key:\"translate\",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:\"equals\",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();ir.prototype.isBox3=!0;var rr=[new tr,new tr,new tr,new tr,new tr,new tr,new tr,new tr],ar=new tr,sr=new ir,or=new tr,ur=new tr,lr=new tr,cr=new tr,hr=new tr,fr=new tr,dr=new tr,pr=new tr,gr=new tr,vr=new tr;function mr(t,e,n,i,r){for(var a=0,s=t.length-3;a<=s;a+=3){vr.fromArray(t,a);var o=r.x*Math.abs(vr.x)+r.y*Math.abs(vr.y)+r.z*Math.abs(vr.z),u=e.dot(vr),l=n.dot(vr),c=i.dot(vr);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>o)return!1}return!0}var yr=new ir,_r=new tr,xr=new tr,br=new tr,wr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;y(this,t),this.center=e,this.radius=n}return _(t,[{key:\"set\",value:function(t,e){return this.center.copy(t),this.radius=e,this}},{key:\"setFromPoints\",value:function(t,e){var n=this.center;void 0!==e?n.copy(e):yr.setFromPoints(t).getCenter(n);for(var i=0,r=0,a=t.length;r<a;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}},{key:\"copy\",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:\"isEmpty\",value:function(){return this.radius<0}},{key:\"makeEmpty\",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:\"containsPoint\",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:\"distanceToPoint\",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:\"intersectsSphere\",value:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}},{key:\"intersectsBox\",value:function(t){return t.intersectsSphere(this)}},{key:\"intersectsPlane\",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:\"clampPoint\",value:function(t,e){var n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}},{key:\"getBoundingBox\",value:function(t){return this.isEmpty()?t.makeEmpty():(t.set(this.center,this.center),t.expandByScalar(this.radius)),t}},{key:\"applyMatrix4\",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:\"translate\",value:function(t){return this.center.add(t),this}},{key:\"expandByPoint\",value:function(t){br.subVectors(t,this.center);var e=br.lengthSq();return e>this.radius*this.radius&&(e=.5*((t=Math.sqrt(e))-this.radius),this.center.add(br.multiplyScalar(e/t)),this.radius+=e),this}},{key:\"union\",value:function(t){return(!0===this.center.equals(t.center)?xr.set(0,0,1):xr.subVectors(t.center,this.center).normalize()).multiplyScalar(t.radius),this.expandByPoint(_r.copy(t.center).add(xr)),this.expandByPoint(_r.copy(t.center).sub(xr)),this}},{key:\"equals\",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),t}(),Sr=new tr,Cr=new tr,Mr=new tr,Tr=new tr,kr=new tr,Ar=new tr,Er=new tr,Or=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr(0,0,-1);y(this,t),this.origin=e,this.direction=n}return _(t,[{key:\"set\",value:function(t,e){return this.origin.copy(t),this.direction.copy(e),this}},{key:\"copy\",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:\"at\",value:function(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:\"lookAt\",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:\"recast\",value:function(t){return this.origin.copy(this.at(t,Sr)),this}},{key:\"closestPointToPoint\",value:function(t,e){return e.subVectors(t,this.origin),(t=e.dot(this.direction))<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:\"distanceToPoint\",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:\"distanceSqToPoint\",value:function(t){var e=Sr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Sr.copy(this.direction).multiplyScalar(e).add(this.origin),Sr.distanceToSquared(t))}},{key:\"distanceSqToSegment\",value:function(t,e,n,i){Cr.copy(t).add(e).multiplyScalar(.5),Mr.copy(e).sub(t).normalize(),Tr.copy(this.origin).sub(Cr);var r,a,s,o,u=.5*t.distanceTo(e),l=-this.direction.dot(Mr),c=Tr.dot(this.direction),h=-Tr.dot(Mr);return t=Tr.lengthSq(),s=0<(e=Math.abs(1-l*l))?(r=l*h-c,a=l*c-h,o=u*e,0<=r?a>=-o?a<=o?(r*=e=1/e,a*=e,r*(r+l*a+2*c)+a*(l*r+a+2*h)+t):(a=u,r=Math.max(0,-(l*a+c)),-r*r+a*(a+2*h)+t):(a=-u,r=Math.max(0,-(l*a+c)),-r*r+a*(a+2*h)+t):a<=-o?(r=Math.max(0,-(-l*u+c)),a=0<r?-u:Math.min(Math.max(-u,-h),u),-r*r+a*(a+2*h)+t):a<=o?(r=0,a=Math.min(Math.max(-u,-h),u),a*(a+2*h)+t):(r=Math.max(0,-(l*u+c)),a=0<r?u:Math.min(Math.max(-u,-h),u),-r*r+a*(a+2*h)+t)):(a=0<l?-u:u,r=Math.max(0,-(l*a+c)),-r*r+a*(a+2*h)+t),n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(Mr).multiplyScalar(a).add(Cr),s}},{key:\"intersectSphere\",value:function(t,e){Sr.subVectors(t.center,this.origin);var n=Sr.dot(this.direction),i=Sr.dot(Sr)-n*n;return(t=t.radius*t.radius)<i?null:(i=n-(t=Math.sqrt(t-i)),t=n+t,i<0&&t<0?null:i<0?this.at(t,e):this.at(i,e))}},{key:\"intersectsSphere\",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:\"distanceToPlane\",value:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(e=-(this.origin.dot(t.normal)+t.constant)/e)?e:null}},{key:\"intersectPlane\",value:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)}},{key:\"intersectsPlane\",value:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}},{key:\"intersectBox\",value:function(t,e){var n,i,r,a,s,o,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return i=0<=u?(n=(t.min.x-h.x)*u,(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,(t.min.x-h.x)*u),a=0<=l?(r=(t.min.y-h.y)*l,(t.max.y-h.y)*l):(r=(t.max.y-h.y)*l,(t.min.y-h.y)*l),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),o=0<=c?(s=(t.min.z-h.z)*c,(t.max.z-h.z)*c):(s=(t.max.z-h.z)*c,(t.min.z-h.z)*c),n>o||s>i?null:((s>n||n!=n)&&(n=s),(o<i||i!=i)&&(i=o),i<0?null:this.at(0<=n?n:i,e)))}},{key:\"intersectsBox\",value:function(t){return null!==this.intersectBox(t,Sr)}},{key:\"intersectTriangle\",value:function(t,e,n,i,r){kr.subVectors(e,t),Ar.subVectors(n,t),Er.crossVectors(kr,Ar);var a,s=this.direction.dot(Er);if(0<s){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}return Tr.subVectors(this.origin,t),(i=a*this.direction.dot(Ar.crossVectors(Tr,Ar)))<0||(t=a*this.direction.dot(kr.cross(Tr)))<0||i+t>s||(t=-a*Tr.dot(Er))<0?null:this.at(t/s,r)}},{key:\"applyMatrix4\",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:\"equals\",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),t}(),Pr=function(){function t(){y(this,t),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return _(t,[{key:\"set\",value:function(t,e,n,i,r,a,s,o,u,l,c,h,f,d,p,g){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=a,v[9]=s,v[13]=o,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=g,this}},{key:\"identity\",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:\"clone\",value:function(){return(new t).fromArray(this.elements)}},{key:\"copy\",value:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this}},{key:\"copyPosition\",value:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}},{key:\"setFromMatrix3\",value:function(t){return t=t.elements,this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:\"extractBasis\",value:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:\"makeBasis\",value:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}},{key:\"extractRotation\",value:function(t){var e=this.elements,n=t.elements,i=1/Ir.setFromMatrixColumn(t,0).length(),r=1/Ir.setFromMatrixColumn(t,1).length();return t=1/Ir.setFromMatrixColumn(t,2).length(),e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*t,e[9]=n[9]*t,e[10]=n[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:\"makeRotationFromEuler\",value:function(t){t&&t.isEuler;var e,n,i,r,a,s,o,u,l,c,h,f=this.elements,d=t.x,p=t.y,g=t.z,v=Math.cos(d),m=Math.sin(d),y=Math.cos(p),_=Math.sin(p);return d=Math.cos(g),p=Math.sin(g),\"XYZ\"===t.order?(e=v*d,i=v*p,n=m*d,g=m*p,f[0]=y*d,f[4]=-y*p,f[8]=_,f[1]=i+n*_,f[5]=e-g*_,f[9]=-m*y,f[2]=g-e*_,f[6]=n+i*_,f[10]=v*y):\"YXZ\"===t.order?(r=y*d,e=y*p,n=_*d,i=_*p,f[0]=r+i*m,f[4]=n*m-e,f[8]=v*_,f[1]=v*p,f[5]=v*d,f[9]=-m,f[2]=e*m-n,f[6]=i+r*m,f[10]=v*y):\"ZXY\"===t.order?(o=y*d,r=y*p,a=_*d,s=_*p,f[0]=o-s*m,f[4]=-v*p,f[8]=a+r*m,f[1]=r+a*m,f[5]=v*d,f[9]=s-o*m,f[2]=-v*_,f[6]=m,f[10]=v*y):\"ZYX\"===t.order?(a=v*d,s=v*p,u=m*d,o=m*p,f[0]=y*d,f[4]=u*_-s,f[8]=a*_+o,f[1]=y*p,f[5]=o*_+a,f[9]=s*_-u,f[2]=-_,f[6]=m*y,f[10]=v*y):\"YZX\"===t.order?(c=v*y,u=v*_,l=m*y,h=m*_,f[0]=y*d,f[4]=h-c*p,f[8]=l*p+u,f[1]=p,f[5]=v*d,f[9]=-m*d,f[2]=-_*d,f[6]=u*p+l,f[10]=c-h*p):\"XZY\"===t.order&&(l=v*y,c=v*_,h=m*y,t=m*_,f[0]=y*d,f[4]=-p,f[8]=_*d,f[1]=l*p+t,f[5]=v*d,f[9]=c*p-h,f[2]=h*p-c,f[6]=m*d,f[10]=t*p+l),f[3]=0,f[7]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,this}},{key:\"makeRotationFromQuaternion\",value:function(t){return this.compose(Dr,t,Rr)}},{key:\"lookAt\",value:function(t,e,n){var i=this.elements;return Br.subVectors(t,e),0===Br.lengthSq()&&(Br.z=1),Br.normalize(),Nr.crossVectors(n,Br),0===Nr.lengthSq()&&(1===Math.abs(n.z)?Br.x+=1e-4:Br.z+=1e-4,Br.normalize(),Nr.crossVectors(n,Br)),Nr.normalize(),Fr.crossVectors(Br,Nr),i[0]=Nr.x,i[4]=Fr.x,i[8]=Br.x,i[1]=Nr.y,i[5]=Fr.y,i[9]=Br.y,i[2]=Nr.z,i[6]=Fr.z,i[10]=Br.z,this}},{key:\"multiply\",value:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)}},{key:\"premultiply\",value:function(t){return this.multiplyMatrices(t,this)}},{key:\"multiplyMatrices\",value:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],s=n[4],o=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],g=n[10],v=n[14],m=n[3],y=n[7],_=n[11],x=n[15],b=i[0],w=i[4],S=i[8],C=i[12],M=i[1],T=i[5],k=i[9],A=i[13],E=i[2],O=i[6],P=i[10],I=i[14];return t=i[3],e=i[7],n=i[11],i=i[15],r[0]=a*b+s*M+o*E+u*t,r[4]=a*w+s*T+o*O+u*e,r[8]=a*S+s*k+o*P+u*n,r[12]=a*C+s*A+o*I+u*i,r[1]=l*b+c*M+h*E+f*t,r[5]=l*w+c*T+h*O+f*e,r[9]=l*S+c*k+h*P+f*n,r[13]=l*C+c*A+h*I+f*i,r[2]=d*b+p*M+g*E+v*t,r[6]=d*w+p*T+g*O+v*e,r[10]=d*S+p*k+g*P+v*n,r[14]=d*C+p*A+g*I+v*i,r[3]=m*b+y*M+_*E+x*t,r[7]=m*w+y*T+_*O+x*e,r[11]=m*S+y*k+_*P+x*n,r[15]=m*C+y*A+_*I+x*i,this}},{key:\"multiplyScalar\",value:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}},{key:\"determinant\",value:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],s=t[5],o=t[9],u=t[13],l=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+r*o*c-i*u*c-r*s*h+n*u*h+i*s*f-n*o*f)+t[7]*(+e*o*f-e*u*h+r*a*h-i*a*f+i*u*l-r*o*l)+t[11]*(+e*u*c-e*s*f-r*a*c+n*a*f+r*s*l-n*u*l)+t[15]*(-i*s*l-e*o*c+e*s*h+i*a*c-n*a*h+n*o*l)}},{key:\"transpose\",value:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:\"setPosition\",value:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}},{key:\"invert\",value:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11],d=t[12],p=t[13],g=t[14],v=t[15],m=c*g*u-p*h*u+p*o*f-s*g*f-c*o*v+s*h*v,y=d*h*u-l*g*u-d*o*f+a*g*f+l*o*v-a*h*v,_=l*p*u-d*c*u+d*s*f-a*p*f-l*s*v+a*c*v,x=d*c*o-l*p*o-d*s*h+a*p*h+l*s*g-a*c*g,b=e*m+n*y+i*_+r*x;return 0==b?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(b=1/b,t[0]=m*b,t[1]=(p*h*r-c*g*r-p*i*f+n*g*f+c*i*v-n*h*v)*b,t[2]=(s*g*r-p*o*r+p*i*u-n*g*u-s*i*v+n*o*v)*b,t[3]=(c*o*r-s*h*r-c*i*u+n*h*u+s*i*f-n*o*f)*b,t[4]=y*b,t[5]=(l*g*r-d*h*r+d*i*f-e*g*f-l*i*v+e*h*v)*b,t[6]=(d*o*r-a*g*r-d*i*u+e*g*u+a*i*v-e*o*v)*b,t[7]=(a*h*r-l*o*r+l*i*u-e*h*u-a*i*f+e*o*f)*b,t[8]=_*b,t[9]=(d*c*r-l*p*r-d*n*f+e*p*f+l*n*v-e*c*v)*b,t[10]=(a*p*r-d*s*r+d*n*u-e*p*u-a*n*v+e*s*v)*b,t[11]=(l*s*r-a*c*r-l*n*u+e*c*u+a*n*f-e*s*f)*b,t[12]=x*b,t[13]=(l*p*i-d*c*i+d*n*h-e*p*h-l*n*g+e*c*g)*b,t[14]=(d*s*i-a*p*i-d*n*o+e*p*o+a*n*g-e*s*g)*b,t[15]=(a*c*i-l*s*i+l*n*o-e*c*o-a*n*h+e*s*h)*b,this)}},{key:\"scale\",value:function(t){var e=this.elements,n=t.x,i=t.y;return t=t.z,e[0]*=n,e[4]*=i,e[8]*=t,e[1]*=n,e[5]*=i,e[9]*=t,e[2]*=n,e[6]*=i,e[10]*=t,e[3]*=n,e[7]*=i,e[11]*=t,this}},{key:\"getMaxScaleOnAxis\",value:function(){var t=(n=this.elements)[0]*n[0]+n[1]*n[1]+n[2]*n[2],e=n[4]*n[4]+n[5]*n[5]+n[6]*n[6],n=n[8]*n[8]+n[9]*n[9]+n[10]*n[10];return Math.sqrt(Math.max(t,e,n))}},{key:\"makeTranslation\",value:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}},{key:\"makeRotationX\",value:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this}},{key:\"makeRotationY\",value:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this}},{key:\"makeRotationZ\",value:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this}},{key:\"makeRotationAxis\",value:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,s=t.y,o=t.z;return e=r*a,t=r*s,this.set(e*a+n,e*s-i*o,e*o+i*s,0,e*s+i*o,t*s+n,t*o-i*a,0,e*o-i*s,t*o+i*a,r*o*o+n,0,0,0,0,1),this}},{key:\"makeScale\",value:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}},{key:\"makeShear\",value:function(t,e,n,i,r,a){return this.set(1,n,r,0,t,1,a,0,e,i,1,0,0,0,0,1),this}},{key:\"compose\",value:function(t,e,n){var i=this.elements,r=e._x,a=e._y,s=e._z,o=e._w,u=r*(h=r+r),l=r*(f=a+a),c=r*(d=s+s),h=(e=a*f,r=a*d,a=s*d,s=o*h,o*f),f=o*d,d=(o=n.x,n.y);return n=n.z,i[0]=(1-(e+a))*o,i[1]=(l+f)*o,i[2]=(c-h)*o,i[3]=0,i[4]=(l-f)*d,i[5]=(1-(u+a))*d,i[6]=(r+s)*d,i[7]=0,i[8]=(c+h)*n,i[9]=(r-s)*n,i[10]=(1-(u+e))*n,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}},{key:\"decompose\",value:function(t,e,n){var i=this.elements,r=Ir.set(i[0],i[1],i[2]).length(),a=Ir.set(i[4],i[5],i[6]).length(),s=Ir.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Lr.copy(this);var o=1/r;return t=1/a,i=1/s,Lr.elements[0]*=o,Lr.elements[1]*=o,Lr.elements[2]*=o,Lr.elements[4]*=t,Lr.elements[5]*=t,Lr.elements[6]*=t,Lr.elements[8]*=i,Lr.elements[9]*=i,Lr.elements[10]*=i,e.setFromRotationMatrix(Lr),n.x=r,n.y=a,n.z=s,this}},{key:\"makePerspective\",value:function(t,e,n,i,r,a){var s=this.elements,o=2*r/(n-i),u=(e+t)/(e-t);return n=(n+i)/(n-i),i=-(a+r)/(a-r),a=-2*a*r/(a-r),s[0]=2*r/(e-t),s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=o,s[9]=n,s[13]=0,s[2]=0,s[6]=0,s[10]=i,s[14]=a,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}},{key:\"makeOrthographic\",value:function(t,e,n,i,r,a){var s=this.elements,o=1/(e-t),u=1/(n-i),l=1/(a-r);return t=(e+t)*o,i=(n+i)*u,r=(a+r)*l,s[0]=2*o,s[4]=0,s[8]=0,s[12]=-t,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-i,s[2]=0,s[6]=0,s[10]=-2*l,s[14]=-r,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}},{key:\"equals\",value:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}},{key:\"fromArray\",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=t[n+e];return this}},{key:\"toArray\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}]),t}();Pr.prototype.isMatrix4=!0;var Ir=new tr,Lr=new Pr,Dr=new tr(0,0,0),Rr=new tr(1,1,1),Nr=new tr,Fr=new tr,Br=new tr,zr=new Pr,jr=new $i,Ur=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;y(this,t),this._x=e,this._y=n,this._z=i,this._order=r}return _(t,[{key:\"x\",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:\"y\",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:\"z\",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:\"order\",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},{key:\"set\",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}},{key:\"clone\",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:\"copy\",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}},{key:\"setFromRotationMatrix\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(t=t.elements)[0],r=t[4],a=t[8],s=t[1],o=t[5],u=t[9],l=t[2],c=t[6],h=t[10];switch(e){case\"XYZ\":this._y=Math.asin(Pi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-r,i)):(this._x=Math.atan2(c,o),this._z=0);break;case\"YXZ\":this._x=Math.asin(-Pi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,o)):(this._y=Math.atan2(-l,i),this._z=0);break;case\"ZXY\":this._x=Math.asin(Pi(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-l,h),this._z=Math.atan2(-r,o)):(this._y=0,this._z=Math.atan2(s,i));break;case\"ZYX\":this._y=Math.asin(-Pi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(c,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-r,o));break;case\"YZX\":this._z=Math.asin(Pi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,o),this._y=Math.atan2(-l,i)):(this._x=0,this._y=Math.atan2(a,h));break;case\"XZY\":this._z=Math.asin(-Pi(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(c,o),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,h),this._y=0)}return this._order=e,!0===n&&this._onChangeCallback(),this}},{key:\"setFromQuaternion\",value:function(t,e,n){return zr.makeRotationFromQuaternion(t),this.setFromRotationMatrix(zr,e,n)}},{key:\"setFromVector3\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}},{key:\"reorder\",value:function(t){return jr.setFromEuler(this),this.setFromQuaternion(jr,t)}},{key:\"equals\",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:\"fromArray\",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}},{key:\"toArray\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:\"toVector3\",value:function(t){return t?t.set(this._x,this._y,this._z):new tr(this._x,this._y,this._z)}},{key:\"_onChange\",value:function(t){return this._onChangeCallback=t,this}},{key:\"_onChangeCallback\",value:function(){}}]),t}();Ur.prototype.isEuler=!0,Ur.DefaultOrder=\"XYZ\",Ur.RotationOrders=[\"XYZ\",\"YZX\",\"ZXY\",\"XZY\",\"YXZ\",\"ZYX\"];var Vr=function(){function t(){y(this,t),this.mask=1}return _(t,[{key:\"set\",value:function(t){this.mask=(1<<t|0)>>>0}},{key:\"enable\",value:function(t){this.mask|=1<<t|0}},{key:\"enableAll\",value:function(){this.mask=-1}},{key:\"toggle\",value:function(t){this.mask^=1<<t|0}},{key:\"disable\",value:function(t){this.mask&=~(1<<t|0)}},{key:\"disableAll\",value:function(){this.mask=0}},{key:\"test\",value:function(t){return 0!=(this.mask&t.mask)}},{key:\"isEnabled\",value:function(t){return 0!=(this.mask&(1<<t|0))}}]),t}(),Wr=0,Gr=new tr,Hr=new $i,Xr=new Pr,Yr=new tr,qr=new tr,Jr=new tr,Zr=new $i,Kr=new tr(1,0,0),Qr=new tr(0,1,0),$r=new tr(0,0,1),ta={type:\"added\"},ea={type:\"removed\"},na=function(t){v(n,t);var e=m(n);function n(){var t;y(this,n),t=e.call(this),Object.defineProperty(g(t),\"id\",{value:Wr++}),t.uuid=Oi(),t.name=\"\",t.type=\"Object3D\",t.parent=null,t.children=[],t.up=n.DefaultUp.clone();var i=new tr,r=new Ur,a=new $i,s=new tr(1,1,1);return r._onChange((function(){a.setFromEuler(r,!1)})),a._onChange((function(){r.setFromQuaternion(a,void 0,!1)})),Object.defineProperties(g(t),{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Pr},normalMatrix:{value:new zi}}),t.matrix=new Pr,t.matrixWorld=new Pr,t.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,t.matrixWorldNeedsUpdate=!1,t.layers=new Vr,t.visible=!0,t.castShadow=!1,t.receiveShadow=!1,t.frustumCulled=!0,t.renderOrder=0,t.animations=[],t.userData={},t}return _(n,[{key:\"onBeforeRender\",value:function(){}},{key:\"onAfterRender\",value:function(){}},{key:\"applyMatrix4\",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:\"applyQuaternion\",value:function(t){return this.quaternion.premultiply(t),this}},{key:\"setRotationFromAxisAngle\",value:function(t,e){this.quaternion.setFromAxisAngle(t,e)}},{key:\"setRotationFromEuler\",value:function(t){this.quaternion.setFromEuler(t,!0)}},{key:\"setRotationFromMatrix\",value:function(t){this.quaternion.setFromRotationMatrix(t)}},{key:\"setRotationFromQuaternion\",value:function(t){this.quaternion.copy(t)}},{key:\"rotateOnAxis\",value:function(t,e){return Hr.setFromAxisAngle(t,e),this.quaternion.multiply(Hr),this}},{key:\"rotateOnWorldAxis\",value:function(t,e){return Hr.setFromAxisAngle(t,e),this.quaternion.premultiply(Hr),this}},{key:\"rotateX\",value:function(t){return this.rotateOnAxis(Kr,t)}},{key:\"rotateY\",value:function(t){return this.rotateOnAxis(Qr,t)}},{key:\"rotateZ\",value:function(t){return this.rotateOnAxis($r,t)}},{key:\"translateOnAxis\",value:function(t,e){return Gr.copy(t).applyQuaternion(this.quaternion),this.position.add(Gr.multiplyScalar(e)),this}},{key:\"translateX\",value:function(t){return this.translateOnAxis(Kr,t)}},{key:\"translateY\",value:function(t){return this.translateOnAxis(Qr,t)}},{key:\"translateZ\",value:function(t){return this.translateOnAxis($r,t)}},{key:\"localToWorld\",value:function(t){return t.applyMatrix4(this.matrixWorld)}},{key:\"worldToLocal\",value:function(t){return t.applyMatrix4(Xr.copy(this.matrixWorld).invert())}},{key:\"lookAt\",value:function(t,e,n){t.isVector3?Yr.copy(t):Yr.set(t,e,n),n=this.parent,this.updateWorldMatrix(!0,!1),qr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xr.lookAt(qr,Yr,this.up):Xr.lookAt(Yr,qr,this.up),this.quaternion.setFromRotationMatrix(Xr),n&&(Xr.extractRotation(n.matrixWorld),Hr.setFromRotationMatrix(Xr),this.quaternion.premultiply(Hr.invert()))}},{key:\"add\",value:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this||t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),(t.parent=this).children.push(t),t.dispatchEvent(ta)),this}},{key:\"remove\",value:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(ea)),this}},{key:\"removeFromParent\",value:function(){var t=this.parent;return null!==t&&t.remove(this),this}},{key:\"clear\",value:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.parent=null,e.dispatchEvent(ea)}return this.children.length=0,this}},{key:\"attach\",value:function(t){return this.updateWorldMatrix(!0,!1),Xr.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Xr.multiply(t.parent.matrixWorld)),t.applyMatrix4(Xr),this.add(t),t.updateWorldMatrix(!1,!0),this}},{key:\"getObjectById\",value:function(t){return this.getObjectByProperty(\"id\",t)}},{key:\"getObjectByName\",value:function(t){return this.getObjectByProperty(\"name\",t)}},{key:\"getObjectByProperty\",value:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}},{key:\"getWorldPosition\",value:function(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}},{key:\"getWorldQuaternion\",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qr,t,Jr),t}},{key:\"getWorldScale\",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qr,Zr,t),t}},{key:\"getWorldDirection\",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}},{key:\"raycast\",value:function(){}},{key:\"traverse\",value:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)}},{key:\"traverseVisible\",value:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}}},{key:\"traverseAncestors\",value:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}},{key:\"updateMatrix\",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:\"updateMatrixWorld\",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}},{key:\"updateWorldMatrix\",value:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)}},{key:\"toJSON\",value:function(t){var e,n,i,r,a,s=void 0===t||\"string\"==typeof t,o={};s&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},o.metadata={version:4.5,type:\"Object\",generator:\"Object3D.toJSON\"});var u={};function l(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(u.uuid=this.uuid,u.type=this.type,\"\"!==this.name&&(u.name=this.name),!0===this.castShadow&&(u.castShadow=!0),!0===this.receiveShadow&&(u.receiveShadow=!0),!1===this.visible&&(u.visible=!1),!1===this.frustumCulled&&(u.frustumCulled=!1),0!==this.renderOrder&&(u.renderOrder=this.renderOrder),\"{}\"!==JSON.stringify(this.userData)&&(u.userData=this.userData),u.layers=this.layers.mask,u.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(u.matrixAutoUpdate=!1),this.isInstancedMesh&&(u.type=\"InstancedMesh\",u.count=this.count,u.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(u.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?u.background=this.background.toJSON():this.background.isTexture&&(u.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(u.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){u.geometry=l(t.geometries,this.geometry);var c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){var h=c.shapes;if(Array.isArray(h))for(var f=0,d=h.length;f<d;f++){var p=h[f];l(t.shapes,p)}else l(t.shapes,h)}}if(this.isSkinnedMesh&&(u.bindMode=this.bindMode,u.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(l(t.skeletons,this.skeleton),u.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var g=[],v=0,m=this.material.length;v<m;v++)g.push(l(t.materials,this.material[v]));u.material=g}else u.material=l(t.materials,this.material);if(0<this.children.length){u.children=[];for(var y=0;y<this.children.length;y++)u.children.push(this.children[y].toJSON(t).object)}if(0<this.animations.length){u.animations=[];for(var _=0;_<this.animations.length;_++){var x=this.animations[_];u.animations.push(l(t.animations,x))}}return s&&(e=b(t.geometries),n=b(t.materials),i=b(t.textures),r=b(t.images),a=b(t.shapes),c=b(t.skeletons),s=b(t.animations),0<e.length&&(o.geometries=e),0<n.length&&(o.materials=n),0<i.length&&(o.textures=i),0<r.length&&(o.images=r),0<a.length&&(o.shapes=a),0<c.length&&(o.skeletons=c),0<s.length&&(o.animations=s)),o.object=u,o;function b(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}}},{key:\"clone\",value:function(t){return(new this.constructor).copy(this,t)}},{key:\"copy\",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}]),n}(Ci);na.DefaultUp=new tr(0,1,0),na.DefaultMatrixAutoUpdate=!0,na.prototype.isObject3D=!0;var ia=new tr,ra=new tr,aa=new tr,sa=new tr,oa=new tr,ua=new tr,la=new tr,ca=new tr,ha=new tr,fa=new tr,da=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new tr;y(this,t),this.a=e,this.b=n,this.c=i}return _(t,[{key:\"set\",value:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}},{key:\"setFromPointsAndIndices\",value:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}},{key:\"setFromAttributeAndIndices\",value:function(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:\"getArea\",value:function(){return ia.subVectors(this.c,this.b),ra.subVectors(this.a,this.b),.5*ia.cross(ra).length()}},{key:\"getMidpoint\",value:function(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:\"getNormal\",value:function(e){return t.getNormal(this.a,this.b,this.c,e)}},{key:\"getPlane\",value:function(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:\"getBarycoord\",value:function(e,n){return t.getBarycoord(e,this.a,this.b,this.c,n)}},{key:\"getUV\",value:function(e,n,i,r,a){return t.getUV(e,this.a,this.b,this.c,n,i,r,a)}},{key:\"containsPoint\",value:function(e){return t.containsPoint(e,this.a,this.b,this.c)}},{key:\"isFrontFacing\",value:function(e){return t.isFrontFacing(this.a,this.b,this.c,e)}},{key:\"intersectsBox\",value:function(t){return t.intersectsTriangle(this)}},{key:\"closestPointToPoint\",value:function(t,e){var n,i,r=this.a,a=this.b,s=this.c;oa.subVectors(a,r),ua.subVectors(s,r),ca.subVectors(t,r);var o=oa.dot(ca),u=ua.dot(ca);if(o<=0&&u<=0)return e.copy(r);ha.subVectors(t,a);var l=oa.dot(ha),c=ua.dot(ha);if(0<=l&&c<=l)return e.copy(a);var h=o*c-l*u;if(h<=0&&0<=o&&l<=0)return n=o/(o-l),e.copy(r).addScaledVector(oa,n);fa.subVectors(t,s);var f=oa.dot(fa);return 0<=(t=ua.dot(fa))&&f<=t?e.copy(s):(o=f*u-o*t)<=0&&0<=u&&t<=0?(i=u/(u-t),e.copy(r).addScaledVector(ua,i)):(u=l*t-f*c)<=0&&0<=c-l&&0<=f-t?(la.subVectors(s,a),i=(c-l)/(c-l+(f-t)),e.copy(a).addScaledVector(la,i)):(n=o*(u=1/(u+o+h)),i=h*u,e.copy(r).addScaledVector(oa,n).addScaledVector(ua,i))}},{key:\"equals\",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:\"getNormal\",value:function(t,e,n,i){return i.subVectors(n,e),ia.subVectors(t,e),i.cross(ia),0<(e=i.lengthSq())?i.multiplyScalar(1/Math.sqrt(e)):i.set(0,0,0)}},{key:\"getBarycoord\",value:function(t,e,n,i,r){ia.subVectors(i,e),ra.subVectors(n,e),aa.subVectors(t,e);var a=ia.dot(ia),s=ia.dot(ra);return i=ia.dot(aa),n=ra.dot(ra),t=ra.dot(aa),0==(e=a*n-s*s)?r.set(-2,-1,-1):(n=(n*i-s*t)*(e=1/e),e*=a*t-s*i,r.set(1-n-e,e,n))}},{key:\"containsPoint\",value:function(t,e,n,i){return this.getBarycoord(t,e,n,i,sa),0<=sa.x&&0<=sa.y&&sa.x+sa.y<=1}},{key:\"getUV\",value:function(t,e,n,i,r,a,s,o){return this.getBarycoord(t,e,n,i,sa),o.set(0,0),o.addScaledVector(r,sa.x),o.addScaledVector(a,sa.y),o.addScaledVector(s,sa.z),o}},{key:\"isFrontFacing\",value:function(t,e,n,i){return ia.subVectors(n,e),ra.subVectors(t,e),ia.cross(ra).dot(i)<0}}]),t}(),pa=0,ga=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this),Object.defineProperty(g(t),\"id\",{value:pa++}),t.uuid=Oi(),t.name=\"\",t.type=\"Material\",t.fog=!0,t.blending=gt,t.side=lt,t.vertexColors=!1,t.opacity=1,t.format=Le,t.transparent=!1,t.blendSrc=Et,t.blendDst=Ot,t.blendEquation=xt,t.blendSrcAlpha=null,t.blendDstAlpha=null,t.blendEquationAlpha=null,t.depthFunc=zt,t.depthTest=!0,t.depthWrite=!0,t.stencilWriteMask=255,t.stencilFunc=fi,t.stencilRef=0,t.stencilFuncMask=255,t.stencilFail=Qn,t.stencilZFail=Qn,t.stencilZPass=Qn,t.stencilWrite=!1,t.clippingPlanes=null,t.clipIntersection=!1,t.clipShadows=!1,t.shadowSide=null,t.colorWrite=!0,t.precision=null,t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=0,t.dithering=!1,t.alphaToCoverage=!1,t.premultipliedAlpha=!1,t.visible=!0,t.toneMapped=!0,t.userData={},t.version=0,t._alphaTest=0,t}return _(n,[{key:\"alphaTest\",get:function(){return this._alphaTest},set:function(t){0<this._alphaTest!=0<t&&this.version++,this._alphaTest=t}},{key:\"onBuild\",value:function(){}},{key:\"onBeforeRender\",value:function(){}},{key:\"onBeforeCompile\",value:function(){}},{key:\"customProgramCacheKey\",value:function(){return this.onBeforeCompile.toString()}},{key:\"setValues\",value:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if(\"shading\"!==e){var i=this[e];void 0!==i&&(i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n)}else this.flatShading=n===ft}}},{key:\"toJSON\",value:function(t){var e=void 0===t||\"string\"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:\"Material\",generator:\"Material.toJSON\"}};function i(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}return n.uuid=this.uuid,n.type=this.type,\"\"!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==gt&&(n.blending=this.blending),this.side!==lt&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==Le&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),\"round\"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),\"round\"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),\"{}\"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e&&(e=i(t.textures),t=i(t.images),0<e.length&&(n.textures=e),0<t.length&&(n.images=t)),n}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.format=t.format,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}},{key:\"needsUpdate\",set:function(t){!0===t&&this.version++}}]),n}(Ci);ga.prototype.isMaterial=!0;var va={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ma={h:0,s:0,l:0},ya={h:0,s:0,l:0};function _a(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function xa(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ba(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var wa=function(){function t(e,n,i){return y(this,t),void 0===n&&void 0===i?this.set(e):this.setRGB(e,n,i)}return _(t,[{key:\"set\",value:function(t){return t&&t.isColor?this.copy(t):\"number\"==typeof t?this.setHex(t):\"string\"==typeof t&&this.setStyle(t),this}},{key:\"setScalar\",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:\"setHex\",value:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}},{key:\"setRGB\",value:function(t,e,n){return this.r=t,this.g=e,this.b=n,this}},{key:\"setHSL\",value:function(t,e,n){return t=Ii(t,1),e=Pi(e,0,1),n=Pi(n,0,1),0===e?this.r=this.g=this.b=n:(this.r=_a(e=2*n-(n=n<=.5?n*(1+e):n+e-n*e),n,t+1/3),this.g=_a(e,n,t),this.b=_a(e,n,t-1/3)),this}},{key:\"setStyle\",value:function(t){function e(t){void 0!==t&&parseFloat(t)}var n;if(n=/^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec(t)){var i,r=n[1],a=n[2];switch(r){case\"rgb\":case\"rgba\":if(i=/^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[4]),this;if(i=/^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[4]),this;break;case\"hsl\":case\"hsla\":if(i=/^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec(a)){var s=parseFloat(i[1])/360,o=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100;return e(i[4]),this.setHSL(s,o,u)}}}else if(n=/^\\#([A-Fa-f\\d]+)$/.exec(t)){var l=n[1];if(r=l.length,3===r)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===r)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this}},{key:\"setColorName\",value:function(t){return void 0!==(t=va[t.toLowerCase()])&&this.setHex(t),this}},{key:\"clone\",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:\"copy\",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:\"copySRGBToLinear\",value:function(t){return this.r=xa(t.r),this.g=xa(t.g),this.b=xa(t.b),this}},{key:\"copyLinearToSRGB\",value:function(t){return this.r=ba(t.r),this.g=ba(t.g),this.b=ba(t.b),this}},{key:\"convertSRGBToLinear\",value:function(){return this.copySRGBToLinear(this),this}},{key:\"convertLinearToSRGB\",value:function(){return this.copyLinearToSRGB(this),this}},{key:\"getHex\",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:\"getHexString\",value:function(){return(\"000000\"+this.getHex().toString(16)).slice(-6)}},{key:\"getHSL\",value:function(t){var e,n,i=this.r,r=this.g,a=this.b,s=Math.max(i,r,a),o=Math.min(i,r,a),u=(o+s)/2;if(o===s)e=0,n=0;else{var l=s-o;switch(n=u<=.5?l/(s+o):l/(2-s-o),s){case i:e=(r-a)/l+(r<a?6:0);break;case r:e=(a-i)/l+2;break;case a:e=(i-r)/l+4}e/=6}return t.h=e,t.s=n,t.l=u,t}},{key:\"getStyle\",value:function(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"}},{key:\"offsetHSL\",value:function(t,e,n){return this.getHSL(ma),ma.h+=t,ma.s+=e,ma.l+=n,this.setHSL(ma.h,ma.s,ma.l),this}},{key:\"add\",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:\"addColors\",value:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}},{key:\"addScalar\",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this}},{key:\"sub\",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:\"multiply\",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:\"multiplyScalar\",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this}},{key:\"lerp\",value:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}},{key:\"lerpColors\",value:function(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}},{key:\"lerpHSL\",value:function(t,e){this.getHSL(ma),t.getHSL(ya);var n=Li(ma.h,ya.h,e);return t=Li(ma.s,ya.s,e),e=Li(ma.l,ya.l,e),this.setHSL(n,t,e),this}},{key:\"equals\",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:\"fromArray\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}},{key:\"toArray\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},{key:\"fromBufferAttribute\",value:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:\"toJSON\",value:function(){return this.getHex()}}]),t}();wa.NAMES=va,wa.prototype.isColor=!0,wa.prototype.r=1,wa.prototype.g=1,wa.prototype.b=1;var Sa=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"MeshBasicMaterial\",i.color=new wa(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=Gt,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap=\"round\",i.wireframeLinejoin=\"round\",i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}]),n}(ga);Sa.prototype.isMeshBasicMaterial=!0;var Ca=new tr,Ma=new Bi,Ta=function(){function t(e,n,i){if(y(this,t),Array.isArray(e))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.name=\"\",this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=!0===i,this.usage=di,this.updateRange={offset:0,count:-1},this.version=0}return _(t,[{key:\"onUploadCallback\",value:function(){}},{key:\"needsUpdate\",set:function(t){!0===t&&this.version++}},{key:\"setUsage\",value:function(t){return this.usage=t,this}},{key:\"copy\",value:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}},{key:\"copyAt\",value:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}},{key:\"copyArray\",value:function(t){return this.array.set(t),this}},{key:\"copyColorsArray\",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(a=new wa),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this}},{key:\"copyVector2sArray\",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(a=new Bi),e[n++]=a.x,e[n++]=a.y}return this}},{key:\"copyVector3sArray\",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(a=new tr),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this}},{key:\"copyVector4sArray\",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(a=new Ji),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this}},{key:\"applyMatrix3\",value:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)Ma.fromBufferAttribute(this,e),Ma.applyMatrix3(t),this.setXY(e,Ma.x,Ma.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)Ca.fromBufferAttribute(this,i),Ca.applyMatrix3(t),this.setXYZ(i,Ca.x,Ca.y,Ca.z);return this}},{key:\"applyMatrix4\",value:function(t){for(var e=0,n=this.count;e<n;e++)Ca.x=this.getX(e),Ca.y=this.getY(e),Ca.z=this.getZ(e),Ca.applyMatrix4(t),this.setXYZ(e,Ca.x,Ca.y,Ca.z);return this}},{key:\"applyNormalMatrix\",value:function(t){for(var e=0,n=this.count;e<n;e++)Ca.x=this.getX(e),Ca.y=this.getY(e),Ca.z=this.getZ(e),Ca.applyNormalMatrix(t),this.setXYZ(e,Ca.x,Ca.y,Ca.z);return this}},{key:\"transformDirection\",value:function(t){for(var e=0,n=this.count;e<n;e++)Ca.x=this.getX(e),Ca.y=this.getY(e),Ca.z=this.getZ(e),Ca.transformDirection(t),this.setXYZ(e,Ca.x,Ca.y,Ca.z);return this}},{key:\"set\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:\"getX\",value:function(t){return this.array[t*this.itemSize]}},{key:\"setX\",value:function(t,e){return this.array[t*this.itemSize]=e,this}},{key:\"getY\",value:function(t){return this.array[t*this.itemSize+1]}},{key:\"setY\",value:function(t,e){return this.array[t*this.itemSize+1]=e,this}},{key:\"getZ\",value:function(t){return this.array[t*this.itemSize+2]}},{key:\"setZ\",value:function(t,e){return this.array[t*this.itemSize+2]=e,this}},{key:\"getW\",value:function(t){return this.array[t*this.itemSize+3]}},{key:\"setW\",value:function(t,e){return this.array[t*this.itemSize+3]=e,this}},{key:\"setXY\",value:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}},{key:\"setXYZ\",value:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}},{key:\"setXYZW\",value:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}},{key:\"onUpload\",value:function(t){return this.onUploadCallback=t,this}},{key:\"clone\",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:\"toJSON\",value:function(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return\"\"!==this.name&&(t.name=this.name),this.usage!==di&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}]),t}();Ta.prototype.isBufferAttribute=!0;var ka=function(t){v(n,t);var e=m(n);function n(t,i,r){return y(this,n),e.call(this,new Int8Array(t),i,r)}return _(n)}(Ta),Aa=function(t){v(n,t);var e=m(n);function n(t,i,r){return y(this,n),e.call(this,new Uint8Array(t),i,r)}return _(n)}(Ta),Ea=function(t){v(n,t);var e=m(n);function n(t,i,r){return y(this,n),e.call(this,new Uint8ClampedArray(t),i,r)}return _(n)}(Ta),Oa=function(t){v(n,t);var e=m(n);function n(t,i,r){return y(this,n),e.call(this,new Int16Array(t),i,r)}return _(n)}(Ta),Pa=function(t){v(n,t);var e=m(n);function n(t,i,r){return y(this,n),e.call(this,new Uint16Array(t),i,r)}return _(n)}(Ta),Ia=function(t){v(n,t);var e=m(n);function n(t,i,r){return y(this,n),e.call(this,new Int32Array(t),i,r)}return _(n)}(Ta),La=function(t){v(n,t);var e=m(n);function n(t,i,r){return y(this,n),e.call(this,new Uint32Array(t),i,r)}return _(n)}(Ta),Da=function(t){v(n,t);var e=m(n);function n(t,i,r){return y(this,n),e.call(this,new Uint16Array(t),i,r)}return _(n)}(Ta);Da.prototype.isFloat16BufferAttribute=!0;var Ra=function(t){v(n,t);var e=m(n);function n(t,i,r){return y(this,n),e.call(this,new Float32Array(t),i,r)}return _(n)}(Ta),Na=function(t){v(n,t);var e=m(n);function n(t,i,r){return y(this,n),e.call(this,new Float64Array(t),i,r)}return _(n)}(Ta),Fa=0,Ba=new Pr,za=new na,ja=new tr,Ua=new ir,Va=new ir,Wa=new tr,Ga=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this),Object.defineProperty(g(t),\"id\",{value:Fa++}),t.uuid=Oi(),t.name=\"\",t.type=\"BufferGeometry\",t.index=null,t.attributes={},t.morphAttributes={},t.morphTargetsRelative=!1,t.groups=[],t.boundingBox=null,t.boundingSphere=null,t.drawRange={start:0,count:1/0},t.userData={},t}return _(n,[{key:\"getIndex\",value:function(){return this.index}},{key:\"setIndex\",value:function(t){return Array.isArray(t)?this.index=new(65535<ji(t)?La:Pa)(t,1):this.index=t,this}},{key:\"getAttribute\",value:function(t){return this.attributes[t]}},{key:\"setAttribute\",value:function(t,e){return this.attributes[t]=e,this}},{key:\"deleteAttribute\",value:function(t){return delete this.attributes[t],this}},{key:\"hasAttribute\",value:function(t){return void 0!==this.attributes[t]}},{key:\"addGroup\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}},{key:\"clearGroups\",value:function(){this.groups=[]}},{key:\"setDrawRange\",value:function(t,e){this.drawRange.start=t,this.drawRange.count=e}},{key:\"applyMatrix4\",value:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n,i=this.attributes.normal;void 0!==i&&(n=(new zi).getNormalMatrix(t),i.applyNormalMatrix(n),i.needsUpdate=!0);var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:\"applyQuaternion\",value:function(t){return Ba.makeRotationFromQuaternion(t),this.applyMatrix4(Ba),this}},{key:\"rotateX\",value:function(t){return Ba.makeRotationX(t),this.applyMatrix4(Ba),this}},{key:\"rotateY\",value:function(t){return Ba.makeRotationY(t),this.applyMatrix4(Ba),this}},{key:\"rotateZ\",value:function(t){return Ba.makeRotationZ(t),this.applyMatrix4(Ba),this}},{key:\"translate\",value:function(t,e,n){return Ba.makeTranslation(t,e,n),this.applyMatrix4(Ba),this}},{key:\"scale\",value:function(t,e,n){return Ba.makeScale(t,e,n),this.applyMatrix4(Ba),this}},{key:\"lookAt\",value:function(t){return za.lookAt(t),za.updateMatrix(),this.applyMatrix4(za.matrix),this}},{key:\"center\",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ja).negate(),this.translate(ja.x,ja.y,ja.z),this}},{key:\"setFromPoints\",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute(\"position\",new Ra(e,3)),this}},{key:\"computeBoundingBox\",value:function(){null===this.boundingBox&&(this.boundingBox=new ir);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingBox.set(new tr(-1/0,-1/0,-1/0),new tr(1/0,1/0,1/0));else{if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++){var r=e[n];Ua.setFromBufferAttribute(r),this.morphTargetsRelative?(Wa.addVectors(this.boundingBox.min,Ua.min),this.boundingBox.expandByPoint(Wa),Wa.addVectors(this.boundingBox.max,Ua.max),this.boundingBox.expandByPoint(Wa)):(this.boundingBox.expandByPoint(Ua.min),this.boundingBox.expandByPoint(Ua.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}},{key:\"computeBoundingSphere\",value:function(){null===this.boundingSphere&&(this.boundingSphere=new wr);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingSphere.set(new tr,1/0);else if(t){var n=this.boundingSphere.center;if(Ua.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var a=e[i];Va.setFromBufferAttribute(a),this.morphTargetsRelative?(Wa.addVectors(Ua.min,Va.min),Ua.expandByPoint(Wa),Wa.addVectors(Ua.max,Va.max),Ua.expandByPoint(Wa)):(Ua.expandByPoint(Va.min),Ua.expandByPoint(Va.max))}Ua.getCenter(n);for(var s=0,o=0,u=t.count;o<u;o++)Wa.fromBufferAttribute(t,o),s=Math.max(s,n.distanceToSquared(Wa));if(e)for(var l=0,c=e.length;l<c;l++)for(var h=e[l],f=this.morphTargetsRelative,d=0,p=h.count;d<p;d++)Wa.fromBufferAttribute(h,d),f&&(ja.fromBufferAttribute(t,d),Wa.add(ja)),s=Math.max(s,n.distanceToSquared(Wa));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)}}},{key:\"computeTangents\",value:function(){var t,e,n,i,r,a,s=this,o=this.index,u=this.attributes;null!==o&&void 0!==u.position&&void 0!==u.normal&&void 0!==u.uv&&function(){t=o.array;var l=u.position.array,c=u.normal.array,h=u.uv.array;e=l.length/3,void 0===u.tangent&&s.setAttribute(\"tangent\",new Ta(new Float32Array(4*e),4));for(var f=u.tangent.array,d=[],p=[],g=0;g<e;g++)d[g]=new tr,p[g]=new tr;var v=new tr,m=new tr,y=new tr,_=new Bi,x=new Bi,b=new Bi,w=new tr,S=new tr,C=s.groups;0===C.length&&(C=[{start:0,count:t.length}]);for(var M=0,T=C.length;M<T;++M){n=C[M],i=n.start;for(var k=i,A=i+n.count;k<A;k+=3)!function(t,e,n){v.fromArray(l,3*t),m.fromArray(l,3*e),y.fromArray(l,3*n),_.fromArray(h,2*t),x.fromArray(h,2*e),b.fromArray(h,2*n),m.sub(v),y.sub(v),x.sub(_),b.sub(_);var i=1/(x.x*b.y-b.x*x.y);isFinite(i)&&(w.copy(m).multiplyScalar(b.y).addScaledVector(y,-x.y).multiplyScalar(i),S.copy(y).multiplyScalar(x.x).addScaledVector(m,-b.x).multiplyScalar(i),d[t].add(w),d[e].add(w),d[n].add(w),p[t].add(S),p[e].add(S),p[n].add(S))}(t[k+0],t[k+1],t[k+2])}for(var E=new tr,O=new tr,P=new tr,I=new tr,L=0,D=C.length;L<D;++L){r=C[L],a=r.start;for(var R=a,N=a+r.count;R<N;R+=3)F(t[R+0]),F(t[R+1]),F(t[R+2])}function F(t){P.fromArray(c,3*t),I.copy(P);var e=d[t];E.copy(e),E.sub(P.multiplyScalar(P.dot(e))).normalize(),O.crossVectors(I,e),e=O.dot(p[t])<0?-1:1,f[4*t]=E.x,f[4*t+1]=E.y,f[4*t+2]=E.z,f[4*t+3]=e}}()}},{key:\"computeVertexNormals\",value:function(){var t=this.index,e=this.getAttribute(\"position\");if(void 0!==e){var n=this.getAttribute(\"normal\");if(void 0===n)n=new Ta(new Float32Array(3*e.count),3),this.setAttribute(\"normal\",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var a=new tr,s=new tr,o=new tr,u=new tr,l=new tr,c=new tr,h=new tr,f=new tr;if(t)for(var d=0,p=t.count;d<p;d+=3){var g=t.getX(d+0),v=t.getX(d+1),m=t.getX(d+2);a.fromBufferAttribute(e,g),s.fromBufferAttribute(e,v),o.fromBufferAttribute(e,m),h.subVectors(o,s),f.subVectors(a,s),h.cross(f),u.fromBufferAttribute(n,g),l.fromBufferAttribute(n,v),c.fromBufferAttribute(n,m),u.add(h),l.add(h),c.add(h),n.setXYZ(g,u.x,u.y,u.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(m,c.x,c.y,c.z)}else for(var y=0,_=e.count;y<_;y+=3)a.fromBufferAttribute(e,y+0),s.fromBufferAttribute(e,y+1),o.fromBufferAttribute(e,y+2),h.subVectors(o,s),f.subVectors(a,s),h.cross(f),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:\"merge\",value:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0);var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,a=t.attributes[i],s=a.array,o=(a=a.itemSize*e,Math.min(s.length,r.length-a)),u=0,l=a;u<o;u++,l++)r[l]=s[u];return this}}},{key:\"normalizeNormals\",value:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)Wa.fromBufferAttribute(t,e),Wa.normalize(),t.setXYZ(e,Wa.x,Wa.y,Wa.z)}},{key:\"toNonIndexed\",value:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=t.normalized,a=new n.constructor(e.length*i),s=0,o=0,u=0,l=e.length;u<l;u++){s=t.isInterleavedBufferAttribute?e[u]*t.data.stride+t.offset:e[u]*i;for(var c=0;c<i;c++)a[o++]=n[s++]}return new Ta(a,i,r)}if(null===this.index)return this;var e=new n,i=this.index.array,r=this.attributes;for(var a in r){var s=t(r[a],i);e.setAttribute(a,s)}var o=this.morphAttributes;for(var u in o){for(var l=[],c=o[u],h=0,f=c.length;h<f;h++){var d=t(c[h],i);l.push(d)}e.morphAttributes[u]=l}e.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,g=0,v=p.length;g<v;g++){var m=p[g];e.addGroup(m.start,m.count,m.materialIndex)}return e}},{key:\"toJSON\",value:function(){var t={metadata:{version:4.5,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};if(t.uuid=this.uuid,t.type=this.type,\"\"!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var a in r){var s=r[a];t.data.attributes[a]=s.toJSON(t.data)}var o={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],h=[],f=0,d=c.length;f<d;f++){var p=c[f];h.push(p.toJSON(t.data))}0<h.length&&(o[l]=h,u=!0)}u&&(t.data.morphAttributes=o,t.data.morphTargetsRelative=this.morphTargetsRelative),0<(i=this.groups).length&&(t.data.groups=JSON.parse(JSON.stringify(i)));var g=this.boundingSphere;return null!==g&&(t.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),t}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone(e));var i=t.attributes;for(var r in i){var a=i[r];this.setAttribute(r,a.clone(e))}var s=t.morphAttributes;for(var o in s){for(var u=[],l=s[o],c=0,h=l.length;c<h;c++)u.push(l[c].clone(e));this.morphAttributes[o]=u}this.morphTargetsRelative=t.morphTargetsRelative;for(var f=t.groups,d=0,p=f.length;d<p;d++){var g=f[d];this.addGroup(g.start,g.count,g.materialIndex)}var v=t.boundingBox;null!==v&&(this.boundingBox=v.clone());var m=t.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}}]),n}(Ci);Ga.prototype.isBufferGeometry=!0;var Ha=new Pr,Xa=new Or,Ya=new wr,qa=new tr,Ja=new tr,Za=new tr,Ka=new tr,Qa=new tr,$a=new tr,ts=new tr,es=new tr,ns=new tr,is=new Bi,rs=new Bi,as=new Bi,ss=new tr,os=new tr,us=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ga,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sa;return y(this,n),t=e.call(this),t.type=\"Mesh\",t.geometry=i,t.material=r,t.updateMorphTargets(),t}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}},{key:\"updateMorphTargets\",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(0<n.length){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else void 0!==(t=t.morphTargets)&&t.length}},{key:\"raycast\",value:function(t,e){var n,i=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),Ya.copy(i.boundingSphere),Ya.applyMatrix4(a),!1!==t.ray.intersectsSphere(Ya)&&(Ha.copy(a).invert(),Xa.copy(t.ray).applyMatrix4(Ha),null===i.boundingBox||!1!==Xa.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var s=i.index,o=i.attributes.position,u=i.morphAttributes.position,l=i.morphTargetsRelative,c=i.attributes.uv,h=i.attributes.uv2,f=i.groups,d=i.drawRange;if(null!==s)if(Array.isArray(r))for(var p=0,g=f.length;p<g;p++)for(var v=f[p],m=r[v.materialIndex],y=Math.max(v.start,d.start),_=Math.min(s.count,Math.min(v.start+v.count,d.start+d.count));y<_;y+=3){var x=s.getX(y),b=s.getX(y+1),w=s.getX(y+2);n=ls(this,m,t,Xa,o,u,l,c,h,x,b,w),n&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=v.materialIndex,e.push(n))}else for(var S=Math.max(0,d.start),C=Math.min(s.count,d.start+d.count);S<C;S+=3){var M=s.getX(S),T=s.getX(S+1),k=s.getX(S+2);n=ls(this,r,t,Xa,o,u,l,c,h,M,T,k),n&&(n.faceIndex=Math.floor(S/3),e.push(n))}else if(void 0!==o)if(Array.isArray(r))for(var A=0,E=f.length;A<E;A++)for(var O=f[A],P=r[O.materialIndex],I=Math.max(O.start,d.start),L=Math.min(o.count,Math.min(O.start+O.count,d.start+d.count));I<L;I+=3){var D=I,R=I+1,N=I+2;n=ls(this,P,t,Xa,o,u,l,c,h,D,R,N),n&&(n.faceIndex=Math.floor(I/3),n.face.materialIndex=O.materialIndex,e.push(n))}else for(var F=Math.max(0,d.start),B=Math.min(o.count,d.start+d.count);F<B;F+=3){var z=F,j=F+1,U=F+2;n=ls(this,r,t,Xa,o,u,l,c,h,z,j,U),n&&(n.faceIndex=Math.floor(F/3),e.push(n))}}else i.isGeometry}}]),n}(na);function ls(t,e,n,i,r,a,s,o,u,l,c,h){qa.fromBufferAttribute(r,l),Ja.fromBufferAttribute(r,c),Za.fromBufferAttribute(r,h);var f=t.morphTargetInfluences;if(a&&f){ts.set(0,0,0),es.set(0,0,0),ns.set(0,0,0);for(var d=0,p=a.length;d<p;d++){var g=f[d],v=a[d];0!==g&&(Ka.fromBufferAttribute(v,l),Qa.fromBufferAttribute(v,c),$a.fromBufferAttribute(v,h),s?(ts.addScaledVector(Ka,g),es.addScaledVector(Qa,g),ns.addScaledVector($a,g)):(ts.addScaledVector(Ka.sub(qa),g),es.addScaledVector(Qa.sub(Ja),g),ns.addScaledVector($a.sub(Za),g)))}qa.add(ts),Ja.add(es),Za.add(ns)}t.isSkinnedMesh&&(t.boneTransform(l,qa),t.boneTransform(c,Ja),t.boneTransform(h,Za));var m=function(t,e,n,i,r,a,s,o){var u;return u=e.side===ct?i.intersectTriangle(s,a,r,!0,o):i.intersectTriangle(r,a,s,e.side!==ht,o),null===u?null:(os.copy(o),os.applyMatrix4(t.matrixWorld),(o=n.ray.origin.distanceTo(os))<n.near||o>n.far?null:{distance:o,point:os.clone(),object:t})}(t,e,n,i,qa,Ja,Za,ss);return m&&(o&&(is.fromBufferAttribute(o,l),rs.fromBufferAttribute(o,c),as.fromBufferAttribute(o,h),m.uv=da.getUV(ss,qa,Ja,Za,is,rs,as,new Bi)),u&&(is.fromBufferAttribute(u,l),rs.fromBufferAttribute(u,c),as.fromBufferAttribute(u,h),m.uv2=da.getUV(ss,qa,Ja,Za,is,rs,as,new Bi)),u={a:l,b:c,c:h,normal:new tr,materialIndex:0},da.getNormal(qa,Ja,Za,u.normal),m.face=u),m}us.prototype.isMesh=!0;var cs=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;y(this,n),t=e.call(this),t.type=\"BoxGeometry\",t.parameters={width:i,height:r,depth:a,widthSegments:s,heightSegments:o,depthSegments:u};var l=g(t);s=Math.floor(s),o=Math.floor(o),u=Math.floor(u);var c=[],h=[],f=[],d=[],p=0,v=0;function m(t,e,n,i,r,a,s,o,u,g,m){for(var y=a/u,_=s/g,x=a/2,b=s/2,w=o/2,S=u+1,C=g+1,M=0,T=0,k=new tr,A=0;A<C;A++)for(var E=A*_-b,O=0;O<S;O++){var P=O*y-x;k[t]=P*i,k[e]=E*r,k[n]=w,h.push(k.x,k.y,k.z),k[t]=0,k[e]=0,k[n]=0<o?1:-1,f.push(k.x,k.y,k.z),d.push(O/u),d.push(1-A/g),M+=1}for(var I=0;I<g;I++)for(var L=0;L<u;L++){var D=p+L+S*I,R=p+L+S*(I+1),N=p+(L+1)+S*(I+1),F=p+(L+1)+S*I;c.push(D,R,F),c.push(R,N,F),T+=6}l.addGroup(v,T,m),v+=T,p+=M}return m(\"z\",\"y\",\"x\",-1,-1,a,r,i,u,o,0),m(\"z\",\"y\",\"x\",1,-1,a,r,-i,u,o,1),m(\"x\",\"z\",\"y\",1,1,i,a,r,s,u,2),m(\"x\",\"z\",\"y\",1,-1,i,a,-r,s,u,3),m(\"x\",\"y\",\"z\",1,-1,i,r,a,s,o,4),m(\"x\",\"y\",\"z\",-1,-1,i,r,-a,s,o,5),t.setIndex(c),t.setAttribute(\"position\",new Ra(h,3)),t.setAttribute(\"normal\",new Ra(f,3)),t.setAttribute(\"uv\",new Ra(d,2)),t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}]),n}(Ga);function hs(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}return e}function fs(t){for(var e={},n=0;n<t.length;n++){var i=hs(t[n]);for(var r in i)e[r]=i[r]}return e}var ds={clone:hs,merge:fs},ps=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"ShaderMaterial\",i.defines={},i.uniforms={},i.vertexShader=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\",i.fragmentShader=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\",i.linewidth=1,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.lights=!1,i.clipping=!1,i.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},i.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},i.index0AttributeName=void 0,i.uniformsNeedUpdate=!1,i.glslVersion=null,void 0!==t&&(t.attributes,i.setValues(t)),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=hs(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}},{key:\"toJSON\",value:function(t){var e=f(d(n.prototype),\"toJSON\",this).call(this,t);for(var i in e.glslVersion=this.glslVersion,e.uniforms={},this.uniforms){var r=this.uniforms[i].value;r&&r.isTexture?e.uniforms[i]={type:\"t\",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:\"c\",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:\"v2\",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:\"v3\",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:\"v4\",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:\"m3\",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:\"m4\",value:r.toArray()}:e.uniforms[i]={value:r}}0<Object.keys(this.defines).length&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var a={};for(var s in this.extensions)!0===this.extensions[s]&&(a[s]=!0);return 0<Object.keys(a).length&&(e.extensions=a),e}}]),n}(ga);ps.prototype.isShaderMaterial=!0;var gs=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this),t.type=\"Camera\",t.matrixWorldInverse=new Pr,t.projectionMatrix=new Pr,t.projectionMatrixInverse=new Pr,t}return _(n,[{key:\"copy\",value:function(t,e){return f(d(n.prototype),\"copy\",this).call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}},{key:\"getWorldDirection\",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}},{key:\"updateMatrixWorld\",value:function(t){f(d(n.prototype),\"updateMatrixWorld\",this).call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:\"updateWorldMatrix\",value:function(t,e){f(d(n.prototype),\"updateWorldMatrix\",this).call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),n}(na);gs.prototype.isCamera=!0;var vs=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return y(this,n),t=e.call(this),t.type=\"PerspectiveCamera\",t.fov=i,t.zoom=1,t.near=a,t.far=s,t.focus=10,t.aspect=r,t.view=null,t.filmGauge=35,t.filmOffset=0,t.updateProjectionMatrix(),t}return _(n,[{key:\"copy\",value:function(t,e){return f(d(n.prototype),\"copy\",this).call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}},{key:\"setFocalLength\",value:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*Ei*Math.atan(t),this.updateProjectionMatrix()}},{key:\"getFocalLength\",value:function(){var t=Math.tan(.5*Ai*this.fov);return.5*this.getFilmHeight()/t}},{key:\"getEffectiveFOV\",value:function(){return 2*Ei*Math.atan(Math.tan(.5*Ai*this.fov)/this.zoom)}},{key:\"getFilmWidth\",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:\"getFilmHeight\",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:\"setViewOffset\",value:function(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:\"clearViewOffset\",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:\"updateProjectionMatrix\",value:function(){var t,e=this.near,n=e*Math.tan(.5*Ai*this.fov)/this.zoom,i=2*n,r=this.aspect*i,a=-.5*r,s=this.view;null!==this.view&&this.view.enabled&&(t=s.fullWidth,o=s.fullHeight,a+=s.offsetX*r/t,n-=s.offsetY*i/o,r*=s.width/t,i*=s.height/o);var o=this.filmOffset;0!==o&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:\"toJSON\",value:function(t){var e=f(d(n.prototype),\"toJSON\",this).call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}]),n}(gs);vs.prototype.isPerspectiveCamera=!0;var ms=function(t){v(n,t);var e=m(n);function n(t,i,r){var a;if(y(this,n),a=e.call(this),a.type=\"CubeCamera\",!0===r.isWebGLCubeRenderTarget){a.renderTarget=r;var s=new vs(90,1,t,i);s.layers=a.layers,s.up.set(0,-1,0),s.lookAt(new tr(1,0,0)),a.add(s);var o=new vs(90,1,t,i);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new tr(-1,0,0)),a.add(o);var u=new vs(90,1,t,i);u.layers=a.layers,u.up.set(0,0,1),u.lookAt(new tr(0,1,0)),a.add(u);var l=new vs(90,1,t,i);l.layers=a.layers,l.up.set(0,0,-1),l.lookAt(new tr(0,-1,0)),a.add(l);var c=new vs(90,1,t,i);c.layers=a.layers,c.up.set(0,-1,0),c.lookAt(new tr(0,0,1)),a.add(c);var f=new vs(90,1,t,i);f.layers=a.layers,f.up.set(0,-1,0),f.lookAt(new tr(0,0,-1)),a.add(f)}return h(a)}return _(n,[{key:\"update\",value:function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=c(this.children,6),r=i[0],a=i[1],s=i[2],o=i[3],u=i[4],l=i[5],h=t.xr.enabled,f=t.getRenderTarget();t.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,a),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,u),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(f),t.xr.enabled=h}}]),n}(na),ys=function(t){v(n,t);var e=m(n);function n(t,i,r,a,s,o,u,l,c,h){var f;return y(this,n),f=e.call(this,t=void 0!==t?t:[],i=void 0!==i?i:te,r,a,s,o,u,l,c,h),f.flipY=!1,f}return _(n,[{key:\"images\",get:function(){return this.image},set:function(t){this.image=t}}]),n}(Yi);ys.prototype.isCubeTexture=!0;var _s=function(t){v(n,t);var e=m(n);function n(t,i,r){var a;return y(this,n),a=e.call(this,t,t,i=Number.isInteger(i)?r:i),i=i||{},a.texture=new ys(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),a.texture.isRenderTargetTexture=!0,a.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,a.texture.minFilter=void 0!==i.minFilter?i.minFilter:pe,a.texture._needsFlipEnvMap=!1,a}return _(n,[{key:\"fromEquirectangularTexture\",value:function(t,e){this.texture.type=e.type,this.texture.format=Le,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n={uniforms:{tEquirect:{value:null}},vertexShader:\"\\n\\n\\t\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\t\\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\n\\t\\t\\t\\t\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\t\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\n\\t\\t\\t\\t\\t#include <begin_vertex>\\n\\t\\t\\t\\t\\t#include <project_vertex>\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t\",fragmentShader:\"\\n\\n\\t\\t\\t\\tuniform sampler2D tEquirect;\\n\\n\\t\\t\\t\\tvarying vec3 vWorldDirection;\\n\\n\\t\\t\\t\\t#include <common>\\n\\n\\t\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\t\\tvec3 direction = normalize( vWorldDirection );\\n\\n\\t\\t\\t\\t\\tvec2 sampleUV = equirectUv( direction );\\n\\n\\t\\t\\t\\t\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\n\\t\\t\\t\\t}\\n\\t\\t\\t\"},i=new cs(5,5,5),r=new ps({name:\"CubemapFromEquirect\",uniforms:hs(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ct,blending:pt});r.uniforms.tEquirect.value=e;var a=new us(i,r);return i=e.minFilter,e.minFilter===me&&(e.minFilter=pe),new ms(1,10,this).update(t,a),e.minFilter=i,a.geometry.dispose(),a.material.dispose(),this}},{key:\"clear\",value:function(t,e,n,i){for(var r=t.getRenderTarget(),a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,i);t.setRenderTarget(r)}}]),n}(Zi);_s.prototype.isWebGLCubeRenderTarget=!0;var xs=new tr,bs=new tr,ws=new zi,Ss=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tr(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;y(this,t),this.normal=e,this.constant=n}return _(t,[{key:\"set\",value:function(t,e){return this.normal.copy(t),this.constant=e,this}},{key:\"setComponents\",value:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}},{key:\"setFromNormalAndCoplanarPoint\",value:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}},{key:\"setFromCoplanarPoints\",value:function(t,e,n){return e=xs.subVectors(n,e).cross(bs.subVectors(t,e)).normalize(),this.setFromNormalAndCoplanarPoint(e,t),this}},{key:\"copy\",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:\"normalize\",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:\"negate\",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:\"distanceToPoint\",value:function(t){return this.normal.dot(t)+this.constant}},{key:\"distanceToSphere\",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:\"projectPoint\",value:function(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}},{key:\"intersectLine\",value:function(t,e){var n=t.delta(xs),i=this.normal.dot(n);return 0===i?0===this.distanceToPoint(t.start)?e.copy(t.start):null:(i=-(t.start.dot(this.normal)+this.constant)/i)<0||1<i?null:e.copy(n).multiplyScalar(i).add(t.start)}},{key:\"intersectsLine\",value:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),e<0&&0<t||t<0&&0<e}},{key:\"intersectsBox\",value:function(t){return t.intersectsPlane(this)}},{key:\"intersectsSphere\",value:function(t){return t.intersectsPlane(this)}},{key:\"coplanarPoint\",value:function(t){return t.copy(this.normal).multiplyScalar(-this.constant)}},{key:\"applyMatrix4\",value:function(t,e){e=e||ws.getNormalMatrix(t);var n=this.coplanarPoint(xs).applyMatrix4(t);return e=this.normal.applyMatrix3(e).normalize(),this.constant=-n.dot(e),this}},{key:\"translate\",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:\"equals\",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),t}();Ss.prototype.isPlane=!0;var Cs=new wr,Ms=new tr,Ts=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ss,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ss,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ss,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ss,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ss,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Ss;y(this,t),this.planes=[e,n,i,r,a,s]}return _(t,[{key:\"set\",value:function(t,e,n,i,r,a){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this}},{key:\"copy\",value:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this}},{key:\"setFromProjectionMatrix\",value:function(t){var e=this.planes,n=(v=t.elements)[0],i=v[1],r=v[2],a=v[3],s=v[4],o=v[5],u=v[6],l=v[7],c=v[8],h=v[9],f=v[10],d=v[11],p=v[12],g=v[13],v=(t=v[14],v[15]);return e[0].setComponents(a-n,l-s,d-c,v-p).normalize(),e[1].setComponents(a+n,l+s,d+c,v+p).normalize(),e[2].setComponents(a+i,l+o,d+h,v+g).normalize(),e[3].setComponents(a-i,l-o,d-h,v-g).normalize(),e[4].setComponents(a-r,l-u,d-f,v-t).normalize(),e[5].setComponents(a+r,l+u,d+f,v+t).normalize(),this}},{key:\"intersectsObject\",value:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Cs.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Cs)}},{key:\"intersectsSprite\",value:function(t){return Cs.center.set(0,0,0),Cs.radius=.7071067811865476,Cs.applyMatrix4(t.matrixWorld),this.intersectsSphere(Cs)}},{key:\"intersectsSphere\",value:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0}},{key:\"intersectsBox\",value:function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(Ms.x=(0<i.normal.x?t.max:t.min).x,Ms.y=(0<i.normal.y?t.max:t.min).y,Ms.z=(0<i.normal.z?t.max:t.min).z,i.distanceToPoint(Ms)<0)return!1}return!0}},{key:\"containsPoint\",value:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),t}();function ks(){var t=null,e=!1,n=null,i=null;function r(e,a){n(e,a),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function As(t,e){var n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){var a=i.get(e);(!a||a.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version})}else{e.isInterleavedBufferAttribute&&(e=e.data);var s=i.get(e);void 0===s?i.set(e,function(e,i){var r=e.array,a=e.usage,s=t.createBuffer();t.bindBuffer(i,s),t.bufferData(i,r,a),e.onUploadCallback();var o=5126;return r instanceof Float32Array?o=5126:r instanceof Float64Array||(r instanceof Uint16Array?e.isFloat16BufferAttribute?n&&(o=5131):o=5123:r instanceof Int16Array?o=5122:r instanceof Uint32Array?o=5125:r instanceof Int32Array?o=5124:r instanceof Int8Array?o=5120:(r instanceof Uint8Array||r instanceof Uint8ClampedArray)&&(o=5121)),{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):s.version<e.version&&(function(e,i,r){var a=i.array,s=i.updateRange;t.bindBuffer(r,e),-1===s.count?t.bufferSubData(r,0,a):(n?t.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):t.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1)}(s.buffer,e,r),s.version=e.version)}}}}var Es=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;y(this,n),t=e.call(this),t.type=\"PlaneGeometry\",t.parameters={width:i,height:r,widthSegments:a,heightSegments:s};for(var o=i/2,u=r/2,l=Math.floor(a),c=Math.floor(s),h=l+1,f=c+1,d=i/l,p=r/c,g=[],v=[],m=[],_=[],x=0;x<f;x++)for(var b=x*p-u,w=0;w<h;w++){var S=w*d-o;v.push(S,-b,0),m.push(0,0,1),_.push(w/l),_.push(1-x/c)}for(var C=0;C<c;C++)for(var M=0;M<l;M++){var T=M+h*C,k=M+h*(C+1),A=M+1+h*(C+1),E=M+1+h*C;g.push(T,k,E),g.push(k,A,E)}return t.setIndex(g),t.setAttribute(\"position\",new Ra(v,3)),t.setAttribute(\"normal\",new Ra(m,3)),t.setAttribute(\"uv\",new Ra(_,2)),t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}}]),n}(Ga),Os={alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\",alphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",alphatest_fragment:\"#ifdef USE_ALPHATEST\\n\\tif ( diffuseColor.a < alphaTest ) discard;\\n#endif\",alphatest_pars_fragment:\"#ifdef USE_ALPHATEST\\n\\tuniform float alphaTest;\\n#endif\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\\n\\t#endif\\n#endif\",aomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",begin_vertex:\"vec3 transformed = vec3( position );\",beginnormal_vertex:\"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\",bsdfs:\"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n}\\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( f0, f90, dotVH );\\n\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( V * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie( float roughness, float dotNH ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tfloat invAlpha = 1.0 / alpha;\\n\\tfloat cos2h = dotNH * dotNH;\\n\\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\\n\\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\\n}\\nfloat V_Neubelt( float dotNV, float dotNL ) {\\n\\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\\n}\\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat D = D_Charlie( sheenRoughness, dotNH );\\n\\tfloat V = V_Neubelt( dotNV, dotNL );\\n\\treturn sheenColor * ( D * V );\\n}\\n#endif\",bumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\",clipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\",clipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\",color_fragment:\"#if defined( USE_COLOR_ALPHA )\\n\\tdiffuseColor *= vColor;\\n#elif defined( USE_COLOR )\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\",color_pars_vertex:\"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#if defined( USE_COLOR_ALPHA )\\n\\tvColor = vec4( 1.0 );\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor *= color;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\",common:\"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract( sin( sn ) * c );\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\",cube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_maxMipLevel 8.0\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_maxTileSize 256.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\\n\\t\\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tif ( mipInt < cubeUV_maxMipLevel ) {\\n\\t\\t\\tuv.y += 2.0 * cubeUV_maxTileSize;\\n\\t\\t}\\n\\t\\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n\\t\\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\\n\\t\\tuv *= texelSize;\\n\\t\\treturn texture2D( envMap, uv ).rgb;\\n\\t}\\n\\t#define r0 1.0\\n\\t#define v0 0.339\\n\\t#define m0 - 2.0\\n\\t#define r1 0.8\\n\\t#define v1 0.276\\n\\t#define m1 - 1.0\\n\\t#define r4 0.4\\n\\t#define v4 0.046\\n\\t#define m4 2.0\\n\\t#define r5 0.305\\n\\t#define v5 0.016\\n\\t#define m5 3.0\\n\\t#define r6 0.21\\n\\t#define v6 0.0038\\n\\t#define m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= r1 ) {\\n\\t\\t\\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\\n\\t\\t} else if ( roughness >= r4 ) {\\n\\t\\t\\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\\n\\t\\t} else if ( roughness >= r5 ) {\\n\\t\\t\\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\\n\\t\\t} else if ( roughness >= r6 ) {\\n\\t\\t\\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\",defaultnormal_vertex:\"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\",emissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\",emissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\",encodings_fragment:\"gl_FragColor = linearToOutputTexel( gl_FragColor );\",encodings_pars_fragment:\"vec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\",envmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\",envmap_common_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\",envmap_pars_fragment:\"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\",envmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\",envmap_physical_pars_fragment:\"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getIBLIrradiance( const in vec3 normal ) {\\n\\t\\t#if defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\\n\\t\\t#if defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 reflectVec;\\n\\t\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\t\\treflectVec = reflect( - viewDir, normal );\\n\\t\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\treflectVec = refract( - viewDir, normal, refractionRatio );\\n\\t\\t\\t#endif\\n\\t\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\",envmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\",fog_vertex:\"#ifdef USE_FOG\\n\\tvFogDepth = - mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n\\tvarying float vFogDepth;\\n#endif\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float vFogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\",gradientmap_pars_fragment:\"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn vec3( texture2D( gradientMap, coord ).r );\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\",lightmap_fragment:\"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tlightMapIrradiance *= PI;\\n\\t#endif\\n\\treflectedLight.indirectDiffuse += lightMapIrradiance;\\n#endif\",lightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_vertex:\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\",lights_pars_begin:\"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\\n\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\treturn irradiance;\\n}\\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tif ( cutoffDistance > 0.0 ) {\\n\\t\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t}\\n\\t\\treturn distanceFalloff;\\n\\t#else\\n\\t\\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\t\\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t\\t}\\n\\t\\treturn 1.0;\\n\\t#endif\\n}\\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\\n\\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tlight.color = directionalLight.color;\\n\\t\\tlight.direction = directionalLight.direction;\\n\\t\\tlight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tlight.color = pointLight.color;\\n\\t\\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat angleCos = dot( light.direction, spotLight.direction );\\n\\t\\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\tif ( spotAttenuation > 0.0 ) {\\n\\t\\t\\tfloat lightDistance = length( lVector );\\n\\t\\t\\tlight.color = spotLight.color * spotAttenuation;\\n\\t\\t\\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t\\t} else {\\n\\t\\t\\tlight.color = vec3( 0.0 );\\n\\t\\t\\tlight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\\n\\t\\tfloat dotNL = dot( normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\",lights_toon_fragment:\"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\",lights_toon_pars_fragment:\"varying vec3 vViewPosition;\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\",lights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\",lights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\\nmaterial.roughness = min( material.roughness, 1.0 );\\n#ifdef IOR\\n\\t#ifdef SPECULAR\\n\\t\\tfloat specularIntensityFactor = specularIntensity;\\n\\t\\tvec3 specularColorFactor = specularColor;\\n\\t\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\t\\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\\n\\t\\t#endif\\n\\t\\t#ifdef USE_SPECULARCOLORMAP\\n\\t\\t\\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\\n\\t\\t#endif\\n\\t\\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\\n\\t#else\\n\\t\\tfloat specularIntensityFactor = 1.0;\\n\\t\\tvec3 specularColorFactor = vec3( 1.0 );\\n\\t\\tmaterial.specularF90 = 1.0;\\n\\t#endif\\n\\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.specularF90 = 1.0;\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\tmaterial.clearcoatF0 = vec3( 0.04 );\\n\\tmaterial.clearcoatF90 = 1.0;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheenColor;\\n\\t#ifdef USE_SHEENCOLORMAP\\n\\t\\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\\n\\t#endif\\n\\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\\n\\t#ifdef USE_SHEENROUGHNESSMAP\\n\\t\\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\\n\\t#endif\\n#endif\",lights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat roughness;\\n\\tvec3 specularColor;\\n\\tfloat specularF90;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat clearcoat;\\n\\t\\tfloat clearcoatRoughness;\\n\\t\\tvec3 clearcoatF0;\\n\\t\\tfloat clearcoatF90;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tvec3 sheenColor;\\n\\t\\tfloat sheenRoughness;\\n\\t#endif\\n};\\nvec3 clearcoatSpecular = vec3( 0.0 );\\nvec3 sheenSpecular = vec3( 0.0 );\\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat r2 = roughness * roughness;\\n\\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\\n\\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\\n\\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\\n\\treturn saturate( DG * RECIPROCAL_PI );\\n}\\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\\n\\treturn fab;\\n}\\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\treturn specularColor * fab.x + specularF90 * fab.y;\\n}\\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\\n\\tfloat Ess = fab.x + fab.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.roughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = dotNLcc * directLight.color;\\n\\t\\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\\n\\t#endif\\n\\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\\n\\t#endif\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\",lights_fragment_begin:\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef USE_CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointLightInfo( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotLightInfo( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\",lights_fragment_maps:\"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getIBLIrradiance( geometry.normal );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\\n\\t#endif\\n#endif\",lights_fragment_end:\"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\",logdepthbuf_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\",logdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\",map_fragment:\"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\",map_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\",map_particle_fragment:\"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\",map_particle_pars_fragment:\"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",metalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\",metalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\t\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\t\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\t\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n\\t#endif\\n#endif\",morphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\\n\\t\\tuniform sampler2DArray morphTargetsTexture;\\n\\t\\tuniform vec2 morphTargetsTextureSize;\\n\\t\\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\\n\\t\\t\\tfloat texelIndex = float( vertexIndex * stride + offset );\\n\\t\\t\\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\\n\\t\\t\\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\\n\\t\\t\\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\\n\\t\\t\\treturn texture( morphTargetsTexture, morphUV ).xyz;\\n\\t\\t}\\n\\t#else\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t\\t#else\\n\\t\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\",morphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\t\\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\\n\\t\\t\\t#else\\n\\t\\t\\t\\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\\n\\t\\t\\t#endif\\n\\t\\t}\\n\\t#else\\n\\t\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\t\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\t\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\t\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\",normal_fragment_begin:\"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\\n#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * faceDirection;\\n\\t\\t\\tbitangent = bitangent * faceDirection;\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\",normal_fragment_maps:\"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\\n#endif\",normal_pars_fragment:\"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\",normal_pars_vertex:\"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\",normal_vertex:\"#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\",normalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 N = surf_norm;\\n\\t\\tvec3 q1perp = cross( q1, N );\\n\\t\\tvec3 q0perp = cross( N, q0 );\\n\\t\\tvec3 T = q1perp * st0.x + q0perp * st1.x;\\n\\t\\tvec3 B = q1perp * st0.y + q0perp * st1.y;\\n\\t\\tfloat det = max( dot( T, T ), dot( B, B ) );\\n\\t\\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\\n\\t\\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\\n\\t}\\n#endif\",clearcoat_normal_fragment_begin:\"#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\",clearcoat_normal_fragment_maps:\"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\\n\\t#endif\\n#endif\",clearcoat_pars_fragment:\"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\",output_fragment:\"#ifdef OPAQUE\\ndiffuseColor.a = 1.0;\\n#endif\\n#ifdef USE_TRANSMISSION\\ndiffuseColor.a *= transmissionAlpha + 0.1;\\n#endif\\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\",packing:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\",premultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\",project_vertex:\"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\",dithering_fragment:\"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\",dithering_pars_fragment:\"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\",roughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\",roughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\",shadowmap_pars_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\",shadowmap_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\",shadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\",skinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\",skinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\",specularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\",tonemapping_pars_fragment:\"#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\",transmission_fragment:\"#ifdef USE_TRANSMISSION\\n\\tfloat transmissionAlpha = 1.0;\\n\\tfloat transmissionFactor = transmission;\\n\\tfloat thicknessFactor = thickness;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\\n\\t#endif\\n\\tvec3 pos = vWorldPosition;\\n\\tvec3 v = normalize( cameraPosition - pos );\\n\\tvec3 n = inverseTransformDirection( normal, viewMatrix );\\n\\tvec4 transmission = getIBLVolumeRefraction(\\n\\t\\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\\n\\t\\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\\n\\t\\tattenuationColor, attenuationDistance );\\n\\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\\n\\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\\n#endif\",transmission_pars_fragment:\"#ifdef USE_TRANSMISSION\\n\\tuniform float transmission;\\n\\tuniform float thickness;\\n\\tuniform float attenuationDistance;\\n\\tuniform vec3 attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tuniform sampler2D transmissionMap;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tuniform sampler2D thicknessMap;\\n\\t#endif\\n\\tuniform vec2 transmissionSamplerSize;\\n\\tuniform sampler2D transmissionSamplerMap;\\n\\tuniform mat4 modelMatrix;\\n\\tuniform mat4 projectionMatrix;\\n\\tvarying vec3 vWorldPosition;\\n\\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\\n\\t\\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\\n\\t\\tvec3 modelScale;\\n\\t\\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\\n\\t\\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\\n\\t\\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\\n\\t\\treturn normalize( refractionVector ) * thickness * modelScale;\\n\\t}\\n\\tfloat applyIorToRoughness( float roughness, float ior ) {\\n\\t\\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\\n\\t}\\n\\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\\n\\t\\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\\n\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\\n\\t\\t#else\\n\\t\\t\\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\\n\\t\\tif ( attenuationDistance == 0.0 ) {\\n\\t\\t\\treturn radiance;\\n\\t\\t} else {\\n\\t\\t\\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\\n\\t\\t\\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\\t\\t\\treturn transmittance * radiance;\\n\\t\\t}\\n\\t}\\n\\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\\n\\t\\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\\n\\t\\tvec3 attenuationColor, float attenuationDistance ) {\\n\\t\\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\\n\\t\\tvec3 refractedRayExit = position + transmissionRay;\\n\\t\\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\\n\\t\\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\\n\\t\\trefractionCoords += 1.0;\\n\\t\\trefractionCoords /= 2.0;\\n\\t\\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\\n\\t\\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\\n\\t\\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\\n\\t\\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\\n\\t}\\n#endif\",uv_pars_fragment:\"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\",uv_pars_vertex:\"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\",uv_vertex:\"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\",uv2_pars_fragment:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_pars_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\",uv2_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\",background_vert:\"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\",background_frag:\"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",cube_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\",cube_frag:\"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",depth_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\",depth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\",distanceRGBA_vert:\"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\",distanceRGBA_frag:\"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\",equirect_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\",equirect_frag:\"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",linedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\",linedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\",meshbasic_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinbase_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshlambert_vert:\"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshlambert_frag:\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshmatcap_vert:\"#define MATCAP\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\",meshmatcap_frag:\"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshnormal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\",meshnormal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\",meshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshphysical_vert:\"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifdef USE_TRANSMISSION\\n\\tvarying vec3 vWorldPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n#ifdef USE_TRANSMISSION\\n\\tvWorldPosition = worldPosition.xyz;\\n#endif\\n}\",meshphysical_frag:\"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define IOR\\n\\t#define SPECULAR\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef IOR\\n\\tuniform float ior;\\n#endif\\n#ifdef SPECULAR\\n\\tuniform float specularIntensity;\\n\\tuniform vec3 specularColor;\\n\\t#ifdef USE_SPECULARINTENSITYMAP\\n\\t\\tuniform sampler2D specularIntensityMap;\\n\\t#endif\\n\\t#ifdef USE_SPECULARCOLORMAP\\n\\t\\tuniform sampler2D specularColorMap;\\n\\t#endif\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheenColor;\\n\\tuniform float sheenRoughness;\\n\\t#ifdef USE_SHEENCOLORMAP\\n\\t\\tuniform sampler2D sheenColorMap;\\n\\t#endif\\n\\t#ifdef USE_SHEENROUGHNESSMAP\\n\\t\\tuniform sampler2D sheenRoughnessMap;\\n\\t#endif\\n#endif\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_physical_pars_fragment>\\n#include <transmission_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\\n\\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\\n\\t#include <transmission_fragment>\\n\\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\\n\\t#ifdef USE_SHEEN\\n\\t\\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\\n\\t\\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\\n\\t\\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\\n\\t#endif\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",meshtoon_vert:\"#define TOON\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",meshtoon_frag:\"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",points_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\",points_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\",shadow_vert:\"#include <common>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",shadow_frag:\"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",sprite_vert:\"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\",sprite_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <output_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\"},Ps={common:{diffuse:{value:new wa(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new zi},uv2Transform:{value:new zi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Bi(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wa(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wa(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zi}},sprite:{diffuse:{value:new wa(16777215)},opacity:{value:1},center:{value:new Bi(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zi}}},Is={basic:{uniforms:fs([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.fog]),vertexShader:Os.meshbasic_vert,fragmentShader:Os.meshbasic_frag},lambert:{uniforms:fs([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.fog,Ps.lights,{emissive:{value:new wa(0)}}]),vertexShader:Os.meshlambert_vert,fragmentShader:Os.meshlambert_frag},phong:{uniforms:fs([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.fog,Ps.lights,{emissive:{value:new wa(0)},specular:{value:new wa(1118481)},shininess:{value:30}}]),vertexShader:Os.meshphong_vert,fragmentShader:Os.meshphong_frag},standard:{uniforms:fs([Ps.common,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.roughnessmap,Ps.metalnessmap,Ps.fog,Ps.lights,{emissive:{value:new wa(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Os.meshphysical_vert,fragmentShader:Os.meshphysical_frag},toon:{uniforms:fs([Ps.common,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.gradientmap,Ps.fog,Ps.lights,{emissive:{value:new wa(0)}}]),vertexShader:Os.meshtoon_vert,fragmentShader:Os.meshtoon_frag},matcap:{uniforms:fs([Ps.common,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.fog,{matcap:{value:null}}]),vertexShader:Os.meshmatcap_vert,fragmentShader:Os.meshmatcap_frag},points:{uniforms:fs([Ps.points,Ps.fog]),vertexShader:Os.points_vert,fragmentShader:Os.points_frag},dashed:{uniforms:fs([Ps.common,Ps.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Os.linedashed_vert,fragmentShader:Os.linedashed_frag},depth:{uniforms:fs([Ps.common,Ps.displacementmap]),vertexShader:Os.depth_vert,fragmentShader:Os.depth_frag},normal:{uniforms:fs([Ps.common,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,{opacity:{value:1}}]),vertexShader:Os.meshnormal_vert,fragmentShader:Os.meshnormal_frag},sprite:{uniforms:fs([Ps.sprite,Ps.fog]),vertexShader:Os.sprite_vert,fragmentShader:Os.sprite_frag},background:{uniforms:{uvTransform:{value:new zi},t2D:{value:null}},vertexShader:Os.background_vert,fragmentShader:Os.background_frag},cube:{uniforms:fs([Ps.envmap,{opacity:{value:1}}]),vertexShader:Os.cube_vert,fragmentShader:Os.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Os.equirect_vert,fragmentShader:Os.equirect_frag},distanceRGBA:{uniforms:fs([Ps.common,Ps.displacementmap,{referencePosition:{value:new tr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Os.distanceRGBA_vert,fragmentShader:Os.distanceRGBA_frag},shadow:{uniforms:fs([Ps.lights,Ps.fog,{color:{value:new wa(0)},opacity:{value:1}}]),vertexShader:Os.shadow_vert,fragmentShader:Os.shadow_frag}};function Ls(t,e,n,i,r){var a,s,o=new wa(0),u=0,l=null,c=0,h=null;function f(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,r)}return{getClearColor:function(){return o},setClearColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(t),u=e,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,f(o,u)},render:function(n,r){var d=!1,p=!0===r.isScene?r.background:null;p&&p.isTexture&&(p=e.get(p));var g=t.xr;(r=g.getSession&&g.getSession())&&\"additive\"===r.environmentBlendMode&&(p=null),null===p?f(o,u):p&&p.isColor&&(f(p,1),d=!0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&(p.isCubeTexture||p.mapping===re)?(void 0===s&&(s=new us(new cs(1,1,1),new ps({name:\"BackgroundCubeMaterial\",uniforms:hs(Is.cube.uniforms),vertexShader:Is.cube.vertexShader,fragmentShader:Is.cube.fragmentShader,side:ct,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute(\"normal\"),s.geometry.deleteAttribute(\"uv\"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,\"envMap\",{get:function(){return this.uniforms.envMap.value}}),i.update(s)),s.material.uniforms.envMap.value=p,s.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,l===p&&c===p.version&&h===t.toneMapping||(s.material.needsUpdate=!0,l=p,c=p.version,h=t.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):p&&p.isTexture&&(void 0===a&&(a=new us(new Es(2,2),new ps({name:\"BackgroundMaterial\",uniforms:hs(Is.background.uniforms),vertexShader:Is.background.vertexShader,fragmentShader:Is.background.fragmentShader,side:lt,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute(\"normal\"),Object.defineProperty(a.material,\"map\",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&c===p.version&&h===t.toneMapping||(a.material.needsUpdate=!0,l=p,c=p.version,h=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function Ds(t,e,n,i){var r=t.getParameter(34921),a=i.isWebGL2?null:e.get(\"OES_vertex_array_object\"),s=i.isWebGL2||null!==a,o={},u=f(null),l=u;function c(e){return i.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function h(e){return i.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function f(t){for(var e=[],n=[],i=[],a=0;a<r;a++)e[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function d(){for(var t=l.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function p(t){g(t,0)}function g(n,r){var a=l.newAttributes,s=l.enabledAttributes,o=l.attributeDivisors;a[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),o[n]!==r&&((i.isWebGL2?t:e.get(\"ANGLE_instanced_arrays\"))[i.isWebGL2?\"vertexAttribDivisor\":\"vertexAttribDivisorANGLE\"](n,r),o[n]=r)}function v(){for(var e=l.newAttributes,n=l.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function m(e,n,r,a,s,o){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,a,s,o):t.vertexAttribIPointer(e,n,r,s,o)}function y(){_(),l!==u&&(l=u,c(l.object))}function _(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(r,u,h,y,_){var x,b=!1;s?(x=function(e,n,r){r=!0===r.wireframe;var s=o[e.id];void 0===s&&(s={},o[e.id]=s);var u=s[n.id];void 0===u&&(u={},s[n.id]=u);var l=u[r];return void 0===l&&(l=f(i.isWebGL2?t.createVertexArray():a.createVertexArrayOES()),u[r]=l),l}(y,h,u),l!==x&&(l=x,c(l.object)),b=function(t,e){var n=l.attributes,i=t.attributes,r=0;for(var a in i){var s=n[a],o=i[a];if(void 0===s)return!0;if(s.attribute!==o)return!0;if(s.data!==o.data)return!0;r++}return l.attributesNum!==r||l.index!==e}(y,_),b&&function(t,e){var n={},i=t.attributes,r=0;for(var a in i){var s=i[a],o={};(o.attribute=s).data&&(o.data=s.data),n[a]=o,r++}l.attributes=n,l.attributesNum=r,l.index=e}(y,_)):(x=!0===u.wireframe,l.geometry===y.id&&l.program===h.id&&l.wireframe===x||(l.geometry=y.id,l.program=h.id,l.wireframe=x,b=!0)),!0===r.isInstancedMesh&&(b=!0),null!==_&&n.update(_,34963),b&&(function(r,a,s,o){if(!1!==i.isWebGL2||!r.isInstancedMesh&&!o.isInstancedBufferGeometry||null!==e.get(\"ANGLE_instanced_arrays\")){d();var u=o.attributes,l=s.getAttributes(),c=a.defaultAttributeValues;for(var h in l){var f=l[h];if(0<=f.location){var y=u[h];if(void 0===y&&(\"instanceMatrix\"===h&&r.instanceMatrix&&(y=r.instanceMatrix),\"instanceColor\"===h&&r.instanceColor&&(y=r.instanceColor)),void 0!==y){var _=y.normalized,x=y.itemSize,b=n.get(y);if(void 0!==b){var w=b.buffer,S=b.type,C=b.bytesPerElement;if(y.isInterleavedBufferAttribute){var M=y.data,T=M.stride,k=y.offset;if(M&&M.isInstancedInterleavedBuffer){for(var A=0;A<f.locationSize;A++)g(f.location+A,M.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=M.meshPerAttribute*M.count)}else for(var E=0;E<f.locationSize;E++)p(f.location+E);t.bindBuffer(34962,w);for(var O=0;O<f.locationSize;O++)m(f.location+O,x/f.locationSize,S,_,T*C,(k+x/f.locationSize*O)*C)}else{if(y.isInstancedBufferAttribute){for(var P=0;P<f.locationSize;P++)g(f.location+P,y.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=y.meshPerAttribute*y.count)}else for(var I=0;I<f.locationSize;I++)p(f.location+I);t.bindBuffer(34962,w);for(var L=0;L<f.locationSize;L++)m(f.location+L,x/f.locationSize,S,_,x*C,x/f.locationSize*L*C)}}}else if(void 0!==c){var D=c[h];if(void 0!==D)switch(D.length){case 2:t.vertexAttrib2fv(f.location,D);break;case 3:t.vertexAttrib3fv(f.location,D);break;case 4:t.vertexAttrib4fv(f.location,D);break;default:t.vertexAttrib1fv(f.location,D)}}}}v()}}(r,u,h,y),null!==_&&t.bindBuffer(34963,n.get(_).buffer))},reset:y,resetDefaultState:_,dispose:function(){for(var t in y(),o){var e=o[t];for(var n in e){var i=e[n];for(var r in i)h(i[r].object),delete i[r];delete e[n]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0!==o[t.id]){var e=o[t.id];for(var n in e){var i=e[n];for(var r in i)h(i[r].object),delete i[r];delete e[n]}delete o[t.id]}},releaseStatesOfProgram:function(t){for(var e in o){var n=o[e];if(void 0!==n[t.id]){var i=n[t.id];for(var r in i)h(i[r].object),delete i[r];delete n[t.id]}}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:v}}function Rs(t,e,n,i){var r,a=i.isWebGL2;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r,1)},this.renderInstances=function(i,s,o){if(0!==o){var u,l;if(a)u=t,l=\"drawArraysInstanced\";else if(u=e.get(\"ANGLE_instanced_arrays\"),l=\"drawArraysInstancedANGLE\",null===u)return;u[l](r,i,s,o),n.update(s,r,o)}}}function Ns(t,e,n){var i;function r(e){if(\"highp\"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return\"highp\";e=\"mediump\"}return\"mediump\"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?\"mediump\":\"lowp\"}var a=\"undefined\"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||\"undefined\"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:\"highp\";(o=r(s))!==s&&(s=o);var o,u=a||e.has(\"WEBGL_draw_buffers\"),l=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),h=t.getParameter(35660),f=t.getParameter(3379),d=t.getParameter(34076),p=t.getParameter(34921),g=t.getParameter(36347),v=t.getParameter(36348),m=t.getParameter(36349),y=0<h,_=a||e.has(\"OES_texture_float\");return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:function(){return void 0!==i||(i=!0===e.has(\"EXT_texture_filter_anisotropic\")?(n=e.get(\"EXT_texture_filter_anisotropic\"),t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)):0),i;var n},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:m,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:o=y&&_,maxSamples:n=a?t.getParameter(36183):0}}function Fs(t){var e=this,n=null,i=0,r=!1,a=!1,s=new Ss,o=new zi,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=0<i),e.numPlanes=i,e.numIntersection=0}function c(t,n,i,r){var a=null!==t?t.length:0,l=null;if(0!==a){if(l=u.value,!0!==r||null===l){r=i+4*a;var c=n.matrixWorldInverse;o.getNormalMatrix(c),(null===l||l.length<r)&&(l=new Float32Array(r));for(var h=0,f=i;h!==a;++h,f+=4)s.copy(t[h]).applyMatrix4(c,o),s.normal.toArray(l,f),l[f+3]=s.constant}u.value=l,u.needsUpdate=!0}return e.numPlanes=a,e.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,a){var s=0!==t.length||e||0!==i||r;return r=e,n=c(t,a,0),i=t.length,s},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,l()},this.setState=function(e,s,o){var h=e.clippingPlanes,f=e.clipIntersection,d=e.clipShadows,p=t.get(e);if(!r||null===h||0===h.length||a&&!d)a?c(null):l();else{var g=4*(d=a?0:i),v=p.clippingState||null;u.value=v,v=c(h,s,g,o);for(var m=0;m!==g;++m)v[m]=n[m];p.clippingState=v,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=d}}}function Bs(t){var e=new WeakMap;function n(t,e){return e===ne?t.mapping=te:e===ie&&(t.mapping=ee),t}function i(t){var n=t.target;n.removeEventListener(\"dispose\",i);var r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){var a=r.mapping;if(a===ne||a===ie){if(e.has(r))return n(e.get(r).texture,r.mapping);var s=r.image;if(s&&0<s.height){a=t.getRenderTarget();var o=new _s(s.height/2);return o.fromEquirectangularTexture(t,r),e.set(r,o),t.setRenderTarget(a),r.addEventListener(\"dispose\",i),n(o.texture,r.mapping)}return null}}return r},dispose:function(){e=new WeakMap}}}Is.physical={uniforms:fs([Is.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Bi(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new wa(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Bi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new wa(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new wa(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Os.meshphysical_vert,fragmentShader:Os.meshphysical_frag};var zs=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return y(this,n),t=e.call(this),t.type=\"OrthographicCamera\",t.zoom=1,t.view=null,t.left=i,t.right=r,t.top=a,t.bottom=s,t.near=o,t.far=u,t.updateProjectionMatrix(),t}return _(n,[{key:\"copy\",value:function(t,e){return f(d(n.prototype),\"copy\",this).call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}},{key:\"setViewOffset\",value:function(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:\"clearViewOffset\",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:\"updateProjectionMatrix\",value:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,a=n+t,s=i+e,o=i-e;null!==this.view&&this.view.enabled&&(i=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom,r+=i*this.view.offsetX,a=r+i*this.view.width,s-=e*this.view.offsetY,o=s-e*this.view.height),this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:\"toJSON\",value:function(t){var e=f(d(n.prototype),\"toJSON\",this).call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}]),n}(gs);zs.prototype.isOrthographicCamera=!0;var js=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this,t),i.type=\"RawShaderMaterial\",i}return _(n)}(ps);js.prototype.isRawShaderMaterial=!0;var Us=Math.pow(2,8),Vs=[.125,.215,.35,.446,.526,.582],Ws=5+Vs.length,Gs=(t={},l(t,Hn,0),l(t,Xn,1),t),Hs=new zs,Xs=function(){for(var t=[],e=[],n=[],i=8,r=0;r<Ws;r++){var a=Math.pow(2,i);e.push(a);var s=1/a;4<r?s=Vs[r-8+4-1]:0==r&&(s=0),n.push(s);for(var o,u=[a=-(o=1/(a-1))/2,a,o=1+o/2,a,o,o,a,a,o,o,a,o],l=new Float32Array(108),c=new Float32Array(72),h=new Float32Array(36),f=0;f<6;f++){var d=f%3*2/3-1,p=2<f?0:-1;l.set([d,p,0,d+2/3,p,0,d+2/3,1+p,0,d,p,0,d+2/3,1+p,0,d,1+p,0],18*f),c.set(u,12*f),p=[f,f,f,f,f,f],h.set(p,6*f)}var g=new Ga;g.setAttribute(\"position\",new Ta(l,3)),g.setAttribute(\"uv\",new Ta(c,2)),g.setAttribute(\"faceIndex\",new Ta(h,1)),t.push(g),4<i&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}(),Ys=Xs._lodPlanes,qs=Xs._sizeLods,Js=Xs._sigmas,Zs=new wa,Ks=null;T=1/(C=(1+Math.sqrt(5))/2);var Qs=[new tr(1,1,1),new tr(-1,1,1),new tr(1,1,-1),new tr(-1,1,-1),new tr(0,C,T),new tr(0,C,-T),new tr(T,0,C),new tr(-T,0,C),new tr(C,T,0),new tr(-C,T,0)],$s=function(){function t(e){var n;y(this,t),this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=(n=new Float32Array(20),e=new tr(0,1,0),e=new js({name:\"SphericalGaussianBlur\",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:e}},vertexShader:ro(),fragmentShader:\"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform sampler2D envMap;\\n\\t\\t\\tuniform int samples;\\n\\t\\t\\tuniform float weights[ n ];\\n\\t\\t\\tuniform bool latitudinal;\\n\\t\\t\\tuniform float dTheta;\\n\\t\\t\\tuniform float mipInt;\\n\\t\\t\\tuniform vec3 poleAxis;\\n\\n\\t\\t\\t\".concat(ao(),\"\\n\\n\\t\\t\\t#define ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\t#include <cube_uv_reflection_fragment>\\n\\n\\t\\t\\tvec3 getSample( float theta, vec3 axis ) {\\n\\n\\t\\t\\t\\tfloat cosTheta = cos( theta );\\n\\t\\t\\t\\t// Rodrigues' axis-angle rotation\\n\\t\\t\\t\\tvec3 sampleDirection = vOutputDirection * cosTheta\\n\\t\\t\\t\\t\\t+ cross( axis, vOutputDirection ) * sin( theta )\\n\\t\\t\\t\\t\\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\\n\\n\\t\\t\\t\\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\\n\\n\\t\\t\\t\\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\\n\\n\\t\\t\\t\\t\\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\taxis = normalize( axis );\\n\\n\\t\\t\\t\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\t\\t\\t\\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\\n\\n\\t\\t\\t\\tfor ( int i = 1; i < n; i++ ) {\\n\\n\\t\\t\\t\\t\\tif ( i >= samples ) {\\n\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tfloat theta = dTheta * float( i );\\n\\t\\t\\t\\t\\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\\n\\t\\t\\t\\t\\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t}\\n\\t\\t\"),blending:pt,depthTest:!1,depthWrite:!1})),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return _(t,[{key:\"fromScene\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Ks=this._renderer.getRenderTarget();var r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),0<e&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}},{key:\"fromEquirectangular\",value:function(t){return this._fromTexture(t)}},{key:\"fromCubemap\",value:function(t){return this._fromTexture(t)}},{key:\"compileCubemapShader\",value:function(){null===this._cubemapShader&&(this._cubemapShader=io(),this._compileMaterial(this._cubemapShader))}},{key:\"compileEquirectangularShader\",value:function(){null===this._equirectShader&&(this._equirectShader=no(),this._compileMaterial(this._equirectShader))}},{key:\"dispose\",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var t=0;t<Ys.length;t++)Ys[t].dispose()}},{key:\"_cleanup\",value:function(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Ks),t.scissorTest=!1,eo(t,0,0,t.width,t.height)}},{key:\"_fromTexture\",value:function(t){Ks=this._renderer.getRenderTarget();var e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}},{key:\"_allocateTargets\",value:function(t){var e={magFilter:pe,minFilter:pe,generateMipmaps:!1,type:Te,format:Le,encoding:Hn,depthBuffer:!1},n=to(e);return n.depthBuffer=!t,this._pingPongRenderTarget=to(e),n}},{key:\"_compileMaterial\",value:function(t){t=new us(Ys[0],t),this._renderer.compile(t,Hs)}},{key:\"_sceneToCubeUV\",value:function(t,e,n,i){var r=new vs(90,1,e,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,u=o.autoClear;e=o.toneMapping,o.getClearColor(Zs),o.toneMapping=Yt,o.autoClear=!1;var l=new Sa({name:\"PMREM.Background\",side:ct,depthWrite:!1,depthTest:!1}),c=new us(new cs,l),h=!1;(n=t.background)?n.isColor&&(l.color.copy(n),t.background=null,h=!0):(l.color.copy(Zs),h=!0);for(var f=0;f<6;f++){var d=f%3;0==d?(r.up.set(0,a[f],0),r.lookAt(s[f],0,0)):1==d?(r.up.set(0,0,a[f]),r.lookAt(0,s[f],0)):(r.up.set(0,a[f],0),r.lookAt(0,0,s[f])),eo(i,d*Us,2<f?Us:0,Us,Us),o.setRenderTarget(i),h&&o.render(c,r),o.render(t,r)}c.geometry.dispose(),c.material.dispose(),o.toneMapping=e,o.autoClear=u,t.background=n}},{key:\"_setEncoding\",value:function(t,e){!0===this._renderer.capabilities.isWebGL2&&e.format===Le&&e.type===_e&&e.encoding===Xn?t.value=Gs[Hn]:t.value=Gs[e.encoding]}},{key:\"_textureToCubeUV\",value:function(t,e){var n=this._renderer,i=t.mapping===te||t.mapping===ee;i?null==this._cubemapShader&&(this._cubemapShader=io()):null==this._equirectShader&&(this._equirectShader=no());var r=i?this._cubemapShader:this._equirectShader,a=new us(Ys[0],r),s=r.uniforms;s.envMap.value=t,i||s.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(s.inputEncoding,t),eo(e,0,0,3*Us,2*Us),n.setRenderTarget(e),n.render(a,Hs)}},{key:\"_applyPMREM\",value:function(t){var e=this._renderer,n=e.autoClear;e.autoClear=!1;for(var i=1;i<Ws;i++){var r=Math.sqrt(Js[i]*Js[i]-Js[i-1]*Js[i-1]),a=Qs[(i-1)%Qs.length];this._blur(t,i-1,i,r,a)}e.autoClear=n}},{key:\"_blur\",value:function(t,e,n,i,r){var a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,i,\"latitudinal\",r),this._halfBlur(a,t,n,n,i,\"longitudinal\",r)}},{key:\"_halfBlur\",value:function(t,e,n,i,r,a,s){var o=this._renderer,u=this._blurMaterial,l=new us(Ys[i],u),c=u.uniforms;u=qs[n]-1;for(var h=r/(u=isFinite(r)?Math.PI/(2*u):2*Math.PI/39),f=isFinite(r)?1+Math.floor(3*h):20,d=[],p=0,g=0;g<20;++g){var v=g/h,m=Math.exp(-v*v/2);d.push(m),0==g?p+=m:g<f&&(p+=2*m)}for(var y=0;y<d.length;y++)d[y]=d[y]/p;c.envMap.value=t.texture,c.samples.value=f,c.weights.value=d,c.latitudinal.value=\"latitudinal\"===a,s&&(c.poleAxis.value=s),c.dTheta.value=u,c.mipInt.value=8-n,n=qs[i],eo(e,3*Math.max(0,Us-2*n),i=(0===i?0:2*Us)+2*n*(4<i?i-8+4:0),3*n,2*n),o.setRenderTarget(e),o.render(l,Hs)}}]),t}();function to(t){var e=new Zi(3*Us,3*Us,t);return e.texture.mapping=re,e.texture.name=\"PMREM.cubeUv\",e.scissorTest=!0,e}function eo(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function no(){var t=new Bi(1,1);return new js({name:\"EquirectangularToCubeUV\",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:Gs[Hn]}},vertexShader:ro(),fragmentShader:\"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform sampler2D envMap;\\n\\t\\t\\tuniform vec2 texelSize;\\n\\n\\t\\t\\t\".concat(ao(),\"\\n\\n\\t\\t\\t#include <common>\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\n\\t\\t\\t\\tvec3 outputDirection = normalize( vOutputDirection );\\n\\t\\t\\t\\tvec2 uv = equirectUv( outputDirection );\\n\\n\\t\\t\\t\\tvec2 f = fract( uv / texelSize - 0.5 );\\n\\t\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\t\\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\t\\t\\t\\tuv.x += texelSize.x;\\n\\t\\t\\t\\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\t\\t\\t\\tuv.y += texelSize.y;\\n\\t\\t\\t\\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\t\\t\\t\\tuv.x -= texelSize.x;\\n\\t\\t\\t\\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\\n\\n\\t\\t\\t\\tvec3 tm = mix( tl, tr, f.x );\\n\\t\\t\\t\\tvec3 bm = mix( bl, br, f.x );\\n\\t\\t\\t\\tgl_FragColor.rgb = mix( tm, bm, f.y );\\n\\n\\t\\t\\t}\\n\\t\\t\"),blending:pt,depthTest:!1,depthWrite:!1})}function io(){return new js({name:\"CubemapToCubeUV\",uniforms:{envMap:{value:null},inputEncoding:{value:Gs[Hn]}},vertexShader:ro(),fragmentShader:\"\\n\\n\\t\\t\\tprecision mediump float;\\n\\t\\t\\tprecision mediump int;\\n\\n\\t\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t\\tuniform samplerCube envMap;\\n\\n\\t\\t\\t\".concat(ao(),\"\\n\\n\\t\\t\\tvoid main() {\\n\\n\\t\\t\\t\\tgl_FragColor = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) );\\n\\n\\t\\t\\t}\\n\\t\\t\"),blending:pt,depthTest:!1,depthWrite:!1})}function ro(){return\"\\n\\n\\t\\tprecision mediump float;\\n\\t\\tprecision mediump int;\\n\\n\\t\\tattribute vec3 position;\\n\\t\\tattribute vec2 uv;\\n\\t\\tattribute float faceIndex;\\n\\n\\t\\tvarying vec3 vOutputDirection;\\n\\n\\t\\t// RH coordinate system; PMREM face-indexing convention\\n\\t\\tvec3 getDirection( vec2 uv, float face ) {\\n\\n\\t\\t\\tuv = 2.0 * uv - 1.0;\\n\\n\\t\\t\\tvec3 direction = vec3( uv, 1.0 );\\n\\n\\t\\t\\tif ( face == 0.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx; // ( 1, v, u ) pos x\\n\\n\\t\\t\\t} else if ( face == 1.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\\n\\n\\t\\t\\t} else if ( face == 2.0 ) {\\n\\n\\t\\t\\t\\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\\n\\n\\t\\t\\t} else if ( face == 3.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.zyx;\\n\\t\\t\\t\\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\\n\\n\\t\\t\\t} else if ( face == 4.0 ) {\\n\\n\\t\\t\\t\\tdirection = direction.xzy;\\n\\t\\t\\t\\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\\n\\n\\t\\t\\t} else if ( face == 5.0 ) {\\n\\n\\t\\t\\t\\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn direction;\\n\\n\\t\\t}\\n\\n\\t\\tvoid main() {\\n\\n\\t\\t\\tvOutputDirection = getDirection( uv, faceIndex );\\n\\t\\t\\tgl_Position = vec4( position, 1.0 );\\n\\n\\t\\t}\\n\\t\"}function ao(){return\"\\n\\n\\t\\tuniform int inputEncoding;\\n\\n\\t\\t#include <encodings_pars_fragment>\\n\\n\\t\\tvec4 inputTexelToLinear( vec4 value ) {\\n\\n\\t\\t\\tif ( inputEncoding == 0 ) {\\n\\n\\t\\t\\t\\treturn value;\\n\\n\\t\\t\\t} else {\\n\\n\\t\\t\\t\\treturn sRGBToLinear( value );\\n\\n\\t\\t\\t}\\n\\n\\t\\t}\\n\\n\\t\\tvec4 envMapTexelToLinear( vec4 color ) {\\n\\n\\t\\t\\treturn inputTexelToLinear( color );\\n\\n\\t\\t}\\n\\t\"}function so(t){var e=new WeakMap,n=null;function i(t){var n=t.target;n.removeEventListener(\"dispose\",i);var r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){var a=r.mapping,s=a===ne||a===ie,o=a===te||a===ee;if(s||o)return e.has(r)?e.get(r).texture:(a=r.image,s&&a&&0<a.height||o&&a&&function(t){for(var e=0,n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}(a)?(a=t.getRenderTarget(),null===n&&(n=new $s(t)),s=s?n.fromEquirectangular(r):n.fromCubemap(r),e.set(r,s),t.setRenderTarget(a),r.addEventListener(\"dispose\",i),s.texture):null)}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function oo(t){var e={};function n(n){if(void 0!==e[n])return e[n];var i;switch(n){case\"WEBGL_depth_texture\":i=t.getExtension(\"WEBGL_depth_texture\")||t.getExtension(\"MOZ_WEBGL_depth_texture\")||t.getExtension(\"WEBKIT_WEBGL_depth_texture\");break;case\"EXT_texture_filter_anisotropic\":i=t.getExtension(\"EXT_texture_filter_anisotropic\")||t.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||t.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case\"WEBGL_compressed_texture_s3tc\":i=t.getExtension(\"WEBGL_compressed_texture_s3tc\")||t.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||t.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case\"WEBGL_compressed_texture_pvrtc\":i=t.getExtension(\"WEBGL_compressed_texture_pvrtc\")||t.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n(\"EXT_color_buffer_float\"):(n(\"WEBGL_depth_texture\"),n(\"OES_texture_float\"),n(\"OES_texture_half_float\"),n(\"OES_texture_half_float_linear\"),n(\"OES_standard_derivatives\"),n(\"OES_element_index_uint\"),n(\"OES_vertex_array_object\"),n(\"ANGLE_instanced_arrays\")),n(\"OES_texture_float_linear\"),n(\"EXT_color_buffer_half_float\"),n(\"WEBGL_multisampled_render_to_texture\")},get:function(t){return n(t)}}}function uo(t,e,n,i){var r={},a=new WeakMap;function s(t){var o=t.target;for(var u in null!==o.index&&e.remove(o.index),o.attributes)e.remove(o.attributes[u]);o.removeEventListener(\"dispose\",s),delete r[o.id],(t=a.get(o))&&(e.remove(t),a.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener(\"dispose\",s),r[e.id]=!0,n.memory.geometries++),e},update:function(t){var n=t.attributes;for(var i in n)e.update(n[i],34962);var r=t.morphAttributes;for(var a in r)for(var s=r[a],o=0,u=s.length;o<u;o++)e.update(s[o],34962)},getWireframeAttribute:function(t){var n,i=a.get(t);return(!i||null!==(n=t.index)&&i.version<n.version)&&function(t){var n=[],i=t.index,r=t.attributes.position,s=0;if(null!==i){var o=i.array;s=i.version;for(var u=0,l=o.length;u<l;u+=3){var c=o[u+0],h=o[u+1],f=o[u+2];n.push(c,h,h,f,f,c)}}else{var d=r.array;s=r.version;for(var p=0,g=d.length/3-1;p<g;p+=3){var v=p+0,m=p+1,y=p+2;n.push(v,m,m,y,y,v)}}var _=new(65535<ji(n)?La:Pa)(n,1);_.version=s,(d=a.get(t))&&e.remove(d),a.set(t,_)}(t),a.get(t)}}}function lo(t,e,n,i){var r,a,s,o=i.isWebGL2;this.setMode=function(t){r=t},this.setIndex=function(t){a=t.type,s=t.bytesPerElement},this.render=function(e,i){t.drawElements(r,i,a,e*s),n.update(i,r,1)},this.renderInstances=function(i,u,l){if(0!==l){var c,h;if(o)c=t,h=\"drawElementsInstanced\";else if(c=e.get(\"ANGLE_instanced_arrays\"),h=\"drawElementsInstancedANGLE\",null===c)return;c[h](r,u,a,i*s,l),n.update(u,r,l)}}}function co(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t}}}}var ho=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return y(this,n),t=e.call(this,null),t.image={data:i,width:r,height:a,depth:s},t.magFilter=le,t.minFilter=le,t.wrapR=oe,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return _(n)}(Yi);function fo(t,e){return t[0]-e[0]}function po(t,e){return Math.abs(e[1])-Math.abs(t[1])}function go(t,e){var n=1;(e=(e.isInterleavedBufferAttribute?e.data:e).array)instanceof Int8Array?n=127:e instanceof Int16Array?n=32767:e instanceof Int32Array&&(n=2147483647),t.divideScalar(n)}function vo(t,e,n){for(var i={},r=new Float32Array(8),a=new WeakMap,s=new tr,o=[],u=0;u<8;u++)o[u]=[u,0];return{update:function(u,l,c,h){var f=u.morphTargetInfluences;if(!0===e.isWebGL2){var d=l.morphAttributes.position.length,p=a.get(l);if(void 0===p||p.count!==d){void 0!==p&&p.texture.dispose();var g=void 0!==l.morphAttributes.normal,v=l.morphAttributes.position,m=l.morphAttributes.normal||[],y=1==g?2:1,_=l.attributes.position.count*y,x=1;_>e.maxTextureSize&&(x=Math.ceil(_/e.maxTextureSize),_=e.maxTextureSize);var b=new Float32Array(_*x*4*d),w=new ho(b,_,x,d);w.format=Le,w.type=Me,w.needsUpdate=!0;for(var S=4*y,C=0;C<d;C++)for(var M=v[C],T=m[C],k=_*x*4*C,A=0;A<M.count;A++){s.fromBufferAttribute(M,A),!0===M.normalized&&go(s,M);var E=A*S;b[k+E]=s.x,b[k+E+1]=s.y,b[k+E+2]=s.z,!(b[k+E+3]=0)==g&&(s.fromBufferAttribute(T,A),!0===T.normalized&&go(s,T),b[k+E+4]=s.x,b[k+E+5]=s.y,b[k+E+6]=s.z,b[k+E+7]=0)}p={count:d,texture:w,size:new Bi(_,x)},a.set(l,p)}for(var O=0,P=0;P<f.length;P++)O+=f[P];y=l.morphTargetsRelative?1:1-O,h.getUniforms().setValue(t,\"morphTargetBaseInfluence\",y),h.getUniforms().setValue(t,\"morphTargetInfluences\",f),h.getUniforms().setValue(t,\"morphTargetsTexture\",p.texture,n),h.getUniforms().setValue(t,\"morphTargetsTextureSize\",p.size)}else{var I=void 0===f?0:f.length,L=i[l.id];if(void 0===L||L.length!==I){L=[];for(var D=0;D<I;D++)L[D]=[D,0];i[l.id]=L}for(var R=0;R<I;R++){var N=L[R];N[0]=R,N[1]=f[R]}L.sort(po);for(var F=0;F<8;F++)F<I&&L[F][1]?(o[F][0]=L[F][0],o[F][1]=L[F][1]):(o[F][0]=Number.MAX_SAFE_INTEGER,o[F][1]=0);o.sort(fo);for(var B=l.morphAttributes.position,z=l.morphAttributes.normal,j=0,U=0;U<8;U++){var V=o[U],W=V[0];V=V[1],W!==Number.MAX_SAFE_INTEGER&&V?(B&&l.getAttribute(\"morphTarget\"+U)!==B[W]&&l.setAttribute(\"morphTarget\"+U,B[W]),z&&l.getAttribute(\"morphNormal\"+U)!==z[W]&&l.setAttribute(\"morphNormal\"+U,z[W]),r[U]=V,j+=V):(B&&!0===l.hasAttribute(\"morphTarget\"+U)&&l.deleteAttribute(\"morphTarget\"+U),z&&!0===l.hasAttribute(\"morphNormal\"+U)&&l.deleteAttribute(\"morphNormal\"+U),r[U]=0)}y=l.morphTargetsRelative?1:1-j,h.getUniforms().setValue(t,\"morphTargetBaseInfluence\",y),h.getUniforms().setValue(t,\"morphTargetInfluences\",r)}}}}function mo(t,e,n,i){var r=new WeakMap;function a(t){var e=t.target;e.removeEventListener(\"dispose\",a),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){var s=i.render.frame,o=t.geometry;return o=e.get(t,o),r.get(o)!==s&&(e.update(o),r.set(o,s)),t.isInstancedMesh&&(!1===t.hasEventListener(\"dispose\",a)&&t.addEventListener(\"dispose\",a),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),o},dispose:function(){r=new WeakMap}}}ho.prototype.isDataTexture2DArray=!0;var yo=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return y(this,n),t=e.call(this,null),t.image={data:i,width:r,height:a,depth:s},t.magFilter=le,t.minFilter=le,t.wrapR=oe,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return _(n)}(Yi);yo.prototype.isDataTexture3D=!0;var _o=new Yi,xo=new ho,bo=new yo,wo=new ys,So=[],Co=[],Mo=new Float32Array(16),To=new Float32Array(9),ko=new Float32Array(4);function Ao(t,e,n){var i=t[0];if(i<=0||0<i)return t;var r=e*n,a=So[r];if(void 0===a&&(a=new Float32Array(r),So[r]=a),0!==e){i.toArray(a,0);for(var s=1,o=0;s!==e;++s)o+=n,t[s].toArray(a,o)}return a}function Eo(t,e){if(t.length===e.length){for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return;return 1}}function Oo(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function Po(t,e){var n=Co[e];void 0===n&&(n=new Int32Array(e),Co[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Io(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Lo(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y):Eo(n,e)||(t.uniform2fv(this.addr,e),Oo(n,e))}function Do(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z):void 0!==e.r?n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b):Eo(n,e)||(t.uniform3fv(this.addr,e),Oo(n,e))}function Ro(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w):Eo(n,e)||(t.uniform4fv(this.addr,e),Oo(n,e))}function No(t,e){var n=this.cache,i=e.elements;void 0===i?Eo(n,e)||(t.uniformMatrix2fv(this.addr,!1,e),Oo(n,e)):Eo(n,i)||(ko.set(i),t.uniformMatrix2fv(this.addr,!1,ko),Oo(n,i))}function Fo(t,e){var n=this.cache,i=e.elements;void 0===i?Eo(n,e)||(t.uniformMatrix3fv(this.addr,!1,e),Oo(n,e)):Eo(n,i)||(To.set(i),t.uniformMatrix3fv(this.addr,!1,To),Oo(n,i))}function Bo(t,e){var n=this.cache,i=e.elements;void 0===i?Eo(n,e)||(t.uniformMatrix4fv(this.addr,!1,e),Oo(n,e)):Eo(n,i)||(Mo.set(i),t.uniformMatrix4fv(this.addr,!1,Mo),Oo(n,i))}function zo(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function jo(t,e){var n=this.cache;Eo(n,e)||(t.uniform2iv(this.addr,e),Oo(n,e))}function Uo(t,e){var n=this.cache;Eo(n,e)||(t.uniform3iv(this.addr,e),Oo(n,e))}function Vo(t,e){var n=this.cache;Eo(n,e)||(t.uniform4iv(this.addr,e),Oo(n,e))}function Wo(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Go(t,e){var n=this.cache;Eo(n,e)||(t.uniform2uiv(this.addr,e),Oo(n,e))}function Ho(t,e){var n=this.cache;Eo(n,e)||(t.uniform3uiv(this.addr,e),Oo(n,e))}function Xo(t,e){var n=this.cache;Eo(n,e)||(t.uniform4uiv(this.addr,e),Oo(n,e))}function Yo(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||_o,r)}function qo(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||bo,r)}function Jo(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||wo,r)}function Zo(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||xo,r)}function Ko(t,e){t.uniform1fv(this.addr,e)}function Qo(t,e){e=Ao(e,this.size,2),t.uniform2fv(this.addr,e)}function $o(t,e){e=Ao(e,this.size,3),t.uniform3fv(this.addr,e)}function tu(t,e){e=Ao(e,this.size,4),t.uniform4fv(this.addr,e)}function eu(t,e){e=Ao(e,this.size,4),t.uniformMatrix2fv(this.addr,!1,e)}function nu(t,e){e=Ao(e,this.size,9),t.uniformMatrix3fv(this.addr,!1,e)}function iu(t,e){e=Ao(e,this.size,16),t.uniformMatrix4fv(this.addr,!1,e)}function ru(t,e){t.uniform1iv(this.addr,e)}function au(t,e){t.uniform2iv(this.addr,e)}function su(t,e){t.uniform3iv(this.addr,e)}function ou(t,e){t.uniform4iv(this.addr,e)}function uu(t,e){t.uniform1uiv(this.addr,e)}function lu(t,e){t.uniform2uiv(this.addr,e)}function cu(t,e){t.uniform3uiv(this.addr,e)}function hu(t,e){t.uniform4uiv(this.addr,e)}function fu(t,e,n){var i=e.length,r=Po(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTexture2D(e[a]||_o,r[a])}function du(t,e,n){var i=e.length,r=Po(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture3D(e[a]||bo,r[a])}function pu(t,e,n){var i=e.length,r=Po(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTextureCube(e[a]||wo,r[a])}function gu(t,e,n){var i=e.length,r=Po(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture2DArray(e[a]||xo,r[a])}function vu(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Io;case 35664:return Lo;case 35665:return Do;case 35666:return Ro;case 35674:return No;case 35675:return Fo;case 35676:return Bo;case 5124:case 35670:return zo;case 35667:case 35671:return jo;case 35668:case 35672:return Uo;case 35669:case 35673:return Vo;case 5125:return Wo;case 36294:return Go;case 36295:return Ho;case 36296:return Xo;case 35678:case 36198:case 36298:case 36306:case 35682:return Yo;case 35679:case 36299:case 36307:return qo;case 35680:case 36300:case 36308:case 36293:return Jo;case 36289:case 36303:case 36311:case 36292:return Zo}}(e.type)}function mu(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ko;case 35664:return Qo;case 35665:return $o;case 35666:return tu;case 35674:return eu;case 35675:return nu;case 35676:return iu;case 5124:case 35670:return ru;case 35667:case 35671:return au;case 35668:case 35672:return su;case 35669:case 35673:return ou;case 5125:return uu;case 36294:return lu;case 36295:return cu;case 36296:return hu;case 35678:case 36198:case 36298:case 36306:case 35682:return fu;case 35679:case 36299:case 36307:return du;case 35680:case 36300:case 36308:case 36293:return pu;case 36289:case 36303:case 36311:case 36292:return gu}}(e.type)}function yu(t){this.id=t,this.seq=[],this.map={}}mu.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Oo(e,t)},yu.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var s=i[r];s.setValue(t,e[s.id],n)}};var _u=/(\\w+)(\\])?(\\[|\\.)?/g;function xu(t,e){t.seq.push(e),t.map[e.id]=e}function bu(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i);!function(t,e,n){var i=t.name,r=i.length;for(_u.lastIndex=0;;){var a=_u.exec(i),s=_u.lastIndex,o=a[1],u=\"]\"===a[2];if(a=a[3],u&&(o|=0),void 0===a||\"[\"===a&&s+2===r){xu(n,new(void 0===a?vu:mu)(o,t,e));break}var l=n.map[o];void 0===l&&(l=new yu(o),xu(n,l)),n=l}}(r,t.getUniformLocation(e,r.name),this)}}function wu(t,e,n){return e=t.createShader(e),t.shaderSource(e,n),t.compileShader(e),e}bu.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},bu.prototype.setOptional=function(t,e,n){void 0!==(e=e[n])&&this.setValue(t,n,e)},bu.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var s=e[r],o=n[s.id];!1!==o.needsUpdate&&s.setValue(t,o.value,i)}},bu.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var Su=0;function Cu(t){switch(t){case Hn:return[\"Linear\",\"( value )\"];case Xn:return[\"sRGB\",\"( value )\"];default:return[\"Linear\",\"( value )\"]}}function Mu(t,e,n){var i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&\"\"===r?\"\":n.toUpperCase()+\"\\n\\n\"+r+\"\\n\\n\"+function(t){for(var e=t.split(\"\\n\"),n=0;n<e.length;n++)e[n]=n+1+\": \"+e[n];return e.join(\"\\n\")}(t.getShaderSource(e))}function Tu(t,e){return\"vec4 \"+t+\"( vec4 value ) { return \"+(e=Cu(e))[0]+\"ToLinear\"+e[1]+\"; }\"}function ku(t){return\"\"!==t}function Au(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Eu(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Ou=/^[ \\t]*#include +<([\\w\\d./]+)>/gm;function Pu(t){return t.replace(Ou,Iu)}function Iu(t,e){var n=Os[e];if(void 0===n)throw new Error(\"Can not resolve #include <\"+e+\">\");return Pu(n)}var Lu=/#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,Du=/#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;function Ru(t){return t.replace(Du,Fu).replace(Lu,Nu)}function Nu(t,e,n,i){return Fu(0,e,n,i)}function Fu(t,e,n,i){for(var r=\"\",a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\\[\\s*i\\s*\\]/g,\"[ \"+a+\" ]\").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Bu(t){var e=\"precision \"+t.precision+\" float;\\nprecision \"+t.precision+\" int;\";return\"highp\"===t.precision?e+=\"\\n#define HIGH_PRECISION\":\"mediump\"===t.precision?e+=\"\\n#define MEDIUM_PRECISION\":\"lowp\"===t.precision&&(e+=\"\\n#define LOW_PRECISION\"),e}function zu(t,e,n,i){var r,a,s=t.getContext(),o=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(t){var e=\"SHADOWMAP_TYPE_BASIC\";return t.shadowMapType===st?e=\"SHADOWMAP_TYPE_PCF\":t.shadowMapType===ot?e=\"SHADOWMAP_TYPE_PCF_SOFT\":t.shadowMapType===ut&&(e=\"SHADOWMAP_TYPE_VSM\"),e}(n),h=function(t){var e=\"ENVMAP_TYPE_CUBE\";if(t.envMap)switch(t.envMapMode){case te:case ee:e=\"ENVMAP_TYPE_CUBE\";break;case re:case ae:e=\"ENVMAP_TYPE_CUBE_UV\"}return e}(n),f=function(t){var e=\"ENVMAP_MODE_REFLECTION\";if(t.envMap)switch(t.envMapMode){case ee:case ae:e=\"ENVMAP_MODE_REFRACTION\"}return e}(n),d=function(t){var e=\"ENVMAP_BLENDING_NONE\";if(t.envMap)switch(t.combine){case Gt:e=\"ENVMAP_BLENDING_MULTIPLY\";break;case Ht:e=\"ENVMAP_BLENDING_MIX\";break;case Xt:e=\"ENVMAP_BLENDING_ADD\"}return e}(n),p=n.isWebGL2?\"\":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||\"physical\"===t.shaderID?\"#extension GL_OES_standard_derivatives : enable\":\"\",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?\"#extension GL_EXT_frag_depth : enable\":\"\",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?\"#extension GL_EXT_draw_buffers : require\":\"\",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(ku).join(\"\\n\")}(n),g=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push(\"#define \"+n+\" \"+i)}return e.join(\"\\n\")}(o),v=s.createProgram(),m=n.glslVersion?\"#version \"+n.glslVersion+\"\\n\":\"\";n.isRawShaderMaterial?(r=[g].filter(ku).join(\"\\n\"),0<r.length&&(r+=\"\\n\"),a=[p,g].filter(ku).join(\"\\n\"),0<a.length&&(a+=\"\\n\")):(r=[Bu(n),\"#define SHADER_NAME \"+n.shaderName,g,n.instancing?\"#define USE_INSTANCING\":\"\",n.instancingColor?\"#define USE_INSTANCING_COLOR\":\"\",n.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define MAX_BONES \"+n.maxBones,n.useFog&&n.fog?\"#define USE_FOG\":\"\",n.useFog&&n.fogExp2?\"#define FOG_EXP2\":\"\",n.map?\"#define USE_MAP\":\"\",n.envMap?\"#define USE_ENVMAP\":\"\",n.envMap?\"#define \"+f:\"\",n.lightMap?\"#define USE_LIGHTMAP\":\"\",n.aoMap?\"#define USE_AOMAP\":\"\",n.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",n.bumpMap?\"#define USE_BUMPMAP\":\"\",n.normalMap?\"#define USE_NORMALMAP\":\"\",n.normalMap&&n.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",n.normalMap&&n.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",n.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",n.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",n.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",n.displacementMap&&n.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",n.specularMap?\"#define USE_SPECULARMAP\":\"\",n.specularIntensityMap?\"#define USE_SPECULARINTENSITYMAP\":\"\",n.specularColorMap?\"#define USE_SPECULARCOLORMAP\":\"\",n.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",n.metalnessMap?\"#define USE_METALNESSMAP\":\"\",n.alphaMap?\"#define USE_ALPHAMAP\":\"\",n.transmission?\"#define USE_TRANSMISSION\":\"\",n.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",n.thicknessMap?\"#define USE_THICKNESSMAP\":\"\",n.sheenColorMap?\"#define USE_SHEENCOLORMAP\":\"\",n.sheenRoughnessMap?\"#define USE_SHEENROUGHNESSMAP\":\"\",n.vertexTangents?\"#define USE_TANGENT\":\"\",n.vertexColors?\"#define USE_COLOR\":\"\",n.vertexAlphas?\"#define USE_COLOR_ALPHA\":\"\",n.vertexUvs?\"#define USE_UV\":\"\",n.uvsVertexOnly?\"#define UVS_VERTEX_ONLY\":\"\",n.flatShading?\"#define FLAT_SHADED\":\"\",n.skinning?\"#define USE_SKINNING\":\"\",n.useVertexTexture?\"#define BONE_TEXTURE\":\"\",n.morphTargets?\"#define USE_MORPHTARGETS\":\"\",n.morphNormals&&!1===n.flatShading?\"#define USE_MORPHNORMALS\":\"\",n.morphTargets&&n.isWebGL2?\"#define MORPHTARGETS_TEXTURE\":\"\",n.morphTargets&&n.isWebGL2?\"#define MORPHTARGETS_COUNT \"+n.morphTargetsCount:\"\",n.doubleSided?\"#define DOUBLE_SIDED\":\"\",n.flipSided?\"#define FLIP_SIDED\":\"\",n.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",n.shadowMapEnabled?\"#define \"+c:\"\",n.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",n.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",\"#ifdef USE_INSTANCING\",\"\\tattribute mat4 instanceMatrix;\",\"#endif\",\"#ifdef USE_INSTANCING_COLOR\",\"\\tattribute vec3 instanceColor;\",\"#endif\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_TANGENT\",\"\\tattribute vec4 tangent;\",\"#endif\",\"#if defined( USE_COLOR_ALPHA )\",\"\\tattribute vec4 color;\",\"#elif defined( USE_COLOR )\",\"\\tattribute vec3 color;\",\"#endif\",\"#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )\",\"\\tattribute vec3 morphTarget0;\",\"\\tattribute vec3 morphTarget1;\",\"\\tattribute vec3 morphTarget2;\",\"\\tattribute vec3 morphTarget3;\",\"\\t#ifdef USE_MORPHNORMALS\",\"\\t\\tattribute vec3 morphNormal0;\",\"\\t\\tattribute vec3 morphNormal1;\",\"\\t\\tattribute vec3 morphNormal2;\",\"\\t\\tattribute vec3 morphNormal3;\",\"\\t#else\",\"\\t\\tattribute vec3 morphTarget4;\",\"\\t\\tattribute vec3 morphTarget5;\",\"\\t\\tattribute vec3 morphTarget6;\",\"\\t\\tattribute vec3 morphTarget7;\",\"\\t#endif\",\"#endif\",\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(ku).join(\"\\n\"),a=[p,Bu(n),\"#define SHADER_NAME \"+n.shaderName,g,n.useFog&&n.fog?\"#define USE_FOG\":\"\",n.useFog&&n.fogExp2?\"#define FOG_EXP2\":\"\",n.map?\"#define USE_MAP\":\"\",n.matcap?\"#define USE_MATCAP\":\"\",n.envMap?\"#define USE_ENVMAP\":\"\",n.envMap?\"#define \"+h:\"\",n.envMap?\"#define \"+f:\"\",n.envMap?\"#define \"+d:\"\",n.lightMap?\"#define USE_LIGHTMAP\":\"\",n.aoMap?\"#define USE_AOMAP\":\"\",n.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",n.bumpMap?\"#define USE_BUMPMAP\":\"\",n.normalMap?\"#define USE_NORMALMAP\":\"\",n.normalMap&&n.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",n.normalMap&&n.tangentSpaceNormalMap?\"#define TANGENTSPACE_NORMALMAP\":\"\",n.clearcoat?\"#define USE_CLEARCOAT\":\"\",n.clearcoatMap?\"#define USE_CLEARCOATMAP\":\"\",n.clearcoatRoughnessMap?\"#define USE_CLEARCOAT_ROUGHNESSMAP\":\"\",n.clearcoatNormalMap?\"#define USE_CLEARCOAT_NORMALMAP\":\"\",n.specularMap?\"#define USE_SPECULARMAP\":\"\",n.specularIntensityMap?\"#define USE_SPECULARINTENSITYMAP\":\"\",n.specularColorMap?\"#define USE_SPECULARCOLORMAP\":\"\",n.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",n.metalnessMap?\"#define USE_METALNESSMAP\":\"\",n.alphaMap?\"#define USE_ALPHAMAP\":\"\",n.alphaTest?\"#define USE_ALPHATEST\":\"\",n.sheen?\"#define USE_SHEEN\":\"\",n.sheenColorMap?\"#define USE_SHEENCOLORMAP\":\"\",n.sheenRoughnessMap?\"#define USE_SHEENROUGHNESSMAP\":\"\",n.transmission?\"#define USE_TRANSMISSION\":\"\",n.transmissionMap?\"#define USE_TRANSMISSIONMAP\":\"\",n.thicknessMap?\"#define USE_THICKNESSMAP\":\"\",n.vertexTangents?\"#define USE_TANGENT\":\"\",n.vertexColors||n.instancingColor?\"#define USE_COLOR\":\"\",n.vertexAlphas?\"#define USE_COLOR_ALPHA\":\"\",n.vertexUvs?\"#define USE_UV\":\"\",n.uvsVertexOnly?\"#define UVS_VERTEX_ONLY\":\"\",n.gradientMap?\"#define USE_GRADIENTMAP\":\"\",n.flatShading?\"#define FLAT_SHADED\":\"\",n.doubleSided?\"#define DOUBLE_SIDED\":\"\",n.flipSided?\"#define FLIP_SIDED\":\"\",n.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",n.shadowMapEnabled?\"#define \"+c:\"\",n.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",n.physicallyCorrectLights?\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",n.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?\"#define USE_LOGDEPTHBUF_EXT\":\"\",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",\"uniform bool isOrthographic;\",n.toneMapping!==Yt?\"#define TONE_MAPPING\":\"\",n.toneMapping!==Yt?Os.tonemapping_pars_fragment:\"\",n.toneMapping!==Yt?function(t,e){var n;switch(e){case qt:n=\"Linear\";break;case Jt:n=\"Reinhard\";break;case Zt:n=\"OptimizedCineon\";break;case Kt:n=\"ACESFilmic\";break;case Qt:n=\"Custom\";break;default:n=\"Linear\"}return\"vec3 toneMapping( vec3 color ) { return \"+n+\"ToneMapping( color ); }\"}(0,n.toneMapping):\"\",n.dithering?\"#define DITHERING\":\"\",n.format===Ie?\"#define OPAQUE\":\"\",Os.encodings_pars_fragment,n.map?Tu(\"mapTexelToLinear\",n.mapEncoding):\"\",n.matcap?Tu(\"matcapTexelToLinear\",n.matcapEncoding):\"\",n.envMap?Tu(\"envMapTexelToLinear\",n.envMapEncoding):\"\",n.emissiveMap?Tu(\"emissiveMapTexelToLinear\",n.emissiveMapEncoding):\"\",n.specularColorMap?Tu(\"specularColorMapTexelToLinear\",n.specularColorMapEncoding):\"\",n.sheenColorMap?Tu(\"sheenColorMapTexelToLinear\",n.sheenColorMapEncoding):\"\",n.lightMap?Tu(\"lightMapTexelToLinear\",n.lightMapEncoding):\"\",(x=\"linearToOutputTexel\",b=Cu(b=n.outputEncoding),\"vec4 \"+x+\"( vec4 value ) { return LinearTo\"+b[0]+b[1]+\"; }\"),n.depthPacking?\"#define DEPTH_PACKING \"+n.depthPacking:\"\",\"\\n\"].filter(ku).join(\"\\n\")),u=Eu(Au(Pu(u),n),n),l=Eu(Au(Pu(l),n),n),u=Ru(u),l=Ru(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(m=\"#version 300 es\\n\",r=[\"precision mediump sampler2DArray;\",\"#define attribute in\",\"#define varying out\",\"#define texture2D texture\"].join(\"\\n\")+\"\\n\"+r,a=[\"#define varying in\",n.glslVersion===Si?\"\":\"layout(location = 0) out highp vec4 pc_fragColor;\",n.glslVersion===Si?\"\":\"#define gl_FragColor pc_fragColor\",\"#define gl_FragDepthEXT gl_FragDepth\",\"#define texture2D texture\",\"#define textureCube texture\",\"#define texture2DProj textureProj\",\"#define texture2DLodEXT textureLod\",\"#define texture2DProjLodEXT textureProjLod\",\"#define textureCubeLodEXT textureLod\",\"#define texture2DGradEXT textureGrad\",\"#define texture2DProjGradEXT textureProjGrad\",\"#define textureCubeGradEXT textureGrad\"].join(\"\\n\")+\"\\n\"+a);var y,_,x=m+r+u,b=m+a+l;if(u=wu(s,35633,x),l=wu(s,35632,b),s.attachShader(v,u),s.attachShader(v,l),void 0!==n.index0AttributeName?s.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&s.bindAttribLocation(v,0,\"position\"),s.linkProgram(v),t.debug.checkShaderErrors){x=s.getProgramInfoLog(v).trim(),b=s.getShaderInfoLog(u).trim(),t=s.getShaderInfoLog(l).trim();var w=!0,S=!0;!1===s.getProgramParameter(v,35714)?(w=!1,Mu(s,u,\"vertex\"),Mu(s,l,\"fragment\")):\"\"!==x||\"\"!==b&&\"\"!==t||(S=!1),S&&(this.diagnostics={runnable:w,programLog:x,vertexShader:{log:b,prefix:r},fragmentShader:{log:t,prefix:a}})}return s.deleteShader(u),s.deleteShader(l),this.getUniforms=function(){return void 0===y&&(y=new bu(s,v)),y},this.getAttributes=function(){return void 0===_&&(_=function(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var a=t.getActiveAttrib(e,r),s=a.name,o=1;35674===a.type&&(o=2),35675===a.type&&(o=3),35676===a.type&&(o=4),n[s]={type:a.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}(s,v)),_},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Su++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=u,this.fragmentShader=l,this}var ju=0,Uu=function(){function t(){y(this,t),this.shaderCache=new Map,this.materialCache=new Map}return _(t,[{key:\"update\",value:function(t){var e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}},{key:\"remove\",value:function(t){var e,n=u(this.materialCache.get(t));try{for(n.s();!(e=n.n()).done;){var i=e.value;i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i)}}catch(r){n.e(r)}finally{n.f()}return this.materialCache.delete(t),this}},{key:\"getVertexShaderID\",value:function(t){return this._getShaderStage(t.vertexShader).id}},{key:\"getFragmentShaderID\",value:function(t){return this._getShaderStage(t.fragmentShader).id}},{key:\"dispose\",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:\"_getShaderCacheForMaterial\",value:function(t){var e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}},{key:\"_getShaderStage\",value:function(t){var e,n=this.shaderCache;return!1===n.has(t)&&(e=new Vu,n.set(t,e)),n.get(t)}}]),t}(),Vu=_((function t(){y(this,t),this.id=ju++,this.usedTimes=0}));function Wu(t,e,n,i,r,a,s){var o=new Vr,u=new Uu,l=[],c=r.isWebGL2,h=r.logarithmicDepthBuffer,f=r.floatVertexTextures,d=r.maxVertexUniforms,p=r.vertexTextures,g=r.precision,v={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"toon\",MeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",MeshMatcapMaterial:\"matcap\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\",SpriteMaterial:\"sprite\"};function m(t){var e;return e=t&&t.isTexture?t.encoding:t&&t.isWebGLRenderTarget?t.texture.encoding:Hn,c&&t&&t.isTexture&&t.format===Le&&t.type===_e&&t.encoding===Xn&&(e=Hn),e}return{getParameters:function(a,o,l,y,_){var x,b,w,S,C=y.fog,M=a.isMeshStandardMaterial?y.environment:null,T=(a.isMeshStandardMaterial?n:e).get(a.envMap||M);y=v[a.type],M=_.isSkinnedMesh?(k=(A=_).skeleton.bones,f?1024:(A=d,A=Math.floor((A-20)/4),(A=Math.min(A,k.length))<k.length?0:A)):0,null!==a.precision&&(g=r.getMaxPrecision(a.precision),a.precision),y?(x=(E=Is[y]).vertexShader,b=E.fragmentShader):(x=a.vertexShader,b=a.fragmentShader,u.update(a),w=u.getVertexShaderID(a),S=u.getFragmentShaderID(a));var k=t.getRenderTarget(),A=0<a.alphaTest,E=0<a.clearcoat;return{isWebGL2:c,shaderID:y,shaderName:a.type,vertexShader:x,fragmentShader:b,defines:a.defines,customVertexShaderID:w,customFragmentShaderID:S,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:g,instancing:!0===_.isInstancedMesh,instancingColor:!0===_.isInstancedMesh&&null!==_.instanceColor,supportsVertexTextures:p,outputEncoding:null!==k?m(k.texture):t.outputEncoding,map:!!a.map,mapEncoding:m(a.map),matcap:!!a.matcap,matcapEncoding:m(a.matcap),envMap:!!T,envMapMode:T&&T.mapping,envMapEncoding:m(T),envMapCubeUV:!!T&&(T.mapping===re||T.mapping===ae),lightMap:!!a.lightMap,lightMapEncoding:m(a.lightMap),aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:m(a.emissiveMap),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===Zn,tangentSpaceNormalMap:a.normalMapType===Jn,clearcoat:E,clearcoatMap:E&&!!a.clearcoatMap,clearcoatRoughnessMap:E&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:E&&!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,specularColorMapEncoding:m(a.specularColorMap),alphaMap:!!a.alphaMap,alphaTest:A,gradientMap:!!a.gradientMap,sheen:0<a.sheen,sheenColorMap:!!a.sheenColorMap,sheenColorMapEncoding:m(a.sheenColorMap),sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:0<a.transmission,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!_.geometry&&!!_.geometry.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!_.geometry&&!!_.geometry.attributes.color&&4===_.geometry.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||0<a.transmission||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||0<a.sheen||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!C,useFog:a.fog,fogExp2:C&&C.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===_.isSkinnedMesh&&0<M,maxBones:M,useVertexTexture:f,morphTargets:!!_.geometry&&!!_.geometry.morphAttributes.position,morphNormals:!!_.geometry&&!!_.geometry.morphAttributes.normal,morphTargetsCount:_.geometry&&_.geometry.morphAttributes.position?_.geometry.morphAttributes.position.length:0,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,format:a.format,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&0<l.length,shadowMapType:t.shadowMap.type,toneMapping:a.toneMapped?t.toneMapping:Yt,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===ht,flipSided:a.side===ct,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has(\"EXT_frag_depth\"),rendererExtensionDrawBuffers:c||i.has(\"WEBGL_draw_buffers\"),rendererExtensionShaderTextureLod:c||i.has(\"EXT_shader_texture_lod\"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(e){var n,i,r=[];if(e.shaderID?r.push(e.shaderID):(r.push(e.customVertexShaderID),r.push(e.customFragmentShaderID)),void 0!==e.defines)for(var a in e.defines)r.push(a),r.push(e.defines[a]);return!1===e.isRawShaderMaterial&&(i=e,(n=r).push(i.precision),n.push(i.outputEncoding),n.push(i.mapEncoding),n.push(i.matcapEncoding),n.push(i.envMapMode),n.push(i.envMapEncoding),n.push(i.lightMapEncoding),n.push(i.emissiveMapEncoding),n.push(i.combine),n.push(i.vertexUvs),n.push(i.fogExp2),n.push(i.sizeAttenuation),n.push(i.maxBones),n.push(i.morphTargetsCount),n.push(i.numDirLights),n.push(i.numPointLights),n.push(i.numSpotLights),n.push(i.numHemiLights),n.push(i.numRectAreaLights),n.push(i.numDirLightShadows),n.push(i.numPointLightShadows),n.push(i.numSpotLightShadows),n.push(i.shadowMapType),n.push(i.toneMapping),n.push(i.numClippingPlanes),n.push(i.numClipIntersection),n.push(i.format),n.push(i.specularColorMapEncoding),n.push(i.sheenColorMapEncoding),function(t,e){o.disableAll(),e.isWebGL2&&o.enable(0),e.supportsVertexTextures&&o.enable(1),e.instancing&&o.enable(2),e.instancingColor&&o.enable(3),e.map&&o.enable(4),e.matcap&&o.enable(5),e.envMap&&o.enable(6),e.envMapCubeUV&&o.enable(7),e.lightMap&&o.enable(8),e.aoMap&&o.enable(9),e.emissiveMap&&o.enable(10),e.bumpMap&&o.enable(11),e.normalMap&&o.enable(12),e.objectSpaceNormalMap&&o.enable(13),e.tangentSpaceNormalMap&&o.enable(14),e.clearcoat&&o.enable(15),e.clearcoatMap&&o.enable(16),e.clearcoatRoughnessMap&&o.enable(17),e.clearcoatNormalMap&&o.enable(18),e.displacementMap&&o.enable(19),e.specularMap&&o.enable(20),e.roughnessMap&&o.enable(21),e.metalnessMap&&o.enable(22),e.gradientMap&&o.enable(23),e.alphaMap&&o.enable(24),e.alphaTest&&o.enable(25),e.vertexColors&&o.enable(26),e.vertexAlphas&&o.enable(27),e.vertexUvs&&o.enable(28),e.vertexTangents&&o.enable(29),e.uvsVertexOnly&&o.enable(30),e.fog&&o.enable(31),t.push(o.mask),o.disableAll(),e.useFog&&o.enable(0),e.flatShading&&o.enable(1),e.logarithmicDepthBuffer&&o.enable(2),e.skinning&&o.enable(3),e.useVertexTexture&&o.enable(4),e.morphTargets&&o.enable(5),e.morphNormals&&o.enable(6),e.premultipliedAlpha&&o.enable(7),e.shadowMapEnabled&&o.enable(8),e.physicallyCorrectLights&&o.enable(9),e.doubleSided&&o.enable(10),e.flipSided&&o.enable(11),e.depthPacking&&o.enable(12),e.dithering&&o.enable(13),e.specularIntensityMap&&o.enable(14),e.specularColorMap&&o.enable(15),e.transmission&&o.enable(16),e.transmissionMap&&o.enable(17),e.thicknessMap&&o.enable(18),e.sheen&&o.enable(19),e.sheenColorMap&&o.enable(20),e.sheenRoughnessMap&&o.enable(21),t.push(o.mask)}(r,e),r.push(t.outputEncoding)),r.push(e.customProgramCacheKey),r.join()},getUniforms:function(t){var e,n=v[t.type];return e=n?(n=Is[n],ds.clone(n.uniforms)):t.uniforms,e},acquireProgram:function(e,n){for(var i,r=0,s=l.length;r<s;r++){var o=l[r];if(o.cacheKey===n){i=o,++i.usedTimes;break}}return void 0===i&&(i=new zu(t,n,e,a),l.push(i)),i},releaseProgram:function(t){var e;0==--t.usedTimes&&(e=l.indexOf(t),l[e]=l[l.length-1],l.pop(),t.destroy())},releaseShaderCache:function(t){u.remove(t)},programs:l,dispose:function(){u.dispose()}}}function Gu(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Hu(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Xu(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Yu(){var t=[],e=0,n=[],i=[],r=[];function a(n,i,r,a,s,o){var u=t[e];return void 0===u?(u={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},t[e]=u):(u.id=n.id,u.object=n,u.geometry=i,u.material=r,u.groupOrder=a,u.renderOrder=n.renderOrder,u.z=s,u.group=o),e++,u}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,s,o,u,l){l=a(t,e,s,o,u,l),(0<s.transmission?i:!0===s.transparent?r:n).push(l)},unshift:function(t,e,s,o,u,l){l=a(t,e,s,o,u,l),(0<s.transmission?i:!0===s.transparent?r:n).unshift(l)},finish:function(){for(var n=e,i=t.length;n<i;n++){var r=t[n];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.group=null}},sort:function(t,e){1<n.length&&n.sort(t||Hu),1<i.length&&i.sort(e||Xu),1<r.length&&r.sort(e||Xu)}}}function qu(){var t=new WeakMap;return{get:function(e,n){var i;return!1===t.has(e)?(i=new Yu,t.set(e,[i])):n>=t.get(e).length?(i=new Yu,t.get(e).push(i)):i=t.get(e)[n],i},dispose:function(){t=new WeakMap}}}function Ju(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case\"DirectionalLight\":n={direction:new tr,color:new wa};break;case\"SpotLight\":n={position:new tr,direction:new tr,color:new wa,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case\"PointLight\":n={position:new tr,color:new wa,distance:0,decay:0};break;case\"HemisphereLight\":n={direction:new tr,skyColor:new wa,groundColor:new wa};break;case\"RectAreaLight\":n={color:new wa,position:new tr,halfWidth:new tr,halfHeight:new tr}}return t[e.id]=n,n}}}var Zu=0;function Ku(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Qu(t,e){for(var n=new Ju,i=function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case\"DirectionalLight\":case\"SpotLight\":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bi};break;case\"PointLight\":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bi,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},a=0;a<9;a++)r.probe.push(new tr);var s=new tr,o=new Pr,u=new Pr;return{setup:function(a,s){for(var o=0,u=0,l=0,c=0;c<9;c++)r.probe[c].set(0,0,0);var h=0,f=0,d=0,p=0,g=0,v=0,m=0,y=0;a.sort(Ku);for(var _=!0!==s?Math.PI:1,x=0,b=a.length;x<b;x++){var w=a[x],S=w.color,C=w.intensity,M=w.distance,T=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)o+=S.r*C*_,u+=S.g*C*_,l+=S.b*C*_;else if(w.isLightProbe)for(var k=0;k<9;k++)r.probe[k].addScaledVector(w.sh.coefficients[k],C);else if(w.isDirectionalLight){var A=n.get(w);if(A.color.copy(w.color).multiplyScalar(w.intensity*_),w.castShadow){var E=w.shadow,O=i.get(w);O.shadowBias=E.bias,O.shadowNormalBias=E.normalBias,O.shadowRadius=E.radius,O.shadowMapSize=E.mapSize,r.directionalShadow[h]=O,r.directionalShadowMap[h]=T,r.directionalShadowMatrix[h]=w.shadow.matrix,v++}r.directional[h]=A,h++}else if(w.isSpotLight){var P=n.get(w);if(P.position.setFromMatrixPosition(w.matrixWorld),P.color.copy(S).multiplyScalar(C*_),P.distance=M,P.coneCos=Math.cos(w.angle),P.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),P.decay=w.decay,w.castShadow){M=w.shadow;var I=i.get(w);I.shadowBias=M.bias,I.shadowNormalBias=M.normalBias,I.shadowRadius=M.radius,I.shadowMapSize=M.mapSize,r.spotShadow[d]=I,r.spotShadowMap[d]=T,r.spotShadowMatrix[d]=w.shadow.matrix,y++}r.spot[d]=P,d++}else if(w.isRectAreaLight){var L=n.get(w);L.color.copy(S).multiplyScalar(C),L.halfWidth.set(.5*w.width,0,0),L.halfHeight.set(0,.5*w.height,0),r.rectArea[p]=L,p++}else if(w.isPointLight){var D=n.get(w);if(D.color.copy(w.color).multiplyScalar(w.intensity*_),D.distance=w.distance,D.decay=w.decay,w.castShadow){S=w.shadow;var R=i.get(w);R.shadowBias=S.bias,R.shadowNormalBias=S.normalBias,R.shadowRadius=S.radius,R.shadowMapSize=S.mapSize,R.shadowCameraNear=S.camera.near,R.shadowCameraFar=S.camera.far,r.pointShadow[f]=R,r.pointShadowMap[f]=T,r.pointShadowMatrix[f]=w.shadow.matrix,m++}r.point[f]=D,f++}else if(w.isHemisphereLight){var N=n.get(w);N.skyColor.copy(w.color).multiplyScalar(C*_),N.groundColor.copy(w.groundColor).multiplyScalar(C*_),r.hemi[g]=N,g++}}0<p&&(e.isWebGL2||!0===t.has(\"OES_texture_float_linear\")?(r.rectAreaLTC1=Ps.LTC_FLOAT_1,r.rectAreaLTC2=Ps.LTC_FLOAT_2):!0===t.has(\"OES_texture_half_float_linear\")&&(r.rectAreaLTC1=Ps.LTC_HALF_1,r.rectAreaLTC2=Ps.LTC_HALF_2)),r.ambient[0]=o,r.ambient[1]=u,r.ambient[2]=l;var F=r.hash;F.directionalLength===h&&F.pointLength===f&&F.spotLength===d&&F.rectAreaLength===p&&F.hemiLength===g&&F.numDirectionalShadows===v&&F.numPointShadows===m&&F.numSpotShadows===y||(r.directional.length=h,r.spot.length=d,r.rectArea.length=p,r.point.length=f,r.hemi.length=g,r.directionalShadow.length=v,r.directionalShadowMap.length=v,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=y,r.spotShadowMap.length=y,r.directionalShadowMatrix.length=v,r.pointShadowMatrix.length=m,r.spotShadowMatrix.length=y,F.directionalLength=h,F.pointLength=f,F.spotLength=d,F.rectAreaLength=p,F.hemiLength=g,F.numDirectionalShadows=v,F.numPointShadows=m,F.numSpotShadows=y,r.version=Zu++)},setupView:function(t,e){for(var n=0,i=0,a=0,l=0,c=0,h=e.matrixWorldInverse,f=0,d=t.length;f<d;f++){var p=t[f];if(p.isDirectionalLight){var g=r.directional[n];g.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),g.direction.sub(s),g.direction.transformDirection(h),n++}else if(p.isSpotLight){var v=r.spot[a];v.position.setFromMatrixPosition(p.matrixWorld),v.position.applyMatrix4(h),v.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(s),v.direction.transformDirection(h),a++}else if(p.isRectAreaLight){var m=r.rectArea[l];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),u.identity(),o.copy(p.matrixWorld),o.premultiply(h),u.extractRotation(o),m.halfWidth.set(.5*p.width,0,0),m.halfHeight.set(0,.5*p.height,0),m.halfWidth.applyMatrix4(u),m.halfHeight.applyMatrix4(u),l++}else if(p.isPointLight){var y=r.point[i];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),i++}else if(p.isHemisphereLight){var _=r.hemi[c];_.direction.setFromMatrixPosition(p.matrixWorld),_.direction.transformDirection(h),_.direction.normalize(),c++}}},state:r}}function $u(t,e){var n=new Qu(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function tl(t,e){var n=new WeakMap;return{get:function(i){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(i)?(r=new $u(t,e),n.set(i,[r])):a>=n.get(i).length?(r=new $u(t,e),n.get(i).push(r)):r=n.get(i)[a],r},dispose:function(){n=new WeakMap}}}var el=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"MeshDepthMaterial\",i.depthPacking=Yn,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}]),n}(ga);el.prototype.isMeshDepthMaterial=!0;var nl=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"MeshDistanceMaterial\",i.referencePosition=new tr,i.nearDistance=1,i.farDistance=1e3,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.fog=!1,i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}]),n}(ga);function il(t,e,n){var i=new Ts,r=new Bi,a=new Bi,s=new Ji,o=new el({depthPacking:qn}),u=new nl,l={},c=n.maxTextureSize,h={0:ct,1:lt,2:ht},f=new ps({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Bi},radius:{value:4}},vertexShader:\"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\",fragmentShader:\"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tconst float samples = float( VSM_SAMPLES );\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\\n\\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\\n\\tfor ( float i = 0.0; i < samples; i ++ ) {\\n\\t\\tfloat uvOffset = uvStart + i * uvStride;\\n\\t\\t#ifdef HORIZONTAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean / samples;\\n\\tsquared_mean = squared_mean / samples;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;var p=new Ga;p.setAttribute(\"position\",new Ta(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var g=new us(p,f),v=this;function m(e,n,i,r,a,s,c){var f=null,d=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(f=void 0!==d?d:!0===r.isPointLight?u:o,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&0<i.alphaTest){e=f.uuid,d=i.uuid;var p=l[e];void 0===p&&(p={},l[e]=p);var g=p[d];void 0===g&&(g=f.clone(),p[d]=g),f=g}return f.visible=i.visible,f.wireframe=i.wireframe,f.side=c===ut?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:h[i.side],f.alphaMap=i.alphaMap,f.alphaTest=i.alphaTest,f.clipShadows=i.clipShadows,f.clippingPlanes=i.clippingPlanes,f.clipIntersection=i.clipIntersection,f.displacementMap=i.displacementMap,f.displacementScale=i.displacementScale,f.displacementBias=i.displacementBias,f.wireframeLinewidth=i.wireframeLinewidth,f.linewidth=i.linewidth,!0===r.isPointLight&&!0===f.isMeshDistanceMaterial&&(f.referencePosition.setFromMatrixPosition(r.matrixWorld),f.nearDistance=a,f.farDistance=s),f}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=st,this.render=function(n,o,u){if(!1!==v.enabled&&(!1!==v.autoUpdate||!1!==v.needsUpdate)&&0!==n.length){var l=t.getRenderTarget(),h=t.getActiveCubeFace(),p=t.getActiveMipmapLevel(),y=t.state;y.setBlending(pt),y.buffers.color.setClear(1,1,1,1),y.buffers.depth.setTest(!0),y.setScissorTest(!1);for(var _=0,x=n.length;_<x;_++){var b=n[_],w=b.shadow;if(void 0!==w&&(!1!==w.autoUpdate||!1!==w.needsUpdate)){r.copy(w.mapSize);var S,C=w.getFrameExtents();r.multiply(C),a.copy(w.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(a.x=Math.floor(c/C.x),r.x=a.x*C.x,w.mapSize.x=a.x),r.y>c&&(a.y=Math.floor(c/C.y),r.y=a.y*C.y,w.mapSize.y=a.y)),null!==w.map||w.isPointLightShadow||this.type!==ut||(S={minFilter:pe,magFilter:pe,format:Le},w.map=new Zi(r.x,r.y,S),w.map.texture.name=b.name+\".shadowMap\",w.mapPass=new Zi(r.x,r.y,S),w.camera.updateProjectionMatrix()),null===w.map&&(S={minFilter:le,magFilter:le,format:Le},w.map=new Zi(r.x,r.y,S),w.map.texture.name=b.name+\".shadowMap\",w.camera.updateProjectionMatrix()),t.setRenderTarget(w.map),t.clear();for(var M=w.getViewportCount(),T=0;T<M;T++){var k=w.getViewport(T);s.set(a.x*k.x,a.y*k.y,a.x*k.z,a.y*k.w),y.viewport(s),w.updateMatrices(b,T),i=w.getFrustum(),function n(r,a,s,o,u){if(!1!==r.visible){if(r.layers.test(a.layers)&&(r.isMesh||r.isLine||r.isPoints)&&(r.castShadow||r.receiveShadow&&u===ut)&&(!r.frustumCulled||i.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,r.matrixWorld);var l=e.update(r),c=r.material;if(Array.isArray(c))for(var h=l.groups,f=0,d=h.length;f<d;f++){var p=h[f],g=c[p.materialIndex];if(g&&g.visible){var v=m(r,0,g,o,s.near,s.far,u);t.renderBufferDirect(s,null,l,v,r,p)}}else if(c.visible){var y=m(r,0,c,o,s.near,s.far,u);t.renderBufferDirect(s,null,l,y,r,null)}}for(var _=r.children,x=0,b=_.length;x<b;x++)n(_[x],a,s,o,u)}}(o,u,w.camera,b,this.type)}w.isPointLightShadow||this.type!==ut||function(n,i){var r=e.update(g);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,f,g,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,d,g,null)}(w,u),w.needsUpdate=!1}}v.needsUpdate=!1,t.setRenderTarget(l,h,p)}}}function rl(t,e,n){var i,r,a=n.isWebGL2,s=new function(){var e=!1,n=new Ji,i=null,r=new Ji(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,s,o){!0===o&&(e*=s,i*=s,a*=s),n.set(e,i,a,s),!1===r.equals(n)&&(t.clearColor(e,i,a,s),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){(t?B:z)(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case Nt:t.depthFunc(512);break;case Ft:t.depthFunc(519);break;case Bt:t.depthFunc(513);break;case zt:t.depthFunc(515);break;case jt:t.depthFunc(514);break;case Ut:t.depthFunc(518);break;case Vt:t.depthFunc(516);break;case Wt:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},u=new function(){var e=!1,n=null,i=null,r=null,a=null,s=null,o=null,u=null,l=null;return{setTest:function(t){e||(t?B:z)(2960)},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,s){i===e&&r===n&&a===s||(t.stencilFunc(e,n,s),i=e,r=n,a=s)},setOp:function(e,n,i){s===e&&o===n&&u===i||(t.stencilOp(e,n,i),s=e,o=n,u=i)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,i=null,r=null,a=null,s=null,o=null,u=null,l=null}}},c={},h={},f=null,d=!1,p=null,g=null,v=null,m=null,y=null,_=null,x=null,b=!1,w=null,S=null,C=null,M=null,T=null,k=t.getParameter(35661),A=!1,E=0,O=t.getParameter(7938);-1!==O.indexOf(\"WebGL\")?(E=parseFloat(/^WebGL (\\d)/.exec(O)[1]),A=1<=E):-1!==O.indexOf(\"OpenGL ES\")&&(E=parseFloat(/^OpenGL ES (\\d)/.exec(O)[1]),A=2<=E);var P=null,I={},L=t.getParameter(3088);n=t.getParameter(2978);var D=(new Ji).fromArray(L),R=(new Ji).fromArray(n);function N(e,n,i){var r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var s=0;s<i;s++)t.texImage2D(n+s,0,6408,1,1,0,6408,5121,r);return a}var F={};function B(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function z(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}F[3553]=N(3553,3553,1),F[34067]=N(34067,34069,6),s.setClear(0,0,0,1),o.setClear(1),u.setClear(0),B(2929),o.setFunc(zt),W(!1),G(nt),B(2884),V(pt);var j=(i={},l(i,xt,32774),l(i,bt,32778),l(i,wt,32779),i);a?(j[St]=32775,j[Ct]=32776):null!==(e=e.get(\"EXT_blend_minmax\"))&&(j[St]=e.MIN_EXT,j[Ct]=e.MAX_EXT);var U=(r={},l(r,Mt,0),l(r,Tt,1),l(r,kt,768),l(r,Et,770),l(r,Rt,776),l(r,Lt,774),l(r,Pt,772),l(r,At,769),l(r,Ot,771),l(r,Dt,775),l(r,It,773),r);function V(e,n,i,r,a,s,o,u){if(e!==pt){if(!1===d&&(B(3042),d=!0),e===_t)a=a||n,s=s||i,o=o||r,n===g&&a===y||(t.blendEquationSeparate(j[n],j[a]),g=n,y=a),i===v&&r===m&&s===_&&o===x||(t.blendFuncSeparate(U[i],U[r],U[s],U[o]),v=i,m=r,_=s,x=o),p=e,b=null;else if(e!==p||u!==b){if(g===xt&&y===xt||(t.blendEquation(32774),g=xt,y=xt),u)switch(e){case gt:t.blendFuncSeparate(1,771,1,771);break;case vt:t.blendFunc(1,1);break;case mt:t.blendFuncSeparate(0,0,769,771);break;case yt:t.blendFuncSeparate(0,768,0,770)}else switch(e){case gt:t.blendFuncSeparate(770,771,1,771);break;case vt:t.blendFunc(770,1);break;case mt:t.blendFunc(0,769);break;case yt:t.blendFunc(0,768)}v=null,m=null,_=null,x=null,p=e,b=u}}else!0===d&&(z(3042),d=!1)}function W(e){w!==e&&(e?t.frontFace(2304):t.frontFace(2305),w=e)}function G(e){e!==et?(B(2884),e!==S&&(e===nt?t.cullFace(1029):e===it?t.cullFace(1028):t.cullFace(1032))):z(2884),S=e}function H(e,n,i){e?(B(32823),M===n&&T===i||(t.polygonOffset(n,i),M=n,T=i)):z(32823)}function X(e){void 0===e&&(e=33984+k-1),P!==e&&(t.activeTexture(e),P=e)}return{buffers:{color:s,depth:o,stencil:u},enable:B,disable:z,bindFramebuffer:function(e,n){return h[e]!==n&&(t.bindFramebuffer(e,n),h[e]=n,a&&(36009===e&&(h[36160]=n),36160===e&&(h[36009]=n)),!0)},useProgram:function(e){return f!==e&&(t.useProgram(e),f=e,!0)},setBlending:V,setMaterial:function(t,e){(t.side===ht?z:B)(2884);var n=t.side===ct;e&&(n=!n),W(n),t.blending===gt&&!1===t.transparent?V(pt):V(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),s.setMask(t.colorWrite),e=t.stencilWrite,u.setTest(e),e&&(u.setMask(t.stencilWriteMask),u.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),u.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),H(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),(!0===t.alphaToCoverage?B:z)(32926)},setFlipSided:W,setCullFace:G,setLineWidth:function(e){e!==C&&(A&&t.lineWidth(e),C=e)},setPolygonOffset:H,setScissorTest:function(t){(t?B:z)(3089)},activeTexture:X,bindTexture:function(e,n){null===P&&X();var i=I[P];void 0===i&&(i={type:void 0,texture:void 0},I[P]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||F[e]),i.type=e,i.texture=n)},unbindTexture:function(){var e=I[P];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){}},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){}},scissor:function(e){!1===D.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),D.copy(e))},viewport:function(e){!1===R.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),R.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===a&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},P=null,I={},h={},f=null,d=!1,p=null,g=null,v=null,m=null,y=null,_=null,x=null,b=!1,w=null,S=null,C=null,M=null,T=null,D.set(0,0,t.canvas.width,t.canvas.height),R.set(0,0,t.canvas.width,t.canvas.height),s.reset(),o.reset(),u.reset()}}}function al(t,e,n,i,r,a,s){var o,u,c,h=r.isWebGL2,f=(r.maxTextures,r.maxCubemapSize),d=r.maxTextureSize,p=r.maxSamples,g=e.has(\"WEBGL_multisampled_render_to_texture\")?e.get(\"WEBGL_multisampled_render_to_texture\"):void 0,v=new WeakMap,m=!1;try{m=\"undefined\"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext(\"2d\")}catch(t){}function y(t,e){return m?new OffscreenCanvas(t,e):Gi(\"canvas\")}function _(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if(\"undefined\"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||\"undefined\"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?Ni:Math.floor;i=a(r*t.width),e=a(r*t.height),void 0===c&&(c=y(i,e));var s=n?y(i,e):c;return s.width=i,s.height=e,s.getContext(\"2d\").drawImage(t,0,0,i,e),s}return t}return t}function x(t){return Di(t.width)&&Di(t.height)}function b(t,e){return t.generateMipmaps&&e&&t.minFilter!==le&&t.minFilter!==pe}function w(e){t.generateMipmap(e)}function S(n,i,r,a){if(!1===h)return i;if(null!==n&&void 0!==t[n])return t[n];var s=i;return 6403===i&&(5126===r&&(s=33326),5131===r&&(s=33325),5121===r&&(s=33321)),6407===i&&(5126===r&&(s=34837),5131===r&&(s=34843),5121===r&&(s=32849)),6408===i&&(5126===r&&(s=34836),5131===r&&(s=34842),5121===r&&(s=a===Xn?35907:32856)),33325!==s&&33326!==s&&34842!==s&&34836!==s||e.get(\"EXT_color_buffer_float\"),s}function C(t,e,n){return!0===b(t,n)||t.isFramebufferTexture&&t.minFilter!==le&&t.minFilter!==pe?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&0<t.mipmaps.length?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function M(t){return t===le||t===ce||t===fe?9728:9729}function T(e){var n,r=e.target;r.removeEventListener(\"dispose\",T),n=r,void 0!==(e=i.get(n)).__webglInit&&(t.deleteTexture(e.__webglTexture),i.remove(n)),r.isVideoTexture&&v.delete(r),s.memory.textures--}function k(e){var n=e.target;n.removeEventListener(\"dispose\",k),function(e){var n=e.texture,r=i.get(e),a=i.get(n);if(e){if(void 0!==a.__webglTexture&&(t.deleteTexture(a.__webglTexture),s.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)t.deleteFramebuffer(r.__webglFramebuffer[o]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[o]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&t.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(var u=0,l=n.length;u<l;u++){var c=i.get(n[u]);c.__webglTexture&&(t.deleteTexture(c.__webglTexture),s.memory.textures--),i.remove(n[u])}i.remove(n),i.remove(e)}}(n)}var A=0;function E(t,e){var r,a=i.get(t);if(t.isVideoTexture&&(o=t,r=s.render.frame,v.get(o)!==r&&(v.set(o,r),o.update())),0<t.version&&a.__version!==t.version){var o=t.image;if(void 0!==o&&!1!==o.complete)return void R(a,t,e)}n.activeTexture(33984+e),n.bindTexture(3553,a.__webglTexture)}function O(e,r){var s=i.get(e);0<e.version&&s.__version!==e.version?function(e,i,r){if(6===i.image.length){D(e,i),n.activeTexture(33984+r),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);for(var s=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),o=i.image[0]&&i.image[0].isDataTexture,u=[],l=0;l<6;l++)u[l]=s||o?o?i.image[l].image:i.image[l]:_(i.image[l],!1,!0,f);var c=u[0],d=x(c)||h,p=a.convert(i.format),g=a.convert(i.type),v=S(i.internalFormat,p,g,i.encoding),m=h&&!0!==i.isVideoTexture;r=void 0===e.__version;var y,M=C(i,c,d);if(L(34067,i,d),s){m&&r&&n.texStorage2D(34067,M,v,c.width,c.height);for(var T=0;T<6;T++){y=u[T].mipmaps;for(var k=0;k<y.length;k++){var A=y[k];i.format!==Le&&i.format!==Ie?null!==p&&(m?n.compressedTexSubImage2D(34069+T,k,0,0,A.width,A.height,p,A.data):n.compressedTexImage2D(34069+T,k,v,A.width,A.height,0,A.data)):m?n.texSubImage2D(34069+T,k,0,0,A.width,A.height,p,g,A.data):n.texImage2D(34069+T,k,v,A.width,A.height,0,p,g,A.data)}}}else{y=i.mipmaps,m&&r&&(0<y.length&&M++,n.texStorage2D(34067,M,v,u[0].width,u[0].height));for(var E=0;E<6;E++)if(o){m?n.texSubImage2D(34069+E,0,0,0,u[E].width,u[E].height,p,g,u[E].data):n.texImage2D(34069+E,0,v,u[E].width,u[E].height,0,p,g,u[E].data);for(var O=0;O<y.length;O++){var P=y[O].image[E].image;m?n.texSubImage2D(34069+E,O+1,0,0,P.width,P.height,p,g,P.data):n.texImage2D(34069+E,O+1,v,P.width,P.height,0,p,g,P.data)}}else{m?n.texSubImage2D(34069+E,0,0,0,p,g,u[E]):n.texImage2D(34069+E,0,v,p,g,u[E]);for(var I=0;I<y.length;I++){var R=y[I];m?n.texSubImage2D(34069+E,I+1,0,0,p,g,R.image[E]):n.texImage2D(34069+E,I+1,v,p,g,R.image[E])}}}b(i,d)&&w(34067),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}}(s,e,r):(n.activeTexture(33984+r),n.bindTexture(34067,s.__webglTexture))}var P=(o={},l(o,se,10497),l(o,oe,33071),l(o,ue,33648),o),I=(u={},l(u,le,9728),l(u,ce,9984),l(u,fe,9986),l(u,pe,9729),l(u,ge,9985),l(u,me,9987),u);function L(n,a,s){s?(t.texParameteri(n,10242,P[a.wrapS]),t.texParameteri(n,10243,P[a.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,P[a.wrapR]),t.texParameteri(n,10240,I[a.magFilter]),t.texParameteri(n,10241,I[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),a.wrapS!==oe||a.wrapT,t.texParameteri(n,10240,M(a.magFilter)),t.texParameteri(n,10241,M(a.minFilter)),a.minFilter!==le&&a.minFilter),!0===e.has(\"EXT_texture_filter_anisotropic\")&&(s=e.get(\"EXT_texture_filter_anisotropic\"),a.type===Me&&!1===e.has(\"OES_texture_float_linear\")||!1===h&&a.type===Te&&!1===e.has(\"OES_texture_half_float_linear\")||(1<a.anisotropy||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy))}function D(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener(\"dispose\",T),e.__webglTexture=t.createTexture(),s.memory.textures++)}function R(e,i,r){var s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),D(e,i),n.activeTexture(33984+r),n.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);var o,u=(m=i,!h&&(m.wrapS!==oe||m.wrapT!==oe||m.minFilter!==le&&m.minFilter!==pe)&&!1===x(i.image)),l=_(i.image,u,!1,d),c=(r=x(l)||h,a.convert(i.format)),f=a.convert(i.type),p=S(i.internalFormat,c,f,i.encoding);L(s,i,r);var g=i.mipmaps,v=h&&!0!==i.isVideoTexture,m=void 0===e.__version;if(u=C(i,l,r),i.isDepthTexture)p=6402,h?p=i.type===Me?36012:i.type===Ce?33190:i.type===Oe?35056:33189:i.type,i.format===Ne&&6402===p&&i.type!==we&&i.type!==Ce&&(i.type=we,f=a.convert(i.type)),i.format===Fe&&6402===p&&(p=34041,i.type!==Oe&&(i.type=Oe,f=a.convert(i.type))),v&&m?n.texStorage2D(3553,1,p,l.width,l.height):n.texImage2D(3553,0,p,l.width,l.height,0,c,f,null);else if(i.isDataTexture)if(0<g.length&&r){v&&m&&n.texStorage2D(3553,u,p,g[0].width,g[0].height);for(var y=0,M=g.length;y<M;y++)o=g[y],v?n.texSubImage2D(3553,0,0,0,o.width,o.height,c,f,o.data):n.texImage2D(3553,y,p,o.width,o.height,0,c,f,o.data);i.generateMipmaps=!1}else v?(m&&n.texStorage2D(3553,u,p,l.width,l.height),n.texSubImage2D(3553,0,0,0,l.width,l.height,c,f,l.data)):n.texImage2D(3553,0,p,l.width,l.height,0,c,f,l.data);else if(i.isCompressedTexture){v&&m&&n.texStorage2D(3553,u,p,g[0].width,g[0].height);for(var T=0,k=g.length;T<k;T++)o=g[T],i.format!==Le&&i.format!==Ie?null!==c&&(v?n.compressedTexSubImage2D(3553,T,0,0,o.width,o.height,c,o.data):n.compressedTexImage2D(3553,T,p,o.width,o.height,0,o.data)):v?n.texSubImage2D(3553,T,0,0,o.width,o.height,c,f,o.data):n.texImage2D(3553,T,p,o.width,o.height,0,c,f,o.data)}else if(i.isDataTexture2DArray)v?(m&&n.texStorage3D(35866,u,p,l.width,l.height,l.depth),n.texSubImage3D(35866,0,0,0,0,l.width,l.height,l.depth,c,f,l.data)):n.texImage3D(35866,0,p,l.width,l.height,l.depth,0,c,f,l.data);else if(i.isDataTexture3D)v?(m&&n.texStorage3D(32879,u,p,l.width,l.height,l.depth),n.texSubImage3D(32879,0,0,0,0,l.width,l.height,l.depth,c,f,l.data)):n.texImage3D(32879,0,p,l.width,l.height,l.depth,0,c,f,l.data);else if(i.isFramebufferTexture)v&&m?n.texStorage2D(3553,u,p,l.width,l.height):n.texImage2D(3553,0,p,l.width,l.height,0,c,f,null);else if(0<g.length&&r){v&&m&&n.texStorage2D(3553,u,p,g[0].width,g[0].height);for(var A=0,E=g.length;A<E;A++)o=g[A],v?n.texSubImage2D(3553,A,0,0,c,f,o):n.texImage2D(3553,A,p,c,f,o);i.generateMipmaps=!1}else v?(m&&n.texStorage2D(3553,u,p,l.width,l.height),n.texSubImage2D(3553,0,0,0,c,f,l)):n.texImage2D(3553,0,p,c,f,l);b(i,r)&&w(s),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function N(e,r,s,o,u){var l=a.convert(s.format),c=a.convert(s.type),h=S(s.internalFormat,l,c,s.encoding);i.get(r).__hasExternalTextures||(32879===u||35866===u?n.texImage3D(u,0,h,r.width,r.height,r.depth,0,l,c,null):n.texImage2D(u,0,h,r.width,r.height,0,l,c,null)),n.bindFramebuffer(36160,e),r.useRenderToTexture?g.framebufferTexture2DMultisampleEXT(36160,o,u,i.get(s).__webglTexture,0,z(r)):t.framebufferTexture2D(36160,o,u,i.get(s).__webglTexture,0),n.bindFramebuffer(36160,null)}function F(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var r=33189;i||n.useRenderToTexture?((o=n.depthTexture)&&o.isDepthTexture&&(o.type===Me?r=36012:o.type===Ce&&(r=33190)),o=z(n),n.useRenderToTexture?g.renderbufferStorageMultisampleEXT(36161,o,r,n.width,n.height):t.renderbufferStorageMultisample(36161,o,r,n.width,n.height)):t.renderbufferStorage(36161,r,n.width,n.height),t.framebufferRenderbuffer(36160,36096,36161,e)}else{var s,o;n.depthBuffer&&n.stencilBuffer?(s=z(n),i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,s,35056,n.width,n.height):n.useRenderToTexture?g.renderbufferStorageMultisampleEXT(36161,s,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)):(o=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,s=a.convert(o.format),e=a.convert(o.type),e=S(o.internalFormat,s,e,o.encoding),o=z(n),i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,o,e,n.width,n.height):n.useRenderToTexture?g.renderbufferStorageMultisampleEXT(36161,o,e,n.width,n.height):t.renderbufferStorage(36161,e,n.width,n.height))}t.bindRenderbuffer(36161,null)}function B(e){var r=i.get(e),a=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error(\"target.depthTexture not supported in Cube render targets\");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error(\"Depth Texture with cube render targets is not supported\");if(n.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),E(r.depthTexture,0);var a=i.get(r.depthTexture).__webglTexture;if(e=z(r),r.depthTexture.format===Ne)r.useRenderToTexture?g.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,e):t.framebufferTexture2D(36160,36096,3553,a,0);else{if(r.depthTexture.format!==Fe)throw new Error(\"Unknown depthTexture format\");r.useRenderToTexture?g.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,e):t.framebufferTexture2D(36160,33306,3553,a,0)}}(r.__webglFramebuffer,e)}else if(a){r.__webglDepthbuffer=[];for(var s=0;s<6;s++)n.bindFramebuffer(36160,r.__webglFramebuffer[s]),r.__webglDepthbuffer[s]=t.createRenderbuffer(),F(r.__webglDepthbuffer[s],e,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),F(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function z(t){return h&&(t.useRenderbuffer||t.useRenderToTexture)?Math.min(p,t.samples):0}var j=!1,U=!1;this.allocateTextureUnit=function(){var t=A;return A+=1,t},this.resetTextureUnits=function(){A=0},this.setTexture2D=E,this.setTexture2DArray=function(t,e){var r=i.get(t);0<t.version&&r.__version!==t.version?R(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=i.get(t);0<t.version&&r.__version!==t.version?R(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=O,this.rebindTextures=function(t,e,n){var r=i.get(t);void 0!==e&&N(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&B(t)},this.setupRenderTarget=function(e){var o=e.texture,u=i.get(e),l=i.get(o);e.addEventListener(\"dispose\",k),!0!==e.isWebGLMultipleRenderTargets&&(void 0===l.__webglTexture&&(l.__webglTexture=t.createTexture()),l.__version=o.version,s.memory.textures++);var c,f,d=!0===e.isWebGLCubeRenderTarget,p=!0===e.isWebGLMultipleRenderTargets,g=o.isDataTexture3D||o.isDataTexture2DArray,v=x(e)||h;if(!h||o.format!==Ie||o.type!==Me&&o.type!==Te||(o.format=Le),d){u.__webglFramebuffer=[];for(var m=0;m<6;m++)u.__webglFramebuffer[m]=t.createFramebuffer()}else if(u.__webglFramebuffer=t.createFramebuffer(),p){if(r.drawBuffers)for(var y=e.texture,_=0,C=y.length;_<C;_++){var M=i.get(y[_]);void 0===M.__webglTexture&&(M.__webglTexture=t.createTexture(),s.memory.textures++)}}else e.useRenderbuffer&&h&&(u.__webglMultisampledFramebuffer=t.createFramebuffer(),u.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,u.__webglColorRenderbuffer),c=a.convert(o.format),f=a.convert(o.type),c=S(o.internalFormat,c,f,o.encoding),f=z(e),t.renderbufferStorageMultisample(36161,f,c,e.width,e.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(u.__webglDepthRenderbuffer=t.createRenderbuffer(),F(u.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null));if(d){n.bindTexture(34067,l.__webglTexture),L(34067,o,v);for(var T=0;T<6;T++)N(u.__webglFramebuffer[T],e,o,36064,34069+T);b(o,v)&&w(34067),n.unbindTexture()}else if(p){for(var A=e.texture,E=0,O=A.length;E<O;E++){var P=A[E],I=i.get(P);n.bindTexture(3553,I.__webglTexture),L(3553,P,v),N(u.__webglFramebuffer,e,P,36064+E,3553),b(P,v)&&w(3553)}n.unbindTexture()}else{var D=3553;g&&h&&(D=(g=o.isDataTexture3D)?32879:35866),n.bindTexture(D,l.__webglTexture),L(D,o,v),N(u.__webglFramebuffer,e,o,36064,D),b(o,v)&&w(D),n.unbindTexture()}e.depthBuffer&&B(e)},this.updateRenderTargetMipmap=function(t){for(var e=x(t)||h,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=0,s=r.length;a<s;a++){var o,u=r[a];b(u,e)&&(o=t.isWebGLCubeRenderTarget?34067:3553,u=i.get(u).__webglTexture,n.bindTexture(o,u),w(o),n.unbindTexture())}},this.updateMultisampleRenderTarget=function(e){if(e.useRenderbuffer&&h){var r=e.width,a=e.height,s=16384,o=[36064],u=e.stencilBuffer?33306:36096;e.depthBuffer&&o.push(u),e.ignoreDepthForMultisampleCopy||(e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024));var l=i.get(e);n.bindFramebuffer(36008,l.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,l.__webglFramebuffer),e.ignoreDepthForMultisampleCopy&&(t.invalidateFramebuffer(36008,[u]),t.invalidateFramebuffer(36009,[u])),t.blitFramebuffer(0,0,r,a,0,0,r,a,s,9728),t.invalidateFramebuffer(36008,o),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,l.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=N,this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===j&&(j=!0),t=t.texture),E(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===U&&(U=!0),t=t.texture),O(t,e)}}function sl(t,e,n){var i=n.isWebGL2;return{convert:function(t){var n;if(t===_e)return 5121;if(t===ke)return 32819;if(t===Ae)return 32820;if(t===Ee)return 33635;if(t===xe)return 5120;if(t===be)return 5122;if(t===we)return 5123;if(t===Se)return 5124;if(t===Ce)return 5125;if(t===Me)return 5126;if(t===Te)return i?5131:(n=e.get(\"OES_texture_half_float\"),null!==n?n.HALF_FLOAT_OES:null);if(t===Pe)return 6406;if(t===Ie)return 6407;if(t===Le)return 6408;if(t===De)return 6409;if(t===Re)return 6410;if(t===Ne)return 6402;if(t===Fe)return 34041;if(t===Be)return 6403;if(t===ze)return 36244;if(t===je)return 33319;if(t===Ue)return 33320;if(t===Ve)return 36248;if(t===We)return 36249;if(t===Ge||t===He||t===Xe||t===Ye){if(n=e.get(\"WEBGL_compressed_texture_s3tc\"),null===n)return null;if(t===Ge)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===He)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Xe)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Ye)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===qe||t===Je||t===Ze||t===Ke){if(n=e.get(\"WEBGL_compressed_texture_pvrtc\"),null===n)return null;if(t===qe)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Je)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Ze)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Ke)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Qe)return n=e.get(\"WEBGL_compressed_texture_etc1\"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===$e||t===tn)&&(n=e.get(\"WEBGL_compressed_texture_etc\"),null!==n)){if(t===$e)return n.COMPRESSED_RGB8_ETC2;if(t===tn)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===en||t===nn||t===rn||t===an||t===sn||t===on||t===un||t===ln||t===cn||t===hn||t===fn||t===dn||t===pn||t===gn||t===mn||t===yn||t===_n||t===xn||t===bn||t===wn||t===Sn||t===Cn||t===Mn||t===Tn||t===kn||t===An||t===En||t===On?(n=e.get(\"WEBGL_compressed_texture_astc\"),null!==n?t:null):t===vn?(n=e.get(\"EXT_texture_compression_bptc\"),null!==n?t:null):t===Oe?i?34042:(n=e.get(\"WEBGL_depth_texture\"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}nl.prototype.isMeshDistanceMaterial=!0;var ol=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return y(this,n),t=e.call(this),t.cameras=i,t}return _(n)}(vs);ol.prototype.isArrayCamera=!0;var ul=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this),t.type=\"Group\",t}return _(n)}(na);ul.prototype.isGroup=!0;var ll={type:\"move\"},cl=function(){function t(){y(this,t),this._targetRay=null,this._grip=null,this._hand=null}return _(t,[{key:\"getHandSpace\",value:function(){return null===this._hand&&(this._hand=new ul,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:\"getTargetRaySpace\",value:function(){return null===this._targetRay&&(this._targetRay=new ul,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new tr,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new tr),this._targetRay}},{key:\"getGripSpace\",value:function(){return null===this._grip&&(this._grip=new ul,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new tr,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new tr),this._grip}},{key:\"dispatchEvent\",value:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}},{key:\"disconnect\",value:function(t){return this.dispatchEvent({type:\"disconnected\",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:\"update\",value:function(t,e,n){var i=null,r=null,a=null,s=this._targetRay,o=this._grip,l=this._hand;if(t&&\"visible-blurred\"!==e.session.visibilityState)if(null!==s&&(i=e.getPose(t.targetRaySpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(ll))),l&&t.hand){a=!0;var c,h=u(t.hand.values());try{for(h.s();!(c=h.n()).done;){var f=c.value,d=e.getJointPose(f,n);if(void 0===l.joints[f.jointName]){var p=new ul;p.matrixAutoUpdate=!1,p.visible=!1,l.joints[f.jointName]=p,l.add(p)}var g=l.joints[f.jointName];null!==d&&(g.matrix.fromArray(d.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=d.radius),g.visible=null!==d}}catch(y){h.e(y)}finally{h.f()}var v=l.joints[\"index-finger-tip\"],m=l.joints[\"thumb-tip\"];m=v.position.distanceTo(m.position),l.inputState.pinching&&.025<m?(l.inputState.pinching=!1,this.dispatchEvent({type:\"pinchend\",handedness:t.handedness,target:this})):!l.inputState.pinching&&m<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:\"pinchstart\",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));return null!==s&&(s.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}}]),t}(),hl=function(t){v(n,t);var e=m(n);function n(t,i,r,a,s,o,u,l,c,h){var f;if(y(this,n),(h=void 0!==h?h:Ne)!==Ne&&h!==Fe)throw new Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");return f=e.call(this,null,a,s,o,u,l,h,r=void 0===(r=void 0===r&&h===Ne?we:r)&&h===Fe?Oe:r,c),f.image={width:t,height:i},f.magFilter=void 0!==u?u:le,f.minFilter=void 0!==l?l:le,f.flipY=!1,f.generateMipmaps=!1,f}return _(n)}(Yi);hl.prototype.isDepthTexture=!0;var fl=function(t){v(n,t);var e=m(n);function n(t,i){var r;y(this,n),r=e.call(this);var a,s=g(r),u=null,l=1,c=null,h=\"local-floor\",f=t.extensions.has(\"WEBGL_multisampled_render_to_texture\"),d=null,p=null,v=null,m=null,_=null,x=i.getContextAttributes(),b=null,w=null,S=[],C=new Map,M=new vs;M.layers.enable(1),M.viewport=new Ji;var T=new vs;T.layers.enable(2),T.viewport=new Ji;var k=[M,T],A=new ol;A.layers.enable(1),A.layers.enable(2);var E=null,O=null;function P(t){var e=C.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function I(){C.forEach((function(t,e){t.disconnect(e)})),C.clear(),E=null,O=null,t.setRenderTarget(b),m=null,v=null,p=null,u=null,w=null,B.stop(),s.isPresenting=!1,s.dispatchEvent({type:\"sessionend\"})}function L(t){for(var e=u.inputSources,n=0;n<S.length;n++)C.set(e[n],S[n]);for(var i=0;i<t.removed.length;i++){var r=t.removed[i],a=C.get(r);a&&(a.dispatchEvent({type:\"disconnected\",data:r}),C.delete(r))}for(var s=0;s<t.added.length;s++){var o=t.added[s],l=C.get(o);l&&l.dispatchEvent({type:\"connected\",data:o})}}r.cameraAutoUpdate=!0,r.enabled=!1,r.isPresenting=!1,r.getController=function(t){var e=S[t];return void 0===e&&(e=new cl,S[t]=e),e.getTargetRaySpace()},r.getControllerGrip=function(t){var e=S[t];return void 0===e&&(e=new cl,S[t]=e),e.getGripSpace()},r.getHand=function(t){var e=S[t];return void 0===e&&(e=new cl,S[t]=e),e.getHandSpace()},r.setFramebufferScaleFactor=function(t){l=t,s.isPresenting},r.setReferenceSpaceType=function(t){h=t,s.isPresenting},r.getReferenceSpace=function(){return c},r.getBaseLayer=function(){return null!==v?v:m},r.getBinding=function(){return p},r.getFrame=function(){return _},r.getSession=function(){return u},r.setSession=function(){var e=o(regeneratorRuntime.mark((function e(n){var r,o,d,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=n,null===u){e.next=30;break}if(b=t.getRenderTarget(),u.addEventListener(\"select\",P),u.addEventListener(\"selectstart\",P),u.addEventListener(\"selectend\",P),u.addEventListener(\"squeeze\",P),u.addEventListener(\"squeezestart\",P),u.addEventListener(\"squeezeend\",P),u.addEventListener(\"end\",I),u.addEventListener(\"inputsourceschange\",L),e.t0=!0!==x.xrCompatible,!e.t0){e.next=14;break}return e.next=14,i.makeXRCompatible();case 14:if(void 0!==u.renderState.layers&&!1!==t.capabilities.isWebGL2){e.next=19;break}r={antialias:void 0!==u.renderState.layers||x.antialias,alpha:x.alpha,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:l},m=new XRWebGLLayer(u,i,r),u.updateRenderState({baseLayer:m}),w=new Zi(m.framebufferWidth,m.framebufferHeight,{format:Le,type:_e,encoding:t.outputEncoding}),e.next=22;break;case 19:a=x.antialias,o=null,d=null,g=null,x.depth&&(g=x.stencil?35056:33190,o=x.stencil?Fe:Ne,d=x.stencil?Oe:we),r={colorFormat:x.alpha||a?32856:32849,depthFormat:g,scaleFactor:l},p=new XRWebGLBinding(u,i),v=p.createProjectionLayer(r),u.updateRenderState({layers:[v]}),w=a?new Qi(v.textureWidth,v.textureHeight,{format:Le,type:_e,depthTexture:new hl(v.textureWidth,v.textureHeight,d,void 0,void 0,void 0,void 0,void 0,void 0,o),stencilBuffer:x.stencil,ignoreDepth:v.ignoreDepthValues,useRenderToTexture:f,encoding:t.outputEncoding}):new Zi(v.textureWidth,v.textureHeight,{format:x.alpha?Le:Ie,type:_e,depthTexture:new hl(v.textureWidth,v.textureHeight,d,void 0,void 0,void 0,void 0,void 0,void 0,o),stencilBuffer:x.stencil,ignoreDepth:v.ignoreDepthValues,encoding:t.outputEncoding});case 22:return this.setFoveation(1),e.next=25,u.requestReferenceSpace(h);case 25:c=e.sent,B.setContext(u),B.start(),s.isPresenting=!0,s.dispatchEvent({type:\"sessionstart\"});case 30:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var D=new tr,R=new tr;function N(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}r.updateCamera=function(t){if(null!==u){A.near=T.near=M.near=t.near,A.far=T.far=M.far=t.far,E===A.near&&O===A.far||(u.updateRenderState({depthNear:A.near,depthFar:A.far}),E=A.near,O=A.far);var e=t.parent,n=A.cameras;N(A,e);for(var i=0;i<n.length;i++)N(n[i],e);A.matrixWorld.decompose(A.position,A.quaternion,A.scale),t.position.copy(A.position),t.quaternion.copy(A.quaternion),t.scale.copy(A.scale),t.matrix.copy(A.matrix),t.matrixWorld.copy(A.matrixWorld);for(var r=t.children,a=0,s=r.length;a<s;a++)r[a].updateMatrixWorld(!0);2===n.length?function(t,e,n){D.setFromMatrixPosition(e.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);var i=D.distanceTo(R),r=e.projectionMatrix.elements,a=n.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),u=(r[9]+1)/r[5],l=(r[9]-1)/r[5],c=(r=s*(c=(r[8]-1)/r[0]),a=s*(n=(a[8]+1)/a[0]),(n=i/(n-c))*-c);e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(c),t.translateZ(n),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert(),s+=n,n=o+n,t.projectionMatrix.makePerspective(r-c,i-c+a,u*o/n*s,l*o/n*s,s,n)}(A,M,T):A.projectionMatrix.copy(M.projectionMatrix)}},r.getCamera=function(){return A},r.getFoveation=function(){return null!==v?v.fixedFoveation:null!==m?m.fixedFoveation:void 0},r.setFoveation=function(t){null!==v&&(v.fixedFoveation=t),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=t)};var F=null,B=new ks;return B.setAnimationLoop((function(e,n){if(d=n.getViewerPose(c),_=n,null!==d){var i=d.views;null!==m&&(t.setRenderTargetFramebuffer(w,m.framebuffer),t.setRenderTarget(w));var r=!1;i.length!==A.cameras.length&&(A.cameras.length=0,r=!0);for(var a=0;a<i.length;a++){var s,o=i[a],l=null;null!==m?l=m.getViewport(o):(l=(s=p.getViewSubImage(v,o)).viewport,0===a&&(t.setRenderTargetTextures(w,s.colorTexture,v.ignoreDepthValues?void 0:s.depthStencilTexture),t.setRenderTarget(w)));var h=k[a];h.matrix.fromArray(o.transform.matrix),h.projectionMatrix.fromArray(o.projectionMatrix),h.viewport.set(l.x,l.y,l.width,l.height),0===a&&A.matrix.copy(h.matrix),!0===r&&A.cameras.push(h)}}for(var f=u.inputSources,g=0;g<S.length;g++){var y=S[g],x=f[g];y.update(x,n,c)}F&&F(e,n),_=null})),r.setAnimationLoop=function(t){F=t},r.dispose=function(){},r}return _(n)}(Ci);function dl(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),0<n.alphaTest&&(e.alphaTest.value=n.alphaTest);var i,r,a=t.get(n).envMap;a&&(e.envMap.value=a,e.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap?i=n.clearcoatRoughnessMap:n.specularIntensityMap?i=n.specularIntensityMap:n.specularColorMap?i=n.specularColorMap:n.transmissionMap?i=n.transmissionMap:n.thicknessMap?i=n.thicknessMap:n.sheenColorMap?i=n.sheenColorMap:n.sheenRoughnessMap&&(i=n.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix)),n.aoMap?r=n.aoMap:n.lightMap&&(r=n.lightMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uv2Transform.value.copy(r.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,n.side===ct&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),n.side===ct&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,a,s){var o,u,l,c;i.isMeshBasicMaterial?e(t,i):i.isMeshLambertMaterial?(e(t,i),l=t,(c=i).emissiveMap&&(l.emissiveMap.value=c.emissiveMap)):i.isMeshToonMaterial?(e(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ct&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ct&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshPhongMaterial?(e(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ct&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ct&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshStandardMaterial?(e(t,i),i.isMeshPhysicalMaterial?function(t,e,i){n(t,e),t.ior.value=e.ior,0<e.sheen&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap)),0<e.clearcoat&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===ct&&t.clearcoatNormalScale.value.negate())),0<e.transmission&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,i,s):n(t,i)):i.isMeshMatcapMaterial?(e(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ct&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ct&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDepthMaterial?(e(t,i),o=t,(u=i).displacementMap&&(o.displacementMap.value=u.displacementMap,o.displacementScale.value=u.displacementScale,o.displacementBias.value=u.displacementBias)):i.isMeshDistanceMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?(e(t,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ct&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ct&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isLineBasicMaterial?(o=i,(u=t).diffuse.value.copy(o.color),u.opacity.value=o.opacity,i.isLineDashedMaterial&&(u=i,(o=t).dashSize.value=u.dashSize,o.totalSize.value=u.dashSize+u.gapSize,o.scale.value=u.scale)):i.isPointsMaterial?function(t,e,n,i){var r;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),0<e.alphaTest&&(t.alphaTest.value=e.alphaTest),e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,r,a):i.isSpriteMaterial?function(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),0<e.alphaTest&&(t.alphaTest.value=e.alphaTest),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function pl(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=void 0!==t.canvas?t.canvas:function(){var t=Gi(\"canvas\");return t.style.display=\"block\",t}(),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,s=void 0!==t.antialias&&t.antialias,o=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:\"default\",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,h=null,f=null,d=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Hn,this.physicallyCorrectLights=!1,this.toneMapping=Yt,this.toneMappingExposure=1;var g=this,v=!1,m=0,y=0,_=null,x=-1,b=null,w=new Ji,S=new Ji,C=null,M=e.width,T=e.height,k=1,A=null,E=null,O=new Ji(0,0,M,T),P=new Ji(0,0,M,T),I=!1,L=[],D=new Ts,R=!1,N=!1,F=null,B=new Pr,z=new tr,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===_?k:1}var V,W,G,H,X,Y,q,J,Z,K,$,tt,et,nt,it,rt,at,st,ot,ut,ft,dt,pt,gt=n;function vt(t,n){for(var i=0;i<t.length;i++){var r=t[i];if(null!==(r=e.getContext(r,n)))return r}return null}try{var mt={alpha:i,depth:r,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if(\"setAttribute\"in e&&e.setAttribute(\"data-engine\",\"three.js r\"+Q),e.addEventListener(\"webglcontextlost\",bt,!1),e.addEventListener(\"webglcontextrestored\",wt,!1),null===gt){var yt=[\"webgl2\",\"webgl\",\"experimental-webgl\"];if(!0===g.isWebGL1Renderer&&yt.shift(),gt=vt(yt,mt),null===gt)throw vt(yt)?new Error(\"Error creating WebGL context with your selected attributes.\"):new Error(\"Error creating WebGL context.\")}void 0===gt.getShaderPrecisionFormat&&(gt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw t}function _t(){V=new oo(gt),W=new Ns(gt,V,t),V.init(W),dt=new sl(gt,V,W),G=new rl(gt,V,W),L[0]=1029,H=new co(gt),X=new Gu,Y=new al(gt,V,G,X,W,dt,H),q=new Bs(g),J=new so(g),Z=new As(gt,W),pt=new Ds(gt,V,Z,W),K=new uo(gt,Z,H,pt),$=new mo(gt,K,Z,H),ot=new vo(gt,W,Y),rt=new Fs(X),tt=new Wu(g,q,J,V,W,pt,rt),et=new dl(X),nt=new qu,it=new tl(V,W),st=new Ls(g,q,G,$,o),at=new il(g,$,W),ut=new Rs(gt,V,H,W),ft=new lo(gt,V,H,W),H.programs=tt.programs,g.capabilities=W,g.extensions=V,g.properties=X,g.renderLists=nt,g.shadowMap=at,g.state=G,g.info=H}_t();var xt=new fl(g,gt);function bt(t){t.preventDefault(),v=!0}function wt(){v=!1;var t=H.autoReset,e=at.enabled,n=at.autoUpdate,i=at.needsUpdate,r=at.type;_t(),H.autoReset=t,at.enabled=e,at.autoUpdate=n,at.needsUpdate=i,at.type=r}function St(t){var e=t.target;e.removeEventListener(\"dispose\",St),function(t){var e=X.get(t).programs;void 0!==e&&(e.forEach((function(t){tt.releaseProgram(t)})),t.isShaderMaterial&&tt.releaseShaderCache(t))}(t=e),X.remove(t)}this.xr=xt,this.getContext=function(){return gt},this.getContextAttributes=function(){return gt.getContextAttributes()},this.forceContextLoss=function(){var t=V.get(\"WEBGL_lose_context\");t&&t.loseContext()},this.forceContextRestore=function(){var t=V.get(\"WEBGL_lose_context\");t&&t.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(t){void 0!==t&&(k=t,this.setSize(M,T,!1))},this.getSize=function(t){return t.set(M,T)},this.setSize=function(t,n,i){xt.isPresenting||(M=t,T=n,e.width=Math.floor(t*k),e.height=Math.floor(n*k),!1!==i&&(e.style.width=t+\"px\",e.style.height=n+\"px\"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(M*k,T*k).floor()},this.setDrawingBufferSize=function(t,n,i){M=t,T=n,k=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(w)},this.getViewport=function(t){return t.copy(O)},this.setViewport=function(t,e,n,i){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,n,i),G.viewport(w.copy(O).multiplyScalar(k).floor())},this.getScissor=function(t){return t.copy(P)},this.setScissor=function(t,e,n,i){t.isVector4?P.set(t.x,t.y,t.z,t.w):P.set(t,e,n,i),G.scissor(S.copy(P).multiplyScalar(k).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(t){G.setScissorTest(I=t)},this.setOpaqueSort=function(t){A=t},this.setTransparentSort=function(t){E=t},this.getClearColor=function(t){return t.copy(st.getClearColor())},this.setClearColor=function(){st.setClearColor.apply(st,arguments)},this.getClearAlpha=function(){return st.getClearAlpha()},this.setClearAlpha=function(){st.setClearAlpha.apply(st,arguments)},this.clear=function(t,e,n){var i=0;void 0!==t&&!t||(i|=16384),void 0!==e&&!e||(i|=256),void 0!==n&&!n||(i|=1024),gt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener(\"webglcontextlost\",bt,!1),e.removeEventListener(\"webglcontextrestored\",wt,!1),nt.dispose(),it.dispose(),X.dispose(),q.dispose(),J.dispose(),$.dispose(),pt.dispose(),tt.dispose(),xt.dispose(),xt.removeEventListener(\"sessionstart\",Mt),xt.removeEventListener(\"sessionend\",Tt),F&&(F.dispose(),F=null),kt.stop()},this.renderBufferDirect=function(t,e,n,i,r,a){null===e&&(e=j);var s=r.isMesh&&r.matrixWorld.determinant()<0,o=function(t,e,n,i,r){!0!==e.isScene&&(e=j),Y.resetTextureUnits();var a,s=e.fog,o=i.isMeshStandardMaterial?e.environment:null,u=null===_?g.outputEncoding:_.texture.encoding,l=(i.isMeshStandardMaterial?J:q).get(i.envMap||o),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,h=!!i.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,v=n.morphAttributes.position?n.morphAttributes.position.length:0,m=i.toneMapped?g.toneMapping:Yt,y=X.get(i),w=f.state.lights;!0===R&&(!0!==N&&t===b||(a=t===b&&i.id===x,rt.setState(i,t,a)));var S=!1;i.version===y.__version?(y.needsLights&&y.lightsStateVersion!==w.state.version||y.outputEncoding!==u||r.isInstancedMesh&&!1===y.instancing||!r.isInstancedMesh&&!0===y.instancing||r.isSkinnedMesh&&!1===y.skinning||!r.isSkinnedMesh&&!0===y.skinning||y.envMap!==l||i.fog&&y.fog!==s||void 0!==y.numClippingPlanes&&(y.numClippingPlanes!==rt.numPlanes||y.numIntersection!==rt.numIntersection)||y.vertexAlphas!==c||y.vertexTangents!==h||y.morphTargets!==d||y.morphNormals!==p||y.toneMapping!==m||!0===W.isWebGL2&&y.morphTargetsCount!==v)&&(S=!0):(S=!0,y.__version=i.version);var C=y.currentProgram;!0===S&&(C=Ot(i,e,r));var M=!1,A=!1,E=!1,O=C.getUniforms(),P=y.uniforms;if(G.useProgram(C.program)&&(M=!0,A=!0,E=!0),i.id!==x&&(x=i.id,A=!0),M||b!==t){if(O.setValue(gt,\"projectionMatrix\",t.projectionMatrix),W.logarithmicDepthBuffer&&O.setValue(gt,\"logDepthBufFC\",2/(Math.log(t.far+1)/Math.LN2)),b!==t&&(b=t,A=!0,E=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){var I=O.map.cameraPosition;void 0!==I&&I.setValue(gt,z.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&O.setValue(gt,\"isOrthographic\",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&O.setValue(gt,\"viewMatrix\",t.matrixWorldInverse)}if(r.isSkinnedMesh){O.setOptional(gt,r,\"bindMatrix\"),O.setOptional(gt,r,\"bindMatrixInverse\");var L=r.skeleton;L&&(W.floatVertexTextures?(null===L.boneTexture&&L.computeBoneTexture(),O.setValue(gt,\"boneTexture\",L.boneTexture,Y),O.setValue(gt,\"boneTextureSize\",L.boneTextureSize)):O.setOptional(gt,L,\"boneMatrices\"))}return!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||ot.update(r,n,i,C),!A&&y.receiveShadow===r.receiveShadow||(y.receiveShadow=r.receiveShadow,O.setValue(gt,\"receiveShadow\",r.receiveShadow)),A&&(O.setValue(gt,\"toneMappingExposure\",g.toneMappingExposure),y.needsLights&&function(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}(P,E),s&&i.fog&&et.refreshFogUniforms(P,s),et.refreshMaterialUniforms(P,i,k,T,F),bu.upload(gt,y.uniformsList,P,Y)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(bu.upload(gt,y.uniformsList,P,Y),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&O.setValue(gt,\"center\",r.center),O.setValue(gt,\"modelViewMatrix\",r.modelViewMatrix),O.setValue(gt,\"normalMatrix\",r.normalMatrix),O.setValue(gt,\"modelMatrix\",r.matrixWorld),C}(t,e,n,i,r);G.setMaterial(i,s);var u=n.index;if(t=n.attributes.position,null===u){if(void 0===t||0===t.count)return}else if(0===u.count)return;var l=1;!0===i.wireframe&&(u=K.getWireframeAttribute(n),l=2),pt.setup(r,i,o,n,u);var c=ut;null!==u&&(h=Z.get(u),c=ft,c.setIndex(h)),e=(null!==u?u:t).count,s=n.drawRange.start*l,o=n.drawRange.count*l;var h=null!==a?a.start*l:0;if(t=null!==a?a.count*l:1/0,a=Math.max(s,h),t=Math.min(e,s+o,h+t)-1,0!==(t=Math.max(0,t-a+1))){if(r.isMesh)!0===i.wireframe?(G.setLineWidth(i.wireframeLinewidth*U()),c.setMode(1)):c.setMode(4);else if(r.isLine){var d=i.linewidth;void 0===d&&(d=1),G.setLineWidth(d*U()),r.isLineSegments?c.setMode(1):r.isLineLoop?c.setMode(2):c.setMode(3)}else r.isPoints?c.setMode(0):r.isSprite&&c.setMode(4);r.isInstancedMesh?c.renderInstances(a,t,r.count):n.isInstancedBufferGeometry?(n=Math.min(n.instanceCount,n._maxInstanceCount),c.renderInstances(a,t,n)):c.render(a,t)}},this.compile=function(t,e){f=it.get(t),f.init(),p.push(f),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(g.physicallyCorrectLights),t.traverse((function(e){var n=e.material;if(n)if(Array.isArray(n))for(var i=0;i<n.length;i++)Ot(n[i],t,e);else Ot(n,t,e)})),p.pop(),f=null};var Ct=null;function Mt(){kt.stop()}function Tt(){kt.start()}var kt=new ks;function At(t,e,n,i){var r=t.opaque,a=t.transmissive;t=t.transparent,f.setupLightsView(n),0<a.length&&function(t,e,n){if(null===F){var i=!0===s&&!0===W.isWebGL2?Qi:Zi;F=new i(1024,1024,{generateMipmaps:!0,type:null!==dt.convert(Te)?Te:_e,minFilter:me,magFilter:le,wrapS:oe,wrapT:oe,useRenderToTexture:V.has(\"WEBGL_multisampled_render_to_texture\")})}var r=g.getRenderTarget();g.setRenderTarget(F),g.clear();var a=g.toneMapping;g.toneMapping=Yt,Et(t,e,n),g.toneMapping=a,Y.updateMultisampleRenderTarget(F),Y.updateRenderTargetMipmap(F),g.setRenderTarget(r)}(r,e,n),i&&G.viewport(w.copy(i)),0<r.length&&Et(r,e,n),0<a.length&&Et(a,e,n),0<t.length&&Et(t,e,n)}function Et(t,e,n){for(var i=!0===e.isScene?e.overrideMaterial:null,r=0,a=t.length;r<a;r++){var s=t[r],o=s.object,u=s.geometry,l=null===i?s.material:i;s=s.group,o.layers.test(n.layers)&&function(t,e,n,i,r,a){t.onBeforeRender(g,e,n,i,r,a),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(g,e,n,i,t,a),!0===r.transparent&&r.side===ht?(r.side=ct,r.needsUpdate=!0,g.renderBufferDirect(n,e,i,r,t,a),r.side=lt,r.needsUpdate=!0,g.renderBufferDirect(n,e,i,r,t,a),r.side=ht):g.renderBufferDirect(n,e,i,r,t,a),t.onAfterRender(g,e,n,i,r,a)}(o,e,n,u,l,s)}}function Ot(t,e,n){!0!==e.isScene&&(e=j);var i=X.get(t),r=f.state.lights,a=f.state.shadowsArray,s=r.state.version,o=tt.getParameters(t,r.state,a,e,n);a=tt.getProgramCacheKey(o);var u=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?J:q).get(t.envMap||i.environment),void 0===u&&(t.addEventListener(\"dispose\",St),u=new Map,i.programs=u);var l=u.get(a);if(void 0!==l){if(i.currentProgram===l&&i.lightsStateVersion===s)return Pt(t,o),l}else o.uniforms=tt.getUniforms(t),t.onBuild(n,o,g),t.onBeforeCompile(o,g),l=tt.acquireProgram(o,a),u.set(a,l),i.uniforms=o.uniforms;var c=i.uniforms;return(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(c.clippingPlanes=rt.uniform),Pt(t,o),i.needsLights=(t=t).isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights,i.lightsStateVersion=s,i.needsLights&&(c.ambientLightColor.value=r.state.ambient,c.lightProbe.value=r.state.probe,c.directionalLights.value=r.state.directional,c.directionalLightShadows.value=r.state.directionalShadow,c.spotLights.value=r.state.spot,c.spotLightShadows.value=r.state.spotShadow,c.rectAreaLights.value=r.state.rectArea,c.ltc_1.value=r.state.rectAreaLTC1,c.ltc_2.value=r.state.rectAreaLTC2,c.pointLights.value=r.state.point,c.pointLightShadows.value=r.state.pointShadow,c.hemisphereLights.value=r.state.hemi,c.directionalShadowMap.value=r.state.directionalShadowMap,c.directionalShadowMatrix.value=r.state.directionalShadowMatrix,c.spotShadowMap.value=r.state.spotShadowMap,c.spotShadowMatrix.value=r.state.spotShadowMatrix,c.pointShadowMap.value=r.state.pointShadowMap,c.pointShadowMatrix.value=r.state.pointShadowMatrix),r=l.getUniforms(),r=bu.seqWithValue(r.seq,c),i.currentProgram=l,i.uniformsList=r,l}function Pt(t,e){var n=X.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}kt.setAnimationLoop((function(t){Ct&&Ct(t)})),\"undefined\"!=typeof window&&kt.setContext(window),this.setAnimationLoop=function(t){Ct=t,xt.setAnimationLoop(t),null===t?kt.stop():kt.start()},xt.addEventListener(\"sessionstart\",Mt),xt.addEventListener(\"sessionend\",Tt),this.render=function(t,e){if((void 0===e||!0===e.isCamera)&&!0!==v){!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===xt.enabled&&!0===xt.isPresenting&&(!0===xt.cameraAutoUpdate&&xt.updateCamera(e),e=xt.getCamera()),!0===t.isScene&&t.onBeforeRender(g,t,e,_),f=it.get(t,p.length),f.init(),p.push(f),B.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),D.setFromProjectionMatrix(B),N=this.localClippingEnabled,R=rt.init(this.clippingPlanes,N,e),h=nt.get(t,d.length),h.init(),d.push(h),function t(e,n,i,r){if(!1!==e.visible){if(e.layers.test(n.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||D.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);var a=$.update(e),s=e.material;s.visible&&h.push(e,a,s,i,z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==H.render.frame&&(e.skeleton.update(),e.skeleton.frame=H.render.frame),!e.frustumCulled||D.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);var o=$.update(e),u=e.material;if(Array.isArray(u))for(var l=o.groups,c=0,d=l.length;c<d;c++){var p=l[c],g=u[p.materialIndex];g&&g.visible&&h.push(e,o,g,i,z.z,p)}else u.visible&&h.push(e,o,u,i,z.z,null)}for(var v=e.children,m=0,y=v.length;m<y;m++)t(v[m],n,i,r)}}(t,e,0,g.sortObjects),h.finish(),!0===g.sortObjects&&h.sort(A,E),!0===R&&rt.beginShadows();var n=f.state.shadowsArray;if(at.render(n,t,e),!0===R&&rt.endShadows(),!0===this.info.autoReset&&this.info.reset(),st.render(h,t),f.setupLights(g.physicallyCorrectLights),e.isArrayCamera)for(var i=e.cameras,r=0,a=i.length;r<a;r++){var s=i[r];At(h,t,s,s.viewport)}else At(h,t,e);null!==_&&(Y.updateMultisampleRenderTarget(_),Y.updateRenderTargetMipmap(_)),!0===t.isScene&&t.onAfterRender(g,t,e),G.buffers.depth.setTest(!0),G.buffers.depth.setMask(!0),G.buffers.color.setMask(!0),G.setPolygonOffset(!1),pt.resetDefaultState(),x=-1,b=null,p.pop(),f=0<p.length?p[p.length-1]:null,d.pop(),h=0<d.length?d[d.length-1]:null}},this.getActiveCubeFace=function(){return m},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(t,e,n){X.get(t.texture).__webglTexture=e,X.get(t.depthTexture).__webglTexture=n;var i=X.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||t.useRenderToTexture&&(t.useRenderToTexture=!1,t.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(t,e){var n=X.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_=t,m=e,y=n;var i,r,a=!0;t&&(void 0!==(i=X.get(t)).__useDefaultFramebuffer?(G.bindFramebuffer(36160,null),a=!1):void 0===i.__webglFramebuffer?Y.setupRenderTarget(t):i.__hasExternalTextures&&Y.rebindTextures(t,X.get(t.texture).__webglTexture,X.get(t.depthTexture).__webglTexture));var s=null,o=!1,u=!1;if(C=t?(((r=t.texture).isDataTexture3D||r.isDataTexture2DArray)&&(u=!0),r=X.get(t).__webglFramebuffer,t.isWebGLCubeRenderTarget?(s=r[e],o=!0):s=t.useRenderbuffer?X.get(t).__webglMultisampledFramebuffer:r,w.copy(t.viewport),S.copy(t.scissor),t.scissorTest):(w.copy(O).multiplyScalar(k).floor(),S.copy(P).multiplyScalar(k).floor(),I),G.bindFramebuffer(36160,s)&&W.drawBuffers&&a){var l=!1;if(t)if(t.isWebGLMultipleRenderTargets){var c=t.texture;if(L.length!==c.length||36064!==L[0]){for(var h=0,f=c.length;h<f;h++)L[h]=36064+h;L.length=c.length,l=!0}}else 1===L.length&&36064===L[0]||(L[0]=36064,L.length=1,l=!0);else 1===L.length&&1029===L[0]||(L[0]=1029,L.length=1,l=!0);l&&(W.isWebGL2?gt.drawBuffers(L):V.get(\"WEBGL_draw_buffers\").drawBuffersWEBGL(L))}G.viewport(w),G.scissor(S),G.setScissorTest(C),o?(r=X.get(t.texture),gt.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)):u&&(t=X.get(t.texture),e=e||0,gt.framebufferTextureLayer(36160,36064,t.__webglTexture,n||0,e)),x=-1},this.readRenderTargetPixels=function(t,e,n,i,r,a,s){if(t&&t.isWebGLRenderTarget){var o=X.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){G.bindFramebuffer(36160,o);try{var u=t.texture,l=u.format,c=u.type;if(l!==Le&&dt.convert(l)!==gt.getParameter(35739))return;var h=c===Te&&(V.has(\"EXT_color_buffer_half_float\")||W.isWebGL2&&V.has(\"EXT_color_buffer_float\"));if(!(c===_e||dt.convert(c)===gt.getParameter(35738)||c===Me&&(W.isWebGL2||V.has(\"OES_texture_float\")||V.has(\"WEBGL_color_buffer_float\"))||h))return;36053===gt.checkFramebufferStatus(36160)&&0<=e&&e<=t.width-i&&0<=n&&n<=t.height-r&&gt.readPixels(e,n,i,r,dt.convert(l),dt.convert(c),a)}finally{var f=null!==_?X.get(_).__webglFramebuffer:null;G.bindFramebuffer(36160,f)}}}},this.copyFramebufferToTexture=function(t,e){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0===e.isFramebufferTexture&&(i=Math.pow(2,-r),n=Math.floor(e.image.width*i),i=Math.floor(e.image.height*i),Y.setTexture2D(e,0),gt.copyTexSubImage2D(3553,r,0,0,t.x,t.y,n,i),G.unbindTexture())},this.copyTextureToTexture=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e.image.width,a=e.image.height,s=dt.convert(n.format),o=dt.convert(n.type);Y.setTexture2D(n,0),gt.pixelStorei(37440,n.flipY),gt.pixelStorei(37441,n.premultiplyAlpha),gt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?gt.texSubImage2D(3553,i,t.x,t.y,r,a,s,o,e.image.data):e.isCompressedTexture?gt.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):gt.texSubImage2D(3553,i,t.x,t.y,s,o,e.image),0===i&&n.generateMipmaps&&gt.generateMipmap(3553),G.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!g.isWebGL1Renderer){var a,s=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,u=t.max.z-t.min.z+1,l=dt.convert(i.format),c=dt.convert(i.type);if(i.isDataTexture3D)Y.setTexture3D(i,0),a=32879;else{if(!i.isDataTexture2DArray)return;Y.setTexture2DArray(i,0),a=35866}gt.pixelStorei(37440,i.flipY),gt.pixelStorei(37441,i.premultiplyAlpha),gt.pixelStorei(3317,i.unpackAlignment);var h=gt.getParameter(3314),f=gt.getParameter(32878),d=gt.getParameter(3316),p=gt.getParameter(3315),v=gt.getParameter(32877),m=n.isCompressedTexture?n.mipmaps[0]:n.image;gt.pixelStorei(3314,m.width),gt.pixelStorei(32878,m.height),gt.pixelStorei(3316,t.min.x),gt.pixelStorei(3315,t.min.y),gt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isDataTexture3D?gt.texSubImage3D(a,r,e.x,e.y,e.z,s,o,u,l,c,m.data):n.isCompressedTexture?gt.compressedTexSubImage3D(a,r,e.x,e.y,e.z,s,o,u,l,m.data):gt.texSubImage3D(a,r,e.x,e.y,e.z,s,o,u,l,c,m),gt.pixelStorei(3314,h),gt.pixelStorei(32878,f),gt.pixelStorei(3316,d),gt.pixelStorei(3315,p),gt.pixelStorei(32877,v),0===r&&i.generateMipmaps&&gt.generateMipmap(a),G.unbindTexture()}},this.initTexture=function(t){Y.setTexture2D(t,0),G.unbindTexture()},this.resetState=function(){m=0,y=0,_=null,G.reset(),pt.reset()},\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:this}))}pl.prototype.isWebGLRenderer=!0;var gl=function(t){v(n,t);var e=m(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(pl);gl.prototype.isWebGL1Renderer=!0;var vl=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;y(this,t),this.name=\"\",this.color=new wa(e),this.density=n}return _(t,[{key:\"clone\",value:function(){return new t(this.color,this.density)}},{key:\"toJSON\",value:function(){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}}}]),t}();vl.prototype.isFogExp2=!0;var ml=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;y(this,t),this.name=\"\",this.color=new wa(e),this.near=n,this.far=i}return _(t,[{key:\"clone\",value:function(){return new t(this.color,this.near,this.far)}},{key:\"toJSON\",value:function(){return{type:\"Fog\",color:this.color.getHex(),near:this.near,far:this.far}}}]),t}();ml.prototype.isFog=!0;var yl=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this),t.type=\"Scene\",t.background=null,t.environment=null,t.fog=null,t.overrideMaterial=null,t.autoUpdate=!0,\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"observe\",{detail:g(t)})),t}return _(n,[{key:\"copy\",value:function(t,e){return f(d(n.prototype),\"copy\",this).call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}},{key:\"toJSON\",value:function(t){var e=f(d(n.prototype),\"toJSON\",this).call(this,t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}]),n}(na);yl.prototype.isScene=!0;var _l=function(){function t(e,n){y(this,t),this.array=e,this.stride=n,this.count=void 0!==e?e.length/n:0,this.usage=di,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Oi()}return _(t,[{key:\"onUploadCallback\",value:function(){}},{key:\"needsUpdate\",set:function(t){!0===t&&this.version++}},{key:\"setUsage\",value:function(t){return this.usage=t,this}},{key:\"copy\",value:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}},{key:\"copyAt\",value:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}},{key:\"set\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:\"clone\",value:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Oi()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer),t=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]);var e=new this.constructor(t,this.stride);return e.setUsage(this.usage),e}},{key:\"onUpload\",value:function(t){return this.onUploadCallback=t,this}},{key:\"toJSON\",value:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Oi()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),t}();_l.prototype.isInterleavedBuffer=!0;var xl=new tr,bl=function(){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];y(this,t),this.name=\"\",this.data=e,this.itemSize=n,this.offset=i,this.normalized=!0===r}return _(t,[{key:\"count\",get:function(){return this.data.count}},{key:\"array\",get:function(){return this.data.array}},{key:\"needsUpdate\",set:function(t){this.data.needsUpdate=t}},{key:\"applyMatrix4\",value:function(t){for(var e=0,n=this.data.count;e<n;e++)xl.x=this.getX(e),xl.y=this.getY(e),xl.z=this.getZ(e),xl.applyMatrix4(t),this.setXYZ(e,xl.x,xl.y,xl.z);return this}},{key:\"applyNormalMatrix\",value:function(t){for(var e=0,n=this.count;e<n;e++)xl.x=this.getX(e),xl.y=this.getY(e),xl.z=this.getZ(e),xl.applyNormalMatrix(t),this.setXYZ(e,xl.x,xl.y,xl.z);return this}},{key:\"transformDirection\",value:function(t){for(var e=0,n=this.count;e<n;e++)xl.x=this.getX(e),xl.y=this.getY(e),xl.z=this.getZ(e),xl.transformDirection(t),this.setXYZ(e,xl.x,xl.y,xl.z);return this}},{key:\"setX\",value:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}},{key:\"setY\",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}},{key:\"setZ\",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}},{key:\"setW\",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}},{key:\"getX\",value:function(t){return this.data.array[t*this.data.stride+this.offset]}},{key:\"getY\",value:function(t){return this.data.array[t*this.data.stride+this.offset+1]}},{key:\"getZ\",value:function(t){return this.data.array[t*this.data.stride+this.offset+2]}},{key:\"getW\",value:function(t){return this.data.array[t*this.data.stride+this.offset+3]}},{key:\"setXY\",value:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}},{key:\"setXYZ\",value:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}},{key:\"setXYZW\",value:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}},{key:\"clone\",value:function(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new t(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);for(var n=[],i=0;i<this.count;i++)for(var r=i*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[r+a]);return new Ta(new this.array.constructor(n),this.itemSize,this.normalized)}},{key:\"toJSON\",value:function(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}]),t}();bl.prototype.isInterleavedBufferAttribute=!0;var wl,Sl=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"SpriteMaterial\",i.color=new wa(16777215),i.map=null,i.alphaMap=null,i.rotation=0,i.sizeAttenuation=!0,i.transparent=!0,i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}]),n}(ga);Sl.prototype.isSpriteMaterial=!0;var Cl=new tr,Ml=new tr,Tl=new tr,kl=new Bi,Al=new Bi,El=new Pr,Ol=new tr,Pl=new tr,Il=new tr,Ll=new Bi,Dl=new Bi,Rl=new Bi,Nl=function(t){v(n,t);var e=m(n);function n(t){var i,r;return y(this,n),i=e.call(this),i.type=\"Sprite\",void 0===wl&&(wl=new Ga,r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new _l(r,5),wl.setIndex([0,1,2,0,2,3]),wl.setAttribute(\"position\",new bl(r,3,0,!1)),wl.setAttribute(\"uv\",new bl(r,2,3,!1))),i.geometry=wl,i.material=void 0!==t?t:new Sl,i.center=new Bi(.5,.5),i}return _(n,[{key:\"raycast\",value:function(t,e){var n,i;t.camera,Ml.setFromMatrixScale(this.matrixWorld),El.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Tl.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ml.multiplyScalar(-Tl.z),0!==(r=this.material.rotation)&&(i=Math.cos(r),n=Math.sin(r));var r=this.center;Fl(Ol.set(-.5,-.5,0),Tl,r,Ml,n,i),Fl(Pl.set(.5,-.5,0),Tl,r,Ml,n,i),Fl(Il.set(.5,.5,0),Tl,r,Ml,n,i),Ll.set(0,0),Dl.set(1,0),Rl.set(1,1),null===t.ray.intersectTriangle(Ol,Pl,Il,!1,Cl)&&(Fl(Pl.set(-.5,.5,0),Tl,r,Ml,n,i),Dl.set(0,1),null===t.ray.intersectTriangle(Ol,Il,Pl,!1,Cl))||(r=t.ray.origin.distanceTo(Cl))<t.near||r>t.far||e.push({distance:r,point:Cl.clone(),uv:da.getUV(Cl,Ol,Pl,Il,Ll,Dl,Rl,new Bi),face:null,object:this})}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}]),n}(na);function Fl(t,e,n,i,r,a){kl.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Al.x=a*kl.x-r*kl.y,Al.y=r*kl.x+a*kl.y):Al.copy(kl),t.copy(e),t.x+=Al.x,t.y+=Al.y,t.applyMatrix4(El)}Nl.prototype.isSprite=!0;var Bl=new tr,zl=new tr,jl=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this),t._currentLevel=0,t.type=\"LOD\",Object.defineProperties(g(t),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),t.autoUpdate=!0,t}return _(n,[{key:\"copy\",value:function(t){f(d(n.prototype),\"copy\",this).call(this,t,!1);for(var e=t.levels,i=0,r=e.length;i<r;i++){var a=e[i];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=t.autoUpdate,this}},{key:\"addLevel\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e=Math.abs(e);var n,i=this.levels;for(n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this}},{key:\"getCurrentLevel\",value:function(){return this._currentLevel}},{key:\"getObjectForDistance\",value:function(t){var e=this.levels;if(0<e.length){var n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null}},{key:\"raycast\",value:function(t,e){var n;0<this.levels.length&&(Bl.setFromMatrixPosition(this.matrixWorld),n=t.ray.origin.distanceTo(Bl),this.getObjectForDistance(n).raycast(t,e))}},{key:\"update\",value:function(t){var e=this.levels;if(1<e.length){Bl.setFromMatrixPosition(t.matrixWorld),zl.setFromMatrixPosition(this.matrixWorld);var n,i,r=Bl.distanceTo(zl)/t.zoom;for(e[0].object.visible=!0,n=1,i=e.length;n<i&&r>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(this._currentLevel=n-1;n<i;n++)e[n].object.visible=!1}}},{key:\"toJSON\",value:function(t){var e=f(d(n.prototype),\"toJSON\",this).call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var i=this.levels,r=0,a=i.length;r<a;r++){var s=i[r];e.object.levels.push({object:s.object.uuid,distance:s.distance})}return e}}]),n}(na),Ul=new tr,Vl=new Ji,Wl=new Ji,Gl=new tr,Hl=new Pr,Xl=function(t){v(n,t);var e=m(n);function n(t,i){var r;return y(this,n),r=e.call(this,t,i),r.type=\"SkinnedMesh\",r.bindMode=\"attached\",r.bindMatrix=new Pr,r.bindMatrixInverse=new Pr,r}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}},{key:\"bind\",value:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}},{key:\"pose\",value:function(){this.skeleton.pose()}},{key:\"normalizeSkinWeights\",value:function(){for(var t=new Ji,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!=1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}},{key:\"updateMatrixWorld\",value:function(t){f(d(n.prototype),\"updateMatrixWorld\",this).call(this,t),\"attached\"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():\"detached\"===this.bindMode&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}},{key:\"boneTransform\",value:function(t,e){var n=this.skeleton,i=this.geometry;Vl.fromBufferAttribute(i.attributes.skinIndex,t),Wl.fromBufferAttribute(i.attributes.skinWeight,t),Ul.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var r=0;r<4;r++){var a,s=Wl.getComponent(r);0!==s&&(a=Vl.getComponent(r),Hl.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(Gl.copy(Ul).applyMatrix4(Hl),s))}return e.applyMatrix4(this.bindMatrixInverse)}}]),n}(us);Xl.prototype.isSkinnedMesh=!0;var Yl=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this),t.type=\"Bone\",t}return _(n)}(na);Yl.prototype.isBone=!0;var ql=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:le,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:le,d=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return y(this,n),t=e.call(this,null,u,l,c,h,f,s,o,d,p),t.image={data:i,width:r,height:a},t.magFilter=h,t.minFilter=f,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return _(n)}(Yi);ql.prototype.isDataTexture=!0;var Jl=new Pr,Zl=new Pr,Kl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];y(this,t),this.uuid=Oi(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return _(t,[{key:\"init\",value:function(){var t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Pr)}}},{key:\"calculateInverses\",value:function(){for(var t=this.boneInverses.length=0,e=this.bones.length;t<e;t++){var n=new Pr;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:\"pose\",value:function(){for(var t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(var i=0,r=this.bones.length;i<r;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:\"update\",value:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=t.length;r<a;r++){var s=t[r]?t[r].matrixWorld:Zl;Jl.multiplyMatrices(s,e[r]),Jl.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}},{key:\"clone\",value:function(){return new t(this.bones,this.boneInverses)}},{key:\"computeBoneTexture\",value:function(){var t=Ri(t=Math.sqrt(4*this.bones.length));t=Math.max(t,4);var e=new Float32Array(t*t*4);e.set(this.boneMatrices);var n=new ql(e,t,t,Le,Me);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}},{key:\"getBoneByName\",value:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}},{key:\"dispose\",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:\"fromJSON\",value:function(t,e){this.uuid=t.uuid;for(var n=0,i=t.bones.length;n<i;n++){var r=t.bones[n],a=e[r];void 0===a&&(a=new Yl),this.bones.push(a),this.boneInverses.push((new Pr).fromArray(t.boneInverses[n]))}return this.init(),this}},{key:\"toJSON\",value:function(){var t={metadata:{version:4.5,type:\"Skeleton\",generator:\"Skeleton.toJSON\"},bones:[],boneInverses:[]};t.uuid=this.uuid;for(var e=this.bones,n=this.boneInverses,i=0,r=e.length;i<r;i++){var a=e[i];t.bones.push(a.uuid);var s=n[i];t.boneInverses.push(s.toArray())}return t}}]),t}(),Ql=function(t){v(n,t);var e=m(n);function n(t,i,r){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return y(this,n),\"number\"==typeof r&&(s=r,r=!1),a=e.call(this,t,i,r),a.meshPerAttribute=s,a}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}]),n}(Ta);Ql.prototype.isInstancedBufferAttribute=!0;var $l=new Pr,tc=new Pr,ec=[],nc=new us,ic=function(t){v(n,t);var e=m(n);function n(t,i,r){var a;return y(this,n),a=e.call(this,t,i),a.instanceMatrix=new Ql(new Float32Array(16*r),16),a.instanceColor=null,a.count=r,a.frustumCulled=!1,a}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}},{key:\"getColorAt\",value:function(t,e){e.fromArray(this.instanceColor.array,3*t)}},{key:\"getMatrixAt\",value:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)}},{key:\"raycast\",value:function(t,e){var n=this.matrixWorld,i=this.count;if(nc.geometry=this.geometry,nc.material=this.material,void 0!==nc.material)for(var r=0;r<i;r++){this.getMatrixAt(r,$l),tc.multiplyMatrices(n,$l),nc.matrixWorld=tc,nc.raycast(t,ec);for(var a=0,s=ec.length;a<s;a++){var o=ec[a];o.instanceId=r,o.object=this,e.push(o)}ec.length=0}}},{key:\"setColorAt\",value:function(t,e){null===this.instanceColor&&(this.instanceColor=new Ql(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}},{key:\"setMatrixAt\",value:function(t,e){e.toArray(this.instanceMatrix.array,16*t)}},{key:\"updateMorphTargets\",value:function(){}},{key:\"dispose\",value:function(){this.dispatchEvent({type:\"dispose\"})}}]),n}(us);ic.prototype.isInstancedMesh=!0;var rc=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"LineBasicMaterial\",i.color=new wa(16777215),i.linewidth=1,i.linecap=\"round\",i.linejoin=\"round\",i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}]),n}(ga);rc.prototype.isLineBasicMaterial=!0;var ac=new tr,sc=new tr,oc=new Pr,uc=new Or,lc=new wr,cc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ga,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rc;return y(this,n),t=e.call(this),t.type=\"Line\",t.geometry=i,t.material=r,t.updateMorphTargets(),t}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:\"computeLineDistances\",value:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)ac.fromBufferAttribute(e,i-1),sc.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=ac.distanceTo(sc);t.setAttribute(\"lineDistance\",new Ra(n,1))}}else t.isGeometry;return this}},{key:\"raycast\",value:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),lc.copy(n.boundingSphere),lc.applyMatrix4(i),lc.radius+=r,!1!==t.ray.intersectsSphere(lc)){oc.copy(i).invert(),uc.copy(t.ray).applyMatrix4(oc);var s=(r/=(this.scale.x+this.scale.y+this.scale.z)/3)*r,o=new tr,u=new tr,l=new tr,c=new tr,h=this.isLineSegments?2:1;if(n.isBufferGeometry){var f,d=n.index,p=n.attributes.position;if(null!==d)for(var g=Math.max(0,a.start),v=Math.min(d.count,a.start+a.count)-1;g<v;g+=h){var m=d.getX(g),y=d.getX(g+1);o.fromBufferAttribute(p,m),u.fromBufferAttribute(p,y),s<uc.distanceSqToSegment(o,u,c,l)||(c.applyMatrix4(this.matrixWorld),(y=t.ray.origin.distanceTo(c))<t.near||y>t.far||e.push({distance:y,point:l.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(var _=Math.max(0,a.start),x=Math.min(p.count,a.start+a.count)-1;_<x;_+=h)o.fromBufferAttribute(p,_),u.fromBufferAttribute(p,_+1),s<uc.distanceSqToSegment(o,u,c,l)||(c.applyMatrix4(this.matrixWorld),(f=t.ray.origin.distanceTo(c))<t.near||f>t.far||e.push({distance:f,point:l.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this}))}else n.isGeometry}}},{key:\"updateMorphTargets\",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(0<n.length){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else void 0!==(t=t.morphTargets)&&t.length}}]),n}(na);cc.prototype.isLine=!0;var hc=new tr,fc=new tr,dc=function(t){v(n,t);var e=m(n);function n(t,i){var r;return y(this,n),r=e.call(this,t,i),r.type=\"LineSegments\",r}return _(n,[{key:\"computeLineDistances\",value:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)hc.fromBufferAttribute(e,i),fc.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+hc.distanceTo(fc);t.setAttribute(\"lineDistance\",new Ra(n,1))}}else t.isGeometry;return this}}]),n}(cc);dc.prototype.isLineSegments=!0;var pc=function(t){v(n,t);var e=m(n);function n(t,i){var r;return y(this,n),r=e.call(this,t,i),r.type=\"LineLoop\",r}return _(n)}(cc);pc.prototype.isLineLoop=!0;var gc=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"PointsMaterial\",i.color=new wa(16777215),i.map=null,i.alphaMap=null,i.size=1,i.sizeAttenuation=!0,i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}]),n}(ga);gc.prototype.isPointsMaterial=!0;var vc=new Pr,mc=new Or,yc=new wr,_c=new tr,xc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ga,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gc;return y(this,n),t=e.call(this),t.type=\"Points\",t.geometry=i,t.material=r,t.updateMorphTargets(),t}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:\"raycast\",value:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),yc.copy(n.boundingSphere),yc.applyMatrix4(i),yc.radius+=r,!1!==t.ray.intersectsSphere(yc)){vc.copy(i).invert(),mc.copy(t.ray).applyMatrix4(vc);var s=(r/=(this.scale.x+this.scale.y+this.scale.z)/3)*r;if(n.isBufferGeometry){var o=n.index,u=n.attributes.position;if(null!==o)for(var l=Math.max(0,a.start),c=Math.min(o.count,a.start+a.count);l<c;l++){var h=o.getX(l);_c.fromBufferAttribute(u,h),bc(_c,h,s,i,t,e,this)}else for(var f=Math.max(0,a.start),d=Math.min(u.count,a.start+a.count);f<d;f++)_c.fromBufferAttribute(u,f),bc(_c,f,s,i,t,e,this)}}}},{key:\"updateMorphTargets\",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(0<n.length){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else void 0!==(t=t.morphTargets)&&t.length}}]),n}(na);function bc(t,e,n,i,r,a,s){var o=mc.distanceSqToPoint(t);if(o<n){var u=new tr;mc.closestPointToPoint(t,u),u.applyMatrix4(i),i=r.ray.origin.distanceTo(u),i<r.near||i>r.far||a.push({distance:i,distanceToRay:Math.sqrt(o),point:u,index:e,face:null,object:s})}}xc.prototype.isPoints=!0;var wc=function(t){v(n,t);var e=m(n);function n(t,i,r,a,s,o,u,l,c){var h;y(this,n),h=e.call(this,t,i,r,a,s,o,u,l,c),h.format=void 0!==u?u:Ie,h.minFilter=void 0!==o?o:pe,h.magFilter=void 0!==s?s:pe,h.generateMipmaps=!1;var f=g(h);return\"requestVideoFrameCallback\"in t&&t.requestVideoFrameCallback((function e(){f.needsUpdate=!0,t.requestVideoFrameCallback(e)})),h}return _(n,[{key:\"clone\",value:function(){return new this.constructor(this.image).copy(this)}},{key:\"update\",value:function(){var t=this.image;0==\"requestVideoFrameCallback\"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Yi);wc.prototype.isVideoTexture=!0;var Sc=function(t){v(n,t);var e=m(n);function n(t,i,r){var a;return y(this,n),a=e.call(this,{width:t,height:i}),a.format=r,a.magFilter=le,a.minFilter=le,a.generateMipmaps=!1,a.needsUpdate=!0,a}return _(n)}(Yi);Sc.prototype.isFramebufferTexture=!0;var Cc=function(t){v(n,t);var e=m(n);function n(t,i,r,a,s,o,u,l,c,h,f,d){var p;return y(this,n),p=e.call(this,null,o,u,l,c,h,a,s,f,d),p.image={width:i,height:r},p.mipmaps=t,p.flipY=!1,p.generateMipmaps=!1,p}return _(n)}(Yi);Cc.prototype.isCompressedTexture=!0;var Mc=function(t){v(n,t);var e=m(n);function n(t,i,r,a,s,o,u,l,c){var h;return y(this,n),h=e.call(this,t,i,r,a,s,o,u,l,c),h.needsUpdate=!0,h}return _(n)}(Yi);Mc.prototype.isCanvasTexture=!0;var Tc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;y(this,n),t=e.call(this),t.type=\"CircleGeometry\",t.parameters={radius:i,segments:r,thetaStart:a,thetaLength:s},r=Math.max(3,r);var o=[],u=[],l=[],c=[],h=new tr,f=new Bi;u.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(var d=0,p=3;d<=r;d++,p+=3){var g=a+d/r*s;h.x=i*Math.cos(g),h.y=i*Math.sin(g),u.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(u[p]/i+1)/2,f.y=(u[p+1]/i+1)/2,c.push(f.x,f.y)}for(var v=1;v<=r;v++)o.push(v,v+1,0);return t.setIndex(o),t.setAttribute(\"position\",new Ra(u,3)),t.setAttribute(\"normal\",new Ra(l,3)),t.setAttribute(\"uv\",new Ra(c,2)),t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.radius,t.segments,t.thetaStart,t.thetaLength)}}]),n}(Ga),kc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;y(this,n),t=e.call(this),t.type=\"CylinderGeometry\",t.parameters={radiusTop:i,radiusBottom:r,height:a,radialSegments:s,heightSegments:o,openEnded:u,thetaStart:l,thetaLength:c};var h=g(t);s=Math.floor(s),o=Math.floor(o);var f=[],d=[],p=[],v=[],m=0,_=[],x=a/2,b=0;function w(t){for(var e=m,n=new Bi,a=new tr,o=0,u=!0===t?i:r,g=!0===t?1:-1,y=1;y<=s;y++)d.push(0,x*g,0),p.push(0,g,0),v.push(.5,.5),m++;for(var _=m,w=0;w<=s;w++){var S=w/s*c+l,C=Math.cos(S);S=Math.sin(S),a.x=u*S,a.y=x*g,a.z=u*C,d.push(a.x,a.y,a.z),p.push(0,g,0),n.x=.5*C+.5,n.y=.5*S*g+.5,v.push(n.x,n.y),m++}for(var M=0;M<s;M++){var T=e+M,k=_+M;!0===t?f.push(k,k+1,T):f.push(k+1,k,T),o+=3}h.addGroup(b,o,!0===t?1:2),b+=o}return function(){for(var t=new tr,e=new tr,n=0,u=(r-i)/a,g=0;g<=o;g++){for(var y=[],w=g/o,S=w*(r-i)+i,C=0;C<=s;C++){var M=C/s,T=M*c+l,k=Math.sin(T);T=Math.cos(T),e.x=S*k,e.y=-w*a+x,e.z=S*T,d.push(e.x,e.y,e.z),t.set(k,u,T).normalize(),p.push(t.x,t.y,t.z),v.push(M,1-w),y.push(m++)}_.push(y)}for(var A=0;A<s;A++)for(var E=0;E<o;E++){var O=_[E][A],P=_[E+1][A],I=_[E+1][A+1],L=_[E][A+1];f.push(O,P,L),f.push(P,I,L),n+=6}h.addGroup(b,n,0),b+=n}(),!1===u&&(0<i&&w(!0),0<r&&w(!1)),t.setIndex(f),t.setAttribute(\"position\",new Ra(d,3)),t.setAttribute(\"normal\",new Ra(p,3)),t.setAttribute(\"uv\",new Ra(v,2)),t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}]),n}(Ga),Ac=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return y(this,n),t=e.call(this,0,i,r,a,s,o,u,l),t.type=\"ConeGeometry\",t.parameters={radius:i,height:r,radialSegments:a,heightSegments:s,openEnded:o,thetaStart:u,thetaLength:l},t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}]),n}(kc),Ec=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;y(this,n),t=e.call(this),t.type=\"PolyhedronGeometry\",t.parameters={vertices:i,indices:r,radius:a,detail:s};var o=[],u=[];function l(t){o.push(t.x,t.y,t.z)}function c(t,e){t*=3,e.x=i[0+t],e.y=i[1+t],e.z=i[2+t]}function h(t,e,n,i){i<0&&1===t.x&&(u[e]=t.x-1),0===n.x&&0===n.z&&(u[e]=i/2/Math.PI+.5)}function f(t){return Math.atan2(t.z,-t.x)}return function(t){for(var e=new tr,n=new tr,i=new tr,a=0;a<r.length;a+=3)c(r[a+0],e),c(r[a+1],n),c(r[a+2],i),function(t,e,n,i){for(var r=i+1,a=[],s=0;s<=r;s++){a[s]=[];for(var o=t.clone().lerp(n,s/r),u=e.clone().lerp(n,s/r),c=r-s,h=0;h<=c;h++)a[s][h]=0===h&&s===r?o:o.clone().lerp(u,h/c)}for(var f=0;f<r;f++)for(var d=0;d<2*(r-f)-1;d++){var p=Math.floor(d/2);d%2==0?(l(a[f][p+1]),l(a[f+1][p]),l(a[f][p])):(l(a[f][p+1]),l(a[f+1][p+1]),l(a[f+1][p]))}}(e,n,i,t)}(s),function(t){for(var e=new tr,n=0;n<o.length;n+=3)e.x=o[n+0],e.y=o[n+1],e.z=o[n+2],e.normalize().multiplyScalar(t),o[n+0]=e.x,o[n+1]=e.y,o[n+2]=e.z}(a),function(){for(var t=new tr,e=0;e<o.length;e+=3){t.x=o[e+0],t.y=o[e+1],t.z=o[e+2];var n=f(t)/2/Math.PI+.5,i=function(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}(t)/Math.PI+.5;u.push(n,1-i)}(function(){for(var t=new tr,e=new tr,n=new tr,i=new tr,r=new Bi,a=new Bi,s=new Bi,l=0,c=0;l<o.length;l+=9,c+=6){t.set(o[l+0],o[l+1],o[l+2]),e.set(o[l+3],o[l+4],o[l+5]),n.set(o[l+6],o[l+7],o[l+8]),r.set(u[c+0],u[c+1]),a.set(u[c+2],u[c+3]),s.set(u[c+4],u[c+5]),i.copy(t).add(e).add(n).divideScalar(3);var d=f(i);h(r,c+0,t,d),h(a,c+2,e,d),h(s,c+4,n,d)}})(),function(){for(var t=0;t<u.length;t+=6){var e=u[t+0],n=u[t+2],i=u[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);.9<r&&a<.1&&(e<.2&&(u[t+0]+=1),n<.2&&(u[t+2]+=1),i<.2&&(u[t+4]+=1))}}()}(),t.setAttribute(\"position\",new Ra(o,3)),t.setAttribute(\"normal\",new Ra(o.slice(),3)),t.setAttribute(\"uv\",new Ra(u,2)),0===s?t.computeVertexNormals():t.normalizeNormals(),t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.vertices,t.indices,t.radius,t.details)}}]),n}(Ga),Oc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;y(this,n);var a=(1+Math.sqrt(5))/2,s=1/a;return t=e.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-a,0,-s,a,0,s,-a,0,s,a,-s,-a,0,-s,a,0,s,-a,0,s,a,0,-a,0,-s,a,0,-s,-a,0,s,a,0,s],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],i,r),t.type=\"DodecahedronGeometry\",t.parameters={radius:i,detail:r},t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.radius,t.detail)}}]),n}(Ec),Pc=new tr,Ic=new tr,Lc=new tr,Dc=new da,Rc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(y(this,n),t=e.call(this),t.type=\"EdgesGeometry\",t.parameters={geometry:i,thresholdAngle:r},null!==i){for(var a,s,o=Math.pow(10,4),u=Math.cos(Ai*r),l=i.getIndex(),c=i.getAttribute(\"position\"),f=(l||c).count,d=[0,0,0],p=[\"a\",\"b\",\"c\"],g=new Array(3),v={},m=[],_=0;_<f;_+=3){l?(d[0]=l.getX(_),d[1]=l.getX(_+1),d[2]=l.getX(_+2)):(d[0]=_,d[1]=_+1,d[2]=_+2);var x=Dc.a,b=Dc.b,w=Dc.c;if(x.fromBufferAttribute(c,d[0]),b.fromBufferAttribute(c,d[1]),w.fromBufferAttribute(c,d[2]),Dc.getNormal(Lc),g[0]=\"\".concat(Math.round(x.x*o),\",\").concat(Math.round(x.y*o),\",\")+Math.round(x.z*o),g[1]=\"\".concat(Math.round(b.x*o),\",\").concat(Math.round(b.y*o),\",\")+Math.round(b.z*o),g[2]=\"\".concat(Math.round(w.x*o),\",\").concat(Math.round(w.y*o),\",\")+Math.round(w.z*o),g[0]!==g[1]&&g[1]!==g[2]&&g[2]!==g[0])for(var S=0;S<3;S++){var C=(S+1)%3,M=g[S],T=g[C],k=Dc[p[S]],A=Dc[p[C]],E=M+\"_\"+T;(M=T+\"_\"+M)in v&&v[M]?(Lc.dot(v[M].normal)<=u&&(m.push(k.x,k.y,k.z),m.push(A.x,A.y,A.z)),v[M]=null):E in v||(v[E]={index0:d[S],index1:d[C],normal:Lc.clone()})}}for(var O in v){var P;v[O]&&(P=v[O],a=P.index0,s=P.index1,Pc.fromBufferAttribute(c,a),Ic.fromBufferAttribute(c,s),m.push(Pc.x,Pc.y,Pc.z),m.push(Ic.x,Ic.y,Ic.z))}t.setAttribute(\"position\",new Ra(m,3))}return h(t)}return _(n)}(Ga),Nc=function(){function t(){y(this,t),this.type=\"Curve\",this.arcLengthDivisions=200}return _(t,[{key:\"getPoint\",value:function(){return null}},{key:\"getPointAt\",value:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)}},{key:\"getPoints\",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}},{key:\"getSpacedPoints\",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}},{key:\"getLength\",value:function(){var t=this.getLengths();return t[t.length-1]}},{key:\"getLengths\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],i=this.getPoint(0),r=0;n.push(0);for(var a=1;a<=t;a++)e=this.getPoint(a/t),r+=e.distanceTo(i),n.push(r),i=e;return this.cacheArcLengths=n,n}},{key:\"updateArcLengths\",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:\"getUtoTmapping\",value:function(t,e){var n,i=this.getLengths(),r=0,a=i.length;n=e||t*i[a-1];for(var s,o=0,u=a-1;o<=u;)if(r=Math.floor(o+(u-o)/2),(s=i[r]-n)<0)o=r+1;else{if(!(0<s)){u=r;break}u=r-1}return r=u,i[r]===n?r/(a-1):(r+(e=(n-(e=i[r]))/((t=i[r+1])-e)))/(a-1)}},{key:\"getTangent\",value:function(t,e){var n=t-1e-4,i=t+1e-4;n<0&&(n=0),1<i&&(i=1);var r=this.getPoint(n);t=this.getPoint(i);var a=e||new(r.isVector2?Bi:tr);return a.copy(t).sub(r).normalize(),a}},{key:\"getTangentAt\",value:function(t,e){return t=this.getUtoTmapping(t),this.getTangent(t,e)}},{key:\"computeFrenetFrames\",value:function(t,e){for(var n=new tr,i=[],r=[],a=[],s=new tr,o=new Pr,u=0;u<=t;u++){var l=u/t;i[u]=this.getTangentAt(l,new tr)}r[0]=new tr,a[0]=new tr;var c,h=Number.MAX_VALUE,f=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);f<=h&&(h=f,n.set(1,0,0)),d<=h&&(h=d,n.set(0,1,0)),p<=h&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),a[0].crossVectors(i[0],r[0]);for(var g=1;g<=t;g++)r[g]=r[g-1].clone(),a[g]=a[g-1].clone(),s.crossVectors(i[g-1],i[g]),s.length()>Number.EPSILON&&(s.normalize(),c=Math.acos(Pi(i[g-1].dot(i[g]),-1,1)),r[g].applyMatrix4(o.makeRotationAxis(s,c))),a[g].crossVectors(i[g],r[g]);if(!0===e){var v=Math.acos(Pi(r[0].dot(r[t]),-1,1));v/=t,0<i[0].dot(s.crossVectors(r[0],r[t]))&&(v=-v);for(var m=1;m<=t;m++)r[m].applyMatrix4(o.makeRotationAxis(i[m],v*m)),a[m].crossVectors(i[m],r[m])}return{tangents:i,normals:r,binormals:a}}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},{key:\"toJSON\",value:function(){var t={metadata:{version:4.5,type:\"Curve\",generator:\"Curve.toJSON\"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}},{key:\"fromJSON\",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}]),t}(),Fc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return y(this,n),t=e.call(this),t.type=\"EllipseCurve\",t.aX=i,t.aY=r,t.xRadius=a,t.yRadius=s,t.aStartAngle=o,t.aEndAngle=u,t.aClockwise=l,t.aRotation=c,t}return _(n,[{key:\"getPoint\",value:function(t,e){for(var n=e||new Bi,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var s=this.aStartAngle+t*r,o=this.aX+this.xRadius*Math.cos(s),u=this.aY+this.yRadius*Math.sin(s);return 0!==this.aRotation&&(e=Math.cos(this.aRotation),a=Math.sin(this.aRotation),o=(t=o-this.aX)*e-(s=u-this.aY)*a+this.aX,u=t*a+s*e+this.aY),n.set(o,u)}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}},{key:\"fromJSON\",value:function(t){return f(d(n.prototype),\"fromJSON\",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}]),n}(Nc);Fc.prototype.isEllipseCurve=!0;var Bc=function(t){v(n,t);var e=m(n);function n(t,i,r,a,s,o){var u;return y(this,n),u=e.call(this,t,i,r,r,a,s,o),u.type=\"ArcCurve\",u}return _(n)}(Fc);function zc(){var t=0,e=0,n=0,i=0;function r(r,a,s,o){t=r,e=s,n=-3*r+3*a-2*s-o,i=2*r-2*a+s+o}return{initCatmullRom:function(t,e,n,i,a){r(e,n,a*(n-t),a*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,a,s,o){a=(e-t)/a-(n-t)/(a+s)+(n-e)/s,o=(n-e)/s-(i-e)/(s+o)+(i-n)/o,r(e,n,a*=s,o*=s)},calc:function(r){var a=r*r;return t+e*r+n*a+i*(a*r)}}}Bc.prototype.isArcCurve=!0;var jc=new tr,Vc=new zc,Wc=new zc,Gc=new zc,Hc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"centripetal\",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return y(this,n),t=e.call(this),t.type=\"CatmullRomCurve3\",t.points=i,t.closed=r,t.curveType=a,t.tension=s,t}return _(n,[{key:\"getPoint\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr,n=e,i=this.points;t=((e=i.length)-(this.closed?0:1))*t;var r,a,s=Math.floor(t),o=t-s;this.closed?s+=0<s?0:(Math.floor(Math.abs(s)/e)+1)*e:0===o&&s===e-1&&(s=e-2,o=1),r=this.closed||0<s?i[(s-1)%e]:(jc.subVectors(i[0],i[1]).add(i[0]),jc);var u=i[s%e],l=i[(s+1)%e];if(a=this.closed||s+2<e?i[(s+2)%e]:(jc.subVectors(i[e-1],i[e-2]).add(i[e-1]),jc),\"centripetal\"===this.curveType||\"chordal\"===this.curveType){e=\"chordal\"===this.curveType?.5:.25;var c=Math.pow(r.distanceToSquared(u),e),h=Math.pow(u.distanceToSquared(l),e),f=Math.pow(l.distanceToSquared(a),e);h<1e-4&&(h=1),c<1e-4&&(c=h),f<1e-4&&(f=h),Vc.initNonuniformCatmullRom(r.x,u.x,l.x,a.x,c,h,f),Wc.initNonuniformCatmullRom(r.y,u.y,l.y,a.y,c,h,f),Gc.initNonuniformCatmullRom(r.z,u.z,l.z,a.z,c,h,f)}else\"catmullrom\"===this.curveType&&(Vc.initCatmullRom(r.x,u.x,l.x,a.x,this.tension),Wc.initCatmullRom(r.y,u.y,l.y,a.y,this.tension),Gc.initCatmullRom(r.z,u.z,l.z,a.z,this.tension));return n.set(Vc.calc(o),Wc.calc(o),Gc.calc(o)),n}},{key:\"copy\",value:function(t){f(d(n.prototype),\"copy\",this).call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}},{key:\"fromJSON\",value:function(t){f(d(n.prototype),\"fromJSON\",this).call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push((new tr).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}]),n}(Nc);function Xc(t,e,n,i,r){var a=.5*(i-e);return(2*n-2*i+a+(e=.5*(r-n)))*(t*(r=t*t))+(-3*n+3*i-2*a-e)*r+a*t+n}function Yc(t,e,n,i){return(r=1-(r=t))*r*e+2*(1-t)*t*n+t*t*i;var r}function qc(t,e,n,i,r){return(a=1-(a=t))*a*a*e+3*(e=1-t)*e*t*n+3*(1-t)*t*t*i+t*t*t*r;var a}Hc.prototype.isCatmullRomCurve3=!0;var Jc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bi,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bi,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Bi,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Bi;return y(this,n),t=e.call(this),t.type=\"CubicBezierCurve\",t.v0=i,t.v1=r,t.v2=a,t.v3=s,t}return _(n,[{key:\"getPoint\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bi,n=e,i=this.v0,r=this.v1,a=this.v2;return e=this.v3,n.set(qc(t,i.x,r.x,a.x,e.x),qc(t,i.y,r.y,a.y,e.y)),n}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:\"fromJSON\",value:function(t){return f(d(n.prototype),\"fromJSON\",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(Nc);Jc.prototype.isCubicBezierCurve=!0;var Zc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tr,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new tr,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new tr;return y(this,n),t=e.call(this),t.type=\"CubicBezierCurve3\",t.v0=i,t.v1=r,t.v2=a,t.v3=s,t}return _(n,[{key:\"getPoint\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr,n=e,i=this.v0,r=this.v1,a=this.v2;return e=this.v3,n.set(qc(t,i.x,r.x,a.x,e.x),qc(t,i.y,r.y,a.y,e.y),qc(t,i.z,r.z,a.z,e.z)),n}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:\"fromJSON\",value:function(t){return f(d(n.prototype),\"fromJSON\",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(Nc);Zc.prototype.isCubicBezierCurve3=!0;var Kc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bi,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bi;return y(this,n),t=e.call(this),t.type=\"LineCurve\",t.v1=i,t.v2=r,t}return _(n,[{key:\"getPoint\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bi,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:\"getPointAt\",value:function(t,e){return this.getPoint(t,e)}},{key:\"getTangent\",value:function(t,e){var n=e||new Bi;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:\"fromJSON\",value:function(t){return f(d(n.prototype),\"fromJSON\",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Nc);Kc.prototype.isLineCurve=!0;var Qc=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tr,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr;return y(this,n),t=e.call(this),t.type=\"LineCurve3\",t.isLineCurve3=!0,t.v1=i,t.v2=r,t}return _(n,[{key:\"getPoint\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:\"getPointAt\",value:function(t,e){return this.getPoint(t,e)}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:\"fromJSON\",value:function(t){return f(d(n.prototype),\"fromJSON\",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Nc),$c=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bi,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bi,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Bi;return y(this,n),t=e.call(this),t.type=\"QuadraticBezierCurve\",t.v0=i,t.v1=r,t.v2=a,t}return _(n,[{key:\"getPoint\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bi,n=e,i=this.v0,r=this.v1;return e=this.v2,n.set(Yc(t,i.x,r.x,e.x),Yc(t,i.y,r.y,e.y)),n}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:\"fromJSON\",value:function(t){return f(d(n.prototype),\"fromJSON\",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Nc);$c.prototype.isQuadraticBezierCurve=!0;var th=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tr,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new tr;return y(this,n),t=e.call(this),t.type=\"QuadraticBezierCurve3\",t.v0=i,t.v1=r,t.v2=a,t}return _(n,[{key:\"getPoint\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr,n=e,i=this.v0,r=this.v1;return e=this.v2,n.set(Yc(t,i.x,r.x,e.x),Yc(t,i.y,r.y,e.y),Yc(t,i.z,r.z,e.z)),n}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:\"fromJSON\",value:function(t){return f(d(n.prototype),\"fromJSON\",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Nc);th.prototype.isQuadraticBezierCurve3=!0;var eh=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return y(this,n),t=e.call(this),t.type=\"SplineCurve\",t.points=i,t}return _(n,[{key:\"getPoint\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bi,n=e,i=this.points,r=(a=(i.length-1)*t)-(s=Math.floor(a)),a=(e=i[0===s?s:s-1],t=i[s],i[s>i.length-2?i.length-1:s+1]),s=i[s>i.length-3?i.length-1:s+2];return n.set(Xc(r,e.x,t.x,a.x,s.x),Xc(r,e.y,t.y,a.y,s.y)),n}},{key:\"copy\",value:function(t){f(d(n.prototype),\"copy\",this).call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push(r.clone())}return this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++){var r=this.points[e];t.points.push(r.toArray())}return t}},{key:\"fromJSON\",value:function(t){f(d(n.prototype),\"fromJSON\",this).call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push((new Bi).fromArray(r))}return this}}]),n}(Nc);eh.prototype.isSplineCurve=!0;var nh=Object.freeze({__proto__:null,ArcCurve:Bc,CatmullRomCurve3:Hc,CubicBezierCurve:Jc,CubicBezierCurve3:Zc,EllipseCurve:Fc,LineCurve:Kc,LineCurve3:Qc,QuadraticBezierCurve:$c,QuadraticBezierCurve3:th,SplineCurve:eh}),ih=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this),t.type=\"CurvePath\",t.curves=[],t.autoClose=!1,t}return _(n,[{key:\"add\",value:function(t){this.curves.push(t)}},{key:\"closePath\",value:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Kc(e,t))}},{key:\"getPoint\",value:function(t,e){for(var n=t*this.getLength(),i=this.getCurveLengths(),r=0;r<i.length;){if(i[r]>=n){var a=i[r]-n,s=this.curves[r],o=s.getLength();return s.getPointAt(0===o?0:1-a/o,e)}r++}return null}},{key:\"getLength\",value:function(){var t=this.getCurveLengths();return t[t.length-1]}},{key:\"updateArcLengths\",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:\"getCurveLengths\",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}},{key:\"getSpacedPoints\",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}},{key:\"getPoints\",value:function(){for(var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],s=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s),u=0;u<o.length;u++){var l=o[u];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:\"copy\",value:function(t){f(d(n.prototype),\"copy\",this).call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,i=this.curves.length;e<i;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t}},{key:\"fromJSON\",value:function(t){f(d(n.prototype),\"fromJSON\",this).call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var r=t.curves[e];this.curves.push((new nh[r.type]).fromJSON(r))}return this}}]),n}(Nc),rh=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"Path\",i.currentPoint=new Bi,t&&i.setFromPoints(t),i}return _(n,[{key:\"setFromPoints\",value:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}},{key:\"moveTo\",value:function(t,e){return this.currentPoint.set(t,e),this}},{key:\"lineTo\",value:function(t,e){var n=new Kc(this.currentPoint.clone(),new Bi(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}},{key:\"quadraticCurveTo\",value:function(t,e,n,i){return e=new $c(this.currentPoint.clone(),new Bi(t,e),new Bi(n,i)),this.curves.push(e),this.currentPoint.set(n,i),this}},{key:\"bezierCurveTo\",value:function(t,e,n,i,r,a){return i=new Jc(this.currentPoint.clone(),new Bi(t,e),new Bi(n,i),new Bi(r,a)),this.curves.push(i),this.currentPoint.set(r,a),this}},{key:\"splineThru\",value:function(t){var e=[this.currentPoint.clone()].concat(t);return e=new eh(e),this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this}},{key:\"arc\",value:function(t,e,n,i,r,a){var s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(t+s,e+o,n,i,r,a),this}},{key:\"absarc\",value:function(t,e,n,i,r,a){return this.absellipse(t,e,n,n,i,r,a),this}},{key:\"ellipse\",value:function(t,e,n,i,r,a,s,o){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+u,e+l,n,i,r,a,s,o),this}},{key:\"absellipse\",value:function(t,e,n,i,r,a,s,o){var u=new Fc(t,e,n,i,r,a,s,o);if(0<this.curves.length){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}return this.curves.push(u),o=u.getPoint(1),this.currentPoint.copy(o),this}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.currentPoint.copy(t.currentPoint),this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return t.currentPoint=this.currentPoint.toArray(),t}},{key:\"fromJSON\",value:function(t){return f(d(n.prototype),\"fromJSON\",this).call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}]),n}(ih),ah=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this,t),i.uuid=Oi(),i.type=\"Shape\",i.holes=[],i}return _(n,[{key:\"getPointsHoles\",value:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}},{key:\"extractPoints\",value:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}},{key:\"copy\",value:function(t){f(d(n.prototype),\"copy\",this).call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var r=t.holes[e];this.holes.push(r.clone())}return this}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t}},{key:\"fromJSON\",value:function(t){f(d(n.prototype),\"fromJSON\",this).call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var r=t.holes[e];this.holes.push((new rh).fromJSON(r))}return this}}]),n}(rh),sh=function(t,e){var n,i,r,a,s,o,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=e&&e.length,h=c?e[0]*l:t.length,f=oh(t,0,h,l,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(t,e,n,i){var r,a,s,o,u,l=[];for(r=0,a=e.length;r<a;r++)s=e[r]*i,o=r<a-1?e[r+1]*i:t.length,u=oh(t,s,o,i,!1),u===u.next&&(u.steiner=!0),l.push(function(t){for(var e=t,n=t;(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next,e!==t;);return n}(u));for(l.sort(ch),r=0;r<l.length;r++)!function(t,e){(e=function(t,e){var n,i=e,r=t.x,a=t.y,s=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var o=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=r&&o>s){if((s=o)===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}}while(i=i.next,i!==e);if(!n)return null;if(r===s)return n;var u,l=n,c=n.x,h=n.y,f=1/0;for(i=n;r>=i.x&&i.x>=c&&r!==i.x&&fh(a<h?r:s,a,c,h,a<h?s:r,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(r-i.x),yh(i,t)&&(u<f||u===f&&(i.x>n.x||i.x===n.x&&function(t,e){return dh(t.prev,t,e.prev)<0&&dh(e.next,t,t.next)<0}(n,i)))&&(n=i,f=u)),i=i.next,i!==l;);return n}(t,e))&&(t=_h(e,t),uh(e,e.next),uh(t,t.next))}(l[r],n),n=uh(n,n.next);return n}(t,e,f,l)),t.length>80*l){n=r=t[0],i=a=t[1];for(var p=l;p<h;p+=l)s=t[p],o=t[p+1],s<n&&(n=s),o<i&&(i=o),s>r&&(r=s),o>a&&(a=o);u=Math.max(r-n,a-i),u=0!==u?1/u:0}return lh(f,d,l,n,i,u),d};function oh(t,e,n,i,r){var a,s;if(r===0<function(t,e,n,i){for(var r=0,a=e,s=n-i;a<n;a+=i)r+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return r}(t,e,n,i))for(a=e;a<n;a+=i)s=xh(a,t[a],t[a+1],s);else for(a=n-i;a>=e;a-=i)s=xh(a,t[a],t[a+1],s);return s&&ph(s,s.next)&&(bh(s),s=s.next),s}function uh(t,e){if(!t)return t;e=e||t;var n,i=t;do{if(n=!1,i.steiner||!ph(i,i.next)&&0!==dh(i.prev,i,i.next))i=i.next;else{if(bh(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function lh(t,e,n,i,r,a,s){if(t){!s&&a&&function(t,e,n,i){for(var r=t;null===r.z&&(r.z=hh(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next,r!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,a,s,o,u,l=1;do{for(n=t,t=null,a=null,s=0;n;){for(s++,i=n,o=0,e=0;e<l&&(o++,i=i.nextZ,i);e++);for(u=l;0<o||0<u&&i;)0!==o&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,u--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}}while(a.nextZ=null,l*=2,1<s)}(r)}(t,i,r,a);for(var o,u,l=t;t.prev!==t.next;)if(o=t.prev,u=t.next,a?function(t,e,n,i){var r=t.prev,a=t,s=t.next;if(0<=dh(r,a,s))return!1;for(var o=(r.x<a.x?r.x<s.x?r:s:a.x<s.x?a:s).x,u=(r.y<a.y?r.y<s.y?r:s:a.y<s.y?a:s).y,l=(r.x>a.x?r.x>s.x?r:s:a.x>s.x?a:s).x,c=(r.y>a.y?r.y>s.y?r:s:a.y>s.y?a:s).y,h=hh(o,u,e,n,i),f=hh(l,c,e,n,i),d=t.prevZ,p=t.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&fh(r.x,r.y,a.x,a.y,s.x,s.y,d.x,d.y)&&0<=dh(d.prev,d,d.next))return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&fh(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&0<=dh(p.prev,p,p.next))return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&fh(r.x,r.y,a.x,a.y,s.x,s.y,d.x,d.y)&&0<=dh(d.prev,d,d.next))return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&fh(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&0<=dh(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(t,i,r,a):function(t){var e=t.prev,n=t,i=t.next;if(0<=dh(e,n,i))return!1;for(var r=t.next.next;r!==t.prev;){if(fh(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&0<=dh(r.prev,r,r.next))return!1;r=r.next}return!0}(t))e.push(o.i/n),e.push(t.i/n),e.push(u.i/n),bh(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?lh(t=function(t,e,n){var i=t;do{var r=i.prev,a=i.next.next;!ph(r,a)&&gh(r,i,i.next,a)&&yh(r,a)&&yh(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),bh(i),bh(i.next),i=t=a),i=i.next}while(i!==t);return uh(i)}(uh(t),e,n),e,n,i,r,a,2):2===s&&function(t,e,n,i,r,a){var s=t;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&gh(n,n.next,t,e))return!0}while(n=n.next,n!==t);return!1}(t,e)&&(yh(t,e)&&yh(e,t)&&function(t,e){for(var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next,n!==t;);return i}(t,e)&&(dh(t.prev,t,e.prev)||dh(t,e.prev,e))||ph(t,e)&&0<dh(t.prev,t,t.next)&&0<dh(e.prev,e,e.next))}(s,o)){var u=_h(s,o);return s=uh(s,s.next),u=uh(u,u.next),lh(s,e,n,i,r,a),lh(u,e,n,i,r,a)}o=o.next}}while(s=s.next,s!==t)}(t,e,n,i,r,a):lh(uh(t),e,n,i,r,a,1);break}}}function ch(t,e){return t.x-e.x}function hh(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function fh(t,e,n,i,r,a,s,o){return 0<=(r-s)*(e-o)-(t-s)*(a-o)&&0<=(t-s)*(i-o)-(n-s)*(e-o)&&0<=(n-s)*(a-o)-(r-s)*(i-o)}function dh(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ph(t,e){return t.x===e.x&&t.y===e.y}function gh(t,e,n,i){var r=mh(dh(t,e,n)),a=mh(dh(t,e,i)),s=mh(dh(n,i,t)),o=mh(dh(n,i,e));return r!==a&&s!==o||0===r&&vh(t,n,e)||0===a&&vh(t,i,e)||0===s&&vh(n,t,i)||!(0!==o||!vh(n,e,i))}function vh(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function mh(t){return 0<t?1:t<0?-1:0}function yh(t,e){return dh(t.prev,t,t.next)<0?0<=dh(t,e,t.next)&&0<=dh(t,t.prev,e):dh(t,e,t.prev)<0||dh(t,t.next,e)<0}function _h(t,e){var n=new wh(t.i,t.x,t.y),i=new wh(e.i,e.x,e.y),r=t.next,a=e.prev;return(t.next=e).prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function xh(t,e,n,i){var r=new wh(t,e,n);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function bh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function wh(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Sh=function(){function t(){y(this,t)}return _(t,null,[{key:\"area\",value:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}},{key:\"isClockWise\",value:function(e){return t.area(e)<0}},{key:\"triangulateShape\",value:function(t,e){var n=[],i=[],r=[];Ch(t),Mh(n,t);var a=t.length;e.forEach(Ch);for(var s=0;s<e.length;s++)i.push(a),a+=e[s].length,Mh(n,e[s]);for(var o=sh(n,i),u=0;u<o.length;u+=3)r.push(o.slice(u,u+3));return r}}]),t}();function Ch(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function Mh(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var Th=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ah([new Bi(.5,.5),new Bi(-.5,.5),new Bi(-.5,-.5),new Bi(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,n),t=e.call(this),t.type=\"ExtrudeGeometry\",t.parameters={shapes:i,options:r},i=Array.isArray(i)?i:[i];for(var a=g(t),s=[],o=[],u=0,l=i.length;u<l;u++)!function(t){var e=[],n=void 0!==r.curveSegments?r.curveSegments:12,i=void 0!==r.steps?r.steps:1,u=void 0!==r.depth?r.depth:1,l=void 0===r.bevelEnabled||r.bevelEnabled,c=void 0!==r.bevelThickness?r.bevelThickness:.2,h=void 0!==r.bevelSize?r.bevelSize:c-.1,f=void 0!==r.bevelOffset?r.bevelOffset:0,d=void 0!==r.bevelSegments?r.bevelSegments:3,p=r.extrudePath,g=void 0!==r.UVGenerator?r.UVGenerator:kh;void 0!==r.amount&&(u=r.amount);var v,m,y,_,x,b=!1;p&&(v=p.getSpacedPoints(i),b=!0,l=!1,m=p.computeFrenetFrames(i,!1),y=new tr,_=new tr,x=new tr),l||(d=0,c=0,h=0,f=0);var w=(t=t.extractPoints(n)).shape,S=t.holes;if(!Sh.isClockWise(w)){w=w.reverse();for(var C=0,M=S.length;C<M;C++){var T=S[C];Sh.isClockWise(T)&&(S[C]=T.reverse())}}for(var k=Sh.triangulateShape(w,S),A=w,E=0,O=S.length;E<O;E++){var P=S[E];w=w.concat(P)}function I(t,e,n){return e.clone().multiplyScalar(n).add(t)}var L=w.length,D=k.length;function R(t,e,n){var i,r,a,s=t.x-e.x,o=t.y-e.y,u=n.x-t.x,l=n.y-t.y,c=s*s+o*o;if(Math.abs(s*l-o*u)>Number.EPSILON){var h=Math.sqrt(c),f=Math.sqrt(u*u+l*l),d=e.x-o/h;if(h=e.y+s/h,i=d+s*(f=((n.x-l/f-d)*l-(n.y+u/f-h)*u)/(s*l-o*u))-t.x,r=h+o*f-t.y,(t=i*i+r*r)<=2)return new Bi(i,r);a=Math.sqrt(t/2)}else{var p=!1;s>Number.EPSILON?u>Number.EPSILON&&(p=!0):s<-Number.EPSILON?u<-Number.EPSILON&&(p=!0):Math.sign(o)===Math.sign(l)&&(p=!0),a=p?(i=-o,r=s,Math.sqrt(c)):(i=s,r=o,Math.sqrt(c/2))}return new Bi(i/a,r/a)}for(var N=[],F=0,B=A.length,z=B-1,j=F+1;F<B;F++,z++,j++)z===B&&(z=0),j===B&&(j=0),N[F]=R(A[F],A[z],A[j]);for(var U,V=[],W=N.concat(),G=0,H=S.length;G<H;G++){var X=S[G];U=[];for(var Y=0,q=X.length,J=q-1,Z=Y+1;Y<q;Y++,J++,Z++)J===q&&(J=0),Z===q&&(Z=0),U[Y]=R(X[Y],X[J],X[Z]);V.push(U),W=W.concat(U)}for(var K=0;K<d;K++){for(var Q=K/d,$=c*Math.cos(Q*Math.PI/2),tt=h*Math.sin(Q*Math.PI/2)+f,et=0,nt=A.length;et<nt;et++){var it=I(A[et],N[et],tt);Ot(it.x,it.y,-$)}for(var rt=0,at=S.length;rt<at;rt++){var st=S[rt];U=V[rt];for(var ot=0,ut=st.length;ot<ut;ot++){var lt=I(st[ot],U[ot],tt);Ot(lt.x,lt.y,-$)}}}for(var ct=h+f,ht=0;ht<L;ht++){var ft=l?I(w[ht],W[ht],ct):w[ht];b?(_.copy(m.normals[0]).multiplyScalar(ft.x),y.copy(m.binormals[0]).multiplyScalar(ft.y),x.copy(v[0]).add(_).add(y),Ot(x.x,x.y,x.z)):Ot(ft.x,ft.y,0)}for(var dt=1;dt<=i;dt++)for(var pt=0;pt<L;pt++){var gt=l?I(w[pt],W[pt],ct):w[pt];b?(_.copy(m.normals[dt]).multiplyScalar(gt.x),y.copy(m.binormals[dt]).multiplyScalar(gt.y),x.copy(v[dt]).add(_).add(y),Ot(x.x,x.y,x.z)):Ot(gt.x,gt.y,u/i*dt)}for(var vt=d-1;0<=vt;vt--){for(var mt=vt/d,yt=c*Math.cos(mt*Math.PI/2),_t=h*Math.sin(mt*Math.PI/2)+f,xt=0,bt=A.length;xt<bt;xt++){var wt=I(A[xt],N[xt],_t);Ot(wt.x,wt.y,u+yt)}for(var St=0,Ct=S.length;St<Ct;St++){var Mt=S[St];U=V[St];for(var Tt=0,kt=Mt.length;Tt<kt;Tt++){var At=I(Mt[Tt],U[Tt],_t);b?Ot(At.x,At.y+v[i-1].y,v[i-1].x+yt):Ot(At.x,At.y,u+yt)}}}function Et(t,e){for(var n=t.length;0<=--n;){var r=n,o=n-1;o<0&&(o=t.length-1);for(var u=0,l=i+2*d;u<l;u++){var c=L*u,h=L*(u+1);!function(t,e,n,i){It(t),It(e),It(i),It(e),It(n),It(i),i=s.length/3,Lt((i=g.generateSideWallUV(a,s,i-6,i-3,i-2,i-1))[0]),Lt(i[1]),Lt(i[3]),Lt(i[1]),Lt(i[2]),Lt(i[3])}(e+r+c,e+o+c,e+o+h,e+r+h)}}}function Ot(t,n,i){e.push(t),e.push(n),e.push(i)}function Pt(t,e,n){It(t),It(e),It(n),n=s.length/3,Lt((n=g.generateTopUV(a,s,n-3,n-2,n-1))[0]),Lt(n[1]),Lt(n[2])}function It(t){s.push(e[3*t+0]),s.push(e[3*t+1]),s.push(e[3*t+2])}function Lt(t){o.push(t.x),o.push(t.y)}(function(){var t=s.length/3;if(l){for(var e=0*L,n=0;n<D;n++){var r=k[n];Pt(r[2]+e,r[1]+e,r[0]+e)}e=L*(i+2*d);for(var o=0;o<D;o++){var u=k[o];Pt(u[0]+e,u[1]+e,u[2]+e)}}else{for(var c=0;c<D;c++){var h=k[c];Pt(h[2],h[1],h[0])}for(var f=0;f<D;f++){var p=k[f];Pt(p[0]+L*i,p[1]+L*i,p[2]+L*i)}}a.addGroup(t,s.length/3-t,0)})(),function(){var t=s.length/3,e=0;Et(A,e),e+=A.length;for(var n=0,i=S.length;n<i;n++){var r=S[n];Et(r,e),e+=r.length}a.addGroup(t,s.length/3-t,1)}()}(i[u]);return t.setAttribute(\"position\",new Ra(s,3)),t.setAttribute(\"uv\",new Ra(o,2)),t.computeVertexNormals(),t}return _(n,[{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)}}],[{key:\"fromJSON\",value:function(t,e){for(var i=[],r=0,a=t.shapes.length;r<a;r++){var s=e[t.shapes[r]];i.push(s)}var o=t.options.extrudePath;return void 0!==o&&(t.options.extrudePath=(new nh[o.type]).fromJSON(o)),new n(i,t.options)}}]),n}(Ga),kh={generateTopUV:function(t,e,n,i,r){var a=e[3*n],s=e[3*n+1],o=e[3*i];return n=e[3*i+1],i=e[3*r],r=e[3*r+1],[new Bi(a,s),new Bi(o,n),new Bi(i,r)]},generateSideWallUV:function(t,e,n,i,r,a){var s=e[3*n],o=e[3*n+1],u=e[3*n+2],l=e[3*i],c=e[3*i+1],h=e[3*i+2],f=e[3*r],d=e[3*r+1];return n=e[3*r+2],i=e[3*a],r=e[3*a+1],a=e[3*a+2],Math.abs(o-c)<Math.abs(s-l)?[new Bi(s,1-u),new Bi(l,1-h),new Bi(f,1-n),new Bi(i,1-a)]:[new Bi(o,1-u),new Bi(c,1-h),new Bi(d,1-n),new Bi(r,1-a)]}},Ah=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;y(this,n);var a=(1+Math.sqrt(5))/2;return t=e.call(this,[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],i,r),t.type=\"IcosahedronGeometry\",t.parameters={radius:i,detail:r},t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.radius,t.detail)}}]),n}(Ec),Eh=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Bi(0,.5),new Bi(.5,0),new Bi(0,-.5)],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;y(this,n),t=e.call(this),t.type=\"LatheGeometry\",t.parameters={points:i,segments:r,phiStart:a,phiLength:s},r=Math.floor(r),s=Pi(s,0,2*Math.PI);for(var o=[],u=[],l=[],c=[],h=[],f=1/r,d=new tr,p=new Bi,g=new tr,v=new tr,m=new tr,_=0,x=0,b=0;b<=i.length-1;b++)switch(b){case 0:_=i[b+1].x-i[b].x,x=i[b+1].y-i[b].y,g.x=+x,g.y=-_,g.z=0*x,m.copy(g),g.normalize(),c.push(g.x,g.y,g.z);break;case i.length-1:c.push(m.x,m.y,m.z);break;default:_=i[b+1].x-i[b].x,x=i[b+1].y-i[b].y,g.x=+x,g.y=-_,g.z=0*x,v.copy(g),g.x+=m.x,g.y+=m.y,g.z+=m.z,g.normalize(),c.push(g.x,g.y,g.z),m.copy(v)}for(var w=0;w<=r;w++)for(var S=a+w*f*s,C=Math.sin(S),M=Math.cos(S),T=0;T<=i.length-1;T++){d.x=i[T].x*C,d.y=i[T].y,d.z=i[T].x*M,u.push(d.x,d.y,d.z),p.x=w/r,p.y=T/(i.length-1),l.push(p.x,p.y);var k=c[3*T+0]*C,A=c[3*T+1],E=c[3*T+0]*M;h.push(k,A,E)}for(var O=0;O<r;O++)for(var P=0;P<i.length-1;P++){var I=P+O*i.length,L=I+i.length,D=I+i.length+1,R=I+1;o.push(I,L,R),o.push(L,D,R)}return t.setIndex(o),t.setAttribute(\"position\",new Ra(u,3)),t.setAttribute(\"uv\",new Ra(l,2)),t.setAttribute(\"normal\",new Ra(h,3)),t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.points,t.segments,t.phiStart,t.phiLength)}}]),n}(Ga),Oh=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return y(this,n),t=e.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],i,r),t.type=\"OctahedronGeometry\",t.parameters={radius:i,detail:r},t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.radius,t.detail)}}]),n}(Ec),Ph=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;y(this,n),t=e.call(this),t.type=\"RingGeometry\",t.parameters={innerRadius:i,outerRadius:r,thetaSegments:a,phiSegments:s,thetaStart:o,thetaLength:u},a=Math.max(3,a);for(var l=[],c=[],h=[],f=[],d=i,p=(r-i)/(s=Math.max(1,s)),g=new tr,v=new Bi,m=0;m<=s;m++){for(var _=0;_<=a;_++){var x=o+_/a*u;g.x=d*Math.cos(x),g.y=d*Math.sin(x),c.push(g.x,g.y,g.z),h.push(0,0,1),v.x=(g.x/r+1)/2,v.y=(g.y/r+1)/2,f.push(v.x,v.y)}d+=p}for(var b=0;b<s;b++)for(var w=b*(a+1),S=0;S<a;S++){var C=S+w,M=C+a+1,T=C+a+2,k=C+1;l.push(C,M,k),l.push(M,T,k)}return t.setIndex(l),t.setAttribute(\"position\",new Ra(c,3)),t.setAttribute(\"normal\",new Ra(h,3)),t.setAttribute(\"uv\",new Ra(f,2)),t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}]),n}(Ga),Ih=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ah([new Bi(0,.5),new Bi(-.5,-.5),new Bi(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;y(this,n),t=e.call(this),t.type=\"ShapeGeometry\",t.parameters={shapes:i,curveSegments:r};var a=[],s=[],o=[],u=[],l=0,c=0;if(!1===Array.isArray(i))f(i);else for(var h=0;h<i.length;h++)f(i[h]),t.addGroup(l,c,h),l+=c,c=0;function f(t){var e=s.length/3,n=(t=t.extractPoints(r)).shape,i=t.holes;!1===Sh.isClockWise(n)&&(n=n.reverse());for(var l=0,h=i.length;l<h;l++){var f=i[l];!0===Sh.isClockWise(f)&&(i[l]=f.reverse())}for(var d=Sh.triangulateShape(n,i),p=0,g=i.length;p<g;p++){var v=i[p];n=n.concat(v)}for(var m=0,y=n.length;m<y;m++){var _=n[m];s.push(_.x,_.y,0),o.push(0,0,1),u.push(_.x,_.y)}for(var x=0,b=d.length;x<b;x++){var w=d[x],S=w[0]+e,C=w[1]+e;w=w[2]+e,a.push(S,C,w),c+=3}}return t.setIndex(a),t.setAttribute(\"position\",new Ra(s,3)),t.setAttribute(\"normal\",new Ra(o,3)),t.setAttribute(\"uv\",new Ra(u,2)),t}return _(n,[{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}],[{key:\"fromJSON\",value:function(t,e){for(var i=[],r=0,a=t.shapes.length;r<a;r++){var s=e[t.shapes[r]];i.push(s)}return new n(i,t.curveSegments)}}]),n}(Ga),Lh=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;y(this,n),t=e.call(this),t.type=\"SphereGeometry\",t.parameters={radius:i,widthSegments:r,heightSegments:a,phiStart:s,phiLength:o,thetaStart:u,thetaLength:l},r=Math.max(3,Math.floor(r)),a=Math.max(2,Math.floor(a));for(var c=Math.min(u+l,Math.PI),h=0,f=[],d=new tr,p=new tr,g=[],v=[],m=[],_=[],x=0;x<=a;x++){var b=[],w=x/a,S=0;0==x&&0==u?S=.5/r:x==a&&c==Math.PI&&(S=-.5/r);for(var C=0;C<=r;C++){var M=C/r;d.x=-i*Math.cos(s+M*o)*Math.sin(u+w*l),d.y=i*Math.cos(u+w*l),d.z=i*Math.sin(s+M*o)*Math.sin(u+w*l),v.push(d.x,d.y,d.z),p.copy(d).normalize(),m.push(p.x,p.y,p.z),_.push(M+S,1-w),b.push(h++)}f.push(b)}for(var T=0;T<a;T++)for(var k=0;k<r;k++){var A=f[T][k+1],E=f[T][k],O=f[T+1][k],P=f[T+1][k+1];(0!==T||0<u)&&g.push(A,E,P),(T!==a-1||c<Math.PI)&&g.push(E,O,P)}return t.setIndex(g),t.setAttribute(\"position\",new Ra(v,3)),t.setAttribute(\"normal\",new Ra(m,3)),t.setAttribute(\"uv\",new Ra(_,2)),t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}]),n}(Ga),Dh=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return y(this,n),t=e.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],i,r),t.type=\"TetrahedronGeometry\",t.parameters={radius:i,detail:r},t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.radius,t.detail)}}]),n}(Ec),Rh=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;y(this,n),t=e.call(this),t.type=\"TorusGeometry\",t.parameters={radius:i,tube:r,radialSegments:a,tubularSegments:s,arc:o},a=Math.floor(a),s=Math.floor(s);for(var u=[],l=[],c=[],h=[],f=new tr,d=new tr,p=new tr,g=0;g<=a;g++)for(var v=0;v<=s;v++){var m=v/s*o,_=g/a*Math.PI*2;d.x=(i+r*Math.cos(_))*Math.cos(m),d.y=(i+r*Math.cos(_))*Math.sin(m),d.z=r*Math.sin(_),l.push(d.x,d.y,d.z),f.x=i*Math.cos(m),f.y=i*Math.sin(m),p.subVectors(d,f).normalize(),c.push(p.x,p.y,p.z),h.push(v/s),h.push(g/a)}for(var x=1;x<=a;x++)for(var b=1;b<=s;b++){var w=(s+1)*x+b-1,S=(s+1)*(x-1)+b-1,C=(s+1)*(x-1)+b,M=(s+1)*x+b;u.push(w,S,M),u.push(S,C,M)}return t.setIndex(u),t.setAttribute(\"position\",new Ra(l,3)),t.setAttribute(\"normal\",new Ra(c,3)),t.setAttribute(\"uv\",new Ra(h,2)),t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}]),n}(Ga),Nh=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;y(this,n),t=e.call(this),t.type=\"TorusKnotGeometry\",t.parameters={radius:i,tube:r,tubularSegments:a,radialSegments:s,p:o,q:u},a=Math.floor(a),s=Math.floor(s);for(var l=[],c=[],h=[],f=[],d=new tr,p=new tr,g=new tr,v=new tr,m=new tr,_=new tr,x=new tr,b=0;b<=a;++b){var w=b/a*o*Math.PI*2;I(w,o,u,i,g),I(.01+w,o,u,i,v),_.subVectors(v,g),x.addVectors(v,g),m.crossVectors(_,x),x.crossVectors(m,_),m.normalize(),x.normalize();for(var S=0;S<=s;++S){var C=S/s*Math.PI*2,M=-r*Math.cos(C);C=r*Math.sin(C),d.x=g.x+(M*x.x+C*m.x),d.y=g.y+(M*x.y+C*m.y),d.z=g.z+(M*x.z+C*m.z),c.push(d.x,d.y,d.z),p.subVectors(d,g).normalize(),h.push(p.x,p.y,p.z),f.push(b/a),f.push(S/s)}}for(var T=1;T<=a;T++)for(var k=1;k<=s;k++){var A=(s+1)*(T-1)+(k-1),E=(s+1)*T+(k-1),O=(s+1)*T+k,P=(s+1)*(T-1)+k;l.push(A,E,P),l.push(E,O,P)}function I(t,e,n,i,r){var a=Math.cos(t),s=Math.sin(t);e=n/e*t,t=Math.cos(e),r.x=i*(2+t)*.5*a,r.y=i*(2+t)*s*.5,r.z=i*Math.sin(e)*.5}return t.setIndex(l),t.setAttribute(\"position\",new Ra(c,3)),t.setAttribute(\"normal\",new Ra(h,3)),t.setAttribute(\"uv\",new Ra(f,2)),t}return _(n,null,[{key:\"fromJSON\",value:function(t){return new n(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}]),n}(Ga),Fh=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th(new tr(-1,-1,0),new tr(-1,1,0),new tr(1,1,0)),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];y(this,n),t=e.call(this),t.type=\"TubeGeometry\",t.parameters={path:i,tubularSegments:r,radius:a,radialSegments:s,closed:o};var u=i.computeFrenetFrames(r,o);t.tangents=u.tangents,t.normals=u.normals,t.binormals=u.binormals;var l=new tr,c=new tr,h=new Bi,f=new tr,d=[],p=[],g=[],v=[];function m(t){f=i.getPointAt(t/r,f);for(var e=u.normals[t],n=u.binormals[t],o=0;o<=s;o++){var h=o/s*Math.PI*2,g=Math.sin(h);h=-Math.cos(h),c.x=h*e.x+g*n.x,c.y=h*e.y+g*n.y,c.z=h*e.z+g*n.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=f.x+a*c.x,l.y=f.y+a*c.y,l.z=f.z+a*c.z,d.push(l.x,l.y,l.z)}}return function(){for(var t=0;t<r;t++)m(t);m(!1===o?r:0),function(){for(var t=0;t<=r;t++)for(var e=0;e<=s;e++)h.x=t/r,h.y=e/s,g.push(h.x,h.y)}(),function(){for(var t=1;t<=r;t++)for(var e=1;e<=s;e++){var n=(s+1)*(t-1)+(e-1),i=(s+1)*t+(e-1),a=(s+1)*t+e,o=(s+1)*(t-1)+e;v.push(n,i,o),v.push(i,a,o)}}()}(),t.setIndex(v),t.setAttribute(\"position\",new Ra(d,3)),t.setAttribute(\"normal\",new Ra(p,3)),t.setAttribute(\"uv\",new Ra(g,2)),t}return _(n,[{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this);return t.path=this.parameters.path.toJSON(),t}}],[{key:\"fromJSON\",value:function(t){return new n((new nh[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}]),n}(Ga),Bh=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(y(this,n),t=e.call(this),t.type=\"WireframeGeometry\",t.parameters={geometry:i},null!==i){var r=[],a=new Set,s=new tr,o=new tr;if(null!==i.index){var u=i.attributes.position,l=i.index,c=i.groups;0===c.length&&(c=[{start:0,count:l.count,materialIndex:0}]);for(var f=0,d=c.length;f<d;++f)for(var p=c[f],g=p.start,v=g,m=g+p.count;v<m;v+=3)for(var _=0;_<3;_++){var x=l.getX(v+_),b=l.getX(v+(_+1)%3);s.fromBufferAttribute(u,x),o.fromBufferAttribute(u,b),!0===zh(s,o,a)&&(r.push(s.x,s.y,s.z),r.push(o.x,o.y,o.z))}}else for(var w=i.attributes.position,S=0,C=w.count/3;S<C;S++)for(var M=0;M<3;M++){var T=3*S+M,k=3*S+(M+1)%3;s.fromBufferAttribute(w,T),o.fromBufferAttribute(w,k),!0===zh(s,o,a)&&(r.push(s.x,s.y,s.z),r.push(o.x,o.y,o.z))}t.setAttribute(\"position\",new Ra(r,3))}return h(t)}return _(n)}(Ga);function zh(t,e,n){var i=\"\".concat(t.x,\",\").concat(t.y,\",\").concat(t.z,\"-\").concat(e.x,\",\").concat(e.y,\",\")+e.z;return t=\"\".concat(e.x,\",\").concat(e.y,\",\").concat(e.z,\"-\").concat(t.x,\",\").concat(t.y,\",\")+t.z,!0!==n.has(i)&&!0!==n.has(t)&&(n.add(i,t),!0)}var jh=Object.freeze({__proto__:null,BoxGeometry:cs,BoxBufferGeometry:cs,CircleGeometry:Tc,CircleBufferGeometry:Tc,ConeGeometry:Ac,ConeBufferGeometry:Ac,CylinderGeometry:kc,CylinderBufferGeometry:kc,DodecahedronGeometry:Oc,DodecahedronBufferGeometry:Oc,EdgesGeometry:Rc,ExtrudeGeometry:Th,ExtrudeBufferGeometry:Th,IcosahedronGeometry:Ah,IcosahedronBufferGeometry:Ah,LatheGeometry:Eh,LatheBufferGeometry:Eh,OctahedronGeometry:Oh,OctahedronBufferGeometry:Oh,PlaneGeometry:Es,PlaneBufferGeometry:Es,PolyhedronGeometry:Ec,PolyhedronBufferGeometry:Ec,RingGeometry:Ph,RingBufferGeometry:Ph,ShapeGeometry:Ih,ShapeBufferGeometry:Ih,SphereGeometry:Lh,SphereBufferGeometry:Lh,TetrahedronGeometry:Dh,TetrahedronBufferGeometry:Dh,TorusGeometry:Rh,TorusBufferGeometry:Rh,TorusKnotGeometry:Nh,TorusKnotBufferGeometry:Nh,TubeGeometry:Fh,TubeBufferGeometry:Fh,WireframeGeometry:Bh}),Uh=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"ShadowMaterial\",i.color=new wa(0),i.transparent=!0,i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.color.copy(t.color),this}}]),n}(ga);Uh.prototype.isShadowMaterial=!0;var Vh=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.defines={STANDARD:\"\"},i.type=\"MeshStandardMaterial\",i.color=new wa(16777215),i.roughness=1,i.metalness=0,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new wa(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Jn,i.normalScale=new Bi(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.roughnessMap=null,i.metalnessMap=null,i.alphaMap=null,i.envMap=null,i.envMapIntensity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap=\"round\",i.wireframeLinejoin=\"round\",i.flatShading=!1,i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.defines={STANDARD:\"\"},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}]),n}(ga);Vh.prototype.isMeshStandardMaterial=!0;var Wh=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.defines={STANDARD:\"\",PHYSICAL:\"\"},i.type=\"MeshPhysicalMaterial\",i.clearcoatMap=null,i.clearcoatRoughness=0,i.clearcoatRoughnessMap=null,i.clearcoatNormalScale=new Bi(1,1),i.clearcoatNormalMap=null,i.ior=1.5,Object.defineProperty(g(i),\"reflectivity\",{get:function(){return Pi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),i.sheenColor=new wa(0),i.sheenColorMap=null,i.sheenRoughness=1,i.sheenRoughnessMap=null,i.transmissionMap=null,i.thickness=0,i.thicknessMap=null,i.attenuationDistance=0,i.attenuationColor=new wa(1,1,1),i.specularIntensity=1,i.specularIntensityMap=null,i.specularColor=new wa(1,1,1),i.specularColorMap=null,i._sheen=0,i._clearcoat=0,i._transmission=0,i.setValues(t),i}return _(n,[{key:\"sheen\",get:function(){return this._sheen},set:function(t){0<this._sheen!=0<t&&this.version++,this._sheen=t}},{key:\"clearcoat\",get:function(){return this._clearcoat},set:function(t){0<this._clearcoat!=0<t&&this.version++,this._clearcoat=t}},{key:\"transmission\",get:function(){return this._transmission},set:function(t){0<this._transmission!=0<t&&this.version++,this._transmission=t}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.defines={STANDARD:\"\",PHYSICAL:\"\"},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}]),n}(Vh);Wh.prototype.isMeshPhysicalMaterial=!0;var Gh=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"MeshPhongMaterial\",i.color=new wa(16777215),i.specular=new wa(1118481),i.shininess=30,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new wa(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Jn,i.normalScale=new Bi(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=Gt,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap=\"round\",i.wireframeLinejoin=\"round\",i.flatShading=!1,i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}]),n}(ga);Gh.prototype.isMeshPhongMaterial=!0;var Hh=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.defines={TOON:\"\"},i.type=\"MeshToonMaterial\",i.color=new wa(16777215),i.map=null,i.gradientMap=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new wa(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Jn,i.normalScale=new Bi(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap=\"round\",i.wireframeLinejoin=\"round\",i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}]),n}(ga);Hh.prototype.isMeshToonMaterial=!0;var Xh=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"MeshNormalMaterial\",i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Jn,i.normalScale=new Bi(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.flatShading=!1,i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}]),n}(ga);Xh.prototype.isMeshNormalMaterial=!0;var Yh=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"MeshLambertMaterial\",i.color=new wa(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new wa(0),i.emissiveIntensity=1,i.emissiveMap=null,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=Gt,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap=\"round\",i.wireframeLinejoin=\"round\",i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}]),n}(ga);Yh.prototype.isMeshLambertMaterial=!0;var qh=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.defines={MATCAP:\"\"},i.type=\"MeshMatcapMaterial\",i.color=new wa(16777215),i.matcap=null,i.map=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Jn,i.normalScale=new Bi(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.flatShading=!1,i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.defines={MATCAP:\"\"},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}]),n}(ga);qh.prototype.isMeshMatcapMaterial=!0;var Jh=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"LineDashedMaterial\",i.scale=1,i.dashSize=3,i.gapSize=1,i.setValues(t),i}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}]),n}(rc);Jh.prototype.isLineDashedMaterial=!0;var Zh=Object.freeze({__proto__:null,ShadowMaterial:Uh,SpriteMaterial:Sl,RawShaderMaterial:js,ShaderMaterial:ps,PointsMaterial:gc,MeshPhysicalMaterial:Wh,MeshStandardMaterial:Vh,MeshPhongMaterial:Gh,MeshToonMaterial:Hh,MeshNormalMaterial:Xh,MeshLambertMaterial:Yh,MeshDepthMaterial:el,MeshDistanceMaterial:nl,MeshBasicMaterial:Sa,MeshMatcapMaterial:qh,LineDashedMaterial:Jh,LineBasicMaterial:rc,Material:ga}),Kh={arraySlice:function(t,e,n){return Kh.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:\"number\"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,s=0;s!==i;++a)for(var o=n[a]*e,u=0;u!==e;++u)r[s++]=t[o+u];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var s=a[i];if(void 0!==s)if(Array.isArray(s))for(;s=a[i],void 0!==s&&(e.push(a.time),n.push.apply(n,s)),a=t[r++],void 0!==a;);else if(void 0!==s.toArray)for(;s=a[i],void 0!==s&&(e.push(a.time),s.toArray(n,n.length)),a=t[r++],void 0!==a;);else for(;s=a[i],void 0!==s&&(e.push(a.time),n.push(s)),a=t[r++],void 0!==a;);}},subclip:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=t.clone();a.name=e;for(var s=[],o=0;o<a.tracks.length;++o){for(var u=a.tracks[o],l=u.getValueSize(),c=[],h=[],f=0;f<u.times.length;++f){var d=u.times[f]*r;if(!(d<n||i<=d)){c.push(u.times[f]);for(var p=0;p<l;++p)h.push(u.values[f*l+p])}}0!==c.length&&(u.times=Kh.convertArray(c,u.times.constructor),u.values=Kh.convertArray(h,u.values.constructor),s.push(u))}a.tracks=s;for(var g=1/0,v=0;v<a.tracks.length;++v)g>a.tracks[v].times[0]&&(g=a.tracks[v].times[0]);for(var m=0;m<a.tracks.length;++m)a.tracks[m].shift(-1*g);return a.resetDuration(),a},makeClipAdditive:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,r=n.tracks.length,a=e/(i=i<=0?30:i),s=function(e){var i=n.tracks[e],r=i.ValueTypeName;if(\"bool\"!==r&&\"string\"!==r){var s=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===r}));if(void 0!==s){var o=0;u=i.getValueSize(),i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=u/3);var m,y=0;if(l=s.getValueSize(),s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=l/3),c=i.times.length-1,a<=i.times[0])h=o,f=u-o,m=Kh.arraySlice(i.values,h,f);else if(a>=i.times[c])c=c*u+o,d=c+u-o,m=Kh.arraySlice(i.values,c,d);else{var _=i.createInterpolant();d=o,u-=o,_.evaluate(a),m=Kh.arraySlice(_.resultBuffer,d,u)}\"quaternion\"===r&&(new $i).fromArray(m).normalize().conjugate().toArray(m),p=s.times.length;for(var x=0;x<p;++x)if(g=x*l+y,\"quaternion\"===r)$i.multiplyQuaternionsFlat(s.values,g,m,0,s.values,g);else{v=l-2*y;for(var b=0;b<v;++b)s.values[g+b]-=m[b]}}}},o=0;o<r;++o){var u,l,c,h,f,d,p,g,v;s(o)}return t.blendMode=Un,t}},Qh=function(){function t(e,n,i,r){y(this,t),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return _(t,[{key:\"evaluate\",value:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var a;n:{i:if(!(t<i)){for(var s=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}a=e.length;break n}if(t>=r)break t;var o=e[1];t<o&&(n=2,r=o);for(var u=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===u)break;if(i=r,r=e[--n-1],t>=r)break e}a=n,n=0}for(;n<a;){var l=n+a>>>1;t<e[l]?a=l:n=1+l}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}},{key:\"getSettings_\",value:function(){return this.settings||this.DefaultSettings_}},{key:\"copySampleValue_\",value:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,a=0;a!==i;++a)e[a]=n[r+a];return e}},{key:\"interpolate_\",value:function(){throw new Error(\"call to abstract method\")}},{key:\"intervalChanged_\",value:function(){}}]),t}();Qh.prototype.beforeStart_=Qh.prototype.copySampleValue_,Qh.prototype.afterEnd_=Qh.prototype.copySampleValue_;var $h=function(t){v(n,t);var e=m(n);function n(t,i,r,a){var s;return y(this,n),s=e.call(this,t,i,r,a),s._weightPrev=-0,s._offsetPrev=-0,s._weightNext=-0,s._offsetNext=-0,s.DefaultSettings_={endingStart:Fn,endingEnd:Fn},s}return _(n,[{key:\"intervalChanged_\",value:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case Bn:r=t,s=2*e-n;break;case zn:r=i.length-2,s=e+i[r]-i[r+1];break;default:r=t,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Bn:a=t,o=2*n-e;break;case zn:a=1,o=n+i[1]-i[0];break;default:a=t-1,o=e}var u=.5*(n-e),l=this.valueSize;this._weightPrev=u/(e-s),this._weightNext=u/(o-n),this._offsetPrev=r*l,this._offsetNext=a*l}},{key:\"interpolate_\",value:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,u=o-s,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(i-e),p=d*d,g=p*d,v=-h*g+2*h*p-h*d,m=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*g+(1.5+f)*p+.5*d,_=f*g-f*p,x=0;x!==s;++x)r[x]=v*a[l+x]+m*a[u+x]+y*a[o+x]+_*a[c+x];return r}}]),n}(Qh),tf=function(t){v(n,t);var e=m(n);function n(t,i,r,a){return y(this,n),e.call(this,t,i,r,a)}return _(n,[{key:\"interpolate_\",value:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,u=o-s,l=(n-e)/(i-e),c=1-l,h=0;h!==s;++h)r[h]=a[u+h]*c+a[o+h]*l;return r}}]),n}(Qh),ef=function(t){v(n,t);var e=m(n);function n(t,i,r,a){return y(this,n),e.call(this,t,i,r,a)}return _(n,[{key:\"interpolate_\",value:function(t){return this.copySampleValue_(t-1)}}]),n}(Qh),nf=function(){function t(e,n,i,r){if(y(this,t),void 0===e)throw new Error(\"THREE.KeyframeTrack: track name is undefined\");if(void 0===n||0===n.length)throw new Error(\"THREE.KeyframeTrack: no keyframes in track named \"+e);this.name=e,this.times=Kh.convertArray(n,this.TimeBufferType),this.values=Kh.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}return _(t,[{key:\"InterpolantFactoryMethodDiscrete\",value:function(t){return new ef(this.times,this.values,this.getValueSize(),t)}},{key:\"InterpolantFactoryMethodLinear\",value:function(t){return new tf(this.times,this.values,this.getValueSize(),t)}},{key:\"InterpolantFactoryMethodSmooth\",value:function(t){return new $h(this.times,this.values,this.getValueSize(),t)}},{key:\"setInterpolation\",value:function(t){var e;switch(t){case Dn:e=this.InterpolantFactoryMethodDiscrete;break;case Rn:e=this.InterpolantFactoryMethodLinear;break;case Nn:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)return this.createInterpolant=e,this;var n=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return this}},{key:\"getInterpolation\",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Dn;case this.InterpolantFactoryMethodLinear:return Rn;case this.InterpolantFactoryMethodSmooth:return Nn}}},{key:\"getValueSize\",value:function(){return this.values.length/this.times.length}},{key:\"shift\",value:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this}},{key:\"scale\",value:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this}},{key:\"trim\",value:function(t,e){for(var n,i=this.times,r=i.length,a=0,s=r-1;a!==r&&i[a]<t;)++a;for(;-1!==s&&i[s]>e;)--s;return++s,0===a&&s===r||(a>=s&&(s=Math.max(s,1),a=s-1),n=this.getValueSize(),this.times=Kh.arraySlice(i,a,s),this.values=Kh.arraySlice(this.values,a*n,s*n)),this}},{key:\"validate\",value:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(t=!1);for(var a=null,s=0;s!==r;s++){var o=n[s];if(\"number\"==typeof o&&isNaN(o)){t=!1;break}if(null!==a&&a>o){t=!1;break}a=o}if(void 0!==i&&Kh.isTypedArray(i))for(var u=0,l=i.length;u!==l;++u){var c=i[u];if(isNaN(c)){t=!1;break}}return t}},{key:\"optimize\",value:function(){for(var t=Kh.arraySlice(this.times),e=Kh.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Nn,r=t.length-1,a=1,s=1;s<r;++s){var o=!1,u=t[s];if(u!==t[s+1]&&(1!==s||u!==t[0]))if(i)o=!0;else for(var l=s*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=e[l+f];if(d!==e[c+f]||d!==e[h+f]){o=!0;break}}if(o){if(s!==a){t[a]=t[s];for(var p=s*n,g=a*n,v=0;v!==n;++v)e[g+v]=e[p+v]}++a}}if(0<r){t[a]=t[r];for(var m=r*n,y=a*n,_=0;_!==n;++_)e[y+_]=e[m+_];++a}return a!==t.length?(this.times=Kh.arraySlice(t,0,a),this.values=Kh.arraySlice(e,0,a*n)):(this.times=t,this.values=e),this}},{key:\"clone\",value:function(){var t=Kh.arraySlice(this.times,0),e=Kh.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}],[{key:\"toJSON\",value:function(t){var e,n,i=t.constructor;return i.toJSON!==this.toJSON?e=i.toJSON(t):(e={name:t.name,times:Kh.convertArray(t.times,Array),values:Kh.convertArray(t.values,Array)},(n=t.getInterpolation())!==t.DefaultInterpolation&&(e.interpolation=n)),e.type=t.ValueTypeName,e}}]),t}();nf.prototype.TimeBufferType=Float32Array,nf.prototype.ValueBufferType=Float32Array,nf.prototype.DefaultInterpolation=Rn;var rf=function(t){v(n,t);var e=m(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(nf);rf.prototype.ValueTypeName=\"bool\",rf.prototype.ValueBufferType=Array,rf.prototype.DefaultInterpolation=Dn,rf.prototype.InterpolantFactoryMethodLinear=void 0,rf.prototype.InterpolantFactoryMethodSmooth=void 0;var af=function(t){v(n,t);var e=m(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(nf);af.prototype.ValueTypeName=\"color\";var sf=function(t){v(n,t);var e=m(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(nf);sf.prototype.ValueTypeName=\"number\";var of=function(t){v(n,t);var e=m(n);function n(t,i,r,a){return y(this,n),e.call(this,t,i,r,a)}return _(n,[{key:\"interpolate_\",value:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-e)/(i-e),u=t*s,l=u+s;u!==l;u+=4)$i.slerpFlat(r,0,a,u-s,a,u,o);return r}}]),n}(Qh),uf=function(t){v(n,t);var e=m(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:\"InterpolantFactoryMethodLinear\",value:function(t){return new of(this.times,this.values,this.getValueSize(),t)}}]),n}(nf);uf.prototype.ValueTypeName=\"quaternion\",uf.prototype.DefaultInterpolation=Rn,uf.prototype.InterpolantFactoryMethodSmooth=void 0;var lf=function(t){v(n,t);var e=m(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(nf);lf.prototype.ValueTypeName=\"string\",lf.prototype.ValueBufferType=Array,lf.prototype.DefaultInterpolation=Dn,lf.prototype.InterpolantFactoryMethodLinear=void 0,lf.prototype.InterpolantFactoryMethodSmooth=void 0;var cf=function(t){v(n,t);var e=m(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(nf),hf=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jn;y(this,t),this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=Oi(),this.duration<0&&this.resetDuration()}return _(t,[{key:\"resetDuration\",value:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this}},{key:\"trim\",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}},{key:\"validate\",value:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}},{key:\"optimize\",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},{key:\"clone\",value:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}},{key:\"toJSON\",value:function(){return this.constructor.toJSON(this)}}],[{key:\"parse\",value:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(function(t){if(void 0===t.type)throw new Error(\"THREE.KeyframeTrack: track type undefined, can not parse\");var e,n,i=function(t){switch(t.toLowerCase()){case\"scalar\":case\"double\":case\"float\":case\"number\":case\"integer\":return sf;case\"vector\":case\"vector2\":case\"vector3\":case\"vector4\":return cf;case\"color\":return af;case\"quaternion\":return uf;case\"bool\":case\"boolean\":return rf;case\"string\":return lf}throw new Error(\"THREE.KeyframeTrack: Unsupported typeName: \"+t)}(t.type);return void 0===t.times&&(e=[],n=[],Kh.flattenJSON(t.keys,e,n,\"value\"),t.times=e,t.values=n),void 0!==i.parse?i.parse(t):new i(t.name,t.times,t.values,t.interpolation)}(n[r]).scale(i));var s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}},{key:\"toJSON\",value:function(t){var e=[],n=t.tracks;t={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(var i=0,r=n.length;i!==r;++i)e.push(nf.toJSON(n[i]));return t}},{key:\"CreateFromMorphTargetSequence\",value:function(t,e,n,i){for(var r=e.length,a=[],s=0;s<r;s++){var o=[],u=[];o.push((s+r-1)%r,s,(s+1)%r),u.push(0,1,0);var l=Kh.getKeyframeOrder(o);o=Kh.sortedArray(o,1,l),u=Kh.sortedArray(u,1,l),i||0!==o[0]||(o.push(r),u.push(u[0])),a.push(new sf(\".morphTargetInfluences[\"+e[s].name+\"]\",o,u).scale(1/n))}return new this(t,-1,a)}},{key:\"findByName\",value:function(t,e){var n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}},{key:\"CreateClipsFromMorphTargetSequences\",value:function(t,e,n){for(var i={},r=/^([\\w-]*?)([\\d]+)$/,a=0,s=t.length;a<s;a++){var o=t[a],u=o.name.match(r);if(u&&1<u.length){var l=i[u=u[1]];l||(i[u]=l=[]),l.push(o)}}var c=[];for(var h in i)c.push(this.CreateFromMorphTargetSequence(h,i[h],e,n));return c}},{key:\"parseAnimation\",value:function(t,e){if(!t)return null;function n(t,e,n,i,r){var a,s;0!==n.length&&(a=[],s=[],Kh.flattenJSON(n,a,s,i),0!==a.length&&r.push(new t(e,a,s)))}for(var i=[],r=t.name||\"default\",a=t.fps||30,s=t.blendMode,o=t.length||-1,u=t.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},f=void 0;for(f=0;f<c.length;f++)if(c[f].morphTargets)for(var d=0;d<c[f].morphTargets.length;d++)h[c[f].morphTargets[d]]=-1;for(var p in h){for(var g=[],v=[],m=0;m!==c[f].morphTargets.length;++m){var y=c[f];g.push(y.time),v.push(y.morphTarget===p?1:0)}i.push(new sf(\".morphTargetInfluence[\"+p+\"]\",g,v))}o=h.length*(a||1)}else{var _=\".bones[\"+e[l].name+\"]\";n(cf,_+\".position\",c,\"pos\",i),n(uf,_+\".quaternion\",c,\"rot\",i),n(cf,_+\".scale\",c,\"scl\",i)}}return 0===i.length?null:new this(r,o,i,s)}}]),t}(),ff={enabled:!(cf.prototype.ValueTypeName=\"vector\"),files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},df=_((function t(e,n,i){y(this,t);var r,a=this,s=!1,o=0,u=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(t){u++,!1===s&&void 0!==a.onStart&&a.onStart(t,o,u),s=!0},this.itemEnd=function(t){o++,void 0!==a.onProgress&&a.onProgress(t,o,u),o===u&&(s=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(t){void 0!==a.onError&&a.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){return-1!==(t=l.indexOf(t))&&l.splice(t,2),this},this.getHandler=function(t){for(var e=0,n=l.length;e<n;e+=2){var i=l[e],r=l[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}})),pf=new df,gf=function(){function t(e){y(this,t),this.manager=void 0!==e?e:pf,this.crossOrigin=\"anonymous\",this.withCredentials=!1,this.path=\"\",this.resourcePath=\"\",this.requestHeader={}}return _(t,[{key:\"load\",value:function(){}},{key:\"loadAsync\",value:function(t,e){var n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}},{key:\"parse\",value:function(){}},{key:\"setCrossOrigin\",value:function(t){return this.crossOrigin=t,this}},{key:\"setWithCredentials\",value:function(t){return this.withCredentials=t,this}},{key:\"setPath\",value:function(t){return this.path=t,this}},{key:\"setResourcePath\",value:function(t){return this.resourcePath=t,this}},{key:\"setRequestHeader\",value:function(t){return this.requestHeader=t,this}}]),t}(),vf={},mf=function(t){v(n,t);var e=m(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:\"load\",value:function(t,e,n,i){var r=this;void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var a,s=ff.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;void 0===vf[t]?(vf[t]=[],vf[t].push({onLoad:e,onProgress:n,onError:i}),a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?\"include\":\"same-origin\"}),fetch(a).then((function(e){if(200!==e.status&&0!==e.status)throw Error('fetch for \"'.concat(e.url,'\" responded with ').concat(e.status,\": \")+e.statusText);if(e.status,\"undefined\"==typeof ReadableStream||void 0===e.body.getReader)return e;var n=vf[t],i=e.body.getReader(),r=(e=e.headers.get(\"Content-Length\"))?parseInt(e):0,a=0!==r,s=0;return e=new ReadableStream({start:function(t){!function e(){i.read().then((function(i){var o=i.done,u=i.value;if(o)t.close();else{s+=u.byteLength;for(var l=new ProgressEvent(\"progress\",{lengthComputable:a,loaded:s,total:r}),c=0,h=n.length;c<h;c++){var f=n[c];f.onProgress&&f.onProgress(l)}t.enqueue(u),e()}}))}()}}),new Response(e)})).then((function(t){switch(r.responseType){case\"arraybuffer\":return t.arrayBuffer();case\"blob\":return t.blob();case\"document\":return t.text().then((function(t){return(new DOMParser).parseFromString(t,r.mimeType)}));case\"json\":return t.json();default:return t.text()}})).then((function(e){ff.add(t,e);var n=vf[t];delete vf[t];for(var i=0,r=n.length;i<r;i++){var a=n[i];a.onLoad&&a.onLoad(e)}})).catch((function(e){var n=vf[t];if(void 0===n)throw r.manager.itemError(t),e;delete vf[t];for(var i=0,a=n.length;i<a;i++){var s=n[i];s.onError&&s.onError(e)}r.manager.itemError(t)})).finally((function(){r.manager.itemEnd(t)})),this.manager.itemStart(t)):vf[t].push({onLoad:e,onProgress:n,onError:i})}},{key:\"setResponseType\",value:function(t){return this.responseType=t,this}},{key:\"setMimeType\",value:function(t){return this.mimeType=t,this}}]),n}(gf),yf=function(t){v(n,t);var e=m(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:\"load\",value:function(t,e,n,i){var r=this,a=new mf(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(n){i&&i(n),r.manager.itemError(t)}}),n,i)}},{key:\"parse\",value:function(t){for(var e=[],n=0;n<t.length;n++){var i=hf.parse(t[n]);e.push(i)}return e}}]),n}(gf),_f=function(t){v(n,t);var e=m(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:\"load\",value:function(t,e,n,i){var r=this,a=[],s=new Cc,o=new mf(this.manager);o.setPath(this.path),o.setResponseType(\"arraybuffer\"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);var u=0;if(Array.isArray(t))for(var l=0,c=t.length;l<c;++l)!function(l){o.load(t[l],(function(t){t=r.parse(t,!0),a[l]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},u+=1,6===u&&(1===t.mipmapCount&&(s.minFilter=pe),s.image=a,s.format=t.format,s.needsUpdate=!0,e&&e(s))}),n,i)}(l);else o.load(t,(function(t){var n=r.parse(t,!0);if(n.isCubemap){for(var i=n.mipmaps.length/n.mipmapCount,o=0;o<i;o++){a[o]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[o].mipmaps.push(n.mipmaps[o*n.mipmapCount+u]),a[o].format=n.format,a[o].width=n.width,a[o].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=pe),s.format=n.format,s.needsUpdate=!0,e&&e(s)}),n,i);return s}}]),n}(gf),xf=function(t){v(n,t);var e=m(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:\"load\",value:function(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=ff.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;var s=Gi(\"img\");function o(){l(),ff.add(t,this),e&&e(this),r.manager.itemEnd(t)}function u(e){l(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function l(){s.removeEventListener(\"load\",o,!1),s.removeEventListener(\"error\",u,!1)}return s.addEventListener(\"load\",o,!1),s.addEventListener(\"error\",u,!1),\"data:\"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(t),s.src=t,s}}]),n}(gf),bf=function(t){v(n,t);var e=m(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:\"load\",value:function(t,e,n,i){var r=new ys,a=new xf(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var s=0,o=0;o<t.length;++o)!function(n){a.load(t[n],(function(t){r.images[n]=t,s++,6===s&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}(o);return r}}]),n}(gf),wf=function(t){v(n,t);var e=m(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:\"load\",value:function(t,e,n,i){var r=this,a=new ql,s=new mf(this.manager);return s.setResponseType(\"arraybuffer\"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(t,(function(t){(t=r.parse(t))&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:oe,a.wrapT=void 0!==t.wrapT?t.wrapT:oe,a.magFilter=void 0!==t.magFilter?t.magFilter:pe,a.minFilter=void 0!==t.minFilter?t.minFilter:pe,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.encoding&&(a.encoding=t.encoding),void 0!==t.flipY&&(a.flipY=t.flipY),void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps,a.minFilter=me),1===t.mipmapCount&&(a.minFilter=pe),void 0!==t.generateMipmaps&&(a.generateMipmaps=t.generateMipmaps),a.needsUpdate=!0,e&&e(a,t))}),n,i),a}}]),n}(gf),Sf=function(t){v(n,t);var e=m(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:\"load\",value:function(t,e,n,i){var r=new Yi,a=new xf(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}]),n}(gf),Cf=function(t){v(n,t);var e=m(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return y(this,n),i=e.call(this),i.type=\"Light\",i.color=new wa(t),i.intensity=r,i}return _(n,[{key:\"dispose\",value:function(){}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this}},{key:\"toJSON\",value:function(t){var e=f(d(n.prototype),\"toJSON\",this).call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}]),n}(na);Cf.prototype.isLight=!0;var Mf=function(t){v(n,t);var e=m(n);function n(t,i,r){var a;return y(this,n),a=e.call(this,t,r),a.type=\"HemisphereLight\",a.position.copy(na.DefaultUp),a.updateMatrix(),a.groundColor=new wa(i),a}return _(n,[{key:\"copy\",value:function(t){return Cf.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}]),n}(Cf);Mf.prototype.isHemisphereLight=!0;var Tf=new Pr,kf=new tr,Af=new tr,Ef=function(){function t(e){y(this,t),this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Bi(512,512),this.map=null,this.mapPass=null,this.matrix=new Pr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ts,this._frameExtents=new Bi(1,1),this._viewportCount=1,this._viewports=[new Ji(0,0,1,1)]}return _(t,[{key:\"getViewportCount\",value:function(){return this._viewportCount}},{key:\"getFrustum\",value:function(){return this._frustum}},{key:\"updateMatrices\",value:function(t){var e=this.camera,n=this.matrix;kf.setFromMatrixPosition(t.matrixWorld),e.position.copy(kf),Af.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Af),e.updateMatrixWorld(),Tf.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Tf),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}},{key:\"getViewport\",value:function(t){return this._viewports[t]}},{key:\"getFrameExtents\",value:function(){return this._frameExtents}},{key:\"dispose\",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:\"copy\",value:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"toJSON\",value:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}]),t}(),Of=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this,new vs(50,1,.5,500)),t.focus=1,t}return _(n,[{key:\"updateMatrices\",value:function(t){var e=this.camera,i=2*Ei*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=t.distance||e.far;i===e.fov&&r===e.aspect&&a===e.far||(e.fov=i,e.aspect=r,e.far=a,e.updateProjectionMatrix()),f(d(n.prototype),\"updateMatrices\",this).call(this,t)}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.focus=t.focus,this}}]),n}(Ef);Of.prototype.isSpotLightShadow=!0;var Pf=function(t){v(n,t);var e=m(n);function n(t,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return y(this,n),r=e.call(this,t,i),r.type=\"SpotLight\",r.position.copy(na.DefaultUp),r.updateMatrix(),r.target=new na,r.distance=a,r.angle=s,r.penumbra=o,r.decay=u,r.shadow=new Of,r}return _(n,[{key:\"power\",get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}},{key:\"dispose\",value:function(){this.shadow.dispose()}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}]),n}(Cf);Pf.prototype.isSpotLight=!0;var If=new Pr,Lf=new tr,Df=new tr,Rf=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this,new vs(90,1,.5,500)),t._frameExtents=new Bi(4,2),t._viewportCount=6,t._viewports=[new Ji(2,1,1,1),new Ji(0,1,1,1),new Ji(3,1,1,1),new Ji(1,1,1,1),new Ji(3,0,1,1),new Ji(1,0,1,1)],t._cubeDirections=[new tr(1,0,0),new tr(-1,0,0),new tr(0,0,1),new tr(0,0,-1),new tr(0,1,0),new tr(0,-1,0)],t._cubeUps=[new tr(0,1,0),new tr(0,1,0),new tr(0,1,0),new tr(0,1,0),new tr(0,0,1),new tr(0,0,-1)],t}return _(n,[{key:\"updateMatrices\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Lf.setFromMatrixPosition(t.matrixWorld),n.position.copy(Lf),Df.copy(n.position),Df.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Df),n.updateMatrixWorld(),i.makeTranslation(-Lf.x,-Lf.y,-Lf.z),If.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(If)}}]),n}(Ef);Rf.prototype.isPointLightShadow=!0;var Nf=function(t){v(n,t);var e=m(n);function n(t,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return y(this,n),r=e.call(this,t,i),r.type=\"PointLight\",r.distance=a,r.decay=s,r.shadow=new Rf,r}return _(n,[{key:\"power\",get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}},{key:\"dispose\",value:function(){this.shadow.dispose()}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}]),n}(Cf);Nf.prototype.isPointLight=!0;var Ff=function(t){v(n,t);var e=m(n);function n(){return y(this,n),e.call(this,new zs(-5,5,5,-5,.5,500))}return _(n)}(Ef);Ff.prototype.isDirectionalLightShadow=!0;var Bf=function(t){v(n,t);var e=m(n);function n(t,i){var r;return y(this,n),r=e.call(this,t,i),r.type=\"DirectionalLight\",r.position.copy(na.DefaultUp),r.updateMatrix(),r.target=new na,r.shadow=new Ff,r}return _(n,[{key:\"dispose\",value:function(){this.shadow.dispose()}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}]),n}(Cf);Bf.prototype.isDirectionalLight=!0;var zf=function(t){v(n,t);var e=m(n);function n(t,i){var r;return y(this,n),r=e.call(this,t,i),r.type=\"AmbientLight\",r}return _(n)}(Cf);zf.prototype.isAmbientLight=!0;var jf=function(t){v(n,t);var e=m(n);function n(t,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return y(this,n),r=e.call(this,t,i),r.type=\"RectAreaLight\",r.width=a,r.height=s,r}return _(n,[{key:\"power\",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(t){this.intensity=t/(this.width*this.height*Math.PI)}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.width=t.width,this.height=t.height,this}},{key:\"toJSON\",value:function(t){var e=f(d(n.prototype),\"toJSON\",this).call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}]),n}(Cf);jf.prototype.isRectAreaLight=!0;var Uf=function(){function t(){y(this,t),this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new tr)}return _(t,[{key:\"set\",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}},{key:\"zero\",value:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}},{key:\"getAt\",value:function(t,e){var n=t.x,i=t.y,r=t.z;return t=this.coefficients,e.copy(t[0]).multiplyScalar(.282095),e.addScaledVector(t[1],.488603*i),e.addScaledVector(t[2],.488603*r),e.addScaledVector(t[3],.488603*n),e.addScaledVector(t[4],n*i*1.092548),e.addScaledVector(t[5],i*r*1.092548),e.addScaledVector(t[6],.315392*(3*r*r-1)),e.addScaledVector(t[7],n*r*1.092548),e.addScaledVector(t[8],.546274*(n*n-i*i)),e}},{key:\"getIrradianceAt\",value:function(t,e){var n=t.x,i=t.y,r=t.z;return t=this.coefficients,e.copy(t[0]).multiplyScalar(.886227),e.addScaledVector(t[1],1.023328*i),e.addScaledVector(t[2],1.023328*r),e.addScaledVector(t[3],1.023328*n),e.addScaledVector(t[4],.858086*n*i),e.addScaledVector(t[5],.858086*i*r),e.addScaledVector(t[6],.743125*r*r-.247708),e.addScaledVector(t[7],.858086*n*r),e.addScaledVector(t[8],.429043*(n*n-i*i)),e}},{key:\"add\",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}},{key:\"addScaledSH\",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}},{key:\"scale\",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}},{key:\"lerp\",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}},{key:\"equals\",value:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}},{key:\"copy\",value:function(t){return this.set(t.coefficients)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"fromArray\",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}},{key:\"toArray\",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}}],[{key:\"getBasisAt\",value:function(t,e){var n=t.x,i=t.y;t=t.z,e[0]=.282095,e[1]=.488603*i,e[2]=.488603*t,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*t,e[6]=.315392*(3*t*t-1),e[7]=1.092548*n*t,e[8]=.546274*(n*n-i*i)}}]),t}();Uf.prototype.isSphericalHarmonics3=!0;var Vf=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uf,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return y(this,n),t=e.call(this,void 0,r),t.sh=i,t}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.sh.copy(t.sh),this}},{key:\"fromJSON\",value:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}},{key:\"toJSON\",value:function(t){var e=f(d(n.prototype),\"toJSON\",this).call(this,t);return e.object.sh=this.sh.toArray(),e}}]),n}(Cf);Vf.prototype.isLightProbe=!0;var Wf=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this,t),i.textures={},i}return _(n,[{key:\"load\",value:function(t,e,n,i){var r=this,a=new mf(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(n){i&&i(n),r.manager.itemError(t)}}),n,i)}},{key:\"parse\",value:function(t){var e=this.textures;function n(t){return e[t],e[t]}var i=new Zh[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=t.sheen),void 0!==t.sheenColor&&(i.sheenColor=(new wa).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(i.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.specularIntensity&&(i.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.thickness&&(i.thickness=t.thickness),void 0!==t.attenuationDistance&&(i.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(t.attenuationColor),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.shadowSide&&(i.shadowSide=t.shadowSide),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.format&&(i.format=t.format),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.alphaToCoverage&&(i.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(i.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&(\"number\"==typeof t.vertexColors?i.vertexColors=0<t.vertexColors:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var r in t.uniforms){var a=t.uniforms[r];switch(i.uniforms[r]={},a.type){case\"t\":i.uniforms[r].value=n(a.value);break;case\"c\":i.uniforms[r].value=(new wa).setHex(a.value);break;case\"v2\":i.uniforms[r].value=(new Bi).fromArray(a.value);break;case\"v3\":i.uniforms[r].value=(new tr).fromArray(a.value);break;case\"v4\":i.uniforms[r].value=(new Ji).fromArray(a.value);break;case\"m3\":i.uniforms[r].value=(new zi).fromArray(a.value);break;case\"m4\":i.uniforms[r].value=(new Pr).fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var s in t.extensions)i.extensions[s]=t.extensions[s];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var o=t.normalScale;!1===Array.isArray(o)&&(o=[o,o]),i.normalScale=(new Bi).fromArray(o)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(i.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(i.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Bi).fromArray(t.clearcoatNormalScale)),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(i.thicknessMap=n(t.thicknessMap)),void 0!==t.sheenColorMap&&(i.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(i.sheenRoughnessMap=n(t.sheenRoughnessMap)),i}},{key:\"setTextures\",value:function(t){return this.textures=t,this}}]),n}(gf),Gf=function(){function t(){y(this,t)}return _(t,null,[{key:\"decodeText\",value:function(t){if(\"undefined\"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e=\"\",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}},{key:\"extractUrlBase\",value:function(t){var e=t.lastIndexOf(\"/\");return-1===e?\"./\":t.substr(0,e+1)}},{key:\"resolveURL\",value:function(t,e){return\"string\"!=typeof t||\"\"===t?\"\":(/^https?:\\/\\//i.test(e)&&/^\\//.test(t)&&(e=e.replace(/(^https?:\\/\\/[^\\/]+).*/i,\"$1\")),/^(https?:)?\\/\\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}]),t}(),Hf=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this),t.type=\"InstancedBufferGeometry\",t.instanceCount=1/0,t}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.instanceCount=t.instanceCount,this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"toJSON\",value:function(){var t=f(d(n.prototype),\"toJSON\",this).call(this,this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}]),n}(Ga);Hf.prototype.isInstancedBufferGeometry=!0;var Xf,Yf=function(t){v(n,t);var e=m(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:\"load\",value:function(t,e,n,i){var r=this,a=new mf(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(n){i&&i(n),r.manager.itemError(t)}}),n,i)}},{key:\"parse\",value:function(t){var e={},n={};function i(t,i){if(void 0!==e[i])return e[i];var r=t.interleavedBuffers[i];t=function(t,e){return void 0!==n[e]?n[e]:(t=(t=t.arrayBuffers)[e],t=new Uint32Array(t).buffer,n[e]=t)}(t,r.buffer),t=Wi(r.type,t);var a=new _l(t,r.stride);return a.uuid=r.uuid,e[i]=a,a}var r=new(t.isInstancedBufferGeometry?Hf:Ga),a=t.data.index;void 0!==a&&(C=Wi(a.type,a.array),r.setIndex(new Ta(C,1)));var s=t.data.attributes;for(var o in s){var u=s[o],l=void 0;if(u.isInterleavedBufferAttribute){var c=i(t.data,u.data);l=new bl(c,u.itemSize,u.offset,u.normalized)}else c=Wi(u.type,u.array),l=new(u.isInstancedBufferAttribute?Ql:Ta)(c,u.itemSize,u.normalized);void 0!==u.name&&(l.name=u.name),void 0!==u.usage&&l.setUsage(u.usage),void 0!==u.updateRange&&(l.updateRange.offset=u.updateRange.offset,l.updateRange.count=u.updateRange.count),r.setAttribute(o,l)}var h=t.data.morphAttributes;if(h)for(var f in h){for(var d=h[f],p=[],g=0,v=d.length;g<v;g++){var m,y=d[g],_=void 0;_=y.isInterleavedBufferAttribute?(m=i(t.data,y.data),new bl(m,y.itemSize,y.offset,y.normalized)):(m=Wi(y.type,y.array),new Ta(m,y.itemSize,y.normalized)),void 0!==y.name&&(_.name=y.name),p.push(_)}r.morphAttributes[f]=p}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);var x=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==x)for(var b=0,w=x.length;b!==w;++b){var S=x[b];r.addGroup(S.start,S.count,S.materialIndex)}var C=t.data.boundingSphere;if(void 0!==C){var M=new tr;void 0!==C.center&&M.fromArray(C.center),r.boundingSphere=new wr(M,C.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}]),n}(gf),qf=function(t){v(n,t);var e=m(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:\"load\",value:function(t,e,n,i){var r=this,a=\"\"===this.path?Gf.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;var s=new mf(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(t){var n=null;try{n=JSON.parse(t)}catch(t){return void(void 0!==i&&i(t))}var a=n.metadata;void 0!==a&&void 0!==a.type&&\"geometry\"!==a.type.toLowerCase()&&r.parse(n,e)}),n,i)}},{key:\"loadAsync\",value:function(){var t=o(regeneratorRuntime.mark((function t(e,n){var i,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=\"\"===this.path?Gf.extractUrlBase(e):this.path,this.resourcePath=this.resourcePath||i,r=new mf(this.manager),r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),t.next=8,r.loadAsync(e,n);case 8:if(n=t.sent,a=(n=JSON.parse(n)).metadata,void 0!==a&&void 0!==a.type&&\"geometry\"!==a.type.toLowerCase()){t.next=12;break}throw new Error(\"THREE.ObjectLoader: Can't load \"+e);case 12:return t.abrupt(\"return\",this.parseAsync(n));case 13:case\"end\":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:\"parse\",value:function(t,e){var n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),a=this.parseImages(t.images,(function(){void 0!==e&&e(o)})),s=this.parseTextures(t.textures,a);i=this.parseMaterials(t.materials,s);var o=this.parseObject(t.object,r,i,s,n);if(t=this.parseSkeletons(t.skeletons,o),this.bindSkeletons(o,t),void 0!==e){var u=!1;for(var l in a)if(a[l]instanceof HTMLImageElement){u=!0;break}!1===u&&e(o)}return o}},{key:\"parseAsync\",value:function(){var t=o(regeneratorRuntime.mark((function t(e){var n,i,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),t.next=5,this.parseImagesAsync(e.images);case 5:return a=t.sent,i=this.parseTextures(e.textures,a),a=this.parseMaterials(e.materials,i),n=this.parseObject(e.object,r,a,i,n),e=this.parseSkeletons(e.skeletons,n),t.abrupt(\"return\",(this.bindSkeletons(n,e),n));case 8:case\"end\":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:\"parseShapes\",value:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new ah).fromJSON(t[n]);e[r.uuid]=r}return e}},{key:\"parseSkeletons\",value:function(t,e){var n={},i={};if(e.traverse((function(t){t.isBone&&(i[t.uuid]=t)})),void 0!==t)for(var r=0,a=t.length;r<a;r++){var s=(new Kl).fromJSON(t[r],i);n[s.uuid]=s}return n}},{key:\"parseGeometries\",value:function(t,e){var n={};if(void 0!==t)for(var i=new Yf,r=0,a=t.length;r<a;r++){var s=void 0,o=t[r];switch(o.type){case\"BufferGeometry\":case\"InstancedBufferGeometry\":s=i.parse(o);break;case\"Geometry\":break;default:o.type in jh&&(s=jh[o.type].fromJSON(o,e))}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),n[o.uuid]=s}return n}},{key:\"parseMaterials\",value:function(t,e){var n={},i={};if(void 0!==t){var r=new Wf;r.setTextures(e);for(var a=0,s=t.length;a<s;a++){var o=t[a];if(\"MultiMaterial\"===o.type){for(var u=[],l=0;l<o.materials.length;l++){var c=o.materials[l];void 0===n[c.uuid]&&(n[c.uuid]=r.parse(c)),u.push(n[c.uuid])}i[o.uuid]=u}else void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i}},{key:\"parseAnimations\",value:function(t){var e={};if(void 0!==t)for(var n=0;n<t.length;n++){var i=t[n];e[(i=hf.parse(i)).uuid]=i}return e}},{key:\"parseImages\",value:function(t,e){var n,i=this,r={};function a(t){return\"string\"!=typeof t?t.data?{data:Wi(t.type,t.data),width:t.width,height:t.height}:null:(t=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(t=t)?t:i.resourcePath+t,e=t,i.manager.itemStart(e),n.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)})));var e}if(void 0!==t&&0<t.length){e=new df(e),n=new xf(e),n.setCrossOrigin(this.crossOrigin);for(var s=0,o=t.length;s<o;s++){var u=t[s],l=u.url;if(Array.isArray(l)){r[u.uuid]=[];for(var c=0,h=l.length;c<h;c++){var f=a(l[c]);null!==f&&(f instanceof HTMLImageElement?r[u.uuid].push(f):r[u.uuid].push(new ql(f.data,f.width,f.height)))}}else{var d=a(u.url);null!==d&&(r[u.uuid]=d)}}}return r}},{key:\"parseImagesAsync\",value:function(){var t=o(regeneratorRuntime.mark((function t(e){var n,i,r,a,s,u,l,c,h,f,d,p,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=function(){return s=o(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",\"string\"!=typeof e?e.data?{data:Wi(e.type,e.data),width:e.width,height:e.height}:null:(e=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(e)?e:n.resourcePath+e,r.loadAsync(e)));case 1:case\"end\":return t.stop()}}),t)}))),s.apply(this,arguments)},a=function(t){return s.apply(this,arguments)},n=this,i={},!(void 0!==e&&0<e.length)){t.next=28;break}r=new xf(this.manager),r.setCrossOrigin(this.crossOrigin),u=0,l=e.length;case 6:if(!(u<l)){t.next=28;break}if(c=e[u],h=c.url,!Array.isArray(h)){t.next=21;break}i[c.uuid]=[],f=0,d=h.length;case 11:if(!(f<d)){t.next=19;break}return t.next=14,a(h[f]);case 14:p=t.sent,null!==p&&(p instanceof HTMLImageElement?i[c.uuid].push(p):i[c.uuid].push(new ql(p.data,p.width,p.height)));case 16:f++,t.next=11;break;case 19:t.next=25;break;case 21:return t.next=23,a(c.url);case 23:g=t.sent,null!==g&&(i[c.uuid]=g);case 25:u++,t.next=6;break;case 28:return t.abrupt(\"return\",i);case 29:case\"end\":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:\"parseTextures\",value:function(t,e){function n(t,e){return\"number\"==typeof t?t:e[t]}var i={};if(void 0!==t)for(var r=0,a=t.length;r<a;r++){var s=t[r],o=void 0;s.image,e[s.image];var u=e[s.image];Array.isArray(u)?(o=new ys(u),6===u.length&&(o.needsUpdate=!0)):(o=u&&u.data?new ql(u.data,u.width,u.height):new Yi(u),u&&(o.needsUpdate=!0)),o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,Jf)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],Zf),o.wrapT=n(s.wrap[1],Zf)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,Kf)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,Kf)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),void 0!==s.userData&&(o.userData=s.userData),i[s.uuid]=o}return i}},{key:\"parseObject\",value:function(t,e,n,i,r){var a,s,o;function u(t){return e[t],e[t]}function l(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var a=t[i];n[a],e.push(n[a])}return e}return n[t],n[t]}}function c(t){return i[t],i[t]}switch(t.type){case\"Scene\":a=new yl,void 0!==t.background&&(Number.isInteger(t.background)?a.background=new wa(t.background):a.background=c(t.background)),void 0!==t.environment&&(a.environment=c(t.environment)),void 0!==t.fog&&(\"Fog\"===t.fog.type?a.fog=new ml(t.fog.color,t.fog.near,t.fog.far):\"FogExp2\"===t.fog.type&&(a.fog=new vl(t.fog.color,t.fog.density)));break;case\"PerspectiveCamera\":a=new vs(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case\"OrthographicCamera\":a=new zs(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case\"AmbientLight\":a=new zf(t.color,t.intensity);break;case\"DirectionalLight\":a=new Bf(t.color,t.intensity);break;case\"PointLight\":a=new Nf(t.color,t.intensity,t.distance,t.decay);break;case\"RectAreaLight\":a=new jf(t.color,t.intensity,t.width,t.height);break;case\"SpotLight\":a=new Pf(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case\"HemisphereLight\":a=new Mf(t.color,t.groundColor,t.intensity);break;case\"LightProbe\":a=(new Vf).fromJSON(t);break;case\"SkinnedMesh\":s=u(t.geometry),o=l(t.material),a=new Xl(s,o),void 0!==t.bindMode&&(a.bindMode=t.bindMode),void 0!==t.bindMatrix&&a.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(a.skeleton=t.skeleton);break;case\"Mesh\":s=u(t.geometry),o=l(t.material),a=new us(s,o);break;case\"InstancedMesh\":s=u(t.geometry),o=l(t.material);var h=t.count,f=t.instanceMatrix,d=t.instanceColor;a=new ic(s,o,h),a.instanceMatrix=new Ql(new Float32Array(f.array),16),void 0!==d&&(a.instanceColor=new Ql(new Float32Array(d.array),d.itemSize));break;case\"LOD\":a=new jl;break;case\"Line\":a=new cc(u(t.geometry),l(t.material));break;case\"LineLoop\":a=new pc(u(t.geometry),l(t.material));break;case\"LineSegments\":a=new dc(u(t.geometry),l(t.material));break;case\"PointCloud\":case\"Points\":a=new xc(u(t.geometry),l(t.material));break;case\"Sprite\":a=new Nl(l(t.material));break;case\"Group\":a=new ul;break;case\"Bone\":a=new Yl;break;default:a=new na}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(a.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children)for(var p=t.children,g=0;g<p.length;g++)a.add(this.parseObject(p[g],e,n,i,r));if(void 0!==t.animations)for(var v=t.animations,m=0;m<v.length;m++){var y=v[m];a.animations.push(r[y])}if(\"LOD\"===t.type){void 0!==t.autoUpdate&&(a.autoUpdate=t.autoUpdate);for(var _=t.levels,x=0;x<_.length;x++){var b=_[x],w=a.getObjectByProperty(\"uuid\",b.object);void 0!==w&&a.addLevel(w,b.distance)}}return a}},{key:\"bindSkeletons\",value:function(t,e){0!==Object.keys(e).length&&t.traverse((function(t){var n;!0===t.isSkinnedMesh&&void 0!==t.skeleton&&(void 0===(n=e[t.skeleton])||t.bind(n,t.bindMatrix))}))}},{key:\"setTexturePath\",value:function(t){return this.setResourcePath(t)}}]),n}(gf),Jf={UVMapping:$t,CubeReflectionMapping:te,CubeRefractionMapping:ee,EquirectangularReflectionMapping:ne,EquirectangularRefractionMapping:ie,CubeUVReflectionMapping:re,CubeUVRefractionMapping:ae},Zf={RepeatWrapping:se,ClampToEdgeWrapping:oe,MirroredRepeatWrapping:ue},Kf={NearestFilter:le,NearestMipmapNearestFilter:ce,NearestMipmapLinearFilter:fe,LinearFilter:pe,LinearMipmapNearestFilter:ge,LinearMipmapLinearFilter:me},Qf=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this,t),i.options={premultiplyAlpha:\"none\"},i}return _(n,[{key:\"setOptions\",value:function(t){return this.options=t,this}},{key:\"load\",value:function(t,e,n,i){void 0===t&&(t=\"\"),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=ff.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;var s={};s.credentials=\"anonymous\"===this.crossOrigin?\"same-origin\":\"include\",s.headers=this.requestHeader,fetch(t,s).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:\"none\"}))})).then((function(n){ff.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}]),n}(gf);Qf.prototype.isImageBitmapLoader=!0;var $f={getContext:function(){return void 0===Xf&&(Xf=new(window.AudioContext||window.webkitAudioContext)),Xf},setContext:function(t){Xf=t}},td=function(t){v(n,t);var e=m(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:\"load\",value:function(t,e,n,i){var r=this,a=new mf(this.manager);a.setResponseType(\"arraybuffer\"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){try{var a=n.slice(0);$f.getContext().decodeAudioData(a,(function(t){e(t)}))}catch(n){i&&i(n),r.manager.itemError(t)}}),n,i)}}]),n}(gf),ed=function(t){v(n,t);var e=m(n);function n(t,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;y(this,n),r=e.call(this,void 0,a);var s=(new wa).set(t);return a=(new wa).set(i),t=new tr(s.r,s.g,s.b),i=new tr(a.r,a.g,a.b),a=(s=Math.sqrt(Math.PI))*Math.sqrt(.75),r.sh.coefficients[0].copy(t).add(i).multiplyScalar(s),r.sh.coefficients[1].copy(t).sub(i).multiplyScalar(a),r}return _(n)}(Vf);ed.prototype.isHemisphereLightProbe=!0;var nd=function(t){v(n,t);var e=m(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return y(this,n),i=e.call(this,void 0,r),t=(new wa).set(t),i.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI)),i}return _(n)}(Vf);nd.prototype.isAmbientLightProbe=!0;var id=new Pr,rd=new Pr,ad=new Pr,sd=function(){function t(){y(this,t),this.type=\"StereoCamera\",this.aspect=1,this.eyeSep=.064,this.cameraL=new vs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new vs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return _(t,[{key:\"update\",value:function(t){var e,n,i,r,a=this._cache;a.focus===t.focus&&a.fov===t.fov&&a.aspect===t.aspect*this.aspect&&a.near===t.near&&a.far===t.far&&a.zoom===t.zoom&&a.eyeSep===this.eyeSep||(a.focus=t.focus,a.fov=t.fov,a.aspect=t.aspect*this.aspect,a.near=t.near,a.far=t.far,a.zoom=t.zoom,a.eyeSep=this.eyeSep,ad.copy(t.projectionMatrix),e=(r=a.eyeSep/2)*a.near/a.focus,n=a.near*Math.tan(Ai*a.fov*.5)/a.zoom,rd.elements[12]=-r,id.elements[12]=r,i=-n*a.aspect+e,r=n*a.aspect+e,ad.elements[0]=2*a.near/(r-i),ad.elements[8]=(r+i)/(r-i),this.cameraL.projectionMatrix.copy(ad),i=-n*a.aspect-e,r=n*a.aspect-e,ad.elements[0]=2*a.near/(r-i),ad.elements[8]=(r+i)/(r-i),this.cameraR.projectionMatrix.copy(ad)),this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(rd),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(id)}}]),t}(),od=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];y(this,t),this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return _(t,[{key:\"start\",value:function(){this.startTime=ud(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:\"stop\",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:\"getElapsedTime\",value:function(){return this.getDelta(),this.elapsedTime}},{key:\"getDelta\",value:function(){var t,e=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(e=((t=ud())-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e),e)}}]),t}();function ud(){return(\"undefined\"==typeof performance?Date:performance).now()}var ld=new tr,cd=new $i,hd=new tr,fd=new tr,dd=function(t){v(n,t);var e=m(n);function n(){var t;return y(this,n),t=e.call(this),t.type=\"AudioListener\",t.context=$f.getContext(),t.gain=t.context.createGain(),t.gain.connect(t.context.destination),t.filter=null,t.timeDelta=0,t._clock=new od,t}return _(n,[{key:\"getInput\",value:function(){return this.gain}},{key:\"removeFilter\",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:\"getFilter\",value:function(){return this.filter}},{key:\"setFilter\",value:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:\"getMasterVolume\",value:function(){return this.gain.gain.value}},{key:\"setMasterVolume\",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}},{key:\"updateMatrixWorld\",value:function(t){f(d(n.prototype),\"updateMatrixWorld\",this).call(this,t);var e=this.context.listener,i=this.up;this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ld,cd,hd),fd.set(0,0,-1).applyQuaternion(cd),e.positionX?(t=this.context.currentTime+this.timeDelta,e.positionX.linearRampToValueAtTime(ld.x,t),e.positionY.linearRampToValueAtTime(ld.y,t),e.positionZ.linearRampToValueAtTime(ld.z,t),e.forwardX.linearRampToValueAtTime(fd.x,t),e.forwardY.linearRampToValueAtTime(fd.y,t),e.forwardZ.linearRampToValueAtTime(fd.z,t),e.upX.linearRampToValueAtTime(i.x,t),e.upY.linearRampToValueAtTime(i.y,t),e.upZ.linearRampToValueAtTime(i.z,t)):(e.setPosition(ld.x,ld.y,ld.z),e.setOrientation(fd.x,fd.y,fd.z,i.x,i.y,i.z))}}]),n}(na),pd=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i.type=\"Audio\",i.listener=t,i.context=t.context,i.gain=i.context.createGain(),i.gain.connect(t.getInput()),i.autoplay=!1,i.buffer=null,i.detune=0,i.loop=!1,i.loopStart=0,i.loopEnd=0,i.offset=0,i.duration=void 0,i.playbackRate=1,i.isPlaying=!1,i.hasPlaybackControl=!0,i.source=null,i.sourceType=\"empty\",i._startedAt=0,i._progress=0,i._connected=!1,i.filters=[],i}return _(n,[{key:\"getOutput\",value:function(){return this.gain}},{key:\"setNodeSource\",value:function(t){return this.hasPlaybackControl=!1,this.sourceType=\"audioNode\",this.source=t,this.connect(),this}},{key:\"setMediaElementSource\",value:function(t){return this.hasPlaybackControl=!1,this.sourceType=\"mediaNode\",this.source=this.context.createMediaElementSource(t),this.connect(),this}},{key:\"setMediaStreamSource\",value:function(t){return this.hasPlaybackControl=!1,this.sourceType=\"mediaStreamNode\",this.source=this.context.createMediaStreamSource(t),this.connect(),this}},{key:\"setBuffer\",value:function(t){return this.buffer=t,this.sourceType=\"buffer\",this.autoplay&&this.play(),this}},{key:\"play\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying&&!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}}},{key:\"pause\",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}},{key:\"stop\",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}},{key:\"connect\",value:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:\"disconnect\",value:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:\"getFilters\",value:function(){return this.filters}},{key:\"setFilters\",value:function(t){return t=t||[],!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}},{key:\"setDetune\",value:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:\"getDetune\",value:function(){return this.detune}},{key:\"getFilter\",value:function(){return this.getFilters()[0]}},{key:\"setFilter\",value:function(t){return this.setFilters(t?[t]:[])}},{key:\"setPlaybackRate\",value:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}},{key:\"getPlaybackRate\",value:function(){return this.playbackRate}},{key:\"onEnded\",value:function(){this.isPlaying=!1}},{key:\"getLoop\",value:function(){return!1!==this.hasPlaybackControl&&this.loop}},{key:\"setLoop\",value:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this}},{key:\"setLoopStart\",value:function(t){return this.loopStart=t,this}},{key:\"setLoopEnd\",value:function(t){return this.loopEnd=t,this}},{key:\"getVolume\",value:function(){return this.gain.gain.value}},{key:\"setVolume\",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}]),n}(na),gd=new tr,vd=new $i,md=new tr,yd=new tr,_d=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this,t),i.panner=i.context.createPanner(),i.panner.panningModel=\"HRTF\",i.panner.connect(i.gain),i}return _(n,[{key:\"getOutput\",value:function(){return this.panner}},{key:\"getRefDistance\",value:function(){return this.panner.refDistance}},{key:\"setRefDistance\",value:function(t){return this.panner.refDistance=t,this}},{key:\"getRolloffFactor\",value:function(){return this.panner.rolloffFactor}},{key:\"setRolloffFactor\",value:function(t){return this.panner.rolloffFactor=t,this}},{key:\"getDistanceModel\",value:function(){return this.panner.distanceModel}},{key:\"setDistanceModel\",value:function(t){return this.panner.distanceModel=t,this}},{key:\"getMaxDistance\",value:function(){return this.panner.maxDistance}},{key:\"setMaxDistance\",value:function(t){return this.panner.maxDistance=t,this}},{key:\"setDirectionalCone\",value:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}},{key:\"updateMatrixWorld\",value:function(t){if(f(d(n.prototype),\"updateMatrixWorld\",this).call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(gd,vd,md),yd.set(0,0,1).applyQuaternion(vd);var e=this.panner;e.positionX?(t=this.context.currentTime+this.listener.timeDelta,e.positionX.linearRampToValueAtTime(gd.x,t),e.positionY.linearRampToValueAtTime(gd.y,t),e.positionZ.linearRampToValueAtTime(gd.z,t),e.orientationX.linearRampToValueAtTime(yd.x,t),e.orientationY.linearRampToValueAtTime(yd.y,t),e.orientationZ.linearRampToValueAtTime(yd.z,t)):(e.setPosition(gd.x,gd.y,gd.z),e.setOrientation(yd.x,yd.y,yd.z))}}}]),n}(pd),xd=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;y(this,t),this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}return _(t,[{key:\"getFrequencyData\",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:\"getAverageFrequency\",value:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}]),t}(),bd=function(){function t(e,n,i){var r,a,s;switch(y(this,t),this.binding=e,this.valueSize=i,n){case\"quaternion\":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case\"string\":case\"bool\":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return _(t,[{key:\"accumulate\",value:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,a=this.cumulativeWeight;if(0===a){for(var s=0;s!==i;++s)n[r+s]=n[s];a=e}else a+=e,e/=a,this._mixBufferRegion(n,r,0,e,i);this.cumulativeWeight=a}},{key:\"accumulateAdditive\",value:function(t){var e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}},{key:\"apply\",value:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1&&(t=e*this._origIndex,this._mixBufferRegion(n,i,t,1-r,e)),0<a&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(var o=e,u=e+e;o!==u;++o)if(n[o]!==n[o+e]){s.setValue(n,i);break}}},{key:\"saveOriginalState\",value:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(var r=n,a=i;r!==a;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:\"restoreOriginalState\",value:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)}},{key:\"_setAdditiveIdentityNumeric\",value:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0}},{key:\"_setAdditiveIdentityQuaternion\",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:\"_setAdditiveIdentityOther\",value:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}},{key:\"_select\",value:function(t,e,n,i,r){if(.5<=i)for(var a=0;a!==r;++a)t[e+a]=t[n+a]}},{key:\"_slerp\",value:function(t,e,n,i){$i.slerpFlat(t,e,t,e,t,n,i)}},{key:\"_slerpAdditive\",value:function(t,e,n,i,r){r=this._workIndex*r,$i.multiplyQuaternionsFlat(t,r,t,e,t,n),$i.slerpFlat(t,e,t,e,t,r,i)}},{key:\"_lerp\",value:function(t,e,n,i,r){for(var a=1-i,s=0;s!==r;++s){var o=e+s;t[o]=t[o]*a+t[n+s]*i}}},{key:\"_lerpAdditive\",value:function(t,e,n,i,r){for(var a=0;a!==r;++a){var s=e+a;t[s]=t[s]+t[n+a]*i}}}]),t}();N=\"\\\\[\\\\]\\\\.:\\\\/\";var wd=new RegExp(\"[\"+N+\"]\",\"g\");B=\"[^\"+N+\"]\",C=\"[^\"+N.replace(\"\\\\.\",\"\")+\"]\",T=/((?:WC+[\\/:])*)/.source.replace(\"WC\",B),N=/(WCOD+)?/.source.replace(\"WCOD\",C),C=/(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace(\"WC\",B),B=/\\.(WC+)(?:\\[(.+)\\])?/.source.replace(\"WC\",B);var Sd=new RegExp(\"^\"+T+N+C+B+\"$\"),Cd=[\"material\",\"materials\",\"bones\"],Md=function(){function t(e,n,i){y(this,t),this.path=n,this.parsedPath=i||t.parseTrackName(n),this.node=t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return _(t,[{key:\"_getValue_unavailable\",value:function(){}},{key:\"_setValue_unavailable\",value:function(){}},{key:\"_getValue_direct\",value:function(t,e){t[e]=this.targetObject[this.propertyName]}},{key:\"_getValue_array\",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]}},{key:\"_getValue_arrayElement\",value:function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}},{key:\"_getValue_toArray\",value:function(t,e){this.resolvedProperty.toArray(t,e)}},{key:\"_setValue_direct\",value:function(t,e){this.targetObject[this.propertyName]=t[e]}},{key:\"_setValue_direct_setNeedsUpdate\",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}},{key:\"_setValue_direct_setMatrixWorldNeedsUpdate\",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:\"_setValue_array\",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]}},{key:\"_setValue_array_setNeedsUpdate\",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}},{key:\"_setValue_array_setMatrixWorldNeedsUpdate\",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:\"_setValue_arrayElement\",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}},{key:\"_setValue_arrayElement_setNeedsUpdate\",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}},{key:\"_setValue_arrayElement_setMatrixWorldNeedsUpdate\",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:\"_setValue_fromArray\",value:function(t,e){this.resolvedProperty.fromArray(t,e)}},{key:\"_setValue_fromArray_setNeedsUpdate\",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}},{key:\"_setValue_fromArray_setMatrixWorldNeedsUpdate\",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:\"_getValue_unbound\",value:function(t,e){this.bind(),this.getValue(t,e)}},{key:\"_setValue_unbound\",value:function(t,e){this.bind(),this.setValue(t,e)}},{key:\"bind\",value:function(){var e=this.node,n=this.parsedPath,i=n.objectName,r=n.propertyName,a=n.propertyIndex;if(e||(e=t.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var s=n.objectIndex;switch(i){case\"materials\":if(!e.material)return;if(!e.material.materials)return;e=e.material.materials;break;case\"bones\":if(!e.skeleton)return;e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===s){s=o;break}break;default:if(void 0===e[i])return;e=e[i]}if(void 0!==s){if(void 0===e[s])return;e=e[s]}}var u=e[r];if(void 0!==u){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if(\"morphTargetInfluences\"===r){if(!e.geometry)return;if(!e.geometry.isBufferGeometry)return;if(!e.geometry.morphAttributes)return;void 0!==e.morphTargetDictionary[a]&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else n.nodeName}}},{key:\"unbind\",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:\"create\",value:function(e,n,i){return new(e&&e.isAnimationObjectGroup?t.Composite:t)(e,n,i)}},{key:\"sanitizeNodeName\",value:function(t){return t.replace(/\\s/g,\"_\").replace(wd,\"\")}},{key:\"parseTrackName\",value:function(t){var e=Sd.exec(t);if(!e)throw new Error(\"PropertyBinding: Cannot parse trackName: \"+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(\".\");if(void 0!==i&&-1!==i&&(e=n.nodeName.substring(i+1),-1!==Cd.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)),null===n.propertyName||0===n.propertyName.length)throw new Error(\"PropertyBinding: can not parse propertyName from trackName: \"+t);return n}},{key:\"findNode\",value:function(t,e){if(!e||\"\"===e||\".\"===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function t(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===e||r.uuid===e)return r;if(r=t(r.children))return r}return null};if(t=i(t.children),t)return t}return null}}]),t}();Md.Composite=function(){function t(e,n,i){y(this,t),i=i||Md.parseTrackName(n),this._targetGroup=e,this._bindings=e.subscribe_(n,i)}return _(t,[{key:\"getValue\",value:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}},{key:\"setValue\",value:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}},{key:\"bind\",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}},{key:\"unbind\",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}]),t}(),Md.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Md.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Md.prototype.GetterByBindingType=[Md.prototype._getValue_direct,Md.prototype._getValue_array,Md.prototype._getValue_arrayElement,Md.prototype._getValue_toArray],Md.prototype.SetterByBindingTypeAndVersioning=[[Md.prototype._setValue_direct,Md.prototype._setValue_direct_setNeedsUpdate,Md.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Md.prototype._setValue_array,Md.prototype._setValue_array_setNeedsUpdate,Md.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Md.prototype._setValue_arrayElement,Md.prototype._setValue_arrayElement_setNeedsUpdate,Md.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Md.prototype._setValue_fromArray,Md.prototype._setValue_fromArray_setNeedsUpdate,Md.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Td=function(){function t(){y(this,t),this.uuid=Oi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}return _(t,[{key:\"add\",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length,s=t.length,o=this.nCachedObjects_,u=0,l=arguments.length;u!==l;++u){var c=arguments[u],h=c.uuid,f=e[h];if(void 0===f){f=s++,e[h]=f,t.push(c);for(var d=0,p=a;d!==p;++d)r[d].push(new Md(c,n[d],i[d]))}else if(f<o){t[f];var g=--o,v=t[g];e[v.uuid]=f,t[f]=v,e[h]=g,t[g]=c;for(var m=0,y=a;m!==y;++m){var _=r[m],x=_[g],b=_[f];_[f]=x,void 0===b&&(b=new Md(c,n[m],i[m])),_[g]=b}}else t[f]}this.nCachedObjects_=o}},{key:\"remove\",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=0,s=arguments.length;a!==s;++a){var o=arguments[a],u=o.uuid,l=e[u];if(void 0!==l&&l>=r){var c=r++,h=t[c];e[h.uuid]=l,t[l]=h,e[u]=c,t[c]=o;for(var f=0,d=i;f!==d;++f){var p=n[f],g=p[c],v=p[l];p[l]=g,p[c]=v}}}this.nCachedObjects_=r}},{key:\"uncache\",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=t.length,s=0,o=arguments.length;s!==o;++s){var u=arguments[s].uuid,l=e[u];if(void 0!==l)if(delete e[u],l<r){var c=--r,h=(u=t[c],--a),f=t[h];e[u.uuid]=l,t[l]=u,e[f.uuid]=c,t[c]=f,t.pop();for(var d=0,p=i;d!==p;++d){var g=n[d],v=g[c],m=g[h];g[l]=v,g[c]=m,g.pop()}}else{var y=--a;f=t[y],0<y&&(e[f.uuid]=l),t[l]=f,t.pop();for(var _=0,x=i;_!==x;++_){var b=n[_];b[l]=b[y],b.pop()}}}this.nCachedObjects_=r}},{key:\"subscribe_\",value:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,s=this._parsedPaths,o=this._objects,u=o.length,l=this.nCachedObjects_,c=new Array(u);i=r.length,n[t]=i,a.push(t),s.push(e),r.push(c);for(var h=l,f=o.length;h!==f;++h){var d=o[h];c[h]=new Md(d,t,e)}return c}},{key:\"unsubscribe_\",value:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];e[t[s]]=n,a[n]=o,a.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}]),t}();Td.prototype.isAnimationObjectGroup=!0;var kd=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;y(this,t),this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;for(var a=n.tracks,s=a.length,o=new Array(s),u={endingStart:Fn,endingEnd:Fn},l=0;l!==s;++l){var c=a[l].createInterpolant(null);o[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=In,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return _(t,[{key:\"play\",value:function(){return this._mixer._activateAction(this),this}},{key:\"stop\",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:\"reset\",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:\"isRunning\",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:\"isScheduled\",value:function(){return this._mixer._isActiveAction(this)}},{key:\"startAt\",value:function(t){return this._startTime=t,this}},{key:\"setLoop\",value:function(t,e){return this.loop=t,this.repetitions=e,this}},{key:\"setEffectiveWeight\",value:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}},{key:\"getEffectiveWeight\",value:function(){return this._effectiveWeight}},{key:\"fadeIn\",value:function(t){return this._scheduleFading(t,0,1)}},{key:\"fadeOut\",value:function(t){return this._scheduleFading(t,1,0)}},{key:\"crossFadeFrom\",value:function(t,e,n){var i,r;return t.fadeOut(e),this.fadeIn(e),n&&(n=(i=this._clip.duration)/(r=t._clip.duration),t.warp(1,r/i,e),this.warp(n,1,e)),this}},{key:\"crossFadeTo\",value:function(t,e,n){return t.crossFadeFrom(this,e,n)}},{key:\"stopFading\",value:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:\"setEffectiveTimeScale\",value:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}},{key:\"getEffectiveTimeScale\",value:function(){return this._effectiveTimeScale}},{key:\"setDuration\",value:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}},{key:\"syncWith\",value:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}},{key:\"halt\",value:function(t){return this.warp(this._effectiveTimeScale,0,t)}},{key:\"warp\",value:function(t,e,n){var i=this._mixer,r=i.time,a=this.timeScale,s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);var o=s.parameterPositions,u=s.sampleValues;return o[0]=r,o[1]=r+n,u[0]=t/a,u[1]=e/a,this}},{key:\"stopWarping\",value:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:\"getMixer\",value:function(){return this._mixer}},{key:\"getClip\",value:function(){return this._clip}},{key:\"getRoot\",value:function(){return this._localRoot||this._mixer._root}},{key:\"_update\",value:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){if((r=(t-r)*n)<0||0===n)return;this._startTime=null,e=n*r}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(0<s){var o=this._interpolants,u=this._propertyBindings;if(this.blendMode===Un)for(var l=0,c=o.length;l!==c;++l)o[l].evaluate(a),u[l].accumulateAdditive(s);else for(var h=0,f=o.length;h!==f;++h)o[h].evaluate(a),u[h].accumulate(i,s)}}else this._updateWeight(t)}},{key:\"_updateWeight\",value:function(t){var e=0;if(this.enabled){e=this.weight;var n,i=this._weightInterpolant;null!==i&&(n=i.evaluate(t)[0],e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1)))}return this._effectiveWeight=e,e}},{key:\"_updateTimeScale\",value:function(t){var e=0;if(!this.paused){e=this.timeScale;var n,i=this._timeScaleInterpolant;null!==i&&(n=i.evaluate(t)[0],e*=n,t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}},{key:\"_updateTime\",value:function(t){var e,n=this._clip.duration,i=this.loop,r=this.time+t,a=this._loopCount,s=i===Ln;if(0===t)return-1!==a&&s&&1==(1&a)?n-r:r;if(i===Pn){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=n)r=n;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:t<0?-1:1})}}else if(-1===a&&(0<=t?(a=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=n||r<0?(r-=n*(e=Math.floor(r/n)),a+=Math.abs(e),(i=this.repetitions-a)<=0?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=0<t?n:0,this.time=r,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0<t?1:-1})):(1==i?this._setEndings(i=t<0,!i,s):this._setEndings(!1,!1,s),this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:e}))):this.time=r,s&&1==(1&a))return n-r;return r}},{key:\"_setEndings\",value:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=Bn,i.endingEnd=Bn):(i.endingStart=t?this.zeroSlopeAtStart?Bn:Fn:zn,i.endingEnd=e?this.zeroSlopeAtEnd?Bn:Fn:zn)}},{key:\"_scheduleFading\",value:function(t,e,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=e,s[1]=r+t,o[1]=n,this}}]),t}(),Ad=function(t){v(n,t);var e=m(n);function n(t){var i;return y(this,n),i=e.call(this),i._root=t,i._initMemoryManager(),i._accuIndex=0,i.time=0,i.timeScale=1,i}return _(n,[{key:\"_bindAction\",value:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,s=t._interpolants,o=n.uuid,u=this._bindingsByRootAndName,l=u[o];void 0===l&&(l={},u[o]=l);for(var c=0;c!==r;++c){var h=i[c],f=h.name,d=l[f];if(void 0!==d)a[c]=d;else{if(d=a[c],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,o,f));continue}var p=e&&e._propertyBindings[c].binding.parsedPath;d=new bd(Md.create(n,f,p),h.ValueTypeName,h.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,o,f),a[c]=d}s[c].resultBuffer=d.buffer}}},{key:\"_activateAction\",value:function(t){if(!this._isActiveAction(t)){var e,n,i;null===t._cacheIndex&&(e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n],this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e));for(var r=t._propertyBindings,a=0,s=r.length;a!==s;++a){var o=r[a];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}},{key:\"_deactivateAction\",value:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}},{key:\"_initMemoryManager\",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}},{key:\"_isActiveAction\",value:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions}},{key:\"_addInactiveAction\",value:function(t,e,n){var i=this._actions,r=this._actionsByClip,a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{var s=a.knownActions;t._byClipCacheIndex=s.length,s.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t}},{key:\"_removeInactiveAction\",value:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,u=o[o.length-1],l=t._byClipCacheIndex;u._byClipCacheIndex=l,o[l]=u,o.pop(),t._byClipCacheIndex=null,delete s.actionByRoot[(t._localRoot||this._root).uuid],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(t)}},{key:\"_removeInactiveBindingsForAction\",value:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}}},{key:\"_lendAction\",value:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:\"_takeBackAction\",value:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:\"_addInactiveBinding\",value:function(t,e,n){var i=this._bindingsByRootAndName,r=this._bindings,a=i[e];void 0===a&&(a={},i[e]=a),(a[n]=t)._cacheIndex=r.length,r.push(t)}},{key:\"_removeInactiveBinding\",value:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,s=a[i],o=e[e.length-1],u=t._cacheIndex;o._cacheIndex=u,e[u]=o,e.pop(),delete s[r],0===Object.keys(s).length&&delete a[i]}},{key:\"_lendBinding\",value:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:\"_takeBackBinding\",value:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:\"_lendControlInterpolant\",value:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new tf(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}},{key:\"_takeBackControlInterpolant\",value:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}},{key:\"clipAction\",value:function(t,e,n){var i=(s=e||this._root).uuid,r=\"string\"==typeof t?hf.findByName(s,t):t,a=null!==r?r.uuid:t,s=this._actionsByClip[a],o=null;if(void 0===n&&(n=null!==r?r.blendMode:jn),void 0!==s){if(void 0!==(t=s.actionByRoot[i])&&t.blendMode===n)return t;o=s.knownActions[0],null===r&&(r=o._clip)}return null===r?null:(n=new kd(this,r,e,n),this._bindAction(n,o),this._addInactiveAction(n,a,i),n)}},{key:\"existingAction\",value:function(t,e){var n;return e=(n=e||this._root).uuid,t=(n=\"string\"==typeof t?hf.findByName(n,t):t)?n.uuid:t,void 0!==(t=this._actionsByClip[t])&&t.actionByRoot[e]||null}},{key:\"stopAllAction\",value:function(){for(var t=this._actions,e=this._nActiveActions-1;0<=e;--e)t[e].stop();return this}},{key:\"update\",value:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,s=0;s!==n;++s)e[s]._update(i,t,r,a);for(var o=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)o[l].apply(a);return this}},{key:\"setTime\",value:function(t){for(var e=this.time=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}},{key:\"getRoot\",value:function(){return this._root}},{key:\"uncacheClip\",value:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,s=0,o=a.length;s!==o;++s){var u=a[s];this._deactivateAction(u);var l=u._cacheIndex,c=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(u)}delete i[n]}}},{key:\"uncacheRoot\",value:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[e];if(void 0!==a)for(var s in a){var o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}},{key:\"uncacheAction\",value:function(t,e){null!==(e=this.existingAction(t,e))&&(this._deactivateAction(e),this._removeInactiveAction(e))}}]),n}(Ci);Ad.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var Ed=function(){function t(e){y(this,t),this.value=e=\"string\"==typeof e?arguments[1]:e}return _(t,[{key:\"clone\",value:function(){return new t(void 0===this.value.clone?this.value:this.value.clone())}}]),t}(),Od=function(t){v(n,t);var e=m(n);function n(t,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return y(this,n),r=e.call(this,t,i),r.meshPerAttribute=a,r}return _(n,[{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:\"clone\",value:function(t){var e=f(d(n.prototype),\"clone\",this).call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e}},{key:\"toJSON\",value:function(t){var e=f(d(n.prototype),\"toJSON\",this).call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}]),n}(_l);Od.prototype.isInstancedInterleavedBuffer=!0;var Pd=function(){function t(e,n,i,r,a){y(this,t),this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=a,this.version=0}return _(t,[{key:\"needsUpdate\",set:function(t){!0===t&&this.version++}},{key:\"setBuffer\",value:function(t){return this.buffer=t,this}},{key:\"setType\",value:function(t,e){return this.type=t,this.elementSize=e,this}},{key:\"setItemSize\",value:function(t){return this.itemSize=t,this}},{key:\"setCount\",value:function(t){return this.count=t,this}}]),t}();Pd.prototype.isGLBufferAttribute=!0;var Id=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;y(this,t),this.ray=new Or(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Vr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return _(t,[{key:\"set\",value:function(t,e){this.ray.set(t,e)}},{key:\"setFromCamera\",value:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e)}},{key:\"intersectObject\",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Dd(t,this,n,e),n.sort(Ld),n}},{key:\"intersectObjects\",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,r=t.length;i<r;i++)Dd(t[i],this,n,e);return n.sort(Ld),n}}]),t}();function Ld(t,e){return t.distance-e.distance}function Dd(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i)for(var r=t.children,a=0,s=r.length;a<s;a++)Dd(r[a],e,n,!0)}var Rd=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return y(this,t),this.radius=e,this.phi=n,this.theta=i,this}return _(t,[{key:\"set\",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}},{key:\"copy\",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}},{key:\"makeSafe\",value:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}},{key:\"setFromVector3\",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:\"setFromCartesianCoords\",value:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Pi(e/this.radius,-1,1))),this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),t}(),Nd=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return y(this,t),this.radius=e,this.theta=n,this.y=i,this}return _(t,[{key:\"set\",value:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}},{key:\"copy\",value:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}},{key:\"setFromVector3\",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:\"setFromCartesianCoords\",value:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),t}(),Fd=new Bi,Bd=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bi(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bi(-1/0,-1/0);y(this,t),this.min=e,this.max=n}return _(t,[{key:\"set\",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:\"setFromPoints\",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:\"setFromCenterAndSize\",value:function(t,e){return e=Fd.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:\"makeEmpty\",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:\"isEmpty\",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:\"getCenter\",value:function(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:\"getSize\",value:function(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}},{key:\"expandByPoint\",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:\"expandByVector\",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:\"expandByScalar\",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:\"containsPoint\",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}},{key:\"containsBox\",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}},{key:\"getParameter\",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}},{key:\"intersectsBox\",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}},{key:\"clampPoint\",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:\"distanceToPoint\",value:function(t){return Fd.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:\"intersect\",value:function(t){return this.min.max(t.min),this.max.min(t.max),this}},{key:\"union\",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:\"translate\",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:\"equals\",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();Bd.prototype.isBox2=!0;var zd=new tr,jd=new tr,Ud=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr;y(this,t),this.start=e,this.end=n}return _(t,[{key:\"set\",value:function(t,e){return this.start.copy(t),this.end.copy(e),this}},{key:\"copy\",value:function(t){return this.start.copy(t.start),this.end.copy(t.end),this}},{key:\"getCenter\",value:function(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:\"delta\",value:function(t){return t.subVectors(this.end,this.start)}},{key:\"distanceSq\",value:function(){return this.start.distanceToSquared(this.end)}},{key:\"distance\",value:function(){return this.start.distanceTo(this.end)}},{key:\"at\",value:function(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}},{key:\"closestPointToPointParameter\",value:function(t,e){zd.subVectors(t,this.start),jd.subVectors(this.end,this.start),t=jd.dot(jd);var n=jd.dot(zd)/t;return e&&(n=Pi(n,0,1)),n}},{key:\"closestPointToPoint\",value:function(t,e,n){return e=this.closestPointToPointParameter(t,e),this.delta(n).multiplyScalar(e).add(this.start)}},{key:\"applyMatrix4\",value:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}},{key:\"equals\",value:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}}]),t}(),Vd=new tr,Wd=function(t){v(n,t);var e=m(n);function n(t,i){var r;y(this,n),r=e.call(this),r.light=t,r.light.updateMatrixWorld(),r.matrix=t.matrixWorld,r.matrixAutoUpdate=!1,r.color=i;for(var a=new Ga,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],o=0,u=1;o<32;o++,u++){var l=o/32*Math.PI*2,c=u/32*Math.PI*2;s.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}return a.setAttribute(\"position\",new Ra(s,3)),i=new rc({fog:!1,toneMapped:!1}),r.cone=new dc(a,i),r.add(r.cone),r.update(),r}return _(n,[{key:\"dispose\",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:\"update\",value:function(){this.light.updateMatrixWorld();var t=this.light.distance||1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Vd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Vd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(na),Gd=new tr,Hd=new Pr,Xd=new Pr,Yd=function(t){v(n,t);var e=m(n);function n(t){var i;y(this,n);for(var r=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),a=new Ga,s=[],o=[],u=new wa(0,0,1),l=new wa(0,1,0),c=0;c<r.length;c++){var h=r[c];h.parent&&h.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(u.r,u.g,u.b),o.push(l.r,l.g,l.b))}return a.setAttribute(\"position\",new Ra(s,3)),a.setAttribute(\"color\",new Ra(o,3)),i=e.call(this,a,new rc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),i.type=\"SkeletonHelper\",i.isSkeletonHelper=!0,i.root=t,i.bones=r,i.matrix=t.matrixWorld,i.matrixAutoUpdate=!1,i}return _(n,[{key:\"updateMatrixWorld\",value:function(t){var e=this.bones,i=this.geometry,r=i.getAttribute(\"position\");Xd.copy(this.root.matrixWorld).invert();for(var a=0,s=0;a<e.length;a++){var o=e[a];o.parent&&o.parent.isBone&&(Hd.multiplyMatrices(Xd,o.matrixWorld),Gd.setFromMatrixPosition(Hd),r.setXYZ(s,Gd.x,Gd.y,Gd.z),Hd.multiplyMatrices(Xd,o.parent.matrixWorld),Gd.setFromMatrixPosition(Hd),r.setXYZ(s+1,Gd.x,Gd.y,Gd.z),s+=2)}i.getAttribute(\"position\").needsUpdate=!0,f(d(n.prototype),\"updateMatrixWorld\",this).call(this,t)}}]),n}(dc),qd=function(t){v(n,t);var e=m(n);function n(t,i,r){var a;return y(this,n),a=e.call(this,new Lh(i,4,2),new Sa({wireframe:!0,fog:!1,toneMapped:!1})),a.light=t,a.light.updateMatrixWorld(),a.color=r,a.type=\"PointLightHelper\",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return _(n,[{key:\"dispose\",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:\"update\",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(us),Jd=new tr,Zd=new wa,Kd=new wa,Qd=function(t){v(n,t);var e=m(n);function n(t,i,r){var a;y(this,n),a=e.call(this),a.light=t,a.light.updateMatrixWorld(),a.matrix=t.matrixWorld,a.matrixAutoUpdate=!1,a.color=r;var s=new Oh(i);return s.rotateY(.5*Math.PI),a.material=new Sa({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0),i=s.getAttribute(\"position\"),i=new Float32Array(3*i.count),s.setAttribute(\"color\",new Ta(i,3)),a.add(new us(s,a.material)),a.update(),a}return _(n,[{key:\"dispose\",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:\"update\",value:function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute(\"color\");Zd.copy(this.light.color),Kd.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?Zd:Kd;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Jd.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(na),$d=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;y(this,n),a=new wa(a),s=new wa(s);for(var o=r/2,u=i/r,l=i/2,c=[],h=[],f=0,d=0,p=-l;f<=r;f++,p+=u){c.push(-l,0,p,l,0,p),c.push(p,0,-l,p,0,l);var g=f===o?a:s;g.toArray(h,d),d+=3,g.toArray(h,d),d+=3,g.toArray(h,d),d+=3,g.toArray(h,d),d+=3}var v=new Ga;return v.setAttribute(\"position\",new Ra(c,3)),v.setAttribute(\"color\",new Ra(h,3)),t=e.call(this,v,i=new rc({vertexColors:!0,toneMapped:!1})),t.type=\"GridHelper\",t}return _(n)}(dc),tp=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;y(this,n),o=new wa(o),u=new wa(u);for(var l=[],c=[],h=0;h<=r;h++){var f=h/r*(2*Math.PI),d=Math.sin(f)*i;f=Math.cos(f)*i,l.push(0,0,0),l.push(d,0,f),f=1&h?o:u,c.push(f.r,f.g,f.b),c.push(f.r,f.g,f.b)}for(var p=0;p<=a;p++)for(var g=1&p?o:u,v=i-i/a*p,m=0;m<s;m++){var _=m/s*(2*Math.PI),x=Math.sin(_)*v,b=Math.cos(_)*v;l.push(x,0,b),c.push(g.r,g.g,g.b),_=(m+1)/s*(2*Math.PI),x=Math.sin(_)*v,b=Math.cos(_)*v,l.push(x,0,b),c.push(g.r,g.g,g.b)}var w=new Ga;return w.setAttribute(\"position\",new Ra(l,3)),w.setAttribute(\"color\",new Ra(c,3)),t=e.call(this,w,new rc({vertexColors:!0,toneMapped:!1})),t.type=\"PolarGridHelper\",t}return _(n)}(dc),ep=new tr,np=new tr,ip=new tr,rp=function(t){v(n,t);var e=m(n);function n(t,i,r){var a;y(this,n),a=e.call(this),a.light=t,a.light.updateMatrixWorld(),a.matrix=t.matrixWorld,a.matrixAutoUpdate=!1,a.color=r,void 0===i&&(i=1);var s=new Ga;return s.setAttribute(\"position\",new Ra([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3)),i=new rc({fog:!1,toneMapped:!1}),a.lightPlane=new cc(s,i),a.add(a.lightPlane),s=new Ga,s.setAttribute(\"position\",new Ra([0,0,0,0,0,1],3)),a.targetLine=new cc(s,i),a.add(a.targetLine),a.update(),a}return _(n,[{key:\"dispose\",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:\"update\",value:function(){ep.setFromMatrixPosition(this.light.matrixWorld),np.setFromMatrixPosition(this.light.target.matrixWorld),ip.subVectors(np,ep),this.lightPlane.lookAt(np),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(np),this.targetLine.scale.z=ip.length()}}]),n}(na),ap=new tr,sp=new gs,op=function(t){v(n,t);var e=m(n);function n(t){var i;y(this,n);var r=new Ga,a=new rc({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],u={},l=new wa(16755200),c=new wa(16711680),h=new wa(43775),f=new wa(16777215),d=new wa(3355443);function p(t,e,n){g(t,n),g(e,n)}function g(t,e){s.push(0,0,0),o.push(e.r,e.g,e.b),void 0===u[t]&&(u[t]=[]),u[t].push(s.length/3-1)}return p(\"n1\",\"n2\",l),p(\"n2\",\"n4\",l),p(\"n4\",\"n3\",l),p(\"n3\",\"n1\",l),p(\"f1\",\"f2\",l),p(\"f2\",\"f4\",l),p(\"f4\",\"f3\",l),p(\"f3\",\"f1\",l),p(\"n1\",\"f1\",l),p(\"n2\",\"f2\",l),p(\"n3\",\"f3\",l),p(\"n4\",\"f4\",l),p(\"p\",\"n1\",c),p(\"p\",\"n2\",c),p(\"p\",\"n3\",c),p(\"p\",\"n4\",c),p(\"u1\",\"u2\",h),p(\"u2\",\"u3\",h),p(\"u3\",\"u1\",h),p(\"c\",\"t\",f),p(\"p\",\"c\",d),p(\"cn1\",\"cn2\",d),p(\"cn3\",\"cn4\",d),p(\"cf1\",\"cf2\",d),p(\"cf3\",\"cf4\",d),r.setAttribute(\"position\",new Ra(s,3)),r.setAttribute(\"color\",new Ra(o,3)),i=e.call(this,r,a),i.type=\"CameraHelper\",i.camera=t,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=t.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=u,i.update(),i}return _(n,[{key:\"update\",value:function(){var t=this.geometry,e=this.pointMap;sp.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),up(\"c\",e,t,sp,0,0,-1),up(\"t\",e,t,sp,0,0,1),up(\"n1\",e,t,sp,-1,-1,-1),up(\"n2\",e,t,sp,1,-1,-1),up(\"n3\",e,t,sp,-1,1,-1),up(\"n4\",e,t,sp,1,1,-1),up(\"f1\",e,t,sp,-1,-1,1),up(\"f2\",e,t,sp,1,-1,1),up(\"f3\",e,t,sp,-1,1,1),up(\"f4\",e,t,sp,1,1,1),up(\"u1\",e,t,sp,.7,1.1,-1),up(\"u2\",e,t,sp,-.7,1.1,-1),up(\"u3\",e,t,sp,0,2,-1),up(\"cf1\",e,t,sp,-1,0,1),up(\"cf2\",e,t,sp,1,0,1),up(\"cf3\",e,t,sp,0,-1,1),up(\"cf4\",e,t,sp,0,1,1),up(\"cn1\",e,t,sp,-1,0,-1),up(\"cn2\",e,t,sp,1,0,-1),up(\"cn3\",e,t,sp,0,-1,-1),up(\"cn4\",e,t,sp,0,1,-1),t.getAttribute(\"position\").needsUpdate=!0}},{key:\"dispose\",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(dc);function up(t,e,n,i,r,a,s){ap.set(r,a,s).unproject(i);var o=e[t];if(void 0!==o)for(var u=n.getAttribute(\"position\"),l=0,c=o.length;l<c;l++)u.setXYZ(o[l],ap.x,ap.y,ap.z)}var lp,cp,hp=new ir,fp=function(t){v(n,t);var e=m(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;y(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),o=new Ga;return o.setIndex(new Ta(a,1)),o.setAttribute(\"position\",new Ta(s,3)),i=e.call(this,o,new rc({color:r,toneMapped:!1})),i.object=t,i.type=\"BoxHelper\",i.matrixAutoUpdate=!1,i.update(),i}return _(n,[{key:\"update\",value:function(t){if(void 0!==this.object&&hp.setFromObject(this.object),!hp.isEmpty()){var e=hp.min,n=hp.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:\"setFromObject\",value:function(t){return this.object=t,this.update(),this}},{key:\"copy\",value:function(t){return dc.prototype.copy.call(this,t),this.object=t.object,this}}]),n}(dc),dp=function(t){v(n,t);var e=m(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;y(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Ga;return s.setIndex(new Ta(a,1)),s.setAttribute(\"position\",new Ra([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),i=e.call(this,s,new rc({color:r,toneMapped:!1})),i.box=t,i.type=\"Box3Helper\",i.geometry.computeBoundingSphere(),i}return _(n,[{key:\"updateMatrixWorld\",value:function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),f(d(n.prototype),\"updateMatrixWorld\",this).call(this,t))}}]),n}(dc),pp=function(t){v(n,t);var e=m(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;y(this,n);var s=new Ga;s.setAttribute(\"position\",new Ra([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),s.computeBoundingSphere(),i=e.call(this,s,new rc({color:a,toneMapped:!1})),i.type=\"PlaneHelper\",i.plane=t,i.size=r;var o=new Ga;return o.setAttribute(\"position\",new Ra([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),i.add(new us(o,new Sa({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),i}return _(n,[{key:\"updateMatrixWorld\",value:function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?ct:lt,this.lookAt(this.plane.normal),f(d(n.prototype),\"updateMatrixWorld\",this).call(this,t)}}]),n}(cc),gp=new tr,vp=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tr(0,0,1),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tr(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*o;return y(this,n),t=e.call(this),t.type=\"ArrowHelper\",void 0===lp&&(lp=new Ga,lp.setAttribute(\"position\",new Ra([0,0,0,0,1,0],3)),cp=new kc(0,.5,1,5,1),cp.translate(0,-.5,0)),t.position.copy(r),t.line=new cc(lp,new rc({color:s,toneMapped:!1})),t.line.matrixAutoUpdate=!1,t.add(t.line),t.cone=new us(cp,new Sa({color:s,toneMapped:!1})),t.cone.matrixAutoUpdate=!1,t.add(t.cone),t.setDirection(i),t.setLength(a,o,u),t}return _(n,[{key:\"setDirection\",value:function(t){.99999<t.y?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(gp.set(t.z,0,-t.x).normalize(),t=Math.acos(t.y),this.quaternion.setFromAxisAngle(gp,t))}},{key:\"setLength\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*e;this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}},{key:\"setColor\",value:function(t){this.line.material.color.set(t),this.cone.material.color.set(t)}},{key:\"copy\",value:function(t){return f(d(n.prototype),\"copy\",this).call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}]),n}(na),mp=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;y(this,n),i=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i];var r=new Ga;return r.setAttribute(\"position\",new Ra(i,3)),r.setAttribute(\"color\",new Ra([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),t=e.call(this,r,i=new rc({vertexColors:!0,toneMapped:!1})),t.type=\"AxesHelper\",t}return _(n,[{key:\"setColors\",value:function(t,e,n){var i=new wa,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:\"dispose\",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(dc),yp=function(){function t(){y(this,t),this.type=\"ShapePath\",this.color=new wa,this.subPaths=[],this.currentPath=null}return _(t,[{key:\"moveTo\",value:function(t,e){return this.currentPath=new rh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}},{key:\"lineTo\",value:function(t,e){return this.currentPath.lineTo(t,e),this}},{key:\"quadraticCurveTo\",value:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this}},{key:\"bezierCurveTo\",value:function(t,e,n,i,r,a){return this.currentPath.bezierCurveTo(t,e,n,i,r,a),this}},{key:\"splineThru\",value:function(t){return this.currentPath.splineThru(t),this}},{key:\"toShapes\",value:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new ah;a.curves=r.curves,e.push(a)}return e}var i,r,a,s=Sh.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);var u=[];if(1===o.length)return r=o[0],a=new ah,a.curves=r.curves,u.push(a),u;var l=!s(o[0].getPoints());l=t?!l:l;var c,h,f=[],d=[],p=[],g=0;d[g]=void 0,p[g]=[];for(var v=0,m=o.length;v<m;v++)r=o[v],i=s(c=r.getPoints()),i=t?!i:i,i?(!l&&d[g]&&g++,d[g]={s:new ah,p:c},d[g].s.curves=r.curves,l&&g++,p[g]=[]):p[g].push({h:r,p:c[0]});if(!d[0])return n(o);if(1<d.length){for(var y=!1,_=[],x=0,b=d.length;x<b;x++)f[x]=[];for(var w=0,S=d.length;w<S;w++)for(var C=p[w],M=0;M<C.length;M++){for(var T=C[M],k=!0,A=0;A<d.length;A++)!function(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var s=e[r],o=e[a],u=o.x-s.x,l=o.y-s.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(s=e[a],u=-u,o=e[r],l=-l),!(t.y<s.y||t.y>o.y))if(t.y===s.y){if(t.x===s.x)return 1}else{var c=l*(t.x-s.x)-u*(t.y-s.y);if(0==c)return 1;c<0||(i=!i)}}else if(t.y===s.y&&(o.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=o.x))return 1}return i}(T.p,d[A].p)||(w!==A&&_.push({froms:w,tos:A,hole:M}),k?(k=!1,f[A].push(T)):y=!0);k&&f[w].push(T)}0<_.length&&(y||(p=f))}for(var E=0,O=d.length;E<O;E++){a=d[E].s,u.push(a);for(var P=0,I=(h=p[E]).length;P<I;P++)a.holes.push(h[P].h)}return u}}]),t}(),_p=new Float32Array(1),xp=new Int32Array(_p.buffer),bp=function(){function t(){y(this,t)}return _(t,null,[{key:\"toHalfFloat\",value:function(t){65504<t&&(t=65504),_p[0]=t;var e=xp[0],n=e>>16&32768,i=e>>12&2047;return(t=e>>23&255)<103||(142<t?(n|=31744,n|=(255==t?0:1)&&8388607&e):t<113?(i|=2048,n|=(i>>114-t)+(i>>113-t&1)):(n|=t-112<<10|i>>1,n+=1&i)),n}}]),t}(),wp=0,Sp=1,Cp=0,Mp=1,Tp=2;Nc.create=function(t,e){return t.prototype=Object.create(Nc.prototype),(t.prototype.constructor=t).prototype.getPoint=e,t},rh.prototype.fromPoints=function(t){return this.setFromPoints(t)},$d.prototype.setColors=function(){},Yd.prototype.update=function(){},gf.prototype.extractUrlBase=function(t){return Gf.extractUrlBase(t)},gf.Handlers={add:function(){},get:function(){}},Bd.prototype.center=function(t){return this.getCenter(t)},Bd.prototype.empty=function(){return this.isEmpty()},Bd.prototype.isIntersectionBox=function(t){return this.intersectsBox(t)},Bd.prototype.size=function(t){return this.getSize(t)},ir.prototype.center=function(t){return this.getCenter(t)},ir.prototype.empty=function(){return this.isEmpty()},ir.prototype.isIntersectionBox=function(t){return this.intersectsBox(t)},ir.prototype.isIntersectionSphere=function(t){return this.intersectsSphere(t)},ir.prototype.size=function(t){return this.getSize(t)},wr.prototype.empty=function(){return this.isEmpty()},Ts.prototype.setFromMatrix=function(t){return this.setFromProjectionMatrix(t)},Ud.prototype.center=function(t){return this.getCenter(t)},zi.prototype.flattenToArrayOffset=function(t,e){return this.toArray(t,e)},zi.prototype.multiplyVector3=function(t){return t.applyMatrix3(this)},zi.prototype.multiplyVector3Array=function(){},zi.prototype.applyToBufferAttribute=function(t){return t.applyMatrix3(this)},zi.prototype.applyToVector3Array=function(){},zi.prototype.getInverse=function(t){return this.copy(t).invert()},Pr.prototype.extractPosition=function(t){return this.copyPosition(t)},Pr.prototype.flattenToArrayOffset=function(t,e){return this.toArray(t,e)},Pr.prototype.getPosition=function(){return(new tr).setFromMatrixColumn(this,3)},Pr.prototype.setRotationFromQuaternion=function(t){return this.makeRotationFromQuaternion(t)},Pr.prototype.multiplyToArray=function(){},Pr.prototype.multiplyVector3=function(t){return t.applyMatrix4(this)},Pr.prototype.multiplyVector4=function(t){return t.applyMatrix4(this)},Pr.prototype.multiplyVector3Array=function(){},Pr.prototype.rotateAxis=function(t){t.transformDirection(this)},Pr.prototype.crossVector=function(t){return t.applyMatrix4(this)},Pr.prototype.translate=function(){},Pr.prototype.rotateX=function(){},Pr.prototype.rotateY=function(){},Pr.prototype.rotateZ=function(){},Pr.prototype.rotateByAxis=function(){},Pr.prototype.applyToBufferAttribute=function(t){return t.applyMatrix4(this)},Pr.prototype.applyToVector3Array=function(){},Pr.prototype.makeFrustum=function(t,e,n,i,r,a){return this.makePerspective(t,e,i,n,r,a)},Pr.prototype.getInverse=function(t){return this.copy(t).invert()},Ss.prototype.isIntersectionLine=function(t){return this.intersectsLine(t)},$i.prototype.multiplyVector3=function(t){return t.applyQuaternion(this)},$i.prototype.inverse=function(){return this.invert()},Or.prototype.isIntersectionBox=function(t){return this.intersectsBox(t)},Or.prototype.isIntersectionPlane=function(t){return this.intersectsPlane(t)},Or.prototype.isIntersectionSphere=function(t){return this.intersectsSphere(t)},da.prototype.area=function(){return this.getArea()},da.prototype.barycoordFromPoint=function(t,e){return this.getBarycoord(t,e)},da.prototype.midpoint=function(t){return this.getMidpoint(t)},da.prototypenormal=function(t){return this.getNormal(t)},da.prototype.plane=function(t){return this.getPlane(t)},da.barycoordFromPoint=function(t,e,n,i,r){return da.getBarycoord(t,e,n,i,r)},da.normal=function(t,e,n,i){return da.getNormal(t,e,n,i)},ah.prototype.extractAllPoints=function(t){return this.extractPoints(t)},ah.prototype.extrude=function(t){return new Th(this,t)},ah.prototype.makeGeometry=function(t){return new Ih(this,t)},Bi.prototype.fromAttribute=function(t,e,n){return this.fromBufferAttribute(t,e,n)},Bi.prototype.distanceToManhattan=function(t){return this.manhattanDistanceTo(t)},Bi.prototype.lengthManhattan=function(){return this.manhattanLength()},tr.prototype.setEulerFromRotationMatrix=function(){},tr.prototype.setEulerFromQuaternion=function(){},tr.prototype.getPositionFromMatrix=function(t){return this.setFromMatrixPosition(t)},tr.prototype.getScaleFromMatrix=function(t){return this.setFromMatrixScale(t)},tr.prototype.getColumnFromMatrix=function(t,e){return this.setFromMatrixColumn(e,t)},tr.prototype.applyProjection=function(t){return this.applyMatrix4(t)},tr.prototype.fromAttribute=function(t,e,n){return this.fromBufferAttribute(t,e,n)},tr.prototype.distanceToManhattan=function(t){return this.manhattanDistanceTo(t)},tr.prototype.lengthManhattan=function(){return this.manhattanLength()},Ji.prototype.fromAttribute=function(t,e,n){return this.fromBufferAttribute(t,e,n)},Ji.prototype.lengthManhattan=function(){return this.manhattanLength()},na.prototype.getChildByName=function(t){return this.getObjectByName(t)},na.prototype.renderDepth=function(){},na.prototype.translate=function(t,e){return this.translateOnAxis(e,t)},na.prototype.getWorldRotation=function(){},na.prototype.applyMatrix=function(t){return this.applyMatrix4(t)},Object.defineProperties(na.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(t){this.rotation.order=t}},useQuaternion:{get:function(){},set:function(){}}}),us.prototype.setDrawMode=function(){},Object.defineProperties(us.prototype,{drawMode:{get:function(){return Vn},set:function(){}}}),Xl.prototype.initBones=function(){},vs.prototype.setLens=function(t,e){void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Cf.prototype,{onlyShadow:{set:function(){}},shadowCameraFov:{set:function(t){this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){}},shadowBias:{set:function(t){this.shadow.bias=t}},shadowDarkness:{set:function(){}},shadowMapWidth:{set:function(t){this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){this.shadow.mapSize.height=t}}}),Object.defineProperties(Ta.prototype,{length:{get:function(){return this.array.length}},dynamic:{get:function(){return this.usage===pi},set:function(){this.setUsage(pi)}}}),Ta.prototype.setDynamic=function(t){return this.setUsage(!0===t?pi:di),this},Ta.prototype.copyIndicesArray=function(){},Ta.prototype.setArray=function(){},Ga.prototype.addIndex=function(t){this.setIndex(t)},Ga.prototype.addAttribute=function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?\"index\"===t?(this.setIndex(e),this):this.setAttribute(t,e):this.setAttribute(t,new Ta(e,arguments[2]))},Ga.prototype.addDrawCall=function(t,e,n){this.addGroup(t,e)},Ga.prototype.clearDrawCalls=function(){this.clearGroups()},Ga.prototype.computeOffsets=function(){},Ga.prototype.removeAttribute=function(t){return this.deleteAttribute(t)},Ga.prototype.applyMatrix=function(t){return this.applyMatrix4(t)},Object.defineProperties(Ga.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),_l.prototype.setDynamic=function(t){return this.setUsage(!0===t?pi:di),this},_l.prototype.setArray=function(){},Th.prototype.getArrays=function(){},Th.prototype.addShapeList=function(){},Th.prototype.addShape=function(){},yl.prototype.dispose=function(){},Ed.prototype.onUpdate=function(){return this},Object.defineProperties(ga.prototype,{wrapAround:{get:function(){},set:function(){}},overdraw:{get:function(){},set:function(){}},wrapRGB:{get:function(){return new wa}},shading:{get:function(){},set:function(t){this.flatShading=t===ft}},stencilMask:{get:function(){return this.stencilFuncMask},set:function(t){this.stencilFuncMask=t}},vertexTangents:{get:function(){},set:function(){}}}),Object.defineProperties(ps.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(t){this.extensions.derivatives=t}}}),pl.prototype.clearTarget=function(t,e,n,i){this.setRenderTarget(t),this.clear(e,n,i)},pl.prototype.animate=function(t){this.setAnimationLoop(t)},pl.prototype.getCurrentRenderTarget=function(){return this.getRenderTarget()},pl.prototype.getMaxAnisotropy=function(){return this.capabilities.getMaxAnisotropy()},pl.prototype.getPrecision=function(){return this.capabilities.precision},pl.prototype.resetGLState=function(){return this.state.reset()},pl.prototype.supportsFloatTextures=function(){return this.extensions.get(\"OES_texture_float\")},pl.prototype.supportsHalfFloatTextures=function(){return this.extensions.get(\"OES_texture_half_float\")},pl.prototype.supportsStandardDerivatives=function(){return this.extensions.get(\"OES_standard_derivatives\")},pl.prototype.supportsCompressedTextureS3TC=function(){return this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},pl.prototype.supportsCompressedTexturePVRTC=function(){return this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},pl.prototype.supportsBlendMinMax=function(){return this.extensions.get(\"EXT_blend_minmax\")},pl.prototype.supportsVertexTextures=function(){return this.capabilities.vertexTextures},pl.prototype.supportsInstancedArrays=function(){return this.extensions.get(\"ANGLE_instanced_arrays\")},pl.prototype.enableScissorTest=function(t){this.setScissorTest(t)},pl.prototype.initMaterial=function(){},pl.prototype.addPrePlugin=function(){},pl.prototype.addPostPlugin=function(){},pl.prototype.updateShadowMap=function(){},pl.prototype.setFaceCulling=function(){},pl.prototype.allocTextureUnit=function(){},pl.prototype.setTexture=function(){},pl.prototype.setTexture2D=function(){},pl.prototype.setTextureCube=function(){},pl.prototype.getActiveMipMapLevel=function(){return this.getActiveMipmapLevel()},Object.defineProperties(pl.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){this.shadowMap.type=t}},shadowMapCullFace:{get:function(){},set:function(){}},context:{get:function(){return this.getContext()}},vr:{get:function(){return this.xr}},gammaInput:{get:function(){return!1},set:function(){}},gammaOutput:{get:function(){return!1},set:function(t){this.outputEncoding=!0===t?Xn:Hn}},toneMappingWhitePoint:{get:function(){return 1},set:function(){}},gammaFactor:{get:function(){return 2},set:function(){}}}),Object.defineProperties(il.prototype,{cullFace:{get:function(){},set:function(){}},renderReverseSided:{get:function(){},set:function(){}},renderSingleSided:{get:function(){},set:function(){}}}),Object.defineProperties(Zi.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(t){this.texture.wrapS=t}},wrapT:{get:function(){return this.texture.wrapT},set:function(t){this.texture.wrapT=t}},magFilter:{get:function(){return this.texture.magFilter},set:function(t){this.texture.magFilter=t}},minFilter:{get:function(){return this.texture.minFilter},set:function(t){this.texture.minFilter=t}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(t){this.texture.anisotropy=t}},offset:{get:function(){return this.texture.offset},set:function(t){this.texture.offset=t}},repeat:{get:function(){return this.texture.repeat},set:function(t){this.texture.repeat=t}},format:{get:function(){return this.texture.format},set:function(t){this.texture.format=t}},type:{get:function(){return this.texture.type},set:function(t){this.texture.type=t}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(t){this.texture.generateMipmaps=t}}}),pd.prototype.load=function(t){var e=this;return(new td).load(t,(function(t){e.setBuffer(t)})),this},xd.prototype.getData=function(){return this.getFrequencyData()},ms.prototype.updateCubeMap=function(t,e){return this.update(t,e)},ms.prototype.clear=function(t,e,n,i){return this.renderTarget.clear(t,e,n,i)},Hi.crossOrigin=void 0,Hi.loadTexture=function(t,e,n,i){var r=new Sf;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},Hi.loadTextureCube=function(t,e,n,i){var r=new bf;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},Hi.loadCompressedTexture=function(){},Hi.loadCompressedTextureCube=function(){};var kp={createMultiMaterialObject:function(){},detach:function(){},attach:function(){}};function Ap(t,e,n){var i=n.length-t-1;if(e>=n[i])return i-1;if(e<=n[t])return t;for(var r=t,a=i,s=Math.floor((r+a)/2);e<n[s]||e>=n[s+1];)e<n[s]?a=s:r=s,s=Math.floor((r+a)/2);return s}function Ep(t,e,n,i){for(var r=[],a=[],s=[],o=r[0]=1;o<=n;++o){a[o]=e-i[t+1-o],s[o]=i[t+o]-e;for(var u=0,l=0;l<o;++l){var c=s[l+1],h=a[o-l],f=r[l]/(c+h);r[l]=u+c*f,u=h*f}r[o]=u}return r}\"undefined\"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(\"register\",{detail:{revision:Q}})),\"undefined\"!=typeof window&&(window.__THREE__||(window.__THREE__=Q));var Op=function(){function t(e,n,i,r,a){y(this,t),this.degree1=e,this.degree2=n,this.knots1=i,this.knots2=r,this.controlPoints=[];for(var s=i.length-e-1,o=r.length-n-1,u=0;u<s;++u){this.controlPoints[u]=[];for(var l=0;l<o;++l){var c=a[u][l];this.controlPoints[u][l]=new Ji(c.x,c.y,c.z,c.w)}}}return _(t,[{key:\"getPoint\",value:function(t,e,n){t=this.knots1[0]+t*(this.knots1[this.knots1.length-1]-this.knots1[0]),e=this.knots2[0]+e*(this.knots2[this.knots2.length-1]-this.knots2[0]),function(t,e,n,i,r,a,s,o){for(var u=Ap(t,a,n),l=Ap(e,s,i),c=Ep(u,a,t,n),h=Ep(l,s,e,i),f=[],d=0;d<=e;++d){f[d]=new Ji(0,0,0,0);for(var p=0;p<=t;++p){var g=r[u-t+p][l-e+d].clone(),v=g.w;g.x*=v,g.y*=v,g.z*=v,f[d].add(g.multiplyScalar(c[p]))}}for(var m=new Ji(0,0,0,0),y=0;y<=e;++y)m.add(f[y].multiplyScalar(h[y]));m.divideScalar(m.w),o.set(m.x,m.y,m.z)}(this.degree1,this.degree2,this.knots1,this.knots2,this.controlPoints,t,e,n)}}]),t}(),Pp=function(t){v(n,t);var e=m(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t,e,n){return n.set(t,e,Math.cos(t)*Math.sin(e))},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;y(this,n),t=e.call(this),t.type=\"ParametricGeometry\",t.parameters={func:i,slices:r,stacks:a};var s=[],o=[],u=[],l=[],c=new tr,h=new tr,f=new tr,d=new tr,p=new tr;i.length;for(var g=r+1,v=0;v<=a;v++)for(var m=v/a,_=0;_<=r;_++){var x=_/r;i(x,m,h),o.push(h.x,h.y,h.z),0<=x-1e-5?(i(x-1e-5,m,f),d.subVectors(h,f)):(i(1e-5+x,m,f),d.subVectors(f,h)),0<=m-1e-5?(i(x,m-1e-5,f),p.subVectors(h,f)):(i(x,1e-5+m,f),p.subVectors(f,h)),c.crossVectors(d,p).normalize(),u.push(c.x,c.y,c.z),l.push(x,m)}for(var b=0;b<a;b++)for(var w=0;w<r;w++){var S=b*g+w,C=b*g+w+1,M=(b+1)*g+w+1,T=(b+1)*g+w;s.push(S,C,T),s.push(C,M,T)}return t.setIndex(s),t.setAttribute(\"position\",new Ra(o,3)),t.setAttribute(\"normal\",new Ra(u,3)),t.setAttribute(\"uv\",new Ra(l,2)),t}return _(n)}(Ga);function Ip(t,e){var n,i=zp,r=Object[i(181)](t);return Object[i(163)]&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){var n=i;return Object[n(167)](t,e)[n(142)]}))),r.push[i(199)](r,n)),r}function Lp(t){for(var e=zp,n=1;n<arguments[e(197)];n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ip(Object(i),!0)[e(162)]((function(e){b(t,e,i[e])})):Object[e(215)]?Object.defineProperties(t,Object[e(215)](i)):Ip(Object(i))[e(162)]((function(n){var r=e;Object[r(183)](t,n,Object[r(167)](i,n))}))}return t}function Dp(){var t=[\"traverse\",\"rotateZ\",\"psdWidth\",\"5001040SyQAvU\",\"renderThree \",\"Name\",\"Mesh\",\"frameData\",\"rotateY\",\"forEach\",\"getOwnPropertySymbols\",\"1248132bbTUiA\",\"BoundingRect\",\"rect\",\"getOwnPropertyDescriptor\",\"push\",\"DirectionalLight\",\"formatBezierPoints\",\"MeshLambertMaterial\",\"add\",\"数据异常：存在不符合预期的宽高值的图层：\",\"position\",\", w: \",\"预览图\",\"910081cYhRiQ\",\"time\",\"extractFrameData\",\"Points\",\"keys\",\"render\",\"defineProperty\",\"set\",\", h: \",\"center\",\"clear\",\"updateMatrix\",\"geometry\",\"log\",\"positionX\",\"rotateX\",\"wrapS\",\"不扭曲的智能对象：\",\"key\",\"renderThree\",\"length\",\"rotation\",\"apply\",\"clearScene\",\"children\",\"---耗时点 1：setTimeout--- \",\"wrapT\",\"domElement\",\"WebGLRenderer\",\"matrix3To4\",\"lowp\",\"dispose\",\"Vector3\",\"splice\",\"2897532lzsQDX\",\"map\",\"deleteGroup\",\"Width\",\"getOwnPropertyDescriptors\",\"style\",\"tan\",\"layerKey\",\"concat\",\"warn\",\"remove\",\"isArray\",\"cropDesignCanvas\",\"error\",\"bezierPoints\",\"4250679fQRZQx\",\"Matrix4\",\"3384598ZZwXom\",\"normalize\",\"renderLists\",\"sdsDebug\",\"Height\",\"files\",\"CanvasTexture\",\"Scene\",\"enabled\",\"getPoint\",\"psdHeight\",\"enumerable\",\"setSize\",\"positionY\",\"lookAt\",\"split\",\"initialize\",\"timeEnd\",\"material\",\"12InwWfB\",\"36490160OLztek\",\"matrix4\"];return(Dp=function(){return t})()}function Rp(){}!function(){for(var t=zp,e=Dp();;)try{if(919027==-parseInt(t(177))+-parseInt(t(164))/2+-parseInt(t(226))/3+-parseInt(t(211))/4+parseInt(t(156))/5+-parseInt(t(150))/6*(parseInt(t(228))/7)+parseInt(t(151))/8)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();var Np={enabled:!1,files:{},add:function(t,e){var n=zp;!1!==this[n(139)]&&(this[n(136)][t]=e)},get:function(t){var e=zp;if(!1!==this[e(139)])return this[e(136)][t]},remove:function(t){delete this[zp(136)][t]},clear:function(){this[zp(136)]={}}},Fp={log:function(){var t,e=zp;return document[e(134)]?(t=console)[e(190)].apply(t,arguments):Rp},warn:function(){var t,e=zp;return document[e(134)]?(t=console).warn[e(199)](t,arguments):Rp},time:function(){var t,e=zp;return document.sdsDebug?(t=console)[e(178)][e(199)](t,arguments):Rp},timeEnd:function(){var t,e=zp;return document[e(134)]?(t=console)[e(148)][e(199)](t,arguments):Rp},error:function(t){var e=zp;return Uc.message[e(224)](e(176)[e(219)](t)),document.sdsDebug?void 0:Rp}};function Bp(t,e,n){return e in t?Object[zp(183)](t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zp(t,e){var n=Dp();return(zp=function(t,e){return n[t-=134]})(t,e)}var jp=s((function t(i){var r=zp,a=this;n(this,t),Bp(this,r(147),(function(){})),Bp(this,r(170),(function(t){var e=[],n=[];return t.forEach((function(t,i){var r=zp;(n=i%4==0?[]:n).push(t),i%4==3&&e[r(168)](n)})),e})),Bp(this,r(206),(function(t){var e=r;return(t=K(t))[e(210)](2,0,0),t[e(210)](6,0,0),t[e(210)](8,0,0),t[e(210)](9,0,0),t[e(210)](10,0,1),t[e(210)](11,0,0),t.splice(14,0,0),t})),Bp(this,r(179),(function(t){var e=r,n=t.matrix3;return n=a[e(206)](n),Lp(Lp({},t),{},{matrix4:n})})),Bp(this,r(213),(function(t){var n=r;t&&t[n(153)]((function(t){var i=n;t instanceof e[i(159)]&&(t[i(189)][i(208)](),t.geometry=null,t[i(149)][i(212)].dispose(),t.material[i(208)](),t[i(149)]=null)}))})),Bp(this,r(200),(function(t,n,i){var s=r;0<n[s(197)]&&(n[s(162)]((function(n){var i=s;n instanceof e[i(138)]?n[i(201)][i(162)]((function(t){a.deleteGroup(t)})):a[i(213)](n),t[i(221)](n)})),t[s(187)]()),i()})),Bp(this,r(196),(function(t,n){var i,s,o,u=r,l=t[u(160)],c=t.cropDesignCanvas,h=t[u(218)],f=t[u(155)],d=t[u(141)],p=t.webglCanvas,g=[],v=f,m=d;(function(){var t=u;s=new(e[t(138)]),(o=new vs(90,v/m,1,2e3))[t(174)].x=0,o[t(174)].y=0;var n=v<m?m:v;function r(t){return+t}o[t(174)].z=-n*(.5/Math[t(217)](Math.PI/180*45)),o.up.x=0,o.up.y=-1,o.up.z=0,o[t(145)](0,0,0),(a=new(e[t(169)])(\"#fff\"))[t(174)].set(0,0,-2e3)[t(229)](),s[t(172)](a),(f=new(e[t(169)])(\"#fff\"))[t(174)].set(0,0,2e3).normalize(),s[t(172)](f),(n=new(e[t(137)])(c))[t(198)]=90*Math.PI/180,n[t(193)]=1e3,n[t(203)]=1e3;var a=new(e[t(171)])({map:n,side:2}),h=l[t(225)].map((function(n){var i=t;return n[i(212)]((function(t){return new(e[i(209)])(r(t.x),r(t.y),0)}))})),f=h.length-1,d=(n=(n=[]).concat[t(199)](n,K(K(new Array(2))[t(212)]((function(e,n){var i=t;return K(new Array(h[i(197)]))[i(212)]((function(){return n}))})))),new Op(f,f,n,n,h));n=new Pp((function(e,n,i){return d[t(140)](e,n,i)}),20,20),n.applyMatrix4((new(e[t(227)]))[t(184)](l[t(152)][0],l.matrix4[4],l[t(152)][8],l[t(152)][12],l[t(152)][1],l[t(152)][5],l[t(152)][9],l[t(152)][13],l[t(152)][2],l.matrix4[6],l[t(152)][10],l[t(152)][14],l[t(152)][3],l[t(152)][7],l[t(152)][11],l.matrix4[15])),(n=new(e[t(159)])(n,a)).matrixAutoUpdate=!1,a=l[t(166)],n[t(174)].x=a[t(191)],n[t(174)].y=a[t(144)],n[t(174)].z=0,n[t(198)].x=Math.PI/180*0,n.rotation.y=Math.PI/180*0,n[t(198)].z=Math.PI/180*0,n[t(189)][t(154)](Math.PI/180*0),n[t(189)][t(192)](Math.PI/180*0),n[t(189)][t(161)](Math.PI/180*0),n[t(189)].computeBoundingBox(),n.geometry[t(186)](),n[t(188)](),s[t(172)](n),g.push(n),(n=p)[t(216)]||(n.style={width:v,height:m}),i=null,(i=new(e[t(205)])({alpha:!0,canvas:n,precision:t(207),preserveDrawingBuffer:!1}))[t(143)](v,m)})(),Fp.time(u(202).concat(h)),setTimeout((function(){var t=u;Fp[t(148)](\"---耗时点 1：setTimeout--- \"[t(219)](h)),i[t(182)](s,o);var e=i[t(204)];n(e),a.clearScene(s,g,(function(){var e=t;o.clear(),g=[],i[e(230)][e(208)](),i[e(208)](),i=o=s=null,Np[e(187)]()}))}),0)})),Bp(this,\"handleSmartObject\",(function(t,e){var n=r,i=t.layer,s=t[n(223)],o=t.psdWidth,u=t[n(141)],l=t.webglCanvas,c=!0;p=Array[n(222)](i[n(180)])?i.Points:(Fp[n(190)](n(194),i),c=!1,[{x:0,y:0},{x:0+(f=(h=Z(i.OriginalSize[n(146)](\",\").map((function(t){return+t})),2))[0])/3,y:0},{x:0+f/3*2,y:0},{x:0+f,y:0},{x:0,y:0+(d=h[1])/3},{x:0+f/3,y:0+d/3},{x:0+f/3*2,y:0+d/3},{x:0+f,y:0+d/3},{x:0,y:0+d/3*2},{x:0+f/3,y:0+d/3*2},{x:0+f/3*2,y:0+d/3*2},{x:0+f,y:0+d/3*2},{x:0,y:0+d},{x:0+f/3,y:0+d},{x:0+f/3*2,y:0+d},{x:0+f,y:0+d}]),t=a[n(170)](p);var h=Z(i[n(165)].split(\",\").map((function(t){return+t})),4),f=h[0],d=h[1],p=h[2];h=h[3],h=a.extractFrameData({bezierPoints:t,rect:{width:p,height:h,positionX:c&&20<i[n(214)]&&20<i.Height?i.X+(i.Width/2-o/2):f+(p/2-o/2),positionY:c&&20<i[n(214)]&&20<i[n(135)]?i.Y+(i[n(135)]/2-u/2):d+(h/2-u/2)},matrix3:i.Matrix3}),(i[n(214)]<50||i[n(135)]<50)&&Fp[n(220)](n(173)[n(219)](i[n(158)],n(175)).concat(i[n(214)],n(185))[n(219)](i[n(135)])),Fp[n(178)](n(157)[n(219)](i[n(195)])),a[n(196)]({frameData:h,cropDesignCanvas:s,layerKey:i[n(195)],psdWidth:o,psdHeight:u,webglCanvas:l},(function(t){var r=n;Fp.timeEnd(r(157)[r(219)](i[r(195)])),e(t)}))})),this[r(147)](i)})),Up=i(9944);function Vp(t,e){return(Vp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wp(t){return(Wp=\"function\"==typeof Symbol&&\"symbol\"==x(Symbol.iterator)?function(t){return x(t)}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":x(t)})(t)}function Gp(t,e){if(e&&(\"object\"===Wp(e)||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t)}function Hp(t){return(Hp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xp(){var t=[\"100%\",\"textAlign\",\"prototype\",\"value\",\"wrapDiv\",\"fdWrap\",\"url(https://img.foxpsd.com/foxpsd_close.png) no-repeat center\",\"img_url\",\"#38f\",\"5677749WpKtuA\",\"@@iterator\",\"10048980sAZAWm\",\"670px\",\"29431garulh\",\"678605xaJHtK\",\"querySelectorAll\",\"sham\",\"foxpsd-big-show\",\"overflowY\",\"width\",\"className\",\"mySwiper\",\"38NBBBlD\",\"img\",\"toString\",\"100px\",\"fixed\",\"#eee\",\"backgroundPosition\",\"fbody\",\"createElement\",\"550px\",\"Map\",\"display\",\"appendChild\",\"1px #eee solid\",\"element\",\"justifyContent\",\"absolute\",\"contain\",\"call\",\"createSwiper\",\"16aidNJd\",\"relative\",\"position\",\"auto\",\"isArray\",\"35px\",\"float\",\"-wrap .foxpsd-vertical-item\",\"div\",\"next\",\"boxSizing\",\"src\",\"_onchange\",\"Set\",\"slide\",\"focpsd_mask_\",\"backgroundRepeat\",\"hidden\",\"padding\",\"borderColor\",\"marginBottom\",\"border-box\",\"background\",\"height\",\"foxpsd-big-show-wrap\",\"dotWrap\",\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\"5px\",\"iterator\",\"backgroundSize\",\"valueOf\",\"renderDots\",\"inline-block\",\"onchange\",\"concat\",\"number\",\"return\",\"forEach\",\"Arguments\",\"50px auto\",\"3167128RtujnS\",\"constructor\",\"overflowX\",\"6060940vDSJbQ\",\"verticalDom\",\"remove\",\"done\",\"baseHeight\",\"renderSwiperItem\",\"swiperEl\",\"swiperClass\",\"center\",\"9IxQSKp\",\"100vh\",\"kill\",\"foxpsd-vertical-item\",\"left\",\"450822NoYojc\",\"12TECXhk\",\"7TyfLDF\",\"backgroundImage\",\"right\",\"childNodes\",\"length\",\"xiaoguotuList\",\"test\",\"flex\",\"string\",\"construct\",\"baseWidth\",\"top\",\"zIndex\",\"style\",\"int\",\"onclick\",\"margin\",\"no-repeat\",\"from\",\"100vw\"];return(Xp=function(){return t})()}function Yp(t,e){var n=Xp();return(Yp=function(t,e){return n[t-=310]})(t,e)}function qp(t,e){var n=Yp;(null==e||e>t[n(368)])&&(e=t[n(368)]);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}!function(){for(var t=Yp,e=Xp();;)try{if(434398==+parseInt(t(397))*(-parseInt(t(406))/2)+parseInt(t(362))/3*(-parseInt(t(426))/4)+-parseInt(t(398))/5*(-parseInt(t(363))/6)+parseInt(t(364))/7*(parseInt(t(345))/8)+parseInt(t(357))/9*(parseInt(t(348))/10)+-parseInt(t(393))/11+parseInt(t(395))/12)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();var Jp=function(){var t=Yp;!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&Vp(t,e)}(i,I);var e=function(t){var e=function(){var t=Yp;if(\"undefined\"==typeof Reflect||!Reflect[t(373)])return!1;if(Reflect[t(373)][t(400)])return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype[t(335)][t(424)](Reflect[t(373)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Yp,r=Hp(t);return Gp(this,e?(n=Hp(this).constructor,Reflect[i(373)](r,arguments,n)):r.apply(this,arguments))}}(i);function i(t,r){var a=Yp,s=void 0===(o=r[a(374)])?0:o,o=void 0===(u=r[a(352)])?0:u,u=void 0===(u=r[a(420)])?null:u;return r=void 0===(r=r[a(338)])?null:r,n(this,i),(r=e[a(424)](this,t,{baseWidth:s,baseHeight:o,element:u,onchange:r}))[a(355)]=a(401),r}return s(i,[{key:t(378),value:function(){var e=t,n=(a=this[e(388)]())[e(389)],i=a[e(413)],r=(s=this.renderHtml())[e(354)],a=s.swiperWrap,s=s[e(330)];return r[e(377)].width=\"550px\",this[e(353)](a),this[e(336)](s),i.appendChild(r),this[e(420)][e(418)](n),this[e(425)](r),this[e(349)](i),this.close(n),this[e(405)]}},{key:t(338),value:function(e){var n=t;this[n(317)]&&this._onchange(e);for(var i=document[n(399)](\".\".concat(this[n(355)],n(312))),r=0;r<i.length;r++)i[r][n(377)][n(324)]=r==e?\"#38f\":n(411)}},{key:\"close\",value:function(e){var n=t,i=this,r=document[n(414)](\"div\");r[n(377)][n(428)]=n(422),r[n(377)][n(403)]=n(310),r[n(377)].height=n(310),r[n(377)][n(323)]=n(332),r[n(377)][n(366)]=\"100px\",r[n(377)][n(375)]=\"50px\",r[n(377)][n(327)]=n(390),r[n(377)][n(334)]=n(423),e[n(418)](r),r[n(379)]=function(){var t=n;e[t(350)](),i[t(405)][t(359)]()}}},{key:t(388),value:function(){var e=t,n=document[e(414)](e(313));n.className=e(329),n[e(377)].position=e(410),n[e(377)][e(375)]=0,n[e(377)][e(361)]=0,n[e(377)][e(403)]=e(383),n[e(377)][e(328)]=e(358),n[e(377)].background=\"#fff\",n[e(377)][e(376)]=\"99999\";var i=document[e(414)](\"div\");return n[e(418)](i),i.style.width=e(396),i[e(377)][e(380)]=e(344),i[e(377)][e(417)]=e(371),i.style[e(421)]=\"space-between\",{fdWrap:n,fbody:i}}},{key:\"verticalDom\",value:function(e){var n=t,i=this,r=this[n(369)],a=document[n(414)](n(313));a[n(377)][n(403)]=n(409),a[n(377)][n(328)]=\"550px\",a.style[n(402)]=n(429),a[n(377)][n(347)]=n(322);for(var s=0;s<r[n(368)];s++)!function(t){var e=n,s=r[t],o=document.createElement(e(313));o[e(404)]=e(360),o[e(377)][e(365)]=\"url(\"[e(339)](s.img_url,\")\"),o[e(377)][e(334)]=e(423),o.style[e(412)]=e(356),o[e(377)][e(321)]=e(381),o[e(377)][e(315)]=e(326),o[e(377)][e(403)]=e(384),o.style[e(328)]=\"100px\",o[e(377)][e(325)]=\"10px\",o.style.border=e(419),0==t&&(o.style[e(324)]=e(392)),a[e(418)](o),o[e(379)]=function(){var n=e;i.mySwiper[n(319)](t),o.parentNode[n(367)][n(342)]((function(t){var e=n;t.style.borderColor=e(411)})),o[n(377)][n(324)]=n(392)}}(s);e[n(418)](a)}},{key:\"renderSwiperItem\",value:function(e){var n,i=t,r=1,a=function(t,e){var n=Yp,i=\"undefined\"!=typeof Symbol&&t[Symbol[n(333)]]||t[n(394)];if(!i){if(Array[n(430)](t)||(i=function(t,e){var n=Yp;if(t){if(x(t)===n(372))return qp(t,e);var i=Object[n(386)][n(408)][n(424)](t).slice(8,-1);return(i=\"Object\"===i&&t[n(346)]?t[n(346)].name:i)===n(416)||i===n(318)?Array[n(382)](t):i===n(343)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[n(370)](i)?qp(t,e):void 0}}(t))||e&&t&&x(t[n(368)])===n(340)){i&&(t=i);var r=0;return{s:e=function(){},n:function(){return r>=t[n(368)]?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(n(331))}var a,s=!0,o=!1;return{s:function(){i=i[n(424)](t)},n:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=i[n(314)]();return s=t.done,t})),e:function(t){o=!0,a=t},f:function(){var t=n;try{s||null==i[t(341)]||i[t(341)]()}finally{if(o)throw a}}}}(this.xiaoguotuList);try{for(a.s();!(n=a.n())[i(351)];){var s=n[i(387)],o=document[i(414)](i(313));o[i(377)][i(311)]=i(361),o[i(377)][i(428)]=i(427),o[i(377)][i(403)]=i(384),o[i(377)][i(385)]=\"center\";var u=document[i(414)](i(407));u.id=i(320)[i(339)](r),u[i(377)][i(417)]=i(337),u[i(377)][i(376)]=3,u[i(377)].maxHeight=i(415),u[i(316)]=s[i(391)],o.appendChild(u),e[i(418)](o),r++}}catch(e){a.e(e)}finally{a.f()}}}]),i}();function Zp(){var t=[\"length\",\"charCodeAt\",\"1336936tgnMNf\",\"----\",\"4678709CwZYmz\",\"1GKdxAI\",\"3433656mzuEAx\",\"3071892WEhVDi\",\"fromCharCode\",\"2262545ewcSBo\",\"626046VOaEXB\",\"log\",\"743276BGVTzI\",\"random\"];return(Zp=function(){return t})()}!function(){for(var t=Qp,e=Zp();;)try{if(627653==+parseInt(t(281))*(parseInt(t(286))/2)+parseInt(t(283))/3+-parseInt(t(288))/4+-parseInt(t(285))/5+-parseInt(t(282))/6+parseInt(t(280))/7+-parseInt(t(278))/8)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();var Kp={};function Qp(t,e){var n=Zp();return(Qp=function(t,e){return n[t-=277]})(t,e)}Kp.DI=function(t){for(var e=Qp,n=0,i=0;i<t;i++)n+=Math[e(289)]();return n/t<Math.PI/4},Kp.VR=function(t,e){var n=Qp,i=\"\";Kp.DI(29)||(e-=4);for(var r=0;r<t.length;r++)i+=String[n(284)](t.charCodeAt(r)-e-r);return i},Kp.j4=function(t,e){var n=Qp,i=\"\";Kp.DI(29)||(e+=4);for(var r=0;r<t[n(290)];r++)i+=String[n(284)](t[n(277)](r)+e+r);return i},Kp.Jy=function(t){var e=Qp,n=\"\";Kp.DI(28)||(t+=\"-3\");for(var i=0;i<t[e(290)];i++){var r=t[e(277)](i);if(r<32||127<r)throw\"e\";n+=String[e(284)](32+(r-32+17+3*i)%96)}return n},Kp.MQ=function(t){var e=Qp,n=\"\";Kp.DI(28)||(t+=\"-1\");for(var i=0;i<t[e(290)];i++){var r=t[e(277)](i);r-=32,r+=96e4,r-=17+3*i,r%=96,n+=String[e(284)](32+r)}return n},Kp.p2=function(t){var e=Qp,n=\"\";Kp.DI(28)||(t+=\"-3\");for(var i=0;i<t.length;i++){var r=t.charCodeAt(i);if(r<32||126<r)throw\"e\";n+=String[e(284)](32+(r-32+17+3*i)%95)}return n},Kp.Y0=function(t){var e=Qp,n=\"\";Kp.DI(28)||(t+=\"-1\");for(var i=0;i<t[e(290)];i++){var r=t[e(277)](i);r-=32,r+=95e4,r-=17+3*i,r%=95,n+=String[e(284)](32+r)}return n},Kp.Dy=function(t,e){var n=Qp,i=\"\";Kp.DI(29)||(e+=3);for(var r=0;r<t[n(290)];r++)i+=String.fromCharCode((256<<16)+t[n(277)](r)+e*r&255);return i};var $p=Kp,tg=eg;function eg(t,e){var n=rg();return(eg=function(t,e){return n[t-=427]})(t,e)}function ng(t,e){var n=eg,i=(\"undefined\"===typeof Symbol?\"undefined\":x(Symbol))!==n(568)&&t[Symbol[n(613)]]||t[n(539)];if(!i){if(Array.isArray(t)||(i=function(t,e){var n=eg;if(t){if(x(t)===n(563))return ig(t,e);var i=Object[n(616)].toString[n(475)](t)[n(516)](8,-1);return(i=\"Object\"===i&&t[n(580)]?t[n(580)][n(608)]:i)===n(521)||\"Set\"===i?Array[n(462)](t):i===n(529)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[n(547)](i)?ig(t,e):void 0}}(t))||e&&t&&x(t[n(557)])===n(525)){i&&(t=i);var r=0;return{s:e=function(){},n:function(){return r>=t[n(557)]?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError(n(524))}var a,s=!0,o=!1;return{s:function(){i=i[n(475)](t)},n:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=i[n(518)]();return s=t.done,t})),e:function(t){o=!0,a=t},f:function(){var t=n;try{s||null==i[t(455)]||i[t(455)]()}finally{if(o)throw a}}}}function ig(t,e){var n=eg;(null==e||e>t[n(557)])&&(e=t[n(557)]);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function rg(){var t=[\"BoundingRect\",\"zoomIn\",\"apply\",\"1000px\",\"@@iterator\",\"getItem\",\"bounds\",\"localStorage\",\"___\",\"replaceWith\",\"clear\",\"paper\",\"test\",\"appendChild\",\"参数不合法\",\"canvas\",\"businessGoodsType\",\"testBaseUrl\",\"5px\",\"https://img.foxpsd.com/foxpsd_fangda.png\",\"Matrix3\",\"padding\",\"length\",\"innerHTML\",\"drawImage\",\"docementSvg\",\"layers\",\"abrupt\",\"string\",\"7389235puwVav\",\"wrapDiv\",\"您的产品订阅已过期，请前往 foxpsd.com 重新订阅\",\"10px\",\"undefined\",\"isArray\",\"goodsSku\",\"random\",\"image/png\",\"height\",\"left\",\"setItem\",\"done\",\"preCanvas\",\"projects\",\"clipCanvas\",\"constructor\",\"@u($L4,,843;;GCSWsKZc_h\",\"初始化组件失败，请前往 foxpsd.com 联系开发者\",\"view\",\"div\",\"clip\",\"getPos\",\"save\",\"OffscreenCanvas\",\"opacity\",\"getSkuToSvgList\",\"image\",\"8704704ttdfCu\",\"borderRadius\",\"getElementById\",\"layerInfo\",\"getView\",\"xiaoguotuList\",\"int\",\"getClipCanvas\",\"style\",\"right\",\"setup\",\"mySwiper\",\"wrap\",\"30px\",\"swiper\",\"525HwutRR\",\"name\",\"filter\",\"renderAll\",\"parentNode\",\"onload\",\"iterator\",\"参数data 类型不正确\",\"data\",\"prototype\",\"image 请传输图片链接\",\"none\",\"svg\",\"parseSvg\",\"createElement\",\"element\",\"stop\",\"foxpsd_mask_\",\"update\",\"4tuHrPC\",\"jishu\",\"请传入 goodsSku\",\"100%\",\"code\",\"y(+*0ZRU/;GBH<iAPQ\",\"width\",\"use\",\"7v-.1*2,=@/:EH@RAYa[SPgbo:\",\"toDataURL\",\"同时处理的psdSkus 最大限度是10个\",\"7392530TjqyAc\",\"悥皀亢咻讛闽巩辽朔＀诪醿斡讒间\",\"get\",\"value\",\"223974dgsOyd\",\"some\",\"45048zYWvNx\",\"wrapWidth\",\"return\",\"mark\",\"forEach\",\"command\",\"setSize\",\"@u($L17+X39A:,RF!XS`a.\",\"src\",\"from\",\"getTime\",\"floor\",\"center\",\"carousel\",\"push\",\"background\",\"prev\",\"R*,#-3-A+A9BD\",\"img_url\",\"remove\",\"content\",\"@u($L(36.@^4KMDm\",\"call\",\"rasterize\",\"userAgent\",\"position\",\"img\",\"load\",\"join\",\"Raster\",\"Size\",\"log\",\"display\",\"preLayer\",\"fangda\",\"title\",\"blendMode\",\"y),+1ZRU0<HCI=iBQR\",\"render\",\"webglCanvas\",\"catch\",\"points\",\"end\",\"onclick\",\"top\",\"getContext\",\"canvasToImg\",\"originalSize\",\"stringify\",\"matrix\",\"commandAll\",\"27aZrMRH\",\"removeChild\",\"sent\",\"psdSkus\",\"foxpsd_preview_\",\"209500aqfFlA\",\"anonymous\",\"baseWidth\",\"sessionStorage\",\"psd_svg\",\"handleSmartObject\",\"concat\",\"slice\",\"layerInfoArr\",\"next\",\"commandJSON\",\"clipPath\",\"Map\",\"msg\",\"clearRect\",\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\",\"number\",\"list\",\"rect\",\"post\",\"Arguments\",\"wrapHeight\",\"token\",\"872399TfUIit\",\"finish\",\"className\"];return(rg=function(){return t})()}!function(){for(var t=eg,e=rg();;)try{if(981538==+parseInt(t(532))+-parseInt(t(509))/2+-parseInt(t(451))/3+parseInt(t(436))/4*(parseInt(t(564))/5)+parseInt(t(592))/6+-parseInt(t(607))/7*(parseInt(t(453))/8)+-parseInt(t(504))/9*(parseInt(t(447))/10))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();var ag,sg,og,ug,lg,cg,hg,fg,dg,pg,gg,vg,mg,yg,_g=W(),xg=$p.Y0(tg(490));function bg(t,e){var n=tg,i=!1;return t&&e&&(e=window.sessionStorage[n(540)](_g))?(e=Number(e),(new Date)[n(463)]()-e<288e5||i):i}function wg(){return Sg[tg(537)](this,arguments)}function Sg(){var t=tg;return(Sg=S(M()[t(456)]((function e(n,i,r){var a,s,o,u=t;return M()[u(604)]((function(t){for(var e,l=u;;)switch(t[l(469)]=t[l(518)]){case 0:if(!(a=(a=window[l(542)][l(540)](\"jishu-number\"))?Number(a):r)){t.next=17;break}if(e=void 0,e=tg,Math[e(464)](200*Math[e(571)]())+100<=a)return s={userAgent:navigator[l(477)],use:parseInt(a),actual:a},t[l(518)]=8,z()[l(528)](\"\"[l(515)](xg)[l(515)]($p.Y0(l(581))),{sku:i,number:s[l(443)],content:JSON[l(501)](s)},{headers:b({},$p.Y0(l(470)),n)});t.next=17;break;case 8:if(!(o=t.sent).data[l(440)]||1e4!=o[l(615)][l(440)]){t.next=13;break}a=0,t[l(518)]=17;break;case 13:throw o=(new Date)[l(463)](),window[l(512)][l(575)](_g,o-432e5),\"\".concat($p.j4(l(448),3),\" \")[l(515)]($p.MQ(l(441)));case 17:window[l(542)][l(575)]($p.MQ('{}*\"2M1;6.4D'),a);case 18:case\"end\":return t[l(433)]()}}),e)}))))[t(537)](this,arguments)}function Cg(t,e){var i=eg,r=e[i(526)],a=e.psdSkus,s=e[i(570)],o=e[i(531)],u=void 0===(l=e.zoomIn)||l,l=e[i(612)];if(e=e[i(552)],n(this,Cg),this.id=t,this[i(432)]=document[i(594)](t),this[i(432)][i(600)][i(478)]=\"relative\",this[i(511)]=this[i(432)].offsetWidth,this[i(565)]=document.createElement(i(584)),this[i(565)].className=\"foxpsd_wrap\",this[i(432)][i(611)][i(548)](this[i(565)]),this[i(432)][i(611)][i(505)](this[i(432)]),this[i(565)][i(548)](this[i(432)]),!this[i(432)])throw\"没有指定element id\";if(e&&(xg=e),this[i(597)]=[],!r||!Array.isArray(r)){if(!a||!Array[i(569)](a))throw\"请传入 list 或 psdSkus\";if(10<a[i(557)])throw i(446);this[i(507)]=a}if(!s)throw i(438);if(!o)throw\"请传入 token\";this[i(597)]=r||[],this[i(570)]=s,this[i(531)]=o,this[i(551)]=\"\",this.carousel=null,this[i(579)]=document.createElement(i(550)),this[i(536)]=u,this[i(612)]=l,this[i(480)]=!1,this[i(577)]=null,this[i(486)]=null,this[i(519)]={},window[i(588)]?this.webglCanvas=new OffscreenCanvas(1,1):this[i(492)]=document[i(431)](i(550)),this[i(492)][i(442)]=0,this[i(492)][i(573)]=0,this[i(598)]()}s(Cg,[{key:(yg=tg)(598),value:(vg=yg,mg=S(M()[vg(456)]((function t(){var e;return M().wrap((function(t){for(var n=eg;;)switch(t[n(469)]=t.next){case 0:return Cg[n(546)][n(578)][n(457)]((function(t){var e=n;t[e(545)](),t[e(472)]()})),Cg[n(546)][n(578)]=null,Cg[n(546)].projects=[],t[n(518)]=5,z()[n(449)](\"\"[n(515)](xg)[n(515)]($p.Y0(n(474))).concat(this[n(570)]),{headers:b({},$p.Y0(n(470)),this[n(531)])});case 5:if((e=t[n(506)])[n(615)][n(440)]&&10001!=e[n(615)][n(440)]){t[n(518)]=8;break}throw n(566);case 8:if(this[n(551)]=e[n(615)][n(615)],window[n(512)][n(575)](_g,\"\"+(new Date)[n(463)]()),this.psdSkus&&this[n(597)][n(557)]<=0)return t[n(518)]=13,this[n(590)](this[n(507)]);t.next=14;break;case 13:this[n(597)]=t[n(506)];case 14:if(this[n(597)][n(557)]<=0)throw n(582);t[n(518)]=16;break;case 16:return this[n(432)][n(558)]=\"\",this[n(606)](),t.next=20,this.parseSvg();case 20:this[n(536)]&&this[n(487)](),this[n(612)]&&this[n(612)](),this[n(480)]=!0;case 23:case n(495):return t[n(433)]()}}),t,this)}))),function(){return mg[vg(537)](this,arguments)})},{key:yg(487),value:(gg=S(M().mark((function t(){var e,n,i=this;return M().wrap((function(t){for(var r=eg;;)switch(t[r(469)]=t[r(518)]){case 0:if(bg(this.goodsSku,this[r(531)])){t[r(518)]=2;break}return t[r(562)](r(455));case 2:(e=document.createElement(r(584)))[r(534)]=\"fangda\",(n=document[r(431)](r(479)))[r(461)]=r(554),n[r(600)][r(442)]=r(439),e[r(548)](n),e.style[r(468)]=\"rgba(0,0,0,.3)\",e.style[r(593)]=r(538),e.style[r(442)]=r(605),e.style[r(573)]=\"30px\",e[r(600)].position=\"absolute\",e[r(600)][r(601)]=r(567),e[r(600)][r(497)]=r(567),e[r(600)].zIndex=\"10\",e.style[r(556)]=r(553),this[r(432)][r(548)](e),e[r(496)]=S(M()[r(456)]((function t(){var e,n;return M().wrap((function(t){for(var r=eg;;)switch(t[r(469)]=t.next){case 0:return t.next=2,i[r(499)]();case 2:e=t[r(506)],n=[],e.forEach((function(t){var e=r,i={};i[e(471)]=t,n[e(467)](i)})),new Jp(n,{element:i[r(432)]})[r(598)]();case 7:case r(495):return t[r(433)]()}}),t)})));case 19:case r(495):return t[r(433)]()}}),t,this)}))),function(){return gg[eg(537)](this,arguments)})},{key:yg(499),value:(dg=yg,pg=S(M()[dg(456)]((function t(){var e,n,i,r,a=arguments;return M().wrap((function(t){for(var s=eg;;)switch(t[s(469)]=t[s(518)]){case 0:if(e=0<a.length&&void 0!==a[0]?a[0]:1e3,n=[],this[s(577)]){t[s(518)]=5;break}return this.xiaoguotuList[s(457)]((function(t){var e=s;n[e(467)](t[e(471)])})),t.abrupt(s(455),n);case 5:t.t0=M().keys(this[s(519)]);case 6:if((t.t1=t.t0())[s(576)]){t[s(518)]=12;break}return i=t.t1[s(450)],t[s(518)]=10,this[s(458)]({canvas:this[s(519)][i],layers:i,renderAll:!0});case 10:t[s(518)]=6;break;case 12:return r=new(Cg[s(546)][s(482)])(new(Cg[s(546)][s(483)])(e,e)),Cg[s(546)][s(578)][s(457)]((function(t){var i=s,a=t[i(540)]({name:\"foxpsd-svg\"}),o=a[i(541)].width,u=a.bounds[i(573)],l=o/u;a.bounds[i(442)]=e,a.bounds[i(573)]=a.bounds.width/l,l=(t=a[i(476)]({raster:r,insert:!1}))[i(550)][i(445)](i(572)),a[i(541)][i(442)]=o,a[i(541)][i(573)]=u,t.remove(),n[i(467)](l)})),t.abrupt(s(455),n);case 15:case s(495):return t[s(433)]()}}),t,this)}))),function(){return pg[dg(537)](this,arguments)})},{key:yg(590),value:(hg=yg,fg=S(M()[hg(456)]((function t(e){var n,i,r,a=hg;return M()[a(604)]((function(t){for(var s=a;;)switch(t[s(469)]=t.next){case 0:return t[s(518)]=2,z()[s(449)](\"\"[s(515)](xg)[s(515)]($p.Y0(s(460)))[s(515)](e[s(481)](\",\"))[s(515)]($p.Y0(s(444))).concat(this.goodsSku),{headers:b({},$p.Y0(s(470)),this[s(531)])});case 2:if((n=t[s(506)])[s(615)].code&&10001!=n[s(615)].code){t[s(518)]=5;break}throw n[s(615)][s(522)];case 5:return i=n[s(615)][s(615)][s(526)],r=[],i.forEach((function(t){var e=s;t={title:t[e(488)],img_url:t[e(471)],psd_svg:t[e(429)]},r[e(467)](t)})),t.abrupt(s(455),r);case 9:case s(495):return t[s(433)]()}}),t,this)}))),function(t){return fg[hg(537)](this,arguments)})},{key:yg(606),value:function(){var t,e=yg,n=this;bg(this[e(570)],this.token)&&((t=new I(this[e(597)],{baseWidth:this[e(511)],baseHeight:this[e(511)],element:this[e(432)],onchange:function(t){var i=e;if(n[i(577)])for(var r in n[i(519)])n[i(458)]({canvas:n[i(519)][r],layers:r})}}))[e(598)](),this.carousel=t[e(603)])}},{key:yg(430),value:(lg=yg,cg=S(M()[lg(456)]((function t(){var e,n,i,r,a,s,o,u=lg;return M()[u(604)]((function(t){for(var l=u;;)switch(t[l(469)]=t[l(518)]){case 0:if(bg(this[l(570)],this[l(531)])){t.next=2;break}return t[l(562)](l(455));case 2:e=this[l(597)],n=0;case 4:if(n<e[l(557)])return i=e[n],Cg[l(546)][l(602)](document[l(594)](l(508)[l(515)](n+1))),t[l(518)]=9,function(){return X[H(400)](this,arguments)}(i[l(513)]);t[l(518)]=28;break;case 9:o=t[l(506)],i[l(517)]=o[l(595)],i[l(560)]=o[l(560)],i.wrapWidth=o[l(454)],i[l(530)]=o[l(530)],r=Cg[l(546)][l(578)][n][l(596)](),a=F().projects[n].importSVG(i[l(560)],{insert:!0}),s=a.bounds.width,o=a[l(541)][l(573)],o=s/o,r[l(541)][l(442)]/o>r[l(541)][l(573)]?(a.bounds[l(442)]=r.bounds[l(573)]*o,a[l(541)].height=r.bounds.height):(a[l(541)][l(442)]=r[l(541)][l(442)],a[l(541)][l(573)]=r.bounds[l(442)]/o),a.bounds[l(574)]=r[l(465)].x-a[l(541)][l(442)]/2,a.bounds[l(497)]=r.center.y-a[l(541)][l(573)]/2,a[l(608)]=\"foxpsd-svg\",a.getItems({className:l(482)}).forEach((function(t){var e=l,n=new(Cg[e(546)][e(482)])({crossOrigin:e(510),source:t.source,insert:!1});n[e(459)](t.size),n[e(502)]=t[e(502)],n[e(608)]=t[e(608)],n[e(489)]=t.blendMode,n[e(589)]=t[e(589)],t[e(544)](n),n[e(583)][e(435)]()}));case 25:n++,t.next=4;break;case 28:case\"end\":return t[l(433)]()}}),t,this)}))),function(){return cg[lg(537)](this,arguments)})},{key:yg(458),value:(og=yg,ug=S(M()[og(456)]((function t(e){var n,i,r,a,s,o,u,l,c,h,f,d,p,g,v,m,y,_,b,w,C;return M().wrap((function(t){for(var T=eg;;)switch(t.prev=t[T(518)]){case 0:if(n=e.canvas,i=e[T(591)],r=e[T(561)],s=e[T(610)],a=void 0!==s&&s,u=e[T(437)],s=void 0===u||u,bg(this[T(570)],this[T(531)])){t[T(518)]=3;break}return t[T(562)](T(455));case 3:if((n||i)&&r){t[T(518)]=5;break}throw T(549);case 5:if(i&&x(i)!=T(563))throw T(427);t[T(518)]=7;break;case 7:if(o=n,i)return t.t0=Y,t.next=12,function(t){return new Promise((e=S(M().mark((function e(n){var i,r,a,s=H;return M()[s(417)]((function(e){for(var o=s;;)switch(e[o(386)]=e[o(410)]){case 0:if(/^data:/[o(349)](t))return n(t),e[o(403)](\"return\");e[o(410)]=3;break;case 3:return i=t[o(411)](t[o(401)](\".\")+1).toLowerCase(),e[o(410)]=6,z()[o(391)](t,{responseType:o(357)});case 6:r=e[o(339)],(a=new FileReader)[o(396)](r[o(356)]),a.onloadend=function(){var t=a[(t=o)(404)][t(375)]()[t(392)](t(335),t(371).concat(i,\";\"));n(t)};case 10:case o(422):return e[o(379)]()}}),e)}))),function(t){return e[H(400)](this,arguments)}));var e}(i);t.next=21;break;case 12:return t.t1=t.sent,t[T(518)]=15,(0,t.t0)(t.t1);case 15:u=t[T(506)],(o=document[T(431)](\"canvas\"))[T(442)]=u[T(442)],o[T(573)]=u[T(573)],o.getContext(\"2d\")[T(559)](u,0,0,u[T(442)],u[T(573)]);case 21:d=this[T(597)],l=r.split(\",\"),this[T(577)]=o,this[T(486)]=r,this[T(519)][r]=o,f=this[T(466)][T(586)](),c=a?d:[d[f]],h=a?Cg[T(546)][T(578)]:[Cg[T(546)][T(578)][f]],(d=document[T(594)](T(434)[T(515)](f+1)))&&(d.style[T(485)]=T(428)),f=[],d=ng(c),t[T(469)]=33,d.s();case 35:if((g=d.n()).done){t[T(518)]=43;break}if((p=g[T(450)]).layerInfoArr){t[T(518)]=39;break}throw\"数据还没有准备好，请稍后再试\";case 39:g=p[T(517)][T(609)]((function(t){var e=T;return l[e(452)]((function(n){var i=e;return n==t.id.split(i(543))[0]}))})),f=f.concat(g);case 41:t.next=35;break;case 43:t[T(518)]=48;break;case 45:t.prev=45,t.t2=t[T(493)](33),d.e(t.t2);case 48:return t[T(469)]=48,d.f(),t.finish(48);case 51:v=[],m=ng(f),t[T(469)]=53,m.s();case 55:if((b=m.n())[T(576)]){t[T(518)]=79;break}y=b.value,_=ng(h),t[T(469)]=58,_.s();case 60:if((b=_.n())[T(576)]){t[T(518)]=69;break}if(C=b[T(450)],(w=C[T(540)]({name:y.id}))&&y[T(535)]){t[T(518)]=65;break}return t.abrupt(\"continue\",67);case 65:C=this[T(491)]({layerInfo:y,canvas:o,raster:w,wrapWidth:y[T(454)],wrapHeight:y[T(530)],layerName:y.id}),v[T(467)](C);case 67:t.next=60;break;case 69:t[T(518)]=74;break;case 71:t[T(469)]=71,t.t3=t[T(493)](58),_.e(t.t3);case 74:return t[T(469)]=74,_.f(),t[T(533)](74);case 77:t[T(518)]=55;break;case 79:t[T(518)]=84;break;case 81:t[T(469)]=81,t.t4=t[T(493)](53),m.e(t.t4);case 84:return t[T(469)]=84,m.f(),t.finish(84);case 87:return s&&wg(this.token,this[T(570)],c[T(557)]),t[T(518)]=90,Promise.all(v);case 90:case T(495):return t[T(433)]()}}),t,this,[[33,45,48,51],[53,81,84,87],[58,71,74,77]])}))),function(t){return ug[og(537)](this,arguments)})},{key:yg(503),value:(ag=yg,sg=S(M()[ag(456)]((function t(e){var n,i,r,a,s,o,u;return M().wrap((function(t){for(var l=eg;;)switch(t[l(469)]=t[l(518)]){case 0:if(o=function(t){var e,n=l,r=t[n(608)],a=t[n(473)];if(\"{}\"===JSON[n(501)](i))return!1;for(e in i)if(i[e]==a)return i[e+\",\"+r]=a,delete i[e],!0;return!1},n=e[l(615)]){t[l(518)]=4;break}throw\"参数data 不能为空\";case 4:if(Array[l(569)](n)){t[l(518)]=6;break}throw l(614);case 6:i={},r=ng(n);try{for(r.s();!(a=r.n())[l(576)];)(s=a[l(450)])[l(608)]&&s[l(473)]&&(o(s)||(i[s[l(608)]]=s[l(473)]))}catch(t){r.e(t)}finally{r.f()}for(u in i)(this[l(519)][u]&&this[l(519)][u]!=i[u]||!this[l(519)][u])&&this[l(458)]({image:i[u],layers:u,jishu:!1});wg(this[l(531)],this[l(570)],1);case 11:case\"end\":return t[l(433)]()}}),t,this)}))),function(t){return sg[ag(537)](this,arguments)})},{key:yg(491),value:function(t){var e=yg,n=this,i=void 0===(r=t[e(595)])?{}:r,r=t[e(550)],a=t.raster,s=t[e(530)],o=t[e(454)];if(t=t.layerName,bg(this[e(570)],this[e(531)])){var u={layer:{BoundingRect:i.BoundingRect[e(481)](),IsVisible:!0,Matrix3:i[e(555)],OriginalSize:i[e(500)],Points:i[e(494)],Type:\"SmartObject\",VectorMask:null,Height:i[e(527)][3],Width:i[e(527)][2],X:i[e(527)][0],Y:i[e(527)][1],layerName:t},cropDesignCanvas:r,psdWidth:o,psdHeight:s,webglCanvas:this[e(492)]};return new Promise((function(t){var r=e;(new jp)[r(514)](u,(function(e){var u,l,c,h,f,d,p=r;a&&(u=e,(u=i[p(520)]?n[p(599)](i[p(520)],e,o,s):u)[p(442)]!=u[p(573)]&&((d=document[p(431)](p(550)))[p(442)]=1e3,d.height=1e3,l=d[p(498)](\"2d\"),c=d[p(442)],(h=d[p(573)])<c/(f=u[p(442)]/u[p(573)])?c=h*f:h=c/f,e=(d[p(442)]-c)/2,f=(d[p(573)]-h)/2,l[p(559)](u,e,f,c,h),u=d),a.matrix=new Cg.paper.Matrix(1,0,0,0,1,0,0),a[p(541)][p(442)]=a[p(583)][p(541)][p(442)],a[p(541)][p(573)]=a[p(583)][p(541)][p(573)],a[p(541)].left=0,a[p(541)][p(497)]=0,(d=a.getContext(\"2d\"))[p(523)](0,0,a[p(442)],a[p(573)]),d[p(559)](u,0,0,a[p(442)],a[p(573)]),a[p(583)].update()),t(a)}))}))}}},{key:yg(599),value:function(t,e,n,i){var r=yg,a=this.clipCanvas;a[r(442)]=n,a.height=i;var s=a.getContext(\"2d\");return s[r(523)](0,0,n,i),new Up.Z(t)[r(587)]().beginPath().to(s),s[r(585)](),s[r(559)](e,0,0,n,i),a}}]),B=Cg,b(B,\"paper\",F());var Mg=B}(),r.default}()}))}).call(this,n(\"4362\"),n(\"62e4\")(t))},\"2d0d\":function(t,e,n){n(\"4ae1\"),n(\"d3b7\"),n(\"f8c9\");var i=n(\"36c6\"),r=n(\"6f8f\"),a=n(\"6b58\");function s(t){var e=r();return function(){var n,r=i(t);if(e){var s=i(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return a(this,n)}}t.exports=s,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"2d83\":function(t,e,n){\"use strict\";var i=n(\"387f\");t.exports=function(t,e,n,r,a){var s=new Error(t);return i(s,e,n,r,a)}},\"2e67\":function(t,e,n){\"use strict\";t.exports=function(t){return!(!t||!t.__CANCEL__)}},3:function(t,e){},\"30b5\":function(t,e,n){\"use strict\";var i=n(\"c532\");function r(t){return encodeURIComponent(t).replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\").replace(/%20/g,\"+\").replace(/%5B/gi,\"[\").replace(/%5D/gi,\"]\")}t.exports=function(t,e,n){if(!e)return t;var a;if(n)a=n(e);else if(i.isURLSearchParams(e))a=e.toString();else{var s=[];i.forEach(e,(function(t,e){null!==t&&\"undefined\"!==typeof t&&(i.isArray(t)?e+=\"[]\":t=[t],i.forEach(t,(function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),s.push(r(e)+\"=\"+r(t))})))})),a=s.join(\"&\")}if(a){var o=t.indexOf(\"#\");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf(\"?\")?\"?\":\"&\")+a}return t}},3280:function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"2ba4\"),a=n(\"e58c\"),s=i.aTypedArray,o=i.exportTypedArrayMethod;o(\"lastIndexOf\",(function(t){var e=arguments.length;return r(a,s(this),e>1?[t,arguments[1]]:[t])}))},\"33d1\":function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"7b0b\"),a=n(\"07fa\"),s=n(\"5926\"),o=n(\"44d2\");i({target:\"Array\",proto:!0},{at:function(t){var e=r(this),n=a(e),i=s(t),o=i>=0?i:n+i;return o<0||o>=n?void 0:e[o]}}),o(\"at\")},3410:function(t,e,n){var i=n(\"23e7\"),r=n(\"d039\"),a=n(\"7b0b\"),s=n(\"e163\"),o=n(\"e177\"),u=r((function(){s(1)}));i({target:\"Object\",stat:!0,forced:u,sham:!o},{getPrototypeOf:function(t){return s(a(t))}})},\"35b3\":function(t,e,n){var i=n(\"23e7\");i({target:\"Number\",stat:!0},{EPSILON:Math.pow(2,-52)})},\"36c6\":function(t,e,n){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports[\"default\"]=t.exports,i(e)}n(\"3410\"),t.exports=i,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"387f\":function(t,e,n){\"use strict\";t.exports=function(t,e,n,i,r){return t.config=e,n&&(t.code=n),t.request=i,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}},\"38cf\":function(t,e,n){var i=n(\"23e7\"),r=n(\"1148\");i({target:\"String\",proto:!0},{repeat:r})},3934:function(t,e,n){\"use strict\";var i=n(\"c532\");t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement(\"a\");function r(t){var i=t;return e&&(n.setAttribute(\"href\",i),i=n.href),n.setAttribute(\"href\",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,\"\"):\"\",host:n.host,search:n.search?n.search.replace(/^\\?/,\"\"):\"\",hash:n.hash?n.hash.replace(/^#/,\"\"):\"\",hostname:n.hostname,port:n.port,pathname:\"/\"===n.pathname.charAt(0)?n.pathname:\"/\"+n.pathname}}return t=r(window.location.href),function(e){var n=i.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return function(){return!0}}()},\"3a7b\":function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"b727\").findIndex,a=i.aTypedArray,s=i.exportTypedArrayMethod;s(\"findIndex\",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},\"3c5d\":function(t,e,n){\"use strict\";var i=n(\"da84\"),r=n(\"c65b\"),a=n(\"ebb5\"),s=n(\"07fa\"),o=n(\"182d\"),u=n(\"7b0b\"),l=n(\"d039\"),c=i.RangeError,h=i.Int8Array,f=h&&h.prototype,d=f&&f.set,p=a.aTypedArray,g=a.exportTypedArrayMethod,v=!l((function(){var t=new Uint8ClampedArray(2);return r(d,t,{length:1,0:3},1),3!==t[1]})),m=v&&a.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var t=new h(2);return t.set(1),t.set(\"2\",1),0!==t[0]||2!==t[1]}));g(\"set\",(function(t){p(this);var e=o(arguments.length>1?arguments[1]:void 0,1),n=u(t);if(v)return r(d,this,n,e);var i=this.length,a=s(n),l=0;if(a+e>i)throw c(\"Wrong length\");while(l<a)this[e+l]=n[l++]}),!v||m)},\"3c96\":function(t,e,n){function i(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}n(\"d9e2\"),t.exports=i,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"3fcc\":function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"b727\").map,a=n(\"b6b7\"),s=i.aTypedArray,o=i.exportTypedArrayMethod;o(\"map\",(function(t){return r(s(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(a(t))(e)}))}))},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title=\"browser\",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error(\"No such module. (Possibly not yet loaded)\")},function(){var t,i=\"/\";e.cwd=function(){return i},e.chdir=function(e){t||(t=n(\"df7c\")),i=t.resolve(e,i)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},\"466d\":function(t,e,n){\"use strict\";var i=n(\"c65b\"),r=n(\"d784\"),a=n(\"825a\"),s=n(\"50c4\"),o=n(\"577e\"),u=n(\"1d80\"),l=n(\"dc4a\"),c=n(\"8aa5\"),h=n(\"14c3\");r(\"match\",(function(t,e,n){return[function(e){var n=u(this),r=void 0==e?void 0:l(e,t);return r?i(r,e,n):new RegExp(e)[t](o(n))},function(t){var i=a(this),r=o(t),u=n(e,i,r);if(u.done)return u.value;if(!i.global)return h(i,r);var l=i.unicode;i.lastIndex=0;var f,d=[],p=0;while(null!==(f=h(i,r))){var g=o(f[0]);d[p]=g,\"\"===g&&(i.lastIndex=c(r,s(i.lastIndex),l)),p++}return 0===p?null:d}]}))},\"467f\":function(t,e,n){\"use strict\";var i=n(\"2d83\");t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(i(\"Request failed with status code \"+n.status,n.config,null,n.request,n)):t(n)}},\"471c\":function(t,e,n){\"use strict\";n(\"f152\")},\"498a\":function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"58a8\").trim,a=n(\"c8d2\");i({target:\"String\",proto:!0,forced:a(\"trim\")},{trim:function(){return r(this)}})},\"4a4b\":function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports[\"default\"]=t.exports,n(e,i)}t.exports=n,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"4a7b\":function(t,e,n){\"use strict\";var i=n(\"c532\");t.exports=function(t,e){e=e||{};var n={};function r(t,e){return i.isPlainObject(t)&&i.isPlainObject(e)?i.merge(t,e):i.isPlainObject(e)?i.merge({},e):i.isArray(e)?e.slice():e}function a(n){return i.isUndefined(e[n])?i.isUndefined(t[n])?void 0:r(void 0,t[n]):r(t[n],e[n])}function s(t){if(!i.isUndefined(e[t]))return r(void 0,e[t])}function o(n){return i.isUndefined(e[n])?i.isUndefined(t[n])?void 0:r(void 0,t[n]):r(void 0,e[n])}function u(n){return n in e?r(t[n],e[n]):n in t?r(void 0,t[n]):void 0}var l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return i.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=l[t]||a,r=e(t);i.isUndefined(r)&&e!==u||(n[t]=r)})),n}},\"4a9b\":function(t,e,n){var i=n(\"74e8\");i(\"Float64\",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},\"4ae1\":function(t,e,n){var i=n(\"23e7\"),r=n(\"d066\"),a=n(\"2ba4\"),s=n(\"0538\"),o=n(\"5087\"),u=n(\"825a\"),l=n(\"861d\"),c=n(\"7c73\"),h=n(\"d039\"),f=r(\"Reflect\",\"construct\"),d=Object.prototype,p=[].push,g=h((function(){function t(){}return!(f((function(){}),[],t)instanceof t)})),v=!h((function(){f((function(){}))})),m=g||v;i({target:\"Reflect\",stat:!0,forced:m,sham:m},{construct:function(t,e){o(t),u(e);var n=arguments.length<3?t:o(arguments[2]);if(v&&!g)return f(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return a(p,i,e),new(a(s,t,i))}var r=n.prototype,h=c(l(r)?r:d),m=a(t,h,e);return l(m)?m:h}})},\"4c3d\":function(t,e,n){\"use strict\";(function(e){var i=n(\"c532\"),r=n(\"c8af\"),a=n(\"387f\"),s=n(\"cafa\"),o={\"Content-Type\":\"application/x-www-form-urlencoded\"};function u(t,e){!i.isUndefined(t)&&i.isUndefined(t[\"Content-Type\"])&&(t[\"Content-Type\"]=e)}function l(){var t;return(\"undefined\"!==typeof XMLHttpRequest||\"undefined\"!==typeof e&&\"[object process]\"===Object.prototype.toString.call(e))&&(t=n(\"b50d\")),t}function c(t,e,n){if(i.isString(t))try{return(e||JSON.parse)(t),i.trim(t)}catch(r){if(\"SyntaxError\"!==r.name)throw r}return(n||JSON.stringify)(t)}var h={transitional:s,adapter:l(),transformRequest:[function(t,e){return r(e,\"Accept\"),r(e,\"Content-Type\"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(u(e,\"application/x-www-form-urlencoded;charset=utf-8\"),t.toString()):i.isObject(t)||e&&\"application/json\"===e[\"Content-Type\"]?(u(e,\"application/json\"),c(t)):t}],transformResponse:[function(t){var e=this.transitional||h.transitional,n=e&&e.silentJSONParsing,r=e&&e.forcedJSONParsing,s=!n&&\"json\"===this.responseType;if(s||r&&i.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(s){if(\"SyntaxError\"===o.name)throw a(o,this,\"E_JSON_PARSE\");throw o}}return t}],timeout:0,xsrfCookieName:\"XSRF-TOKEN\",xsrfHeaderName:\"X-XSRF-TOKEN\",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:\"application/json, text/plain, */*\"}}};i.forEach([\"delete\",\"get\",\"head\"],(function(t){h.headers[t]={}})),i.forEach([\"post\",\"put\",\"patch\"],(function(t){h.headers[t]=i.merge(o)})),t.exports=h}).call(this,n(\"4362\"))},\"4c53\":function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"857a\"),a=n(\"af03\");i({target:\"String\",proto:!0,forced:a(\"sub\")},{sub:function(){return r(this,\"sub\",\"\",\"\")}})},\"4ec9\":function(t,e,n){\"use strict\";var i=n(\"6d61\"),r=n(\"6566\");i(\"Map\",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},\"4fad\":function(t,e,n){var i=n(\"d039\"),r=n(\"861d\"),a=n(\"c6b6\"),s=n(\"d86b\"),o=Object.isExtensible,u=i((function(){o(1)}));t.exports=u||s?function(t){return!!r(t)&&((!s||\"ArrayBuffer\"!=a(t))&&(!o||o(t)))}:o},\"522c\":function(t,e,n){t.exports=n.p+\"img/<.6e25c6c3.svg\"},5270:function(t,e,n){\"use strict\";var i=n(\"c532\"),r=n(\"c401\"),a=n(\"2e67\"),s=n(\"4c3d\"),o=n(\"7a77\");function u(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new o(\"canceled\")}t.exports=function(t){u(t),t.headers=t.headers||{},t.data=r.call(t,t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach([\"delete\",\"get\",\"head\",\"post\",\"put\",\"patch\",\"common\"],(function(e){delete t.headers[e]}));var e=t.adapter||s.adapter;return e(t).then((function(e){return u(t),e.data=r.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return a(e)||(u(t),e&&e.response&&(e.response.data=r.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},5377:function(t,e,n){var i=n(\"83ab\"),r=n(\"9bf2\"),a=n(\"ad6d\"),s=n(\"d039\"),o=RegExp.prototype,u=i&&s((function(){return\"sy\"!==Object.getOwnPropertyDescriptor(o,\"flags\").get.call({dotAll:!0,sticky:!0})}));u&&r.f(o,\"flags\",{configurable:!0,get:a})},\"5a43\":function(t,e){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}t.exports=n,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"5bc3\":function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,\"prototype\",{writable:!1}),t}t.exports=i,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"5cc6\":function(t,e,n){var i=n(\"74e8\");i(\"Uint8\",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},\"5cce\":function(t,e){t.exports={version:\"0.26.1\"}},\"5d41\":function(t,e,n){var i=n(\"23e7\"),r=n(\"c65b\"),a=n(\"861d\"),s=n(\"825a\"),o=n(\"c60d\"),u=n(\"06cf\"),l=n(\"e163\");function c(t,e){var n,i,h=arguments.length<3?t:arguments[2];return s(t)===h?t[e]:(n=u.f(t,e),n?o(n)?n.value:void 0===n.get?void 0:r(n.get,h):a(i=l(t))?c(i,e,h):void 0)}i({target:\"Reflect\",stat:!0},{get:c})},\"5f02\":function(t,e,n){\"use strict\";var i=n(\"c532\");t.exports=function(t){return i.isObject(t)&&!0===t.isAxiosError}},\"5f96\":function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"e330\"),a=i.aTypedArray,s=i.exportTypedArrayMethod,o=r([].join);s(\"join\",(function(t){return o(a(this),t)}))},6062:function(t,e,n){\"use strict\";var i=n(\"6d61\"),r=n(\"6566\");i(\"Set\",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},\"60bd\":function(t,e,n){\"use strict\";var i=n(\"da84\"),r=n(\"d039\"),a=n(\"e330\"),s=n(\"ebb5\"),o=n(\"e260\"),u=n(\"b622\"),l=u(\"iterator\"),c=i.Uint8Array,h=a(o.values),f=a(o.keys),d=a(o.entries),p=s.aTypedArray,g=s.exportTypedArrayMethod,v=c&&c.prototype,m=!r((function(){v[l].call([1])})),y=!!v&&v.values&&v[l]===v.values&&\"values\"===v.values.name,_=function(){return h(p(this))};g(\"entries\",(function(){return d(p(this))}),m),g(\"keys\",(function(){return f(p(this))}),m),g(\"values\",_,m||!y,{name:\"values\"}),g(l,_,m||!y,{name:\"values\"})},\"621a\":function(t,e,n){\"use strict\";var i=n(\"da84\"),r=n(\"e330\"),a=n(\"83ab\"),s=n(\"a981\"),o=n(\"5e77\"),u=n(\"9112\"),l=n(\"e2cc\"),c=n(\"d039\"),h=n(\"19aa\"),f=n(\"5926\"),d=n(\"50c4\"),p=n(\"0b25\"),g=n(\"77a7\"),v=n(\"e163\"),m=n(\"d2bb\"),y=n(\"241c\").f,_=n(\"9bf2\").f,x=n(\"81d5\"),b=n(\"4dae\"),w=n(\"d44e\"),S=n(\"69f3\"),C=o.PROPER,M=o.CONFIGURABLE,T=S.get,k=S.set,A=\"ArrayBuffer\",E=\"DataView\",O=\"prototype\",P=\"Wrong length\",I=\"Wrong index\",L=i[A],D=L,R=D&&D[O],N=i[E],F=N&&N[O],B=Object.prototype,z=i.Array,j=i.RangeError,U=r(x),V=r([].reverse),W=g.pack,G=g.unpack,H=function(t){return[255&t]},X=function(t){return[255&t,t>>8&255]},Y=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},J=function(t){return W(t,23,4)},Z=function(t){return W(t,52,8)},K=function(t,e){_(t[O],e,{get:function(){return T(this)[e]}})},Q=function(t,e,n,i){var r=p(n),a=T(t);if(r+e>a.byteLength)throw j(I);var s=T(a.buffer).bytes,o=r+a.byteOffset,u=b(s,o,o+e);return i?u:V(u)},$=function(t,e,n,i,r,a){var s=p(n),o=T(t);if(s+e>o.byteLength)throw j(I);for(var u=T(o.buffer).bytes,l=s+o.byteOffset,c=i(+r),h=0;h<e;h++)u[l+h]=c[a?h:e-h-1]};if(s){var tt=C&&L.name!==A;if(c((function(){L(1)}))&&c((function(){new L(-1)}))&&!c((function(){return new L,new L(1.5),new L(NaN),tt&&!M})))tt&&M&&u(L,\"name\",A);else{D=function(t){return h(this,R),new L(p(t))},D[O]=R;for(var et,nt=y(L),it=0;nt.length>it;)(et=nt[it++])in D||u(D,et,L[et]);R.constructor=D}m&&v(F)!==B&&m(F,B);var rt=new N(new D(2)),at=r(F.setInt8);rt.setInt8(0,2147483648),rt.setInt8(1,2147483649),!rt.getInt8(0)&&rt.getInt8(1)||l(F,{setInt8:function(t,e){at(this,t,e<<24>>24)},setUint8:function(t,e){at(this,t,e<<24>>24)}},{unsafe:!0})}else D=function(t){h(this,R);var e=p(t);k(this,{bytes:U(z(e),0),byteLength:e}),a||(this.byteLength=e)},R=D[O],N=function(t,e,n){h(this,F),h(t,R);var i=T(t).byteLength,r=f(e);if(r<0||r>i)throw j(\"Wrong offset\");if(n=void 0===n?i-r:d(n),r+n>i)throw j(P);k(this,{buffer:t,byteLength:n,byteOffset:r}),a||(this.buffer=t,this.byteLength=n,this.byteOffset=r)},F=N[O],a&&(K(D,\"byteLength\"),K(N,\"buffer\"),K(N,\"byteLength\"),K(N,\"byteOffset\")),l(F,{getInt8:function(t){return Q(this,1,t)[0]<<24>>24},getUint8:function(t){return Q(this,1,t)[0]},getInt16:function(t){var e=Q(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Q(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return q(Q(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return q(Q(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return G(Q(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return G(Q(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){$(this,1,t,H,e)},setUint8:function(t,e){$(this,1,t,H,e)},setInt16:function(t,e){$(this,2,t,X,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){$(this,2,t,X,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){$(this,4,t,Y,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){$(this,4,t,Y,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){$(this,4,t,J,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){$(this,8,t,Z,e,arguments.length>2?arguments[2]:void 0)}});w(D,A),w(N,E),t.exports={ArrayBuffer:D,DataView:N}},\"62e4\":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},6374:function(t,e,n){n(\"a4d3\"),n(\"e01a\"),n(\"d3b7\"),n(\"d28b\"),n(\"3ca3\"),n(\"ddb0\"),n(\"d9e2\");var i=n(\"6613\");function r(t,e){var n=\"undefined\"!==typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&\"number\"===typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var s,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,s=t},f:function(){try{o||null==n[\"return\"]||n[\"return\"]()}finally{if(u)throw s}}}}t.exports=r,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"649e\":function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"b727\").some,a=i.aTypedArray,s=i.exportTypedArrayMethod;s(\"some\",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},6566:function(t,e,n){\"use strict\";var i=n(\"9bf2\").f,r=n(\"7c73\"),a=n(\"e2cc\"),s=n(\"0366\"),o=n(\"19aa\"),u=n(\"2266\"),l=n(\"7dd0\"),c=n(\"2626\"),h=n(\"83ab\"),f=n(\"f183\").fastKey,d=n(\"69f3\"),p=d.set,g=d.getterFor;t.exports={getConstructor:function(t,e,n,l){var c=t((function(t,i){o(t,d),p(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),h||(t.size=0),void 0!=i&&u(i,t[l],{that:t,AS_ENTRIES:n})})),d=c.prototype,v=g(e),m=function(t,e,n){var i,r,a=v(t),s=y(t,e);return s?s.value=n:(a.last=s={index:r=f(e,!0),key:e,value:n,previous:i=a.last,next:void 0,removed:!1},a.first||(a.first=s),i&&(i.next=s),h?a.size++:t.size++,\"F\"!==r&&(a.index[r]=s)),t},y=function(t,e){var n,i=v(t),r=f(e);if(\"F\"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return a(d,{clear:function(){var t=this,e=v(t),n=e.index,i=e.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;e.first=e.last=void 0,h?e.size=0:t.size=0},delete:function(t){var e=this,n=v(e),i=y(e,t);if(i){var r=i.next,a=i.previous;delete n.index[i.index],i.removed=!0,a&&(a.next=r),r&&(r.previous=a),n.first==i&&(n.first=r),n.last==i&&(n.last=a),h?n.size--:e.size--}return!!i},forEach:function(t){var e,n=v(this),i=s(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:n.first){i(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!y(this,t)}}),a(d,n?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),h&&i(d,\"size\",{get:function(){return v(this).size}}),c},setStrong:function(t,e,n){var i=e+\" Iterator\",r=g(e),a=g(i);l(t,e,(function(t,e){p(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){var t=a(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?\"keys\"==e?{value:n.key,done:!1}:\"values\"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?\"entries\":\"values\",!n,!0),c(e)}}},6613:function(t,e,n){n(\"fb6a\"),n(\"d3b7\"),n(\"b0c0\"),n(\"a630\"),n(\"3ca3\"),n(\"ac1f\"),n(\"00b4\");var i=n(\"5a43\");function r(t,e){if(t){if(\"string\"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}t.exports=r,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"6b58\":function(t,e,n){n(\"d9e2\");var i=n(\"7037\")[\"default\"],r=n(\"3c96\");function a(t,e){if(e&&(\"object\"===i(e)||\"function\"===typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return r(t)}t.exports=a,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"6c57\":function(t,e,n){var i=n(\"23e7\"),r=n(\"da84\");i({global:!0},{globalThis:r})},\"6d61\":function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"da84\"),a=n(\"e330\"),s=n(\"94ca\"),o=n(\"6eeb\"),u=n(\"f183\"),l=n(\"2266\"),c=n(\"19aa\"),h=n(\"1626\"),f=n(\"861d\"),d=n(\"d039\"),p=n(\"1c7e\"),g=n(\"d44e\"),v=n(\"7156\");t.exports=function(t,e,n){var m=-1!==t.indexOf(\"Map\"),y=-1!==t.indexOf(\"Weak\"),_=m?\"set\":\"add\",x=r[t],b=x&&x.prototype,w=x,S={},C=function(t){var e=a(b[t]);o(b,t,\"add\"==t?function(t){return e(this,0===t?0:t),this}:\"delete\"==t?function(t){return!(y&&!f(t))&&e(this,0===t?0:t)}:\"get\"==t?function(t){return y&&!f(t)?void 0:e(this,0===t?0:t)}:\"has\"==t?function(t){return!(y&&!f(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})},M=s(t,!h(x)||!(y||b.forEach&&!d((function(){(new x).entries().next()}))));if(M)w=n.getConstructor(e,t,m,_),u.enable();else if(s(t,!0)){var T=new w,k=T[_](y?{}:-0,1)!=T,A=d((function(){T.has(1)})),E=p((function(t){new x(t)})),O=!y&&d((function(){var t=new x,e=5;while(e--)t[_](e,e);return!t.has(-0)}));E||(w=e((function(t,e){c(t,b);var n=v(new x,t,w);return void 0!=e&&l(e,n[_],{that:n,AS_ENTRIES:m}),n})),w.prototype=b,b.constructor=w),(A||O)&&(C(\"delete\"),C(\"has\"),m&&C(\"get\")),(O||k)&&C(_),y&&b.clear&&delete b.clear}return S[t]=w,i({global:!0,forced:w!=x},S),g(w,t),y||n.setStrong(w,t,m),w}},\"6f8f\":function(t,e,n){function i(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}n(\"d3b7\"),n(\"f8c9\"),n(\"4ae1\"),t.exports=i,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},7037:function(t,e,n){function i(e){return t.exports=i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},t.exports.__esModule=!0,t.exports[\"default\"]=t.exports,i(e)}n(\"a4d3\"),n(\"e01a\"),n(\"d3b7\"),n(\"d28b\"),n(\"3ca3\"),n(\"ddb0\"),t.exports=i,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},7039:function(t,e,n){var i=n(\"23e7\"),r=n(\"d039\"),a=n(\"057f\").f,s=r((function(){return!Object.getOwnPropertyNames(1)}));i({target:\"Object\",stat:!0,forced:s},{getOwnPropertyNames:a})},7190:function(t,e,n){t.exports=n.p+\"img/why.c0892bce.svg\"},\"72f7\":function(t,e,n){\"use strict\";var i=n(\"ebb5\").exportTypedArrayMethod,r=n(\"d039\"),a=n(\"da84\"),s=n(\"e330\"),o=a.Uint8Array,u=o&&o.prototype||{},l=[].toString,c=s([].join);r((function(){l.call({})}))&&(l=function(){return c(this)});var h=u.toString!=l;i(\"toString\",l,h)},\"735e\":function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"c65b\"),a=n(\"81d5\"),s=i.aTypedArray,o=i.exportTypedArrayMethod;o(\"fill\",(function(t){var e=arguments.length;return r(a,s(this),t,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}))},\"74e8\":function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"da84\"),a=n(\"c65b\"),s=n(\"83ab\"),o=n(\"8aa7\"),u=n(\"ebb5\"),l=n(\"621a\"),c=n(\"19aa\"),h=n(\"5c6c\"),f=n(\"9112\"),d=n(\"eac5\"),p=n(\"50c4\"),g=n(\"0b25\"),v=n(\"182d\"),m=n(\"a04b\"),y=n(\"1a2d\"),_=n(\"f5df\"),x=n(\"861d\"),b=n(\"d9b5\"),w=n(\"7c73\"),S=n(\"3a9b\"),C=n(\"d2bb\"),M=n(\"241c\").f,T=n(\"a078\"),k=n(\"b727\").forEach,A=n(\"2626\"),E=n(\"9bf2\"),O=n(\"06cf\"),P=n(\"69f3\"),I=n(\"7156\"),L=P.get,D=P.set,R=E.f,N=O.f,F=Math.round,B=r.RangeError,z=l.ArrayBuffer,j=z.prototype,U=l.DataView,V=u.NATIVE_ARRAY_BUFFER_VIEWS,W=u.TYPED_ARRAY_CONSTRUCTOR,G=u.TYPED_ARRAY_TAG,H=u.TypedArray,X=u.TypedArrayPrototype,Y=u.aTypedArrayConstructor,q=u.isTypedArray,J=\"BYTES_PER_ELEMENT\",Z=\"Wrong length\",K=function(t,e){Y(t);var n=0,i=e.length,r=new t(i);while(i>n)r[n]=e[n++];return r},Q=function(t,e){R(t,e,{get:function(){return L(this)[e]}})},$=function(t){var e;return S(j,t)||\"ArrayBuffer\"==(e=_(t))||\"SharedArrayBuffer\"==e},tt=function(t,e){return q(t)&&!b(e)&&e in t&&d(+e)&&e>=0},et=function(t,e){return e=m(e),tt(t,e)?h(2,t[e]):N(t,e)},nt=function(t,e,n){return e=m(e),!(tt(t,e)&&x(n)&&y(n,\"value\"))||y(n,\"get\")||y(n,\"set\")||n.configurable||y(n,\"writable\")&&!n.writable||y(n,\"enumerable\")&&!n.enumerable?R(t,e,n):(t[e]=n.value,t)};s?(V||(O.f=et,E.f=nt,Q(X,\"buffer\"),Q(X,\"byteOffset\"),Q(X,\"byteLength\"),Q(X,\"length\")),i({target:\"Object\",stat:!0,forced:!V},{getOwnPropertyDescriptor:et,defineProperty:nt}),t.exports=function(t,e,n){var s=t.match(/\\d+$/)[0]/8,u=t+(n?\"Clamped\":\"\")+\"Array\",l=\"get\"+t,h=\"set\"+t,d=r[u],m=d,y=m&&m.prototype,_={},b=function(t,e){var n=L(t);return n.view[l](e*s+n.byteOffset,!0)},S=function(t,e,i){var r=L(t);n&&(i=(i=F(i))<0?0:i>255?255:255&i),r.view[h](e*s+r.byteOffset,i,!0)},E=function(t,e){R(t,e,{get:function(){return b(this,e)},set:function(t){return S(this,e,t)},enumerable:!0})};V?o&&(m=e((function(t,e,n,i){return c(t,y),I(function(){return x(e)?$(e)?void 0!==i?new d(e,v(n,s),i):void 0!==n?new d(e,v(n,s)):new d(e):q(e)?K(m,e):a(T,m,e):new d(g(e))}(),t,m)})),C&&C(m,H),k(M(d),(function(t){t in m||f(m,t,d[t])})),m.prototype=y):(m=e((function(t,e,n,i){c(t,y);var r,o,u,l=0,h=0;if(x(e)){if(!$(e))return q(e)?K(m,e):a(T,m,e);r=e,h=v(n,s);var f=e.byteLength;if(void 0===i){if(f%s)throw B(Z);if(o=f-h,o<0)throw B(Z)}else if(o=p(i)*s,o+h>f)throw B(Z);u=o/s}else u=g(e),o=u*s,r=new z(o);D(t,{buffer:r,byteOffset:h,byteLength:o,length:u,view:new U(r)});while(l<u)E(t,l++)})),C&&C(m,H),y=m.prototype=w(X)),y.constructor!==m&&f(y,\"constructor\",m),f(y,W,m),G&&f(y,G,u),_[u]=m,i({global:!0,forced:m!=d,sham:!V},_),J in m||f(m,J,s),J in y||f(y,J,s),A(u)}):t.exports=function(){}},\"77a7\":function(t,e,n){var i=n(\"da84\"),r=i.Array,a=Math.abs,s=Math.pow,o=Math.floor,u=Math.log,l=Math.LN2,c=function(t,e,n){var i,c,h,f=r(n),d=8*n-e-1,p=(1<<d)-1,g=p>>1,v=23===e?s(2,-24)-s(2,-77):0,m=t<0||0===t&&1/t<0?1:0,y=0;t=a(t),t!=t||t===1/0?(c=t!=t?1:0,i=p):(i=o(u(t)/l),h=s(2,-i),t*h<1&&(i--,h*=2),t+=i+g>=1?v/h:v*s(2,1-g),t*h>=2&&(i++,h/=2),i+g>=p?(c=0,i=p):i+g>=1?(c=(t*h-1)*s(2,e),i+=g):(c=t*s(2,g-1)*s(2,e),i=0));while(e>=8)f[y++]=255&c,c/=256,e-=8;i=i<<e|c,d+=e;while(d>0)f[y++]=255&i,i/=256,d-=8;return f[--y]|=128*m,f},h=function(t,e){var n,i=t.length,r=8*i-e-1,a=(1<<r)-1,o=a>>1,u=r-7,l=i-1,c=t[l--],h=127&c;c>>=7;while(u>0)h=256*h+t[l--],u-=8;n=h&(1<<-u)-1,h>>=-u,u+=e;while(u>0)n=256*n+t[l--],u-=8;if(0===h)h=1-o;else{if(h===a)return n?NaN:c?-1/0:1/0;n+=s(2,e),h-=o}return(c?-1:1)*n*s(2,h-e)};t.exports={pack:c,unpack:h}},\"7a77\":function(t,e,n){\"use strict\";function i(t){this.message=t}i.prototype.toString=function(){return\"Cancel\"+(this.message?\": \"+this.message:\"\")},i.prototype.__CANCEL__=!0,t.exports=i},\"7a94\":function(t,e,n){(function(t){\n/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */\nvar i=i||{version:\"5.2.1\"};if(e.fabric=i,\"undefined\"!==typeof document&&\"undefined\"!==typeof window)document instanceof(\"undefined\"!==typeof HTMLDocument?HTMLDocument:Document)?i.document=document:i.document=document.implementation.createHTMLDocument(\"\"),i.window=window;else{var r=n(1),a=new r.JSDOM(decodeURIComponent(\"%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E\"),{features:{FetchExternalResources:[\"img\"]},resources:\"usable\"}).window;i.document=a.document,i.jsdomImplForWrapper=n(2).implForWrapper,i.nodeCanvas=n(3).Canvas,i.window=a,DOMParser=i.window.DOMParser}function s(t){var e=t.targetCanvas,n=e.width,i=e.height,r=t.destinationWidth,a=t.destinationHeight;n===r&&i===a||(e.width=r,e.height=a)}function o(t,e){var n=t.canvas,i=e.targetCanvas,r=i.getContext(\"2d\");r.translate(0,i.height),r.scale(1,-1);var a=n.height-i.height;r.drawImage(n,0,a,i.width,i.height,0,0,i.width,i.height)}function u(t,e){var n=e.targetCanvas,i=n.getContext(\"2d\"),r=e.destinationWidth,a=e.destinationHeight,s=r*a*4,o=new Uint8Array(this.imageBuffer,0,s),u=new Uint8ClampedArray(this.imageBuffer,0,s);t.readPixels(0,0,r,a,t.RGBA,t.UNSIGNED_BYTE,o);var l=new ImageData(u,r,a);i.putImageData(l,0,0)}i.isTouchSupported=\"ontouchstart\"in i.window||\"ontouchstart\"in i.document||i.window&&i.window.navigator&&i.window.navigator.maxTouchPoints>0,i.isLikelyNode=\"undefined\"!==typeof t&&\"undefined\"===typeof window,i.SHARED_ATTRIBUTES=[\"display\",\"transform\",\"fill\",\"fill-opacity\",\"fill-rule\",\"opacity\",\"stroke\",\"stroke-dasharray\",\"stroke-linecap\",\"stroke-dashoffset\",\"stroke-linejoin\",\"stroke-miterlimit\",\"stroke-opacity\",\"stroke-width\",\"id\",\"paint-order\",\"vector-effect\",\"instantiated_by_use\",\"clip-path\"],i.DPI=96,i.reNum=\"(?:[-+]?(?:\\\\d+|\\\\d*\\\\.\\\\d+)(?:[eE][-+]?\\\\d+)?)\",i.commaWsp=\"(?:\\\\s+,?\\\\s*|,\\\\s*)\",i.rePathCommand=/([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:[eE][-+]?\\d+)?)/gi,i.reNonWord=/[ \\n\\.,;!\\?\\-]/,i.fontPaths={},i.iMatrix=[1,0,0,1,0,0],i.svgNS=\"http://www.w3.org/2000/svg\",i.perfLimitSizeTotal=2097152,i.maxCacheSideLimit=4096,i.minCacheSideLimit=256,i.charWidthsCache={},i.textureSize=2048,i.disableStyleCopyPaste=!1,i.enableGLFiltering=!0,i.devicePixelRatio=i.window.devicePixelRatio||i.window.webkitDevicePixelRatio||i.window.mozDevicePixelRatio||1,i.browserShadowBlurConstant=1,i.arcToSegmentsCache={},i.boundsOfCurveCache={},i.cachesBoundsOfCurve=!0,i.forceGLPutImageData=!1,i.initFilterBackend=function(){return i.enableGLFiltering&&i.isWebglSupported&&i.isWebglSupported(i.textureSize)?(console.log(\"max texture size: \"+i.maxTextureSize),new i.WebglFilterBackend({tileSize:i.textureSize})):i.Canvas2dFilterBackend?new i.Canvas2dFilterBackend:void 0},\"undefined\"!==typeof document&&\"undefined\"!==typeof window&&(window.fabric=i),function(){function t(t,e){if(this.__eventListeners[t]){var n=this.__eventListeners[t];e?n[n.indexOf(e)]=!1:i.util.array.fill(n,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in t)this.on(n,t[n]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function n(t,e){var n=function(){e.apply(this,arguments),this.off(t,n)}.bind(this);this.on(t,n)}function r(t,e){if(1===arguments.length)for(var i in t)n.call(this,i,t[i]);else n.call(this,t,e);return this}function a(e,n){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&\"object\"===typeof arguments[0])for(var i in e)t.call(this,i,e[i]);else t.call(this,e,n);return this}function s(t,e){if(!this.__eventListeners)return this;var n=this.__eventListeners[t];if(!n)return this;for(var i=0,r=n.length;i<r;i++)n[i]&&n[i].call(this,e||{});return this.__eventListeners[t]=n.filter((function(t){return!1!==t})),this}i.Observable={fire:s,on:e,once:r,off:a}}(),i.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,n){var i=this._objects;return n?i[e]=t:i.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,n=!1,i=0,r=arguments.length;i<r;i++)t=e.indexOf(arguments[i]),-1!==t&&(n=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var n=this.getObjects(),i=0,r=n.length;i<r;i++)t.call(e,n[i],i,n);return this},getObjects:function(t){return\"undefined\"===typeof t?this._objects.concat():this._objects.filter((function(e){return e.type===t}))},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t,e){return this._objects.indexOf(t)>-1||!!e&&this._objects.some((function(e){return\"function\"===typeof e.contains&&e.contains(t,!0)}))},complexity:function(){return this._objects.reduce((function(t,e){return t+=e.complexity?e.complexity():0,t}),0)}},i.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof i.Gradient||this.set(e,new i.Gradient(t))},_initPattern:function(t,e,n){!t||!t.source||t instanceof i.Pattern?n&&n():this.set(e,new i.Pattern(t,n))},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return\"object\"===typeof t?this._setObject(t):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return\"boolean\"===typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,n=Math.atan2,r=Math.pow,a=Math.PI/180,s=Math.PI/2;i.util={cos:function(t){if(0===t)return 1;t<0&&(t=-t);var e=t/s;switch(e){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=t/s,n=1;switch(t<0&&(n=-1),e){case 1:return n;case 2:return 0;case 3:return-n}return Math.sin(t)},removeFromArray:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*a},radiansToDegrees:function(t){return t/a},rotatePoint:function(t,e,n){var r=new i.Point(t.x-e.x,t.y-e.y),a=i.util.rotateVector(r,n);return new i.Point(a.x,a.y).addEquals(e)},rotateVector:function(t,e){var n=i.util.sin(e),r=i.util.cos(e),a=t.x*r-t.y*n,s=t.x*n+t.y*r;return{x:a,y:s}},createVector:function(t,e){return new i.Point(e.x-t.x,e.y-t.y)},calcAngleBetweenVectors:function(t,e){return Math.acos((t.x*e.x+t.y*e.y)/(Math.hypot(t.x,t.y)*Math.hypot(e.x,e.y)))},getHatVector:function(t){return new i.Point(t.x,t.y).multiply(1/Math.hypot(t.x,t.y))},getBisector:function(t,e,n){var r=i.util.createVector(t,e),a=i.util.createVector(t,n),s=i.util.calcAngleBetweenVectors(r,a),o=i.util.calcAngleBetweenVectors(i.util.rotateVector(r,s),a),u=s*(0===o?1:-1)/2;return{vector:i.util.getHatVector(i.util.rotateVector(r,u)),angle:s}},projectStrokeOnPoints:function(t,e,n){var r=[],a=e.strokeWidth/2,s=e.strokeUniform?new i.Point(1/e.scaleX,1/e.scaleY):new i.Point(1,1),o=function(t){var e=a/Math.hypot(t.x,t.y);return new i.Point(t.x*e*s.x,t.y*e*s.y)};return t.length<=1||t.forEach((function(u,l){var c,h,f=new i.Point(u.x,u.y);0===l?(h=t[l+1],c=n?o(i.util.createVector(h,f)).addEquals(f):t[t.length-1]):l===t.length-1?(c=t[l-1],h=n?o(i.util.createVector(c,f)).addEquals(f):t[0]):(c=t[l-1],h=t[l+1]);var d,p,g=i.util.getBisector(f,c,h),v=g.vector,m=g.angle;if(\"miter\"===e.strokeLineJoin&&(d=-a/Math.sin(m/2),p=new i.Point(v.x*d*s.x,v.y*d*s.y),Math.hypot(p.x,p.y)/a<=e.strokeMiterLimit))return r.push(f.add(p)),void r.push(f.subtract(p));d=-a*Math.SQRT2,p=new i.Point(v.x*d*s.x,v.y*d*s.y),r.push(f.add(p)),r.push(f.subtract(p))})),r},transformPoint:function(t,e,n){return n?new i.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new i.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var n=0;n<t.length;n++)t[n]=i.util.transformPoint(t[n],e);var r=[t[0].x,t[1].x,t[2].x,t[3].x],a=i.util.array.min(r),s=i.util.array.max(r),o=s-a,u=[t[0].y,t[1].y,t[2].y,t[3].y],l=i.util.array.min(u),c=i.util.array.max(u),h=c-l;return{left:a,top:l,width:o,height:h}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),n=[e*t[3],-e*t[1],-e*t[2],e*t[0]],r=i.util.transformPoint({x:t[4],y:t[5]},n,!0);return n[4]=-r.x,n[5]=-r.y,n},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var n=/\\D{0,2}$/.exec(t),r=parseFloat(t);switch(e||(e=i.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case\"mm\":return r*i.DPI/25.4;case\"cm\":return r*i.DPI/2.54;case\"in\":return r*i.DPI;case\"pt\":return r*i.DPI/72;case\"pc\":return r*i.DPI/72*12;case\"em\":return r*e;default:return r}},falseFunction:function(){return!1},getKlass:function(t,e){return t=i.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),i.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=[\"instantiated_by_use\",\"style\",\"id\",\"class\"];switch(t){case\"linearGradient\":e=e.concat([\"x1\",\"y1\",\"x2\",\"y2\",\"gradientUnits\",\"gradientTransform\"]);break;case\"radialGradient\":e=e.concat([\"gradientUnits\",\"gradientTransform\",\"cx\",\"cy\",\"r\",\"fx\",\"fy\",\"fr\"]);break;case\"stop\":e=e.concat([\"offset\",\"stop-color\",\"stop-opacity\"]);break}return e},resolveNamespace:function(e){if(!e)return i;var n,r=e.split(\".\"),a=r.length,s=t||i.window;for(n=0;n<a;++n)s=s[r[n]];return s},loadImage:function(t,e,n,r){if(t){var a=i.util.createImage(),s=function(){e&&e.call(n,a,!1),a=a.onload=a.onerror=null};a.onload=s,a.onerror=function(){i.log(\"Error loading \"+a.src),e&&e.call(n,null,!0),a=a.onload=a.onerror=null},0!==t.indexOf(\"data\")&&void 0!==r&&null!==r&&(a.crossOrigin=r),\"data:image/svg\"===t.substring(0,14)&&(a.onload=null,i.util.loadImageInDom(a,s)),a.src=t}else e&&e.call(n,t)},loadImageInDom:function(t,e){var n=i.document.createElement(\"div\");n.style.width=n.style.height=\"1px\",n.style.left=n.style.top=\"-100%\",n.style.position=\"absolute\",n.appendChild(t),i.document.querySelector(\"body\").appendChild(n),t.onload=function(){e(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(t,e,n,r){t=t||[];var a=[],s=0,o=t.length;function u(){++s===o&&e&&e(a.filter((function(t){return t})))}o?t.forEach((function(t,e){if(t&&t.type){var s=i.util.getKlass(t.type,n);s.fromObject(t,(function(n,i){i||(a[e]=n),r&&r(t,n,i),u()}))}else u()})):e&&e(a)},enlivenObjectEnlivables:function(t,e,n){var r=i.Object.ENLIVEN_PROPS.filter((function(e){return!!t[e]}));i.util.enlivenObjects(r.map((function(e){return t[e]})),(function(t){var i={};r.forEach((function(n,r){i[n]=t[r],e&&(e[n]=t[r])})),n&&n(i)}))},enlivenPatterns:function(t,e){function n(){++a===s&&e&&e(r)}t=t||[];var r=[],a=0,s=t.length;s?t.forEach((function(t,e){t&&t.source?new i.Pattern(t,(function(t){r[e]=t,n()})):(r[e]=t,n())})):e&&e(r)},groupSVGElements:function(t,e,n){var r;return t&&1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),r=new i.Group(t,e),\"undefined\"!==typeof n&&(r.sourcePath=n),r)},populateWithProperties:function(t,e,n){if(n&&Array.isArray(n))for(var i=0,r=n.length;i<r;i++)n[i]in t&&(e[n[i]]=t[n[i]])},createCanvasElement:function(){return i.document.createElement(\"canvas\")},copyCanvasElement:function(t){var e=i.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext(\"2d\").drawImage(t,0,0),e},toDataURL:function(t,e,n){return t.toDataURL(\"image/\"+e,n)},createImage:function(){return i.document.createElement(\"img\")},multiplyTransformMatrices:function(t,e,n){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],n?0:t[0]*e[4]+t[2]*e[5]+t[4],n?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var i=n(t[1],t[0]),s=r(t[0],2)+r(t[1],2),o=e(s),u=(t[0]*t[3]-t[2]*t[1])/o,l=n(t[0]*t[2]+t[1]*t[3],s);return{angle:i/a,scaleX:o,scaleY:u,skewX:l/a,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return i.iMatrix.concat();var e=i.util.degreesToRadians(t.angle),n=i.util.cos(e),r=i.util.sin(e);return[n,r,-r,n,0,0]},calcDimensionsMatrix:function(t){var e=\"undefined\"===typeof t.scaleX?1:t.scaleX,n=\"undefined\"===typeof t.scaleY?1:t.scaleY,r=[t.flipX?-e:e,0,0,t.flipY?-n:n,0,0],a=i.util.multiplyTransformMatrices,s=i.util.degreesToRadians;return t.skewX&&(r=a(r,[1,0,Math.tan(s(t.skewX)),1],!0)),t.skewY&&(r=a(r,[1,Math.tan(s(t.skewY)),0,1],!0)),r},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],n=i.util.multiplyTransformMatrices;return t.angle&&(e=n(e,i.util.calcRotateMatrix(t))),(1!==t.scaleX||1!==t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY)&&(e=n(e,i.util.calcDimensionsMatrix(t))),e},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,e,n,i){i>0&&(e>i?e-=i:e=0,n>i?n-=i:n=0);var r,a,s=!0,o=t.getImageData(e,n,2*i||1,2*i||1),u=o.data.length;for(r=3;r<u;r+=4)if(a=o.data[r],s=a<=0,!1===s)break;return o=null,s},parsePreserveAspectRatioAttribute:function(t){var e,n=\"meet\",i=\"Mid\",r=\"Mid\",a=t.split(\" \");return a&&a.length&&(n=a.pop(),\"meet\"!==n&&\"slice\"!==n?(e=n,n=\"meet\"):a.length&&(e=a.pop())),i=\"none\"!==e?e.slice(1,4):\"none\",r=\"none\"!==e?e.slice(5,8):\"none\",{meetOrSlice:n,alignX:i,alignY:r}},clearFabricFontCache:function(t){t=(t||\"\").toLowerCase(),t?i.charWidthsCache[t]&&delete i.charWidthsCache[t]:i.charWidthsCache={}},limitDimsByArea:function(t,e){var n=Math.sqrt(e*t),i=Math.floor(e/n);return{x:Math.floor(n),y:i}},capValue:function(t,e,n){return Math.max(t,Math.min(e,n))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return\"matrix(\"+t.map((function(t){return i.util.toFixed(t,i.Object.NUM_FRACTION_DIGITS)})).join(\" \")+\")\"},removeTransformFromObject:function(t,e){var n=i.util.invertTransform(e),r=i.util.multiplyTransformMatrices(n,t.calcOwnMatrix());i.util.applyTransformToObject(t,r)},addTransformToObject:function(t,e){i.util.applyTransformToObject(t,i.util.multiplyTransformMatrices(e,t.calcOwnMatrix()))},applyTransformToObject:function(t,e){var n=i.util.qrDecompose(e),r=new i.Point(n.translateX,n.translateY);t.flipX=!1,t.flipY=!1,t.set(\"scaleX\",n.scaleX),t.set(\"scaleY\",n.scaleY),t.skewX=n.skewX,t.skewY=n.skewY,t.angle=n.angle,t.setPositionByOrigin(r,\"center\",\"center\")},sizeAfterTransform:function(t,e,n){var r=t/2,a=e/2,s=[{x:-r,y:-a},{x:r,y:-a},{x:-r,y:a},{x:r,y:a}],o=i.util.calcDimensionsMatrix(n),u=i.util.makeBoundingBoxFromPoints(s,o);return{x:u.width,y:u.height}},mergeClipPaths:function(t,e){var n=t,r=e;n.inverted&&!r.inverted&&(n=e,r=t),i.util.applyTransformToObject(r,i.util.multiplyTransformMatrices(i.util.invertTransform(n.calcTransformMatrix()),r.calcTransformMatrix()));var a=n.inverted&&r.inverted;return a&&(n.inverted=r.inverted=!1),new i.Group([n],{clipPath:r,inverted:a})}}}(e),function(){var t=Array.prototype.join,e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},n={m:\"l\",M:\"L\"};function r(t,e,n,r,a,s,o,u,l,c,h){var f=i.util.cos(t),d=i.util.sin(t),p=i.util.cos(e),g=i.util.sin(e),v=n*a*p-r*s*g+o,m=r*a*p+n*s*g+u,y=c+l*(-n*a*d-r*s*f),_=h+l*(-r*a*d+n*s*f),x=v+l*(n*a*g+r*s*p),b=m+l*(r*a*g-n*s*p);return[\"C\",y,_,x,b,v,m]}function a(t,e,n,a,o,u,l){var c=Math.PI,h=l*c/180,f=i.util.sin(h),d=i.util.cos(h),p=0,g=0;n=Math.abs(n),a=Math.abs(a);var v=-d*t*.5-f*e*.5,m=-d*e*.5+f*t*.5,y=n*n,_=a*a,x=m*m,b=v*v,w=y*_-y*x-_*b,S=0;if(w<0){var C=Math.sqrt(1-w/(y*_));n*=C,a*=C}else S=(o===u?-1:1)*Math.sqrt(w/(y*x+_*b));var M=S*n*m/a,T=-S*a*v/n,k=d*M-f*T+.5*t,A=f*M+d*T+.5*e,E=s(1,0,(v-M)/n,(m-T)/a),O=s((v-M)/n,(m-T)/a,(-v-M)/n,(-m-T)/a);0===u&&O>0?O-=2*c:1===u&&O<0&&(O+=2*c);for(var P=Math.ceil(Math.abs(O/c*2)),I=[],L=O/P,D=8/3*Math.sin(L/4)*Math.sin(L/4)/Math.sin(L/2),R=E+L,N=0;N<P;N++)I[N]=r(E,R,d,f,n,a,k,A,D,p,g),p=I[N][5],g=I[N][6],E=R,R+=L;return I}function s(t,e,n,i){var r=Math.atan2(e,t),a=Math.atan2(i,n);return a>=r?a-r:2*Math.PI-(r-a)}function o(e,n,r,a,s,o,u,l){var c;if(i.cachesBoundsOfCurve&&(c=t.call(arguments),i.boundsOfCurveCache[c]))return i.boundsOfCurveCache[c];var h,f,d,p,g,v,m,y,_=Math.sqrt,x=Math.min,b=Math.max,w=Math.abs,S=[],C=[[],[]];f=6*e-12*r+6*s,h=-3*e+9*r-9*s+3*u,d=3*r-3*e;for(var M=0;M<2;++M)if(M>0&&(f=6*n-12*a+6*o,h=-3*n+9*a-9*o+3*l,d=3*a-3*n),w(h)<1e-12){if(w(f)<1e-12)continue;p=-d/f,0<p&&p<1&&S.push(p)}else m=f*f-4*d*h,m<0||(y=_(m),g=(-f+y)/(2*h),0<g&&g<1&&S.push(g),v=(-f-y)/(2*h),0<v&&v<1&&S.push(v));var T,k,A,E=S.length,O=E;while(E--)p=S[E],A=1-p,T=A*A*A*e+3*A*A*p*r+3*A*p*p*s+p*p*p*u,C[0][E]=T,k=A*A*A*n+3*A*A*p*a+3*A*p*p*o+p*p*p*l,C[1][E]=k;C[0][O]=e,C[1][O]=n,C[0][O+1]=u,C[1][O+1]=l;var P=[{x:x.apply(null,C[0]),y:x.apply(null,C[1])},{x:b.apply(null,C[0]),y:b.apply(null,C[1])}];return i.cachesBoundsOfCurve&&(i.boundsOfCurveCache[c]=P),P}function u(t,e,n){for(var i=n[1],r=n[2],s=n[3],o=n[4],u=n[5],l=n[6],c=n[7],h=a(l-t,c-e,i,r,o,u,s),f=0,d=h.length;f<d;f++)h[f][1]+=t,h[f][2]+=e,h[f][3]+=t,h[f][4]+=e,h[f][5]+=t,h[f][6]+=e;return h}function l(t){var e,n,i,r,a,s,o=0,l=0,c=t.length,h=0,f=0,d=[];for(n=0;n<c;++n){switch(i=!1,e=t[n].slice(0),e[0]){case\"l\":e[0]=\"L\",e[1]+=o,e[2]+=l;case\"L\":o=e[1],l=e[2];break;case\"h\":e[1]+=o;case\"H\":e[0]=\"L\",e[2]=l,o=e[1];break;case\"v\":e[1]+=l;case\"V\":e[0]=\"L\",l=e[1],e[1]=o,e[2]=l;break;case\"m\":e[0]=\"M\",e[1]+=o,e[2]+=l;case\"M\":o=e[1],l=e[2],h=e[1],f=e[2];break;case\"c\":e[0]=\"C\",e[1]+=o,e[2]+=l,e[3]+=o,e[4]+=l,e[5]+=o,e[6]+=l;case\"C\":a=e[3],s=e[4],o=e[5],l=e[6];break;case\"s\":e[0]=\"S\",e[1]+=o,e[2]+=l,e[3]+=o,e[4]+=l;case\"S\":\"C\"===r?(a=2*o-a,s=2*l-s):(a=o,s=l),o=e[3],l=e[4],e[0]=\"C\",e[5]=e[3],e[6]=e[4],e[3]=e[1],e[4]=e[2],e[1]=a,e[2]=s,a=e[3],s=e[4];break;case\"q\":e[0]=\"Q\",e[1]+=o,e[2]+=l,e[3]+=o,e[4]+=l;case\"Q\":a=e[1],s=e[2],o=e[3],l=e[4];break;case\"t\":e[0]=\"T\",e[1]+=o,e[2]+=l;case\"T\":\"Q\"===r?(a=2*o-a,s=2*l-s):(a=o,s=l),e[0]=\"Q\",o=e[1],l=e[2],e[1]=a,e[2]=s,e[3]=o,e[4]=l;break;case\"a\":e[0]=\"A\",e[6]+=o,e[7]+=l;case\"A\":i=!0,d=d.concat(u(o,l,e)),o=e[6],l=e[7];break;case\"z\":case\"Z\":o=h,l=f;break;default:}i||d.push(e),r=e[0]}return d}function c(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))}function h(t){return t*t*t}function f(t){return 3*t*t*(1-t)}function d(t){return 3*t*(1-t)*(1-t)}function p(t){return(1-t)*(1-t)*(1-t)}function g(t,e,n,i,r,a,s,o){return function(u){var l=h(u),c=f(u),g=d(u),v=p(u);return{x:s*l+r*c+n*g+t*v,y:o*l+a*c+i*g+e*v}}}function v(t,e,n,i,r,a,s,o){return function(u){var l=1-u,c=3*l*l*(n-t)+6*l*u*(r-n)+3*u*u*(s-r),h=3*l*l*(i-e)+6*l*u*(a-i)+3*u*u*(o-a);return Math.atan2(h,c)}}function m(t){return t*t}function y(t){return 2*t*(1-t)}function _(t){return(1-t)*(1-t)}function x(t,e,n,i,r,a){return function(s){var o=m(s),u=y(s),l=_(s);return{x:r*o+n*u+t*l,y:a*o+i*u+e*l}}}function b(t,e,n,i,r,a){return function(s){var o=1-s,u=2*o*(n-t)+2*s*(r-n),l=2*o*(i-e)+2*s*(a-i);return Math.atan2(l,u)}}function w(t,e,n){var i,r,a={x:e,y:n},s=0;for(r=1;r<=100;r+=1)i=t(r/100),s+=c(a.x,a.y,i.x,i.y),a=i;return s}function S(t,e){var n,i,r,a=0,s=0,o=t.iterator,u={x:t.x,y:t.y},l=.01,h=t.angleFinder;while(s<e&&l>1e-4)n=o(a),r=a,i=c(u.x,u.y,n.x,n.y),i+s>e?(a-=l,l/=2):(u=n,a+=l,s+=i);return n.angle=h(r),n}function C(t){for(var e,n,i,r,a=0,s=t.length,o=0,u=0,l=0,h=0,f=[],d=0;d<s;d++){switch(e=t[d],i={x:o,y:u,command:e[0]},e[0]){case\"M\":i.length=0,l=o=e[1],h=u=e[2];break;case\"L\":i.length=c(o,u,e[1],e[2]),o=e[1],u=e[2];break;case\"C\":n=g(o,u,e[1],e[2],e[3],e[4],e[5],e[6]),r=v(o,u,e[1],e[2],e[3],e[4],e[5],e[6]),i.iterator=n,i.angleFinder=r,i.length=w(n,o,u),o=e[5],u=e[6];break;case\"Q\":n=x(o,u,e[1],e[2],e[3],e[4]),r=b(o,u,e[1],e[2],e[3],e[4]),i.iterator=n,i.angleFinder=r,i.length=w(n,o,u),o=e[3],u=e[4];break;case\"Z\":case\"z\":i.destX=l,i.destY=h,i.length=c(o,u,l,h),o=l,u=h;break}a+=i.length,f.push(i)}return f.push({length:a,x:o,y:u}),f}function M(t,e,n){n||(n=C(t));var r=0;while(e-n[r].length>0&&r<n.length-2)e-=n[r].length,r++;var a,s=n[r],o=e/s.length,u=s.command,l=t[r];switch(u){case\"M\":return{x:s.x,y:s.y,angle:0};case\"Z\":case\"z\":return a=new i.Point(s.x,s.y).lerp(new i.Point(s.destX,s.destY),o),a.angle=Math.atan2(s.destY-s.y,s.destX-s.x),a;case\"L\":return a=new i.Point(s.x,s.y).lerp(new i.Point(l[1],l[2]),o),a.angle=Math.atan2(l[2]-s.y,l[1]-s.x),a;case\"C\":return S(s,e);case\"Q\":return S(s,e)}}function T(t){var r,a,s,o,u,l=[],c=[],h=i.rePathCommand,f=\"[-+]?(?:\\\\d*\\\\.\\\\d+|\\\\d+\\\\.?)(?:[eE][-+]?\\\\d+)?\\\\s*\",d=\"(\"+f+\")\"+i.commaWsp,p=\"([01])\"+i.commaWsp+\"?\",g=d+\"?\"+d+\"?\"+d+p+p+d+\"?(\"+f+\")\",v=new RegExp(g,\"g\");if(!t||!t.match)return l;u=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var m,y=0,_=u.length;y<_;y++){r=u[y],o=r.slice(1).trim(),c.length=0;var x=r.charAt(0);if(m=[x],\"a\"===x.toLowerCase())for(var b;b=v.exec(o);)for(var w=1;w<b.length;w++)c.push(b[w]);else while(s=h.exec(o))c.push(s[0]);w=0;for(var S=c.length;w<S;w++)a=parseFloat(c[w]),isNaN(a)||m.push(a);var C=e[x.toLowerCase()],M=n[x]||x;if(m.length-1>C)for(var T=1,k=m.length;T<k;T+=C)l.push([x].concat(m.slice(T,T+C))),x=M;else l.push(m)}return l}function k(t,e){var n,r=[],a=new i.Point(t[0].x,t[0].y),s=new i.Point(t[1].x,t[1].y),o=t.length,u=1,l=0,c=o>2;for(e=e||0,c&&(u=t[2].x<s.x?-1:t[2].x===s.x?0:1,l=t[2].y<s.y?-1:t[2].y===s.y?0:1),r.push([\"M\",a.x-u*e,a.y-l*e]),n=1;n<o;n++){if(!a.eq(s)){var h=a.midPointFrom(s);r.push([\"Q\",a.x,a.y,h.x,h.y])}a=t[n],n+1<t.length&&(s=t[n+1])}return c&&(u=a.x>t[n-2].x?1:a.x===t[n-2].x?0:-1,l=a.y>t[n-2].y?1:a.y===t[n-2].y?0:-1),r.push([\"L\",a.x+u*e,a.y+l*e]),r}function A(t,e,n){return n&&(e=i.util.multiplyTransformMatrices(e,[1,0,0,1,-n.x,-n.y])),t.map((function(t){for(var n=t.slice(0),r={},a=1;a<t.length-1;a+=2)r.x=t[a],r.y=t[a+1],r=i.util.transformPoint(r,e),n[a]=r.x,n[a+1]=r.y;return n}))}i.util.joinPath=function(t){return t.map((function(t){return t.join(\" \")})).join(\" \")},i.util.parsePath=T,i.util.makePathSimpler=l,i.util.getSmoothPathFromPoints=k,i.util.getPathSegmentsInfo=C,i.util.getBoundsOfCurve=o,i.util.getPointOnPath=M,i.util.transformPath=A}(),function(){var t=Array.prototype.slice;function e(e,n){for(var i=t.call(arguments,2),r=[],a=0,s=e.length;a<s;a++)r[a]=i.length?e[a][n].apply(e[a],i):e[a][n].call(e[a]);return r}function n(t,e){return s(t,e,(function(t,e){return t>=e}))}function r(t,e){return s(t,e,(function(t,e){return t<e}))}function a(t,e){var n=t.length;while(n--)t[n]=e;return t}function s(t,e,n){if(t&&0!==t.length){var i=t.length-1,r=e?t[i][e]:t[i];if(e)while(i--)n(t[i][e],r)&&(r=t[i][e]);else while(i--)n(t[i],r)&&(r=t[i]);return r}}i.util.array={fill:a,invoke:e,min:r,max:n}}(),function(){function t(e,n,r){if(r)if(!i.isLikelyNode&&n instanceof Element)e=n;else if(n instanceof Array){e=[];for(var a=0,s=n.length;a<s;a++)e[a]=t({},n[a],r)}else if(n&&\"object\"===typeof n)for(var o in n)\"canvas\"===o||\"group\"===o?e[o]=null:n.hasOwnProperty(o)&&(e[o]=t({},n[o],r));else e=n;else for(var o in n)e[o]=n[o];return e}function e(e,n){return t({},e,n)}i.util.object={extend:t,clone:e},i.util.object.extend(i.util,i.Observable)}(),function(){function t(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():\"\"}))}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function n(t){return t.replace(/&/g,\"&amp;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&apos;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")}function r(t){var e,n=0,i=[];for(n=0,e;n<t.length;n++)!1!==(e=a(t,n))&&i.push(e);return i}function a(t,e){var n=t.charCodeAt(e);if(isNaN(n))return\"\";if(n<55296||n>57343)return t.charAt(e);if(55296<=n&&n<=56319){if(t.length<=e+1)throw\"High surrogate without following low surrogate\";var i=t.charCodeAt(e+1);if(56320>i||i>57343)throw\"High surrogate without following low surrogate\";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw\"Low surrogate without preceding high surrogate\";var r=t.charCodeAt(e-1);if(55296>r||r>56319)throw\"Low surrogate without preceding high surrogate\";return!1}i.util.string={camelize:t,capitalize:e,escapeXml:n,graphemeSplit:r}}(),function(){var t=Array.prototype.slice,e=function(){},n=function(){for(var t in{toString:1})if(\"toString\"===t)return!1;return!0}(),r=function(t,e,i){for(var r in e)r in t.prototype&&\"function\"===typeof t.prototype[r]&&(e[r]+\"\").indexOf(\"callSuper\")>-1?t.prototype[r]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var r=e[t].apply(this,arguments);if(this.constructor.superclass=n,\"initialize\"!==t)return r}}(r):t.prototype[r]=e[r],n&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function a(){}function s(e){var n=null,i=this;while(i.constructor.superclass){var r=i.constructor.superclass.prototype[e];if(i[e]!==r){n=r;break}i=i.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,t.call(arguments,1)):n.call(this):console.log(\"tried to callSuper \"+e+\", method not found in prototype chain\",this)}function o(){var n=null,i=t.call(arguments,0);function o(){this.initialize.apply(this,arguments)}\"function\"===typeof i[0]&&(n=i.shift()),o.superclass=n,o.subclasses=[],n&&(a.prototype=n.prototype,o.prototype=new a,n.subclasses.push(o));for(var u=0,l=i.length;u<l;u++)r(o,i[u],n);return o.prototype.initialize||(o.prototype.initialize=e),o.prototype.constructor=o,o.prototype.callSuper=s,o}i.util.createClass=o}(),function(){var t=!!i.document.createElement(\"div\").attachEvent,e=[\"touchstart\",\"touchmove\",\"touchend\"];function n(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}i.util.addListener=function(e,n,i,r){e&&e.addEventListener(n,i,!t&&r)},i.util.removeListener=function(e,n,i,r){e&&e.removeEventListener(n,i,!t&&r)},i.util.getPointer=function(t){var e=t.target,r=i.util.getScrollLeftTop(e),a=n(t);return{x:a.clientX+r.left,y:a.clientY+r.top}},i.util.isTouchEvent=function(t){return e.indexOf(t.type)>-1||\"touch\"===t.pointerType}}(),function(){function t(t,e){var n=t.style;if(!n)return t;if(\"string\"===typeof e)return t.style.cssText+=\";\"+e,e.indexOf(\"opacity\")>-1?s(t,e.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1]):t;for(var i in e)if(\"opacity\"===i)s(t,e[i]);else{var r=\"float\"===i||\"cssFloat\"===i?\"undefined\"===typeof n.styleFloat?\"cssFloat\":\"styleFloat\":i;n[r]=e[i]}return t}var e=i.document.createElement(\"div\"),n=\"string\"===typeof e.style.opacity,r=\"string\"===typeof e.style.filter,a=/alpha\\s*\\(\\s*opacity\\s*=\\s*([^\\)]+)\\)/,s=function(t){return t};n?s=function(t,e){return t.style.opacity=e,t}:r&&(s=function(t,e){var n=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(n.zoom=1),a.test(n.filter)?(e=e>=.9999?\"\":\"alpha(opacity=\"+100*e+\")\",n.filter=n.filter.replace(a,e)):n.filter+=\" alpha(opacity=\"+100*e+\")\",t}),i.util.setStyle=t}(),function(){var t=Array.prototype.slice;function e(t){return\"string\"===typeof t?i.document.getElementById(t):t}var n,r,a=function(e){return t.call(e,0)};try{n=a(i.document.childNodes)instanceof Array}catch(p){}function s(t,e){var n=i.document.createElement(t);for(var r in e)\"class\"===r?n.className=e[r]:\"for\"===r?n.htmlFor=e[r]:n.setAttribute(r,e[r]);return n}function o(t,e){t&&-1===(\" \"+t.className+\" \").indexOf(\" \"+e+\" \")&&(t.className+=(t.className?\" \":\"\")+e)}function u(t,e,n){return\"string\"===typeof e&&(e=s(e,n)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e}function l(t){var e=0,n=0,r=i.document.documentElement,a=i.document.body||{scrollLeft:0,scrollTop:0};while(t&&(t.parentNode||t.host))if(t=t.parentNode||t.host,t===i.document?(e=a.scrollLeft||r.scrollLeft||0,n=a.scrollTop||r.scrollTop||0):(e+=t.scrollLeft||0,n+=t.scrollTop||0),1===t.nodeType&&\"fixed\"===t.style.position)break;return{left:e,top:n}}function c(t){var e,n,i=t&&t.ownerDocument,a={left:0,top:0},s={left:0,top:0},o={borderLeftWidth:\"left\",borderTopWidth:\"top\",paddingLeft:\"left\",paddingTop:\"top\"};if(!i)return s;for(var u in o)s[o[u]]+=parseInt(r(t,u),10)||0;return e=i.documentElement,\"undefined\"!==typeof t.getBoundingClientRect&&(a=t.getBoundingClientRect()),n=l(t),{left:a.left+n.left-(e.clientLeft||0)+s.left,top:a.top+n.top-(e.clientTop||0)+s.top}}function h(t){var e=i.jsdomImplForWrapper(t);return e._canvas||e._image}function f(t){if(i.isLikelyNode){var e=i.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}function d(t,e){t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=e}n||(a=function(t){var e=new Array(t.length),n=t.length;while(n--)e[n]=t[n];return e}),r=i.document.defaultView&&i.document.defaultView.getComputedStyle?function(t,e){var n=i.document.defaultView.getComputedStyle(t,null);return n?n[e]:void 0}:function(t,e){var n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n},function(){var t=i.document.documentElement.style,e=\"userSelect\"in t?\"userSelect\":\"MozUserSelect\"in t?\"MozUserSelect\":\"WebkitUserSelect\"in t?\"WebkitUserSelect\":\"KhtmlUserSelect\"in t?\"KhtmlUserSelect\":\"\";function n(t){return\"undefined\"!==typeof t.onselectstart&&(t.onselectstart=i.util.falseFunction),e?t.style[e]=\"none\":\"string\"===typeof t.unselectable&&(t.unselectable=\"on\"),t}function r(t){return\"undefined\"!==typeof t.onselectstart&&(t.onselectstart=null),e?t.style[e]=\"\":\"string\"===typeof t.unselectable&&(t.unselectable=\"\"),t}i.util.makeElementUnselectable=n,i.util.makeElementSelectable=r}(),i.util.setImageSmoothing=d,i.util.getById=e,i.util.toArray=a,i.util.addClass=o,i.util.makeElement=s,i.util.wrapElement=u,i.util.getScrollLeftTop=l,i.util.getElementOffset=c,i.util.getNodeCanvas=h,i.util.cleanUpJsdomNode=f}(),function(){function t(t,e){return t+(/\\?/.test(t)?\"&\":\"?\")+e}function e(){}function n(n,r){r||(r={});var a=r.method?r.method.toUpperCase():\"GET\",s=r.onComplete||function(){},o=new i.window.XMLHttpRequest,u=r.body||r.parameters;return o.onreadystatechange=function(){4===o.readyState&&(s(o),o.onreadystatechange=e)},\"GET\"===a&&(u=null,\"string\"===typeof r.parameters&&(n=t(n,r.parameters))),o.open(a,n,!0),\"POST\"!==a&&\"PUT\"!==a||o.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\"),o.send(u),o}i.util.request=n}(),i.log=console.log,i.warn=console.warn,function(){var t=i.util.object.extend,e=i.util.object.clone,n=[];function r(){return!1}function a(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e}function s(n){n||(n={});var s,o=!1,u=function(){var t=i.runningAnimations.indexOf(s);return t>-1&&i.runningAnimations.splice(t,1)[0]};return s=t(e(n),{cancel:function(){return o=!0,u()},currentValue:\"startValue\"in n?n.startValue:0,completionRate:0,durationRate:0}),i.runningAnimations.push(s),l((function(t){var e,i=t||+new Date,c=n.duration||500,h=i+c,f=n.onChange||r,d=n.abort||r,p=n.onComplete||r,g=n.easing||a,v=\"startValue\"in n&&n.startValue.length>0,m=\"startValue\"in n?n.startValue:0,y=\"endValue\"in n?n.endValue:100,_=n.byValue||(v?m.map((function(t,e){return y[e]-m[e]})):y-m);n.onStart&&n.onStart(),function t(n){e=n||+new Date;var r=e>h?c:e-i,a=r/c,x=v?m.map((function(t,e){return g(r,m[e],_[e],c)})):g(r,m,_,c),b=v?Math.abs((x[0]-m[0])/_[0]):Math.abs((x-m)/_);if(s.currentValue=v?x.slice():x,s.completionRate=b,s.durationRate=a,!o){if(!d(x,b,a))return e>h?(s.currentValue=v?y.slice():y,s.completionRate=1,s.durationRate=1,f(v?y.slice():y,1,1),p(y,1,1),void u()):(f(x,b,a),void l(t));u()}}(i)})),s.cancel}i.util.object.extend(n,{cancelAll:function(){var t=this.splice(0);return t.forEach((function(t){t.cancel()})),t},cancelByCanvas:function(t){if(!t)return[];var e=this.filter((function(e){return\"object\"===typeof e.target&&e.target.canvas===t}));return e.forEach((function(t){t.cancel()})),e},cancelByTarget:function(t){var e=this.findAnimationsByTarget(t);return e.forEach((function(t){t.cancel()})),e},findAnimationIndex:function(t){return this.indexOf(this.findAnimation(t))},findAnimation:function(t){return this.find((function(e){return e.cancel===t}))},findAnimationsByTarget:function(t){return t?this.filter((function(e){return e.target===t})):[]}});var o=i.window.requestAnimationFrame||i.window.webkitRequestAnimationFrame||i.window.mozRequestAnimationFrame||i.window.oRequestAnimationFrame||i.window.msRequestAnimationFrame||function(t){return i.window.setTimeout(t,1e3/60)},u=i.window.cancelAnimationFrame||i.window.clearTimeout;function l(){return o.apply(i.window,arguments)}function c(){return u.apply(i.window,arguments)}i.util.animate=s,i.util.requestAnimFrame=l,i.util.cancelAnimFrame=c,i.runningAnimations=n}(),function(){function t(t,e,n){var i=\"rgba(\"+parseInt(t[0]+n*(e[0]-t[0]),10)+\",\"+parseInt(t[1]+n*(e[1]-t[1]),10)+\",\"+parseInt(t[2]+n*(e[2]-t[2]),10);return i+=\",\"+(t&&e?parseFloat(t[3]+n*(e[3]-t[3])):1),i+=\")\",i}function e(e,n,r,a){var s=new i.Color(e).getSource(),o=new i.Color(n).getSource(),u=a.onComplete,l=a.onChange;return a=a||{},i.util.animate(i.util.object.extend(a,{duration:r||500,startValue:s,endValue:o,byValue:o,easing:function(e,n,i,r){var s=a.colorEasing?a.colorEasing(e,r):1-Math.cos(e/r*(Math.PI/2));return t(n,i,s)},onComplete:function(e,n,i){if(u)return u(t(o,o,0),n,i)},onChange:function(e,n,i){if(l){if(Array.isArray(e))return l(t(e,e,0),n,i);l(e,n,i)}}}))}i.util.animateColor=e}(),function(){function t(t,e,n,i){return t<Math.abs(e)?(t=e,i=n/4):i=0===e&&0===t?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:n,s:i}}function e(t,e,n){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*n-t.s)*(2*Math.PI)/t.p)}function n(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e}function r(t,e,n,i){return t/=i/2,t<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e}function a(t,e,n,i){return n*(t/=i)*t*t*t+e}function s(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e}function o(t,e,n,i){return t/=i/2,t<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e}function u(t,e,n,i){return n*(t/=i)*t*t*t*t+e}function l(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e}function c(t,e,n,i){return t/=i/2,t<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}function h(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e}function f(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e}function d(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e}function p(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e}function g(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e}function v(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2,t<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e)}function m(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e}function y(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e}function _(t,e,n,i){return t/=i/2,t<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function x(n,i,r,a){var s=1.70158,o=0,u=r;if(0===n)return i;if(n/=a,1===n)return i+r;o||(o=.3*a);var l=t(u,r,o,s);return-e(l,n,a)+i}function b(e,n,i,r){var a=1.70158,s=0,o=i;if(0===e)return n;if(e/=r,1===e)return n+i;s||(s=.3*r);var u=t(o,i,s,a);return u.a*Math.pow(2,-10*e)*Math.sin((e*r-u.s)*(2*Math.PI)/u.p)+u.c+n}function w(n,i,r,a){var s=1.70158,o=0,u=r;if(0===n)return i;if(n/=a/2,2===n)return i+r;o||(o=a*(.3*1.5));var l=t(u,r,o,s);return n<1?-.5*e(l,n,a)+i:l.a*Math.pow(2,-10*(n-=1))*Math.sin((n*a-l.s)*(2*Math.PI)/l.p)*.5+l.c+i}function S(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e}function C(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e}function M(t,e,n,i,r){return void 0===r&&(r=1.70158),t/=i/2,t<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e}function T(t,e,n,i){return n-k(i-t,0,n,i)+e}function k(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function A(t,e,n,i){return t<i/2?.5*T(2*t,0,n,i)+e:.5*k(2*t-i,0,n,i)+.5*n+e}i.util.ease={easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return t/=i/2,t<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:n,easeInOutCubic:r,easeInQuart:a,easeOutQuart:s,easeInOutQuart:o,easeInQuint:u,easeOutQuint:l,easeInOutQuint:c,easeInSine:h,easeOutSine:f,easeInOutSine:d,easeInExpo:p,easeOutExpo:g,easeInOutExpo:v,easeInCirc:m,easeOutCirc:y,easeInOutCirc:_,easeInElastic:x,easeOutElastic:b,easeInOutElastic:w,easeInBack:S,easeOutBack:C,easeInOutBack:M,easeInBounce:T,easeOutBounce:k,easeInOutBounce:A}}(),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,a=e.util.parseUnit,s=e.util.multiplyTransformMatrices,o=[\"path\",\"circle\",\"polygon\",\"polyline\",\"ellipse\",\"rect\",\"line\",\"image\",\"text\"],u=[\"symbol\",\"image\",\"marker\",\"pattern\",\"view\",\"svg\"],l=[\"pattern\",\"defs\",\"symbol\",\"metadata\",\"clipPath\",\"mask\",\"desc\"],c=[\"symbol\",\"g\",\"a\",\"svg\",\"clipPath\",\"defs\"],h={cx:\"left\",x:\"left\",r:\"radius\",cy:\"top\",y:\"top\",display:\"visible\",visibility:\"visible\",transform:\"transformMatrix\",\"fill-opacity\":\"fillOpacity\",\"fill-rule\":\"fillRule\",\"font-family\":\"fontFamily\",\"font-size\":\"fontSize\",\"font-style\":\"fontStyle\",\"font-weight\":\"fontWeight\",\"letter-spacing\":\"charSpacing\",\"paint-order\":\"paintFirst\",\"stroke-dasharray\":\"strokeDashArray\",\"stroke-dashoffset\":\"strokeDashOffset\",\"stroke-linecap\":\"strokeLineCap\",\"stroke-linejoin\":\"strokeLineJoin\",\"stroke-miterlimit\":\"strokeMiterLimit\",\"stroke-opacity\":\"strokeOpacity\",\"stroke-width\":\"strokeWidth\",\"text-decoration\":\"textDecoration\",\"text-anchor\":\"textAnchor\",opacity:\"opacity\",\"clip-path\":\"clipPath\",\"clip-rule\":\"clipRule\",\"vector-effect\":\"strokeUniform\",\"image-rendering\":\"imageSmoothing\"},f={stroke:\"strokeOpacity\",fill:\"fillOpacity\"},d=\"font-size\",p=\"clip-path\";function g(t){return t in h?h[t]:t}function v(t,n,i,r){var o,u=Array.isArray(n);if(\"fill\"!==t&&\"stroke\"!==t||\"none\"!==n){if(\"strokeUniform\"===t)return\"non-scaling-stroke\"===n;if(\"strokeDashArray\"===t)n=\"none\"===n?null:n.replace(/,/g,\" \").split(/\\s+/).map(parseFloat);else if(\"transformMatrix\"===t)n=i&&i.transformMatrix?s(i.transformMatrix,e.parseTransformAttribute(n)):e.parseTransformAttribute(n);else if(\"visible\"===t)n=\"none\"!==n&&\"hidden\"!==n,i&&!1===i.visible&&(n=!1);else if(\"opacity\"===t)n=parseFloat(n),i&&\"undefined\"!==typeof i.opacity&&(n*=i.opacity);else if(\"textAnchor\"===t)n=\"start\"===n?\"left\":\"end\"===n?\"right\":\"center\";else if(\"charSpacing\"===t)o=a(n,r)/r*1e3;else if(\"paintFirst\"===t){var l=n.indexOf(\"fill\"),c=n.indexOf(\"stroke\");n=\"fill\";(l>-1&&c>-1&&c<l||-1===l&&c>-1)&&(n=\"stroke\")}else{if(\"href\"===t||\"xlink:href\"===t||\"font\"===t)return n;if(\"imageSmoothing\"===t)return\"optimizeQuality\"===n;o=u?n.map(a):a(n,r)}}else n=\"\";return!u&&isNaN(o)?n:o}function m(t){return new RegExp(\"^(\"+t.join(\"|\")+\")\\\\b\",\"i\")}function y(t){for(var n in f)if(\"undefined\"!==typeof t[f[n]]&&\"\"!==t[n]){if(\"undefined\"===typeof t[n]){if(!e.Object.prototype[n])continue;t[n]=e.Object.prototype[n]}if(0!==t[n].indexOf(\"url(\")){var i=new e.Color(t[n]);t[n]=i.setAlpha(r(i.getAlpha()*t[f[n]],2)).toRgba()}}return t}function _(t,e){var n,i,r,a,s=[];for(r=0,a=e.length;r<a;r++)n=e[r],i=t.getElementsByTagName(n),s=s.concat(Array.prototype.slice.call(i));return s}function x(t,e){var n,i;t.replace(/;\\s*$/,\"\").split(\";\").forEach((function(t){var r=t.split(\":\");n=r[0].trim().toLowerCase(),i=r[1].trim(),e[n]=i}))}function b(t,e){var n,i;for(var r in t)\"undefined\"!==typeof t[r]&&(n=r.toLowerCase(),i=t[r],e[n]=i)}function w(t,n){var i={};for(var r in e.cssRules[n])if(S(t,r.split(\" \")))for(var a in e.cssRules[n][r])i[a]=e.cssRules[n][r][a];return i}function S(t,e){var n,i=!0;return n=M(t,e.pop()),n&&e.length&&(i=C(t,e)),n&&i&&0===e.length}function C(t,e){var n,i=!0;while(t.parentNode&&1===t.parentNode.nodeType&&e.length)i&&(n=e.pop()),t=t.parentNode,i=M(t,n);return 0===e.length}function M(t,e){var n,i,r=t.nodeName,a=t.getAttribute(\"class\"),s=t.getAttribute(\"id\");if(n=new RegExp(\"^\"+r,\"i\"),e=e.replace(n,\"\"),s&&e.length&&(n=new RegExp(\"#\"+s+\"(?![a-zA-Z\\\\-]+)\",\"i\"),e=e.replace(n,\"\")),a&&e.length)for(a=a.split(\" \"),i=a.length;i--;)n=new RegExp(\"\\\\.\"+a[i]+\"(?![a-zA-Z\\\\-]+)\",\"i\"),e=e.replace(n,\"\");return 0===e.length}function T(t,e){var n;if(t.getElementById&&(n=t.getElementById(e)),n)return n;var i,r,a,s=t.getElementsByTagName(\"*\");for(r=0,a=s.length;r<a;r++)if(i=s[r],e===i.getAttribute(\"id\"))return i}function k(t){var n=_(t,[\"use\",\"svg:use\"]),i=0;while(n.length&&i<n.length){var r=n[i],a=r.getAttribute(\"xlink:href\")||r.getAttribute(\"href\");if(null===a)return;var s,o,u,l,c,h=a.slice(1),f=r.getAttribute(\"x\")||0,d=r.getAttribute(\"y\")||0,p=T(t,h).cloneNode(!0),g=(p.getAttribute(\"transform\")||\"\")+\" translate(\"+f+\", \"+d+\")\",v=n.length,m=e.svgNS;if(E(p),/^svg$/i.test(p.nodeName)){var y=p.ownerDocument.createElementNS(m,\"g\");for(u=0,l=p.attributes,c=l.length;u<c;u++)o=l.item(u),y.setAttributeNS(m,o.nodeName,o.nodeValue);while(p.firstChild)y.appendChild(p.firstChild);p=y}for(u=0,l=r.attributes,c=l.length;u<c;u++)o=l.item(u),\"x\"!==o.nodeName&&\"y\"!==o.nodeName&&\"xlink:href\"!==o.nodeName&&\"href\"!==o.nodeName&&(\"transform\"===o.nodeName?g=o.nodeValue+\" \"+g:p.setAttribute(o.nodeName,o.nodeValue));p.setAttribute(\"transform\",g),p.setAttribute(\"instantiated_by_use\",\"1\"),p.removeAttribute(\"id\"),s=r.parentNode,s.replaceChild(p,r),n.length===v&&i++}}e.svgValidTagNamesRegEx=m(o),e.svgViewBoxElementsRegEx=m(u),e.svgInvalidAncestorsRegEx=m(l),e.svgValidParentsRegEx=m(c),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function t(t,n){var i=e.util.cos(n[0]),r=e.util.sin(n[0]),a=0,s=0;3===n.length&&(a=n[1],s=n[2]),t[0]=i,t[1]=r,t[2]=-r,t[3]=i,t[4]=a-(i*a-r*s),t[5]=s-(r*a+i*s)}function n(t,e){var n=e[0],i=2===e.length?e[1]:e[0];t[0]=n,t[3]=i}function i(t,n,i){t[i]=Math.tan(e.util.degreesToRadians(n[0]))}function r(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var a=e.iMatrix,s=e.reNum,o=e.commaWsp,u=\"(?:(skewX)\\\\s*\\\\(\\\\s*(\"+s+\")\\\\s*\\\\))\",l=\"(?:(skewY)\\\\s*\\\\(\\\\s*(\"+s+\")\\\\s*\\\\))\",c=\"(?:(rotate)\\\\s*\\\\(\\\\s*(\"+s+\")(?:\"+o+\"(\"+s+\")\"+o+\"(\"+s+\"))?\\\\s*\\\\))\",h=\"(?:(scale)\\\\s*\\\\(\\\\s*(\"+s+\")(?:\"+o+\"(\"+s+\"))?\\\\s*\\\\))\",f=\"(?:(translate)\\\\s*\\\\(\\\\s*(\"+s+\")(?:\"+o+\"(\"+s+\"))?\\\\s*\\\\))\",d=\"(?:(matrix)\\\\s*\\\\(\\\\s*(\"+s+\")\"+o+\"(\"+s+\")\"+o+\"(\"+s+\")\"+o+\"(\"+s+\")\"+o+\"(\"+s+\")\"+o+\"(\"+s+\")\\\\s*\\\\))\",p=\"(?:\"+d+\"|\"+f+\"|\"+h+\"|\"+c+\"|\"+u+\"|\"+l+\")\",g=\"(?:\"+p+\"(?:\"+o+\"*\"+p+\")*)\",v=\"^\\\\s*(?:\"+g+\"?)\\\\s*$\",m=new RegExp(v),y=new RegExp(p,\"g\");return function(s){var o=a.concat(),u=[];if(!s||s&&!m.test(s))return o;s.replace(y,(function(s){var l=new RegExp(p).exec(s).filter((function(t){return!!t})),c=l[1],h=l.slice(2).map(parseFloat);switch(c){case\"translate\":r(o,h);break;case\"rotate\":h[0]=e.util.degreesToRadians(h[0]),t(o,h);break;case\"scale\":n(o,h);break;case\"skewX\":i(o,h,2);break;case\"skewY\":i(o,h,1);break;case\"matrix\":o=h;break}u.push(o.concat()),o=a.concat()}));var l=u[0];while(u.length>1)u.shift(),l=e.util.multiplyTransformMatrices(l,u[0]);return l}}();var A=new RegExp(\"^\\\\s*(\"+e.reNum+\"+)\\\\s*,?\\\\s*(\"+e.reNum+\"+)\\\\s*,?\\\\s*(\"+e.reNum+\"+)\\\\s*,?\\\\s*(\"+e.reNum+\"+)\\\\s*$\");function E(t){if(!e.svgViewBoxElementsRegEx.test(t.nodeName))return{};var n,i,r,s,o=t.getAttribute(\"viewBox\"),u=1,l=1,c=0,h=0,f=t.getAttribute(\"width\"),d=t.getAttribute(\"height\"),p=t.getAttribute(\"x\")||0,g=t.getAttribute(\"y\")||0,v=t.getAttribute(\"preserveAspectRatio\")||\"\",m=!o||!(o=o.match(A)),y=!f||!d||\"100%\"===f||\"100%\"===d,_=m&&y,x={},b=\"\",w=0,S=0;if(x.width=0,x.height=0,x.toBeParsed=_,m&&(p||g)&&t.parentNode&&\"#document\"!==t.parentNode.nodeName&&(b=\" translate(\"+a(p)+\" \"+a(g)+\") \",r=(t.getAttribute(\"transform\")||\"\")+b,t.setAttribute(\"transform\",r),t.removeAttribute(\"x\"),t.removeAttribute(\"y\")),_)return x;if(m)return x.width=a(f),x.height=a(d),x;if(c=-parseFloat(o[1]),h=-parseFloat(o[2]),n=parseFloat(o[3]),i=parseFloat(o[4]),x.minX=c,x.minY=h,x.viewBoxWidth=n,x.viewBoxHeight=i,y?(x.width=n,x.height=i):(x.width=a(f),x.height=a(d),u=x.width/n,l=x.height/i),v=e.util.parsePreserveAspectRatioAttribute(v),\"none\"!==v.alignX&&(\"meet\"===v.meetOrSlice&&(l=u=u>l?l:u),\"slice\"===v.meetOrSlice&&(l=u=u>l?u:l),w=x.width-n*u,S=x.height-i*u,\"Mid\"===v.alignX&&(w/=2),\"Mid\"===v.alignY&&(S/=2),\"Min\"===v.alignX&&(w=0),\"Min\"===v.alignY&&(S=0)),1===u&&1===l&&0===c&&0===h&&0===p&&0===g)return x;if((p||g)&&\"#document\"!==t.parentNode.nodeName&&(b=\" translate(\"+a(p)+\" \"+a(g)+\") \"),r=b+\" matrix(\"+u+\" 0 0 \"+l+\" \"+(c*u+w)+\" \"+(h*l+S)+\") \",\"svg\"===t.nodeName){s=t.ownerDocument.createElementNS(e.svgNS,\"g\");while(t.firstChild)s.appendChild(t.firstChild);t.appendChild(s)}else s=t,s.removeAttribute(\"x\"),s.removeAttribute(\"y\"),r=s.getAttribute(\"transform\")+r;return s.setAttribute(\"transform\",r),x}function O(t,e){while(t&&(t=t.parentNode))if(t.nodeName&&e.test(t.nodeName.replace(\"svg:\",\"\"))&&!t.getAttribute(\"instantiated_by_use\"))return!0;return!1}function P(t,e){var n=[\"gradientTransform\",\"x1\",\"x2\",\"y1\",\"y2\",\"gradientUnits\",\"cx\",\"cy\",\"r\",\"fx\",\"fy\"],i=\"xlink:href\",r=e.getAttribute(i).slice(1),a=T(t,r);if(a&&a.getAttribute(i)&&P(t,a),n.forEach((function(t){a&&!e.hasAttribute(t)&&a.hasAttribute(t)&&e.setAttribute(t,a.getAttribute(t))})),!e.children.length){var s=a.cloneNode(!0);while(s.firstChild)e.appendChild(s.firstChild)}e.removeAttribute(i)}e.parseSVGDocument=function(t,n,r,a){if(t){k(t);var s,o,u=e.Object.__uid++,l=E(t),c=e.util.toArray(t.getElementsByTagName(\"*\"));if(l.crossOrigin=a&&a.crossOrigin,l.svgUid=u,0===c.length&&e.isLikelyNode){c=t.selectNodes('//*[name(.)!=\"svg\"]');var h=[];for(s=0,o=c.length;s<o;s++)h[s]=c[s];c=h}var f=c.filter((function(t){return E(t),e.svgValidTagNamesRegEx.test(t.nodeName.replace(\"svg:\",\"\"))&&!O(t,e.svgInvalidAncestorsRegEx)}));if(!f||f&&!f.length)n&&n([],{});else{var d={};c.filter((function(t){return\"clipPath\"===t.nodeName.replace(\"svg:\",\"\")})).forEach((function(t){var n=t.getAttribute(\"id\");d[n]=e.util.toArray(t.getElementsByTagName(\"*\")).filter((function(t){return e.svgValidTagNamesRegEx.test(t.nodeName.replace(\"svg:\",\"\"))}))})),e.gradientDefs[u]=e.getGradientDefs(t),e.cssRules[u]=e.getCSSRules(t),e.clipPaths[u]=d,e.parseElements(f,(function(t,i){n&&(n(t,l,i,c),delete e.gradientDefs[u],delete e.cssRules[u],delete e.clipPaths[u])}),i(l),r,a)}}};var I=new RegExp(\"(normal|italic)?\\\\s*(normal|small-caps)?\\\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\\\s*(\"+e.reNum+\"(?:px|cm|mm|em|pt|pc|in)*)(?:\\\\/(normal|\"+e.reNum+\"))?\\\\s+(.*)\");n(e,{parseFontDeclaration:function(t,e){var n=t.match(I);if(n){var i=n[1],r=n[3],s=n[4],o=n[5],u=n[6];i&&(e.fontStyle=i),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),s&&(e.fontSize=a(s)),u&&(e.fontFamily=u),o&&(e.lineHeight=\"normal\"===o?1:o)}},getGradientDefs:function(t){var e,n=[\"linearGradient\",\"radialGradient\",\"svg:linearGradient\",\"svg:radialGradient\"],i=_(t,n),r=0,a={};r=i.length;while(r--)e=i[r],e.getAttribute(\"xlink:href\")&&P(t,e),a[e.getAttribute(\"id\")]=e;return a},parseAttributes:function(t,i,r){if(t){var s,o,u,l={};\"undefined\"===typeof r&&(r=t.getAttribute(\"svgUid\")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(l=e.parseAttributes(t.parentNode,i,r));var c=i.reduce((function(e,n){return s=t.getAttribute(n),s&&(e[n]=s),e}),{}),h=n(w(t,r),e.parseStyleAttribute(t));c=n(c,h),h[p]&&t.setAttribute(p,h[p]),o=u=l.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,c[d]&&(c[d]=o=a(c[d],u));var f,m,_={};for(var x in c)f=g(x),m=v(f,c[x],l,o),_[f]=m;_&&_.font&&e.parseFontDeclaration(_.font,_);var b=n(l,_);return e.svgValidParentsRegEx.test(t.nodeName)?b:y(b)}},parseElements:function(t,n,i,r,a){new e.ElementsParser(t,n,i,r,a).parse()},parseStyleAttribute:function(t){var e={},n=t.getAttribute(\"style\");return n?(\"string\"===typeof n?x(n,e):b(n,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g,\" \").trim(),t=t.split(/\\s+/);var e,n,i=[];for(e=0,n=t.length;e<n;e+=2)i.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return i},getCSSRules:function(t){var n,i,r,a=t.getElementsByTagName(\"style\"),s={};for(n=0,i=a.length;n<i;n++){var o=a[n].textContent;o=o.replace(/\\/\\*[\\s\\S]*?\\*\\//g,\"\"),\"\"!==o.trim()&&(r=o.split(\"}\"),r=r.filter((function(t){return t.trim()})),r.forEach((function(t){var r=t.split(\"{\"),a={},o=r[1].trim(),u=o.split(\";\").filter((function(t){return t.trim()}));for(n=0,i=u.length;n<i;n++){var l=u[n].split(\":\"),c=l[0].trim(),h=l[1].trim();a[c]=h}t=r[0].trim(),t.split(\",\").forEach((function(t){t=t.replace(/^svg/i,\"\").trim(),\"\"!==t&&(s[t]?e.util.object.extend(s[t],a):s[t]=e.util.object.clone(a))}))})))}return s},loadSVGFromURL:function(t,n,i,r){function a(t){var a=t.responseXML;if(!a||!a.documentElement)return n&&n(null),!1;e.parseSVGDocument(a.documentElement,(function(t,e,i,r){n&&n(t,e,i,r)}),i,r)}t=t.replace(/^\\n\\s*/,\"\").trim(),new e.util.request(t,{method:\"get\",onComplete:a})},loadSVGFromString:function(t,n,i,r){var a=new e.window.DOMParser,s=a.parseFromString(t.trim(),\"text/xml\");e.parseSVGDocument(s.documentElement,(function(t,e,i,r){n(t,e,i,r)}),i,r)}})}(e),i.ElementsParser=function(t,e,n,i,r,a){this.elements=t,this.callback=e,this.options=n,this.reviver=i,this.svgUid=n&&n.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\\(['\"]?#([^'\"]+)['\"]?\\)/g,this.doc=a},function(t){t.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},t.createObjects=function(){var t=this;this.elements.forEach((function(e,n){e.setAttribute(\"svgUid\",t.svgUid),t.createObject(e,n)}))},t.findTag=function(t){return i[i.util.string.capitalize(t.tagName.replace(\"svg:\",\"\"))]},t.createObject=function(t,e){var n=this.findTag(t);if(n&&n.fromElement)try{n.fromElement(t,this.createCallback(e,t),this.options)}catch(r){i.log(r)}else this.checkIfDone()},t.createCallback=function(t,e){var n=this;return function(r){var a;n.resolveGradient(r,e,\"fill\"),n.resolveGradient(r,e,\"stroke\"),r instanceof i.Image&&r._originalElement&&(a=r.parsePreserveAspectRatioAttribute(e)),r._removeTransformMatrix(a),n.resolveClipPath(r,e),n.reviver&&n.reviver(e,r),n.instances[t]=r,n.checkIfDone()}},t.extractPropertyDefinition=function(t,e,n){var r=t[e],a=this.regexUrl;if(a.test(r)){a.lastIndex=0;var s=a.exec(r)[1];return a.lastIndex=0,i[n][this.svgUid][s]}},t.resolveGradient=function(t,e,n){var r=this.extractPropertyDefinition(t,n,\"gradientDefs\");if(r){var a=e.getAttribute(n+\"-opacity\"),s=i.Gradient.fromElement(r,t,a,this.options);t.set(n,s)}},t.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},t.resolveClipPath=function(t,e){var n,r,a,s,o,u=this.extractPropertyDefinition(t,\"clipPath\",\"clipPaths\");if(u){s=[],a=i.util.invertTransform(t.calcTransformMatrix());var l=u[0].parentNode,c=e;while(c.parentNode&&c.getAttribute(\"clip-path\")!==t.clipPath)c=c.parentNode;c.parentNode.appendChild(l);for(var h=0;h<u.length;h++)n=u[h],r=this.findTag(n),r.fromElement(n,this.createClipPathCallback(t,s),this.options);u=1===s.length?s[0]:new i.Group(s),o=i.util.multiplyTransformMatrices(a,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,c);var f=i.util.qrDecompose(o);u.flipX=!1,u.flipY=!1,u.set(\"scaleX\",f.scaleX),u.set(\"scaleY\",f.scaleY),u.angle=f.angle,u.skewX=f.skewX,u.skewY=0,u.setPositionByOrigin({x:f.translateX,y:f.translateY},\"center\",\"center\"),t.clipPath=u}else delete t.clipPath},t.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter((function(t){return null!=t})),this.callback(this.instances,this.elements))}}(i.ElementsParser.prototype),function(t){\"use strict\";var e=t.fabric||(t.fabric={});function n(t,e){this.x=t,this.y=e}e.Point?e.warn(\"fabric.Point is already defined\"):(e.Point=n,n.prototype={type:\"point\",constructor:n,add:function(t){return new n(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new n(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new n(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new n(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new n(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new n(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return\"undefined\"===typeof e&&(e=.5),e=Math.max(Math.min(1,e),0),new n(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new n(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new n(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+\",\"+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},clone:function(){return new n(this.x,this.y)}})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={});function n(t){this.status=t,this.points=[]}e.Intersection?e.warn(\"fabric.Intersection is already defined\"):(e.Intersection=n,e.Intersection.prototype={constructor:n,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,i,r,a){var s,o=(a.x-r.x)*(t.y-r.y)-(a.y-r.y)*(t.x-r.x),u=(i.x-t.x)*(t.y-r.y)-(i.y-t.y)*(t.x-r.x),l=(a.y-r.y)*(i.x-t.x)-(a.x-r.x)*(i.y-t.y);if(0!==l){var c=o/l,h=u/l;0<=c&&c<=1&&0<=h&&h<=1?(s=new n(\"Intersection\"),s.appendPoint(new e.Point(t.x+c*(i.x-t.x),t.y+c*(i.y-t.y)))):s=new n}else s=new n(0===o||0===u?\"Coincident\":\"Parallel\");return s},e.Intersection.intersectLinePolygon=function(t,e,i){var r,a,s,o,u=new n,l=i.length;for(o=0;o<l;o++)r=i[o],a=i[(o+1)%l],s=n.intersectLineLine(t,e,r,a),u.appendPoints(s.points);return u.points.length>0&&(u.status=\"Intersection\"),u},e.Intersection.intersectPolygonPolygon=function(t,e){var i,r=new n,a=t.length;for(i=0;i<a;i++){var s=t[i],o=t[(i+1)%a],u=n.intersectLinePolygon(s,o,e);r.appendPoints(u.points)}return r.points.length>0&&(r.status=\"Intersection\"),r},e.Intersection.intersectPolygonRectangle=function(t,i,r){var a=i.min(r),s=i.max(r),o=new e.Point(s.x,a.y),u=new e.Point(a.x,s.y),l=n.intersectLinePolygon(a,o,t),c=n.intersectLinePolygon(o,s,t),h=n.intersectLinePolygon(s,u,t),f=n.intersectLinePolygon(u,a,t),d=new n;return d.appendPoints(l.points),d.appendPoints(c.points),d.appendPoints(h.points),d.appendPoints(f.points),d.points.length>0&&(d.status=\"Intersection\"),d})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={});function n(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}e.Color?e.warn(\"fabric.Color is already defined.\"):(e.Color=n,e.Color.prototype={_tryParsingColor:function(t){var e;t in n.colorNameMap&&(t=n.colorNameMap[t]),\"transparent\"===t&&(e=[255,255,255,0]),e||(e=n.sourceFromHex(t)),e||(e=n.sourceFromRgb(t)),e||(e=n.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,n,i){t/=255,n/=255,i/=255;var r,a,s,o=e.util.array.max([t,n,i]),u=e.util.array.min([t,n,i]);if(s=(o+u)/2,o===u)r=a=0;else{var l=o-u;switch(a=s>.5?l/(2-o-u):l/(o+u),o){case t:r=(n-i)/l+(n<i?6:0);break;case n:r=(i-t)/l+2;break;case i:r=(t-n)/l+4;break}r/=6}return[Math.round(360*r),Math.round(100*a),Math.round(100*s)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return\"rgb(\"+t[0]+\",\"+t[1]+\",\"+t[2]+\")\"},toRgba:function(){var t=this.getSource();return\"rgba(\"+t[0]+\",\"+t[1]+\",\"+t[2]+\",\"+t[3]+\")\"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return\"hsl(\"+e[0]+\",\"+e[1]+\"%,\"+e[2]+\"%)\"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return\"hsla(\"+e[0]+\",\"+e[1]+\"%,\"+e[2]+\"%,\"+t[3]+\")\"},toHex:function(){var t,e,n,i=this.getSource();return t=i[0].toString(16),t=1===t.length?\"0\"+t:t,e=i[1].toString(16),e=1===e.length?\"0\"+e:e,n=i[2].toString(16),n=1===n.length?\"0\"+n:n,t.toUpperCase()+e.toUpperCase()+n.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=Math.round(255*e[3]),t=t.toString(16),t=1===t.length?\"0\"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),n=t[3];return this.setSource([e,e,e,n]),this},toBlackWhite:function(t){var e=this.getSource(),n=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),i=e[3];return t=t||127,n=Number(n)<Number(t)?0:255,this.setSource([n,n,n,i]),this},overlayWith:function(t){t instanceof n||(t=new n(t));var e,i=[],r=this.getAlpha(),a=.5,s=this.getSource(),o=t.getSource();for(e=0;e<3;e++)i.push(Math.round(s[e]*(1-a)+o[e]*a));return i[3]=r,this.setSource(i),this}},e.Color.reRGBa=/^rgba?\\(\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*(?:\\s*,\\s*((?:\\d*\\.?\\d+)?)\\s*)?\\)$/i,e.Color.reHSLa=/^hsla?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3}\\%)\\s*,\\s*(\\d{1,3}\\%)\\s*(?:\\s*,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:\"#F0F8FF\",antiquewhite:\"#FAEBD7\",aqua:\"#00FFFF\",aquamarine:\"#7FFFD4\",azure:\"#F0FFFF\",beige:\"#F5F5DC\",bisque:\"#FFE4C4\",black:\"#000000\",blanchedalmond:\"#FFEBCD\",blue:\"#0000FF\",blueviolet:\"#8A2BE2\",brown:\"#A52A2A\",burlywood:\"#DEB887\",cadetblue:\"#5F9EA0\",chartreuse:\"#7FFF00\",chocolate:\"#D2691E\",coral:\"#FF7F50\",cornflowerblue:\"#6495ED\",cornsilk:\"#FFF8DC\",crimson:\"#DC143C\",cyan:\"#00FFFF\",darkblue:\"#00008B\",darkcyan:\"#008B8B\",darkgoldenrod:\"#B8860B\",darkgray:\"#A9A9A9\",darkgrey:\"#A9A9A9\",darkgreen:\"#006400\",darkkhaki:\"#BDB76B\",darkmagenta:\"#8B008B\",darkolivegreen:\"#556B2F\",darkorange:\"#FF8C00\",darkorchid:\"#9932CC\",darkred:\"#8B0000\",darksalmon:\"#E9967A\",darkseagreen:\"#8FBC8F\",darkslateblue:\"#483D8B\",darkslategray:\"#2F4F4F\",darkslategrey:\"#2F4F4F\",darkturquoise:\"#00CED1\",darkviolet:\"#9400D3\",deeppink:\"#FF1493\",deepskyblue:\"#00BFFF\",dimgray:\"#696969\",dimgrey:\"#696969\",dodgerblue:\"#1E90FF\",firebrick:\"#B22222\",floralwhite:\"#FFFAF0\",forestgreen:\"#228B22\",fuchsia:\"#FF00FF\",gainsboro:\"#DCDCDC\",ghostwhite:\"#F8F8FF\",gold:\"#FFD700\",goldenrod:\"#DAA520\",gray:\"#808080\",grey:\"#808080\",green:\"#008000\",greenyellow:\"#ADFF2F\",honeydew:\"#F0FFF0\",hotpink:\"#FF69B4\",indianred:\"#CD5C5C\",indigo:\"#4B0082\",ivory:\"#FFFFF0\",khaki:\"#F0E68C\",lavender:\"#E6E6FA\",lavenderblush:\"#FFF0F5\",lawngreen:\"#7CFC00\",lemonchiffon:\"#FFFACD\",lightblue:\"#ADD8E6\",lightcoral:\"#F08080\",lightcyan:\"#E0FFFF\",lightgoldenrodyellow:\"#FAFAD2\",lightgray:\"#D3D3D3\",lightgrey:\"#D3D3D3\",lightgreen:\"#90EE90\",lightpink:\"#FFB6C1\",lightsalmon:\"#FFA07A\",lightseagreen:\"#20B2AA\",lightskyblue:\"#87CEFA\",lightslategray:\"#778899\",lightslategrey:\"#778899\",lightsteelblue:\"#B0C4DE\",lightyellow:\"#FFFFE0\",lime:\"#00FF00\",limegreen:\"#32CD32\",linen:\"#FAF0E6\",magenta:\"#FF00FF\",maroon:\"#800000\",mediumaquamarine:\"#66CDAA\",mediumblue:\"#0000CD\",mediumorchid:\"#BA55D3\",mediumpurple:\"#9370DB\",mediumseagreen:\"#3CB371\",mediumslateblue:\"#7B68EE\",mediumspringgreen:\"#00FA9A\",mediumturquoise:\"#48D1CC\",mediumvioletred:\"#C71585\",midnightblue:\"#191970\",mintcream:\"#F5FFFA\",mistyrose:\"#FFE4E1\",moccasin:\"#FFE4B5\",navajowhite:\"#FFDEAD\",navy:\"#000080\",oldlace:\"#FDF5E6\",olive:\"#808000\",olivedrab:\"#6B8E23\",orange:\"#FFA500\",orangered:\"#FF4500\",orchid:\"#DA70D6\",palegoldenrod:\"#EEE8AA\",palegreen:\"#98FB98\",paleturquoise:\"#AFEEEE\",palevioletred:\"#DB7093\",papayawhip:\"#FFEFD5\",peachpuff:\"#FFDAB9\",peru:\"#CD853F\",pink:\"#FFC0CB\",plum:\"#DDA0DD\",powderblue:\"#B0E0E6\",purple:\"#800080\",rebeccapurple:\"#663399\",red:\"#FF0000\",rosybrown:\"#BC8F8F\",royalblue:\"#4169E1\",saddlebrown:\"#8B4513\",salmon:\"#FA8072\",sandybrown:\"#F4A460\",seagreen:\"#2E8B57\",seashell:\"#FFF5EE\",sienna:\"#A0522D\",silver:\"#C0C0C0\",skyblue:\"#87CEEB\",slateblue:\"#6A5ACD\",slategray:\"#708090\",slategrey:\"#708090\",snow:\"#FFFAFA\",springgreen:\"#00FF7F\",steelblue:\"#4682B4\",tan:\"#D2B48C\",teal:\"#008080\",thistle:\"#D8BFD8\",tomato:\"#FF6347\",turquoise:\"#40E0D0\",violet:\"#EE82EE\",wheat:\"#F5DEB3\",white:\"#FFFFFF\",whitesmoke:\"#F5F5F5\",yellow:\"#FFFF00\",yellowgreen:\"#9ACD32\"},e.Color.fromRgb=function(t){return n.fromSource(n.sourceFromRgb(t))},e.Color.sourceFromRgb=function(t){var e=t.match(n.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),r=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),a=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(r,10),parseInt(a,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=n.fromRgb,e.Color.fromHsl=function(t){return n.fromSource(n.sourceFromHsl(t))},e.Color.sourceFromHsl=function(t){var e=t.match(n.reHSLa);if(e){var r,a,s,o=(parseFloat(e[1])%360+360)%360/360,u=parseFloat(e[2])/(/%$/.test(e[2])?100:1),l=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===u)r=a=s=l;else{var c=l<=.5?l*(u+1):l+u-l*u,h=2*l-c;r=i(h,c,o+1/3),a=i(h,c,o),s=i(h,c,o-1/3)}return[Math.round(255*r),Math.round(255*a),Math.round(255*s),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=n.fromHsl,e.Color.fromHex=function(t){return n.fromSource(n.sourceFromHex(t))},e.Color.sourceFromHex=function(t){if(t.match(n.reHex)){var e=t.slice(t.indexOf(\"#\")+1),i=3===e.length||4===e.length,r=8===e.length||4===e.length,a=i?e.charAt(0)+e.charAt(0):e.substring(0,2),s=i?e.charAt(1)+e.charAt(1):e.substring(2,4),o=i?e.charAt(2)+e.charAt(2):e.substring(4,6),u=r?i?e.charAt(3)+e.charAt(3):e.substring(6,8):\"FF\";return[parseInt(a,16),parseInt(s,16),parseInt(o,16),parseFloat((parseInt(u,16)/255).toFixed(2))]}},e.Color.fromSource=function(t){var e=new n;return e.setSource(t),e})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=[\"e\",\"se\",\"s\",\"sw\",\"w\",\"nw\",\"n\",\"ne\",\"e\"],i=[\"ns\",\"nesw\",\"ew\",\"nwse\"],r={},a=\"left\",s=\"top\",o=\"right\",u=\"bottom\",l=\"center\",c={top:u,bottom:s,left:o,right:a,center:l},h=e.util.radiansToDegrees,f=Math.sign||function(t){return(t>0)-(t<0)||+t};function d(t,e){var n=t.angle+h(Math.atan2(e.y,e.x))+360;return Math.round(n%360/45)}function p(t,n){var i=n.transform.target,r=i.canvas,a=e.util.object.clone(n);a.target=i,r&&r.fire(\"object:\"+t,a),i.fire(t,n)}function g(t,e){var n=e.canvas,i=n.uniScaleKey,r=t[i];return n.uniformScaling&&!r||!n.uniformScaling&&r}function v(t){return t.originX===l&&t.originY===l}function m(t,e,n){var i=t.lockScalingX,r=t.lockScalingY;return!(!i||!r)||(!(e||!i&&!r||!n)||(!(!i||\"x\"!==e)||!(!r||\"y\"!==e)))}function y(t,e,i){var r=\"not-allowed\",a=g(t,i),s=\"\";if(0!==e.x&&0===e.y?s=\"x\":0===e.x&&0!==e.y&&(s=\"y\"),m(i,s,a))return r;var o=d(i,e);return n[o]+\"-resize\"}function _(t,e,n){var r=\"not-allowed\";if(0!==e.x&&n.lockSkewingY)return r;if(0!==e.y&&n.lockSkewingX)return r;var a=d(n,e)%4;return i[a]+\"-resize\"}function x(t,e,n){return t[n.canvas.altActionKey]?r.skewCursorStyleHandler(t,e,n):r.scaleCursorStyleHandler(t,e,n)}function b(t,e,n){var i=t[n.canvas.altActionKey];return 0===e.x?i?\"skewX\":\"scaleY\":0===e.y?i?\"skewY\":\"scaleX\":void 0}function w(t,e,n){return n.lockRotation?\"not-allowed\":e.cursorStyle}function S(t,e,n,i){return{e:t,transform:e,pointer:{x:n,y:i}}}function C(t){return function(e,n,i,r){var a=n.target,s=a.getCenterPoint(),o=a.translateToOriginPoint(s,n.originX,n.originY),u=t(e,n,i,r);return a.setPositionByOrigin(o,n.originX,n.originY),u}}function M(t,e){return function(n,i,r,a){var s=e(n,i,r,a);return s&&p(t,S(n,i,r,a)),s}}function T(t,n,i,r,a){var s=t.target,o=s.controls[t.corner],u=s.canvas.getZoom(),l=s.padding/u,c=s.toLocalPoint(new e.Point(r,a),n,i);return c.x>=l&&(c.x-=l),c.x<=-l&&(c.x+=l),c.y>=l&&(c.y-=l),c.y<=l&&(c.y+=l),c.x-=o.offsetX,c.y-=o.offsetY,c}function k(t){return t.flipX!==t.flipY}function A(t,e,n,i,r){if(0!==t[e]){var a=t._getTransformedDimensions()[i],s=r/a*t[n];t.set(n,s)}}function E(t,e,n,i){var r,l=e.target,c=l._getTransformedDimensions(0,l.skewY),f=T(e,e.originX,e.originY,n,i),d=Math.abs(2*f.x)-c.x,p=l.skewX;d<2?r=0:(r=h(Math.atan2(d/l.scaleX,c.y/l.scaleY)),e.originX===a&&e.originY===u&&(r=-r),e.originX===o&&e.originY===s&&(r=-r),k(l)&&(r=-r));var g=p!==r;if(g){var v=l._getTransformedDimensions().y;l.set(\"skewX\",r),A(l,\"skewY\",\"scaleY\",\"y\",v)}return g}function O(t,e,n,i){var r,l=e.target,c=l._getTransformedDimensions(l.skewX,0),f=T(e,e.originX,e.originY,n,i),d=Math.abs(2*f.y)-c.y,p=l.skewY;d<2?r=0:(r=h(Math.atan2(d/l.scaleY,c.x/l.scaleX)),e.originX===a&&e.originY===u&&(r=-r),e.originX===o&&e.originY===s&&(r=-r),k(l)&&(r=-r));var g=p!==r;if(g){var v=l._getTransformedDimensions().x;l.set(\"skewY\",r),A(l,\"skewX\",\"scaleX\",\"x\",v)}return g}function P(t,e,n,i){var r,u=e.target,c=u.skewX,h=e.originY;if(u.lockSkewingX)return!1;if(0===c){var f=T(e,l,l,n,i);r=f.x>0?a:o}else c>0&&(r=h===s?a:o),c<0&&(r=h===s?o:a),k(u)&&(r=r===a?o:a);e.originX=r;var d=M(\"skewing\",C(E));return d(t,e,n,i)}function I(t,e,n,i){var r,o=e.target,c=o.skewY,h=e.originX;if(o.lockSkewingY)return!1;if(0===c){var f=T(e,l,l,n,i);r=f.y>0?s:u}else c>0&&(r=h===a?s:u),c<0&&(r=h===a?u:s),k(o)&&(r=r===s?u:s);e.originY=r;var d=M(\"skewing\",C(O));return d(t,e,n,i)}function L(t,e,n,i){var r=e,a=r.target,s=a.translateToOriginPoint(a.getCenterPoint(),r.originX,r.originY);if(a.lockRotation)return!1;var o=Math.atan2(r.ey-s.y,r.ex-s.x),u=Math.atan2(i-s.y,n-s.x),l=h(u-o+r.theta),c=!0;if(a.snapAngle>0){var f=a.snapAngle,d=a.snapThreshold||f,p=Math.ceil(l/f)*f,g=Math.floor(l/f)*f;Math.abs(l-g)<d?l=g:Math.abs(l-p)<d&&(l=p)}return l<0&&(l=360+l),l%=360,c=a.angle!==l,a.angle=l,c}function D(t,e,n,i,r){r=r||{};var a,s,o,u,l,h,d=e.target,p=d.lockScalingX,y=d.lockScalingY,_=r.by,x=g(t,d),b=m(d,_,x),w=e.gestureScale;if(b)return!1;if(w)s=e.scaleX*w,o=e.scaleY*w;else{if(a=T(e,e.originX,e.originY,n,i),l=\"y\"!==_?f(a.x):1,h=\"x\"!==_?f(a.y):1,e.signX||(e.signX=l),e.signY||(e.signY=h),d.lockScalingFlip&&(e.signX!==l||e.signY!==h))return!1;if(u=d._getTransformedDimensions(),x&&!_){var S=Math.abs(a.x)+Math.abs(a.y),C=e.original,M=Math.abs(u.x*C.scaleX/d.scaleX)+Math.abs(u.y*C.scaleY/d.scaleY),k=S/M;s=C.scaleX*k,o=C.scaleY*k}else s=Math.abs(a.x*d.scaleX/u.x),o=Math.abs(a.y*d.scaleY/u.y);v(e)&&(s*=2,o*=2),e.signX!==l&&\"y\"!==_&&(e.originX=c[e.originX],s*=-1,e.signX=l),e.signY!==h&&\"x\"!==_&&(e.originY=c[e.originY],o*=-1,e.signY=h)}var A=d.scaleX,E=d.scaleY;return _?(\"x\"===_&&d.set(\"scaleX\",s),\"y\"===_&&d.set(\"scaleY\",o)):(!p&&d.set(\"scaleX\",s),!y&&d.set(\"scaleY\",o)),A!==d.scaleX||E!==d.scaleY}function R(t,e,n,i){return D(t,e,n,i)}function N(t,e,n,i){return D(t,e,n,i,{by:\"x\"})}function F(t,e,n,i){return D(t,e,n,i,{by:\"y\"})}function B(t,e,n,i){return t[e.target.canvas.altActionKey]?r.skewHandlerX(t,e,n,i):r.scalingY(t,e,n,i)}function z(t,e,n,i){return t[e.target.canvas.altActionKey]?r.skewHandlerY(t,e,n,i):r.scalingX(t,e,n,i)}function j(t,e,n,i){var r=e.target,a=T(e,e.originX,e.originY,n,i),s=r.strokeWidth/(r.strokeUniform?r.scaleX:1),o=v(e)?2:1,u=r.width,l=Math.abs(a.x*o/r.scaleX)-s;return r.set(\"width\",Math.max(l,0)),u!==l}function U(t,e,n,i){var r=e.target,a=n-e.offsetX,s=i-e.offsetY,o=!r.get(\"lockMovementX\")&&r.left!==a,u=!r.get(\"lockMovementY\")&&r.top!==s;return o&&r.set(\"left\",a),u&&r.set(\"top\",s),(o||u)&&p(\"moving\",S(t,e,n,i)),o||u}r.scaleCursorStyleHandler=y,r.skewCursorStyleHandler=_,r.scaleSkewCursorStyleHandler=x,r.rotationWithSnapping=M(\"rotating\",C(L)),r.scalingEqually=M(\"scaling\",C(R)),r.scalingX=M(\"scaling\",C(N)),r.scalingY=M(\"scaling\",C(F)),r.scalingYOrSkewingX=B,r.scalingXOrSkewingY=z,r.changeWidth=M(\"resizing\",C(j)),r.skewHandlerX=P,r.skewHandlerY=I,r.dragHandler=U,r.scaleOrSkewActionName=b,r.rotationStyleHandler=w,r.fireEvent=p,r.wrapWithFixedAnchor=C,r.wrapWithFireEvent=M,r.getLocalPoint=T,e.controlsUtils=r}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.degreesToRadians,i=e.controlsUtils;function r(t,e,n,i,r){i=i||{};var a,s=this.sizeX||i.cornerSize||r.cornerSize,o=this.sizeY||i.cornerSize||r.cornerSize,u=\"undefined\"!==typeof i.transparentCorners?i.transparentCorners:r.transparentCorners,l=u?\"stroke\":\"fill\",c=!u&&(i.cornerStrokeColor||r.cornerStrokeColor),h=e,f=n;t.save(),t.fillStyle=i.cornerColor||r.cornerColor,t.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor,s>o?(a=s,t.scale(1,o/s),f=n*s/o):o>s?(a=o,t.scale(s/o,1),h=e*o/s):a=s,t.lineWidth=1,t.beginPath(),t.arc(h,f,a/2,0,2*Math.PI,!1),t[l](),c&&t.stroke(),t.restore()}function a(t,e,i,r,a){r=r||{};var s=this.sizeX||r.cornerSize||a.cornerSize,o=this.sizeY||r.cornerSize||a.cornerSize,u=\"undefined\"!==typeof r.transparentCorners?r.transparentCorners:a.transparentCorners,l=u?\"stroke\":\"fill\",c=!u&&(r.cornerStrokeColor||a.cornerStrokeColor),h=s/2,f=o/2;t.save(),t.fillStyle=r.cornerColor||a.cornerColor,t.strokeStyle=r.cornerStrokeColor||a.cornerStrokeColor,t.lineWidth=1,t.translate(e,i),t.rotate(n(a.angle)),t[l+\"Rect\"](-h,-f,s,o),c&&t.strokeRect(-h,-f,s,o),t.restore()}i.renderCircleControl=r,i.renderSquareControl=a}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={});function n(t){for(var e in t)this[e]=t[e]}e.Control=n,e.Control.prototype={visible:!0,actionName:\"scale\",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:\"crosshair\",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(t,e){return e.cursorStyle},getActionName:function(t,e){return e.actionName},getVisibility:function(t,e){var n=t._controlsVisibility;return n&&\"undefined\"!==typeof n[e]?n[e]:this.visible},setVisibility:function(t){this.visible=t},positionHandler:function(t,n){var i=e.util.transformPoint({x:this.x*t.x+this.offsetX,y:this.y*t.y+this.offsetY},n);return i},calcCornerCoords:function(t,n,i,r,a){var s,o,u,l,c=a?this.touchSizeX:this.sizeX,h=a?this.touchSizeY:this.sizeY;if(c&&h&&c!==h){var f=Math.atan2(h,c),d=Math.sqrt(c*c+h*h)/2,p=f-e.util.degreesToRadians(t),g=Math.PI/2-f-e.util.degreesToRadians(t);s=d*e.util.cos(p),o=d*e.util.sin(p),u=d*e.util.cos(g),l=d*e.util.sin(g)}else{var v=c&&h?c:n;d=.7071067812*v;p=e.util.degreesToRadians(45-t);s=u=d*e.util.cos(p),o=l=d*e.util.sin(p)}return{tl:{x:i-l,y:r-u},tr:{x:i+s,y:r-o},bl:{x:i-s,y:r+o},br:{x:i+l,y:r+u}}},render:function(t,n,i,r,a){switch(r=r||{},r.cornerStyle||a.cornerStyle){case\"circle\":e.controlsUtils.renderCircleControl.call(this,t,n,i,r,a);break;default:e.controlsUtils.renderSquareControl.call(this,t,n,i,r,a)}}}}(e),function(){function t(t,e){var n,r,a,s,o=t.getAttribute(\"style\"),u=t.getAttribute(\"offset\")||0;if(u=parseFloat(u)/(/%$/.test(u)?100:1),u=u<0?0:u>1?1:u,o){var l=o.split(/\\s*;\\s*/);for(\"\"===l[l.length-1]&&l.pop(),s=l.length;s--;){var c=l[s].split(/\\s*:\\s*/),h=c[0].trim(),f=c[1].trim();\"stop-color\"===h?n=f:\"stop-opacity\"===h&&(a=f)}}return n||(n=t.getAttribute(\"stop-color\")||\"rgb(0,0,0)\"),a||(a=t.getAttribute(\"stop-opacity\")),n=new i.Color(n),r=n.getAlpha(),a=isNaN(parseFloat(a))?1:parseFloat(a),a*=r*e,{offset:u,color:n.toRgb(),opacity:a}}function e(t){return{x1:t.getAttribute(\"x1\")||0,y1:t.getAttribute(\"y1\")||0,x2:t.getAttribute(\"x2\")||\"100%\",y2:t.getAttribute(\"y2\")||0}}function n(t){return{x1:t.getAttribute(\"fx\")||t.getAttribute(\"cx\")||\"50%\",y1:t.getAttribute(\"fy\")||t.getAttribute(\"cy\")||\"50%\",r1:0,x2:t.getAttribute(\"cx\")||\"50%\",y2:t.getAttribute(\"cy\")||\"50%\",r2:t.getAttribute(\"r\")||\"50%\"}}var r=i.util.object.clone;function a(t,e,n,i){var r,a;Object.keys(e).forEach((function(t){r=e[t],\"Infinity\"===r?a=1:\"-Infinity\"===r?a=0:(a=parseFloat(e[t],10),\"string\"===typeof r&&/^(\\d+\\.\\d+)%|(\\d+)%$/.test(r)&&(a*=.01,\"pixels\"===i&&(\"x1\"!==t&&\"x2\"!==t&&\"r2\"!==t||(a*=n.viewBoxWidth||n.width),\"y1\"!==t&&\"y2\"!==t||(a*=n.viewBoxHeight||n.height)))),e[t]=a}))}i.Gradient=i.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:\"pixels\",type:\"linear\",initialize:function(t){t||(t={}),t.coords||(t.coords={});var e,n=this;Object.keys(t).forEach((function(e){n[e]=t[e]})),this.id?this.id+=\"_\"+i.Object.__uid++:this.id=i.Object.__uid++,e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},\"radial\"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var n=new i.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return i.util.populateWithProperties(this,e,t),e},toSVG:function(t,e){var n,a,s,o,u=r(this.coords,!0),l=(e=e||{},r(this.colorStops,!0)),c=u.r1>u.r2,h=this.gradientTransform?this.gradientTransform.concat():i.iMatrix.concat(),f=-this.offsetX,d=-this.offsetY,p=!!e.additionalTransform,g=\"pixels\"===this.gradientUnits?\"userSpaceOnUse\":\"objectBoundingBox\";if(l.sort((function(t,e){return t.offset-e.offset})),\"objectBoundingBox\"===g?(f/=t.width,d/=t.height):(f+=t.width/2,d+=t.height/2),\"path\"===t.type&&\"percentage\"!==this.gradientUnits&&(f-=t.pathOffset.x,d-=t.pathOffset.y),h[4]-=f,h[5]-=d,o='id=\"SVGID_'+this.id+'\" gradientUnits=\"'+g+'\"',o+=' gradientTransform=\"'+(p?e.additionalTransform+\" \":\"\")+i.util.matrixToSVG(h)+'\" ',\"linear\"===this.type?s=[\"<linearGradient \",o,' x1=\"',u.x1,'\" y1=\"',u.y1,'\" x2=\"',u.x2,'\" y2=\"',u.y2,'\">\\n']:\"radial\"===this.type&&(s=[\"<radialGradient \",o,' cx=\"',c?u.x1:u.x2,'\" cy=\"',c?u.y1:u.y2,'\" r=\"',c?u.r1:u.r2,'\" fx=\"',c?u.x2:u.x1,'\" fy=\"',c?u.y2:u.y1,'\">\\n']),\"radial\"===this.type){if(c)for(l=l.concat(),l.reverse(),n=0,a=l.length;n<a;n++)l[n].offset=1-l[n].offset;var v=Math.min(u.r1,u.r2);if(v>0){var m=Math.max(u.r1,u.r2),y=v/m;for(n=0,a=l.length;n<a;n++)l[n].offset+=y*(1-l[n].offset)}}for(n=0,a=l.length;n<a;n++){var _=l[n];s.push(\"<stop \",'offset=\"',100*_.offset+\"%\",'\" style=\"stop-color:',_.color,\"undefined\"!==typeof _.opacity?\";stop-opacity: \"+_.opacity:\";\",'\"/>\\n')}return s.push(\"linear\"===this.type?\"</linearGradient>\\n\":\"</radialGradient>\\n\"),s.join(\"\")},toLive:function(t){var e,n,r,a=i.util.object.clone(this.coords);if(this.type){for(\"linear\"===this.type?e=t.createLinearGradient(a.x1,a.y1,a.x2,a.y2):\"radial\"===this.type&&(e=t.createRadialGradient(a.x1,a.y1,a.r1,a.x2,a.y2,a.r2)),n=0,r=this.colorStops.length;n<r;n++){var s=this.colorStops[n].color,o=this.colorStops[n].opacity,u=this.colorStops[n].offset;\"undefined\"!==typeof o&&(s=new i.Color(s).setAlpha(o).toRgba()),e.addColorStop(u,s)}return e}}}),i.util.object.extend(i.Gradient,{fromElement:function(r,s,o,u){var l=parseFloat(o)/(/%$/.test(o)?100:1);l=l<0?0:l>1?1:l,isNaN(l)&&(l=1);var c,h,f,d,p=r.getElementsByTagName(\"stop\"),g=\"userSpaceOnUse\"===r.getAttribute(\"gradientUnits\")?\"pixels\":\"percentage\",v=r.getAttribute(\"gradientTransform\")||\"\",m=[],y=0,_=0;for(\"linearGradient\"===r.nodeName||\"LINEARGRADIENT\"===r.nodeName?(c=\"linear\",h=e(r)):(c=\"radial\",h=n(r)),f=p.length;f--;)m.push(t(p[f],l));d=i.parseTransformAttribute(v),a(s,h,u,g),\"pixels\"===g&&(y=-s.left,_=-s.top);var x=new i.Gradient({id:r.getAttribute(\"id\"),type:c,coords:h,colorStops:m,gradientUnits:g,gradientTransform:d,offsetX:y,offsetY:_});return x}})}(),function(){\"use strict\";var t=i.util.toFixed;i.Pattern=i.util.createClass({repeat:\"repeat\",offsetX:0,offsetY:0,crossOrigin:\"\",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=i.Object.__uid++,this.setOptions(t),!t.source||t.source&&\"string\"!==typeof t.source)e&&e(this);else{var n=this;this.source=i.util.createImage(),i.util.loadImage(t.source,(function(t,i){n.source=t,e&&e(n,i)}),null,this.crossOrigin)}},toObject:function(e){var n,r,a=i.Object.NUM_FRACTION_DIGITS;return\"string\"===typeof this.source.src?n=this.source.src:\"object\"===typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),r={type:\"pattern\",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,a),offsetY:t(this.offsetY,a),patternTransform:this.patternTransform?this.patternTransform.concat():null},i.util.populateWithProperties(this,r,e),r},toSVG:function(t){var e=\"function\"===typeof this.source?this.source():this.source,n=e.width/t.width,i=e.height/t.height,r=this.offsetX/t.width,a=this.offsetY/t.height,s=\"\";return\"repeat-x\"!==this.repeat&&\"no-repeat\"!==this.repeat||(i=1,a&&(i+=Math.abs(a))),\"repeat-y\"!==this.repeat&&\"no-repeat\"!==this.repeat||(n=1,r&&(n+=Math.abs(r))),e.src?s=e.src:e.toDataURL&&(s=e.toDataURL()),'<pattern id=\"SVGID_'+this.id+'\" x=\"'+r+'\" y=\"'+a+'\" width=\"'+n+'\" height=\"'+i+'\">\\n<image x=\"0\" y=\"0\" width=\"'+e.width+'\" height=\"'+e.height+'\" xlink:href=\"'+s+'\"></image>\\n</pattern>\\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=this.source;if(!e)return\"\";if(\"undefined\"!==typeof e.src){if(!e.complete)return\"\";if(0===e.naturalWidth||0===e.naturalHeight)return\"\"}return t.createPattern(e,this.repeat)}})}(),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.toFixed;e.Shadow?e.warn(\"fabric.Shadow is already defined.\"):(e.Shadow=e.util.createClass({color:\"rgb(0,0,0)\",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var n in\"string\"===typeof t&&(t=this._parseShadow(t)),t)this[n]=t[n];this.id=e.Object.__uid++},_parseShadow:function(t){var n=t.trim(),i=e.Shadow.reOffsetsAndBlur.exec(n)||[],r=n.replace(e.Shadow.reOffsetsAndBlur,\"\")||\"rgb(0,0,0)\";return{color:r.trim(),offsetX:parseFloat(i[1],10)||0,offsetY:parseFloat(i[2],10)||0,blur:parseFloat(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join(\"px \")},toSVG:function(t){var i=40,r=40,a=e.Object.NUM_FRACTION_DIGITS,s=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),o=20,u=new e.Color(this.color);return t.width&&t.height&&(i=100*n((Math.abs(s.x)+this.blur)/t.width,a)+o,r=100*n((Math.abs(s.y)+this.blur)/t.height,a)+o),t.flipX&&(s.x*=-1),t.flipY&&(s.y*=-1),'<filter id=\"SVGID_'+this.id+'\" y=\"-'+r+'%\" height=\"'+(100+2*r)+'%\" x=\"-'+i+'%\" width=\"'+(100+2*i)+'%\" >\\n\\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"'+n(this.blur?this.blur/2:0,a)+'\"></feGaussianBlur>\\n\\t<feOffset dx=\"'+n(s.x,a)+'\" dy=\"'+n(s.y,a)+'\" result=\"oBlur\" ></feOffset>\\n\\t<feFlood flood-color=\"'+u.toRgb()+'\" flood-opacity=\"'+u.getAlpha()+'\"/>\\n\\t<feComposite in2=\"oBlur\" operator=\"in\" />\\n\\t<feMerge>\\n\\t\\t<feMergeNode></feMergeNode>\\n\\t\\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\\n\\t</feMerge>\\n</filter>\\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},n=e.Shadow.prototype;return[\"color\",\"blur\",\"offsetX\",\"offsetY\",\"affectStroke\",\"nonScaling\"].forEach((function(e){this[e]!==n[e]&&(t[e]=this[e])}),this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\\s|^)(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?(\\d+(?:\\.\\d*)?(?:px)?)?(?:\\s?|$)(?:$|\\s)/)}(e),function(){\"use strict\";if(i.StaticCanvas)i.warn(\"fabric.StaticCanvas is already defined.\");else{var t=i.util.object.extend,e=i.util.getElementOffset,n=i.util.removeFromArray,r=i.util.toFixed,a=i.util.transformPoint,s=i.util.invertTransform,o=i.util.getNodeCanvas,u=i.util.createCanvasElement,l=new Error(\"Could not initialize `canvas` element\");i.StaticCanvas=i.util.createClass(i.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:\"\",backgroundImage:null,overlayColor:\"\",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:i.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,n),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,n),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,n),e.overlayColor&&this.setOverlayColor(e.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return i.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,i.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var t=i.devicePixelRatio;this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(t,e,n){e.setAttribute(\"width\",this.width*t),e.setAttribute(\"height\",this.height*t),n.scale(t,t)},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,n){return this.__setBgOverlayImage(\"overlayImage\",t,e,n)},setBackgroundImage:function(t,e,n){return this.__setBgOverlayImage(\"backgroundImage\",t,e,n)},setOverlayColor:function(t,e){return this.__setBgOverlayColor(\"overlayColor\",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor(\"backgroundColor\",t,e)},__setBgOverlayImage:function(t,e,n,r){return\"string\"===typeof e?i.util.loadImage(e,(function(e,a){if(e){var s=new i.Image(e,r);this[t]=s,s.canvas=this}n&&n(e,a)}),this,r&&r.crossOrigin):(r&&e.setOptions(r),this[t]=e,e&&(e.canvas=this),n&&n(e,!1)),this},__setBgOverlayColor:function(t,e,n){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,n),this},_createCanvasElement:function(){var t=u();if(!t)throw l;if(t.style||(t.style={}),\"undefined\"===typeof t.getContext)throw l;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+\"px\",e.style.height=this.height+\"px\",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=i.util.getById(t)||this._createCanvasElement(),i.util.addClass(this.lowerCanvasEl,\"lower-canvas\"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext(\"2d\")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var n;for(var i in e=e||{},t)n=t[i],e.cssOnly||(this._setBackstoreDimension(i,t[i]),n+=\"px\",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(i,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,n,i,r=this._activeObject,a=this.backgroundImage,s=this.overlayImage;for(this.viewportTransform=t,n=0,i=this._objects.length;n<i;n++)e=this._objects[n],e.group||e.setCoords(!0);return r&&r.setCoords(),a&&a.setCoords(!0),s&&s.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var n=t,i=this.viewportTransform.slice(0);t=a(t,s(this.viewportTransform)),i[0]=e,i[3]=e;var r=a(t,i);return i[4]+=n.x-r.x,i[5]+=n.y-r.y,this.setViewportTransform(i)},setZoom:function(t){return this.zoomToPoint(new i.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new i.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set(\"canvas\",this),t.setCoords(),this.fire(\"object:added\",{target:t}),t.fire(\"added\")},_onObjectRemoved:function(t){this.fire(\"object:removed\",{target:t}),t.fire(\"removed\"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor=\"\",this.overlayColor=\"\",this._hasITextHandlers&&(this.off(\"mouse:up\",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire(\"canvas:cleared\"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=i.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,n=this.height,r=s(this.viewportTransform);return t.tl=a({x:0,y:0},r),t.br=a({x:e,y:n},r),t.tr=new i.Point(t.br.x,t.tl.y),t.bl=new i.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(i.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var n=this.viewportTransform,r=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),i.util.setImageSmoothing(t,this.imageSmoothingEnabled),this.fire(\"before:render\",{ctx:t}),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),r&&(r.canvas=this,r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire(\"after:render\",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,n=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation=\"destination-in\",n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var n,i;for(n=0,i=e.length;n<i;++n)e[n]&&e[n].render(t)},_renderBackgroundOrOverlay:function(t,e){var n=this[e+\"Color\"],i=this[e+\"Image\"],r=this.viewportTransform,a=this[e+\"Vpt\"];if(n||i){if(n){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=n.toLive?n.toLive(t,this):n,a&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);var s=n.gradientTransform||n.patternTransform;s&&t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.fill(),t.restore()}i&&(t.save(),a&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,\"background\")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,\"overlay\")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new i.Point(this.width/2,this.height/2)},centerObjectH:function(t){return this._centerObject(t,new i.Point(this.getCenterPoint().x,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new i.Point(t.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(t){var e=this.getCenterPoint();return this._centerObject(t,e)},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new i.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new i.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenterPoint(),e=s(this.viewportTransform);return a(t,e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,\"center\",\"center\"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod(\"toObject\",t)},toDatalessObject:function(t){return this._toObjectMethod(\"toDatalessObject\",t)},_toObjectMethod:function(e,n){var r=this.clipPath,a={version:i.version,objects:this._toObjects(e,n)};return r&&!r.excludeFromExport&&(a.clipPath=this._toObject(this.clipPath,e,n)),t(a,this.__serializeBgOverlay(e,n)),i.util.populateWithProperties(this,a,n),a},_toObjects:function(t,e){return this._objects.filter((function(t){return!t.excludeFromExport})).map((function(n){return this._toObject(n,t,e)}),this)},_toObject:function(t,e,n){var i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);var r=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=i),r},__serializeBgOverlay:function(t,e){var n={},i=this.backgroundImage,r=this.overlayImage,a=this.backgroundColor,s=this.overlayColor;return a&&a.toObject?a.excludeFromExport||(n.background=a.toObject(e)):a&&(n.background=a),s&&s.toObject?s.excludeFromExport||(n.overlay=s.toObject(e)):s&&(n.overlay=s),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,t,e)),r&&!r.excludeFromExport&&(n.overlayImage=this._toObject(r,t,e)),n},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path=\"url(#'+this.clipPath.clipPathId+')\" >\\n'),this._setSVGBgOverlayColor(n,\"background\"),this._setSVGBgOverlayImage(n,\"backgroundImage\",e),this._setSVGObjects(n,e),this.clipPath&&n.push(\"</g>\\n\"),this._setSVGBgOverlayColor(n,\"overlay\"),this._setSVGBgOverlayImage(n,\"overlayImage\",e),n.push(\"</svg>\"),n.join(\"\")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version=\"1.0\" encoding=\"',e.encoding||\"UTF-8\",'\" standalone=\"no\" ?>\\n','<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" ','\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n')},_setSVGHeader:function(t,e){var n,a=e.width||this.width,s=e.height||this.height,o='viewBox=\"0 0 '+this.width+\" \"+this.height+'\" ',u=i.Object.NUM_FRACTION_DIGITS;e.viewBox?o='viewBox=\"'+e.viewBox.x+\" \"+e.viewBox.y+\" \"+e.viewBox.width+\" \"+e.viewBox.height+'\" ':this.svgViewportTransformation&&(n=this.viewportTransform,o='viewBox=\"'+r(-n[4]/n[0],u)+\" \"+r(-n[5]/n[3],u)+\" \"+r(this.width/n[0],u)+\" \"+r(this.height/n[3],u)+'\" '),t.push(\"<svg \",'xmlns=\"http://www.w3.org/2000/svg\" ','xmlns:xlink=\"http://www.w3.org/1999/xlink\" ','version=\"1.1\" ','width=\"',a,'\" ','height=\"',s,'\" ',o,'xml:space=\"preserve\">\\n',\"<desc>Created with Fabric.js \",i.version,\"</desc>\\n\",\"<defs>\\n\",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),\"</defs>\\n\")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId=\"CLIPPATH_\"+i.Object.__uid++,'<clipPath id=\"'+e.clipPathId+'\" >\\n'+this.clipPath.toClipPathSVG(t.reviver)+\"</clipPath>\\n\"):\"\"},createSVGRefElementsMarkup:function(){var t=this,e=[\"background\",\"overlay\"].map((function(e){var n=t[e+\"Color\"];if(n&&n.toLive){var r=t[e+\"Vpt\"],a=t.viewportTransform,s={width:t.width/(r?a[0]:1),height:t.height/(r?a[3]:1)};return n.toSVG(s,{additionalTransform:r?i.util.matrixToSVG(a):\"\"})}}));return e.join(\"\")},createSVGFontFacesMarkup:function(){var t,e,n,r,a,s,o,u,l,c=\"\",h={},f=i.fontPaths,d=[];for(this._objects.forEach((function t(e){d.push(e),e._objects&&e._objects.forEach(t)})),u=0,l=d.length;u<l;u++)if(t=d[u],e=t.fontFamily,-1!==t.type.indexOf(\"text\")&&!h[e]&&f[e]&&(h[e]=!0,t.styles))for(a in n=t.styles,n)for(o in r=n[a],r)s=r[o],e=s.fontFamily,!h[e]&&f[e]&&(h[e]=!0);for(var p in h)c+=[\"\\t\\t@font-face {\\n\",\"\\t\\t\\tfont-family: '\",p,\"';\\n\",\"\\t\\t\\tsrc: url('\",f[p],\"');\\n\",\"\\t\\t}\\n\"].join(\"\");return c&&(c=['\\t<style type=\"text/css\">',\"<![CDATA[\\n\",c,\"]]>\",\"</style>\\n\"].join(\"\")),c},_setSVGObjects:function(t,e){var n,i,r,a=this._objects;for(i=0,r=a.length;i<r;i++)n=a[i],n.excludeFromExport||this._setSVGObject(t,n,e)},_setSVGObject:function(t,e,n){t.push(e.toSVG(n))},_setSVGBgOverlayImage:function(t,e,n){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(n))},_setSVGBgOverlayColor:function(t,e){var n=this[e+\"Color\"],r=this.viewportTransform,a=this.width,s=this.height;if(n)if(n.toLive){var o=n.repeat,u=i.util.invertTransform(r),l=this[e+\"Vpt\"],c=l?i.util.matrixToSVG(u):\"\";t.push('<rect transform=\"'+c+\" translate(\",a/2,\",\",s/2,')\"',' x=\"',n.offsetX-a/2,'\" y=\"',n.offsetY-s/2,'\" ','width=\"',\"repeat-y\"===o||\"no-repeat\"===o?n.source.width:a,'\" height=\"',\"repeat-x\"===o||\"no-repeat\"===o?n.source.height:s,'\" fill=\"url(#SVGID_'+n.id+')\"',\"></rect>\\n\")}else t.push('<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" ','fill=\"',n,'\"',\"></rect>\\n\")},sendToBack:function(t){if(!t)return this;var e,i,r,a=this._activeObject;if(t===a&&\"activeSelection\"===t.type)for(r=a._objects,e=r.length;e--;)i=r[e],n(this._objects,i),this._objects.unshift(i);else n(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,i,r,a=this._activeObject;if(t===a&&\"activeSelection\"===t.type)for(r=a._objects,e=0;e<r.length;e++)i=r[e],n(this._objects,i),this._objects.push(i);else n(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var i,r,a,s,o,u=this._activeObject,l=0;if(t===u&&\"activeSelection\"===t.type)for(o=u._objects,i=0;i<o.length;i++)r=o[i],a=this._objects.indexOf(r),a>0+l&&(s=a-1,n(this._objects,r),this._objects.splice(s,0,r)),l++;else a=this._objects.indexOf(t),0!==a&&(s=this._findNewLowerIndex(t,a,e),n(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,n){var i,r;if(n)for(i=e,r=e-1;r>=0;--r){var a=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(a){i=r;break}}else i=e-1;return i},bringForward:function(t,e){if(!t)return this;var i,r,a,s,o,u=this._activeObject,l=0;if(t===u&&\"activeSelection\"===t.type)for(o=u._objects,i=o.length;i--;)r=o[i],a=this._objects.indexOf(r),a<this._objects.length-1-l&&(s=a+1,n(this._objects,r),this._objects.splice(s,0,r)),l++;else a=this._objects.indexOf(t),a!==this._objects.length-1&&(s=this._findNewUpperIndex(t,a,e),n(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,n){var i,r,a;if(n)for(i=e,r=e+1,a=this._objects.length;r<a;++r){var s=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(s){i=r;break}}else i=e+1;return i},moveTo:function(t,e){return n(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(i.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove(\"lower-canvas\"),i.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute(\"width\",this.width),this.lowerCanvasEl.setAttribute(\"height\",this.height),i.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return\"#<fabric.Canvas (\"+this.complexity()+\"): { objects: \"+this._objects.length+\" }>\"}}),t(i.StaticCanvas.prototype,i.Observable),t(i.StaticCanvas.prototype,i.Collection),t(i.StaticCanvas.prototype,i.DataURLExporter),t(i.StaticCanvas,{EMPTY_JSON:'{\"objects\": [], \"background\": \"white\"}',supports:function(t){var e=u();if(!e||!e.getContext)return null;var n=e.getContext(\"2d\");if(!n)return null;switch(t){case\"setLineDash\":return\"undefined\"!==typeof n.setLineDash;default:return null}}}),i.StaticCanvas.prototype.toJSON=i.StaticCanvas.prototype.toObject,i.isLikelyNode&&(i.StaticCanvas.prototype.createPNGStream=function(){var t=o(this.lowerCanvasEl);return t&&t.createPNGStream()},i.StaticCanvas.prototype.createJPEGStream=function(t){var e=o(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),i.BaseBrush=i.util.createClass({color:\"rgb(0, 0, 0)\",width:1,shadow:null,strokeLineCap:\"round\",strokeLineJoin:\"round\",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas,e=this.shadow,n=t.contextTop,r=t.getZoom();t&&t._isRetinaScaling()&&(r*=i.devicePixelRatio),n.shadowColor=e.color,n.shadowBlur=e.blur*r,n.shadowOffsetX=e.offsetX*r,n.shadowOffsetY=e.offsetY*r}},needsFullRender:function(){var t=new i.Color(this.color);return t.getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor=\"\",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_isOutSideCanvas:function(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}),function(){i.PencilBrush=i.util.createClass(i.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:\"shiftKey\",initialize:function(t){this.canvas=t,this._points=[]},needsFullRender:function(){return this.callSuper(\"needsFullRender\")||this._hasStraightLine},_drawSegment:function(t,e,n){var i=e.midPointFrom(n);return t.quadraticCurveTo(e.x,e.y,i.x,i.y),i},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(t))&&this._captureDrawingPath(t)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var n=this._points,i=n.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,n[i-2],n[i-1],!0),r.stroke(),r.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new i.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(t){var e=new i.Point(t.x,t.y);return this._addPoint(e)},_render:function(t){var e,n,r=this._points[0],a=this._points[1];if(t=t||this.canvas.contextTop,this._saveAndTransform(t),t.beginPath(),2===this._points.length&&r.x===a.x&&r.y===a.y){var s=this.width/1e3;r=new i.Point(r.x,r.y),a=new i.Point(a.x,a.y),r.x-=s,a.x+=s}for(t.moveTo(r.x,r.y),e=1,n=this._points.length;e<n;e++)this._drawSegment(t,r,a),r=this._points[e],a=this._points[e+1];t.lineTo(r.x,r.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=this.width/1e3;return i.util.getSmoothPathFromPoints(t,e)},_isEmptySVGPath:function(t){var e=i.util.joinPath(t);return\"M 0 0 Q 0 0 0 0 L 0 0\"===e},createPath:function(t){var e=new i.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new i.Shadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var n,i,r=this.canvas.getZoom(),a=Math.pow(e/r,2),s=t.length-1,o=t[0],u=[o];for(n=1;n<s-1;n++)i=Math.pow(o.x-t[n].x,2)+Math.pow(o.y-t[n].y,2),i>=a&&(o=t[n],u.push(o));return u.push(t[s]),u},_finalizeAndAddPath:function(){var t=this.canvas.contextTop;t.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(e))this.canvas.requestRenderAll();else{var n=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire(\"before:path:created\",{path:n}),this.canvas.add(n),this.canvas.requestRenderAll(),n.setCoords(),this._resetShadow(),this.canvas.fire(\"path:created\",{path:n})}}})}(),i.CircleBrush=i.util.createClass(i.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,e),n.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,n=this.canvas.contextTop,i=this.points;for(this._saveAndTransform(n),t=0,e=i.length;t<e;t++)this.dot(n,i[t]);n.restore()},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))},onMouseUp:function(){var t,e,n=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var r=[];for(t=0,e=this.points.length;t<e;t++){var a=this.points[t],s=new i.Circle({radius:a.radius,left:a.x,top:a.y,originX:\"center\",originY:\"center\",fill:a.fill});this.shadow&&(s.shadow=new i.Shadow(this.shadow)),r.push(s)}var o=new i.Group(r);o.canvas=this.canvas,this.canvas.fire(\"before:path:created\",{path:o}),this.canvas.add(o),this.canvas.fire(\"path:created\",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=n,this.canvas.requestRenderAll()},addPoint:function(t){var e=new i.Point(t.x,t.y),n=i.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new i.Color(this.color).setAlpha(i.util.getRandomInt(0,100)/100).toRgba();return e.radius=n,e.fill=r,this.points.push(e),e}}),i.SprayBrush=i.util.createClass(i.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.render(this.sprayChunkPoints))},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,r=this.sprayChunks.length;n<r;n++)for(var a=this.sprayChunks[n],s=0,o=a.length;s<o;s++){var u=new i.Rect({width:a[s].width,height:a[s].width,left:a[s].x+1,top:a[s].y+1,originX:\"center\",originY:\"center\",fill:this.color});e.push(u)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new i.Group(e);this.shadow&&l.set(\"shadow\",new i.Shadow(this.shadow)),this.canvas.fire(\"before:path:created\",{path:l}),this.canvas.add(l),this.canvas.fire(\"path:created\",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,n,i,r={};for(n=0,i=t.length;n<i;n++)e=t[n].left+\"\"+t[n].top,r[e]||(r[e]=t[n]);var a=[];for(e in r)a.push(r[e]);return a},render:function(t){var e,n,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),e=0,n=t.length;e<n;e++){var r=t[e];\"undefined\"!==typeof r.opacity&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var t,e,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);n.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,n,r,a,s=this.width/2;for(a=0;a<this.density;a++){e=i.util.getRandomInt(t.x-s,t.x+s),n=i.util.getRandomInt(t.y-s,t.y+s),r=this.dotWidthVariance?i.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var o=new i.Point(e,n);o.width=r,this.randomOpacity&&(o.opacity=i.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(o)}this.sprayChunks.push(this.sprayChunkPoints)}}),i.PatternBrush=i.util.createClass(i.PencilBrush,{getPatternSrc:function(){var t=20,e=5,n=i.util.createCanvasElement(),r=n.getContext(\"2d\");return n.width=n.height=t+e,r.fillStyle=this.color,r.beginPath(),r.arc(t/2,t/2,t/2,0,2*Math.PI,!1),r.closePath(),r.fill(),n},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace(\"this.color\",'\"'+this.color+'\"')},getPattern:function(t){return t.createPattern(this.source||this.getPatternSrc(),\"repeat\")},_setBrushStyles:function(t){this.callSuper(\"_setBrushStyles\",t),t.strokeStyle=this.getPattern(t)},createPath:function(t){var e=this.callSuper(\"createPath\",t),n=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new i.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),e}}),function(){var t=i.util.getPointer,e=i.util.degreesToRadians,n=i.util.isTouchEvent;for(var r in i.Canvas=i.util.createClass(i.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:\"shiftKey\",centeredScaling:!1,centeredRotation:!1,centeredKey:\"altKey\",altActionKey:\"shiftKey\",interactive:!0,selection:!0,selectionKey:\"shiftKey\",altSelectionKey:null,selectionColor:\"rgba(100, 100, 255, 0.3)\",selectionDashArray:[],selectionBorderColor:\"rgba(255, 255, 255, 0.3)\",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:\"move\",moveCursor:\"move\",defaultCursor:\"default\",freeDrawingCursor:\"crosshair\",notAllowedCursor:\"not-allowed\",containerClass:\"canvas-container\",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=i.PencilBrush&&new i.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,n,i=this.getActiveObjects();if(i.length>0&&!this.preserveObjectStacking){e=[],n=[];for(var r=0,a=this._objects.length;r<a;r++)t=this._objects[r],-1===i.indexOf(t)?e.push(t):n.push(t);i.length>1&&(this._activeObject._objects=n),e.push.apply(e,n)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire(\"after:render\"),this},_normalizePointer:function(t,e){var n=t.calcTransformMatrix(),r=i.util.invertTransform(n),a=this.restorePointerVpt(e);return i.util.transformPoint(a,r)},isTargetTransparent:function(t,e,n){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var r=this._normalizePointer(t,{x:e,y:n}),a=Math.max(t.cacheTranslationX+r.x*t.zoomX,0),s=Math.max(t.cacheTranslationY+r.y*t.zoomY,0),o=i.util.isTransparent(t._cacheContext,Math.round(a),Math.round(s),this.targetFindTolerance);return o}var u=this.contextCache,l=t.selectionBackgroundColor,c=this.viewportTransform;t.selectionBackgroundColor=\"\",this.clearContext(u),u.save(),u.transform(c[0],c[1],c[2],c[3],c[4],c[5]),t.render(u),u.restore(),t.selectionBackgroundColor=l;o=i.util.isTransparent(u,e,n,this.targetFindTolerance);return o},_isSelectionKeyPressed:function(t){var e=!1;return e=Array.isArray(this.selectionKey)?!!this.selectionKey.find((function(e){return!0===t[e]})):t[this.selectionKey],e},_shouldClearSelection:function(t,e){var n=this.getActiveObjects(),i=this._activeObject;return!e||e&&i&&n.length>1&&-1===n.indexOf(e)&&i!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&i&&i!==e},_shouldCenterTransform:function(t,e,n){var i;if(t)return\"scale\"===e||\"scaleX\"===e||\"scaleY\"===e||\"resizing\"===e?i=this.centeredScaling||t.centeredScaling:\"rotate\"===e&&(i=this.centeredRotation||t.centeredRotation),i?!n:n},_getOriginFromCorner:function(t,e){var n={x:t.originX,y:t.originY};return\"ml\"===e||\"tl\"===e||\"bl\"===e?n.x=\"right\":\"mr\"!==e&&\"tr\"!==e&&\"br\"!==e||(n.x=\"left\"),\"tl\"===e||\"mt\"===e||\"tr\"===e?n.y=\"bottom\":\"bl\"!==e&&\"mb\"!==e&&\"br\"!==e||(n.y=\"top\"),n},_getActionFromCorner:function(t,e,n,i){if(!e||!t)return\"drag\";var r=i.controls[e];return r.getActionName(n,r,i)},_setupCurrentTransform:function(t,n,r){if(n){var a=this.getPointer(t),s=n.__corner,o=n.controls[s],u=r&&s?o.getActionHandler(t,n,o):i.controlsUtils.dragHandler,l=this._getActionFromCorner(r,s,t,n),c=this._getOriginFromCorner(n,s),h=t[this.centeredKey],f={target:n,action:l,actionHandler:u,corner:s,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:a.x-n.left,offsetY:a.y-n.top,originX:c.x,originY:c.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:e(n.angle),width:n.width*n.scaleX,shiftKey:t.shiftKey,altKey:h,original:i.util.saveObjectTransform(n)};this._shouldCenterTransform(n,l,h)&&(f.originX=\"center\",f.originY=\"center\"),f.original.originX=c.x,f.original.originY=c.y,this._currentTransform=f,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,n=new i.Point(e.ex,e.ey),r=i.util.transformPoint(n,this.viewportTransform),a=new i.Point(e.ex+e.left,e.ey+e.top),s=i.util.transformPoint(a,this.viewportTransform),o=Math.min(r.x,s.x),u=Math.min(r.y,s.y),l=Math.max(r.x,s.x),c=Math.max(r.y,s.y),h=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(o,u,l-o,c-u)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,o+=h,u+=h,l-=h,c-=h,i.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(o,u,l-o,c-u))},findTarget:function(t,e){if(!this.skipTargetFind){var i,r,a=!0,s=this.getPointer(t,a),o=this._activeObject,u=this.getActiveObjects(),l=n(t),c=u.length>1&&!e||1===u.length;if(this.targets=[],c&&o._findTargetCorner(s,l))return o;if(u.length>1&&!e&&o===this._searchPossibleTargets([o],s))return o;if(1===u.length&&o===this._searchPossibleTargets([o],s)){if(!this.preserveObjectStacking)return o;i=o,r=this.targets,this.targets=[]}var h=this._searchPossibleTargets(this._objects,s);return t[this.altSelectionKey]&&h&&i&&h!==i&&(h=i,this.targets=r),h}},_checkTarget:function(t,e,n){if(e&&e.visible&&e.evented&&e.containsPoint(t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;var i=this.isTargetTransparent(e,n.x,n.y);if(!i)return!0}},_searchPossibleTargets:function(t,e){var n,r,a=t.length;while(a--){var s=t[a],o=s.group?this._normalizePointer(s.group,e):e;if(this._checkTarget(o,s,e)){n=t[a],n.subTargetCheck&&n instanceof i.Group&&(r=this._searchPossibleTargets(n._objects,e),r&&this.targets.push(r));break}}return n},restorePointerVpt:function(t){return i.util.transformPoint(t,i.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var i,r=t(e),a=this.upperCanvasEl,s=a.getBoundingClientRect(),o=s.width||0,u=s.height||0;o&&u||(\"top\"in s&&\"bottom\"in s&&(u=Math.abs(s.top-s.bottom)),\"right\"in s&&\"left\"in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,n||(r=this.restorePointerVpt(r));var l=this.getRetinaScaling();return 1!==l&&(r.x/=l,r.y/=l),i=0===o||0===u?{width:1,height:1}:{width:a.width/o,height:a.height/u},{x:r.x*i.width,y:r.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\\s*lower-canvas\\s*/,\"\"),e=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className=\"\":(n=this._createCanvasElement(),this.upperCanvasEl=n),i.util.addClass(n,\"upper-canvas \"+t),this.wrapperEl.appendChild(n),this._copyCanvasStyle(e,n),this._applyCanvasStyle(n),this.contextTop=n.getContext(\"2d\")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute(\"width\",this.width),this.cacheCanvasEl.setAttribute(\"height\",this.height),this.contextCache=this.cacheCanvasEl.getContext(\"2d\")},_initWrapperElement:function(){this.wrapperEl=i.util.wrapElement(this.lowerCanvasEl,\"div\",{class:this.containerClass}),i.util.setStyle(this.wrapperEl,{width:this.width+\"px\",height:this.height+\"px\",position:\"relative\"}),i.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,n=this.height||t.height;i.util.setStyle(t,{position:\"absolute\",width:e+\"px\",height:n+\"px\",left:0,top:0,\"touch-action\":this.allowTouchScrolling?\"manipulation\":\"none\",\"-ms-touch-action\":this.allowTouchScrolling?\"manipulation\":\"none\"}),t.width=e,t.height=n,i.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?\"activeSelection\"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire(\"before:selection:cleared\",{target:t}),this._discardActiveObject(),this.fire(\"selection:cleared\",{target:t}),t.fire(\"deselected\")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper(\"_onObjectRemoved\",t)},_fireSelectionEvents:function(t,e){var n=!1,i=this.getActiveObjects(),r=[],a=[];t.forEach((function(t){-1===i.indexOf(t)&&(n=!0,t.fire(\"deselected\",{e:e,target:t}),a.push(t))})),i.forEach((function(i){-1===t.indexOf(i)&&(n=!0,i.fire(\"selected\",{e:e,target:i}),r.push(i))})),t.length>0&&i.length>0?n&&this.fire(\"selection:updated\",{e:e,selected:r,deselected:a}):i.length>0?this.fire(\"selection:created\",{e:e,selected:r}):t.length>0&&this.fire(\"selection:cleared\",{e:e,deselected:a})},setActiveObject:function(t,e){var n=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(n,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var n=this._activeObject;if(n){if(n.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),n=this.getActiveObject();return e.length&&this.fire(\"before:selection:cleared\",{target:n,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,[\"upperCanvasEl\",\"cacheCanvasEl\"].forEach(function(t){i.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,i.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper(\"clear\")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(t),r=this.callSuper(\"_toObject\",t,e,n);return this._unwindGroupTransformOnObject(t,i),r},_realizeGroupTransformOnObject:function(t){if(t.group&&\"activeSelection\"===t.group.type&&this._activeObject===t.group){var e=[\"angle\",\"flipX\",\"flipY\",\"left\",\"scaleX\",\"scaleY\",\"skewX\",\"skewY\",\"top\"],n={};return e.forEach((function(e){n[e]=t[e]})),i.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),n}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(e);this.callSuper(\"_setSVGObject\",t,e,n),this._unwindGroupTransformOnObject(e,i)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),i.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),i.StaticCanvas)\"prototype\"!==r&&(i.Canvas[r]=i.StaticCanvas[r])}(),function(){var t=i.util.addListener,e=i.util.removeListener,n=3,r=2,a=1,s={passive:!1};function o(t,e){return t.button&&t.button===e-1}i.util.object.extend(i.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(t,\"add\")},_getEventPrefix:function(){return this.enablePointerEvents?\"pointer\":\"mouse\"},addOrRemove:function(t,e){var n=this.upperCanvasEl,r=this._getEventPrefix();t(i.window,\"resize\",this._onResize),t(n,r+\"down\",this._onMouseDown),t(n,r+\"move\",this._onMouseMove,s),t(n,r+\"out\",this._onMouseOut),t(n,r+\"enter\",this._onMouseEnter),t(n,\"wheel\",this._onMouseWheel),t(n,\"contextmenu\",this._onContextMenu),t(n,\"dblclick\",this._onDoubleClick),t(n,\"dragover\",this._onDragOver),t(n,\"dragenter\",this._onDragEnter),t(n,\"dragleave\",this._onDragLeave),t(n,\"drop\",this._onDrop),this.enablePointerEvents||t(n,\"touchstart\",this._onTouchStart,s),\"undefined\"!==typeof eventjs&&e in eventjs&&(eventjs[e](n,\"gesture\",this._onGesture),eventjs[e](n,\"drag\",this._onDrag),eventjs[e](n,\"orientation\",this._onOrientationChange),eventjs[e](n,\"shake\",this._onShake),eventjs[e](n,\"longpress\",this._onLongPress))},removeListeners:function(){this.addOrRemove(e,\"remove\");var t=this._getEventPrefix();e(i.document,t+\"up\",this._onMouseUp),e(i.document,\"touchend\",this._onTouchEnd,s),e(i.document,t+\"move\",this._onMouseMove,s),e(i.document,\"touchmove\",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,\"dragenter\"),this._onDragLeave=this._simpleEventHandler.bind(this,\"dragleave\"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire(\"mouse:out\",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire(\"mouseout\",{e:t});var n=this;this._hoveredTargets.forEach((function(i){n.fire(\"mouse:out\",{target:e,e:t}),i&&e.fire(\"mouseout\",{e:t})})),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach((function(t){t.isEditing&&t.hiddenTextarea.focus()}))},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire(\"mouse:over\",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler(\"dragover\",t);this._fireEnterLeaveEvents(e,t)},_onDrop:function(t){return this._simpleEventHandler(\"drop:before\",t),this._simpleEventHandler(\"drop\",t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"dblclick\"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&(\"touchend\"===t.type&&0===t.touches.length||(!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(n){n.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(n)),this.__onMouseDown(n),this._resetTransformEventData();var r=this.upperCanvasEl,a=this._getEventPrefix();t(i.document,\"touchend\",this._onTouchEnd,s),t(i.document,\"touchmove\",this._onMouseMove,s),e(r,a+\"down\",this._onMouseDown)},_onMouseDown:function(n){this.__onMouseDown(n),this._resetTransformEventData();var r=this.upperCanvasEl,a=this._getEventPrefix();e(r,a+\"move\",this._onMouseMove,s),t(i.document,a+\"up\",this._onMouseUp),t(i.document,a+\"move\",this._onMouseMove,s)},_onTouchEnd:function(n){if(!(n.touches.length>0)){this.__onMouseUp(n),this._resetTransformEventData(),this.mainTouchId=null;var r=this._getEventPrefix();e(i.document,\"touchend\",this._onTouchEnd,s),e(i.document,\"touchmove\",this._onMouseMove,s);var a=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){t(a.upperCanvasEl,r+\"down\",a._onMouseDown),a._willAddMouseDown=0}),400)}},_onMouseUp:function(n){this.__onMouseUp(n),this._resetTransformEventData();var r=this.upperCanvasEl,a=this._getEventPrefix();this._isMainEvent(n)&&(e(i.document,a+\"up\",this._onMouseUp),e(i.document,a+\"move\",this._onMouseMove,s),t(r,a+\"move\",this._onMouseMove,s))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!==!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,s=this._currentTransform,u=this._groupSelector,l=!1,c=!u||0===u.left&&0===u.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,\"up:before\"),o(t,n))this.fireRightClick&&this._handleEvent(t,\"up\",n,c);else{if(o(t,r))return this.fireMiddleClick&&this._handleEvent(t,\"up\",r,c),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(s&&(this._finalizeCurrentTransform(t),l=s.actionPerformed),!c){var h=e===this._activeObject;this._maybeGroupObjects(t),l||(l=this._shouldRender(e)||!h&&e===this._activeObject)}var f,d;if(e){if(f=e._findTargetCorner(this.getPointer(t,!0),i.util.isTouchEvent(t)),e.selectable&&e!==this._activeObject&&\"up\"===e.activeOn)this.setActiveObject(e,t),l=!0;else{var p=e.controls[f],g=p&&p.getMouseUpHandler(t,e,p);g&&(d=this.getPointer(t),g(t,s,d.x,d.y))}e.isMoving=!1}if(s&&(s.target!==e||s.corner!==f)){var v=s.target&&s.target.controls[s.corner],m=v&&v.getMouseUpHandler(t,e,p);d=d||this.getPointer(t),m&&m(t,s,d.x,d.y)}this._setCursorFromEvent(t,e),this._handleEvent(t,\"up\",a,c),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),l?this.requestRenderAll():c||this.renderTop()}}},_simpleEventHandler:function(t,e){var n=this.findTarget(e),i=this.targets,r={e:e,target:n,subTargets:i};if(this.fire(t,r),n&&n.fire(t,r),!i)return n;for(var a=0;a<i.length;a++)i[a].fire(t,r);return n},_handleEvent:function(t,e,n,i){var r=this._target,s=this.targets||[],o={e:t,target:r,subTargets:s,button:n||a,isClick:i||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};\"up\"===e&&(o.currentTarget=this.findTarget(t),o.currentSubTargets=this.targets),this.fire(\"mouse:\"+e,o),r&&r.fire(\"mouse\"+e,o);for(var u=0;u<s.length;u++)s[u].fire(\"mouse\"+e,o)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,n=e.target,i={e:t,target:n,transform:e,action:e.action};n._scaling&&(n._scaling=!1),n.setCoords(),(e.actionPerformed||this.stateful&&n.hasStateChanged())&&this._fire(\"modified\",i)},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,\"down\")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,\"move\")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,\"up\")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"down:before\");var e=this._target;if(o(t,n))this.fireRightClick&&this._handleEvent(t,\"down\",n);else if(o(t,r))this.fireMiddleClick&&this._handleEvent(t,\"down\",r);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var a=this._pointer;this._previousPointer=a;var s=this._shouldRender(e),u=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):u&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),e){var l=e===this._activeObject;e.selectable&&\"down\"===e.activeOn&&this.setActiveObject(e,t);var c=e._findTargetCorner(this.getPointer(t,!0),i.util.isTouchEvent(t));if(e.__corner=c,e===this._activeObject&&(c||!u)){this._setupCurrentTransform(t,e,l);var h=e.controls[c],f=(a=this.getPointer(t),h&&h.getMouseDownHandler(t,e,h));f&&f(t,this._currentTransform,a.x,a.y)}}this._handleEvent(t,\"down\"),(s||u)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire(\"before:transform\",{e:t,transform:e})},__onMouseMove:function(t){var e,n;if(this._handleEvent(t,\"move:before\"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var i=this._groupSelector;i?(n=this._absolutePointer,i.left=n.x-i.ex,i.top=n.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,\"move\"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var n=this._hoveredTarget,i=this._hoveredTargets,r=this.targets,a=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:\"mouseout\",canvasEvtOut:\"mouse:out\",evtIn:\"mouseover\",canvasEvtIn:\"mouse:over\"});for(var s=0;s<a;s++)this.fireSyntheticInOutEvents(r[s],e,{oldTarget:i[s],evtOut:\"mouseout\",evtIn:\"mouseover\"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var n=this._draggedoverTarget,i=this._hoveredTargets,r=this.targets,a=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:\"dragleave\",evtIn:\"dragenter\"});for(var s=0;s<a;s++)this.fireSyntheticInOutEvents(r[s],e,{oldTarget:i[s],evtOut:\"dragleave\",evtIn:\"dragenter\"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,n){var i,r,a,s,o=n.oldTarget,u=o!==t,l=n.canvasEvtIn,c=n.canvasEvtOut;u&&(i={e:e,target:t,previousTarget:o},r={e:e,target:o,nextTarget:t}),s=t&&u,a=o&&u,a&&(c&&this.fire(c,r),o.fire(n.evtOut,r)),s&&(l&&this.fire(l,i),t.fire(n.evtIn,i))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"wheel\"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),n=this._currentTransform;n.reset=!1,n.shiftKey=t.shiftKey,n.altKey=t[this.centeredKey],this._performTransformAction(t,n,e),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,n){var i=n.x,r=n.y,a=e.action,s=!1,o=e.actionHandler;o&&(s=o(t,e,i,r)),\"drag\"===a&&s&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||s},_fire:i.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var n=e.hoverCursor||this.hoverCursor,i=this._activeObject&&\"activeSelection\"===this._activeObject.type?this._activeObject:null,r=(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map((function(t){n=t.hoverCursor||n})),this.setCursor(n))},getCornerCursor:function(t,e,n){var i=e.controls[t];return i.cursorStyleHandler(n,i,e)}})}(),function(){var t=Math.min,e=Math.max;i.util.object.extend(i.Canvas.prototype,{_shouldGroup:function(t,e){var n=this._activeObject;return n&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(n!==e||\"activeSelection\"===n.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var n=this._activeObject;n.__corner||(e!==n||(e=this.findTarget(t,!0),e&&e.selectable))&&(n&&\"activeSelection\"===n.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var n=this._activeObject,i=n._objects.slice(0);n.contains(t)?(n.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===n.size()&&this._setActiveObject(n.item(0),e)):(n.addWithUpdate(t),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(i,e)},_createActiveSelection:function(t,e){var n=this.getActiveObjects(),i=this._createGroup(t);this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents(n,e)},_createGroup:function(t){var e=this._objects,n=e.indexOf(this._activeObject)<e.indexOf(t),r=n?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new i.ActiveSelection(r,{canvas:this})},_groupSelectedObjects:function(t){var e,n=this._collectObjects(t);1===n.length?this.setActiveObject(n[0],t):n.length>1&&(e=new i.ActiveSelection(n.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(n){for(var r,a=[],s=this._groupSelector.ex,o=this._groupSelector.ey,u=s+this._groupSelector.left,l=o+this._groupSelector.top,c=new i.Point(t(s,u),t(o,l)),h=new i.Point(e(s,u),e(o,l)),f=!this.selectionFullyContained,d=s===u&&o===l,p=this._objects.length;p--;)if(r=this._objects[p],r&&r.selectable&&r.visible&&(f&&r.intersectsWithRect(c,h,!0)||r.isContainedWithinRect(c,h,!0)||f&&r.containsPoint(c,null,!0)||f&&r.containsPoint(h,null,!0))&&(a.push(r),d))break;return a.length>1&&(a=a.filter((function(t){return!t.onSelect({e:n})}))),a},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){i.util.object.extend(i.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||\"png\",n=t.quality||1,r=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(r,t);return i.util.toDataURL(a,e,n)},toCanvasElement:function(t,e){t=t||1,e=e||{};var n=(e.width||this.width)*t,r=(e.height||this.height)*t,a=this.getZoom(),s=this.width,o=this.height,u=a*t,l=this.viewportTransform,c=(l[4]-(e.left||0))*t,h=(l[5]-(e.top||0))*t,f=this.interactive,d=[u,0,0,u,c,h],p=this.enableRetinaScaling,g=i.util.createCanvasElement(),v=this.contextTop;return g.width=n,g.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=n,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(g.getContext(\"2d\"),this._objects),this.viewportTransform=l,this.width=s,this.height=o,this.calcViewportBoundaries(),this.interactive=f,this.enableRetinaScaling=p,this.contextTop=v,g}})}(),i.util.object.extend(i.StaticCanvas.prototype,{loadFromJSON:function(t,e,n){if(t){var r=\"string\"===typeof t?JSON.parse(t):i.util.object.clone(t),a=this,s=r.clipPath,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,(function(t){a.clear(),a._setBgOverlay(r,(function(){s?a._enlivenObjects([s],(function(n){a.clipPath=n[0],a.__setupCanvas.call(a,r,t,o,e)})):a.__setupCanvas.call(a,r,t,o,e)}))}),n),this}},__setupCanvas:function(t,e,n,i){var r=this;e.forEach((function(t,e){r.insertAt(t,e)})),this.renderOnAddRemove=n,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),i&&i()},_setBgOverlay:function(t,e){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var i=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&e&&e()};this.__setBgOverlay(\"backgroundImage\",t.backgroundImage,n,i),this.__setBgOverlay(\"overlayImage\",t.overlayImage,n,i),this.__setBgOverlay(\"backgroundColor\",t.background,n,i),this.__setBgOverlay(\"overlayColor\",t.overlay,n,i)}else e&&e()},__setBgOverlay:function(t,e,n,r){var a=this;if(!e)return n[t]=!0,void(r&&r());\"backgroundImage\"===t||\"overlayImage\"===t?i.util.enlivenObjects([e],(function(e){a[t]=e[0],n[t]=!0,r&&r()})):this[\"set\"+i.util.string.capitalize(t,!0)](e,(function(){n[t]=!0,r&&r()}))},_enlivenObjects:function(t,e,n){t&&0!==t.length?i.util.enlivenObjects(t,(function(t){e&&e(t)}),null,n):e&&e([])},_toDataURL:function(t,e){this.clone((function(n){e(n.toDataURL(t))}))},_toDataURLWithMultiplier:function(t,e,n){this.clone((function(i){n(i.toDataURLWithMultiplier(t,e))}))},clone:function(t,e){var n=JSON.stringify(this.toJSON(e));this.cloneWithoutData((function(e){e.loadFromJSON(n,(function(){t&&t(e)}))}))},cloneWithoutData:function(t){var e=i.util.createCanvasElement();e.width=this.width,e.height=this.height;var n=new i.Canvas(e);this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,(function(){n.renderAll(),t&&t(n)})),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):t&&t(n)}}),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,a=e.util.string.capitalize,s=e.util.degreesToRadians,o=!e.isLikelyNode,u=2;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:\"object\",originX:\"left\",originY:\"top\",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:\"rgb(178,204,255)\",borderDashArray:null,cornerColor:\"rgb(178,204,255)\",cornerStrokeColor:null,cornerStyle:\"rect\",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:\"rgb(0,0,0)\",fillRule:\"nonzero\",globalCompositeOperation:\"source-over\",backgroundColor:\"\",selectionBackgroundColor:\"\",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:\"butt\",strokeLineJoin:\"miter\",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:o,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:\"fill\",activeOn:\"down\",stateProperties:\"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform\".split(\" \"),cacheProperties:\"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath\".split(\" \"),colorProperties:\"fill stroke backgroundColor\".split(\" \"),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext(\"2d\"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var n=e.perfLimitSizeTotal,i=t.width,r=t.height,a=e.maxCacheSideLimit,s=e.minCacheSideLimit;if(i<=a&&r<=a&&i*r<=n)return i<s&&(t.width=s),r<s&&(t.height=s),t;var o=i/r,u=e.util.limitDimsByArea(o,n),l=e.util.capValue,c=l(s,u.x,a),h=l(s,u.y,a);return i>c&&(t.zoomX/=i/c,t.width=c,t.capped=!0),r>h&&(t.zoomY/=r/h,t.height=h,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),n=e.x*t.scaleX/this.scaleX,i=e.y*t.scaleY/this.scaleY;return{width:n+u,height:i+u,zoomX:t.scaleX,zoomY:t.scaleY,x:n,y:i}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var n=t._currentTransform.target,i=t._currentTransform.action;if(this===n&&i.slice&&\"scale\"===i.slice(0,5))return!1}var r,a,s=this._cacheCanvas,o=this._limitCacheSize(this._getCacheCanvasDimensions()),u=e.minCacheSideLimit,l=o.width,c=o.height,h=o.zoomX,f=o.zoomY,d=l!==this.cacheWidth||c!==this.cacheHeight,p=this.zoomX!==h||this.zoomY!==f,g=d||p,v=0,m=0,y=!1;if(d){var _=this._cacheCanvas.width,x=this._cacheCanvas.height,b=l>_||c>x,w=(l<.9*_||c<.9*x)&&_>u&&x>u;y=b||w,b&&!o.capped&&(l>u||c>u)&&(v=.1*l,m=.1*c)}return this instanceof e.Text&&this.path&&(g=!0,y=!0,v+=this.getHeightOfLine(0)*this.zoomX,m+=this.getHeightOfLine(0)*this.zoomY),!!g&&(y?(s.width=Math.ceil(l+v),s.height=Math.ceil(c+m)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,s.width,s.height)),r=o.x/2,a=o.y/2,this.cacheTranslationX=Math.round(s.width/2-r)+r,this.cacheTranslationY=Math.round(s.height/2-a)+a,this.cacheWidth=l,this.cacheHeight=c,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,f),this.zoomX=h,this.zoomY=f,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,\"fill\"),this._initGradient(t.stroke,\"stroke\"),this._initPattern(t.fill,\"fill\"),this._initPattern(t.stroke,\"stroke\")},transform:function(t){var e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,n=this.calcTransformMatrix(!e);t.transform(n[0],n[1],n[2],n[3],n[4],n[5])},toObject:function(t){var n=e.Object.NUM_FRACTION_DIGITS,i={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:r(this.left,n),top:r(this.top,n),width:r(this.width,n),height:r(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,n),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,n),scaleX:r(this.scaleX,n),scaleY:r(this.scaleY,n),angle:r(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,n),skewY:r(this.skewY,n)};return this.clipPath&&!this.clipPath.excludeFromExport&&(i.clipPath=this.clipPath.toObject(t),i.clipPath.inverted=this.clipPath.inverted,i.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,i,t),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var n=e.util.getKlass(t.type).prototype,i=n.stateProperties;return i.forEach((function(e){\"left\"!==e&&\"top\"!==e&&(t[e]===n[e]&&delete t[e],Array.isArray(t[e])&&Array.isArray(n[e])&&0===t[e].length&&0===n[e].length&&delete t[e])})),t},toString:function(){return\"#<fabric.\"+a(this.type)+\">\"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var t=e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,n=t.scaleY;if(this.canvas){var i=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();e*=i*r,n*=i*r}return{scaleX:e,scaleY:n}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,n){var i=\"scaleX\"===t||\"scaleY\"===t,r=this[t]!==n,a=!1;return i&&(n=this._constrainScale(n)),\"scaleX\"===t&&n<0?(this.flipX=!this.flipX,n*=-1):\"scaleY\"===t&&n<0?(this.flipY=!this.flipY,n*=-1):\"shadow\"!==t||!n||n instanceof e.Shadow?\"dirty\"===t&&this.group&&this.group.set(\"dirty\",n):n=new e.Shadow(n),this[t]=n,r&&(a=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,a&&this.group.set(\"dirty\",!0)):a&&this.stateProperties.indexOf(t)>-1&&this.group.set(\"dirty\",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:\"cacheProperties\"})),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:\"cacheProperties\"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&\"transparent\"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&\"transparent\"!==this.fill},needsItsOwnCache:function(){return!(\"stroke\"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||\"object\"!==typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t,n){if(t.save(),n.inverted?t.globalCompositeOperation=\"destination-out\":t.globalCompositeOperation=\"destination-in\",n.absolutePositioned){var i=e.util.invertTransform(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},drawObject:function(t,e){var n=this.fill,i=this.stroke;e?(this.fill=\"black\",this.stroke=\"\",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=n,this.stroke=i},_drawClipPath:function(t,e){e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged(\"cacheProperties\")){if(this._cacheCanvas&&this._cacheContext&&!t){var e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){var n=e.stroke;n&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,n.toLive?\"percentage\"===n.gradientUnits||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(t,n):(t.strokeStyle=n.toLive(t,this),this._applyPatternGradientTransform(t,n)):t.strokeStyle=e.stroke)},_setFillStyles:function(t,e){var n=e.fill;n&&(n.toLive?(t.fillStyle=n.toLive(t,this),this._applyPatternGradientTransform(t,e.fill)):t.fillStyle=n)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle=\"transparent\",t.fillStyle=\"#000000\"},_setLineDash:function(t,e){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),t.setLineDash(e))},_renderControls:function(t,n){var i,r,a,o=this.getViewportTransform(),u=this.calcTransformMatrix();n=n||{},r=\"undefined\"!==typeof n.hasBorders?n.hasBorders:this.hasBorders,a=\"undefined\"!==typeof n.hasControls?n.hasControls:this.hasControls,u=e.util.multiplyTransformMatrices(o,u),i=e.util.qrDecompose(u),t.save(),t.translate(i.translateX,i.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(i.angle-=180),t.rotate(s(this.group?i.angle:this.angle)),n.forActiveSelection||this.group?r&&this.drawBordersInGroup(t,i,n):r&&this.drawBorders(t,n),a&&this.drawControls(t,n),t.restore()},_setShadow:function(t){if(this.shadow){var n,i=this.shadow,r=this.canvas,a=r&&r.viewportTransform[0]||1,s=r&&r.viewportTransform[3]||1;n=i.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(a*=e.devicePixelRatio,s*=e.devicePixelRatio),t.shadowColor=i.color,t.shadowBlur=i.blur*e.browserShadowBlurConstant*(a+s)*(n.scaleX+n.scaleY)/4,t.shadowOffsetX=i.offsetX*a*n.scaleX,t.shadowOffsetY=i.offsetY*s*n.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor=\"\",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var n=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return\"percentage\"===e.gradientUnits?t.transform(this.width,0,0,this.height,i,r):t.transform(1,0,0,1,i,r),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:r}},_renderPaintInOrder:function(t){\"stroke\"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._setFillStyles(t,this),\"evenodd\"===this.fillRule?t.fill(\"evenodd\"):t.fill(),t.restore())},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group){var e=this.getObjectScaling();t.scale(1/e.scaleX,1/e.scaleY)}else this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}},_applyPatternForTransformedGradient:function(t,n){var i,r=this._limitCacheSize(this._getCacheCanvasDimensions()),a=e.util.createCanvasElement(),s=this.canvas.getRetinaScaling(),o=r.x/this.scaleX/s,u=r.y/this.scaleY/s;a.width=o,a.height=u,i=a.getContext(\"2d\"),i.beginPath(),i.moveTo(0,0),i.lineTo(o,0),i.lineTo(o,u),i.lineTo(0,u),i.closePath(),i.translate(o/2,u/2),i.scale(r.zoomX/this.scaleX/s,r.zoomY/this.scaleY/s),this._applyPatternGradientTransform(i,n),i.fillStyle=n.toLive(t),i.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(s*this.scaleX/r.zoomX,s*this.scaleY/r.zoomY),t.strokeStyle=i.createPattern(a,\"no-repeat\")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set(\"scaleX\",t.scaleX),this.set(\"scaleY\",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=e.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,n.x+=t.offsetLeft,n.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(n,\"center\",\"center\")},clone:function(t,n){var i=this.toObject(n);this.constructor.fromObject?this.constructor.fromObject(i,t):e.Object._fromObject(\"Object\",i,t)},cloneAsImage:function(t,n){var i=this.toCanvasElement(n);return t&&t(new e.Image(i)),this},toCanvasElement:function(t){t||(t={});var n=e.util,i=n.saveObjectTransform(this),r=this.group,a=this.shadow,s=Math.abs,o=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);delete this.group,t.withoutTransform&&n.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var u,l,c,h,f=e.util.createCanvasElement(),d=this.getBoundingRect(!0,!0),p=this.shadow,g={x:0,y:0};p&&(l=p.blur,u=p.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(s(p.offsetX)+l)*s(u.scaleX),g.y=2*Math.round(s(p.offsetY)+l)*s(u.scaleY)),c=d.width+g.x,h=d.height+g.y,f.width=Math.ceil(c),f.height=Math.ceil(h);var v=new e.StaticCanvas(f,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});\"jpeg\"===t.format&&(v.backgroundColor=\"#fff\"),this.setPositionByOrigin(new e.Point(v.width/2,v.height/2),\"center\",\"center\");var m=this.canvas;v.add(this);var y=v.toCanvasElement(o||1,t);return this.shadow=a,this.set(\"canvas\",m),r&&(this.group=r),this.set(i).setCoords(),v._objects=[],v.dispose(),v=null,y},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||\"png\",t.quality||1)},isType:function(t){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},rotate:function(t){var e=(\"center\"!==this.originX||\"center\"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set(\"angle\",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,n){n=n||this.canvas.getPointer(t);var i=new e.Point(n.x,n.y),r=this._getLeftTopCoords();return this.angle&&(i=e.util.rotatePoint(i,r,s(-this.angle))),{x:i.x-r.x,y:i.y-r.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){e.runningAnimations&&e.runningAnimations.cancelByTarget(this)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),n(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.ENLIVEN_PROPS=[\"clipPath\"],e.Object._fromObject=function(t,n,r,a){var s=e[t];n=i(n,!0),e.util.enlivenPatterns([n.fill,n.stroke],(function(t){\"undefined\"!==typeof t[0]&&(n.fill=t[0]),\"undefined\"!==typeof t[1]&&(n.stroke=t[1]),e.util.enlivenObjectEnlivables(n,n,(function(){var t=a?new s(n[a],n):new s(n);r&&r(t)}))}))},e.Object.__uid=0)}(e),function(){var t=i.util.degreesToRadians,e={left:-.5,center:0,right:.5},n={top:-.5,center:0,bottom:.5};i.util.object.extend(i.Object.prototype,{translateToGivenOrigin:function(t,r,a,s,o){var u,l,c,h=t.x,f=t.y;return\"string\"===typeof r?r=e[r]:r-=.5,\"string\"===typeof s?s=e[s]:s-=.5,u=s-r,\"string\"===typeof a?a=n[a]:a-=.5,\"string\"===typeof o?o=n[o]:o-=.5,l=o-a,(u||l)&&(c=this._getTransformedDimensions(),h=t.x+u*c.x,f=t.y+l*c.y),new i.Point(h,f)},translateToCenterPoint:function(e,n,r){var a=this.translateToGivenOrigin(e,n,r,\"center\",\"center\");return this.angle?i.util.rotatePoint(a,e,t(this.angle)):a},translateToOriginPoint:function(e,n,r){var a=this.translateToGivenOrigin(e,\"center\",\"center\",n,r);return this.angle?i.util.rotatePoint(a,e,t(this.angle)):a},getCenterPoint:function(){var t=new i.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,t,e)},toLocalPoint:function(e,n,r){var a,s,o=this.getCenterPoint();return a=\"undefined\"!==typeof n&&\"undefined\"!==typeof r?this.translateToGivenOrigin(o,\"center\",\"center\",n,r):new i.Point(this.left,this.top),s=new i.Point(e.x,e.y),this.angle&&(s=i.util.rotatePoint(s,o,-t(this.angle))),s.subtractEquals(a)},setPositionByOrigin:function(t,e,n){var i=this.translateToCenterPoint(t,e,n),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set(\"left\",r.x),this.set(\"top\",r.y)},adjustPosition:function(n){var r,a,s=t(this.angle),o=this.getScaledWidth(),u=i.util.cos(s)*o,l=i.util.sin(s)*o;r=\"string\"===typeof this.originX?e[this.originX]:this.originX-.5,a=\"string\"===typeof n?e[n]:n-.5,this.left+=u*(a-r),this.top+=l*(a-r),this.setCoords(),this.originX=n},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX=\"center\",this.originY=\"center\",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),\"left\",\"top\")}})}(),function(){function t(t){return[new i.Point(t.tl.x,t.tl.y),new i.Point(t.tr.x,t.tr.y),new i.Point(t.br.x,t.br.y),new i.Point(t.bl.x,t.bl.y)]}var e=i.util,n=e.degreesToRadians,r=e.multiplyTransformMatrices,a=e.transformPoint;e.object.extend(i.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(e,n){return t(this._getCoords(e,n))},intersectsWithRect:function(t,e,n,r){var a=this.getCoords(n,r),s=i.Intersection.intersectPolygonRectangle(a,t,e);return\"Intersection\"===s.status},intersectsWithObject:function(t,e,n){var r=i.Intersection.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n));return\"Intersection\"===r.status||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)},isContainedWithinObject:function(t,e,n){for(var i=this.getCoords(e,n),r=e?t.aCoords:t.lineCoords,a=0,s=t._getImageLines(r);a<4;a++)if(!t.containsPoint(i[a],s))return!1;return!0},isContainedWithinRect:function(t,e,n,i){var r=this.getBoundingRect(n,i);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,n,i){var r=this._getCoords(n,i),a=(e=e||this._getImageLines(r),this._findCrossPoints(t,e));return 0!==a&&a%2===1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br,i=this.getCoords(!0,t);return!!i.some((function(t){return t.x<=n.x&&t.x>=e.x&&t.y<=n.y&&t.y>=e.y}))||(!!this.intersectsWithRect(e,n,!0,t)||this._containsCenterOfCanvas(e,n,t))},_containsCenterOfCanvas:function(t,e,n){var i={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(i,null,!0,n)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;if(this.intersectsWithRect(e,n,!0,t))return!0;var i=this.getCoords(!0,t).every((function(t){return(t.x>=n.x||t.x<=e.x)&&(t.y>=n.y||t.y<=e.y)}));return i&&this._containsCenterOfCanvas(e,n,t)},_getImageLines:function(t){var e={topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}};return e},_findCrossPoints:function(t,e){var n,i,r,a,s,o,u=0;for(var l in e)if(o=e[l],!(o.o.y<t.y&&o.d.y<t.y)&&!(o.o.y>=t.y&&o.d.y>=t.y)&&(o.o.x===o.d.x&&o.o.x>=t.x?s=o.o.x:(n=0,i=(o.d.y-o.o.y)/(o.d.x-o.o.x),r=t.y-n*t.x,a=o.o.y-i*o.o.x,s=-(r-a)/(n-i)),s>=t.x&&(u+=1),2===u))break;return u},getBoundingRect:function(t,n){var i=this.getCoords(t,n);return e.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set(\"scaleX\",t),this._set(\"scaleY\",t),this.setCoords()},scaleToWidth:function(t,e){var n=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/n)},scaleToHeight:function(t,e){var n=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/n)},calcLineCoords:function(){var t=this.getViewportTransform(),i=this.padding,r=n(this.angle),s=e.cos(r),o=e.sin(r),u=s*i,l=o*i,c=u+l,h=u-l,f=this.calcACoords(),d={tl:a(f.tl,t),tr:a(f.tr,t),bl:a(f.bl,t),br:a(f.br,t)};return i&&(d.tl.x-=h,d.tl.y-=c,d.tr.x+=c,d.tr.y-=h,d.bl.x-=c,d.bl.y+=h,d.br.x+=h,d.br.y+=c),d},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),n=this.getViewportTransform(),i=r(n,e),a=r(i,t),s=(a=r(a,[1/n[0],0,0,1/n[3],0,0]),this._calculateCurrentDimensions()),o={};return this.forEachControl((function(t,e,n){o[e]=t.positionHandler(s,a,n)})),o},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),n=r(e,t),i=this._getTransformedDimensions(),s=i.x/2,o=i.y/2;return{tl:a({x:-s,y:-o},n),tr:a({x:s,y:-o},n),bl:a({x:-s,y:o},n),br:a({x:s,y:o},n)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e=\"_\",n=\"\";return!t&&this.group&&(n=this.group.transformMatrixKey(t)+e),n+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var n=this.transformMatrixKey(t),i=this.matrixCache||(this.matrixCache={});return i.key===n?i.value:(this.group&&(e=r(this.group.calcTransformMatrix(!1),e)),i.key=n,i.value=e,e)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===t)return n.value;var i=this._calcTranslateMatrix(),r={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=t,n.value=e.composeMatrix(r),n.value},_getNonTransformedDimensions:function(){var t=this.strokeWidth,e=this.width+t,n=this.height+t;return{x:e,y:n}},_getTransformedDimensions:function(t,n){\"undefined\"===typeof t&&(t=this.skewX),\"undefined\"===typeof n&&(n=this.skewY);var i,r,a,s=0===t&&0===n;if(this.strokeUniform?(r=this.width,a=this.height):(i=this._getNonTransformedDimensions(),r=i.x,a=i.y),s)return this._finalizeDimensions(r*this.scaleX,a*this.scaleY);var o=e.sizeAfterTransform(r,a,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:n});return this._finalizeDimensions(o.x,o.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions(),n=a(e,t,!0);return n.scalarAdd(2*this.padding)}})}(),i.util.object.extend(i.Object.prototype,{sendToBack:function(){return this.group?i.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?i.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?i.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?i.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&\"activeSelection\"!==this.group.type?i.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+\": url(#SVGID_\"+e.id+\"); \";var n=new i.Color(e),r=t+\": \"+n.toRgb()+\"; \",a=n.getAlpha();return 1!==a&&(r+=t+\"-opacity: \"+a.toString()+\"; \"),r}return t+\": none; \"}var e=i.util.toFixed;i.util.object.extend(i.Object.prototype,{getSvgStyles:function(e){var n=this.fillRule?this.fillRule:\"nonzero\",i=this.strokeWidth?this.strokeWidth:\"0\",r=this.strokeDashArray?this.strokeDashArray.join(\" \"):\"none\",a=this.strokeDashOffset?this.strokeDashOffset:\"0\",s=this.strokeLineCap?this.strokeLineCap:\"butt\",o=this.strokeLineJoin?this.strokeLineJoin:\"miter\",u=this.strokeMiterLimit?this.strokeMiterLimit:\"4\",l=\"undefined\"!==typeof this.opacity?this.opacity:\"1\",c=this.visible?\"\":\" visibility: hidden;\",h=e?\"\":this.getSvgFilter(),f=t(\"fill\",this.fill),d=t(\"stroke\",this.stroke);return[d,\"stroke-width: \",i,\"; \",\"stroke-dasharray: \",r,\"; \",\"stroke-linecap: \",s,\"; \",\"stroke-dashoffset: \",a,\"; \",\"stroke-linejoin: \",o,\"; \",\"stroke-miterlimit: \",u,\"; \",f,\"fill-rule: \",n,\"; \",\"opacity: \",l,\";\",h,c].join(\"\")},getSvgSpanStyles:function(e,n){var i=\"; \",r=e.fontFamily?\"font-family: \"+(-1===e.fontFamily.indexOf(\"'\")&&-1===e.fontFamily.indexOf('\"')?\"'\"+e.fontFamily+\"'\":e.fontFamily)+i:\"\",a=e.strokeWidth?\"stroke-width: \"+e.strokeWidth+i:\"\",s=(r=r,e.fontSize?\"font-size: \"+e.fontSize+\"px\"+i:\"\"),o=e.fontStyle?\"font-style: \"+e.fontStyle+i:\"\",u=e.fontWeight?\"font-weight: \"+e.fontWeight+i:\"\",l=e.fill?t(\"fill\",e.fill):\"\",c=e.stroke?t(\"stroke\",e.stroke):\"\",h=this.getSvgTextDecoration(e),f=e.deltaY?\"baseline-shift: \"+-e.deltaY+\"; \":\"\";return h&&(h=\"text-decoration: \"+h+i),[c,a,r,s,o,u,h,l,f,n?\"white-space: pre; \":\"\"].join(\"\")},getSvgTextDecoration:function(t){return[\"overline\",\"underline\",\"line-through\"].filter((function(e){return t[e.replace(\"-\",\"\")]})).join(\" \")},getSvgFilter:function(){return this.shadow?\"filter: url(#SVGID_\"+this.shadow.id+\");\":\"\"},getSvgCommons:function(){return[this.id?'id=\"'+this.id+'\" ':\"\",this.clipPath?'clip-path=\"url(#'+this.clipPath.clipPathId+')\" ':\"\"].join(\"\")},getSvgTransform:function(t,e){var n=t?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform=\"'+i.util.matrixToSVG(n);return r+(e||\"\")+'\" '},_setSVGBg:function(t){if(this.backgroundColor){var n=i.Object.NUM_FRACTION_DIGITS;t.push(\"\\t\\t<rect \",this._getFillAttributes(this.backgroundColor),' x=\"',e(-this.width/2,n),'\" y=\"',e(-this.height/2,n),'\" width=\"',e(this.width,n),'\" height=\"',e(this.height,n),'\"></rect>\\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return\"\\t\"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){e=e||{};var n=e.reviver,i=e.additionalTransform||\"\",r=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(\"\"),a=t.indexOf(\"COMMON_PARTS\");return t[a]=r,n?n(t.join(\"\")):t.join(\"\")},_createBaseSVGMarkup:function(t,e){e=e||{};var n,r,a=e.noStyle,s=e.reviver,o=a?\"\":'style=\"'+this.getSvgStyles()+'\" ',u=e.withShadow?'style=\"'+this.getSvgFilter()+'\" ':\"\",l=this.clipPath,c=this.strokeUniform?'vector-effect=\"non-scaling-stroke\" ':\"\",h=l&&l.absolutePositioned,f=this.stroke,d=this.fill,p=this.shadow,g=[],v=t.indexOf(\"COMMON_PARTS\"),m=e.additionalTransform;return l&&(l.clipPathId=\"CLIPPATH_\"+i.Object.__uid++,r='<clipPath id=\"'+l.clipPathId+'\" >\\n'+l.toClipPathSVG(s)+\"</clipPath>\\n\"),h&&g.push(\"<g \",u,this.getSvgCommons(),\" >\\n\"),g.push(\"<g \",this.getSvgTransform(!1),h?\"\":u+this.getSvgCommons(),\" >\\n\"),n=[o,c,a?\"\":this.addPaintOrder(),\" \",m?'transform=\"'+m+'\" ':\"\"].join(\"\"),t[v]=n,d&&d.toLive&&g.push(d.toSVG(this)),f&&f.toLive&&g.push(f.toSVG(this)),p&&g.push(p.toSVG(this)),l&&g.push(r),g.push(t.join(\"\")),g.push(\"</g>\\n\"),h&&g.push(\"</g>\\n\"),s?s(g.join(\"\")):g.join(\"\")},addPaintOrder:function(){return\"fill\"!==this.paintFirst?' paint-order=\"'+this.paintFirst+'\" ':\"\"}})}(),function(){var t=i.util.object.extend,e=\"stateProperties\";function n(e,n,i){var r={},a=!0;i.forEach((function(t){r[t]=e[t]})),t(e[n],r,a)}function r(t,e,n){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var i=0,a=t.length;i<a;i++)if(!r(t[i],e[i]))return!1;return!0}if(t&&\"object\"===typeof t){var s,o=Object.keys(t);if(!e||\"object\"!==typeof e||!n&&o.length!==Object.keys(e).length)return!1;for(i=0,a=o.length;i<a;i++)if(s=o[i],\"canvas\"!==s&&\"group\"!==s&&!r(t[s],e[s]))return!1;return!0}}i.util.object.extend(i.Object.prototype,{hasStateChanged:function(t){t=t||e;var n=\"_\"+t;return Object.keys(this[n]).length<this[t].length||!r(this[n],this,!0)},saveState:function(t){var i=t&&t.propertySet||e,r=\"_\"+i;return this[r]?(n(this,r,this[i]),t&&t.stateProperties&&n(this,r,t.stateProperties),this):this.setupState(t)},setupState:function(t){t=t||{};var n=t.propertySet||e;return t.propertySet=n,this[\"_\"+n]={},this.saveState(t),this}})}(),function(){var t=i.util.degreesToRadians;i.util.object.extend(i.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var n,i,r,a=t.x,s=t.y,o=Object.keys(this.oCoords),u=o.length-1;for(this.__corner=0;u>=0;u--)if(r=o[u],this.isControlVisible(r)&&(i=this._getImageLines(e?this.oCoords[r].touchCorner:this.oCoords[r].corner),n=this._findCrossPoints({x:a,y:s},i),0!==n&&n%2===1))return this.__corner=r,r;return!1},forEachControl:function(t){for(var e in this.controls)t(this.controls[e],e,this)},_setCornerCoords:function(){var t=this.oCoords;for(var e in t){var n=this.controls[e];t[e].corner=n.calcCornerCoords(this.angle,this.cornerSize,t[e].x,t[e].y,!1),t[e].touchCorner=n.calcCornerCoords(this.angle,this.touchCornerSize,t[e].x,t[e].y,!0)}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var n=this.getCenterPoint(),i=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return e.translate(n.x,n.y),e.scale(1/r[0],1/r[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-i.x/2,-i.y/2,i.x,i.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var n=this._calculateCurrentDimensions(),i=this.borderScaleFactor,r=n.x+i,a=n.y+i,s=\"undefined\"!==typeof e.hasControls?e.hasControls:this.hasControls,o=!1;return t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray),t.strokeRect(-r/2,-a/2,r,a),s&&(t.beginPath(),this.forEachControl((function(e,n,i){e.withConnection&&e.getVisibility(i,n)&&(o=!0,t.moveTo(e.x*r,e.y*a),t.lineTo(e.x*r+e.offsetX,e.y*a+e.offsetY))})),o&&t.stroke()),t.restore(),this},drawBordersInGroup:function(t,e,n){n=n||{};var r=i.util.sizeAfterTransform(this.width,this.height,e),a=this.strokeWidth,s=this.strokeUniform,o=this.borderScaleFactor,u=r.x+a*(s?this.canvas.getZoom():e.scaleX)+o,l=r.y+a*(s?this.canvas.getZoom():e.scaleY)+o;return t.save(),this._setLineDash(t,n.borderDashArray||this.borderDashArray),t.strokeStyle=n.borderColor||this.borderColor,t.strokeRect(-u/2,-l/2,u,l),t.restore(),this},drawControls:function(t,e){e=e||{},t.save();var n,r,a=this.canvas.getRetinaScaling();return t.setTransform(a,0,0,a,0,0),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl((function(a,s,o){r=o.oCoords[s],a.getVisibility(o,s)&&(n&&(r=i.util.transformPoint(r,n)),a.render(t,r.x,r.y,e,o))})),t.restore(),this},isControlVisible:function(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)},setControlVisible:function(t,e){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},onDeselect:function(){},onSelect:function(){}})}(),i.util.object.extend(i.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var n=function(){},r=e.onComplete||n,a=e.onChange||n,s=this;return i.util.animate({target:this,startValue:t.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(e){t.set(\"left\",e),s.requestRenderAll(),a()},onComplete:function(){t.setCoords(),r()}})},fxCenterObjectV:function(t,e){e=e||{};var n=function(){},r=e.onComplete||n,a=e.onChange||n,s=this;return i.util.animate({target:this,startValue:t.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(e){t.set(\"top\",e),s.requestRenderAll(),a()},onComplete:function(){t.setCoords(),r()}})},fxRemove:function(t,e){e=e||{};var n=function(){},r=e.onComplete||n,a=e.onChange||n,s=this;return i.util.animate({target:this,startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set(\"opacity\",e),s.requestRenderAll(),a()},onComplete:function(){s.remove(t),r()}})}}),i.util.object.extend(i.Object.prototype,{animate:function(){if(arguments[0]&&\"object\"===typeof arguments[0]){var t,e,n=[],i=[];for(t in arguments[0])n.push(t);for(var r=0,a=n.length;r<a;r++)t=n[r],e=r!==a-1,i.push(this._animate(t,arguments[0][t],arguments[1],e));return i}return this._animate.apply(this,arguments)},_animate:function(t,e,n,r){var a,s=this;e=e.toString(),n=n?i.util.object.clone(n):{},~t.indexOf(\".\")&&(a=t.split(\".\"));var o=s.colorProperties.indexOf(t)>-1||a&&s.colorProperties.indexOf(a[1])>-1,u=a?this.get(a[0])[a[1]]:this.get(t);\"from\"in n||(n.from=u),o||(e=~e.indexOf(\"=\")?u+parseFloat(e.replace(\"=\",\"\")):parseFloat(e));var l={target:this,startValue:n.from,endValue:e,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(t,e,i){return n.abort.call(s,t,e,i)},onChange:function(e,i,o){a?s[a[0]][a[1]]=e:s.set(t,e),r||n.onChange&&n.onChange(e,i,o)},onComplete:function(t,e,i){r||(s.setCoords(),n.onComplete&&n.onComplete(t,e,i))}};return o?i.util.animateColor(l.startValue,l.endValue,l.duration,l):i.util.animate(l)}}),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};function a(t,e){var n=t.origin,i=t.axis1,r=t.axis2,a=t.dimension,s=e.nearest,o=e.center,u=e.farthest;return function(){switch(this.get(n)){case s:return Math.min(this.get(i),this.get(r));case o:return Math.min(this.get(i),this.get(r))+.5*this.get(a);case u:return Math.max(this.get(i),this.get(r))}}}e.Line?e.warn(\"fabric.Line is already defined\"):(e.Line=e.util.createClass(e.Object,{type:\"line\",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat(\"x1\",\"x2\",\"y1\",\"y2\"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper(\"initialize\",e),this.set(\"x1\",t[0]),this.set(\"y1\",t[1]),this.set(\"x2\",t[2]),this.set(\"y2\",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left=\"left\"in t?t.left:this._getLeftToOriginX(),this.top=\"top\"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper(\"_set\",t,e),\"undefined\"!==typeof r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:\"originX\",axis1:\"x1\",axis2:\"x2\",dimension:\"width\"},{nearest:\"left\",center:\"center\",farthest:\"right\"}),_getTopToOriginY:a({origin:\"originY\",axis1:\"y1\",axis2:\"y2\",dimension:\"height\"},{nearest:\"top\",center:\"center\",farthest:\"bottom\"}),_render:function(t){t.beginPath();var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return n(this.callSuper(\"toObject\",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper(\"_getNonTransformedDimensions\");return\"butt\"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,n=t*this.width*.5,i=e*this.height*.5,r=t*this.width*-.5,a=e*this.height*-.5;return{x1:n,x2:r,y1:i,y2:a}},_toSVG:function(){var t=this.calcLinePoints();return[\"<line \",\"COMMON_PARTS\",'x1=\"',t.x1,'\" y1=\"',t.y1,'\" x2=\"',t.x2,'\" y2=\"',t.y2,'\" />\\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(\"x1 y1 x2 y2\".split(\" \")),e.Line.fromElement=function(t,i,r){r=r||{};var a=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),s=[a.x1||0,a.y1||0,a.x2||0,a.y2||0];i(new e.Line(s,n(a,r)))},e.Line.fromObject=function(t,n){function r(t){delete t.points,n&&n(t)}var a=i(t,!0);a.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject(\"Line\",a,r,\"points\")})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.degreesToRadians;function i(t){return\"radius\"in t&&t.radius>=0}e.Circle?e.warn(\"fabric.Circle is already defined.\"):(e.Circle=e.util.createClass(e.Object,{type:\"circle\",radius:0,startAngle:0,endAngle:360,cacheProperties:e.Object.prototype.cacheProperties.concat(\"radius\",\"startAngle\",\"endAngle\"),_set:function(t,e){return this.callSuper(\"_set\",t,e),\"radius\"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper(\"toObject\",[\"radius\",\"startAngle\",\"endAngle\"].concat(t))},_toSVG:function(){var t,i=0,r=0,a=(this.endAngle-this.startAngle)%360;if(0===a)t=[\"<circle \",\"COMMON_PARTS\",'cx=\"'+i+'\" cy=\"'+r+'\" ','r=\"',this.radius,'\" />\\n'];else{var s=n(this.startAngle),o=n(this.endAngle),u=this.radius,l=e.util.cos(s)*u,c=e.util.sin(s)*u,h=e.util.cos(o)*u,f=e.util.sin(o)*u,d=a>180?\"1\":\"0\";t=['<path d=\"M '+l+\" \"+c,\" A \"+u+\" \"+u,\" 0 \",+d+\" 1\",\" \"+h+\" \"+f,'\" ',\"COMMON_PARTS\",\" />\\n\"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,n(this.startAngle),n(this.endAngle),!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get(\"radius\")*this.get(\"scaleX\")},getRadiusY:function(){return this.get(\"radius\")*this.get(\"scaleY\")},setRadius:function(t){return this.radius=t,this.set(\"width\",2*t).set(\"height\",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(\"cx cy r\".split(\" \")),e.Circle.fromElement=function(t,n){var r=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!i(r))throw new Error(\"value of `r` attribute is required and can not be negative\");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,n(new e.Circle(r))},e.Circle.fromObject=function(t,n){e.Object._fromObject(\"Circle\",t,n)})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={});e.Triangle?e.warn(\"fabric.Triangle is already defined\"):(e.Triangle=e.util.createClass(e.Object,{type:\"triangle\",width:100,height:100,_render:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)},_toSVG:function(){var t=this.width/2,e=this.height/2,n=[-t+\" \"+e,\"0 \"+-e,t+\" \"+e].join(\",\");return[\"<polygon \",\"COMMON_PARTS\",'points=\"',n,'\" />']}}),e.Triangle.fromObject=function(t,n){return e.Object._fromObject(\"Triangle\",t,n)})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=2*Math.PI;e.Ellipse?e.warn(\"fabric.Ellipse is already defined.\"):(e.Ellipse=e.util.createClass(e.Object,{type:\"ellipse\",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat(\"rx\",\"ry\"),initialize:function(t){this.callSuper(\"initialize\",t),this.set(\"rx\",t&&t.rx||0),this.set(\"ry\",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper(\"_set\",t,e),t){case\"rx\":this.rx=e,this.set(\"width\",2*e);break;case\"ry\":this.ry=e,this.set(\"height\",2*e);break}return this},getRx:function(){return this.get(\"rx\")*this.get(\"scaleX\")},getRy:function(){return this.get(\"ry\")*this.get(\"scaleY\")},toObject:function(t){return this.callSuper(\"toObject\",[\"rx\",\"ry\"].concat(t))},_toSVG:function(){return[\"<ellipse \",\"COMMON_PARTS\",'cx=\"0\" cy=\"0\" ','rx=\"',this.rx,'\" ry=\"',this.ry,'\" />\\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,n,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(\"cx cy rx ry\".split(\" \")),e.Ellipse.fromElement=function(t,n){var i=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,n(new e.Ellipse(i))},e.Ellipse.fromObject=function(t,n){e.Object._fromObject(\"Ellipse\",t,n)})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Rect?e.warn(\"fabric.Rect is already defined\"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat(\"rx\",\"ry\"),type:\"rect\",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat(\"rx\",\"ry\"),initialize:function(t){this.callSuper(\"initialize\",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,r=this.height,a=-this.width/2,s=-this.height/2,o=0!==e||0!==n,u=.4477152502;t.beginPath(),t.moveTo(a+e,s),t.lineTo(a+i-e,s),o&&t.bezierCurveTo(a+i-u*e,s,a+i,s+u*n,a+i,s+n),t.lineTo(a+i,s+r-n),o&&t.bezierCurveTo(a+i,s+r-u*n,a+i-u*e,s+r,a+i-e,s+r),t.lineTo(a+e,s+r),o&&t.bezierCurveTo(a+u*e,s+r,a,s+r-u*n,a,s+r-n),t.lineTo(a,s+n),o&&t.bezierCurveTo(a,s+u*n,a+u*e,s,a+e,s),t.closePath(),this._renderPaintInOrder(t)},toObject:function(t){return this.callSuper(\"toObject\",[\"rx\",\"ry\"].concat(t))},_toSVG:function(){var t=-this.width/2,e=-this.height/2;return[\"<rect \",\"COMMON_PARTS\",'x=\"',t,'\" y=\"',e,'\" rx=\"',this.rx,'\" ry=\"',this.ry,'\" width=\"',this.width,'\" height=\"',this.height,'\" />\\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(\"x y rx ry width height\".split(\" \")),e.Rect.fromElement=function(t,i,r){if(!t)return i(null);r=r||{};var a=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);a.left=a.left||0,a.top=a.top||0,a.height=a.height||0,a.width=a.width||0;var s=new e.Rect(n(r?e.util.object.clone(r):{},a));s.visible=s.visible&&s.width>0&&s.height>0,i(s)},e.Rect.fromObject=function(t,n){return e.Object._fromObject(\"Rect\",t,n)})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.min,r=e.util.array.max,a=e.util.toFixed,s=e.util.projectStrokeOnPoints;e.Polyline?e.warn(\"fabric.Polyline is already defined\"):(e.Polyline=e.util.createClass(e.Object,{type:\"polyline\",points:null,exactBoundingBox:!1,cacheProperties:e.Object.prototype.cacheProperties.concat(\"points\"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper(\"initialize\",e),this._setPositionDimensions(e)},_projectStrokeOnPoints:function(){return s(this.points,this,!0)},_setPositionDimensions:function(t){var e,n=this._calcDimensions(t),i=this.exactBoundingBox?this.strokeWidth:0;this.width=n.width-i,this.height=n.height-i,t.fromSVG||(e=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2+i/2,y:n.top-this.strokeWidth/2+i/2},\"left\",\"top\",this.originX,this.originY)),\"undefined\"===typeof t.left&&(this.left=t.fromSVG?n.left:e.x),\"undefined\"===typeof t.top&&(this.top=t.fromSVG?n.top:e.y),this.pathOffset={x:n.left+this.width/2+i/2,y:n.top+this.height/2+i/2}},_calcDimensions:function(){var t=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,e=i(t,\"x\")||0,n=i(t,\"y\")||0,a=r(t,\"x\")||0,s=r(t,\"y\")||0,o=a-e,u=s-n;return{left:e,top:n,width:o,height:u}},toObject:function(t){return n(this.callSuper(\"toObject\",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],n=this.pathOffset.x,i=this.pathOffset.y,r=e.Object.NUM_FRACTION_DIGITS,s=0,o=this.points.length;s<o;s++)t.push(a(this.points[s].x-n,r),\",\",a(this.points[s].y-i,r),\" \");return[\"<\"+this.type+\" \",\"COMMON_PARTS\",'points=\"',t.join(\"\"),'\" />\\n']},commonRender:function(t){var e,n=this.points.length,i=this.pathOffset.x,r=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-r);for(var a=0;a<n;a++)e=this.points[a],t.lineTo(e.x-i,e.y-r);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},complexity:function(){return this.get(\"points\").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return function(i,r,a){if(!i)return r(null);a||(a={});var s=e.parsePointsAttribute(i.getAttribute(\"points\")),o=e.parseAttributes(i,e[t].ATTRIBUTE_NAMES);o.fromSVG=!0,r(new e[t](s,n(o,a)))}},e.Polyline.fromElement=e.Polyline.fromElementGenerator(\"Polyline\"),e.Polyline.fromObject=function(t,n){return e.Object._fromObject(\"Polyline\",t,n,\"points\")})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.projectStrokeOnPoints;e.Polygon?e.warn(\"fabric.Polygon is already defined\"):(e.Polygon=e.util.createClass(e.Polyline,{type:\"polygon\",_projectStrokeOnPoints:function(){return n(this.points,this)},_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator(\"Polygon\"),e.Polygon.fromObject=function(t,n){e.Object._fromObject(\"Polygon\",t,n,\"points\")})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max,r=e.util.object.extend,a=e.util.object.clone,s=e.util.toFixed;e.Path?e.warn(\"fabric.Path is already defined\"):(e.Path=e.util.createClass(e.Object,{type:\"path\",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat(\"path\",\"fillRule\"),stateProperties:e.Object.prototype.stateProperties.concat(\"path\"),initialize:function(t,e){e=a(e||{}),delete e.path,this.callSuper(\"initialize\",e),this._setPath(t||[],e)},_setPath:function(t,n){this.path=e.util.makePathSimpler(Array.isArray(t)?t:e.util.parsePath(t)),e.Polyline.prototype._setPositionDimensions.call(this,n||{})},_renderPathCommands:function(t){var e,n=0,i=0,r=0,a=0,s=0,o=0,u=-this.pathOffset.x,l=-this.pathOffset.y;t.beginPath();for(var c=0,h=this.path.length;c<h;++c)switch(e=this.path[c],e[0]){case\"L\":r=e[1],a=e[2],t.lineTo(r+u,a+l);break;case\"M\":r=e[1],a=e[2],n=r,i=a,t.moveTo(r+u,a+l);break;case\"C\":r=e[5],a=e[6],s=e[3],o=e[4],t.bezierCurveTo(e[1]+u,e[2]+l,s+u,o+l,r+u,a+l);break;case\"Q\":t.quadraticCurveTo(e[1]+u,e[2]+l,e[3]+u,e[4]+l),r=e[3],a=e[4],s=e[1],o=e[2];break;case\"z\":case\"Z\":r=n,a=i,t.closePath();break}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return\"#<fabric.Path (\"+this.complexity()+'): { \"top\": '+this.top+', \"left\": '+this.left+\" }>\"},toObject:function(t){return r(this.callSuper(\"toObject\",t),{path:this.path.map((function(t){return t.slice()}))})},toDatalessObject:function(t){var e=this.toObject([\"sourcePath\"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){var t=e.util.joinPath(this.path);return[\"<path \",\"COMMON_PARTS\",'d=\"',t,'\" stroke-linecap=\"round\" ',\"/>\\n\"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return\" translate(\"+s(-this.pathOffset.x,t)+\", \"+s(-this.pathOffset.y,t)+\")\"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return\"\\t\"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var t,r,a=[],s=[],o=0,u=0,l=0,c=0,h=0,f=this.path.length;h<f;++h){switch(t=this.path[h],t[0]){case\"L\":l=t[1],c=t[2],r=[];break;case\"M\":l=t[1],c=t[2],o=l,u=c,r=[];break;case\"C\":r=e.util.getBoundsOfCurve(l,c,t[1],t[2],t[3],t[4],t[5],t[6]),l=t[5],c=t[6];break;case\"Q\":r=e.util.getBoundsOfCurve(l,c,t[1],t[2],t[1],t[2],t[3],t[4]),l=t[3],c=t[4];break;case\"z\":case\"Z\":l=o,c=u;break}r.forEach((function(t){a.push(t.x),s.push(t.y)})),a.push(l),s.push(c)}var d=n(a)||0,p=n(s)||0,g=i(a)||0,v=i(s)||0,m=g-d,y=v-p;return{left:d,top:p,width:m,height:y}}}),e.Path.fromObject=function(t,n){if(\"string\"===typeof t.sourcePath){var i=t.sourcePath;e.loadSVGFromURL(i,(function(e){var i=e[0];i.setOptions(t),n&&n(i)}))}else e.Object._fromObject(\"Path\",t,n,\"path\")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat([\"d\"]),e.Path.fromElement=function(t,n,i){var a=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);a.fromSVG=!0,n(new e.Path(a.d,r(a,i)))})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:\"group\",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,n){e=e||{},this._objects=[],n&&this.callSuper(\"initialize\",e),this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;if(n)this._updateObjectsACoords();else{var r=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete e.centerPoint,this.callSuper(\"initialize\",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=!0,e=this._objects.length;e--;)this._objects[e].setCoords(t)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var n=t.left,i=t.top,r=!0;t.set({left:n-e.x,top:i-e.y}),t.group=this,t.setCoords(r)},toString:function(){return\"#<fabric.Group: (\"+this.complexity()+\")>\"},addWithUpdate:function(t){var n=!!this.group;return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(n&&e.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set(\"canvas\",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set(\"canvas\",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,n){var i=this._objects.length;if(this.useSetOnGroup)while(i--)this._objects[i].setOnGroup(t,n);if(\"canvas\"===t)while(i--)this._objects[i]._set(t,n);e.Object.prototype._set.call(this,t,n)},toObject:function(t){var n=this.includeDefaultValues,i=this._objects.filter((function(t){return!t.excludeFromExport})).map((function(e){var i=e.includeDefaultValues;e.includeDefaultValues=n;var r=e.toObject(t);return e.includeDefaultValues=i,r})),r=e.Object.prototype.toObject.call(this,t);return r.objects=i,r},toDatalessObject:function(t){var n,i=this.sourcePath;if(i)n=i;else{var r=this.includeDefaultValues;n=this._objects.map((function(e){var n=e.includeDefaultValues;e.includeDefaultValues=r;var i=e.toDatalessObject(t);return e.includeDefaultValues=n,i}))}var a=e.Object.prototype.toDatalessObject.call(this,t);return a.objects=n,a},render:function(t){this._transformDone=!0,this.callSuper(\"render\",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var n=0,i=this._objects.length;n<i;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(e.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,n=this._objects.length;e<n;e++)this._objects[e].render(t);this._drawClipPath(t,this.clipPath)},isCacheDirty:function(t){if(this.callSuper(\"isCacheDirty\",t))return!0;if(!this.statefullCache)return!1;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-r/2,i,r)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach((function(n){e.util.addTransformToObject(n,t),delete n.group,n.setCoords()})),this},destroy:function(){return this._objects.forEach((function(t){t.set(\"dirty\",!0)})),this._restoreObjectsState()},dispose:function(){this.callSuper(\"dispose\"),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[]},toActiveSelection:function(){if(this.canvas){var t=this._objects,n=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var r=new e.ActiveSelection([]);return r.set(i),r.type=\"activeSelection\",n.remove(this),t.forEach((function(t){t.group=r,t.dirty=!0,n.add(t)})),r.canvas=n,r._objects=t,n._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var t=!0;return this.forEachObject((function(e){e.setCoords(t)})),this},_calcBounds:function(t){for(var e,n,i,r,a=[],s=[],o=[\"tr\",\"br\",\"bl\",\"tl\"],u=0,l=this._objects.length,c=o.length;u<l;++u){for(e=this._objects[u],i=e.calcACoords(),r=0;r<c;r++)n=o[r],a.push(i[n].x),s.push(i[n].y);e.aCoords=i}this._getBounds(a,s,t)},_getBounds:function(t,r,a){var s=new e.Point(n(t),n(r)),o=new e.Point(i(t),i(r)),u=s.y||0,l=s.x||0,c=o.x-s.x||0,h=o.y-s.y||0;this.width=c,this.height=h,a||this.setPositionByOrigin({x:l,y:u},\"left\",\"top\")},_toSVG:function(t){for(var e=[\"<g \",\"COMMON_PARTS\",\" >\\n\"],n=0,i=this._objects.length;n<i;n++)e.push(\"\\t\\t\",this._objects[n].toSVG(t));return e.push(\"</g>\\n\"),e},getSvgStyles:function(){var t=\"undefined\"!==typeof this.opacity&&1!==this.opacity?\"opacity: \"+this.opacity+\";\":\"\",e=this.visible?\"\":\" visibility: hidden;\";return[t,this.getSvgFilter(),e].join(\"\")},toClipPathSVG:function(t){for(var e=[],n=0,i=this._objects.length;n<i;n++)e.push(\"\\t\",this._objects[n].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),e.Group.fromObject=function(t,n){var i=t.objects,r=e.util.object.clone(t,!0);delete r.objects,\"string\"!==typeof i?e.util.enlivenObjects(i,(function(i){var r=e.util.object.clone(t,!0);delete r.objects,e.util.enlivenObjectEnlivables(t,r,(function(){n&&n(new e.Group(i,r,!0))}))})):e.loadSVGFromURL(i,(function(a){var s=e.util.groupSVGElements(a,t,i);s.set(r),n&&n(s)}))})}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:\"activeSelection\",initialize:function(t,n){n=n||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;n.originX&&(this.originX=n.originX),n.originY&&(this.originY=n.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,n),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var n=e.Object.prototype.toObject.call(this),i=new e.Group([]);if(delete n.type,i.set(n),t.forEach((function(t){t.canvas.remove(t),t.group=i})),i._objects=t,!this.canvas)return i;var r=this.canvas;return r.add(i),r._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return\"#<fabric.ActiveSelection: (\"+this.complexity()+\")>\"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper(\"_renderControls\",t,e),n=n||{},\"undefined\"===typeof n.hasControls&&(n.hasControls=!1),n.forActiveSelection=!0;for(var i=0,r=this._objects.length;i<r;i++)this._objects[i]._renderControls(t,n);t.restore()}}),e.ActiveSelection.fromObject=function(t,n){e.util.enlivenObjects(t.objects,(function(i){delete t.objects,n&&n(new e.ActiveSelection(i,t,!0))}))})}(e),function(t){\"use strict\";var e=i.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?i.warn(\"fabric.Image is already defined.\"):(i.Image=i.util.createClass(i.Object,{type:\"image\",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:i.Object.prototype.stateProperties.concat(\"cropX\",\"cropY\"),cacheProperties:i.Object.prototype.cacheProperties.concat(\"cropX\",\"cropY\"),cacheKey:\"\",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey=\"texture\"+i.Object.__uid++,this.callSuper(\"initialize\",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+\"_filtered\"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=i.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.callSuper(\"dispose\"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+\"_filtered\"),this._cacheContext=void 0,[\"_originalElement\",\"_element\",\"_filteredEl\",\"_cacheCanvas\"].forEach(function(t){i.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}},toObject:function(t){var n=[];this.filters.forEach((function(t){t&&n.push(t.toObject())}));var i=e(this.callSuper(\"toObject\",[\"cropX\",\"cropY\"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:n});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],n=[],r=this._element,a=-this.width/2,s=-this.height/2,o=\"\",u=\"\";if(!r)return[];if(this.hasCrop()){var l=i.Object.__uid++;e.push('<clipPath id=\"imageCrop_'+l+'\">\\n','\\t<rect x=\"'+a+'\" y=\"'+s+'\" width=\"'+this.width+'\" height=\"'+this.height+'\" />\\n',\"</clipPath>\\n\"),o=' clip-path=\"url(#imageCrop_'+l+')\" '}if(this.imageSmoothing||(u='\" image-rendering=\"optimizeSpeed'),n.push(\"\\t<image \",\"COMMON_PARTS\",'xlink:href=\"',this.getSvgSrc(!0),'\" x=\"',a-this.cropX,'\" y=\"',s-this.cropY,'\" width=\"',r.width||r.naturalWidth,'\" height=\"',r.height||r.height,u,'\"',o,\"></image>\\n\"),this.stroke||this.strokeDashArray){var c=this.fill;this.fill=null,t=[\"\\t<rect \",'x=\"',a,'\" y=\"',s,'\" width=\"',this.width,'\" height=\"',this.height,'\" style=\"',this.getSvgStyles(),'\"/>\\n'],this.fill=c}return e=\"fill\"!==this.paintFirst?e.concat(t,n):e.concat(n,t),e},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute(\"src\"):e.src:this.src||\"\"},setSrc:function(t,e,n){return i.util.loadImage(t,(function(t,i){this.setElement(t,n),this._setWidthHeight(),e&&e(this,i)}),this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: \"'+this.getSrc()+'\" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),r=n.scaleX,a=n.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set(\"dirty\",!0),!t||r>e&&a>e)return this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=a);i.filterBackend||(i.filterBackend=i.initFilterBackend());var o=i.util.createCanvasElement(),u=this._filteredEl?this.cacheKey+\"_filtered\":this.cacheKey,l=s.width,c=s.height;o.width=l,o.height=c,this._element=o,this._lastScaleX=t.scaleX=r,this._lastScaleY=t.scaleY=a,i.filterBackend.applyFilters([t],s,l,c,this._element,u),this._filterScalingX=o.width/this._originalElement.width,this._filterScalingY=o.height/this._originalElement.height},applyFilters:function(t){if(t=t||this.filters||[],t=t.filter((function(t){return t&&!t.isNeutralState()})),this.set(\"dirty\",!0),this.removeTexture(this.cacheKey+\"_filtered\"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,n=e.naturalWidth||e.width,r=e.naturalHeight||e.height;if(this._element===this._originalElement){var a=i.util.createCanvasElement();a.width=n,a.height=r,this._element=a,this._filteredEl=a}else this._element=this._filteredEl,this._filteredEl.getContext(\"2d\").clearRect(0,0,n,r),this._lastScaleX=1,this._lastScaleY=1;return i.filterBackend||(i.filterBackend=i.initFilterBackend()),i.filterBackend.applyFilters(t,this._originalElement,n,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){i.util.setImageSmoothing(t,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){i.util.setImageSmoothing(t,this.imageSmoothing),i.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element;if(e){var n=this._filterScalingX,i=this._filterScalingY,r=this.width,a=this.height,s=Math.min,o=Math.max,u=o(this.cropX,0),l=o(this.cropY,0),c=e.naturalWidth||e.width,h=e.naturalHeight||e.height,f=u*n,d=l*i,p=s(r*n,c-f),g=s(a*i,h-d),v=-r/2,m=-a/2,y=s(r,c/n-u),_=s(a,h/i-l);e&&t.drawImage(e,f,d,p,g,v,m,y,_)}},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(i.util.getById(t),e),i.util.addClass(this.getElement(),i.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,e){t&&t.length?i.util.enlivenObjects(t,(function(t){e&&e(t)}),\"fabric.Image.filters\"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=i.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||\"\"),n=this._element.width,r=this._element.height,a=1,s=1,o=0,u=0,l=0,c=0,h=this.width,f=this.height,d={width:h,height:f};return!e||\"none\"===e.alignX&&\"none\"===e.alignY?(a=h/n,s=f/r):(\"meet\"===e.meetOrSlice&&(a=s=i.util.findScaleToFit(this._element,d),t=(h-n*a)/2,\"Min\"===e.alignX&&(o=-t),\"Max\"===e.alignX&&(o=t),t=(f-r*s)/2,\"Min\"===e.alignY&&(u=-t),\"Max\"===e.alignY&&(u=t)),\"slice\"===e.meetOrSlice&&(a=s=i.util.findScaleToCover(this._element,d),t=n-h/a,\"Mid\"===e.alignX&&(l=t/2),\"Max\"===e.alignX&&(l=t),t=r-f/s,\"Mid\"===e.alignY&&(c=t/2),\"Max\"===e.alignY&&(c=t),n=h/a,r=f/s)),{width:n,height:r,scaleX:a,scaleY:s,offsetLeft:o,offsetTop:u,cropX:l,cropY:c}}}),i.Image.CSS_CANVAS=\"canvas-img\",i.Image.prototype.getSvgSrc=i.Image.prototype.getSrc,i.Image.fromObject=function(t,e){var n=i.util.object.clone(t);i.util.loadImage(n.src,(function(t,r){r?e&&e(null,!0):i.Image.prototype._initFilters.call(n,n.filters,(function(r){n.filters=r||[],i.Image.prototype._initFilters.call(n,[n.resizeFilter],(function(r){n.resizeFilter=r[0],i.util.enlivenObjectEnlivables(n,n,(function(){var r=new i.Image(t,n);e(r,!1)}))}))}))}),null,n.crossOrigin)},i.Image.fromURL=function(t,e,n){i.util.loadImage(t,(function(t,r){e&&e(new i.Image(t,n),r)}),null,n&&n.crossOrigin)},i.Image.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(\"x y width height preserveAspectRatio xlink:href crossOrigin image-rendering\".split(\" \")),i.Image.fromElement=function(t,n,r){var a=i.parseAttributes(t,i.Image.ATTRIBUTE_NAMES);i.Image.fromURL(a[\"xlink:href\"],n,e(r?i.util.object.clone(r):{},a))})}(e),i.util.object.extend(i.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(t){t=t||{};var e=function(){},n=t.onComplete||e,r=t.onChange||e,a=this;return i.util.animate({target:this,startValue:this.get(\"angle\"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){a.rotate(t),r()},onComplete:function(){a.setCoords(),n()}})}}),i.util.object.extend(i.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){\"use strict\";function t(t,e){var n=\"precision \"+e+\" float;\\nvoid main(){}\",i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(i,n),t.compileShader(i),!!t.getShaderParameter(i,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.isWebglSupported=function(e){if(i.isLikelyNode)return!1;e=e||i.WebglFilterBackend.prototype.tileSize;var n=document.createElement(\"canvas\"),r=n.getContext(\"webgl\")||n.getContext(\"experimental-webgl\"),a=!1;if(r){i.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),a=i.maxTextureSize>=e;for(var s=[\"highp\",\"mediump\",\"lowp\"],o=0;o<3;o++)if(t(r,s[o])){i.webGlPrecision=s[o];break}}return this.isSupported=a,a},i.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var n,r=\"undefined\"!==typeof window.performance;try{new ImageData(1,1),n=!0}catch(g){n=!1}var a=\"undefined\"!==typeof ArrayBuffer,s=\"undefined\"!==typeof Uint8ClampedArray;if(r&&n&&a&&s){var l=i.util.createCanvasElement(),c=new ArrayBuffer(t*e*4);if(i.forceGLPutImageData)return this.imageBuffer=c,void(this.copyGLTo2D=u);var h,f,d,p={imageBuffer:c,destinationWidth:t,destinationHeight:e,targetCanvas:l};l.width=t,l.height=e,h=window.performance.now(),o.call(p,this.gl,p),f=window.performance.now()-h,h=window.performance.now(),u.call(p,this.gl,p),d=window.performance.now()-h,f>d?(this.imageBuffer=c,this.copyGLTo2D=u):this.copyGLTo2D=o}},createWebGLCanvas:function(t,e){var n=i.util.createCanvasElement();n.width=t,n.height=e;var r={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},a=n.getContext(\"webgl\",r);a||(a=n.getContext(\"experimental-webgl\",r)),a&&(a.clearColor(0,0,0,0),this.canvas=n,this.gl=a)},applyFilters:function(t,e,n,i,r,a){var o,u=this.gl;a&&(o=this.getCachedTexture(a,e));var l={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:u,sourceTexture:this.createTexture(u,n,i,!o&&e),targetTexture:this.createTexture(u,n,i),originalTexture:o||this.createTexture(u,n,i,!o&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},c=u.createFramebuffer();return u.bindFramebuffer(u.FRAMEBUFFER,c),t.forEach((function(t){t&&t.applyTo(l)})),s(l),this.copyGLTo2D(u,l),u.bindTexture(u.TEXTURE_2D,null),u.deleteTexture(l.sourceTexture),u.deleteTexture(l.targetTexture),u.deleteFramebuffer(c),r.getContext(\"2d\").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,n,i){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),r},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var n=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=n,n},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:o,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:\"\",vendor:\"\"};if(!t)return e;var n=t.getExtension(\"WEBGL_debug_renderer_info\");if(n){var i=t.getParameter(n.UNMASKED_RENDERER_WEBGL),r=t.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(e.renderer=i.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){\"use strict\";var t=function(){};function e(){}i.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,n,i,r){var a=r.getContext(\"2d\");a.drawImage(e,0,0,n,i);var s=a.getImageData(0,0,n,i),o=a.getImageData(0,0,n,i),u={sourceWidth:n,sourceHeight:i,imageData:s,originalEl:e,originalImageData:o,canvasEl:r,ctx:a,filterBackend:this};return t.forEach((function(t){t.applyTo(u)})),u.imageData.width===n&&u.imageData.height===i||(r.width=u.imageData.width,r.height=u.imageData.height),a.putImageData(u.imageData,0,0),u}}}(),i.Image=i.Image||{},i.Image.filters=i.Image.filters||{},i.Image.filters.BaseFilter=i.util.createClass({type:\"BaseFilter\",vertexSource:\"attribute vec2 aPosition;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvTexCoord = aPosition;\\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n}\",fragmentSource:\"precision highp float;\\nvarying vec2 vTexCoord;\\nuniform sampler2D uTexture;\\nvoid main() {\\ngl_FragColor = texture2D(uTexture, vTexCoord);\\n}\",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,n){e=e||this.fragmentSource,n=n||this.vertexSource,\"highp\"!==i.webGlPrecision&&(e=e.replace(/precision highp float/g,\"precision \"+i.webGlPrecision+\" float\"));var r=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(\"Vertex shader compile error for \"+this.type+\": \"+t.getShaderInfoLog(r));var a=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(a,e),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS))throw new Error(\"Fragment shader compile error for \"+this.type+\": \"+t.getShaderInfoLog(a));var s=t.createProgram();if(t.attachShader(s,r),t.attachShader(s,a),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw new Error('Shader link error for \"${this.type}\" '+t.getProgramInfoLog(s));var o=this.getAttributeLocations(t,s),u=this.getUniformLocations(t,s)||{};return u.uStepW=t.getUniformLocation(s,\"uStepW\"),u.uStepH=t.getUniformLocation(s,\"uStepH\"),{program:s,attributeLocations:o,uniformLocations:u}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,\"aPosition\")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,n){var i=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,n,i=t.context;t.passes>1?(e=t.destinationWidth,n=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===n||(i.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(i,e,n)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=i.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var n=e[t].length;n--;)if(this[t][n]!==e[t][n])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,n=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement(\"canvas\");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),i.Image.filters.BaseFilter.fromObject=function(t,e){var n=new i.Image.filters[t.type](t);return e&&e(n),n},function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.ColorMatrix=i(n.BaseFilter,{type:\"ColorMatrix\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nvarying vec2 vTexCoord;\\nuniform mat4 uColorMatrix;\\nuniform vec4 uConstants;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor *= uColorMatrix;\\ncolor += uConstants;\\ngl_FragColor = color;\\n}\",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:\"matrix\",colorsOnly:!0,initialize:function(t){this.callSuper(\"initialize\",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,n,i,r,a,s=t.imageData,o=s.data,u=o.length,l=this.matrix,c=this.colorsOnly;for(a=0;a<u;a+=4)e=o[a],n=o[a+1],i=o[a+2],c?(o[a]=e*l[0]+n*l[1]+i*l[2]+255*l[4],o[a+1]=e*l[5]+n*l[6]+i*l[7]+255*l[9],o[a+2]=e*l[10]+n*l[11]+i*l[12]+255*l[14]):(r=o[a+3],o[a]=e*l[0]+n*l[1]+i*l[2]+r*l[3]+255*l[4],o[a+1]=e*l[5]+n*l[6]+i*l[7]+r*l[8]+255*l[9],o[a+2]=e*l[10]+n*l[11]+i*l[12]+r*l[13]+255*l[14],o[a+3]=e*l[15]+n*l[16]+i*l[17]+r*l[18]+255*l[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,\"uColorMatrix\"),uConstants:t.getUniformLocation(e,\"uConstants\")}},sendUniformData:function(t,e){var n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],r=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,i),t.uniform4fv(e.uConstants,r)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Brightness=i(n.BaseFilter,{type:\"Brightness\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uBrightness;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor.rgb += uBrightness;\\ngl_FragColor = color;\\n}\",brightness:0,mainParameter:\"brightness\",applyTo2d:function(t){if(0!==this.brightness){var e,n=t.imageData,i=n.data,r=i.length,a=Math.round(255*this.brightness);for(e=0;e<r;e+=4)i[e]=i[e]+a,i[e+1]=i[e+1]+a,i[e+2]=i[e+2]+a}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,\"uBrightness\")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Convolute=r(i.BaseFilter,{type:\"Convolute\",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[9];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 3.0; h+=1.0) {\\nfor (float w = 0.0; w < 3.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_3_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[9];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 3.0; h+=1.0) {\\nfor (float w = 0.0; w < 3.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_5_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[25];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 5.0; h+=1.0) {\\nfor (float w = 0.0; w < 5.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_5_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[25];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 5.0; h+=1.0) {\\nfor (float w = 0.0; w < 5.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_7_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[49];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 7.0; h+=1.0) {\\nfor (float w = 0.0; w < 7.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_7_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[49];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 7.0; h+=1.0) {\\nfor (float w = 0.0; w < 7.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_9_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[81];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 9.0; h+=1.0) {\\nfor (float w = 0.0; w < 9.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_9_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[81];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 9.0; h+=1.0) {\\nfor (float w = 0.0; w < 9.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),n=this.type+\"_\"+e+\"_\"+(this.opaque?1:0),i=this.fragmentSource[n];return t.programCache.hasOwnProperty(n)||(t.programCache[n]=this.createProgram(t.context,i)),t.programCache[n]},applyTo2d:function(t){var e,n,i,r,a,s,o,u,l,c,h,f,d,p=t.imageData,g=p.data,v=this.matrix,m=Math.round(Math.sqrt(v.length)),y=Math.floor(m/2),_=p.width,x=p.height,b=t.ctx.createImageData(_,x),w=b.data,S=this.opaque?1:0;for(h=0;h<x;h++)for(c=0;c<_;c++){for(a=4*(h*_+c),e=0,n=0,i=0,r=0,d=0;d<m;d++)for(f=0;f<m;f++)o=h+d-y,s=c+f-y,o<0||o>=x||s<0||s>=_||(u=4*(o*_+s),l=v[d*m+f],e+=g[u]*l,n+=g[u+1]*l,i+=g[u+2]*l,S||(r+=g[u+3]*l));w[a]=e,w[a+1]=n,w[a+2]=i,w[a+3]=S?g[a+3]:r}t.imageData=b},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,\"uMatrix\"),uOpaque:t.getUniformLocation(e,\"uOpaque\"),uHalfSize:t.getUniformLocation(e,\"uHalfSize\"),uSize:t.getUniformLocation(e,\"uSize\")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return n(this.callSuper(\"toObject\"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Grayscale=i(n.BaseFilter,{type:\"Grayscale\",fragmentSource:{average:\"precision highp float;\\nuniform sampler2D uTexture;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat average = (color.r + color.b + color.g) / 3.0;\\ngl_FragColor = vec4(average, average, average, color.a);\\n}\",lightness:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uMode;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 col = texture2D(uTexture, vTexCoord);\\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\\ngl_FragColor = vec4(average, average, average, col.a);\\n}\",luminosity:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uMode;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 col = texture2D(uTexture, vTexCoord);\\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\\ngl_FragColor = vec4(average, average, average, col.a);\\n}\"},mode:\"average\",mainParameter:\"mode\",applyTo2d:function(t){var e,n,i=t.imageData,r=i.data,a=r.length,s=this.mode;for(e=0;e<a;e+=4)\"average\"===s?n=(r[e]+r[e+1]+r[e+2])/3:\"lightness\"===s?n=(Math.min(r[e],r[e+1],r[e+2])+Math.max(r[e],r[e+1],r[e+2]))/2:\"luminosity\"===s&&(n=.21*r[e]+.72*r[e+1]+.07*r[e+2]),r[e]=n,r[e+1]=n,r[e+2]=n},retrieveShader:function(t){var e=this.type+\"_\"+this.mode;if(!t.programCache.hasOwnProperty(e)){var n=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,n)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,\"uMode\")}},sendUniformData:function(t,e){var n=1;t.uniform1i(e.uMode,n)},isNeutralState:function(){return!1}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Invert=i(n.BaseFilter,{type:\"Invert\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uInvert;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nif (uInvert == 1) {\\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\\n} else {\\ngl_FragColor = color;\\n}\\n}\",invert:!0,mainParameter:\"invert\",applyTo2d:function(t){var e,n=t.imageData,i=n.data,r=i.length;for(e=0;e<r;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,\"uInvert\")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Noise=r(i.BaseFilter,{type:\"Noise\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uStepH;\\nuniform float uNoise;\\nuniform float uSeed;\\nvarying vec2 vTexCoord;\\nfloat rand(vec2 co, float seed, float vScale) {\\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\\n}\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\\ngl_FragColor = color;\\n}\",mainParameter:\"noise\",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,n,i=t.imageData,r=i.data,a=r.length,s=this.noise;for(e=0,a=r.length;e<a;e+=4)n=(.5-Math.random())*s,r[e]+=n,r[e+1]+=n,r[e+2]+=n}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,\"uNoise\"),uSeed:t.getUniformLocation(e,\"uSeed\")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return n(this.callSuper(\"toObject\"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Pixelate=i(n.BaseFilter,{type:\"Pixelate\",blocksize:4,mainParameter:\"blocksize\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uBlocksize;\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nfloat blockW = uBlocksize * uStepW;\\nfloat blockH = uBlocksize * uStepW;\\nint posX = int(vTexCoord.x / blockW);\\nint posY = int(vTexCoord.y / blockH);\\nfloat fposX = float(posX);\\nfloat fposY = float(posY);\\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\\nvec4 color = texture2D(uTexture, squareCoords);\\ngl_FragColor = color;\\n}\",applyTo2d:function(t){var e,n,i,r,a,s,o,u,l,c,h,f=t.imageData,d=f.data,p=f.height,g=f.width;for(n=0;n<p;n+=this.blocksize)for(i=0;i<g;i+=this.blocksize)for(e=4*n*g+4*i,r=d[e],a=d[e+1],s=d[e+2],o=d[e+3],c=Math.min(n+this.blocksize,p),h=Math.min(i+this.blocksize,g),u=n;u<c;u++)for(l=i;l<h;l++)e=4*u*g+4*l,d[e]=r,d[e+1]=a,d[e+2]=s,d[e+3]=o},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,\"uBlocksize\"),uStepW:t.getUniformLocation(e,\"uStepW\"),uStepH:t.getUniformLocation(e,\"uStepH\")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.RemoveColor=r(i.BaseFilter,{type:\"RemoveColor\",color:\"#FFFFFF\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec4 uLow;\\nuniform vec4 uHigh;\\nvarying vec2 vTexCoord;\\nvoid main() {\\ngl_FragColor = texture2D(uTexture, vTexCoord);\\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\\ngl_FragColor.a = 0.0;\\n}\\n}\",distance:.02,useAlpha:!1,applyTo2d:function(t){var n,i,r,a,s=t.imageData,o=s.data,u=255*this.distance,l=new e.Color(this.color).getSource(),c=[l[0]-u,l[1]-u,l[2]-u],h=[l[0]+u,l[1]+u,l[2]+u];for(n=0;n<o.length;n+=4)i=o[n],r=o[n+1],a=o[n+2],i>c[0]&&r>c[1]&&a>c[2]&&i<h[0]&&r<h[1]&&a<h[2]&&(o[n+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,\"uLow\"),uHigh:t.getUniformLocation(e,\"uHigh\")}},sendUniformData:function(t,n){var i=new e.Color(this.color).getSource(),r=parseFloat(this.distance),a=[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1],s=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(n.uLow,a),t.uniform4fv(n.uHigh,s)},toObject:function(){return n(this.callSuper(\"toObject\"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in r)n[a]=i(n.ColorMatrix,{type:a,matrix:r[a],mainParameter:!1,colorsOnly:!0}),e.Image.filters[a].fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric,n=e.Image.filters,i=e.util.createClass;n.BlendColor=i(n.BaseFilter,{type:\"BlendColor\",color:\"#F95C63\",mode:\"multiply\",alpha:1,fragmentSource:{multiply:\"gl_FragColor.rgb *= uColor.rgb;\\n\",screen:\"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\\n\",add:\"gl_FragColor.rgb += uColor.rgb;\\n\",diff:\"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\\n\",subtract:\"gl_FragColor.rgb -= uColor.rgb;\\n\",lighten:\"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\\n\",darken:\"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\\n\",exclusion:\"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\\n\",overlay:\"if (uColor.r < 0.5) {\\ngl_FragColor.r *= 2.0 * uColor.r;\\n} else {\\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\\n}\\nif (uColor.g < 0.5) {\\ngl_FragColor.g *= 2.0 * uColor.g;\\n} else {\\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\\n}\\nif (uColor.b < 0.5) {\\ngl_FragColor.b *= 2.0 * uColor.b;\\n} else {\\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\\n}\\n\",tint:\"gl_FragColor.rgb *= (1.0 - uColor.a);\\ngl_FragColor.rgb += uColor.rgb;\\n\"},buildSource:function(t){return\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ngl_FragColor = color;\\nif (color.a > 0.0) {\\n\"+this.fragmentSource[t]+\"}\\n}\"},retrieveShader:function(t){var e,n=this.type+\"_\"+this.mode;return t.programCache.hasOwnProperty(n)||(e=this.buildSource(this.mode),t.programCache[n]=this.createProgram(t.context,e)),t.programCache[n]},applyTo2d:function(t){var n,i,r,a,s,o,u,l=t.imageData,c=l.data,h=c.length,f=1-this.alpha;u=new e.Color(this.color).getSource(),n=u[0]*this.alpha,i=u[1]*this.alpha,r=u[2]*this.alpha;for(var d=0;d<h;d+=4)switch(a=c[d],s=c[d+1],o=c[d+2],this.mode){case\"multiply\":c[d]=a*n/255,c[d+1]=s*i/255,c[d+2]=o*r/255;break;case\"screen\":c[d]=255-(255-a)*(255-n)/255,c[d+1]=255-(255-s)*(255-i)/255,c[d+2]=255-(255-o)*(255-r)/255;break;case\"add\":c[d]=a+n,c[d+1]=s+i,c[d+2]=o+r;break;case\"diff\":case\"difference\":c[d]=Math.abs(a-n),c[d+1]=Math.abs(s-i),c[d+2]=Math.abs(o-r);break;case\"subtract\":c[d]=a-n,c[d+1]=s-i,c[d+2]=o-r;break;case\"darken\":c[d]=Math.min(a,n),c[d+1]=Math.min(s,i),c[d+2]=Math.min(o,r);break;case\"lighten\":c[d]=Math.max(a,n),c[d+1]=Math.max(s,i),c[d+2]=Math.max(o,r);break;case\"overlay\":c[d]=n<128?2*a*n/255:255-2*(255-a)*(255-n)/255,c[d+1]=i<128?2*s*i/255:255-2*(255-s)*(255-i)/255,c[d+2]=r<128?2*o*r/255:255-2*(255-o)*(255-r)/255;break;case\"exclusion\":c[d]=n+a-2*n*a/255,c[d+1]=i+s-2*i*s/255,c[d+2]=r+o-2*r*o/255;break;case\"tint\":c[d]=n+a*f,c[d+1]=i+s*f,c[d+2]=r+o*f}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,\"uColor\")}},sendUniformData:function(t,n){var i=new e.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(n.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric,n=e.Image.filters,i=e.util.createClass;n.BlendImage=i(n.BaseFilter,{type:\"BlendImage\",image:null,mode:\"multiply\",alpha:1,vertexSource:\"attribute vec2 aPosition;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nuniform mat3 uTransformMatrix;\\nvoid main() {\\nvTexCoord = aPosition;\\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n}\",fragmentSource:{multiply:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform sampler2D uImage;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec4 color2 = texture2D(uImage, vTexCoord2);\\ncolor.rgba *= color2.rgba;\\ngl_FragColor = color;\\n}\",mask:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform sampler2D uImage;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec4 color2 = texture2D(uImage, vTexCoord2);\\ncolor.a = color2.a;\\ngl_FragColor = color;\\n}\"},retrieveShader:function(t){var e=this.type+\"_\"+this.mode,n=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,n)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),this.callSuper(\"applyToWebGL\",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,n=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]},applyTo2d:function(t){var n,i,r,a,s,o,u,l,c,h,f,d=t.imageData,p=t.filterBackend.resources,g=d.data,v=g.length,m=d.width,y=d.height,_=this.image;p.blendImage||(p.blendImage=e.util.createCanvasElement()),c=p.blendImage,h=c.getContext(\"2d\"),c.width!==m||c.height!==y?(c.width=m,c.height=y):h.clearRect(0,0,m,y),h.setTransform(_.scaleX,0,0,_.scaleY,_.left,_.top),h.drawImage(_._element,0,0,m,y),f=h.getImageData(0,0,m,y).data;for(var x=0;x<v;x+=4)switch(s=g[x],o=g[x+1],u=g[x+2],l=g[x+3],n=f[x],i=f[x+1],r=f[x+2],a=f[x+3],this.mode){case\"multiply\":g[x]=s*n/255,g[x+1]=o*i/255,g[x+2]=u*r/255,g[x+3]=l*a/255;break;case\"mask\":g[x+3]=a;break}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,\"uTransformMatrix\"),uImage:t.getUniformLocation(e,\"uImage\")}},sendUniformData:function(t,e){var n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,n){e.Image.fromObject(t.image,(function(i){var r=e.util.object.clone(t);r.image=i,n(new e.Image.filters.BlendImage(r))}))}}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=Math.pow,i=Math.floor,r=Math.sqrt,a=Math.abs,s=Math.round,o=Math.sin,u=Math.ceil,l=e.Image.filters,c=e.util.createClass;l.Resize=c(l.BaseFilter,{type:\"Resize\",resizeType:\"hermite\",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,\"uDelta\"),uTaps:t.getUniformLocation(e,\"uTaps\")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),n=this.type+\"_\"+e;if(!t.programCache.hasOwnProperty(n)){var i=this.generateShader(e);t.programCache[n]=this.createProgram(t.context,i)}return t.programCache[n]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),i=new Array(n),r=1;r<=n;r++)i[r-1]=t(r*e);return i},generateShader:function(t){for(var e=new Array(t),n=this.fragmentSourceTOP,i=1;i<=t;i++)e[i-1]=i+\".0 * uDelta\";return n+=\"uniform float uTaps[\"+t+\"];\\n\",n+=\"void main() {\\n\",n+=\"  vec4 color = texture2D(uTexture, vTexCoord);\\n\",n+=\"  float sum = 1.0;\\n\",e.forEach((function(t,e){n+=\"  color += texture2D(uTexture, vTexCoord + \"+t+\") * uTaps[\"+e+\"];\\n\",n+=\"  color += texture2D(uTexture, vTexCoord - \"+t+\") * uTaps[\"+e+\"];\\n\",n+=\"  sum += 2.0 * uTaps[\"+e+\"];\\n\"})),n+=\"  gl_FragColor = color / sum;\\n\",n+=\"}\",n},fragmentSourceTOP:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec2 uDelta;\\nvarying vec2 vTexCoord;\\n\",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;e*=Math.PI;var n=e/t;return o(e)/e*o(n)/n}},applyTo2d:function(t){var e=t.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;var r,a=e.width,o=e.height,u=s(a*n),l=s(o*i);\"sliceHack\"===this.resizeType?r=this.sliceByTwo(t,a,o,u,l):\"hermite\"===this.resizeType?r=this.hermiteFastResize(t,a,o,u,l):\"bilinear\"===this.resizeType?r=this.bilinearFiltering(t,a,o,u,l):\"lanczos\"===this.resizeType&&(r=this.lanczosResize(t,a,o,u,l)),t.imageData=r},sliceByTwo:function(t,n,r,a,s){var o,u,l=t.imageData,c=.5,h=!1,f=!1,d=n*c,p=r*c,g=e.filterBackend.resources,v=0,m=0,y=n,_=0;g.sliceByTwo||(g.sliceByTwo=document.createElement(\"canvas\")),o=g.sliceByTwo,(o.width<1.5*n||o.height<r)&&(o.width=1.5*n,o.height=r),u=o.getContext(\"2d\"),u.clearRect(0,0,1.5*n,r),u.putImageData(l,0,0),a=i(a),s=i(s);while(!h||!f)n=d,r=p,a<i(d*c)?d=i(d*c):(d=a,h=!0),s<i(p*c)?p=i(p*c):(p=s,f=!0),u.drawImage(o,v,m,n,r,y,_,d,p),v=y,m=_,_+=p;return u.getImageData(v,m,a,s)},lanczosResize:function(t,e,s,o,l){function c(t){var u,C,M,T,k,A,E,O,P,I,L;for(w.x=(t+.5)*g,S.x=i(w.x),u=0;u<l;u++){for(w.y=(u+.5)*v,S.y=i(w.y),k=0,A=0,E=0,O=0,P=0,C=S.x-_;C<=S.x+_;C++)if(!(C<0||C>=e)){I=i(1e3*a(C-w.x)),b[I]||(b[I]={});for(var D=S.y-x;D<=S.y+x;D++)D<0||D>=s||(L=i(1e3*a(D-w.y)),b[I][L]||(b[I][L]=p(r(n(I*m,2)+n(L*y,2))/1e3)),M=b[I][L],M>0&&(T=4*(D*e+C),k+=M,A+=M*h[T],E+=M*h[T+1],O+=M*h[T+2],P+=M*h[T+3]))}T=4*(u*o+t),d[T]=A/k,d[T+1]=E/k,d[T+2]=O/k,d[T+3]=P/k}return++t<o?c(t):f}var h=t.imageData.data,f=t.ctx.createImageData(o,l),d=f.data,p=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,v=this.rcpScaleY,m=2/this.rcpScaleX,y=2/this.rcpScaleY,_=u(g*this.lanczosLobes/2),x=u(v*this.lanczosLobes/2),b={},w={},S={};return c(0)},bilinearFiltering:function(t,e,n,r,a){var s,o,u,l,c,h,f,d,p,g,v,m,y,_=0,x=this.rcpScaleX,b=this.rcpScaleY,w=4*(e-1),S=t.imageData,C=S.data,M=t.ctx.createImageData(r,a),T=M.data;for(f=0;f<a;f++)for(d=0;d<r;d++)for(c=i(x*d),h=i(b*f),p=x*d-c,g=b*f-h,y=4*(h*e+c),v=0;v<4;v++)s=C[y+v],o=C[y+4+v],u=C[y+w+v],l=C[y+w+4+v],m=s*(1-p)*(1-g)+o*p*(1-g)+u*g*(1-p)+l*p*g,T[_++]=m;return M},hermiteFastResize:function(t,e,n,s,o){for(var l=this.rcpScaleX,c=this.rcpScaleY,h=u(l/2),f=u(c/2),d=t.imageData,p=d.data,g=t.ctx.createImageData(s,o),v=g.data,m=0;m<o;m++)for(var y=0;y<s;y++){for(var _=4*(y+m*s),x=0,b=0,w=0,S=0,C=0,M=0,T=0,k=(m+.5)*c,A=i(m*c);A<(m+1)*c;A++)for(var E=a(k-(A+.5))/f,O=(y+.5)*l,P=E*E,I=i(y*l);I<(y+1)*l;I++){var L=a(O-(I+.5))/h,D=r(P+L*L);D>1&&D<-1||(x=2*D*D*D-3*D*D+1,x>0&&(L=4*(I+A*e),T+=x*p[L+3],w+=x,p[L+3]<255&&(x=x*p[L+3]/250),S+=x*p[L],C+=x*p[L+1],M+=x*p[L+2],b+=x))}v[_]=S/b,v[_+1]=C/b,v[_+2]=M/b,v[_+3]=T/w}return g},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Contrast=i(n.BaseFilter,{type:\"Contrast\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uContrast;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\\ngl_FragColor = color;\\n}\",contrast:0,mainParameter:\"contrast\",applyTo2d:function(t){if(0!==this.contrast){var e,n=t.imageData,i=n.data,r=i.length,a=Math.floor(255*this.contrast),s=259*(a+255)/(255*(259-a));for(e=0;e<r;e+=4)i[e]=s*(i[e]-128)+128,i[e+1]=s*(i[e+1]-128)+128,i[e+2]=s*(i[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,\"uContrast\")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Saturation=i(n.BaseFilter,{type:\"Saturation\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uSaturation;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat rgMax = max(color.r, color.g);\\nfloat rgbMax = max(rgMax, color.b);\\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\\ngl_FragColor = color;\\n}\",saturation:0,mainParameter:\"saturation\",applyTo2d:function(t){if(0!==this.saturation){var e,n,i=t.imageData,r=i.data,a=r.length,s=-this.saturation;for(e=0;e<a;e+=4)n=Math.max(r[e],r[e+1],r[e+2]),r[e]+=n!==r[e]?(n-r[e])*s:0,r[e+1]+=n!==r[e+1]?(n-r[e+1])*s:0,r[e+2]+=n!==r[e+2]?(n-r[e+2])*s:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,\"uSaturation\")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Vibrance=i(n.BaseFilter,{type:\"Vibrance\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uVibrance;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat max = max(color.r, max(color.g, color.b));\\nfloat avg = (color.r + color.g + color.b) / 3.0;\\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\\ngl_FragColor = color;\\n}\",vibrance:0,mainParameter:\"vibrance\",applyTo2d:function(t){if(0!==this.vibrance){var e,n,i,r,a=t.imageData,s=a.data,o=s.length,u=-this.vibrance;for(e=0;e<o;e+=4)n=Math.max(s[e],s[e+1],s[e+2]),i=(s[e]+s[e+1]+s[e+2])/3,r=2*Math.abs(n-i)/255*u,s[e]+=n!==s[e]?(n-s[e])*r:0,s[e+1]+=n!==s[e+1]?(n-s[e+1])*r:0,s[e+2]+=n!==s[e+2]?(n-s[e+2])*r:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,\"uVibrance\")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),e.Image.filters.Vibrance.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Blur=i(n.BaseFilter,{type:\"Blur\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec2 uDelta;\\nvarying vec2 vTexCoord;\\nconst float nSamples = 15.0;\\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\\nfloat random(vec3 scale) {\\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\\n}\\nvoid main() {\\nvec4 color = vec4(0.0);\\nfloat total = 0.0;\\nfloat offset = random(v3offset);\\nfor (float t = -nSamples; t <= nSamples; t++) {\\nfloat percent = (t + offset - 0.5) / nSamples;\\nfloat weight = 1.0 - abs(percent);\\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\\ntotal += weight;\\n}\\ngl_FragColor = color / total;\\n}\",blur:0,mainParameter:\"blur\",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var n,i,r=t.filterBackend.resources,a=t.imageData.width,s=t.imageData.height;r.blurLayer1||(r.blurLayer1=e.util.createCanvasElement(),r.blurLayer2=e.util.createCanvasElement()),n=r.blurLayer1,i=r.blurLayer2,n.width===a&&n.height===s||(i.width=n.width=a,i.height=n.height=s);var o,u,l,c,h=n.getContext(\"2d\"),f=i.getContext(\"2d\"),d=15,p=.06*this.blur*.5;for(h.putImageData(t.imageData,0,0),f.clearRect(0,0,a,s),c=-d;c<=d;c++)o=(Math.random()-.5)/4,u=c/d,l=p*u*a+o,f.globalAlpha=1-Math.abs(u),f.drawImage(n,l,o),h.drawImage(i,0,0),f.globalAlpha=1,f.clearRect(0,0,i.width,i.height);for(c=-d;c<=d;c++)o=(Math.random()-.5)/4,u=c/d,l=p*u*s+o,f.globalAlpha=1-Math.abs(u),f.drawImage(n,o,l),h.drawImage(i,0,0),f.globalAlpha=1,f.clearRect(0,0,i.width,i.height);t.ctx.drawImage(n,0,0);var g=t.ctx.getImageData(0,0,n.width,n.height);return h.globalAlpha=1,h.clearRect(0,0,n.width,n.height),g},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,\"uDelta\")}},sendUniformData:function(t,e){var n=this.chooseRightDelta();t.uniform2fv(e.delta,n)},chooseRightDelta:function(){var t,e=1,n=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?n[0]=t:n[1]=t,n}}),n.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Gamma=i(n.BaseFilter,{type:\"Gamma\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec3 uGamma;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec3 correction = (1.0 / uGamma);\\ncolor.r = pow(color.r, correction.r);\\ncolor.g = pow(color.g, correction.g);\\ncolor.b = pow(color.b, correction.b);\\ngl_FragColor = color;\\ngl_FragColor.rgb *= color.a;\\n}\",gamma:[1,1,1],mainParameter:\"gamma\",initialize:function(t){this.gamma=[1,1,1],n.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,n=t.imageData,i=n.data,r=this.gamma,a=i.length,s=1/r[0],o=1/r[1],u=1/r[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,a=256;e<a;e++)this.rVals[e]=255*Math.pow(e/255,s),this.gVals[e]=255*Math.pow(e/255,o),this.bVals[e]=255*Math.pow(e/255,u);for(e=0,a=i.length;e<a;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,\"uGamma\")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Composed=i(n.BaseFilter,{type:\"Composed\",subFilters:[],initialize:function(t){this.callSuper(\"initialize\",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach((function(e){e.applyTo(t)}))},toObject:function(){return e.util.object.extend(this.callSuper(\"toObject\"),{subFilters:this.subFilters.map((function(t){return t.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(t){return!t.isNeutralState()}))}}),e.Image.filters.Composed.fromObject=function(t,n){var i=t.subFilters||[],r=i.map((function(t){return new e.Image.filters[t.type](t)})),a=new e.Image.filters.Composed({subFilters:r});return n&&n(a),a}}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.HueRotation=i(n.ColorMatrix,{type:\"HueRotation\",rotation:0,mainParameter:\"rotation\",calculateMatrix:function(){var t=this.rotation*Math.PI,n=e.util.cos(t),i=e.util.sin(t),r=1/3,a=Math.sqrt(r)*i,s=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+s/3,this.matrix[1]=r*s-a,this.matrix[2]=r*s+a,this.matrix[5]=r*s+a,this.matrix[6]=n+r*s,this.matrix[7]=r*s-a,this.matrix[10]=r*s-a,this.matrix[11]=r*s+a,this.matrix[12]=n+r*s},isNeutralState:function(t){return this.calculateMatrix(),n.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),n.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){\"use strict\";var e=t.fabric||(t.fabric={}),n=e.util.object.clone;if(e.Text)e.warn(\"fabric.Text is already defined\");else{var i=\"fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign\".split(\" \");e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:[\"fontSize\",\"fontWeight\",\"fontFamily\",\"fontStyle\",\"lineHeight\",\"text\",\"charSpacing\",\"textAlign\",\"styles\",\"path\",\"pathStartOffset\",\"pathSide\",\"pathAlign\"],_reNewline:/\\r?\\n/,_reSpacesAndTabs:/[ \\t\\r]/g,_reSpaceAndTab:/[ \\t\\r]/,_reWords:/\\S+/g,type:\"text\",fontSize:40,fontWeight:\"normal\",fontFamily:\"Times New Roman\",underline:!1,overline:!1,linethrough:!1,textAlign:\"left\",fontStyle:\"normal\",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:\"\",stateProperties:e.Object.prototype.stateProperties.concat(i),cacheProperties:e.Object.prototype.cacheProperties.concat(i),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:\"left\",pathAlign:\"baseline\",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:\"ltr\",_styleProperties:[\"stroke\",\"strokeWidth\",\"fill\",\"fontFamily\",\"fontSize\",\"fontWeight\",\"fontStyle\",\"underline\",\"overline\",\"linethrough\",\"deltaY\",\"textBackgroundColor\"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper(\"initialize\",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:\"_dimensionAffectingProps\"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=e.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext(\"2d\")),e._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf(\"justify\")&&this.enlargeSpaces(),this.saveState({propertySet:\"_dimensionAffectingProps\"}))},enlargeSpaces:function(){for(var t,e,n,i,r,a,s,o=0,u=this._textLines.length;o<u;o++)if((\"justify\"===this.textAlign||o!==u-1&&!this.isEndOfWrapping(o))&&(i=0,r=this._textLines[o],e=this.getLineWidth(o),e<this.width&&(s=this.textLines[o].match(this._reSpacesAndTabs)))){n=s.length,t=(this.width-e)/n;for(var l=0,c=r.length;l<=c;l++)a=this.__charBounds[o][l],this._reSpaceAndTab.test(r[l])?(a.width+=t,a.kernedWidth+=t,a.left+=i,i+=t):a.left+=i}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return\"#<fabric.Text (\"+this.complexity()+'): { \"text\": \"'+this.text+'\", \"fontFamily\": \"'+this.fontFamily+'\" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper(\"_getCacheCanvasDimensions\"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,\"underline\"),this._renderText(t),this._renderTextDecoration(t,\"overline\"),this._renderTextDecoration(t,\"linethrough\")},_renderText:function(t){\"stroke\"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,n){if(t.textBaseline=\"alphabetical\",this.path)switch(this.pathAlign){case\"center\":t.textBaseline=\"middle\";break;case\"ascender\":t.textBaseline=\"top\";break;case\"descender\":t.textBaseline=\"bottom\";break}t.font=this._getFontDeclaration(e,n)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,n=this._textLines.length;e<n;e++){var i=this.getLineWidth(e);i>t&&(t=i)}return t},_renderTextLine:function(t,e,n,i,r,a){this._renderChars(t,e,n,i,r,a)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas(\"textBackgroundColor\")){for(var e,n,i,r,a,s,o,u=t.fillStyle,l=this._getLeftOffset(),c=this._getTopOffset(),h=0,f=0,d=this.path,p=0,g=this._textLines.length;p<g;p++)if(e=this.getHeightOfLine(p),this.textBackgroundColor||this.styleHas(\"textBackgroundColor\",p)){i=this._textLines[p],n=this._getLineLeftOffset(p),f=0,h=0,r=this.getValueOfPropertyAt(p,0,\"textBackgroundColor\");for(var v=0,m=i.length;v<m;v++)a=this.__charBounds[p][v],s=this.getValueOfPropertyAt(p,v,\"textBackgroundColor\"),d?(t.save(),t.translate(a.renderLeft,a.renderTop),t.rotate(a.angle),t.fillStyle=s,s&&t.fillRect(-a.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),a.width,e/this.lineHeight),t.restore()):s!==r?(o=l+n+h,\"rtl\"===this.direction&&(o=this.width-o-f),t.fillStyle=r,r&&t.fillRect(o,c,f,e/this.lineHeight),h=a.left,f=a.width,r=s):f+=a.kernedWidth;s&&!d&&(o=l+n+h,\"rtl\"===this.direction&&(o=this.width-o-f),t.fillStyle=s,t.fillRect(o,c,f,e/this.lineHeight)),c+=e}else c+=e;t.fillStyle=u,this._removeShadow(t)}},getFontCache:function(t){var n=t.fontFamily.toLowerCase();e.charWidthsCache[n]||(e.charWidthsCache[n]={});var i=e.charWidthsCache[n],r=t.fontStyle.toLowerCase()+\"_\"+(t.fontWeight+\"\").toLowerCase();return i[r]||(i[r]={}),i[r]},_measureChar:function(t,e,n,i){var r,a,s,o,u=this.getFontCache(e),l=this._getFontDeclaration(e),c=this._getFontDeclaration(i),h=n+t,f=l===c,d=e.fontSize/this.CACHE_FONT_SIZE;if(n&&void 0!==u[n]&&(s=u[n]),void 0!==u[t]&&(o=r=u[t]),f&&void 0!==u[h]&&(a=u[h],o=a-s),void 0===r||void 0===s||void 0===a){var p=this.getMeasuringContext();this._setTextStyles(p,e,!0)}return void 0===r&&(o=r=p.measureText(t).width,u[t]=r),void 0===s&&f&&n&&(s=p.measureText(n).width,u[n]=s),f&&void 0===a&&(a=p.measureText(h).width,u[h]=a,o=a-s),{width:r*d,kernedWidth:o*d}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,\"fontSize\")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var n,i,r,a,s,o,u=0,l=this._textLines[t],c=0,h=new Array(l.length),f=0,d=this.path,p=\"right\"===this.pathSide;for(this.__charBounds[t]=h,n=0;n<l.length;n++)i=l[n],a=this._getGraphemeBox(i,t,n,r),h[n]=a,u+=a.kernedWidth,r=i;if(h[n]={left:a?a.left+a.width:0,width:0,kernedWidth:0,height:this.fontSize},d){switch(o=d.segmentsInfo[d.segmentsInfo.length-1].length,s=e.util.getPointOnPath(d.path,0,d.segmentsInfo),s.x+=d.pathOffset.x,s.y+=d.pathOffset.y,this.textAlign){case\"left\":f=p?o-u:0;break;case\"center\":f=(o-u)/2;break;case\"right\":f=p?0:o-u;break}for(f+=this.pathStartOffset*(p?-1:1),n=p?l.length-1:0;p?n>=0:n<l.length;p?n--:n++)a=h[n],f>o?f%=o:f<0&&(f+=o),this._setGraphemeOnPath(f,a,s),f+=a.kernedWidth}return{width:u,numOfSpaces:c}},_setGraphemeOnPath:function(t,n,i){var r=t+n.kernedWidth/2,a=this.path,s=e.util.getPointOnPath(a.path,r,a.segmentsInfo);n.renderLeft=s.x-i.x,n.renderTop=s.y-i.y,n.angle=s.angle+(\"right\"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,n,i,r){var a,s=this.getCompleteStyleDeclaration(e,n),o=i?this.getCompleteStyleDeclaration(e,n-1):{},u=this._measureChar(t,s,i,o),l=u.kernedWidth,c=u.width;0!==this.charSpacing&&(a=this._getWidthOfCharSpacing(),c+=a,l+=a);var h={width:c,left:0,height:s.fontSize,kernedWidth:l,deltaY:s.deltaY};if(n>0&&!r){var f=this.__charBounds[e][n-1];h.left=f.left+f.width+u.kernedWidth-u.width}return h},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],n=this.getHeightOfChar(t,0),i=1,r=e.length;i<r;i++)n=Math.max(this.getHeightOfChar(t,i),n);return this.__lineHeights[t]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,n=0,i=this._textLines.length;n<i;n++)t=this.getHeightOfLine(n),e+=n===i-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return\"ltr\"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var n=0,i=this._getLeftOffset(),r=this._getTopOffset(),a=0,s=this._textLines.length;a<s;a++){var o=this.getHeightOfLine(a),u=o/this.lineHeight,l=this._getLineLeftOffset(a);this._renderTextLine(e,t,this._textLines[a],i+l,r+n+u,a),n+=o}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas(\"fill\"))&&this._renderTextCommon(t,\"fillText\")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,\"strokeText\"),t.closePath(),t.restore())},_renderChars:function(t,e,n,i,r,a){var s,o,u,l,c,h=this.getHeightOfLine(a),f=-1!==this.textAlign.indexOf(\"justify\"),d=\"\",p=0,g=this.path,v=!f&&0===this.charSpacing&&this.isEmptyStyles(a)&&!g,m=\"ltr\"===this.direction,y=\"ltr\"===this.direction?1:-1,_=e.canvas.getAttribute(\"dir\");if(e.save(),_!==this.direction&&(e.canvas.setAttribute(\"dir\",m?\"ltr\":\"rtl\"),e.direction=m?\"ltr\":\"rtl\",e.textAlign=m?\"left\":\"right\"),r-=h*this._fontSizeFraction/this.lineHeight,v)return this._renderChar(t,e,a,0,n.join(\"\"),i,r,h),void e.restore();for(var x=0,b=n.length-1;x<=b;x++)l=x===b||this.charSpacing||g,d+=n[x],u=this.__charBounds[a][x],0===p?(i+=y*(u.kernedWidth-u.width),p+=u.width):p+=u.kernedWidth,f&&!l&&this._reSpaceAndTab.test(n[x])&&(l=!0),l||(s=s||this.getCompleteStyleDeclaration(a,x),o=this.getCompleteStyleDeclaration(a,x+1),l=this._hasStyleChanged(s,o)),l&&(g?(e.save(),e.translate(u.renderLeft,u.renderTop),e.rotate(u.angle),this._renderChar(t,e,a,x,d,-p/2,0,h),e.restore()):(c=i,this._renderChar(t,e,a,x,d,c,r,h)),d=\"\",s=o,i+=y*p,p=0);e.restore()},_applyPatternGradientTransformText:function(t){var n,i=e.util.createCanvasElement(),r=this.width+this.strokeWidth,a=this.height+this.strokeWidth;return i.width=r,i.height=a,n=i.getContext(\"2d\"),n.beginPath(),n.moveTo(0,0),n.lineTo(r,0),n.lineTo(r,a),n.lineTo(0,a),n.closePath(),n.translate(r/2,a/2),n.fillStyle=t.toLive(n),this._applyPatternGradientTransform(n,t),n.fill(),n.createPattern(i,\"no-repeat\")},handleFiller:function(t,e,n){var i,r;return n.toLive?\"percentage\"===n.gradientUnits||n.gradientTransform||n.patternTransform?(i=-this.width/2,r=-this.height/2,t.translate(i,r),t[e]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:r}):(t[e]=n.toLive(t,this),this._applyPatternGradientTransform(t,n)):(t[e]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,\"strokeStyle\",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,\"fillStyle\",e.fill)},_renderChar:function(t,e,n,i,r,a,s){var o,u,l=this._getStyleDeclaration(n,i),c=this.getCompleteStyleDeclaration(n,i),h=\"fillText\"===t&&c.fill,f=\"strokeText\"===t&&c.stroke&&c.strokeWidth;(f||h)&&(e.save(),h&&(o=this._setFillStyles(e,c)),f&&(u=this._setStrokeStyles(e,c)),e.font=this._getFontDeclaration(c),l&&l.textBackgroundColor&&this._removeShadow(e),l&&l.deltaY&&(s+=l.deltaY),h&&e.fillText(r,a-o.offsetX,s-o.offsetY),f&&e.strokeText(r,a-u.offsetX,s-u.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,n){var i=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,\"fontSize\"),a=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,\"deltaY\"),s={fontSize:r*n.size,deltaY:a+r*n.baseline};return this.setSelectionStyles(s,t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),n=this.width-e,i=this.textAlign,r=this.direction,a=0,s=this.isEndOfWrapping(t);return\"justify\"===i||\"justify-center\"===i&&!s||\"justify-right\"===i&&!s||\"justify-left\"===i&&!s?0:(\"center\"===i&&(a=n/2),\"right\"===i&&(a=n),\"justify-center\"===i&&(a=n/2),\"justify-right\"===i&&(a=n),\"rtl\"===r&&(a-=n),a)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged(\"_dimensionAffectingProps\")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];var e=this.measureLine(t),n=e.width;return this.__lineWidths[t]=n,n},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,n){var i=this._getStyleDeclaration(t,e);return i&&\"undefined\"!==typeof i[n]?i[n]:this[n]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var n,i,r,a,s,o,u,l,c,h,f,d,p,g,v,m,y=this._getLeftOffset(),_=this._getTopOffset(),x=this.path,b=this._getWidthOfCharSpacing(),w=this.offsets[e],S=0,C=this._textLines.length;S<C;S++)if(n=this.getHeightOfLine(S),this[e]||this.styleHas(e,S)){u=this._textLines[S],g=n/this.lineHeight,a=this._getLineLeftOffset(S),h=0,f=0,l=this.getValueOfPropertyAt(S,0,e),m=this.getValueOfPropertyAt(S,0,\"fill\"),c=_+g*(1-this._fontSizeFraction),i=this.getHeightOfChar(S,0),s=this.getValueOfPropertyAt(S,0,\"deltaY\");for(var M=0,T=u.length;M<T;M++)if(d=this.__charBounds[S][M],p=this.getValueOfPropertyAt(S,M,e),v=this.getValueOfPropertyAt(S,M,\"fill\"),r=this.getHeightOfChar(S,M),o=this.getValueOfPropertyAt(S,M,\"deltaY\"),x&&p&&v)t.save(),t.fillStyle=m,t.translate(d.renderLeft,d.renderTop),t.rotate(d.angle),t.fillRect(-d.kernedWidth/2,w*r+o,d.kernedWidth,this.fontSize/15),t.restore();else if((p!==l||v!==m||r!==i||o!==s)&&f>0){var k=y+a+h;\"rtl\"===this.direction&&(k=this.width-k-f),l&&m&&(t.fillStyle=m,t.fillRect(k,c+w*i+s,f,this.fontSize/15)),h=d.left,f=d.width,l=p,m=v,i=r,s=o}else f+=d.kernedWidth;k=y+a+h;\"rtl\"===this.direction&&(k=this.width-k-f),t.fillStyle=v,p&&v&&t.fillRect(k,c+w*i+s,f-b,this.fontSize/15),_+=n}else _+=n;this._removeShadow(t)}},_getFontDeclaration:function(t,n){var i=t||this,r=this.fontFamily,a=e.Text.genericFonts.indexOf(r.toLowerCase())>-1,s=void 0===r||r.indexOf(\"'\")>-1||r.indexOf(\",\")>-1||r.indexOf('\"')>-1||a?i.fontFamily:'\"'+i.fontFamily+'\"';return[e.isLikelyNode?i.fontWeight:i.fontStyle,e.isLikelyNode?i.fontStyle:i.fontWeight,n?this.CACHE_FONT_SIZE+\"px\":i.fontSize+\"px\",s].join(\" \")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper(\"render\",t)))},_splitTextIntoLines:function(t){for(var n=t.split(this._reNewline),i=new Array(n.length),r=[\"\\n\"],a=[],s=0;s<n.length;s++)i[s]=e.util.string.graphemeSplit(n[s]),a=a.concat(i[s],r);return a.pop(),{_unwrappedLines:i,lines:n,graphemeText:a,graphemeLines:i}},toObject:function(t){var e=i.concat(t),r=this.callSuper(\"toObject\",e);return r.styles=n(this.styles,!0),r.path&&(r.path=this.path.toObject()),r},set:function(t,e){this.callSuper(\"set\",t,e);var n=!1,i=!1;if(\"object\"===typeof t)for(var r in t)\"path\"===r&&this.setPathInfo(),n=n||-1!==this._dimensionAffectingProps.indexOf(r),i=i||\"path\"===r;else n=-1!==this._dimensionAffectingProps.indexOf(t),i=\"path\"===t;return i&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(\"x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor\".split(\" \")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i,r){if(!t)return i(null);var a=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),s=a.textAnchor||\"left\";if(r=e.util.object.extend(r?n(r):{},a),r.top=r.top||0,r.left=r.left||0,a.textDecoration){var o=a.textDecoration;-1!==o.indexOf(\"underline\")&&(r.underline=!0),-1!==o.indexOf(\"overline\")&&(r.overline=!0),-1!==o.indexOf(\"line-through\")&&(r.linethrough=!0),delete r.textDecoration}\"dx\"in a&&(r.left+=a.dx),\"dy\"in a&&(r.top+=a.dy),\"fontSize\"in r||(r.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE);var u=\"\";\"textContent\"in t?u=t.textContent:\"firstChild\"in t&&null!==t.firstChild&&\"data\"in t.firstChild&&null!==t.firstChild.data&&(u=t.firstChild.data),u=u.replace(/^\\s+|\\s+$|\\n+/g,\"\").replace(/\\s+/g,\" \");var l=r.strokeWidth;r.strokeWidth=0;var c=new e.Text(u,r),h=c.getScaledHeight()/c.height,f=(c.height+c.strokeWidth)*c.lineHeight-c.height,d=f*h,p=c.getScaledHeight()+d,g=0;\"center\"===s&&(g=c.getScaledWidth()/2),\"right\"===s&&(g=c.getScaledWidth()),c.set({left:c.left-g,top:c.top-(p-c.fontSize*(.07+c._fontSizeFraction))/c.lineHeight,strokeWidth:\"undefined\"!==typeof l?l:1}),i(c)},e.Text.fromObject=function(t,i){var r=n(t),a=t.path;return delete r.path,e.Object._fromObject(\"Text\",r,(function(t){a?e.Object._fromObject(\"Path\",a,(function(e){t.set(\"path\",e),i(t)}),\"path\"):i(t)}),\"text\")},e.Text.genericFonts=[\"sans-serif\",\"serif\",\"cursive\",\"fantasy\",\"monospace\"],e.util.createAccessors&&e.util.createAccessors(e.Text)}}(e),function(){i.util.object.extend(i.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if(\"undefined\"!==typeof t&&!this.styles[t])return!0;var e=\"undefined\"===typeof t?this.styles:{line:this.styles[t]};for(var n in e)for(var i in e[n])for(var r in e[n][i])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||\"\"===t)return!1;if(\"undefined\"!==typeof e&&!this.styles[e])return!1;var n=\"undefined\"===typeof e?this.styles:{0:this.styles[e]};for(var i in n)for(var r in n[i])if(\"undefined\"!==typeof n[i][r][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||\"\"===t)return!1;var e,n,i=this.styles,r=0,a=!0,s=0;for(var o in i){for(var u in e=0,i[o]){var l=i[o][u],c=l.hasOwnProperty(t);r++,c?(n?l[t]!==n&&(a=!1):n=l[t],l[t]===this[t]&&delete l[t]):a=!1,0!==Object.keys(l).length?e++:delete i[o][u]}0===e&&delete i[o]}for(var h=0;h<this._textLines.length;h++)s+=this._textLines[h].length;a&&r===s&&(this[t]=n,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&\"\"!==t){var e,n,i,r=this.styles;for(n in r){for(i in e=r[n],e)delete e[i][t],0===Object.keys(e[i]).length&&delete e[i];0===Object.keys(e).length&&delete r[n]}}},_extendStyles:function(t,e){var n=this.get2DCursorLocation(t);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),i.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),e)},get2DCursorLocation:function(t,e){\"undefined\"===typeof t&&(t=this.selectionStart);for(var n=e?this._unwrappedTextLines:this._textLines,i=n.length,r=0;r<i;r++){if(t<=n[r].length)return{lineIndex:r,charIndex:t};t-=n[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:n[r-1].length<t?n[r-1].length:t}},getSelectionStyles:function(t,e,n){\"undefined\"===typeof t&&(t=this.selectionStart||0),\"undefined\"===typeof e&&(e=this.selectionEnd||t);for(var i=[],r=t;r<e;r++)i.push(this.getStyleAtPosition(r,n));return i},getStyleAtPosition:function(t,e){var n=this.get2DCursorLocation(t),i=e?this.getCompleteStyleDeclaration(n.lineIndex,n.charIndex):this._getStyleDeclaration(n.lineIndex,n.charIndex);return i||{}},setSelectionStyles:function(t,e,n){\"undefined\"===typeof e&&(e=this.selectionStart||0),\"undefined\"===typeof n&&(n=this.selectionEnd||e);for(var i=e;i<n;i++)this._extendStyles(i,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var n=this.styles&&this.styles[t];return n?n[e]:null},getCompleteStyleDeclaration:function(t,e){for(var n,i=this._getStyleDeclaration(t,e)||{},r={},a=0;a<this._styleProperties.length;a++)n=this._styleProperties[a],r[n]=\"undefined\"===typeof i[n]?this[n]:i[n];return r},_setStyleDeclaration:function(t,e,n){this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}})}(),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf(\"underline\")>-1&&(t.underline=!0),t.textDecoration.indexOf(\"line-through\")>-1&&(t.linethrough=!0),t.textDecoration.indexOf(\"overline\")>-1&&(t.overline=!0),delete t.textDecoration)}i.IText=i.util.createClass(i.Text,i.Observable,{type:\"i-text\",selectionStart:0,selectionEnd:0,selectionColor:\"rgba(17,119,255,0.3)\",isEditing:!1,editable:!0,editingBorderColor:\"rgba(102,153,255,0.25)\",cursorWidth:2,cursorColor:\"\",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\\s|\\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper(\"initialize\",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire(\"selectionStart\",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire(\"selectionEnd\",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire(\"selection:changed\"),this.canvas&&this.canvas.fire(\"text:selection:changed\",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper(\"initDimensions\")},render:function(t){this.clearContextTop(),this.callSuper(\"render\",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper(\"_render\",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,n=this.height+4;t.clearRect(-e/2,-n/2,e,n)},_getCursorBoundaries:function(t){\"undefined\"===typeof t&&(t=this.selectionStart);var e=this._getLeftOffset(),n=this._getTopOffset(),i=this._getCursorBoundariesOffsets(t);return{left:e,top:n,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&\"top\"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,n,i,r,a=0,s=0,o=this.get2DCursorLocation(t);i=o.charIndex,n=o.lineIndex;for(var u=0;u<n;u++)a+=this.getHeightOfLine(u);e=this._getLineLeftOffset(n);var l=this.__charBounds[n][i];return l&&(s=l.left),0!==this.charSpacing&&i===this._textLines[n].length&&(s-=this._getWidthOfCharSpacing()),r={top:a,left:e+(s>0?s:0)},\"rtl\"===this.direction&&(r.left*=-1),this.cursorOffsetCache=r,this.cursorOffsetCache},renderCursor:function(t,e){var n=this.get2DCursorLocation(),i=n.lineIndex,r=n.charIndex>0?n.charIndex-1:0,a=this.getValueOfPropertyAt(i,r,\"fontSize\"),s=this.scaleX*this.canvas.getZoom(),o=this.cursorWidth/s,u=t.topOffset,l=this.getValueOfPropertyAt(i,r,\"deltaY\");u+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-a*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,r,\"fill\"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-o/2,u+t.top+l,o,a)},renderSelection:function(t,e){for(var n=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf(\"justify\"),a=this.get2DCursorLocation(n),s=this.get2DCursorLocation(i),o=a.lineIndex,u=s.lineIndex,l=a.charIndex<0?0:a.charIndex,c=s.charIndex<0?0:s.charIndex,h=o;h<=u;h++){var f=this._getLineLeftOffset(h)||0,d=this.getHeightOfLine(h),p=0,g=0,v=0;if(h===o&&(g=this.__charBounds[o][l].left),h>=o&&h<u)v=r&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===u)if(0===c)v=this.__charBounds[u][c].left;else{var m=this._getWidthOfCharSpacing();v=this.__charBounds[u][c-1].left+this.__charBounds[u][c-1].width-m}p=d,(this.lineHeight<1||h===u&&this.lineHeight>1)&&(d/=this.lineHeight);var y=t.left+f+g,_=v-g,x=d,b=0;this.inCompositionMode?(e.fillStyle=this.compositionColor||\"black\",x=1,b=d):e.fillStyle=this.selectionColor,\"rtl\"===this.direction&&(y=this.width-y-_),e.fillRect(y,t.top+t.topOffset+b,_,x),t.topOffset+=p}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,\"fontSize\")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,\"fill\")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),i.IText.fromObject=function(e,n){if(t(e),e.styles)for(var r in e.styles)for(var a in e.styles[r])t(e.styles[r][a]);i.Object._fromObject(\"IText\",e,n,\"text\")}}(),function(){var t=i.util.object.clone;i.util.object.extend(i.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on(\"added\",(function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))}))},initRemovedHandler:function(){var t=this;this.on(\"removed\",(function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],i.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))}))},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.__isMousedown=!1}))},t.on(\"mouse:up\",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off(\"mouse:up\",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,\"_onTickComplete\")},_animateCursor:function(t,e,n,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate(\"_currentCursorOpacity\",e,{duration:n,onComplete:function(){r.isAborted||t[i]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,\"_tick\")}),100)},initDelayedCursor:function(t){var e=this,n=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){e._tick()}),n)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join(\"\")},findWordBoundaryLeft:function(t){var e=0,n=t-1;if(this._reSpace.test(this._text[n]))while(this._reSpace.test(this._text[n]))e++,n--;while(/\\S/.test(this._text[n])&&n>-1)e++,n--;return t-e},findWordBoundaryRight:function(t){var e=0,n=t;if(this._reSpace.test(this._text[n]))while(this._reSpace.test(this._text[n]))e++,n++;while(/\\S/.test(this._text[n])&&n<this._text.length)e++,n++;return t+e},findLineBoundaryLeft:function(t){var e=0,n=t-1;while(!/\\n/.test(this._text[n])&&n>-1)e++,n--;return t-e},findLineBoundaryRight:function(t){var e=0,n=t;while(!/\\n/.test(this._text[n])&&n<this._text.length)e++,n++;return t+e},searchWordBoundary:function(t,e){var n=this._text,r=this._reSpace.test(n[t])?t-1:t,a=n[r],s=i.reNonWord;while(!s.test(a)&&r>0&&r<n.length)r+=e,a=n[r];return s.test(a)&&(r+=1===e?0:1),r},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),n=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire(\"editing:entered\"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire(\"text:editing:entered\",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.selected=!1,t.isEditing&&t.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on(\"mouse:move\",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),n=this.selectionStart,i=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&n!==i||n!==e&&i!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor=\"text\",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor=\"text\"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,n){var r=n.slice(0,t),a=i.util.string.graphemeSplit(r).length;if(t===e)return{selectionStart:a,selectionEnd:a};var s=n.slice(t,e),o=i.util.string.graphemeSplit(s).length;return{selectionStart:a,selectionEnd:a+o}},fromGraphemeToStringSelection:function(t,e,n){var i=n.slice(0,t),r=i.join(\"\").length;if(t===e)return{selectionStart:r,selectionEnd:r};var a=n.slice(t,e),s=a.join(\"\").length;return{selectionStart:r,selectionEnd:r+s}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),r=n.lineIndex,a=n.charIndex,s=this.getValueOfPropertyAt(r,a,\"fontSize\")*this.lineHeight,o=e.leftOffset,u=this.calcTransformMatrix(),l={x:e.left+o,y:e.top+e.topOffset+s},c=this.canvas.getRetinaScaling(),h=this.canvas.upperCanvasEl,f=h.width/c,d=h.height/c,p=f-s,g=d-s,v=h.clientWidth/f,m=h.clientHeight/d;return l=i.util.transformPoint(l,u),l=i.util.transformPoint(l,this.canvas.viewportTransform),l.x*=v,l.y*=m,l.x<0&&(l.x=0),l.x>p&&(l.x=p),l.y<0&&(l.y=0),l.y>g&&(l.y=g),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+\"px\",top:l.y+\"px\",fontSize:s+\"px\",charHeight:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire(\"editing:exited\"),t&&this.fire(\"modified\"),this.canvas&&(this.canvas.off(\"mouse:move\",this.mouseMoveHandler),this.canvas.fire(\"text:editing:exited\",{target:this}),t&&this.canvas.fire(\"object:modified\",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var n,i,r=this.get2DCursorLocation(t,!0),a=this.get2DCursorLocation(e,!0),s=r.lineIndex,o=r.charIndex,u=a.lineIndex,l=a.charIndex;if(s!==u){if(this.styles[s])for(n=o;n<this._unwrappedTextLines[s].length;n++)delete this.styles[s][n];if(this.styles[u])for(n=l;n<this._unwrappedTextLines[u].length;n++)i=this.styles[u][n],i&&(this.styles[s]||(this.styles[s]={}),this.styles[s][o+n-l]=i);for(n=s+1;n<=u;n++)delete this.styles[n];this.shiftLineStyles(u,s-u)}else if(this.styles[s]){i=this.styles[s];var c,h,f=l-o;for(n=o;n<l;n++)delete i[n];for(h in this.styles[s])c=parseInt(h,10),c>=l&&(i[c-f]=i[h],delete i[h])}},shiftLineStyles:function(e,n){var i=t(this.styles);for(var r in this.styles){var a=parseInt(r,10);a>e&&(this.styles[a+n]=i[a],i[a-n]||delete this.styles[a])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,n,i,r){var a,s={},o=!1,u=this._unwrappedTextLines[e].length===n;for(var l in i||(i=1),this.shiftLineStyles(e,i),this.styles[e]&&(a=this.styles[e][0===n?n:n-1]),this.styles[e]){var c=parseInt(l,10);c>=n&&(o=!0,s[c-n]=this.styles[e][l],u&&0===n||delete this.styles[e][l])}var h=!1;o&&!u&&(this.styles[e+i]=s,h=!0),h&&i--;while(i>0)r&&r[i-1]?this.styles[e+i]={0:t(r[i-1])}:a?this.styles[e+i]={0:t(a)}:delete this.styles[e+i],i--;this._forceClearCache=!0},insertCharStyleObject:function(e,n,i,r){this.styles||(this.styles={});var a=this.styles[e],s=a?t(a):{};for(var o in i||(i=1),s){var u=parseInt(o,10);u>=n&&(a[u+i]=s[u],s[u-i]||delete a[u])}if(this._forceClearCache=!0,r)while(i--)Object.keys(r[i]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][n+i]=t(r[i]));else if(a){var l=a[n?n-1:1];while(l&&i--)this.styles[e][n+i]=t(l)}},insertNewStyleBlock:function(t,e,n){for(var i=this.get2DCursorLocation(e,!0),r=[0],a=0,s=0;s<t.length;s++)\"\\n\"===t[s]?(a++,r[a]=0):r[a]++;r[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,r[0],n),n=n&&n.slice(r[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+r[0],a);for(s=1;s<a;s++)r[s]>0?this.insertCharStyleObject(i.lineIndex+s,0,r[s],n):n&&this.styles[i.lineIndex+s]&&n[0]&&(this.styles[i.lineIndex+s][0]=n[0]),n=n&&n.slice(r[s]+1);r[s]>0&&this.insertCharStyleObject(i.lineIndex+s,0,r[s],n)},setSelectionStartEndWithShift:function(t,e,n){n<=t?(e===t?this._selectionDirection=\"left\":\"right\"===this._selectionDirection&&(this._selectionDirection=\"left\",this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?\"right\"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection=\"right\":\"left\"===this._selectionDirection&&(this._selectionDirection=\"right\",this.selectionStart=e),this.selectionEnd=n)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),i.util.object.extend(i.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on(\"mousedown\",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire(\"tripleclick\",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on(\"mousedblclick\",this.doubleClickHandler),this.on(\"tripleclick\",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on(\"mousedown\",this._mouseDownHandler),this.on(\"mousedown:before\",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on(\"mouseup\",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),n=this.selectionStart,i=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,i,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,n,i=this.getLocalPointer(t),r=0,a=0,s=0,o=0,u=0,l=0,c=this._textLines.length;l<c;l++){if(!(s<=i.y))break;s+=this.getHeightOfLine(l)*this.scaleY,u=l,l>0&&(o+=this._textLines[l-1].length+this.missingNewlineOffset(l-1))}e=this._getLineLeftOffset(u),a=e*this.scaleX,n=this._textLines[u],\"rtl\"===this.direction&&(i.x=this.width*this.scaleX-i.x+a);for(var h=0,f=n.length;h<f;h++){if(r=a,a+=this.__charBounds[u][h].kernedWidth*this.scaleX,!(a<=i.x))break;o++}return this._getNewSelectionStartFromOffset(i,r,a,o,f)},_getNewSelectionStartFromOffset:function(t,e,n,i,r){var a=t.x-e,s=n-t.x,o=s>a||s<0?0:1,u=i+o;return this.flipX&&(u=r-u),u>this._text.length&&(u=this._text.length),u}}),i.util.object.extend(i.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=i.document.createElement(\"textarea\"),this.hiddenTextarea.setAttribute(\"autocapitalize\",\"off\"),this.hiddenTextarea.setAttribute(\"autocorrect\",\"off\"),this.hiddenTextarea.setAttribute(\"autocomplete\",\"off\"),this.hiddenTextarea.setAttribute(\"spellcheck\",\"false\"),this.hiddenTextarea.setAttribute(\"data-fabric-hiddentextarea\",\"\"),this.hiddenTextarea.setAttribute(\"wrap\",\"off\");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText=\"position: absolute; top: \"+t.top+\"; left: \"+t.left+\"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: \"+t.fontSize+\";\",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):i.document.body.appendChild(this.hiddenTextarea),i.util.addListener(this.hiddenTextarea,\"keydown\",this.onKeyDown.bind(this)),i.util.addListener(this.hiddenTextarea,\"keyup\",this.onKeyUp.bind(this)),i.util.addListener(this.hiddenTextarea,\"input\",this.onInput.bind(this)),i.util.addListener(this.hiddenTextarea,\"copy\",this.copy.bind(this)),i.util.addListener(this.hiddenTextarea,\"cut\",this.copy.bind(this)),i.util.addListener(this.hiddenTextarea,\"paste\",this.paste.bind(this)),i.util.addListener(this.hiddenTextarea,\"compositionstart\",this.onCompositionStart.bind(this)),i.util.addListener(this.hiddenTextarea,\"compositionupdate\",this.onCompositionUpdate.bind(this)),i.util.addListener(this.hiddenTextarea,\"compositionend\",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(i.util.addListener(this.canvas.upperCanvasEl,\"click\",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:\"exitEditing\",27:\"exitEditing\",33:\"moveCursorUp\",34:\"moveCursorDown\",35:\"moveCursorRight\",36:\"moveCursorLeft\",37:\"moveCursorLeft\",38:\"moveCursorUp\",39:\"moveCursorRight\",40:\"moveCursorDown\"},keysMapRtl:{9:\"exitEditing\",27:\"exitEditing\",33:\"moveCursorUp\",34:\"moveCursorDown\",35:\"moveCursorLeft\",36:\"moveCursorRight\",37:\"moveCursorRight\",38:\"moveCursorUp\",39:\"moveCursorLeft\",40:\"moveCursorDown\"},ctrlKeysMapUp:{67:\"copy\",88:\"cut\"},ctrlKeysMapDown:{65:\"selectAll\"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){var e=\"rtl\"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var n,r,a,s,o,u=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,l=this._text.length,c=u.length,h=c-l,f=this.selectionStart,d=this.selectionEnd,p=f!==d;if(\"\"===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire(\"changed\"),void(this.canvas&&(this.canvas.fire(\"text:changed\",{target:this}),this.canvas.requestRenderAll()));var g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),v=f>g.selectionStart;p?(n=this._text.slice(f,d),h+=d-f):c<l&&(n=v?this._text.slice(d+h,d):this._text.slice(f,f-h)),r=u.slice(g.selectionEnd-h,g.selectionEnd),n&&n.length&&(r.length&&(a=this.getSelectionStyles(f,f+1,!1),a=r.map((function(){return a[0]}))),p?(s=f,o=d):v?(s=d-n.length,o=d):(s=d,o=d+n.length),this.removeStyleFromTo(s,o)),r.length&&(e&&r.join(\"\")===i.copiedText&&!i.disableStyleCopyPaste&&(a=i.copiedTextStyle),this.insertNewStyleBlock(r,f,a)),this.updateFromTextArea(),this.fire(\"changed\"),this.canvas&&(this.canvas.fire(\"text:changed\",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(i.copiedText=this.getSelectedText(),i.disableStyleCopyPaste?i.copiedTextStyle=null:i.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||i.window.clipboardData},_getWidthBeforeCursor:function(t,e){var n,i=this._getLineLeftOffset(t);return e>0&&(n=this.__charBounds[t][e-1],i+=n.left+n.width),i},getDownCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-n;var a=i.charIndex,s=this._getWidthBeforeCursor(r,a),o=this._getIndexOnLine(r+1,s),u=this._textLines[r].slice(a);return u.length+o+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-n;var a=i.charIndex,s=this._getWidthBeforeCursor(r,a),o=this._getIndexOnLine(r-1,s),u=this._textLines[r].slice(0,a),l=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+o-u.length+(1-l)},_getIndexOnLine:function(t,e){for(var n,i,r=this._textLines[t],a=this._getLineLeftOffset(t),s=a,o=0,u=0,l=r.length;u<l;u++)if(n=this.__charBounds[t][u].width,s+=n,s>e){i=!0;var c=s-n,h=s,f=Math.abs(c-e),d=Math.abs(h-e);o=d<f?u:u-1;break}return i||(o=r.length-1),o},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown(\"Down\",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown(\"Up\",t)},_moveCursorUpOrDown:function(t,e){var n=\"get\"+t+\"CursorOffset\",i=this[n](e,\"right\"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e=\"left\"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight(\"Left\",t)},_move:function(t,e,n){var i;if(t.altKey)i=this[\"findWordBoundary\"+n](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+=\"Left\"===n?-1:1,!0;i=this[\"findLineBoundary\"+n](this[e])}if(void 0!==typeof i&&this[e]!==i)return this[e]=i,!0},_moveLeft:function(t,e){return this._move(t,e,\"Left\")},_moveRight:function(t,e){return this._move(t,e,\"Right\")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection=\"left\",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,\"selectionStart\")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return\"right\"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,\"selectionEnd\"):0!==this.selectionStart?(this._selectionDirection=\"left\",this._moveLeft(t,\"selectionStart\")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight(\"Right\",t)},_moveCursorLeftOrRight:function(t,e){var n=\"moveCursor\"+t+\"With\";this._currentCursorOpacity=1,e.shiftKey?n+=\"Shift\":n+=\"outShift\",this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return\"left\"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,\"selectionStart\"):this.selectionEnd!==this._text.length?(this._selectionDirection=\"right\",this._moveRight(t,\"selectionEnd\")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection=\"right\",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,\"selectionStart\"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){\"undefined\"===typeof e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(\"\"),this.set(\"dirty\",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,n,r){\"undefined\"===typeof r&&(r=n),r>n&&this.removeStyleFromTo(n,r);var a=i.util.string.graphemeSplit(t);this.insertNewStyleBlock(a,n,e),this._text=[].concat(this._text.slice(0,n),a,this._text.slice(r)),this.text=this._text.join(\"\"),this.set(\"dirty\",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var t=i.util.toFixed,e=/  +/g;i.util.object.extend(i.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=!0,n=this.getSvgTextDecoration(this);return[t.textBgRects.join(\"\"),'\\t\\t<text xml:space=\"preserve\" ',this.fontFamily?'font-family=\"'+this.fontFamily.replace(/\"/g,\"'\")+'\" ':\"\",this.fontSize?'font-size=\"'+this.fontSize+'\" ':\"\",this.fontStyle?'font-style=\"'+this.fontStyle+'\" ':\"\",this.fontWeight?'font-weight=\"'+this.fontWeight+'\" ':\"\",n?'text-decoration=\"'+n+'\" ':\"\",'style=\"',this.getSvgStyles(e),'\"',this.addPaintOrder(),\" >\",t.textSpans.join(\"\"),\"</text>\\n\"]},_getSVGTextAndBg:function(t,e){var n,i=[],r=[],a=t;this._setSVGBg(r);for(var s=0,o=this._textLines.length;s<o;s++)n=this._getLineLeftOffset(s),(this.textBackgroundColor||this.styleHas(\"textBackgroundColor\",s))&&this._setSVGTextLineBg(r,s,e+n,a),this._setSVGTextLineText(i,s,e+n,a),a+=this.getHeightOfLine(s);return{textSpans:i,textBgRects:r}},_createTextCharSpan:function(n,r,a,s){var o=n!==n.trim()||n.match(e),u=this.getSvgSpanStyles(r,o),l=u?'style=\"'+u+'\"':\"\",c=r.deltaY,h=\"\",f=i.Object.NUM_FRACTION_DIGITS;return c&&(h=' dy=\"'+t(c,f)+'\" '),['<tspan x=\"',t(a,f),'\" y=\"',t(s,f),'\" ',h,l,\">\",i.util.string.escapeXml(n),\"</tspan>\"].join(\"\")},_setSVGTextLineText:function(t,e,n,i){var r,a,s,o,u,l=this.getHeightOfLine(e),c=-1!==this.textAlign.indexOf(\"justify\"),h=\"\",f=0,d=this._textLines[e];i+=l*(1-this._fontSizeFraction)/this.lineHeight;for(var p=0,g=d.length-1;p<=g;p++)u=p===g||this.charSpacing,h+=d[p],s=this.__charBounds[e][p],0===f?(n+=s.kernedWidth-s.width,f+=s.width):f+=s.kernedWidth,c&&!u&&this._reSpaceAndTab.test(d[p])&&(u=!0),u||(r=r||this.getCompleteStyleDeclaration(e,p),a=this.getCompleteStyleDeclaration(e,p+1),u=this._hasStyleChangedForSvg(r,a)),u&&(o=this._getStyleDeclaration(e,p)||{},t.push(this._createTextCharSpan(h,o,n,i)),h=\"\",r=a,n+=f,f=0)},_pushTextBgRect:function(e,n,r,a,s,o){var u=i.Object.NUM_FRACTION_DIGITS;e.push(\"\\t\\t<rect \",this._getFillAttributes(n),' x=\"',t(r,u),'\" y=\"',t(a,u),'\" width=\"',t(s,u),'\" height=\"',t(o,u),'\"></rect>\\n')},_setSVGTextLineBg:function(t,e,n,i){for(var r,a,s=this._textLines[e],o=this.getHeightOfLine(e)/this.lineHeight,u=0,l=0,c=this.getValueOfPropertyAt(e,0,\"textBackgroundColor\"),h=0,f=s.length;h<f;h++)r=this.__charBounds[e][h],a=this.getValueOfPropertyAt(e,h,\"textBackgroundColor\"),a!==c?(c&&this._pushTextBgRect(t,c,n+l,i,u,o),l=r.left,u=r.width,c=a):u+=r.kernedWidth;a&&this._pushTextBgRect(t,a,n+l,i,u,o)},_getFillAttributes:function(t){var e=t&&\"string\"===typeof t?new i.Color(t):\"\";return e&&e.getSource()&&1!==e.getAlpha()?'opacity=\"'+e.getAlpha()+'\" fill=\"'+e.setAlpha(1).toRgb()+'\"':'fill=\"'+t+'\"'},_getSVGLineTopOffset:function(t){for(var e=0,n=0,i=0;i<t;i++)e+=this.getHeightOfLine(i);return n=this.getHeightOfLine(i),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){var e=i.Object.prototype.getSvgStyles.call(this,t);return e+\" white-space: pre;\"}})}(),function(t){\"use strict\";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:\"textbox\",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e.Text.prototype._dimensionAffectingProps.concat(\"width\"),_wordJoiners:/[ \\t\\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set(\"width\",this.dynamicMinWidth),-1!==this.textAlign.indexOf(\"justify\")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:\"_dimensionAffectingProps\"}))},_generateStyleMap:function(t){for(var e=0,n=0,i=0,r={},a=0;a<t.graphemeLines.length;a++)\"\\n\"===t.graphemeText[i]&&a>0?(n=0,i++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[i])&&a>0&&(n++,i++),r[a]={line:e,offset:n},i+=t.graphemeLines[a].length,n+=t.graphemeLines[a].length;return r},styleHas:function(t,n){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[n];i&&(n=i.line)}return e.Text.prototype.styleHas.call(this,t,n)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,n,i=0,r=t+1,a=!1,s=this._styleMap[t],o=this._styleMap[t+1];for(var u in s&&(t=s.line,i=s.offset),o&&(r=o.line,a=r===t,e=o.offset),n=\"undefined\"===typeof t?this.styles:{line:this.styles[t]},n)for(var l in n[u])if(l>=i&&(!a||l<e))for(var c in n[u][l])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[t];if(!n)return null;t=n.line,e=n.offset+e}return this.callSuper(\"_getStyleDeclaration\",t,e)},_setStyleDeclaration:function(t,e,n){var i=this._styleMap[t];t=i.line,e=i.offset+e,this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){var n=this._styleMap[t];t=n.line,e=n.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return!!this.styles[e.line]},_setLineStyle:function(t){var e=this._styleMap[t];this.styles[e.line]={}},_wrapText:function(t,e){var n,i=[];for(this.isWrapping=!0,n=0;n<t.length;n++)i=i.concat(this._wrapLine(t[n],n,e));return this.isWrapping=!1,i},_measureWord:function(t,e,n){var i,r=0,a=!0;n=n||0;for(var s=0,o=t.length;s<o;s++){var u=this._getGraphemeBox(t[s],e,s+n,i,a);r+=u.kernedWidth,i=t[s]}return r},_wrapLine:function(t,n,i,r){var a=0,s=this.splitByGrapheme,o=[],u=[],l=s?e.util.string.graphemeSplit(t):t.split(this._wordJoiners),c=\"\",h=0,f=s?\"\":\" \",d=0,p=0,g=0,v=!0,m=this._getWidthOfCharSpacing();r=r||0;0===l.length&&l.push([]),i-=r;for(var y=0;y<l.length;y++)c=s?l[y]:e.util.string.graphemeSplit(l[y]),d=this._measureWord(c,n,h),h+=c.length,a+=p+d-m,a>i&&!v?(o.push(u),u=[],a=d,v=!0):a+=m,v||s||u.push(f),u=u.concat(c),p=s?0:this._measureWord([f],n,h),h++,v=!1,d>g&&(g=d);return y&&o.push(u),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-m+r),o},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var n=e.Text.prototype._splitTextIntoLines.call(this,t),i=this._wrapText(n.lines,this.width),r=new Array(i.length),a=0;a<i.length;a++)r[a]=i[a].join(\"\");return n.lines=r,n.graphemeLines=i,n},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper(\"toObject\",[\"minWidth\",\"splitByGrapheme\"].concat(t))}}),e.Textbox.fromObject=function(t,n){return e.Object._fromObject(\"Textbox\",t,n,\"text\")}}(e),function(){var t=i.controlsUtils,e=t.scaleSkewCursorStyleHandler,n=t.scaleCursorStyleHandler,r=t.scalingEqually,a=t.scalingYOrSkewingX,s=t.scalingXOrSkewingY,o=t.scaleOrSkewActionName,u=i.Object.prototype.controls;if(u.ml=new i.Control({x:-.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:o}),u.mr=new i.Control({x:.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:o}),u.mb=new i.Control({x:0,y:.5,cursorStyleHandler:e,actionHandler:a,getActionName:o}),u.mt=new i.Control({x:0,y:-.5,cursorStyleHandler:e,actionHandler:a,getActionName:o}),u.tl=new i.Control({x:-.5,y:-.5,cursorStyleHandler:n,actionHandler:r}),u.tr=new i.Control({x:.5,y:-.5,cursorStyleHandler:n,actionHandler:r}),u.bl=new i.Control({x:-.5,y:.5,cursorStyleHandler:n,actionHandler:r}),u.br=new i.Control({x:.5,y:.5,cursorStyleHandler:n,actionHandler:r}),u.mtr=new i.Control({x:0,y:-.5,actionHandler:t.rotationWithSnapping,cursorStyleHandler:t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:\"rotate\"}),i.Textbox){var l=i.Textbox.prototype.controls={};l.mtr=u.mtr,l.tr=u.tr,l.br=u.br,l.tl=u.tl,l.bl=u.bl,l.mt=u.mt,l.mb=u.mb,l.mr=new i.Control({x:.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:\"resizing\"}),l.ml=new i.Control({x:-.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:\"resizing\"})}}()}).call(this,n(\"b639\").Buffer)},\"7aac\":function(t,e,n){\"use strict\";var i=n(\"c532\");t.exports=i.isStandardBrowserEnv()?function(){return{write:function(t,e,n,r,a,s){var o=[];o.push(t+\"=\"+encodeURIComponent(e)),i.isNumber(n)&&o.push(\"expires=\"+new Date(n).toGMTString()),i.isString(r)&&o.push(\"path=\"+r),i.isString(a)&&o.push(\"domain=\"+a),!0===s&&o.push(\"secure\"),document.cookie=o.join(\"; \")},read:function(t){var e=document.cookie.match(new RegExp(\"(^|;\\\\s*)(\"+t+\")=([^;]*)\"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,\"\",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},\"7c37\":function(t,e,n){var i=n(\"605d\");t.exports=function(t){try{if(i)return Function('return require(\"'+t+'\")')()}catch(e){}}},\"81d5\":function(t,e,n){\"use strict\";var i=n(\"7b0b\"),r=n(\"23cb\"),a=n(\"07fa\");t.exports=function(t){var e=i(this),n=a(e),s=arguments.length,o=r(s>1?arguments[1]:void 0,n),u=s>2?arguments[2]:void 0,l=void 0===u?n:r(u,n);while(l>o)e[o++]=t;return e}},\"82f8\":function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"4d64\").includes,a=i.aTypedArray,s=i.exportTypedArrayMethod;s(\"includes\",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},\"83b9\":function(t,e,n){\"use strict\";var i=n(\"d925\"),r=n(\"e683\");t.exports=function(t,e){return t&&!i(e)?r(t,e):e}},\"841c\":function(t,e,n){\"use strict\";var i=n(\"c65b\"),r=n(\"d784\"),a=n(\"825a\"),s=n(\"1d80\"),o=n(\"129f\"),u=n(\"577e\"),l=n(\"dc4a\"),c=n(\"14c3\");r(\"search\",(function(t,e,n){return[function(e){var n=s(this),r=void 0==e?void 0:l(e,t);return r?i(r,e,n):new RegExp(e)[t](u(n))},function(t){var i=a(this),r=u(t),s=n(e,i,r);if(s.done)return s.value;var l=i.lastIndex;o(l,0)||(i.lastIndex=0);var h=c(i,r);return o(i.lastIndex,l)||(i.lastIndex=l),null===h?-1:h.index}]}))},\"848b\":function(t,e,n){\"use strict\";var i=n(\"5cce\").version,r={};[\"object\",\"boolean\",\"number\",\"function\",\"string\",\"symbol\"].forEach((function(t,e){r[t]=function(n){return typeof n===t||\"a\"+(e<1?\"n \":\" \")+t}}));var a={};function s(t,e,n){if(\"object\"!==typeof t)throw new TypeError(\"options must be an object\");var i=Object.keys(t),r=i.length;while(r-- >0){var a=i[r],s=e[a];if(s){var o=t[a],u=void 0===o||s(o,a,t);if(!0!==u)throw new TypeError(\"option \"+a+\" must be \"+u)}else if(!0!==n)throw Error(\"Unknown option \"+a)}}r.transitional=function(t,e,n){function r(t,e){return\"[Axios v\"+i+\"] Transitional option '\"+t+\"'\"+e+(n?\". \"+n:\"\")}return function(n,i,s){if(!1===t)throw new Error(r(i,\" has been removed\"+(e?\" in \"+e:\"\")));return e&&!a[i]&&(a[i]=!0,console.warn(r(i,\" has been deprecated since v\"+e+\" and will be removed in the near future\"))),!t||t(n,i,s)}},t.exports={assertOptions:s,validators:r}},\"84c32\":function(t,e,n){var i=n(\"74e8\");i(\"Uint16\",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},\"857a\":function(t,e,n){var i=n(\"e330\"),r=n(\"1d80\"),a=n(\"577e\"),s=/\"/g,o=i(\"\".replace);t.exports=function(t,e,n,i){var u=a(r(t)),l=\"<\"+e;return\"\"!==n&&(l+=\" \"+n+'=\"'+o(a(i),s,\"&quot;\")+'\"'),l+\">\"+u+\"</\"+e+\">\"}},8962:function(t,e,n){n(\"d3b7\"),n(\"f8c9\"),n(\"5d41\"),n(\"e439\");var i=n(\"9f70\");function r(){return\"undefined\"!==typeof Reflect&&Reflect.get?(t.exports=r=Reflect.get,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports):(t.exports=r=function(t,e,n){var r=i(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},t.exports.__esModule=!0,t.exports[\"default\"]=t.exports),r.apply(this,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"8a59\":function(t,e,n){var i=n(\"74e8\");i(\"Uint8\",(function(t){return function(e,n,i){return t(this,e,n,i)}}),!0)},\"8aa7\":function(t,e,n){var i=n(\"da84\"),r=n(\"d039\"),a=n(\"1c7e\"),s=n(\"ebb5\").NATIVE_ARRAY_BUFFER_VIEWS,o=i.ArrayBuffer,u=i.Int8Array;t.exports=!s||!r((function(){u(1)}))||!r((function(){new u(-1)}))||!a((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||r((function(){return 1!==new u(new o(2),1,void 0).length}))},\"8b09\":function(t,e,n){var i=n(\"74e8\");i(\"Int16\",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},\"8ba4\":function(t,e,n){var i=n(\"23e7\"),r=n(\"eac5\");i({target:\"Number\",stat:!0},{isInteger:r})},\"8bd4\":function(t,e,n){var i=n(\"d066\"),r=n(\"d44e\"),a=\"DOMException\";r(i(a),a)},\"8df4\":function(t,e,n){\"use strict\";var i=n(\"7a77\");function r(t){if(\"function\"!==typeof t)throw new TypeError(\"executor must be a function.\");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,i=n._listeners.length;for(e=0;e<i;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,i=new Promise((function(t){n.subscribe(t),e=t})).then(t);return i.cancel=function(){n.unsubscribe(e)},i},t((function(t){n.reason||(n.reason=new i(t),e(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},r.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},r.source=function(){var t,e=new r((function(e){t=e}));return{token:e,cancel:t}},t.exports=r},\"907a\":function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"07fa\"),a=n(\"5926\"),s=i.aTypedArray,o=i.exportTypedArrayMethod;o(\"at\",(function(t){var e=s(this),n=r(e),i=a(t),o=i>=0?i:n+i;return o<0||o>=n?void 0:e[o]}))},\"90d7\":function(t,e,n){var i=n(\"23e7\"),r=Math.log,a=Math.LN2;i({target:\"Math\",stat:!0},{log2:function(t){return r(t)/a}})},9152:function(t,e){\n/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\ne.read=function(t,e,n,i,r){var a,s,o=8*r-i-1,u=(1<<o)-1,l=u>>1,c=-7,h=n?r-1:0,f=n?-1:1,d=t[e+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=o;c>0;a=256*a+t[e+h],h+=f,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=i;c>0;s=256*s+t[e+h],h+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),a-=l}return(d?-1:1)*s*Math.pow(2,a-i)},e.write=function(t,e,n,i,r,a){var s,o,u,l=8*a-r-1,c=(1<<l)-1,h=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=c?(o=0,s=c):s+h>=1?(o=(e*u-1)*Math.pow(2,r),s+=h):(o=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&o,d+=p,o/=256,r-=8);for(s=s<<r|o,l+=r;l>0;t[n+d]=255&s,d+=p,s/=256,l-=8);t[n+d-p]|=128*g}},9229:function(t,e,n){t.exports=n.p+\"img/waterMark1.f42db845.png\"},\"944a\":function(t,e,n){var i=n(\"746f\");i(\"toStringTag\")},9523:function(t,e){function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.exports=n,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"96cf\":function(t,e){!function(e){\"use strict\";var n,i=Object.prototype,r=i.hasOwnProperty,a=\"function\"===typeof Symbol?Symbol:{},s=a.iterator||\"@@iterator\",o=a.asyncIterator||\"@@asyncIterator\",u=a.toStringTag||\"@@toStringTag\",l=\"object\"===typeof t,c=e.regeneratorRuntime;if(c)l&&(t.exports=c);else{c=e.regeneratorRuntime=l?t.exports:{},c.wrap=x;var h=\"suspendedStart\",f=\"suspendedYield\",d=\"executing\",p=\"completed\",g={},v={};v[s]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(I([])));y&&y!==i&&r.call(y,s)&&(v=y);var _=C.prototype=w.prototype=Object.create(v);S.prototype=_.constructor=C,C.constructor=S,C[u]=S.displayName=\"GeneratorFunction\",c.isGeneratorFunction=function(t){var e=\"function\"===typeof t&&t.constructor;return!!e&&(e===S||\"GeneratorFunction\"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,C):(t.__proto__=C,u in t||(t[u]=\"GeneratorFunction\")),t.prototype=Object.create(_),t},c.awrap=function(t){return{__await:t}},M(T.prototype),T.prototype[o]=function(){return this},c.AsyncIterator=T,c.async=function(t,e,n,i){var r=new T(x(t,e,n,i));return c.isGeneratorFunction(e)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},M(_),_[u]=\"Generator\",_[s]=function(){return this},_.toString=function(){return\"[object Generator]\"},c.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},c.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=n,this.tryEntries.forEach(O),!t)for(var e in this)\"t\"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return o.type=\"throw\",o.arg=t,e.next=i,r&&(e.method=\"next\",e.arg=n),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if(\"root\"===s.tryLoc)return i(\"end\");if(s.tryLoc<=this.prev){var u=r.call(s,\"catchLoc\"),l=r.call(s,\"finallyLoc\");if(u&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error(\"try statement without catch or finally\");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,\"finallyLoc\")&&this.prev<i.finallyLoc){var a=i;break}}a&&(\"break\"===t||\"continue\"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method=\"next\",this.next=a.finallyLoc,g):this.complete(s)},complete:function(t,e){if(\"throw\"===t.type)throw t.arg;return\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=this.arg=t.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if(\"throw\"===i.type){var r=i.arg;O(n)}return r}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,e,i){return this.delegate={iterator:I(t),resultName:e,nextLoc:i},\"next\"===this.method&&(this.arg=n),g}}}function x(t,e,n,i){var r=e&&e.prototype instanceof w?e:w,a=Object.create(r.prototype),s=new P(i||[]);return a._invoke=k(t,n,s),a}function b(t,e,n){try{return{type:\"normal\",arg:t.call(e,n)}}catch(i){return{type:\"throw\",arg:i}}}function w(){}function S(){}function C(){}function M(t){[\"next\",\"throw\",\"return\"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function T(t){function e(n,i,a,s){var o=b(t[n],t,i);if(\"throw\"!==o.type){var u=o.arg,l=u.value;return l&&\"object\"===typeof l&&r.call(l,\"__await\")?Promise.resolve(l.__await).then((function(t){e(\"next\",t,a,s)}),(function(t){e(\"throw\",t,a,s)})):Promise.resolve(l).then((function(t){u.value=t,a(u)}),s)}s(o.arg)}var n;function i(t,i){function r(){return new Promise((function(n,r){e(t,i,n,r)}))}return n=n?n.then(r,r):r()}this._invoke=i}function k(t,e,n){var i=h;return function(r,a){if(i===d)throw new Error(\"Generator is already running\");if(i===p){if(\"throw\"===r)throw a;return L()}n.method=r,n.arg=a;while(1){var s=n.delegate;if(s){var o=A(s,n);if(o){if(o===g)continue;return o}}if(\"next\"===n.method)n.sent=n._sent=n.arg;else if(\"throw\"===n.method){if(i===h)throw i=p,n.arg;n.dispatchException(n.arg)}else\"return\"===n.method&&n.abrupt(\"return\",n.arg);i=d;var u=b(t,e,n);if(\"normal\"===u.type){if(i=n.done?p:f,u.arg===g)continue;return{value:u.arg,done:n.done}}\"throw\"===u.type&&(i=p,n.method=\"throw\",n.arg=u.arg)}}}function A(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,\"throw\"===e.method){if(t.iterator.return&&(e.method=\"return\",e.arg=n,A(t,e),\"throw\"===e.method))return g;e.method=\"throw\",e.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return g}var r=b(i,t.iterator,e.arg);if(\"throw\"===r.type)return e.method=\"throw\",e.arg=r.arg,e.delegate=null,g;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,\"return\"!==e.method&&(e.method=\"next\",e.arg=n),e.delegate=null,g):a:(e.method=\"throw\",e.arg=new TypeError(\"iterator result is not an object\"),e.delegate=null,g)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type=\"normal\",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(E,this),this.reset(!0)}function I(t){if(t){var e=t[s];if(e)return e.call(t);if(\"function\"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){while(++i<t.length)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}return{next:L}}function L(){return{value:n,done:!0}}}(function(){return this}()||Function(\"return this\")())},\"970b\":function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}n(\"d9e2\"),t.exports=i,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"99af\":function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"da84\"),a=n(\"d039\"),s=n(\"e8b5\"),o=n(\"861d\"),u=n(\"7b0b\"),l=n(\"07fa\"),c=n(\"8418\"),h=n(\"65f0\"),f=n(\"1dde\"),d=n(\"b622\"),p=n(\"2d00\"),g=d(\"isConcatSpreadable\"),v=9007199254740991,m=\"Maximum allowed index exceeded\",y=r.TypeError,_=p>=51||!a((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),x=f(\"concat\"),b=function(t){if(!o(t))return!1;var e=t[g];return void 0!==e?!!e:s(t)},w=!_||!x;i({target:\"Array\",proto:!0,forced:w},{concat:function(t){var e,n,i,r,a,s=u(this),o=h(s,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(a=-1===e?s:arguments[e],b(a)){if(r=l(a),f+r>v)throw y(m);for(n=0;n<r;n++,f++)n in a&&c(o,f,a[n])}else{if(f>=v)throw y(m);c(o,f++,a)}return o.length=f,o}})},\"9a8c\":function(t,e,n){\"use strict\";var i=n(\"e330\"),r=n(\"ebb5\"),a=n(\"145e\"),s=i(a),o=r.aTypedArray,u=r.exportTypedArrayMethod;u(\"copyWithin\",(function(t,e){return s(o(this),t,e,arguments.length>2?arguments[2]:void 0)}))},\"9b42\":function(t,e,n){function i(t,e){var n=null==t?null:\"undefined\"!==typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(null!=n){var i,r,a=[],s=!0,o=!1;try{for(n=n.call(t);!(s=(i=n.next()).done);s=!0)if(a.push(i.value),e&&a.length===e)break}catch(u){o=!0,r=u}finally{try{s||null==n[\"return\"]||n[\"return\"]()}finally{if(o)throw r}}return a}}n(\"a4d3\"),n(\"e01a\"),n(\"d3b7\"),n(\"d28b\"),n(\"3ca3\"),n(\"ddb0\"),t.exports=i,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},\"9f70\":function(t,e,n){var i=n(\"36c6\");function r(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=i(t),null===t)break;return t}t.exports=r,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},a078:function(t,e,n){var i=n(\"0366\"),r=n(\"c65b\"),a=n(\"5087\"),s=n(\"7b0b\"),o=n(\"07fa\"),u=n(\"9a1f\"),l=n(\"35a1\"),c=n(\"e95a\"),h=n(\"ebb5\").aTypedArrayConstructor;t.exports=function(t){var e,n,f,d,p,g,v=a(this),m=s(t),y=arguments.length,_=y>1?arguments[1]:void 0,x=void 0!==_,b=l(m);if(b&&!c(b)){p=u(m,b),g=p.next,m=[];while(!(d=r(g,p)).done)m.push(d.value)}for(x&&y>2&&(_=i(_,arguments[2])),n=o(m),f=new(h(v))(n),e=0;n>e;e++)f[e]=x?_(m[e],e):m[e];return f}},a975:function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"b727\").every,a=i.aTypedArray,s=i.exportTypedArrayMethod;s(\"every\",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},a981:function(t,e){t.exports=\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof DataView},aa1f:function(t,e,n){\"use strict\";var i=n(\"83ab\"),r=n(\"d039\"),a=n(\"825a\"),s=n(\"7c73\"),o=n(\"e391\"),u=Error.prototype.toString,l=r((function(){if(i){var t=s(Object.defineProperty({},\"name\",{get:function(){return this===t}}));if(\"true\"!==u.call(t))return!0}return\"2: 1\"!==u.call({message:1,name:2})||\"Error\"!==u.call({})}));t.exports=l?function(){var t=a(this),e=o(t.name,\"Error\"),n=o(t.message);return e?n?e+\": \"+n:e:n}:u},acac:function(t,e,n){\"use strict\";var i=n(\"e330\"),r=n(\"e2cc\"),a=n(\"f183\").getWeakData,s=n(\"825a\"),o=n(\"861d\"),u=n(\"19aa\"),l=n(\"2266\"),c=n(\"b727\"),h=n(\"1a2d\"),f=n(\"69f3\"),d=f.set,p=f.getterFor,g=c.find,v=c.findIndex,m=i([].splice),y=0,_=function(t){return t.frozen||(t.frozen=new x)},x=function(){this.entries=[]},b=function(t,e){return g(t.entries,(function(t){return t[0]===e}))};x.prototype={get:function(t){var e=b(this,t);if(e)return e[1]},has:function(t){return!!b(this,t)},set:function(t,e){var n=b(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=v(this.entries,(function(e){return e[0]===t}));return~e&&m(this.entries,e,1),!!~e}},t.exports={getConstructor:function(t,e,n,i){var c=t((function(t,r){u(t,f),d(t,{type:e,id:y++,frozen:void 0}),void 0!=r&&l(r,t[i],{that:t,AS_ENTRIES:n})})),f=c.prototype,g=p(e),v=function(t,e,n){var i=g(t),r=a(s(e),!0);return!0===r?_(i).set(e,n):r[i.id]=n,t};return r(f,{delete:function(t){var e=g(this);if(!o(t))return!1;var n=a(t);return!0===n?_(e)[\"delete\"](t):n&&h(n,e.id)&&delete n[e.id]},has:function(t){var e=g(this);if(!o(t))return!1;var n=a(t);return!0===n?_(e).has(t):n&&h(n,e.id)}}),r(f,n?{get:function(t){var e=g(this);if(o(t)){var n=a(t);return!0===n?_(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return v(this,t,e)}}:{add:function(t){return v(this,t,!0)}}),c}}},af03:function(t,e,n){var i=n(\"d039\");t.exports=function(t){return i((function(){var e=\"\"[t]('\"');return e!==e.toLowerCase()||e.split('\"').length>3}))}},aff5:function(t,e,n){var i=n(\"23e7\");i({target:\"Number\",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},b39a:function(t,e,n){\"use strict\";var i=n(\"da84\"),r=n(\"2ba4\"),a=n(\"ebb5\"),s=n(\"d039\"),o=n(\"f36a\"),u=i.Int8Array,l=a.aTypedArray,c=a.exportTypedArrayMethod,h=[].toLocaleString,f=!!u&&s((function(){h.call(new u(1))})),d=s((function(){return[1,2].toLocaleString()!=new u([1,2]).toLocaleString()}))||!s((function(){u.prototype.toLocaleString.call([1,2])}));c(\"toLocaleString\",(function(){return r(h,f?o(l(this)):l(this),o(arguments))}),d)},b50d:function(t,e,n){\"use strict\";var i=n(\"c532\"),r=n(\"467f\"),a=n(\"7aac\"),s=n(\"30b5\"),o=n(\"83b9\"),u=n(\"c345\"),l=n(\"3934\"),c=n(\"2d83\"),h=n(\"cafa\"),f=n(\"7a77\");t.exports=function(t){return new Promise((function(e,n){var d,p=t.data,g=t.headers,v=t.responseType;function m(){t.cancelToken&&t.cancelToken.unsubscribe(d),t.signal&&t.signal.removeEventListener(\"abort\",d)}i.isFormData(p)&&delete g[\"Content-Type\"];var y=new XMLHttpRequest;if(t.auth){var _=t.auth.username||\"\",x=t.auth.password?unescape(encodeURIComponent(t.auth.password)):\"\";g.Authorization=\"Basic \"+btoa(_+\":\"+x)}var b=o(t.baseURL,t.url);function w(){if(y){var i=\"getAllResponseHeaders\"in y?u(y.getAllResponseHeaders()):null,a=v&&\"text\"!==v&&\"json\"!==v?y.response:y.responseText,s={data:a,status:y.status,statusText:y.statusText,headers:i,config:t,request:y};r((function(t){e(t),m()}),(function(t){n(t),m()}),s),y=null}}if(y.open(t.method.toUpperCase(),s(b,t.params,t.paramsSerializer),!0),y.timeout=t.timeout,\"onloadend\"in y?y.onloadend=w:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf(\"file:\"))&&setTimeout(w)},y.onabort=function(){y&&(n(c(\"Request aborted\",t,\"ECONNABORTED\",y)),y=null)},y.onerror=function(){n(c(\"Network Error\",t,null,y)),y=null},y.ontimeout=function(){var e=t.timeout?\"timeout of \"+t.timeout+\"ms exceeded\":\"timeout exceeded\",i=t.transitional||h;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(c(e,t,i.clarifyTimeoutError?\"ETIMEDOUT\":\"ECONNABORTED\",y)),y=null},i.isStandardBrowserEnv()){var S=(t.withCredentials||l(b))&&t.xsrfCookieName?a.read(t.xsrfCookieName):void 0;S&&(g[t.xsrfHeaderName]=S)}\"setRequestHeader\"in y&&i.forEach(g,(function(t,e){\"undefined\"===typeof p&&\"content-type\"===e.toLowerCase()?delete g[e]:y.setRequestHeader(e,t)})),i.isUndefined(t.withCredentials)||(y.withCredentials=!!t.withCredentials),v&&\"json\"!==v&&(y.responseType=t.responseType),\"function\"===typeof t.onDownloadProgress&&y.addEventListener(\"progress\",t.onDownloadProgress),\"function\"===typeof t.onUploadProgress&&y.upload&&y.upload.addEventListener(\"progress\",t.onUploadProgress),(t.cancelToken||t.signal)&&(d=function(t){y&&(n(!t||t&&t.type?new f(\"canceled\"):t),y.abort(),y=null)},t.cancelToken&&t.cancelToken.subscribe(d),t.signal&&(t.signal.aborted?d():t.signal.addEventListener(\"abort\",d))),p||(p=null),y.send(p)}))}},b639:function(t,e,n){\"use strict\";(function(t){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\nvar i=n(\"1fb5\"),r=n(\"9152\"),a=n(\"e3db\");function s(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&\"function\"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(o()<e)throw new RangeError(\"Invalid typed array length\");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=l.prototype):(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(t,e,n);if(\"number\"===typeof t){if(\"string\"===typeof e)throw new Error(\"If encoding is specified then the first argument must be a string\");return d(this,t)}return c(this,t,e,n)}function c(t,e,n,i){if(\"number\"===typeof e)throw new TypeError('\"value\" argument must not be a number');return\"undefined\"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?v(t,e,n,i):\"string\"===typeof e?p(t,e,n):m(t,e)}function h(t){if(\"number\"!==typeof t)throw new TypeError('\"size\" argument must be a number');if(t<0)throw new RangeError('\"size\" argument must not be negative')}function f(t,e,n,i){return h(e),e<=0?u(t,e):void 0!==n?\"string\"===typeof i?u(t,e).fill(n,i):u(t,e).fill(n):u(t,e)}function d(t,e){if(h(e),t=u(t,e<0?0:0|y(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e,n){if(\"string\"===typeof n&&\"\"!==n||(n=\"utf8\"),!l.isEncoding(n))throw new TypeError('\"encoding\" must be a valid string encoding');var i=0|x(e,n);t=u(t,i);var r=t.write(e,n);return r!==i&&(t=t.slice(0,r)),t}function g(t,e){var n=e.length<0?0:0|y(e.length);t=u(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function v(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError(\"'offset' is out of bounds\");if(e.byteLength<n+(i||0))throw new RangeError(\"'length' is out of bounds\");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),l.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=l.prototype):t=g(t,e),t}function m(t,e){if(l.isBuffer(e)){var n=0|y(e.length);return t=u(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if(\"undefined\"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||\"length\"in e)return\"number\"!==typeof e.length||et(e.length)?u(t,0):g(t,e);if(\"Buffer\"===e.type&&a(e.data))return g(t,e.data)}throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")}function y(t){if(t>=o())throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+o().toString(16)+\" bytes\");return 0|t}function _(t){return+t!=t&&(t=0),l.alloc(+t)}function x(t,e){if(l.isBuffer(t))return t.length;if(\"undefined\"!==typeof ArrayBuffer&&\"function\"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;\"string\"!==typeof t&&(t=\"\"+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case\"ascii\":case\"latin1\":case\"binary\":return n;case\"utf8\":case\"utf-8\":case void 0:return Z(t).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*n;case\"hex\":return n>>>1;case\"base64\":return $(t).length;default:if(i)return Z(t).length;e=(\"\"+e).toLowerCase(),i=!0}}function b(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return\"\";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return\"\";if(n>>>=0,e>>>=0,n<=e)return\"\";t||(t=\"utf8\");while(1)switch(t){case\"hex\":return F(this,e,n);case\"utf8\":case\"utf-8\":return I(this,e,n);case\"ascii\":return R(this,e,n);case\"latin1\":case\"binary\":return N(this,e,n);case\"base64\":return P(this,e,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return B(this,e,n);default:if(i)throw new TypeError(\"Unknown encoding: \"+t);t=(t+\"\").toLowerCase(),i=!0}}function w(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function S(t,e,n,i,r){if(0===t.length)return-1;if(\"string\"===typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if(\"string\"===typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:C(t,e,n,i,r);if(\"number\"===typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&\"function\"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):C(t,[e],n,i,r);throw new TypeError(\"val must be string, number or Buffer\")}function C(t,e,n,i,r){var a,s=1,o=t.length,u=e.length;if(void 0!==i&&(i=String(i).toLowerCase(),\"ucs2\"===i||\"ucs-2\"===i||\"utf16le\"===i||\"utf-16le\"===i)){if(t.length<2||e.length<2)return-1;s=2,o/=2,u/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var c=-1;for(a=n;a<o;a++)if(l(t,a)===l(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*s}else-1!==c&&(a-=a-c),c=-1}else for(n+u>o&&(n=o-u),a=n;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(l(t,a+f)!==l(e,f)){h=!1;break}if(h)return a}return-1}function M(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var a=e.length;if(a%2!==0)throw new TypeError(\"Invalid hex string\");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var o=parseInt(e.substr(2*s,2),16);if(isNaN(o))return s;t[n+s]=o}return s}function T(t,e,n,i){return tt(Z(e,t.length-n),t,n,i)}function k(t,e,n,i){return tt(K(e),t,n,i)}function A(t,e,n,i){return k(t,e,n,i)}function E(t,e,n,i){return tt($(e),t,n,i)}function O(t,e,n,i){return tt(Q(e,t.length-n),t,n,i)}function P(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);var i=[],r=e;while(r<n){var a,s,o,u,l=t[r],c=null,h=l>239?4:l>223?3:l>191?2:1;if(r+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:a=t[r+1],128===(192&a)&&(u=(31&l)<<6|63&a,u>127&&(c=u));break;case 3:a=t[r+1],s=t[r+2],128===(192&a)&&128===(192&s)&&(u=(15&l)<<12|(63&a)<<6|63&s,u>2047&&(u<55296||u>57343)&&(c=u));break;case 4:a=t[r+1],s=t[r+2],o=t[r+3],128===(192&a)&&128===(192&s)&&128===(192&o)&&(u=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&o,u>65535&&u<1114112&&(c=u))}null===c?(c=65533,h=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}return D(i)}e.Buffer=l,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:s(),e.kMaxLength=o(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return c(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,\"undefined\"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return f(null,t,e,n)},l.allocUnsafe=function(t){return d(null,t)},l.allocUnsafeSlow=function(t){return d(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError(\"Arguments must be Buffers\");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,a=Math.min(n,i);r<a;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},l.concat=function(t,e){if(!a(t))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=l.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!l.isBuffer(s))throw new TypeError('\"list\" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},l.byteLength=x,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var e=0;e<t;e+=2)w(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?\"\":0===arguments.length?I(this,0,t):b.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t=\"\",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString(\"hex\",0,n).match(/.{2}/g).join(\" \"),this.length>n&&(t+=\" ... \")),\"<Buffer \"+t+\">\"},l.prototype.compare=function(t,e,n,i,r){if(!l.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError(\"out of range index\");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var a=r-i,s=n-e,o=Math.min(a,s),u=this.slice(i,r),c=t.slice(e,n),h=0;h<o;++h)if(u[h]!==c[h]){a=u[h],s=c[h];break}return a<s?-1:s<a?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return S(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return S(this,t,e,n,!1)},l.prototype.write=function(t,e,n,i){if(void 0===e)i=\"utf8\",n=this.length,e=0;else if(void 0===n&&\"string\"===typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");e|=0,isFinite(n)?(n|=0,void 0===i&&(i=\"utf8\")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");i||(i=\"utf8\");for(var a=!1;;)switch(i){case\"hex\":return M(this,t,e,n);case\"utf8\":case\"utf-8\":return T(this,t,e,n);case\"ascii\":return k(this,t,e,n);case\"latin1\":case\"binary\":return A(this,t,e,n);case\"base64\":return E(this,t,e,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return O(this,t,e,n);default:if(a)throw new TypeError(\"Unknown encoding: \"+i);i=(\"\"+i).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function D(t){var e=t.length;if(e<=L)return String.fromCharCode.apply(String,t);var n=\"\",i=0;while(i<e)n+=String.fromCharCode.apply(String,t.slice(i,i+=L));return n}function R(t,e,n){var i=\"\";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function N(t,e,n){var i=\"\";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function F(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r=\"\",a=e;a<n;++a)r+=J(t[a]);return r}function B(t,e,n){for(var i=t.slice(e,n),r=\"\",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function z(t,e,n){if(t%1!==0||t<0)throw new RangeError(\"offset is not uint\");if(t+e>n)throw new RangeError(\"Trying to access beyond buffer length\")}function j(t,e,n,i,r,a){if(!l.isBuffer(t))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(e>r||e<a)throw new RangeError('\"value\" argument is out of bounds');if(n+i>t.length)throw new RangeError(\"Index out of range\")}function U(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,a=Math.min(t.length-n,2);r<a;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function V(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,a=Math.min(t.length-n,4);r<a;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function W(t,e,n,i,r,a){if(n+i>t.length)throw new RangeError(\"Index out of range\");if(n<0)throw new RangeError(\"Index out of range\")}function G(t,e,n,i,a){return a||W(t,e,n,4,34028234663852886e22,-34028234663852886e22),r.write(t,e,n,i,23,4),n+4}function H(t,e,n,i,a){return a||W(t,e,n,8,17976931348623157e292,-17976931348623157e292),r.write(t,e,n,i,52,8),n+8}l.prototype.slice=function(t,e){var n,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=l.prototype;else{var r=e-t;n=new l(r,void 0);for(var a=0;a<r;++a)n[a]=this[a+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var i=this[t],r=1,a=0;while(++a<e&&(r*=256))i+=this[t+a]*r;return i},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var i=this[t+--e],r=1;while(e>0&&(r*=256))i+=this[t+--e]*r;return i},l.prototype.readUInt8=function(t,e){return e||z(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||z(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||z(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||z(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var i=this[t],r=1,a=0;while(++a<e&&(r*=256))i+=this[t+a]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var i=e,r=1,a=this[t+--i];while(i>0&&(r*=256))a+=this[t+--i]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*e)),a},l.prototype.readInt8=function(t,e){return e||z(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||z(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||z(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||z(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||z(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||z(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||z(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;j(this,t,e,n,r,0)}var a=1,s=0;this[e]=255&t;while(++s<n&&(a*=256))this[e+s]=t/a&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;j(this,t,e,n,r,0)}var a=n-1,s=1;this[e+a]=255&t;while(--a>=0&&(s*=256))this[e+a]=t/s&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):V(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);j(this,t,e,n,r-1,-r)}var a=0,s=1,o=0;this[e]=255&t;while(++a<n&&(s*=256))t<0&&0===o&&0!==this[e+a-1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+n},l.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);j(this,t,e,n,r-1,-r)}var a=n-1,s=1,o=0;this[e+a]=255&t;while(--a>=0&&(s*=256))t<0&&0===o&&0!==this[e+a+1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):V(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return G(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return G(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return H(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return H(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError(\"targetStart out of bounds\");if(n<0||n>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(i<0)throw new RangeError(\"sourceEnd out of bounds\");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,a=i-n;if(this===t&&n<e&&e<i)for(r=a-1;r>=0;--r)t[r+e]=this[r+n];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},l.prototype.fill=function(t,e,n,i){if(\"string\"===typeof t){if(\"string\"===typeof e?(i=e,e=0,n=this.length):\"string\"===typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&\"string\"!==typeof i)throw new TypeError(\"encoding must be a string\");if(\"string\"===typeof i&&!l.isEncoding(i))throw new TypeError(\"Unknown encoding: \"+i)}else\"number\"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError(\"Out of range index\");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),\"number\"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=l.isBuffer(t)?t:Z(new l(t,i).toString()),o=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%o]}return this};var X=/[^+\\/0-9A-Za-z-_]/g;function Y(t){if(t=q(t).replace(X,\"\"),t.length<2)return\"\";while(t.length%4!==0)t+=\"=\";return t}function q(t){return t.trim?t.trim():t.replace(/^\\s+|\\s+$/g,\"\")}function J(t){return t<16?\"0\"+t.toString(16):t.toString(16)}function Z(t,e){var n;e=e||1/0;for(var i=t.length,r=null,a=[],s=0;s<i;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error(\"Invalid code point\");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function K(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function Q(t,e){for(var n,i,r,a=[],s=0;s<t.length;++s){if((e-=2)<0)break;n=t.charCodeAt(s),i=n>>8,r=n%256,a.push(r),a.push(i)}return a}function $(t){return i.toByteArray(Y(t))}function tt(t,e,n,i){for(var r=0;r<i;++r){if(r+n>=e.length||r>=t.length)break;e[r+n]=t[r]}return r}function et(t){return t!==t}}).call(this,n(\"c8ba\"))},b6b7:function(t,e,n){var i=n(\"ebb5\"),r=n(\"4840\"),a=i.TYPED_ARRAY_CONSTRUCTOR,s=i.aTypedArrayConstructor;t.exports=function(t){return s(r(t,t[a]))}},b7ef:function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"d066\"),a=n(\"5c6c\"),s=n(\"9bf2\").f,o=n(\"1a2d\"),u=n(\"19aa\"),l=n(\"7156\"),c=n(\"e391\"),h=n(\"cf98\"),f=n(\"c770\"),d=n(\"c430\"),p=\"DOMException\",g=r(\"Error\"),v=r(p),m=function(){u(this,y);var t=arguments.length,e=c(t<1?void 0:arguments[0]),n=c(t<2?void 0:arguments[1],\"Error\"),i=new v(e,n),r=g(e);return r.name=p,s(i,\"stack\",a(1,f(r.stack,1))),l(i,this,m),i},y=m.prototype=v.prototype,_=\"stack\"in g(p),x=\"stack\"in new v(1,2),b=_&&!x;i({global:!0,forced:d||b},{DOMException:b?m:v});var w=r(p),S=w.prototype;if(S.constructor!==w)for(var C in d||s(S,\"constructor\",a(1,w)),h)if(o(h,C)){var M=h[C],T=M.s;o(w,T)||s(w,T,a(6,M.c))}},bb2f:function(t,e,n){var i=n(\"d039\");t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bc3a:function(t,e,n){t.exports=n(\"cee4\")},bf19:function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"c65b\");i({target:\"URL\",proto:!0,enumerable:!0},{toJSON:function(){return r(URL.prototype.toString,this)}})},c135:function(t,e){function n(t){if(Array.isArray(t))return t}t.exports=n,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},c19f:function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"da84\"),a=n(\"621a\"),s=n(\"2626\"),o=\"ArrayBuffer\",u=a[o],l=r[o];i({global:!0,forced:l!==u},{ArrayBuffer:u}),s(o)},c1ac:function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"b727\").filter,a=n(\"1448\"),s=i.aTypedArray,o=i.exportTypedArrayMethod;o(\"filter\",(function(t){var e=r(s(this),t,arguments.length>1?arguments[1]:void 0);return a(this,e)}))},c240:function(t,e,n){function i(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}n(\"d9e2\"),t.exports=i,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},c345:function(t,e,n){\"use strict\";var i=n(\"c532\"),r=[\"age\",\"authorization\",\"content-length\",\"content-type\",\"etag\",\"expires\",\"from\",\"host\",\"if-modified-since\",\"if-unmodified-since\",\"last-modified\",\"location\",\"max-forwards\",\"proxy-authorization\",\"referer\",\"retry-after\",\"user-agent\"];t.exports=function(t){var e,n,a,s={};return t?(i.forEach(t.split(\"\\n\"),(function(t){if(a=t.indexOf(\":\"),e=i.trim(t.substr(0,a)).toLowerCase(),n=i.trim(t.substr(a+1)),e){if(s[e]&&r.indexOf(e)>=0)return;s[e]=\"set-cookie\"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+\", \"+n:n}})),s):s}},c401:function(t,e,n){\"use strict\";var i=n(\"c532\"),r=n(\"4c3d\");t.exports=function(t,e,n){var a=this||r;return i.forEach(n,(function(n){t=n.call(a,t,e)})),t}},c532:function(t,e,n){\"use strict\";var i=n(\"1d2b\"),r=Object.prototype.toString;function a(t){return Array.isArray(t)}function s(t){return\"undefined\"===typeof t}function o(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&\"function\"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function u(t){return\"[object ArrayBuffer]\"===r.call(t)}function l(t){return\"[object FormData]\"===r.call(t)}function c(t){var e;return e=\"undefined\"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&u(t.buffer),e}function h(t){return\"string\"===typeof t}function f(t){return\"number\"===typeof t}function d(t){return null!==t&&\"object\"===typeof t}function p(t){if(\"[object Object]\"!==r.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function g(t){return\"[object Date]\"===r.call(t)}function v(t){return\"[object File]\"===r.call(t)}function m(t){return\"[object Blob]\"===r.call(t)}function y(t){return\"[object Function]\"===r.call(t)}function _(t){return d(t)&&y(t.pipe)}function x(t){return\"[object URLSearchParams]\"===r.call(t)}function b(t){return t.trim?t.trim():t.replace(/^\\s+|\\s+$/g,\"\")}function w(){return(\"undefined\"===typeof navigator||\"ReactNative\"!==navigator.product&&\"NativeScript\"!==navigator.product&&\"NS\"!==navigator.product)&&(\"undefined\"!==typeof window&&\"undefined\"!==typeof document)}function S(t,e){if(null!==t&&\"undefined\"!==typeof t)if(\"object\"!==typeof t&&(t=[t]),a(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function C(){var t={};function e(e,n){p(t[n])&&p(e)?t[n]=C(t[n],e):p(e)?t[n]=C({},e):a(e)?t[n]=e.slice():t[n]=e}for(var n=0,i=arguments.length;n<i;n++)S(arguments[n],e);return t}function M(t,e,n){return S(e,(function(e,r){t[r]=n&&\"function\"===typeof e?i(e,n):e})),t}function T(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}t.exports={isArray:a,isArrayBuffer:u,isBuffer:o,isFormData:l,isArrayBufferView:c,isString:h,isNumber:f,isObject:d,isPlainObject:p,isUndefined:s,isDate:g,isFile:v,isBlob:m,isFunction:y,isStream:_,isURLSearchParams:x,isStandardBrowserEnv:w,forEach:S,merge:C,extend:M,trim:b,stripBOM:T}},c60d:function(t,e,n){var i=n(\"1a2d\");t.exports=function(t){return void 0!==t&&(i(t,\"value\")||i(t,\"writable\"))}},c740:function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"b727\").findIndex,a=n(\"44d2\"),s=\"findIndex\",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),i({target:\"Array\",proto:!0,forced:o},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},c8af:function(t,e,n){\"use strict\";var i=n(\"c532\");t.exports=function(t,e){i.forEach(t,(function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])}))}},c8d2:function(t,e,n){var i=n(\"5e77\").PROPER,r=n(\"d039\"),a=n(\"5899\"),s=\"​᠎\";t.exports=function(t){return r((function(){return!!a[t]()||s[t]()!==s||i&&a[t].name!==t}))}},c906:function(t,e,n){var i=n(\"23e7\"),r=n(\"4fad\");i({target:\"Object\",stat:!0,forced:Object.isExtensible!==r},{isExtensible:r})},c973:function(t,e,n){function i(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var s=t.apply(e,n);function o(t){i(s,r,a,o,u,\"next\",t)}function u(t){i(s,r,a,o,u,\"throw\",t)}o(void 0)}))}}n(\"d3b7\"),t.exports=r,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},ca91:function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"d58f\").left,a=i.aTypedArray,s=i.exportTypedArrayMethod;s(\"reduce\",(function(t){var e=arguments.length;return r(a(this),t,e,e>1?arguments[1]:void 0)}))},cafa:function(t,e,n){\"use strict\";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},cb29:function(t,e,n){var i=n(\"23e7\"),r=n(\"81d5\"),a=n(\"44d2\");i({target:\"Array\",proto:!0},{fill:r}),a(\"fill\")},cd26:function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=i.aTypedArray,a=i.exportTypedArrayMethod,s=Math.floor;a(\"reverse\",(function(){var t,e=this,n=r(e).length,i=s(n/2),a=0;while(a<i)t=e[a],e[a++]=e[--n],e[n]=t;return e}))},cee4:function(t,e,n){\"use strict\";var i=n(\"c532\"),r=n(\"1d2b\"),a=n(\"0a06\"),s=n(\"4a7b\"),o=n(\"4c3d\");function u(t){var e=new a(t),n=r(a.prototype.request,e);return i.extend(n,a.prototype,e),i.extend(n,e),n.create=function(e){return u(s(t,e))},n}var l=u(o);l.Axios=a,l.Cancel=n(\"7a77\"),l.CancelToken=n(\"8df4\"),l.isCancel=n(\"2e67\"),l.VERSION=n(\"5cce\").version,l.all=function(t){return Promise.all(t)},l.spread=n(\"0df6\"),l.isAxiosError=n(\"5f02\"),t.exports=l,t.exports.default=l},cee8:function(t,e,n){var i=n(\"23e7\"),r=n(\"861d\"),a=n(\"f183\").onFreeze,s=n(\"bb2f\"),o=n(\"d039\"),u=Object.preventExtensions,l=o((function(){u(1)}));i({target:\"Object\",stat:!0,forced:l,sham:!s},{preventExtensions:function(t){return u&&r(t)?u(a(t)):t}})},cf98:function(t,e){t.exports={IndexSizeError:{s:\"INDEX_SIZE_ERR\",c:1,m:1},DOMStringSizeError:{s:\"DOMSTRING_SIZE_ERR\",c:2,m:0},HierarchyRequestError:{s:\"HIERARCHY_REQUEST_ERR\",c:3,m:1},WrongDocumentError:{s:\"WRONG_DOCUMENT_ERR\",c:4,m:1},InvalidCharacterError:{s:\"INVALID_CHARACTER_ERR\",c:5,m:1},NoDataAllowedError:{s:\"NO_DATA_ALLOWED_ERR\",c:6,m:0},NoModificationAllowedError:{s:\"NO_MODIFICATION_ALLOWED_ERR\",c:7,m:1},NotFoundError:{s:\"NOT_FOUND_ERR\",c:8,m:1},NotSupportedError:{s:\"NOT_SUPPORTED_ERR\",c:9,m:1},InUseAttributeError:{s:\"INUSE_ATTRIBUTE_ERR\",c:10,m:1},InvalidStateError:{s:\"INVALID_STATE_ERR\",c:11,m:1},SyntaxError:{s:\"SYNTAX_ERR\",c:12,m:1},InvalidModificationError:{s:\"INVALID_MODIFICATION_ERR\",c:13,m:1},NamespaceError:{s:\"NAMESPACE_ERR\",c:14,m:1},InvalidAccessError:{s:\"INVALID_ACCESS_ERR\",c:15,m:1},ValidationError:{s:\"VALIDATION_ERR\",c:16,m:0},TypeMismatchError:{s:\"TYPE_MISMATCH_ERR\",c:17,m:1},SecurityError:{s:\"SECURITY_ERR\",c:18,m:1},NetworkError:{s:\"NETWORK_ERR\",c:19,m:1},AbortError:{s:\"ABORT_ERR\",c:20,m:1},URLMismatchError:{s:\"URL_MISMATCH_ERR\",c:21,m:1},QuotaExceededError:{s:\"QUOTA_EXCEEDED_ERR\",c:22,m:1},TimeoutError:{s:\"TIMEOUT_ERR\",c:23,m:1},InvalidNodeTypeError:{s:\"INVALID_NODE_TYPE_ERR\",c:24,m:1},DataCloneError:{s:\"DATA_CLONE_ERR\",c:25,m:1}}},cfc3:function(t,e,n){var i=n(\"74e8\");i(\"Float32\",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},d139:function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"b727\").find,a=i.aTypedArray,s=i.exportTypedArrayMethod;s(\"find\",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},d58f:function(t,e,n){var i=n(\"da84\"),r=n(\"59ed\"),a=n(\"7b0b\"),s=n(\"44ad\"),o=n(\"07fa\"),u=i.TypeError,l=function(t){return function(e,n,i,l){r(n);var c=a(e),h=s(c),f=o(c),d=t?f-1:0,p=t?-1:1;if(i<2)while(1){if(d in h){l=h[d],d+=p;break}if(d+=p,t?d<0:f<=d)throw u(\"Reduce of empty array with no initial value\")}for(;t?d>=0:f>d;d+=p)d in h&&(l=n(l,h[d],d,c));return l}};t.exports={left:l(!1),right:l(!0)}},d5d6:function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"b727\").forEach,a=i.aTypedArray,s=i.exportTypedArrayMethod;s(\"forEach\",(function(t){r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},d86b:function(t,e,n){var i=n(\"d039\");t.exports=i((function(){if(\"function\"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,\"a\",{value:8})}}))},d925:function(t,e,n){\"use strict\";t.exports=function(t){return/^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(t)}},dca8:function(t,e,n){var i=n(\"23e7\"),r=n(\"bb2f\"),a=n(\"d039\"),s=n(\"861d\"),o=n(\"f183\").onFreeze,u=Object.freeze,l=a((function(){u(1)}));i({target:\"Object\",stat:!0,forced:l,sham:!r},{freeze:function(t){return u&&s(t)?u(o(t)):t}})},ded3:function(t,e,n){n(\"b64b\"),n(\"a4d3\"),n(\"4de4\"),n(\"d3b7\"),n(\"e439\"),n(\"159b\"),n(\"dbb4\");var i=n(\"9523\");function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}t.exports=a,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];\".\"===r?t.splice(i,1):\"..\"===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift(\"..\");return t}function i(t){\"string\"!==typeof t&&(t+=\"\");var e,n=0,i=-1,r=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!r){n=e+1;break}}else-1===i&&(r=!1,i=e+1);return-1===i?\"\":t.slice(n,i)}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}e.resolve=function(){for(var e=\"\",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var s=a>=0?arguments[a]:t.cwd();if(\"string\"!==typeof s)throw new TypeError(\"Arguments to path.resolve must be strings\");s&&(e=s+\"/\"+e,i=\"/\"===s.charAt(0))}return e=n(r(e.split(\"/\"),(function(t){return!!t})),!i).join(\"/\"),(i?\"/\":\"\")+e||\".\"},e.normalize=function(t){var i=e.isAbsolute(t),s=\"/\"===a(t,-1);return t=n(r(t.split(\"/\"),(function(t){return!!t})),!i).join(\"/\"),t||i||(t=\".\"),t&&s&&(t+=\"/\"),(i?\"/\":\"\")+t},e.isAbsolute=function(t){return\"/\"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if(\"string\"!==typeof t)throw new TypeError(\"Arguments to path.join must be strings\");return t})).join(\"/\"))},e.relative=function(t,n){function i(t){for(var e=0;e<t.length;e++)if(\"\"!==t[e])break;for(var n=t.length-1;n>=0;n--)if(\"\"!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var r=i(t.split(\"/\")),a=i(n.split(\"/\")),s=Math.min(r.length,a.length),o=s,u=0;u<s;u++)if(r[u]!==a[u]){o=u;break}var l=[];for(u=o;u<r.length;u++)l.push(\"..\");return l=l.concat(a.slice(o)),l.join(\"/\")},e.sep=\"/\",e.delimiter=\":\",e.dirname=function(t){if(\"string\"!==typeof t&&(t+=\"\"),0===t.length)return\".\";for(var e=t.charCodeAt(0),n=47===e,i=-1,r=!0,a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),47===e){if(!r){i=a;break}}else r=!1;return-1===i?n?\"/\":\".\":n&&1===i?\"/\":t.slice(0,i)},e.basename=function(t,e){var n=i(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){\"string\"!==typeof t&&(t+=\"\");for(var e=-1,n=0,i=-1,r=!0,a=0,s=t.length-1;s>=0;--s){var o=t.charCodeAt(s);if(47!==o)-1===i&&(r=!1,i=s+1),46===o?-1===e?e=s:1!==a&&(a=1):-1!==e&&(a=-1);else if(!r){n=s+1;break}}return-1===e||-1===i||0===a||1===a&&e===i-1&&e===n+1?\"\":t.slice(e,i)};var a=\"b\"===\"ab\".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(\"4362\"))},dfb9:function(t,e,n){var i=n(\"07fa\");t.exports=function(t,e){var n=0,r=i(e),a=new t(r);while(r>n)a[n]=e[n++];return a}},e3db:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return\"[object Array]\"==n.call(t)}},e58c:function(t,e,n){\"use strict\";var i=n(\"2ba4\"),r=n(\"fc6a\"),a=n(\"5926\"),s=n(\"07fa\"),o=n(\"a640\"),u=Math.min,l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0,h=o(\"lastIndexOf\"),f=c||!h;t.exports=f?function(t){if(c)return i(l,this,arguments)||0;var e=r(this),n=s(e),o=n-1;for(arguments.length>1&&(o=u(o,a(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in e&&e[o]===t)return o||0;return-1}:l},e683:function(t,e,n){\"use strict\";t.exports=function(t,e){return e?t.replace(/\\/+$/,\"\")+\"/\"+e.replace(/^\\/+/,\"\"):t}},e91f:function(t,e,n){\"use strict\";var i=n(\"ebb5\"),r=n(\"4d64\").indexOf,a=i.aTypedArray,s=i.exportTypedArrayMethod;s(\"indexOf\",(function(t){return r(a(this),t,arguments.length>1?arguments[1]:void 0)}))},ea81:function(t,e,n){\"use strict\";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"bodys\"},[i(\"a\",{staticClass:\"as\",attrs:{href:\"#\"},on:{click:t.mis}},[i(\"img\",{attrs:{src:t.why[1],alt:\"\"}})]),i(\"Shou\",{ref:\"shou\"}),i(\"div\",{staticClass:\"title\"},[i(\"div\",{staticClass:\"problems\"},[t.con?i(\"div\",{staticClass:\"cons\"},[i(\"div\",{staticClass:\"title\"},[t._v(\"Why report problems\")]),i(\"div\",{staticClass:\"text\"},[t._v(\"Please describe the problems you have encountered. You can also report trademark or copyright violations \")]),i(\"div\",[i(\"el-input\",{attrs:{type:\"textarea\",autosize:{minRows:7,maxRows:7}},model:{value:t.textarea1,callback:function(e){t.textarea1=e},expression:\"textarea1\"}})],1),i(\"div\",{staticClass:\"button\"},[i(\"button\",{on:{click:t.closebs}},[t._v(\"cancel\")]),i(\"button\",{on:{click:t.sub}},[t._v(\"Report\")])])]):t._e()]),i(\"div\",{staticClass:\"div_left\"},[i(\"div\",{staticClass:\"left\"},[i(\"div\",{staticClass:\"model\"},[t._v(\"Model\")]),i(\"div\",{staticClass:\"imgsList\"},t._l(t.nameList,(function(e,n){return i(\"div\",{key:n,staticClass:\"imglist\",on:{click:function(n){return t.initObj(e.id)}}},[i(\"img\",{attrs:{src:e.img,\"default-img\":e.img,alt:\" \"}})])})),0)])]),i(\"div\",{staticClass:\"div_content\"},[i(\"div\",{staticClass:\"comtent\"},[i(\"div\",{staticClass:\"content_img\"},[i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.imgShowFlag1,expression:\"imgShowFlag1\"}],staticClass:\"content_img1\",staticStyle:{\"background-color\":\"yellow\"}},[i(\"canvas\",{style:{width:t.clipWidth+\"px\",height:t.clipHeight+\"px\"},attrs:{id:\"canvasBox3\",width:t.clipWidth*t.kMultiple,height:t.clipHeight*t.kMultiple}})]),i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.canvasShowFlag,expression:\"canvasShowFlag\"}],staticClass:\"babylon-container\"},[i(\"div\",{ref:\"canvasClip\",staticClass:\"canvas-clip\",style:{width:t.clipWidth+\"px\",height:t.clipHeight+\"px\"}},[i(\"img\",{staticClass:\"markImg1\",attrs:{src:n(\"9229\"),alt:\"\"}}),i(\"div\",{staticClass:\"markDiv\"},[i(\"canvas\",{ref:\"lineCanvas\",attrs:{width:t.clipWidth,height:t.clipHeight}})]),i(\"div\",{staticClass:\"canvas-contsiner\"},[i(\"canvas\",{ref:\"bargraphCanvas\",style:{width:t.clipWidth+\"px\",height:t.clipHeight+\"px\"},attrs:{id:\"canvasBox\",width:t.clipWidth*t.kMultiple,height:t.clipHeight*t.kMultiple}})]),i(\"div\",{staticStyle:{display:\"none\"}},[i(\"canvas\",{ref:\"bargraphCanvas\",staticStyle:{display:\"none\"},style:{width:t.clipWidth+\"px\",height:t.clipHeight+\"px\"},attrs:{id:\"canvasBox1\",width:t.clipWidth*t.kMultiple,height:t.clipHeight*t.kMultiple}})])])]),i(\"div\",{ref:\"foxcontainer\",staticStyle:{position:\"absolute\",top:\"0\",left:\"0\",width:\"6rem\",height:\"6rem\",\"z-index\":\"1\"}},[i(\"div\",{attrs:{id:\"container\"}})]),i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.imgShowFlag2,expression:\"imgShowFlag2\"}],staticClass:\"ordinary-picture\",on:{click:t.switchPicture}},[i(\"img\",{attrs:{src:t.conteent_img,alt:\"\"}})]),i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.imgShowFlag3,expression:\"imgShowFlag3\"}],staticClass:\"ordinary-picture\",on:{click:t.returnObj}},[i(\"img\",{attrs:{src:t.modelImg,alt:\"\"}})])]),i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.slideFlag,expression:\"slideFlag\"}],staticClass:\"slider content-silder\"},[i(\"el-slider\",{attrs:{\"show-input\":\"\",min:20,max:t.maxScale},on:{input:t.sliderInput,change:t.sliderChange},model:{value:t.values,callback:function(e){t.values=e},expression:\"values\"}})],1)])]),i(\"div\",{staticClass:\"rigth\"},[i(\"div\",{staticClass:\"text\"},[i(\"div\",{staticClass:\"title_name title_one\"},[i(\"div\",{staticClass:\"spans_1\"},[t._v(\"Pattern ID\")]),i(\"div\",{staticClass:\"spans_2\"},[t._v(t._s(t.ontent_datas.imgSn))])]),i(\"div\",{staticClass:\"title_name\"},[i(\"div\",{staticClass:\"spans_1\"},[t._v(\"Included Files\")]),i(\"div\",{staticClass:\"spans_2\"},[t._v(t._s(t.ontent_datas.format))])]),i(\"div\",{staticClass:\"title_name\"},[i(\"div\",{staticClass:\"spans_1\"},[t._v(\"Size\")]),i(\"div\",{staticClass:\"spans_2\"},[t._v(t._s(t.imgSize))])]),i(\"div\",{staticClass:\"title_name\"},[i(\"div\",{staticClass:\"spans_1\"},[t._v(\"Print Size\")]),i(\"div\",{staticClass:\"spans_2\"},[t._v(t._s(t.printSize1))])]),t.printSize2?i(\"div\",{staticClass:\"title_name\"},[i(\"div\",{staticClass:\"spans_1\"},[t._v(\" \")]),i(\"div\",{staticClass:\"spans_2\"},[t._v(t._s(t.printSize2))])]):t._e(),i(\"div\",{staticClass:\"title_name\"},[i(\"div\",{staticClass:\"spans_1\"},[t._v(\"In Repeat + Seamless Tile\")]),i(\"div\",{staticClass:\"spans_2\"},[i(\"img\",{attrs:{src:t.ontent_datas.isRepeat>0?t.state[1]:t.state[0],alt:\"\"}})])]),i(\"div\",{staticClass:\"title_name\"},[i(\"div\",{staticClass:\"spans_1\"},[t._v(\"Layered Photoshop PSD\")]),i(\"div\",{staticClass:\"spans_2\"},[i(\"img\",{attrs:{src:t.ontent_datas.isLayer>0?t.state[1]:t.state[0],alt:\"\"}})])]),i(\"div\",{staticClass:\"title_name\"},[i(\"div\",{staticClass:\"spans_1\"},[t._v(\"Vector AI Or EPS\")]),i(\"div\",{staticClass:\"spans_2\"},[i(\"img\",{attrs:{src:t.ontent_datas.isVector>0?t.state[1]:t.state[0],alt:\"\"}})])])]),i(\"div\",{staticClass:\"in_2\"},t._l(t.ku,(function(e,n){return i(\"span\",{key:n},[0==n||2==n&&t.ontent_datas.isRepeat>0||3==n&&t.ontent_datas.isLayer>0||1==n&&t.ontent_datas.isLarge>0?i(\"img\",{attrs:{src:e,alt:\"\"}}):t._e()])})),0),i(\"div\",{staticClass:\"option\"},[t._m(0),i(\"div\",{staticClass:\"content\"},[i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.ontent_datas.isBuyout<=0,expression:\"ontent_datas.isBuyout <= 0\"}]},[i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.duan,expression:\"duan\"}]},[t.ontent_datas.isUse>0?i(\"div\",{staticClass:\"content_list\",on:{click:function(e){return t.content_list_bools(4)}}},[i(\"div\",{staticClass:\"content_list_bolls lusk\"},[i(\"img\",{directives:[{name:\"show\",rawName:\"v-show\",value:4!=t.licenseType,expression:\"licenseType != 4\"}],attrs:{src:t.ab[0],alt:\"\"}}),i(\"img\",{directives:[{name:\"show\",rawName:\"v-show\",value:4==t.licenseType,expression:\"licenseType == 4\"}],attrs:{src:t.ab[1],alt:\"\"}})]),t._m(1)]):t._e(),t.ontent_datas.isUse>0?i(\"div\",{staticClass:\"content_list\",on:{click:function(e){return t.content_list_bools(5)}}},[i(\"div\",{staticClass:\"content_list_bolls lusk\"},[i(\"img\",{directives:[{name:\"show\",rawName:\"v-show\",value:5!=t.licenseType,expression:\"licenseType != 5\"}],attrs:{src:t.ab[0],alt:\"\"}}),i(\"img\",{directives:[{name:\"show\",rawName:\"v-show\",value:5==t.licenseType,expression:\"licenseType == 5\"}],attrs:{src:t.ab[1],alt:\"\"}})]),t._m(2)]):t._e()]),i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.duan,expression:\"!duan\"}]},[t.ontent_datas.isUse>0?i(\"div\",{staticClass:\"content_list\",on:{click:function(e){return t.content_list_bools(4)}}},[i(\"div\",{staticClass:\"content_list_bolls\"},[i(\"img\",{directives:[{name:\"show\",rawName:\"v-show\",value:4!=t.licenseType,expression:\"licenseType != 4\"}],attrs:{src:t.ab[0],alt:\"\"}}),i(\"img\",{directives:[{name:\"show\",rawName:\"v-show\",value:4==t.licenseType,expression:\"licenseType == 4\"}],attrs:{src:t.ab[1],alt:\"\"}})]),t._m(3)]):t._e()])]),t.ontent_datas.isBuyout>0?i(\"div\",{staticClass:\"content_list\",on:{click:function(e){return t.content_list_bools(3)}}},[i(\"div\",{staticClass:\"content_list_bolls \"},[i(\"img\",{directives:[{name:\"show\",rawName:\"v-show\",value:3!=t.licenseType,expression:\"licenseType != 3\"}],attrs:{src:t.ab[0],alt:\"\"}}),i(\"img\",{directives:[{name:\"show\",rawName:\"v-show\",value:3==t.licenseType,expression:\"licenseType == 3\"}],attrs:{src:t.ab[1],alt:\"\"}})]),t._m(4),i(\"div\",{staticClass:\"wonder\"},[i(\"img\",{attrs:{src:t.wonder,alt:\"\"}}),t._m(5)])]):t._e()])]),i(\"div\",{staticClass:\"price\"},[i(\"div\",[t._v(\"Price\")]),i(\"div\",[t._v(\"$\"+t._s(t.licensePrice))])]),i(\"div\",{staticClass:\"operlist\"},[i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==t.ontent_datas.hasCollection,expression:\"ontent_datas.hasCollection==0\"}],staticClass:\"operlist_2 btn_1\",on:{click:function(e){return t.shou(t.ontent_datas)}}},[i(\"img\",{staticClass:\"gx1\",attrs:{src:t.gx[1],alt:\"\"}}),t._v(\" Collect \")]),i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.ontent_datas.hasCollection>0,expression:\"ontent_datas.hasCollection > 0\"}],staticClass:\"operlist_2  btn_12\",on:{click:function(e){return t.shou(t.ontent_datas)}}},[t._v(\" Collect \")]),i(\"button\",{directives:[{name:\"show\",rawName:\"v-show\",value:2==t.ontent_datas.isBuy,expression:\"ontent_datas.isBuy == 2\"}],staticClass:\"operlist_2 bag  downs\",on:{click:function(e){return e.preventDefault(),t.thisDownload(t.ontent_datas)}}},[t._v(\" Download File \"),i(\"svg\",{staticClass:\"download\",attrs:{width:\"0.2rem\",height:\"0.2rem\",viewBox:\"0 0 20 20\",fill:\"\",xmlns:\"http://www.w3.org/2000/svg\"}},[i(\"path\",{attrs:{\"fill-rule\":\"evenodd\",\"clip-rule\":\"evenodd\",d:\"M6.7569 6.32977C7.0467 6.32977 7.2819 6.56618 7.2819 6.85747C7.2819 7.14876 7.0467 7.38516 6.7569 7.38516H6.0982C4.9684 7.38516 4.05 8.30758 4.05 9.44248V12.8795C4.05 14.0187 4.9712 14.9446 6.1045 14.9446H13.9025C15.0309 14.9446 15.95 14.0208 15.95 12.8866V9.45022C15.95 8.3111 15.0281 7.38516 13.8962 7.38516H13.2438C12.954 7.38516 12.7188 7.14876 12.7188 6.85747C12.7188 6.56618 12.954 6.32977 13.2438 6.32977H13.8962C15.6077 6.32977 17 7.72993 17 9.45022V12.8866C17 14.6034 15.6098 16 13.9025 16H6.1045C4.393 16 3 14.6005 3 12.8795V9.44248C3 7.72571 4.3895 6.32977 6.0982 6.32977H6.7569ZM10.0006 3C10.2904 3 10.5256 3.23641 10.5256 3.5277L10.525 10.7227L11.6701 9.56737C11.8745 9.36051 12.2063 9.36051 12.4121 9.56596C12.6172 9.77141 12.6179 10.1056 12.4135 10.3125L10.377 12.3674C10.3571 12.388 10.3356 12.4069 10.3126 12.424L10.3723 12.3719C10.3497 12.3949 10.3253 12.4155 10.2992 12.4337C10.2834 12.4447 10.2672 12.4547 10.2506 12.4638C10.2425 12.4682 10.2341 12.4725 10.2255 12.4766C10.2103 12.4839 10.1946 12.4904 10.1786 12.4963C10.1705 12.4991 10.1625 12.5018 10.1544 12.5043C10.1347 12.5104 10.1144 12.5154 10.0937 12.5191C10.0891 12.5199 10.0848 12.5206 10.0806 12.5213C10.0639 12.5239 10.0464 12.5257 10.0288 12.5266C10.0193 12.5271 10.0099 12.5274 10.0006 12.5274L9.9727 12.5253L9.92935 12.5226C9.92626 12.5222 9.92318 12.5217 9.92011 12.5212L10.0006 12.5274C9.96928 12.5274 9.93824 12.5246 9.90781 12.5191C9.88676 12.5154 9.86653 12.5104 9.8468 12.5044C9.83891 12.5019 9.83117 12.4993 9.82349 12.4965C9.8074 12.4908 9.79152 12.4842 9.77605 12.4768C9.76665 12.4723 9.7573 12.4675 9.7481 12.4624C9.73517 12.4553 9.72271 12.4477 9.71059 12.4396C9.7023 12.4341 9.694 12.4282 9.68587 12.422C9.66587 12.407 9.647 12.3905 9.62938 12.3728L9.62886 12.3719L7.58766 10.3125C7.38326 10.1056 7.38396 9.77141 7.58906 9.56596C7.79486 9.36051 8.12666 9.36051 8.33106 9.56737L9.475 10.7227L9.47556 3.5277C9.47556 3.23641 9.71076 3 10.0006 3Z\",fill:\"#222222\"}})]),i(\"div\",{staticStyle:{\"background-color\":\"green\",position:\"absolute\",top:\"0\",left:\"0\",height:\"0.46rem\",opacity:\"0.4\"},style:{width:t.progress+\"%\"}})]),i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:1==t.ontent_datas.isBuy,expression:\"ontent_datas.isBuy == 1\"}],staticClass:\"operlist_2 bag btn_x\",on:{click:function(e){return e.preventDefault(),t.addShopingCars.apply(null,arguments)}}},[t._v(\" View Cart\"),i(\"img\",{staticClass:\"gx1\",attrs:{src:t.gx[2],alt:\"\"}})]),i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==t.ontent_datas.isBuy,expression:\"ontent_datas.isBuy == 0\"}],staticClass:\"operlist_2 btn_x\",on:{click:function(e){return e.preventDefault(),t.addShopingCar.apply(null,arguments)}}},[i(\"img\",{staticClass:\"gx1\",attrs:{src:t.gx[0],alt:\"\"}}),t._v(\"Add To Bag \")])])])]),i(\"div\",{staticClass:\"middle\"},[i(\"div\",{staticStyle:{display:\"table\"}},[i(\"div\",{staticStyle:{display:\"table-row\"}},[i(\"div\",{staticClass:\"titles\"},[t._v(\" Product Types \")]),i(\"div\",{staticClass:\"contents\"},[t._l(t.types,(function(e,n){return[t._v(\" \"+t._s(n>0?\",\":\"\")),\"\"!=e?i(\"a\",{key:n,attrs:{href:\"javascript:void(0)\"},on:{click:function(n){return t.gos(e)}}},[t._v(t._s(e))]):t._e()]}))],2)]),i(\"div\",{staticStyle:{display:\"table-row\"}},[i(\"div\",{staticClass:\"titles\"},[t._v(\" Categories \")]),i(\"div\",{staticClass:\"contents\"},[t._l(t.categories,(function(e,n){return[t._v(\" \"+t._s(n>0?\",\":\"\")),\"\"!=e?i(\"a\",{key:n,attrs:{href:\"javascript:void(0)\"},on:{click:function(n){return t.gos(e)}}},[t._v(t._s(e))]):t._e()]}))],2)]),i(\"div\",{staticStyle:{display:\"table-row\"}},[i(\"div\",{staticClass:\"titles\"},[t._v(\" Tags \")]),i(\"div\",{staticClass:\"contents\"},[t._l(t.tags,(function(e,n){return[t._v(\" \"+t._s(n>0?\",\":\"\")),\"\"!=e?i(\"a\",{key:n,attrs:{href:\"javascript:void(0)\"},on:{click:function(n){return t.gos(e)}}},[t._v(t._s(e))]):t._e()]}))],2)])])]),i(\"div\",{staticClass:\"Related\"},[t._v(\"Related Designs\")]),i(\"Cell\",{style:{marginTop:\"0.16rem \"},attrs:{linelist:t.linelist,consHeight:t.consHeight,deleteIcon:!1},on:{shou:t.shou}}),i(\"Bottom\")],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"title\"},[n(\"div\",{staticClass:\"one\"},[t._v(\"License Type\")]),n(\"div\",{staticClass:\"two\"},[n(\"a\",{attrs:{href:\"/html/Comparison.html\",target:\"_blank\"}},[t._v(\"Compare Licenses\")])]),n(\"i\",{staticClass:\"el-icon-warning-outline\"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"con_idv \"},[n(\"div\",[t._v(\"Commercial (layered file/JPEG)\")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"con_idv\"},[n(\"div\",[t._v(\"Commercial Unlimited (layered file/JPEG)\")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"con_idv\"},[n(\"div\",[t._v(\"Commercial (Layered PSD + JPEG)\")]),n(\"div\",[t._v(\"Up to 500 end products for sale\")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"con_idv\"},[n(\"div\",[t._v(\"Commercial (Layered PSD + JPEG)\")]),n(\"div\",[t._v(\"Up to 500 end products for sale\")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"wonder_text\"},[n(\"div\",{staticClass:\"demo2\"},[n(\"em\",[t._v(\"◆\")]),n(\"span\",[t._v(\"◆\")]),n(\"div\",{staticClass:\"texts\"},[t._v(\" This product is a buyout picture, and will be automatically removed from the shelf after purchase You can't return the goods after purchase. Please contact customer service if there is any quality problem. Please confirm the follow-up operation \")])])])}];n(\"d3b7\");function a(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function o(t){a(s,i,r,o,u,\"next\",t)}function u(t){a(s,i,r,o,u,\"throw\",t)}o(void 0)}))}}n(\"96cf\"),n(\"e9c4\"),n(\"ac1f\"),n(\"5319\"),n(\"159b\"),n(\"1276\"),n(\"d81d\"),n(\"c740\"),n(\"ddb0\"),n(\"b0c0\"),n(\"4d63\"),n(\"c607\"),n(\"2c3e\"),n(\"25f0\");var o=n(\"bc3a\"),u=n.n(o),l=n(\"a8bd\"),c=n(\"ca00\"),h=n(\"6900\"),f=n(\"980f\"),d=n(\"7a94\"),p=n(\"2cbb\"),g=n.n(p),v={components:{Bottom:l[\"a\"],Cell:h[\"a\"],Shou:f[\"a\"],fabric:d[\"fabric\"]},data:function(){return{locking:!1,con:!1,textarea1:\"\",productId:null,downLoad:!1,duan:!0,su:!1,p:null,licenseType:0,licensePrice:\"\",linelist:[],consHeight:0,listnumber:0,maxScale:400,progress:0,imgSize:\"\",printSize1:\"\",printSize2:\"\",content_list_boll:[!0,!1,!1],candidate_imglist:[],conteent_img:\"\",conteent_img2:\"\",values:100,ontent_datas:\"\",why:[n(\"7190\"),n(\"522c\")],gx:[n(\"42e9\"),n(\"0f32\"),n(\"39a9\")],wonder:n(\"6515\"),state:[n(\"5610\"),n(\"4ccf\")],ab:[n(\"5997\"),n(\"a8fa\")],blankImage:n(\"9757\"),ku:[n(\"deaa\"),n(\"de5e\"),n(\"cedc\"),n(\"5810\")],list:[],psdList:[],newPsdList:[],newModelsList:[],modelsList:[],nameList:[],newNameList:[],repatFlag:3,isRepeat:0,modelId:0,begin:{x:0,y:0},imgPxWidth:null,imgPxHeight:null,calculateWidth:null,modelArray:[],imgArray:[],clipX:null,clipY:null,boxWidth:null,boxHeight:null,calculateHeiht:null,imgShowFlag:1,obj:{},clipWidth:600,clipHeight:600,boxMax:600,kMultiple:3,img:null,initCanvas:null,myCanvas:null,imgSn:null,zoom:1,fabObj:null,zoomPoint:null,repatGroup:[],group:null,data1:null,moveObj:null,arrCross1:[],arrVertical:[],addArr:[],widthNum:0,heightNum:0,moves:{},leftNum:0,rightNum:0,topNum:0,bottomtNum:0,movexy:{},timeOut:0,canvas:null,clipImg:null,foxpsdObj:null,sku:null,ctxLine:null,imgShowFlag1:!0,canvasShowFlag:!1,imgShowFlag2:!1,imgShowFlag3:!1,modelImg:null,slideFlag:!0,types:[],categories:[],tags:[],productNum:0}},watch:{\"$store.state.fontRate\":{handler:function(){this.changeSize()}},value:function(){},consHeight:function(){}},methods:{mis:function(){document.getElementsByClassName(\"as\")[0].style.position=\"absolute\"},sub:function(){if(\"\"==this.textarea1)return this.$message(\"Cannot be empty！\")},closeb:function(){this.con=!0},closebs:function(){this.con=!1},cancel:function(t){console.log(t)},addOutlineCar:function(){var t=this,e=JSON.parse(localStorage.getItem(\"sshopping_car\"));if(e&&e.some((function(e){return e.productId==t.productId})))this.$message(\"Product exist\");else{e||(e=[]);var n={productId:this.productId,imgType:this.licenseType,productNum:1};e.push(n),localStorage.setItem(\"sshopping_car\",JSON.stringify(e)),this.ontent_datas.isBuy=1,this.locking=!1}},addShopingCar:function(){var t=this,e=this;e.locking||(e.locking=!0,gtag(\"event\",\"add_to_cart\",{currency:\"USD\",items:[{item_id:this.ontent_datas.productId,item_name:this.ontent_datas.imgSn,price:this.licensePrice,currency:\"USD\",quantity:1}],value:this.licensePrice}),localStorage.user?this.rq({url:\"/api/cart/save\",method:\"post\",param:{productId:this.ontent_datas.productId,imgType:this.licenseType},onError:function(){e.locking=!1},vm:e}).then((function(n){200==n.code?n.user?e.ontent_datas.isBuy=1:e.addOutlineCar():601==n.code||680==n.code?e.addOutlineCar():t.$message(n.desc),e.locking=!1})):this.addOutlineCar())},addShopingCars:function(){this.$router.push(\"/shoppingcar\")},shou:function(t){this.$refs.shou.shou(t)},details:function(t,e){var n=this.$router.resolve({path:\"/detail/\"+t});window.open(n.href,\"_self\")},thisDownload:function(t){var e=this,n=this;n.rq({url:\"/api/product/downUrl\",method:\"post\",param:{id:n.ontent_datas.productId},onError:function(){},_this:n}).then((function(t){if(200==t.code){t.data=t.data.replace(\"http:\",\"https:\");var i=/\\.(\\w*?)\\?/,r=i.exec(t.data)[1];if(\"zip\"==r.toLowerCase()){var a=document.createElement(\"a\");a.setAttribute(\"href\",t.data),a.setAttribute(\"download\",n.ontent_datas.imgSn+\".\"+r),a.setAttribute(\"target\",\"_self\"),a.click()}else Object(c[\"a\"])(n,t.data,n.ontent_datas.imgSn+\".\"+r)}else e.$message(t.desc)}))},changeSize:function(){null!=this.p&&this.p.length>0&&Object(c[\"b\"])(this.p,this)},selectAlikeById:function(){var t=this,e=this;this.rq({url:\"/api/product/selectAlikeById\",method:\"post\",param:{productId:e.productId},onError:function(){},vm:e}).then((function(n){200==n.code?(e.p=n.data,void 0==e.p?(t.linelist=null,t.consHeight=0):Object(c[\"b\"])(e.p,e)):t.$message(n.desc)}))},content_list_bools:function(t){this.licenseType=t,this.calcPrice()},candidate_click:function(t){\"\"==this.conteent_img2&&(this.conteent_img2=this.conteent_img),this.conteent_img=t},content_img2_click:function(){var t=this.conteent_img;this.conteent_img=this.conteent_img2,this.conteent_img2=t},calcPrice:function(){var t=this,e=t.licenseType,n=t.ontent_datas.price,i=t.ontent_datas.priceOnce;3==e?t.licensePrice=i:5==e?t.licensePrice=n:4==e?t.licensePrice=Math.round(.8*n*100)/100:1==e&&(t.licensePrice=Math.round(.5*n*100)/100)},candidate:function(){var t=this,e=this;this.rq({url:\"/api/product/selectById\",method:\"post\",param:{productId:e.productId},onError:function(){},vm:e}).then((function(n){if(e.repatFlag=0,200==n.code){if(e.ontent_datas=n.data,n.user&&n.user.id);else{var i=JSON.parse(localStorage.getItem(\"sshopping_car\"));i&&i.length>0&&i.some((function(t){return t.productId==e.productId}))&&(e.ontent_datas.isBuy=1)}if(e.ontent_datas.isUse>0?e.licenseType=5:e.licenseType=3,1==e.ontent_datas.isBuyout&&(e.licenseType=3),t.calcPrice(),e.types=[],e.ontent_datas.isRepeat=0,e.ontent_datas.isLayer=0,n.data.styleStr.split(\",\").forEach((function(t){\"\"!=t&&(e.types.push(t),\"In Repeat\"!=t&&\"Cyclic graph\"!=t||(e.ontent_datas.isRepeat=1),(t.indexOf(\"Simple layered\")>=0||\"Layered file\"==t||\"Color separation\"==t)&&(e.ontent_datas.isLayer=1))})),n.data.imgSize)if(\"矢量图\"==n.data.imgSize)e.imgSize=\"Vector image\";else{var r,a,s=300,o=\"\",u=\"\";if(n.data.imgSize.indexOf(\"cm\")>=0?(r=n.data.imgSize.replace(\"cm\",\"\"),r=r.replace(\"cm\",\"\"),a=r.split(\"*\"),a[0]&&(o=Math.round(a[0]/254*100*s)),a[1]&&(u=Math.round(a[1]/254*100*s))):(r=n.data.imgSize.replace(\"像素\",\"\"),r=r.replace(\"像素\",\"\"),a=r.split(\"*\"),o=a[0],u=a[1]),o&&u){e.imgSize=o+\"*\"+u;var l=\"\",c=\"\",h=\"\",f=\"\";o&&(l=Math.round(254*o/300)/100,c=Math.round(254*o/600)/100),u&&(h=Math.round(254*u/300)/100,f=Math.round(254*u/600)/100),e.printSize1=l+\"*\"+h+\"cm(300dpi)\",e.printSize2=c+\"*\"+f+\"cm(600dpi)\"}else e.imgSize=n.data.imgSize,e.printSize1=\"\",e.printSize2=\"\"}else e.imgSize=\"\",e.printSize1=\"\",e.printSize2=\"\";if(e.categories=[],n.data.productFicationStr.split(\",\").forEach((function(t){\"\"!=t&&e.categories.push(t)})),e.tags=[],n.data.label.split(\",\").forEach((function(t){\"\"!=t&&e.tags.push(t)})),n.data.entityStr.split(\",\").forEach((function(t){\"\"!=t&&e.tags.push(t)})),n.data.sceneStr.split(\",\").forEach((function(t){\"\"!=t&&e.tags.push(t)})),n.data.seasonStr.split(\",\").forEach((function(t){\"\"!=t&&e.tags.push(t)})),n.data.fashionStr.split(\",\").forEach((function(t){\"\"!=t&&e.tags.push(t)})),e.isRepeat=n.data.isRepeat,e.conteent_img=e.$imgServer+n.data.cover,e.loadImg(e.conteent_img),e.nameList[0].img=e.conteent_img,e.nameList[0].bigpsd.img=e.conteent_img,0!=n.data.attachList.length){e.candidate_imglist=n.data.attachList;for(var d=0;d<e.candidate_imglist.length;d++)e.candidate_imglist[d].src=e.$imgServer+e.candidate_imglist[d].src;for(var p=0;p<20;p++)e.candidate_imglist.push(e.candidate_imglist[0])}t.su=!0}else t.$message(n.desc)}))},getPSD:function(){var t=this;return s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getName();case 2:t.getlist();case 3:case\"end\":return e.stop()}}),e)})))()},getName:function(){var t=this;u()({url:\"/name.js\"}).then((function(e){t.nameList=e.data}))},getList1:function(){var t=this;for(var e in this.psdList)this.nameList.map((function(n){var i;if(n.bigpsd&&(i=n.bigpsd.title),i===t.psdList[e].title){var r=Object.assign(t.psdList[e],n.bigpsd);n.bigpsd=r,t.newModelsList.push(n)}}))},getlist2:function(){var t=this;for(var e in this.getList1(),this.nameList)this.newModelsList.map((function(n){t.nameList[e].title==n.title&&(t.nameList[e]=n)}))},getlist:function(){this.getlist2()},zoomIn:function(t){var e=this;e.repatFlag=3,console.log(t),e.zoomPoint=new d[\"fabric\"].Point(e.clipWidth/2,e.clipHeight/2),e.value=parseInt(100*e.imgScale),e.myCanvas.zoomToPoint(e.zoomPoint,e.imgScale);var n=e.myCanvas.getObjects();1==e.repatFlag?n.forEach((function(t){t.left>=(e.clipWidth-t.width*t.scaleX)/2&&t.left<(e.clipWidth+t.width*t.scaleX)/2&&(e.fabObj=t)})):2==e.repatFlag?n.forEach((function(t){t.top>=(e.clipHeight-t.height*t.scaleY)/2&&t.top<(e.clipHeight+t.height*t.scaleY)/2&&(e.fabObj=t)})):0==e.repatFlag?e.fabObj=n[0]:3==e.repatFlag&&n.some((function(t){return!(t.left>=(e.clipWidth-t.width*t.scaleX)/2&&t.left<(e.clipWidth+t.width*t.scaleX)/2&&t.top>=(e.clipHeight-t.height*t.scaleY)/2&&t.top<(e.clipHeight+t.height*t.scaleY)/2)||(e.fabObj=t,!1)})),n.forEach((function(n){2!=e.repatFlag&&0!=e.repatFlag||(n.left=(n.left-e.clipWidth/2)/t+e.clipWidth/2),1!=e.repatFlag&&0!=e.repatFlag||(n.top=(n.top-e.clipWidth/2)/t+e.clipWidth/2),e.myCanvas.remove(n),e.myCanvas.add(n)})),2!=e.repatFlag&&0!=e.repatFlag||(e.fabObj.left<e.clipWidth/2-e.clipWidth/2/e.imgScale?e.fabObj.left=e.clipWidth/2-e.clipWidth/2/e.imgScale:e.fabObj.left>e.clipWidth/2+e.clipWidth/2/e.imgScale&&(e.fabObj.left=e.clipWidth/2+e.clipWidth/2/e.imgScale)),1!=e.repatFlag&&0!=e.repatFlag||(e.fabObj.top<e.clipWidth/2-e.clipWidth/2/e.imgScale?e.fabObj.top=e.clipWidth/2-e.clipWidth/2/e.imgScale:e.fabObj.top>e.clipWidth/2+e.clipWidth/2/e.imgScale&&(e.fabObj.top=e.clipWidth/2+e.clipWidth/2/e.imgScale)),e.myCanvas.remove(e.fabObj),e.myCanvas.add(e.fabObj);var i=0,r=0,a=0,s=0;e.repatGroup.forEach((function(t){t.left<e.fabObj.left&&t.top==e.fabObj.top?i++:t.left>e.fabObj.left&&t.top==e.fabObj.top&&r++,t.top<e.fabObj.top&&t.left==e.fabObj.left?a++:t.top>e.fabObj.top&&t.left==e.fabObj.left&&s++})),e.leftNum=Math.max(e.leftNum,i),e.rightNum=Math.max(e.rightNum,r),e.topNum=Math.max(e.topNum,a),e.bottomtNum=Math.max(e.bottomtNum,s);var o=document.createElement(\"img\");o.crossOrigin=\"Anonymous\",o.src=e.img.src;var u=Math.ceil(((e.fabObj.left-e.clipWidth/2)*e.imgScale+e.clipWidth/2-e.fabObj.width*e.fabObj.scaleX*e.imgScale/2)/(e.fabObj.width*e.fabObj.scaleX*e.imgScale)),l=Math.ceil(((e.clipWidth/2-e.fabObj.left)*e.imgScale+e.clipWidth/2-e.fabObj.width*e.fabObj.scaleX*e.imgScale/2)/(e.fabObj.width*e.fabObj.scaleX*e.imgScale)),c=Math.ceil(((e.fabObj.top-e.clipWidth/2)*e.imgScale+e.clipWidth/2-e.fabObj.height*e.fabObj.scaleX*e.imgScale/2)/(e.fabObj.height*e.fabObj.scaleX*e.imgScale)),h=Math.ceil(((e.clipWidth/2-e.fabObj.top)*e.imgScale+e.clipWidth/2-e.fabObj.height*e.fabObj.scaleX*e.imgScale/2)/(e.fabObj.height*e.fabObj.scaleX*e.imgScale));if(1==e.repatFlag){if(u>e.leftNum){var f=e.leftNum+1;e.leftNum=u;for(var p=f;p<=u;p++){e.moves.left=e.fabObj.left-e.fabObj.scaleY*e.fabObj.width*p,e.moves.top=e.fabObj.top;var g=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:e.moves.top,left:e.moves.left,originX:\"center\",originY:\"center\"});e.myCanvas.add(g),e.repatGroup.push(g),e.data1=JSON.parse(JSON.stringify(e.repatGroup))}}if(l>e.rightNum){var v=e.rightNum+1;e.rightNum=l;for(var m=v;m<=l;m++){e.moves.left=e.fabObj.left+e.fabObj.scaleY*e.fabObj.width*m,e.moves.top=e.fabObj.top;var y=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:e.moves.top,left:e.moves.left,originX:\"center\",originY:\"center\"});e.myCanvas.add(y),e.repatGroup.push(y),e.data1=JSON.parse(JSON.stringify(e.repatGroup))}}}else if(2==e.repatFlag){if(c>e.topNum){var _=e.topNum+1;e.topNum=c;for(var x=_;x<=c;x++){e.moves.left=e.fabObj.left,e.moves.top=e.fabObj.top-e.fabObj.scaleY*e.fabObj.height*x;var b=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:e.moves.top,left:e.moves.left,originX:\"center\",originY:\"center\"});e.myCanvas.add(b),e.repatGroup.push(b),e.data1=JSON.parse(JSON.stringify(e.repatGroup))}}if(h>e.bottomtNum){var w=e.bottomtNum+1;e.bottomtNum=h;for(var S=w;S<=h;S++){e.moves.left=e.fabObj.left,e.moves.top=e.fabObj.top+e.fabObj.scaleY*e.fabObj.height*S;var C=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:e.moves.top,left:e.moves.left,originX:\"center\",originY:\"center\"});e.myCanvas.add(C),e.repatGroup.push(C),e.data1=JSON.parse(JSON.stringify(e.repatGroup))}}}else if(3==e.repatFlag){if(u>e.leftNum){var M=e.leftNum+1;e.leftNum=u;for(var T=M;T<=u;T++)for(var k=-1*e.bottomtNum;k<=e.topNum;k++){e.moves.left=e.fabObj.left-e.fabObj.scaleY*e.fabObj.width*T,e.moves.top=e.fabObj.top-e.fabObj.scaleX*e.fabObj.height*k;var A=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:e.moves.top,left:e.moves.left,originX:\"center\",originY:\"center\"});e.myCanvas.add(A),e.repatGroup.push(A),e.data1=JSON.parse(JSON.stringify(e.repatGroup))}}if(l>e.rightNum){var E=e.rightNum+1;e.rightNum=l;for(var O=E;O<=l;O++)for(var P=-1*e.bottomtNum;P<=e.topNum;P++){e.moves.left=e.fabObj.left+e.fabObj.scaleY*e.fabObj.width*O,e.moves.top=e.fabObj.top-e.fabObj.scaleX*e.fabObj.height*P;var I=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:e.moves.top,left:e.moves.left,originX:\"center\",originY:\"center\"});e.myCanvas.add(I),e.repatGroup.push(I),e.data1=JSON.parse(JSON.stringify(e.repatGroup))}}if(c>e.topNum){var L=e.topNum+1;e.topNum=c;for(var D=L;D<=c;D++)for(var R=-1*e.rightNum;R<=e.leftNum;R++){e.moves.left=e.fabObj.left-e.fabObj.scaleX*e.fabObj.width*R,e.moves.top=e.fabObj.top-e.fabObj.scaleY*e.fabObj.height*D;var N=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:e.moves.top,left:e.moves.left,originX:\"center\",originY:\"center\"});e.myCanvas.add(N),e.repatGroup.push(N),e.data1=JSON.parse(JSON.stringify(e.repatGroup))}}if(h>e.bottomtNum){var F=e.bottomtNum+1;e.bottomtNum=h;for(var B=F;B<=h;B++)for(var z=-1*e.rightNum;z<=e.leftNum;z++){e.moves.left=e.fabObj.left-e.fabObj.scaleX*e.fabObj.width*z,e.moves.top=e.fabObj.top+e.fabObj.scaleY*e.fabObj.height*B;var j=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:e.moves.top,left:e.moves.left,originX:\"center\",originY:\"center\"});e.myCanvas.add(j),e.repatGroup.push(j),e.data1=JSON.parse(JSON.stringify(e.repatGroup))}}}e.drawImageClip()},initObj:function(t){var e=this,n=this;n.modelId=t,this.nameList.findIndex((function(i){if(i.id===t)if(0===i.id||10001===i.id){n.canvasShowFlag=!1,e.imgShowFlag1=!0,e.imgShowFlag2=!1,e.imgShowFlag3=!1;var r=1;if(r=n.imgPxWidth>n.imgPxHeight?n.calculateWidth/n.imgPxWidth/n.kMultiple:n.calculateHeiht/n.imgPxHeight/n.kMultiple,0===i.id){e.maxScale=400;var a=new d[\"fabric\"].Image(n.img,{hasControls:!1,scaleX:r,scaleY:r,angle:0,originX:\"center\",originY:\"center\",top:n.clipWidth/2,left:n.clipHeight/2}),s=n.initCanvas.getObjects();s.forEach((function(t){n.initCanvas.remove(t)})),n.initCanvas.add(a)}else e.maxScale=200,d[\"fabric\"].Image.fromURL(n.nameList[1].img,(function(t){t.hasControls=!1,t.scaleX=r/2,t.scaleY=r/2,t.angle=0,t.originX=\"center\",t.originY=\"center\",t.top=n.clipWidth/2,t.left=n.clipHeight/2;var e=n.initCanvas.getObjects();e.forEach((function(t){n.initCanvas.remove(t)})),n.initCanvas.add(t)}));n.values=100,n.sliderHandler(n.values)}else if(e.maxScale=200,n.canvasShowFlag=!0,n.imgShowFlag1=!1,n.imgShowFlag2=!0,n.imgShowFlag3=!1,10001===i.id){if(e.repatFlag=3,n.modelImg=i.bigpsd.img,e.obj.name=i.name,e.obj.modelSize=i.modelSize,e.obj.bigpsd=i.bigpsd,-1!=i.modelSize.indexOf(\"cm\")){var o=i.modelSize,u=new RegExp(\"cm\",\"g\");i.modelSize=o.replace(u,\"\"),e.modelArray=i.modelSize.split(\"*\")}else e.modelArray=i.modelSize.split(\"*\");e.myCanvas.setZoom(1),e.myCanvas.absolutePan({x:0,y:0}),e.drawLine(),e.switchImgShow(),e.loading(e.img,!0),e.imgShowFlag2=!0,e.imgShowFlag3=!1,n.values=100}else{if(e.repatFlag=3,n.modelImg=i.bigpsd.img,e.obj.name=i.name,e.obj.modelSize=i.modelSize,e.obj.bigpsd=i.bigpsd,-1!=i.modelSize.indexOf(\"cm\")){var l=i.modelSize,c=new RegExp(\"cm\",\"g\");i.modelSize=l.replace(c,\"\"),e.modelArray=i.modelSize.split(\"*\")}else e.modelArray=i.modelSize.split(\"*\");e.myCanvas.setZoom(1),e.myCanvas.absolutePan({x:0,y:0}),e.drawLine(),e.switchImgShow(),e.loading(e.img),e.imgShowFlag2=!0,e.imgShowFlag3=!1,n.values=100}}))},init:function(t,e,n,i){var r=this;r.imgArray=e,this.imgSn=i,r.repatFlag=0,r.imgX=0,r.imgY=0},loadImg:function(t){var e=this,n=new Image;n.setAttribute(\"crossOrigin\",\"anonymous\"),n.src=t,n.onload=function(){var t=Math.round(254*n.width/300)/100,i=Math.round(254*n.height/300)/100;e.imgArray=[t,i],e.imgPxWidth=e.img.width,e.imgPxHeight=e.img.height,e.imgScale=1,e.switchImgShow();var r=1;r=e.imgPxWidth>e.imgPxHeight?e.calculateWidth/e.imgPxWidth/e.kMultiple:e.calculateHeiht/e.imgPxHeight/e.kMultiple;var a=new d[\"fabric\"].Image(n,{hasControls:!1,scaleX:r,scaleY:r,angle:0,originX:\"center\",originY:\"center\",top:e.clipWidth/2,left:e.clipHeight/2});e.initCanvas.add(a);var s=new d[\"fabric\"].Image(n,{scaleX:r,scaleY:r,angle:0,originX:\"center\",originY:\"center\",top:e.clipWidth/2,left:e.clipHeight/2});e.fabObj=s;var o=document.createElement(\"canvas\"),u=o.getContext(\"2d\"),l=800,c=800*n.height/n.width;o.width=3*l,o.height=3*c,u.drawImage(n,0,0,l,c),u.drawImage(n,l,0,l,c),u.drawImage(n,2*l,0,l,c),u.drawImage(n,0,c,l,c),u.drawImage(n,l,c,l,c),u.drawImage(n,2*l,c,l,c),u.drawImage(n,0,2*c,l,c),u.drawImage(n,l,2*c,l,c),u.drawImage(n,2*l,2*c,l,c);var h=o.toDataURL(\"image/png\");e.nameList[1].img=h,e.nameList[1].bigpsd.img=h,e.selectAlikeById()},e.img=n},loading:function(t,e){var n=this,i=Math.round(254*t.width/300)/100,r=Math.round(254*t.height/300)/100;n.imgArray=[i,r],n.imgPxWidth=n.img.width,n.imgPxHeight=n.img.height,n.imgScale=1,this.myCanvas.setZoom(1),this.myCanvas.absolutePan({x:0,y:0});var a=n.myCanvas.getObjects();a.forEach((function(t){n.myCanvas.remove(t)})),n.switchImgShow(),n.drawImage(e)},drawImage:function(t){var e=this,n=1;n=e.imgPxWidth>e.imgPxHeight?e.calculateWidth/e.imgPxWidth/e.kMultiple:e.calculateHeiht/e.imgPxHeight/e.kMultiple,this.imgScale=t?1/3:1;var i=e.myCanvas.getObjects();if(i.length>0&&e.repatGroup.forEach((function(t){e.myCanvas.remove(t)})),e.repatFlag){e.widthNum=Math.floor(e.clipWidth/(e.imgScale*e.fabObj.width*e.fabObj.scaleX)),e.heightNum=Math.floor(e.clipHeight/(e.imgScale*e.fabObj.height*e.fabObj.scaleY));var r=Math.ceil(((e.fabObj.left-e.clipWidth/2)*e.imgScale+e.clipWidth/2-e.fabObj.width*e.fabObj.scaleX*e.imgScale/2)/(e.fabObj.width*e.fabObj.scaleX*e.imgScale)),a=Math.ceil(((e.clipWidth/2-e.fabObj.left)*e.imgScale+e.clipWidth/2-e.fabObj.width*e.fabObj.scaleX*e.imgScale/2)/(e.fabObj.width*e.fabObj.scaleX*e.imgScale)),s=Math.ceil(((e.fabObj.top-e.clipWidth/2)*e.imgScale+e.clipWidth/2-e.fabObj.height*e.fabObj.scaleX*e.imgScale/2)/(e.fabObj.height*e.fabObj.scaleX*e.imgScale)),o=Math.ceil(((e.clipWidth/2-e.fabObj.top)*e.imgScale+e.clipWidth/2-e.fabObj.height*e.fabObj.scaleX*e.imgScale/2)/(e.fabObj.height*e.fabObj.scaleX*e.imgScale));if(e.leftNum=r,e.rightNum=a,e.topNum=s,e.bottomtNum=o,e.arrCross1=[],1==e.repatFlag){e.arrCross1=[],e.repatGroup.length>0&&(e.repatGroup.forEach((function(t){e.myCanvas.remove(t)})),e.repatGroup=[]);for(var u=1;u<=r;u++)e.arrCross1.push([e.fabObj.top,e.fabObj.left-e.fabObj.scaleY*e.fabObj.width*u]);for(var l=1;l<=a;l++)e.arrCross1.push([e.fabObj.top,e.fabObj.left+e.fabObj.scaleY*e.fabObj.width*l]);var c=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:e.fabObj.top,left:e.fabObj.left,name:0,originX:\"center\",originY:\"center\"});e.myCanvas.add(c),e.fabObj=c,e.repatGroup.push(c),e.data1=JSON.parse(JSON.stringify(e.repatGroup)),e.arrCross1.forEach((function(t){var n=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:t[0],left:t[1],originX:\"center\",originY:\"center\"});e.myCanvas.add(n),e.repatGroup.push(n),e.data1=JSON.parse(JSON.stringify(e.repatGroup))}))}else if(2==e.repatFlag){e.arrCross1=[],e.repatGroup.length>0&&(e.repatGroup.forEach((function(t){e.myCanvas.remove(t)})),e.repatGroup=[]);for(var h=1;h<=s;h++)e.arrCross1.push([e.fabObj.top-e.fabObj.scaleX*e.fabObj.height*h,e.fabObj.left]);for(var f=1;f<=o;f++)e.arrCross1.push([e.fabObj.top+e.fabObj.scaleX*e.fabObj.height*f,e.fabObj.left]);var p=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:e.fabObj.top,left:e.fabObj.left,name:0,originX:\"center\",originY:\"center\"});e.myCanvas.add(p),e.fabObj=p,e.repatGroup.push(p),e.data1=JSON.parse(JSON.stringify(e.repatGroup)),e.arrCross1.forEach((function(t){var n=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:t[0],left:t[1],originX:\"center\",originY:\"center\"});e.myCanvas.add(n),e.repatGroup.push(n),e.data1=JSON.parse(JSON.stringify(e.repatGroup))}))}else if(3==e.repatFlag){e.arrVertical=[],e.repatGroup.length>0&&(e.repatGroup.forEach((function(t){e.myCanvas.remove(t)})),e.repatGroup=[]);for(var g=1;g<=r;g++)for(var v=1;v<=s;v++)e.arrVertical.push([e.fabObj.top-e.fabObj.scaleX*e.fabObj.height*v,e.fabObj.left-e.fabObj.scaleY*e.fabObj.width*g]);for(var m=1;m<=a;m++)for(var y=1;y<=s;y++)e.arrVertical.push([e.fabObj.top-e.fabObj.scaleX*e.fabObj.height*y,e.fabObj.left+e.fabObj.scaleY*e.fabObj.width*m]);for(var _=1;_<=r;_++)for(var x=1;x<=o;x++)e.arrVertical.push([e.fabObj.top+e.fabObj.scaleX*e.fabObj.height*x,e.fabObj.left-e.fabObj.scaleY*e.fabObj.width*_]);for(var b=1;b<=a;b++)for(var w=1;w<=o;w++)e.arrVertical.push([e.fabObj.top+e.fabObj.scaleX*e.fabObj.height*w,e.fabObj.left+e.fabObj.scaleY*e.fabObj.width*b]);for(var S=1;S<=r;S++)e.arrVertical.push([e.fabObj.top,e.fabObj.left-e.fabObj.scaleY*e.fabObj.width*S]);for(var C=1;C<=a;C++)e.arrVertical.push([e.fabObj.top,e.fabObj.left+e.fabObj.scaleY*e.fabObj.width*C]);for(var M=1;M<=s;M++)e.arrVertical.push([e.fabObj.top-e.fabObj.scaleX*e.fabObj.height*M,e.fabObj.left]);for(var T=1;T<=o;T++)e.arrVertical.push([e.fabObj.top+e.fabObj.scaleX*e.fabObj.height*T,e.fabObj.left]);var k=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:e.fabObj.top,left:e.fabObj.left,name:0,originX:\"center\",originY:\"center\"});e.myCanvas.add(k),e.fabObj=k,e.repatGroup.push(k),e.data1=JSON.parse(JSON.stringify(e.repatGroup)),e.arrVertical.forEach((function(t){var n=new d[\"fabric\"].Image(e.img,{scaleX:e.fabObj.scaleX,scaleY:e.fabObj.scaleY,top:t[0],left:t[1],originX:\"center\",originY:\"center\"});e.myCanvas.add(n),e.repatGroup.push(n),e.data1=JSON.parse(JSON.stringify(e.repatGroup))}))}}else{e.fabObj=null,e.repatGroup.length>0&&(e.repatGroup.forEach((function(t){e.myCanvas.remove(t)})),e.repatGroup=[]);var A=new d[\"fabric\"].Image(e.img,{scaleX:n,scaleY:n,angle:0,originX:\"center\",originY:\"center\",top:e.clipWidth/2,left:e.clipHeight/2});e.myCanvas.add(A),e.myCanvas.add(A),e.repatGroup.push(A),e.fabObj=A}this.drawImageClip()},drawImageClip:function(){var t=this;return s(regeneratorRuntime.mark((function e(){var n,i,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=3,i=t,t.imgCanvas.setWidth(i.clipWidth*n),t.imgCanvas.setHeight(i.clipHeight*n),i.imgCanvas.clear(),i.myCanvas.getObjects().forEach((function(t){var e=new d[\"fabric\"].Image(i.img,{scaleX:t.scaleX*n,scaleY:t.scaleY*n,top:t.top*n,left:t.left*n,originX:\"center\",originY:\"center\"});i.imgCanvas.add(e)})),i.zoomPoint=new d[\"fabric\"].Point(i.imgCanvas.width/2,i.imgCanvas.height/2),i.imgCanvas.zoomToPoint(i.zoomPoint,i.imgScale),i.imgCanvas.renderAll(),r=i.imgCanvas.toDataURL({format:\"png\",quality:1,left:i.begin.x*n,top:i.begin.y*n,width:i.imgCanvas.width-i.begin.x*n*2,height:i.imgCanvas.height-i.begin.y*n*2}),a=new Image,a.src=r,i.clipImg=r,t.obj&&t.obj.bigpsd&&t.obj.bigpsd.sku&&i.updateMiniMap(t.obj.bigpsd.sku,r,t.obj.bigpsd.name.toString());case 14:case\"end\":return e.stop()}}),e)})))()},drawLine:function(){var t=this,e=this.modelArray[1],n=this.modelArray[0];e>=n?(this.boxHeight=t.boxMax*t.kMultiple,this.boxWidth=Math.round(this.boxHeight*n/e)):(this.boxWidth=t.boxMax*t.kMultiple,this.boxHeight=Math.round(this.boxWidth*e/n)),t.clipX=(t.clipWidth*t.kMultiple-t.boxWidth)/2,t.clipY=(this.clipHeight*t.kMultiple-t.boxHeight)/2;var i=CanvasRenderingContext2D.prototype.moveTo;CanvasRenderingContext2D.prototype.moveToLocation={},CanvasRenderingContext2D.prototype.moveTo=function(t,e){this.moveToLocation.x=t,this.moveToLocation.y=e,i.apply(this,[t,e])},CanvasRenderingContext2D.prototype.dashedLineTo=function(t,e,n){n=void 0===n?5:n;for(var i=this.moveToLocation.x,r=this.moveToLocation.y,a=t-i,s=e-r,o=Math.floor(Math.sqrt(a*a+s*s)/n),u=0;u<o;u++)this[u%2===0?\"moveTo\":\"lineTo\"](i+a/o*u,r+s/o*u);this.moveTo(t,e)};var r,a,s,o,u,l,c,h,f=this.clipWidth*t.kMultiple,d=this.clipHeight*t.kMultiple,p=t.boxWidth/t.kMultiple,g=t.boxHeight/t.kMultiple;t.begin.x=(f-this.boxWidth)/2/t.kMultiple,t.begin.y=(d-this.boxHeight)/2/t.kMultiple,r=t.begin.x+p,a=t.begin.y,s=t.begin.x+p,o=t.begin.y+g,u=t.begin.x,l=t.begin.y+g,c=t.begin.x,h=t.begin.y,t.ctxLine.clearRect(0,0,f,d),t.ctxLine.beginPath(),t.ctxLine.moveTo(t.begin.x,t.begin.y),t.ctxLine.dashedLineTo(r,a),t.ctxLine.dashedLineTo(s,o),t.ctxLine.dashedLineTo(u,l),t.ctxLine.dashedLineTo(c,h),t.ctxLine.closePath(),t.ctxLine.lineWidth=4,t.ctxLine.strokeStyle=\"red\",t.ctxLine.stroke()},updateMiniMap:function(t,e,n){var i=this;return s(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=i,t==i.sku){r.next=9;break}return a.sku=t,r.next=5,new Promise((function(e){a.$refs.foxcontainer.innerHTML=\"\";var n=document.createElement(\"div\");n.setAttribute(\"id\",\"container\"),a.$refs.foxcontainer.appendChild(n);var i=new g.a(\"container\",{psdSkus:[t],goodsSku:\"1641357433833560937\",token:\"Basic 53d4072c87139675d646b4d428e6bb0048ee7db7e7716fd090cfdbfd692ce8f9\",onload:function(){e(i)}})}));case 5:a.foxpsdObj=r.sent,setTimeout((function(){a.foxpsdObj.command({image:e,layers:n}),a.$nextTick((function(){a.canvasShowFlag=!0,a.imgShowFlag1=!1,a.imgShowFlag2=!0,a.imgShowFlag3=!1}))}),500),r.next=10;break;case 9:a.foxpsdObj&&a.foxpsdObj.load&&(a.foxpsdObj.command({image:e,layers:n}),a.$nextTick((function(){a.canvasShowFlag=!0,a.imgShowFlag1=!1,a.imgShowFlag2=!0,a.imgShowFlag3=!1})));case 10:case\"end\":return r.stop()}}),r)})))()},switchImgShow:function(){var t,e,n=this,i=n.imgArray[0],r=n.imgArray[1],a=n.modelArray[1],s=n.modelArray[0];1==n.imgShowFlag?(n.imgMoveX=0,n.imgMoveY=0,n.imgPxWidth>n.imgPxHeight?(n.imgScale=1,n.imgInitWidth=Math.floor(n.kMultiple*n.clipWidth),n.imgInitHeight=Math.floor(n.kMultiple*n.clipHeight/this.imgPxWidth*n.imgPxHeight),n.imgInitX=0,n.imgInitY=Math.floor((n.clipHeight*n.kMultiple-n.imgInitHeight)/2),n.value=parseInt(100*n.imgScale),n.oldValue=n.value):(n.imgInitHeight=n.kMultiple*n.clipHeight,n.imgInitWidth=Math.floor(n.kMultiple*n.clipWidth/this.imgPxHeight*n.imgPxWidth),n.imgInitY=0,n.imgInitX=Math.floor((n.clipWidth*n.kMultiple-n.imgInitWidth)/2),n.imgScale=1,n.value=parseInt(100*n.imgScale),n.oldValue=n.value),n.calculateWidth=n.imgInitWidth,n.calculateHeiht=n.imgInitHeight):2==n.imgShowFlag&&(n.imgMoveX=0,n.imgMoveY=0,n.imgInitWidth=Math.floor(n.boxWidth*(n.imgArray[0]/n.modelArray[0])),n.imgInitHeight=Math.floor(n.boxHeight*(n.imgArray[1]/n.modelArray[1])),n.calculateWidth=n.imgInitWidth,n.calculateHeiht=n.imgInitHeight,n.img.width,n.img.height,n.imgScale=1,n.value=parseInt(100*n.imgScale),n.oldValue=n.value,t=i/s*this.boxWidth,e=r/a*this.boxHeight,n.imgInfo.height=e*n.kMultiple,n.imgInfo.width=t*n.kMultiple,n.imgX=(n.clipWidth*n.kMultiple-n.imgInfo.width)/2,n.imgY=(n.clipHeight*n.kMultiple-n.imgInfo.height)/2,n.drawImage())},switchPicture:function(){this.imgShowFlag1=!0,this.canvasShowFlag=!1,this.imgShowFlag2=!1,this.imgShowFlag3=!0},returnObj:function(){this.imgShowFlag1=!1,this.canvasShowFlag=!0,this.imgShowFlag2=!0,this.imgShowFlag3=!1},sliderInput:function(t){var e=this;0!=e.modelId&&10001!=e.modelId||e.sliderHandler(t)},sliderChange:function(t){var e=this;0!=e.modelId&&10001!=e.modelId&&e.sliderHandler(t)},sliderHandler:function(t){var e=this;if(0==e.modelId||10001==e.modelId){var n=new d[\"fabric\"].Point(e.clipWidth/2,e.clipHeight/2);e.initCanvas.zoomToPoint(n,t/100)}else e.imgScale=t/100,10001==e.modelId&&(e.imgScale=e.imgScale/3),e.zoomIn(Math.round(1*t)/100)},gos:function(t){this.$router.push({path:\"/store\",query:{q:t}})},loadCanvas:function(){this.$store.state.Navigation_in=\"Navigation_up\",this.contentImg=document.getElementsByClassName(\"centerImg\")[0];var t=this;this.lineCanvas=this.$refs.lineCanvas,this.ctxLine=this.lineCanvas.getContext(\"2d\"),this.myCanvas=new d[\"fabric\"].Canvas(\"canvasBox\",{backgroundColor:\"#fff\",isDrawingMode:!1});var e,n,i=\"rgba(0,0,0,0)\";this.myCanvas.setBackgroundColor(i),this.myCanvas.renderAll(),this.myCanvas.setWidth(t.clipWidth),this.myCanvas.setHeight(t.clipHeight),this.myCanvas.on({\"mouse:wheel\":function(e){if(event.preventDefault&&event.preventDefault(),(t.imgScale>.2||event.deltaY<0)&&(t.imgScale<2||event.deltaY>0)){t.imgScale=(event.deltaY>0?-.1:.1)+t.myCanvas.getZoom(),t.imgScale=Math.max(.2,t.imgScale),t.imgScale=Math.min(2,t.imgScale),t.imgScale=Math.round(1e4*t.imgScale)/1e4;var n=1;n=event.deltaY>0?t.imgScale/(t.imgScale+.1):t.imgScale/(t.imgScale-.1),t.values=100*t.imgScale,t.zoomIn(n)}}}),t.myCanvas.on(\"object:moving\",(function(i){if(i.target.left<t.clipWidth/2-t.clipWidth/2/t.imgScale?i.target.left=t.clipWidth/2-t.clipWidth/2/t.imgScale:i.target.left>t.clipWidth/2+t.clipWidth/2/t.imgScale&&(i.target.left=t.clipWidth/2+t.clipWidth/2/t.imgScale),i.target.top<t.clipWidth/2-t.clipWidth/2/t.imgScale?i.target.top=t.clipWidth/2-t.clipWidth/2/t.imgScale:i.target.top>t.clipWidth/2+t.clipWidth/2/t.imgScale&&(i.target.top=t.clipWidth/2+t.clipWidth/2/t.imgScale),t.data1&&t.data1.length>=1){e=i.target.left-t.movexy.left,n=i.target.top-t.movexy.top,t.repatGroup.forEach((function(i,r){i.left=t.data1[r].left+e,i.top=t.data1[r].top+n,t.myCanvas.remove(i),t.myCanvas.add(i)})),t.fabObj=i.target;var r=Math.ceil(((t.fabObj.left-t.clipWidth/2)*t.imgScale+t.clipWidth/2-t.fabObj.width*t.fabObj.scaleX*t.imgScale/2)/(t.fabObj.width*t.fabObj.scaleX*t.imgScale)),a=Math.ceil(((t.clipWidth/2-t.fabObj.left)*t.imgScale+t.clipWidth/2-t.fabObj.width*t.fabObj.scaleX*t.imgScale/2)/(t.fabObj.width*t.fabObj.scaleX*t.imgScale)),s=Math.ceil(((t.fabObj.top-t.clipWidth/2)*t.imgScale+t.clipWidth/2-t.fabObj.height*t.fabObj.scaleX*t.imgScale/2)/(t.fabObj.height*t.fabObj.scaleX*t.imgScale)),o=Math.ceil(((t.clipWidth/2-t.fabObj.top)*t.imgScale+t.clipWidth/2-t.fabObj.height*t.fabObj.scaleX*t.imgScale/2)/(t.fabObj.height*t.fabObj.scaleX*t.imgScale));t.leftNum=0,t.rightNum=0,t.topNum=0,t.bottomtNum=0,t.repatGroup.forEach((function(e){e.left<i.target.left&&e.top==i.target.top?t.leftNum=t.leftNum+1:e.left>i.target.left&&e.top==i.target.top&&(t.rightNum=t.rightNum+1),e.top<i.target.top&&e.left==i.target.left?t.topNum=t.topNum+1:e.top>i.target.top&&e.left==i.target.left&&(t.bottomtNum=t.bottomtNum+1)}));var u=document.createElement(\"img\");if(u.crossOrigin=\"Anonymous\",u.src=t.img.src,1==t.repatFlag){if(r>t.leftNum){var l=t.leftNum+1;t.leftNum=r;for(var c=l;c<=r;c++){t.moves.left=t.fabObj.left-t.fabObj.scaleY*t.fabObj.width*c,t.moves.top=t.fabObj.top;var h=new d[\"fabric\"].Image(t.img,{scaleX:t.fabObj.scaleX,scaleY:t.fabObj.scaleY,top:t.moves.top,left:t.moves.left,originX:\"center\",originY:\"center\"});t.myCanvas.add(h),t.repatGroup.push(h),t.data1=JSON.parse(JSON.stringify(t.repatGroup)),t.movexy.left=i.target.left,t.movexy.top=i.target.top}}else if(a>t.rightNum){var f=t.rightNum+1;t.rightNum=a;for(var p=f;p<=a;p++){t.moves.left=t.fabObj.left+t.fabObj.scaleY*t.fabObj.width*p,t.moves.top=t.fabObj.top;var g=new d[\"fabric\"].Image(t.img,{scaleX:t.fabObj.scaleX,scaleY:t.fabObj.scaleY,top:t.moves.top,left:t.moves.left,originX:\"center\",originY:\"center\"});t.myCanvas.add(g),t.repatGroup.push(g),t.data1=JSON.parse(JSON.stringify(t.repatGroup)),t.movexy.left=i.target.left,t.movexy.top=i.target.top}}}else if(2==t.repatFlag){if(s>t.topNum){var v=t.topNum+1;t.topNum=s;for(var m=v;m<=s;m++){t.moves.left=t.fabObj.left,t.moves.top=t.fabObj.top-t.fabObj.scaleY*t.fabObj.height*m;var y=new d[\"fabric\"].Image(t.img,{scaleX:t.fabObj.scaleX,scaleY:t.fabObj.scaleY,top:t.moves.top,left:t.moves.left,originX:\"center\",originY:\"center\"});t.myCanvas.add(y),t.repatGroup.push(y),t.data1=JSON.parse(JSON.stringify(t.repatGroup)),t.movexy.left=i.target.left,t.movexy.top=i.target.top}}else if(o>t.bottomtNum){var _=t.bottomtNum+1;t.bottomtNum=o;for(var x=_;x<=o;x++){t.moves.left=t.fabObj.left,t.moves.top=t.fabObj.top+t.fabObj.scaleY*t.fabObj.height*x;var b=new d[\"fabric\"].Image(t.img,{scaleX:t.fabObj.scaleX,scaleY:t.fabObj.scaleY,top:t.moves.top,left:t.moves.left,originX:\"center\",originY:\"center\"});t.myCanvas.add(b),t.repatGroup.push(b),t.data1=JSON.parse(JSON.stringify(t.repatGroup)),t.movexy.left=i.target.left,t.movexy.top=i.target.top}}}else if(3==t.repatFlag){if(r>t.leftNum){var w=t.leftNum+1;t.leftNum=r;for(var S=w;S<=r;S++)for(var C=-1*t.bottomtNum;C<=t.topNum;C++){t.moves.left=t.fabObj.left-t.fabObj.scaleY*t.fabObj.width*S,t.moves.top=t.fabObj.top-t.fabObj.scaleX*t.fabObj.height*C;var M=new d[\"fabric\"].Image(t.img,{scaleX:t.fabObj.scaleX,scaleY:t.fabObj.scaleY,top:t.moves.top,left:t.moves.left,originX:\"center\",originY:\"center\"});t.myCanvas.add(M),t.repatGroup.push(M),t.data1=JSON.parse(JSON.stringify(t.repatGroup)),t.movexy.left=i.target.left,t.movexy.top=i.target.top}}else if(a>t.rightNum){var T=t.rightNum+1;t.rightNum=a;for(var k=T;k<=a;k++)for(var A=-1*t.bottomtNum;A<=t.topNum;A++){t.moves.left=t.fabObj.left+t.fabObj.scaleY*t.fabObj.width*k,t.moves.top=t.fabObj.top-t.fabObj.scaleX*t.fabObj.height*A;var E=new d[\"fabric\"].Image(t.img,{scaleX:t.fabObj.scaleX,scaleY:t.fabObj.scaleY,top:t.moves.top,left:t.moves.left,originX:\"center\",originY:\"center\"});t.myCanvas.add(E),t.repatGroup.push(E),t.data1=JSON.parse(JSON.stringify(t.repatGroup)),t.movexy.left=i.target.left,t.movexy.top=i.target.top}}if(s>t.topNum){var O=t.topNum+1;t.topNum=s;for(var P=O;P<=s;P++)for(var I=-1*t.rightNum;I<=t.leftNum;I++){t.moves.left=t.fabObj.left-t.fabObj.scaleX*t.fabObj.width*I,t.moves.top=t.fabObj.top-t.fabObj.scaleY*t.fabObj.height*P;var L=new d[\"fabric\"].Image(t.img,{scaleX:t.fabObj.scaleX,scaleY:t.fabObj.scaleY,top:t.moves.top,left:t.moves.left,originX:\"center\",originY:\"center\"});t.myCanvas.add(L),t.repatGroup.push(L),t.data1=JSON.parse(JSON.stringify(t.repatGroup)),t.movexy.left=i.target.left,t.movexy.top=i.target.top}}else if(o>t.bottomtNum){var D=t.bottomtNum+1;t.bottomtNum=o;for(var R=D;R<=o;R++)for(var N=-1*t.rightNum;N<=t.leftNum;N++){t.moves.left=t.fabObj.left-t.fabObj.scaleX*t.fabObj.width*N,t.moves.top=t.fabObj.top+t.fabObj.scaleY*t.fabObj.height*R;var F=new d[\"fabric\"].Image(t.img,{scaleX:t.fabObj.scaleX,scaleY:t.fabObj.scaleY,top:t.moves.top,left:t.moves.left,originX:\"center\",originY:\"center\"});t.myCanvas.add(F),t.repatGroup.push(F),t.data1=JSON.parse(JSON.stringify(t.repatGroup)),t.movexy.left=i.target.left,t.movexy.top=i.target.top}}}}else t.fabObj=i.target,t.moveObj={left:t.fabObj.left-t.clipWidth/2*t.imgScale,top:t.fabObj.top-t.clipWidth/2*t.imgScale};t.drawImageClip()})),t.myCanvas.on(\"mouse:down\",(function(e){null!=e.target&&(e.target.hasControls=!1,e.target.hasBorders=!1,t.data1=JSON.parse(JSON.stringify(t.repatGroup)),t.movexy.left=e.target.left,t.movexy.top=e.target.top,t.timeOut=(new Date).getTime())})),this.imgCanvas=new d[\"fabric\"].Canvas(\"canvasBox1\",{backgroundColor:\"#fff\",isDrawingMode:!1}),this.initCanvas=new d[\"fabric\"].Canvas(\"canvasBox3\",{backgroundColor:\"#fff\",isDrawingMode:!1}),this.initCanvas.setWidth(this.clipWidth),this.initCanvas.setHeight(this.clipHeight)},setAsPosition:function(){var t=document.documentElement.scrollTop||document.body.scrollTop;t>1080?(document.getElementsByClassName(\"as\")[0].style.position=\"fixed\",document.getElementsByClassName(\"as\")[0].style.top=\"6rem\"):document.getElementsByClassName(\"as\")[0].style.position=\"absolute\"}},created:function(){this.su=!1,this.getPSD(),console.log(\"created\")},destroyed:function(){var t=this;window.removeEventListener(\"scroll\",t.setAsPosition,!1)},mounted:function(){var t=this;t.locking=!1;var e=this.$route.path.split(\"/\");this.productId=e[e.length-1],this.candidate(),this.loadCanvas(),window.addEventListener(\"scroll\",t.setAsPosition,!1)}},m=v,y=(n(\"471c\"),n(\"2877\")),_=Object(y[\"a\"])(m,i,r,!1,null,\"d2c5d238\",null);e[\"default\"]=_.exports},ea98:function(t,e,n){\"use strict\";var i=n(\"23e7\"),r=n(\"e330\"),a=n(\"1d80\"),s=n(\"5926\"),o=n(\"577e\"),u=n(\"d039\"),l=r(\"\".charAt),c=u((function(){return\"\\ud842\"!==\"𠮷\".at(-2)}));i({target:\"String\",proto:!0,forced:c},{at:function(t){var e=o(a(this)),n=e.length,i=s(t),r=i>=0?i:n+i;return r<0||r>=n?void 0:l(e,r)}})},eac5:function(t,e,n){var i=n(\"861d\"),r=Math.floor;t.exports=Number.isInteger||function(t){return!i(t)&&isFinite(t)&&r(t)===t}},ebb5:function(t,e,n){\"use strict\";var i,r,a,s=n(\"a981\"),o=n(\"83ab\"),u=n(\"da84\"),l=n(\"1626\"),c=n(\"861d\"),h=n(\"1a2d\"),f=n(\"f5df\"),d=n(\"0d51\"),p=n(\"9112\"),g=n(\"6eeb\"),v=n(\"9bf2\").f,m=n(\"3a9b\"),y=n(\"e163\"),_=n(\"d2bb\"),x=n(\"b622\"),b=n(\"90e3\"),w=u.Int8Array,S=w&&w.prototype,C=u.Uint8ClampedArray,M=C&&C.prototype,T=w&&y(w),k=S&&y(S),A=Object.prototype,E=u.TypeError,O=x(\"toStringTag\"),P=b(\"TYPED_ARRAY_TAG\"),I=b(\"TYPED_ARRAY_CONSTRUCTOR\"),L=s&&!!_&&\"Opera\"!==f(u.opera),D=!1,R={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},F=function(t){if(!c(t))return!1;var e=f(t);return\"DataView\"===e||h(R,e)||h(N,e)},B=function(t){if(!c(t))return!1;var e=f(t);return h(R,e)||h(N,e)},z=function(t){if(B(t))return t;throw E(\"Target is not a typed array\")},j=function(t){if(l(t)&&(!_||m(T,t)))return t;throw E(d(t)+\" is not a typed array constructor\")},U=function(t,e,n,i){if(o){if(n)for(var r in R){var a=u[r];if(a&&h(a.prototype,t))try{delete a.prototype[t]}catch(s){try{a.prototype[t]=e}catch(l){}}}k[t]&&!n||g(k,t,n?e:L&&S[t]||e,i)}},V=function(t,e,n){var i,r;if(o){if(_){if(n)for(i in R)if(r=u[i],r&&h(r,t))try{delete r[t]}catch(a){}if(T[t]&&!n)return;try{return g(T,t,n?e:L&&T[t]||e)}catch(a){}}for(i in R)r=u[i],!r||r[t]&&!n||g(r,t,e)}};for(i in R)r=u[i],a=r&&r.prototype,a?p(a,I,r):L=!1;for(i in N)r=u[i],a=r&&r.prototype,a&&p(a,I,r);if((!L||!l(T)||T===Function.prototype)&&(T=function(){throw E(\"Incorrect invocation\")},L))for(i in R)u[i]&&_(u[i],T);if((!L||!k||k===A)&&(k=T.prototype,L))for(i in R)u[i]&&_(u[i].prototype,k);if(L&&y(M)!==k&&_(M,k),o&&!h(k,O))for(i in D=!0,v(k,O,{get:function(){return c(this)?this[P]:void 0}}),R)u[i]&&p(u[i],P,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_CONSTRUCTOR:I,TYPED_ARRAY_TAG:D&&P,aTypedArray:z,aTypedArrayConstructor:j,exportTypedArrayMethod:U,exportTypedArrayStaticMethod:V,isView:F,isTypedArray:B,TypedArray:T,TypedArrayPrototype:k}},ed6d:function(t,e,n){n(\"d9e2\");var i=n(\"4a4b\");function r(t,e){if(\"function\"!==typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&i(t,e)}t.exports=r,t.exports.__esModule=!0,t.exports[\"default\"]=t.exports},f152:function(t,e,n){},f183:function(t,e,n){var i=n(\"23e7\"),r=n(\"e330\"),a=n(\"d012\"),s=n(\"861d\"),o=n(\"1a2d\"),u=n(\"9bf2\").f,l=n(\"241c\"),c=n(\"057f\"),h=n(\"4fad\"),f=n(\"90e3\"),d=n(\"bb2f\"),p=!1,g=f(\"meta\"),v=0,m=function(t){u(t,g,{value:{objectID:\"O\"+v++,weakData:{}}})},y=function(t,e){if(!s(t))return\"symbol\"==typeof t?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!o(t,g)){if(!h(t))return\"F\";if(!e)return\"E\";m(t)}return t[g].objectID},_=function(t,e){if(!o(t,g)){if(!h(t))return!0;if(!e)return!1;m(t)}return t[g].weakData},x=function(t){return d&&p&&h(t)&&!o(t,g)&&m(t),t},b=function(){w.enable=function(){},p=!0;var t=l.f,e=r([].splice),n={};n[g]=1,t(n).length&&(l.f=function(n){for(var i=t(n),r=0,a=i.length;r<a;r++)if(i[r]===g){e(i,r,1);break}return i},i({target:\"Object\",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},w=t.exports={enable:b,fastKey:y,getWeakData:_,onFreeze:x};a[g]=!0},f6b4:function(t,e,n){\"use strict\";var i=n(\"c532\");function r(){this.handlers=[]}r.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=r},f748:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},f8c9:function(t,e,n){var i=n(\"23e7\"),r=n(\"da84\"),a=n(\"d44e\");i({global:!0},{Reflect:{}}),a(r.Reflect,\"Reflect\",!0)},f8cd:function(t,e,n){var i=n(\"da84\"),r=n(\"5926\"),a=i.RangeError;t.exports=function(t){var e=r(t);if(e<0)throw a(\"The argument can't be less than 0\");return e}},fb2c:function(t,e,n){var i=n(\"74e8\");i(\"Uint32\",(function(t){return function(e,n,i){return t(this,e,n,i)}}))},fd87:function(t,e,n){var i=n(\"74e8\");i(\"Int8\",(function(t){return function(e,n,i){return t(this,e,n,i)}}))}}]);","extractedComments":[]}