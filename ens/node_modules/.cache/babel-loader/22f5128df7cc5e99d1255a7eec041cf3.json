{"remainingRequest":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/thread-loader/dist/cjs.js!/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/babel-loader/lib/index.js!/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/src/components/Details/detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/src/components/Details/detail.vue","mtime":1666323437801},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/babel.config.js","mtime":1649920282752},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/cache-loader/dist/cjs.js","mtime":1665559060439},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/thread-loader/dist/cjs.js","mtime":1665559060419},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/babel-loader/lib/index.js","mtime":1665559060757},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/cache-loader/dist/cjs.js","mtime":1665559060439},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/vue-loader/lib/index.js","mtime":1665559060829}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9kZW5neml4dS9XZWJzdG9ybVByb2plY3RzL3Z1ZS9wYXR0ZXJuMTAwX2VuX3dlYi9lbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZG90LWFsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5zdGlja3kuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IEJvdHRvbSBmcm9tICJAL2NvbXBvbmVudHMvQm90dG9tTmF2aWdhdGlvbi9pbmRleCI7CmltcG9ydCB7IHNvcnRpbmdfbGlzdCwgZG93bmxvYWQgfSBmcm9tICJAL3V0aWxzL3V0aWwiOwppbXBvcnQgQ2VsbCBmcm9tICIuLi9TY3JlZW4vQ2VsbCI7CmltcG9ydCBTaG91IGZyb20gIi4uL1NjcmVlbi9TaG91IjsgLy8gaW1wb3J0IGZhYnJpYyBmcm9tICdmYWJyaWMnCi8vIGltcG9ydCBUZW1wIGZyb20gIi4vVGVtcC52dWUiOwovLyBpbXBvcnQgVXRpbHMgZnJvbSAiLi4vLi4vYXNzZXRzL2pzL3V0aWwiOwoKaW1wb3J0IHsgZmFicmljIH0gZnJvbSAiZmFicmljIjsKaW1wb3J0IGZveHBzZCBmcm9tICIuLi8uLi9zdGF0aWMvanMvZm94cHNkIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEJvdHRvbTogQm90dG9tLAogICAgQ2VsbDogQ2VsbCwKICAgIFNob3U6IFNob3UsCiAgICBmYWJyaWM6IGZhYnJpYyAvLyBUZW1wLAoKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2NraW5nOiBmYWxzZSwKICAgICAgY29uOiBmYWxzZSwKICAgICAgdGV4dGFyZWExOiAiIiwKICAgICAgcHJvZHVjdElkOiBudWxsLAogICAgICBkb3duTG9hZDogZmFsc2UsCiAgICAgIGR1YW46IHRydWUsCiAgICAgIC8vIENvbGxlY3Q6IHRydWUsCiAgICAgIHN1OiBmYWxzZSwKICAgICAgcDogbnVsbCwKICAgICAgbGljZW5zZVR5cGU6IDAsCiAgICAgIGxpY2Vuc2VQcmljZTogJycsCiAgICAgIGxpbmVsaXN0OiBbXSwKICAgICAgY29uc0hlaWdodDogMCwKICAgICAgbGlzdG51bWJlcjogMCwKICAgICAgbWF4U2NhbGU6IDQwMCwKICAgICAgcHJvZ3Jlc3M6IDAsCiAgICAgIGltZ1NpemU6ICcnLAogICAgICBwcmludFNpemUxOiAnJywKICAgICAgcHJpbnRTaXplMjogJycsCiAgICAgIGNvbnRlbnRfbGlzdF9ib2xsOiBbdHJ1ZSwgZmFsc2UsIGZhbHNlXSwKICAgICAgLy/mjqfliLbmr4/kuIDkuKrpgInpobnnmoTpgInkuK3lkozmmbTnqboKICAgICAgY2FuZGlkYXRlX2ltZ2xpc3Q6IFtdLAogICAgICBjb250ZWVudF9pbWc6ICIiLAogICAgICBjb250ZWVudF9pbWcyOiAiIiwKICAgICAgdmFsdWVzOiAxMDAsCiAgICAgIG9udGVudF9kYXRhczogIiIsCiAgICAgIHdoeTogW3JlcXVpcmUoIkAvYXNzZXRzL2ltZy93aHkuc3ZnIiksIHJlcXVpcmUoIkAvYXNzZXRzL2ltZy88LnN2ZyIpXSwKICAgICAgZ3g6IFtyZXF1aXJlKCJAL2Fzc2V0cy9pbWcvZ294LnN2ZyIpLCByZXF1aXJlKCJAL2Fzc2V0cy9pbWcveGluZ3guc3ZnIiksIHJlcXVpcmUoIkAvYXNzZXRzL2ltZy9va3Muc3ZnIildLAogICAgICB3b25kZXI6IHJlcXVpcmUoIkAvYXNzZXRzL2ltZy93b25kZXIucG5nIiksCiAgICAgIHN0YXRlOiBbcmVxdWlyZSgiQC9hc3NldHMvaW1nL3gucG5nIiksIHJlcXVpcmUoIkAvYXNzZXRzL2ltZy9kLnBuZyIpXSwKICAgICAgYWI6IFtyZXF1aXJlKCJAL2Fzc2V0cy9pbWcvYS5wbmciKSwgcmVxdWlyZSgiQC9hc3NldHMvaW1nL2IucG5nIildLAogICAgICBibGFua0ltYWdlOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvYmxhbmsuc3ZnIiksCiAgICAgIGt1OiBbcmVxdWlyZSgiQC9hc3NldHMvaW1nL2t1XzEuc3ZnIiksIHJlcXVpcmUoIkAvYXNzZXRzL2ltZy9rdV8yLnN2ZyIpLCByZXF1aXJlKCJAL2Fzc2V0cy9pbWcva3VfNC5zdmciKSwgcmVxdWlyZSgiQC9hc3NldHMvaW1nL2t1XzMuc3ZnIildLAogICAgICAvLyDmlYjmnpzlm77nmoRkYXRh55qE5pWw5o2uCiAgICAgIC8vIOiOt+WPluaooeWei+eahGRhdGEKICAgICAgbGlzdDogW10sCiAgICAgIHBzZExpc3Q6IFtdLAogICAgICAvL+S7juWQjuWPsOaOpeWPo+aLv+WIsOeahHBzZOWIl+ihqAogICAgICBuZXdQc2RMaXN0OiBbXSwKICAgICAgLy/lr7nmr5TlkI7nmoRwc2TliJfooagKICAgICAgbmV3TW9kZWxzTGlzdDogW10sCiAgICAgIC8vIOesrOS4gOasoeaLv+WIsOeahCAg5aSn5Zu+55qE6K+m57uGCiAgICAgIG1vZGVsc0xpc3Q6IFtdLAogICAgICAvL+esrOS6jOasoeWkhOeQhgogICAgICBuYW1lTGlzdDogW10sCiAgICAgIC8vIOS7juaOpeWPo+aLv+WIsOeahCDlm77lsYLnmoTliJfooagKICAgICAgbmV3TmFtZUxpc3Q6IFtdLAogICAgICAvLyDlr7nmr5TlkI7nmoTlm77lsYLliJfooagKICAgICAgLy8g5pWI5p6c5Zu+5paw5aKeCiAgICAgIHJlcGF0RmxhZzogMywKICAgICAgaXNSZXBlYXQ6IDAsCiAgICAgIG1vZGVsSWQ6IDAsCiAgICAgIGJlZ2luOiB7CiAgICAgICAgeDogMCwKICAgICAgICB5OiAwCiAgICAgIH0sCiAgICAgIGltZ1B4V2lkdGg6IG51bGwsCiAgICAgIGltZ1B4SGVpZ2h0OiBudWxsLAogICAgICBjYWxjdWxhdGVXaWR0aDogbnVsbCwKICAgICAgbW9kZWxBcnJheTogW10sCiAgICAgIGltZ0FycmF5OiBbXSwKICAgICAgY2xpcFg6IG51bGwsCiAgICAgIC8v6KOB5YiH55qE5Z2Q5qCHeAogICAgICBjbGlwWTogbnVsbCwKICAgICAgLy/oo4HliIfnmoTlnZDmoId5CiAgICAgIGJveFdpZHRoOiBudWxsLAogICAgICAvLyDnm5LlrZDnmoTlrr3luqYKICAgICAgYm94SGVpZ2h0OiBudWxsLAogICAgICAvLyDnm5LlrZDnmoTpq5jluqYKICAgICAgY2FsY3VsYXRlSGVpaHQ6IG51bGwsCiAgICAgIGltZ1Nob3dGbGFnOiAxLAogICAgICAvLyDpu5jorqTmmL7npLroh6rpgILlupTnmoTlsLrlr7gKICAgICAgb2JqOiB7fSwKICAgICAgY2xpcFdpZHRoOiA2MDAsCiAgICAgIC8vY2xpcCDoo4HliIflh7rmnaXnmoTmlrnlnZfljLrln58KICAgICAgY2xpcEhlaWdodDogNjAwLAogICAgICAvL2NsaXAg6KOB5YiH5Ye65p2l55qE5pa55Z2X5Yy65Z+fCiAgICAgIGJveE1heDogNjAwLAogICAgICBrTXVsdGlwbGU6IDMsCiAgICAgIC8vCiAgICAgIGltZzogbnVsbCwKICAgICAgaW5pdENhbnZhczogbnVsbCwKICAgICAgbXlDYW52YXM6IG51bGwsCiAgICAgIGltZ1NuOiBudWxsLAogICAgICAvL+WbvueJh+eahOe8luWPtwogICAgICB6b29tOiAxLAogICAgICBmYWJPYmo6IG51bGwsCiAgICAgIC8vIOeUqGZhYnJpYy5qcyBuZXcg5Ye65p2l55qE5a+56LGhCiAgICAgIHpvb21Qb2ludDogbnVsbCwKICAgICAgcmVwYXRHcm91cDogW10sCiAgICAgIC8vIOW5s+mTuuS5i+WQjueahGdyb3Vw5pWw57uECiAgICAgIGdyb3VwOiBudWxsLAogICAgICBkYXRhMTogbnVsbCwKICAgICAgbW92ZU9iajogbnVsbCwKICAgICAgYXJyQ3Jvc3MxOiBbXSwKICAgICAgLy8g5bmz6ZO65LmL5ZCO55qE5pWw5o2uCiAgICAgIGFyclZlcnRpY2FsOiBbXSwKICAgICAgYWRkQXJyOiBbXSwKICAgICAgLy/nvKnmlL7kuYvlkI7mlrDlop7nmoTmlbDnu4QKICAgICAgd2lkdGhOdW06IDAsCiAgICAgIC8vIOebtOaOpeW5s+mTuueahOaoquWQkeaVsOmHjwogICAgICBoZWlnaHROdW06IDAsCiAgICAgIC8v55u05o6l5bmz6ZO655qE56uW5ZCR5pWw6YePCiAgICAgIG1vdmVzOiB7fSwKICAgICAgbGVmdE51bTogMCwKICAgICAgcmlnaHROdW06IDAsCiAgICAgIHRvcE51bTogMCwKICAgICAgYm90dG9tdE51bTogMCwKICAgICAgbW92ZXh5OiB7fSwKICAgICAgdGltZU91dDogMCwKICAgICAgY2FudmFzOiBudWxsLAogICAgICBjbGlwSW1nOiBudWxsLAogICAgICBmb3hwc2RPYmo6IG51bGwsCiAgICAgIHNrdTogbnVsbCwKICAgICAgY3R4TGluZTogbnVsbCwKICAgICAgaW1nU2hvd0ZsYWcxOiB0cnVlLAogICAgICBjYW52YXNTaG93RmxhZzogZmFsc2UsCiAgICAgIGltZ1Nob3dGbGFnMjogZmFsc2UsCiAgICAgIGltZ1Nob3dGbGFnMzogZmFsc2UsCiAgICAgIG1vZGVsSW1nOiBudWxsLAogICAgICBzbGlkZUZsYWc6IHRydWUsCiAgICAgIHR5cGVzOiBbXSwKICAgICAgY2F0ZWdvcmllczogW10sCiAgICAgIHRhZ3M6IFtdLAogICAgICBwcm9kdWN0TnVtOiAwIC8vIOaViOaenOWbvuaWsOWingogICAgICAvLyDmlYjmnpzlm77nmoRkYXRh5pWw5o2uCgogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICAnJHN0b3JlLnN0YXRlLmZvbnRSYXRlJzogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuY2hhbmdlU2l6ZSgpOwogICAgICB9CiAgICB9LAogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkge30sCiAgICBjb25zSGVpZ2h0OiBmdW5jdGlvbiBjb25zSGVpZ2h0KCkge30gLy8gcHJvZHVjdElkKCkgewogICAgLy8gICB0aGlzLmNhbmRpZGF0ZSgpOwogICAgLy8gfSwKICAgIC8vIHZhbHVlcygpIHsKICAgIC8vICAgLy8gY29uc29sZS5sb2codGhpcy52YWx1ZXMpOwogICAgLy8gICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZXM7CiAgICAvLyAgIC8vIHRoaXMuem9vbUluKHRoaXMudmFsdWVzKQogICAgLy8gICAvLyB0aGlzLmNvbnRlbnRJbWcuc3R5bGUuaGVpZ2h0ID0gNjAwICogKHRoaXMudmFsdWVzIC8gMTAwKSArICJweCI7CiAgICAvLyAgIC8vIHRoaXMuY29udGVudEltZy5zdHlsZS53aWR0aCA9IDYwMCAqICh0aGlzLnZhbHVlcyAvIDEwMCkgKyAicHgiOwogICAgLy8gICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbnRlbnRJbWcuc3R5bGUuaGVpZ2h0KTsKICAgIC8vIH0sCgogIH0sCiAgbWV0aG9kczogewogICAgbWlzOiBmdW5jdGlvbiBtaXMoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImFzIilbMF0uc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgfSwKICAgIHN1YjogZnVuY3Rpb24gc3ViKCkgewogICAgICBpZiAodGhpcy50ZXh0YXJlYTEgPT0gIiIpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZSgiQ2Fubm90IGJlIGVtcHR577yBIik7CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZWI6IGZ1bmN0aW9uIGNsb3NlYigpIHsKICAgICAgdGhpcy5jb24gPSB0cnVlOwogICAgfSwKICAgIGNsb3NlYnM6IGZ1bmN0aW9uIGNsb3NlYnMoKSB7CiAgICAgIHRoaXMuY29uID0gZmFsc2U7CiAgICB9LAogICAgLy/ngrnlh7vlj5bmtojmlLbol4/mjInpkq4KICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKGlkKSB7CiAgICAgIGNvbnNvbGUubG9nKGlkKTsKICAgIH0sCiAgICAvLyDmt7vliqDliLDnprvnur/otK3nianovaYKICAgIGFkZE91dGxpbmVDYXI6IGZ1bmN0aW9uIGFkZE91dGxpbmVDYXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIG0gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzc2hvcHBpbmdfY2FyJykpOwoKICAgICAgaWYgKG0gJiYgbS5zb21lKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucHJvZHVjdElkID09IF90aGlzMi5wcm9kdWN0SWQ7CiAgICAgIH0pKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSgiUHJvZHVjdCBleGlzdCIpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICghbSkgewogICAgICAgICAgbSA9IFtdOwogICAgICAgIH0KCiAgICAgICAgdmFyIHMgPSB7CiAgICAgICAgICBwcm9kdWN0SWQ6IHRoaXMucHJvZHVjdElkLAogICAgICAgICAgLy/nm7TmjqXmiorov5nlvKDlm77nmoTmiYDmnInor6bnu4bkv6Hmga/kv53lrZjotbfmnaXvvIzliLDotK3nianovabmiJHku6zlho3moLnmja7miJHku6zpnIDopoHmmL7npLoKICAgICAgICAgIGltZ1R5cGU6IHRoaXMubGljZW5zZVR5cGUsCiAgICAgICAgICAvL+aOiOadg+exu+WeiwogICAgICAgICAgcHJvZHVjdE51bTogMQogICAgICAgIH07CiAgICAgICAgbS5wdXNoKHMpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzc2hvcHBpbmdfY2FyJywgSlNPTi5zdHJpbmdpZnkobSkpOwogICAgICAgIHRoaXMub250ZW50X2RhdGFzLmlzQnV5ID0gMTsKICAgICAgICB0aGlzLmxvY2tpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOWIsOi0reeJqei9pgogICAgYWRkU2hvcGluZ0NhcjogZnVuY3Rpb24gYWRkU2hvcGluZ0NhcigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBpZiAodm0ubG9ja2luZykgcmV0dXJuOwogICAgICB2bS5sb2NraW5nID0gdHJ1ZTsKICAgICAgZ3RhZygnZXZlbnQnLCAnYWRkX3RvX2NhcnQnLCB7CiAgICAgICAgY3VycmVuY3k6ICdVU0QnLAogICAgICAgIGl0ZW1zOiBbewogICAgICAgICAgaXRlbV9pZDogdGhpcy5vbnRlbnRfZGF0YXMucHJvZHVjdElkLAogICAgICAgICAgaXRlbV9uYW1lOiB0aGlzLm9udGVudF9kYXRhcy5pbWdTbiwKICAgICAgICAgIHByaWNlOiB0aGlzLmxpY2Vuc2VQcmljZSwKICAgICAgICAgIGN1cnJlbmN5OiAnVVNEJywKICAgICAgICAgIHF1YW50aXR5OiAxCiAgICAgICAgfV0sCiAgICAgICAgdmFsdWU6IHRoaXMubGljZW5zZVByaWNlCiAgICAgIH0pOyAvLyDpppblhYjliKTmlq3kuIDkuIvnlKjmiLfmnInmsqHmnInnmbvpmYYKCiAgICAgIGlmICghbG9jYWxTdG9yYWdlLnVzZXIpIHsKICAgICAgICAvLyDmsqHmnInnmbvpmYbnmoTml7blgJnlsIbotK3nianovabkv6Hmga/lrZjliLDmnKzlnLDnmoQgbG9jYWxTdG9yYWdlLnNob3BwaW5nX2NhcuW9k+S4rQogICAgICAgIC8vIOmmlumAieWIpOaWreS4gOS4i2xvY2FsU3RvcmFnZS5zaG9wcGluZ19jYXLmnInmsqHmnInlo7DmmI4KICAgICAgICB0aGlzLmFkZE91dGxpbmVDYXIoKTsgLy8gY29uc29sZS5sb2coSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3Nob3BwaW5nX2NhcicpKSk7CiAgICAgICAgLy8gdGhpcy5CYWcgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJxKHsKICAgICAgICAgIHVybDogIi9hcGkvY2FydC9zYXZlIiwKICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgcGFyYW06IHsKICAgICAgICAgICAgcHJvZHVjdElkOiB0aGlzLm9udGVudF9kYXRhcy5wcm9kdWN0SWQsCiAgICAgICAgICAgIGltZ1R5cGU6IHRoaXMubGljZW5zZVR5cGUKICAgICAgICAgIH0sCiAgICAgICAgICBvbkVycm9yOiBmdW5jdGlvbiBvbkVycm9yKCkgewogICAgICAgICAgICB2bS5sb2NraW5nID0gZmFsc2U7CiAgICAgICAgICB9LAogICAgICAgICAgdm06IHZtCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgIC8vIHRoaXMuJG1lc3NhZ2UoIua3u+WKoOaIkOWKnyIpOwogICAgICAgICAgICBpZiAoIXJlcy51c2VyKSB7CiAgICAgICAgICAgICAgdm0uYWRkT3V0bGluZUNhcigpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZtLm9udGVudF9kYXRhcy5pc0J1eSA9IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgPT0gNjAxIHx8IHJlcy5jb2RlID09IDY4MCkgewogICAgICAgICAgICB2bS5hZGRPdXRsaW5lQ2FyKCk7IC8vICAgdGhpcy5CYWcgPSBmYWxzZTsKICAgICAgICAgICAgLy8gdGhpcy4kc3RvcmUuc3RhdGUubG9naW4gPSB0cnVlOwogICAgICAgICAgICAvLyB0aGlzLiRzdG9yZS5zdGF0ZS5sb2dpbnMgPSB0cnVlCiAgICAgICAgICAgIC8vIHRoaXMuJHN0b3JlLnN0YXRlLkZvcmdldFB3ZCA9IGZhbHNlCiAgICAgICAgICAgIC8vIHRoaXMuJHN0b3JlLnN0YXRlLlNpZ24gPSBmYWxzZQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMzLiRtZXNzYWdlKHJlcy5kZXNjKTsgLy8KCiAgICAgICAgICB9CgogICAgICAgICAgdm0ubG9ja2luZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYWRkU2hvcGluZ0NhcnM6IGZ1bmN0aW9uIGFkZFNob3BpbmdDYXJzKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3Nob3BwaW5nY2FyIik7CiAgICB9LAogICAgc2hvdTogZnVuY3Rpb24gc2hvdShwZCkgewogICAgICB0aGlzLiRyZWZzLnNob3Uuc2hvdShwZCk7CiAgICB9LAogICAgZGV0YWlsczogZnVuY3Rpb24gZGV0YWlscyhhLCBiKSB7CiAgICAgIC8vIGxvY2FsU3RvcmFnZS5wcm9kdWN0SWQgPSB0aGlzLnByb2R1Y3RJZD1hOwogICAgICAvLyBsb2NhbFN0b3JhZ2UuaW1nU24gPSBiOwogICAgICB2YXIgcm91dGVVcmwgPSB0aGlzLiRyb3V0ZXIucmVzb2x2ZSh7CiAgICAgICAgcGF0aDogIi9kZXRhaWwvIiArIGEKICAgICAgfSk7CiAgICAgIHdpbmRvdy5vcGVuKHJvdXRlVXJsLmhyZWYsICJfc2VsZiIpOyAvLyBjb25zb2xlLmxvZygicHVzaCIpCiAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgLy8gICBwYXRoOiAiL2RldGFpbHMiLAogICAgICAvLyAgIHF1ZXJ5OiB7IGlkOiBhIH0sCiAgICAgIC8vIH0pOwogICAgICAvLyB0aGlzLiRzdG9yZS5zdGF0ZS5ibGFuayA9ICJkZXRhaWxzIjsKICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goIi9ibGFuayIpOwogICAgfSwKICAgIHRoaXNEb3dubG9hZDogZnVuY3Rpb24gdGhpc0Rvd25sb2FkKHBkKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLnJxKHsKICAgICAgICB1cmw6ICIvYXBpL3Byb2R1Y3QvZG93blVybCIsCiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgcGFyYW06IHsKICAgICAgICAgIGlkOiBfdGhpcy5vbnRlbnRfZGF0YXMucHJvZHVjdElkCiAgICAgICAgfSwKICAgICAgICBvbkVycm9yOiBmdW5jdGlvbiBvbkVycm9yKCkge30sCiAgICAgICAgX3RoaXM6IF90aGlzCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsKICAgICAgICAgIC8vIHRoaXMuJG1lc3NhZ2UoIua3u+WKoOaIkOWKnyIpOwogICAgICAgICAgcmVzLmRhdGEgPSByZXMuZGF0YS5yZXBsYWNlKCdodHRwOicsICdodHRwczonKTsKICAgICAgICAgIHZhciByZWcgPSAvXC4oXHcqPylcPy87CiAgICAgICAgICB2YXIgZXh0ID0gcmVnLmV4ZWMocmVzLmRhdGEpWzFdOwoKICAgICAgICAgIGlmICgnemlwJyA9PSBleHQudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKCdocmVmJywgcmVzLmRhdGEpOyAvL+iuvue9ruS4i+i9veaWh+S7tueahHVybOWcsOWdgAoKICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCBfdGhpcy5vbnRlbnRfZGF0YXMuaW1nU24gKyAnLicgKyBleHQpOyAvL+eUqOS6juiuvue9ruS4i+i9veaWh+S7tueahOaWh+S7tuWQjQoKICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwgIl9zZWxmIik7CiAgICAgICAgICAgIGVsZS5jbGljaygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZG93bmxvYWQoX3RoaXMsIHJlcy5kYXRhLCBfdGhpcy5vbnRlbnRfZGF0YXMuaW1nU24gKyAnLicgKyBleHQpOwogICAgICAgICAgfSAvLyBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAvLyB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InOwogICAgICAgICAgLy8geGhyLm9wZW4oJ0dFVCcsIHJlcy5kYXRhLCB0cnVlKTsKICAgICAgICAgIC8vIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpewogICAgICAgICAgLy8gICAgIGxldCByZXMxID0geGhyLnJlc3BvbnNlOwogICAgICAgICAgLy8gICAgIGlmKHJlczEpewogICAgICAgICAgLy8gICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgLy8gICAgICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHJlczEpOwogICAgICAgICAgLy8gICAgICAgICBsaW5rLmRvd25sb2FkID0gX3RoaXMub250ZW50X2RhdGFzLmltZ1NuICsgJy4nICsgZXh0OwogICAgICAgICAgLy8gICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgICAgICAvLyAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwobGluay5ocmVmKTsKICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAvLyB9CiAgICAgICAgICAvLyB4aHIuc2VuZCgpOwoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHJlcy5kZXNjKTsgLy8KCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VTaXplOiBmdW5jdGlvbiBjaGFuZ2VTaXplKCkgewogICAgICBpZiAodGhpcy5wICE9IG51bGwgJiYgdGhpcy5wLmxlbmd0aCA+IDApIHNvcnRpbmdfbGlzdCh0aGlzLnAsIHRoaXMpOwogICAgfSwKICAgIC8vIHNvcnRpbmdfbGlzdCh4KSB7CiAgICAvLyAgIC8vIOWjsOaYjuS4gOS4quaVsOe7hO+8jOeUqOadpeiusOW9leavj+S4gOWIl+eahOmrmOW6pgogICAgLy8KICAgIC8vICAgbGV0IHBhZGRpbmd3aWR0aCA9IDAuMjsKICAgIC8vCiAgICAvLyAgIGxldCBwYWRkaW5nV2lkdGg9MC4xICogdGhpcy4kc3RvcmUuc3RhdGUuZm9udFJhdGU7CiAgICAvLyAgIGxldCBpbWdDb250YWluZXJXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCAtIHBhZGRpbmd3aWR0aCAqIHRoaXMuJHN0b3JlLnN0YXRlLmZvbnRSYXRlOwogICAgLy8KICAgIC8vICAgaWYgKGltZ0NvbnRhaW5lcldpZHRoID4gMjM4MCkgewogICAgLy8gICAgIHRoaXMubGlzdG51bWJlciA9IDEwCiAgICAvLyAgIH0gZWxzZSBpZiAoaW1nQ29udGFpbmVyV2lkdGggPiAyMTQwKSB7CiAgICAvLyAgICAgdGhpcy5saXN0bnVtYmVyID0gOQogICAgLy8gICB9IGVsc2UgaWYgKGltZ0NvbnRhaW5lcldpZHRoID4gMTkwMCkgewogICAgLy8gICAgIHRoaXMubGlzdG51bWJlciA9IDgKICAgIC8vICAgfSBlbHNlIGlmIChpbWdDb250YWluZXJXaWR0aCA+IDE2NjApIHsKICAgIC8vICAgICB0aGlzLmxpc3RudW1iZXIgPSA3CiAgICAvLyAgIH0gZWxzZSBpZiAoaW1nQ29udGFpbmVyV2lkdGggPiAxNDIwKSB7CiAgICAvLyAgICAgdGhpcy5saXN0bnVtYmVyID0gNgogICAgLy8gICB9IGVsc2UgaWYgKGltZ0NvbnRhaW5lcldpZHRoID4gMTE4MCkgewogICAgLy8gICAgIHRoaXMubGlzdG51bWJlciA9IDUKICAgIC8vICAgfSBlbHNlIGlmIChpbWdDb250YWluZXJXaWR0aCA+IDk0MCkgewogICAgLy8gICAgIHRoaXMubGlzdG51bWJlciA9IDQKICAgIC8vICAgfSBlbHNlIGlmIChpbWdDb250YWluZXJXaWR0aCA+IDcwMCkgewogICAgLy8gICAgIHRoaXMubGlzdG51bWJlciA9IDMKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICB0aGlzLmxpc3RudW1iZXIgPSAyCiAgICAvLyAgIH0KICAgIC8vCiAgICAvLyAgIGxldCBpbWdXaWR0aCA9IE1hdGgucm91bmQoaW1nQ29udGFpbmVyV2lkdGggLyB0aGlzLmxpc3RudW1iZXIgKiAxMDApIC8gMTAwOwogICAgLy8KICAgIC8vICAgbGV0IEhlaWdodF9hcnJheSA9IFtdOwogICAgLy8KICAgIC8vCiAgICAvLyAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB4Lmxlbmd0aDsgaW5kZXgrKykgewogICAgLy8gICAgIC8vIOaLv+WIsOWuveW6pgogICAgLy8gICAgIHhbaW5kZXhdLndpZHRoID0gaW1nV2lkdGg7CiAgICAvLwogICAgLy8gICAgIHhbaW5kZXhdLmhlaWdodCA9IGltZ1dpZHRoICogKHhbaW5kZXhdLmltZ0hlaWdodCAvIHhbaW5kZXhdLmltZ1dlaWdodCk7CiAgICAvLyAgICAgaWYgKGluZGV4IDwgdGhpcy5saXN0bnVtYmVyKSB7CiAgICAvLyAgICAgICB4W2luZGV4XS50b3AgPSAwOwogICAgLy8gICAgICAgeFtpbmRleF0ubGVmdCA9IChpbmRleCAlICh0aGlzLmxpc3RudW1iZXIgKyAxKSkgKiAoeFtpbmRleF0ud2lkdGgpOwogICAgLy8gICAgICAgLy8g5q+P5LiA5YiX55qE6auY5bqm5piv5b2T5YmN5Zu+54mH55qE6auY5bqmICAg5Zu+54mH55qE6auY5bqm5piv6auY5a695q+UKjI1Nitib3R0b20KICAgIC8vCiAgICAvLyAgICAgICBIZWlnaHRfYXJyYXkucHVzaCgKICAgIC8vICAgICAgICAgICAoeFtpbmRleF0uaW1nSGVpZ2h0IC8geFtpbmRleF0uaW1nV2VpZ2h0KSAqIHhbaW5kZXhdLndpZHRoICsgNTYKICAgIC8vICAgICAgICk7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgIGxldCBtaW4gPSBIZWlnaHRfYXJyYXkubWluaW5kZXgoSGVpZ2h0X2FycmF5KTsgLy/mi7/liLDmnIDnn63liJfnmoTkuIvmoIcKICAgIC8vCiAgICAvLyAgICAgICAvLyBjb25zb2xlLmxvZyhIZWlnaHRfYXJyYXkpOwogICAgLy8gICAgICAgLy8gY29uc29sZS5sb2coSGVpZ2h0X2FycmF5W21pbl0pOwogICAgLy8gICAgICAgLy8g5b2T5YmN55qE5Zu+54mH55qEdG9wIOWwseaYr+acgOS9juWIl+eahOmrmOW6pgogICAgLy8gICAgICAgeFtpbmRleF0udG9wID0gSGVpZ2h0X2FycmF5W21pbl07CiAgICAvLyAgICAgICAvLyDlvZPliY3lm77niYfnmoRsZWZ0IOaYr+acgOS9juWIl+eahOS4i+aghyooMjU2ICsgMTYpCiAgICAvLyAgICAgICB4W2luZGV4XS5sZWZ0ID0gbWluICogKHhbaW5kZXhdLndpZHRoKTsKICAgIC8vICAgICAgIC8vIOeEtuWQjuacgOS9juWIl+eahOmrmOW6puatpOaXtuWwseaYr+acgOS9juWIl+eahOmrmOW6puWKoOS4iuW9k+WJjeWbvueJh+eahOmrmOW6pgogICAgLy8gICAgICAgSGVpZ2h0X2FycmF5W21pbl0gPQogICAgLy8gICAgICAgICAgIEhlaWdodF9hcnJheVttaW5dICsKICAgIC8vICAgICAgICAgICAoeFtpbmRleF0uaW1nSGVpZ2h0IC8geFtpbmRleF0uaW1nV2VpZ2h0KSAqIHhbaW5kZXhdLndpZHRoICsKICAgIC8vICAgICAgICAgICA1NjsKICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vICAgLy8g6L+Z6YeM6I635Y+W5YiX55qE5pyA5aSn5YC85aSN5Yi257uZ5LuY5YWD57SgCiAgICAvLyAgIHRoaXMuY29uc0hlaWdodCA9IEhlaWdodF9hcnJheS5tYXgoSGVpZ2h0X2FycmF5KTsKICAgIC8vCiAgICAvLyAgIHRoaXMubGluZWxpc3QgPSAiIjsKICAgIC8vCiAgICAvLyAgIHdpbmRvdy5saW5lbGlzdCA9IHRoaXMubGluZWxpc3QgPSB4OwogICAgLy8gfSwKICAgIHNlbGVjdEFsaWtlQnlJZDogZnVuY3Rpb24gc2VsZWN0QWxpa2VCeUlkKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIC8vIHRoaXMubGluZWxpc3Q9bnVsbDsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdGhpcy5ycSh7CiAgICAgICAgdXJsOiAiL2FwaS9wcm9kdWN0L3NlbGVjdEFsaWtlQnlJZCIsCiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgcGFyYW06IHsKICAgICAgICAgIHByb2R1Y3RJZDogdm0ucHJvZHVjdElkCiAgICAgICAgfSwKICAgICAgICBvbkVycm9yOiBmdW5jdGlvbiBvbkVycm9yKCkge30sCiAgICAgICAgdm06IHZtCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsKICAgICAgICAgIHZtLnAgPSByZXMuZGF0YTsKCiAgICAgICAgICBpZiAodm0ucCA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgX3RoaXM1LmxpbmVsaXN0ID0gbnVsbDsKICAgICAgICAgICAgX3RoaXM1LmNvbnNIZWlnaHQgPSAwOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gICDojrflj5blrr3luqYKICAgICAgICAgICAgc29ydGluZ19saXN0KHZtLnAsIHZtKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8KICAgICAgICAgIF90aGlzNS4kbWVzc2FnZShyZXMuZGVzYyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyAgIExpY2Vuc2UgVHlwZSDljZXpgIkg8J+RiAogICAgY29udGVudF9saXN0X2Jvb2xzOiBmdW5jdGlvbiBjb250ZW50X2xpc3RfYm9vbHMoYSkgewogICAgICB0aGlzLmxpY2Vuc2VUeXBlID0gYTsKICAgICAgdGhpcy5jYWxjUHJpY2UoKTsgLy8gZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuY29udGVudF9saXN0X2JvbGwubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIC8vICAgdGhpcy5jb250ZW50X2xpc3RfYm9sbFtpbmRleF0gPSBmYWxzZTsKICAgICAgLy8gfQogICAgICAvLyB0aGlzLmNvbnRlbnRfbGlzdF9ib2xsW2FdID0gdHJ1ZTsgLy/nlLHkuo7mlbDnu4Tmm7TmlrDmsqHmnInlip7ms5Xop6blj5Fkb23mm7TmlrDvvIzmiYDku6Xnu5nmlbDnu4Tov5vooYzph43mlrDotJ/lgLzlkKcKICAgICAgLy8KICAgICAgLy8gbGV0IHggPSB0aGlzLmNvbnRlbnRfbGlzdF9ib2xsOwogICAgICAvLyB0aGlzLmNvbnRlbnRfbGlzdF9ib2xsID0gW107CiAgICAgIC8vIHRoaXMuY29udGVudF9saXN0X2JvbGwgPSB4OwogICAgfSwKICAgIC8vICAg54K55Ye75aSH6YCJ5Zu+IPCfkYgKICAgIGNhbmRpZGF0ZV9jbGljazogZnVuY3Rpb24gY2FuZGlkYXRlX2NsaWNrKHNyYykgewogICAgICBpZiAodGhpcy5jb250ZWVudF9pbWcyID09ICIiKSB7CiAgICAgICAgLy8g6aaW5YWI5bCGY29udGVudOWbvueJh+e7mSDml4HovrnnmoTlsI/lm77niYcKICAgICAgICB0aGlzLmNvbnRlZW50X2ltZzIgPSB0aGlzLmNvbnRlZW50X2ltZzsKICAgICAgfSAvLyDnhLblkI7lsIZzcmPnu5ljb250ZW50CgoKICAgICAgdGhpcy5jb250ZWVudF9pbWcgPSBzcmM7CiAgICB9LAogICAgLy8g5bCP5Zu+54mH5ZKM5aSn5Zu+54mH55qE5ZG85ZSk8J+RiAogICAgY29udGVudF9pbWcyX2NsaWNrOiBmdW5jdGlvbiBjb250ZW50X2ltZzJfY2xpY2soKSB7CiAgICAgIC8vIOWjsOaYjuS4gOS4quWPmOmHj++8jOS9nOS4uuS4tOaXtuaVsOaNruWtmOaUvgogICAgICB2YXIgSW1nTWF4U3JjID0gdGhpcy5jb250ZWVudF9pbWc7CiAgICAgIHRoaXMuY29udGVlbnRfaW1nID0gdGhpcy5jb250ZWVudF9pbWcyOwogICAgICB0aGlzLmNvbnRlZW50X2ltZzIgPSBJbWdNYXhTcmM7CiAgICB9LAogICAgY2FsY1ByaWNlOiBmdW5jdGlvbiBjYWxjUHJpY2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbGljZW5zZVR5cGUgPSBfdGhpcy5saWNlbnNlVHlwZTsKICAgICAgdmFyIHByaWNlID0gX3RoaXMub250ZW50X2RhdGFzLnByaWNlOwogICAgICB2YXIgcHJpY2VPbmNlID0gX3RoaXMub250ZW50X2RhdGFzLnByaWNlT25jZTsKCiAgICAgIGlmIChsaWNlbnNlVHlwZSA9PSAzKSB7CiAgICAgICAgX3RoaXMubGljZW5zZVByaWNlID0gcHJpY2VPbmNlOwogICAgICB9IGVsc2UgaWYgKGxpY2Vuc2VUeXBlID09IDUpIHsKICAgICAgICBfdGhpcy5saWNlbnNlUHJpY2UgPSBwcmljZTsKICAgICAgfSBlbHNlIGlmIChsaWNlbnNlVHlwZSA9PSA0KSB7CiAgICAgICAgX3RoaXMubGljZW5zZVByaWNlID0gTWF0aC5yb3VuZChwcmljZSAqIDAuOCAqIDEwMCkgLyAxMDA7CiAgICAgIH0gZWxzZSBpZiAobGljZW5zZVR5cGUgPT0gMSkgewogICAgICAgIF90aGlzLmxpY2Vuc2VQcmljZSA9IE1hdGgucm91bmQocHJpY2UgKiAwLjUgKiAxMDApIC8gMTAwOwogICAgICB9CiAgICB9LAogICAgLy8gICDojrflj5blpIfpgInlm74g8J+RiAogICAgY2FuZGlkYXRlOiBmdW5jdGlvbiBjYW5kaWRhdGUoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdGhpcy5ycSh7CiAgICAgICAgdXJsOiAiL2FwaS9wcm9kdWN0L3NlbGVjdEJ5SWQiLAogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHBhcmFtOiB7CiAgICAgICAgICBwcm9kdWN0SWQ6IHZtLnByb2R1Y3RJZAogICAgICAgIH0sCiAgICAgICAgb25FcnJvcjogZnVuY3Rpb24gb25FcnJvcigpIHt9LAogICAgICAgIHZtOiB2bQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2bS5yZXBhdEZsYWcgPSAwOwoKICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAvLyAgIHZtLnAgPSByZXMuZGF0YS5hYURhdGE7CiAgICAgICAgICB2bS5vbnRlbnRfZGF0YXMgPSByZXMuZGF0YTsgLy8g6aaW5YWI5Yik5pat55So5oi35piv5ZCm55m76ZmGCgogICAgICAgICAgaWYgKHJlcy51c2VyICYmIHJlcy51c2VyLmlkKSB7fSBlbHNlIHsKICAgICAgICAgICAgdmFyIG0gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzc2hvcHBpbmdfY2FyJykpOwoKICAgICAgICAgICAgaWYgKG0gJiYgbS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgaWYgKG0uc29tZShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ucHJvZHVjdElkID09IHZtLnByb2R1Y3RJZDsKICAgICAgICAgICAgICB9KSkgewogICAgICAgICAgICAgICAgdm0ub250ZW50X2RhdGFzLmlzQnV5ID0gMTsKICAgICAgICAgICAgICB9IC8vIGxldCBzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc3Nob3BwaW5nX2NhcikKICAgICAgICAgICAgICAvLyBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAvLyAgIGlmIChzW2luZGV4XS5pbWdTbiA9PT0gdm0ub250ZW50X2RhdGFzLmltZ1NuKSB7CiAgICAgICAgICAgICAgLy8gICAgIHZtLkJhZyA9IGZhbHNlCiAgICAgICAgICAgICAgLy8gICB9CiAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAvLyB9CgogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHZtLm9udGVudF9kYXRhcy5pc1VzZSA+IDApIHsKICAgICAgICAgICAgdm0ubGljZW5zZVR5cGUgPSA1OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdm0ubGljZW5zZVR5cGUgPSAzOwogICAgICAgICAgfSAvLyDlj6/ku6XkubDmlq0KCgogICAgICAgICAgaWYgKHZtLm9udGVudF9kYXRhcy5pc0J1eW91dCA9PSAxKSB7CiAgICAgICAgICAgIHZtLmxpY2Vuc2VUeXBlID0gMzsKICAgICAgICAgIH0gLy8gaWYgKHZtLm9udGVudF9kYXRhcy5oYXNDb2xsZWN0aW9uID4gMCkgewogICAgICAgICAgLy8gICB0aGlzLkNvbGxlY3QgPSBmYWxzZQogICAgICAgICAgLy8gfQoKCiAgICAgICAgICBfdGhpczYuY2FsY1ByaWNlKCk7CgogICAgICAgICAgdm0udHlwZXMgPSBbXTsKICAgICAgICAgIHZtLm9udGVudF9kYXRhcy5pc1JlcGVhdCA9IDA7CiAgICAgICAgICB2bS5vbnRlbnRfZGF0YXMuaXNMYXllciA9IDA7CiAgICAgICAgICByZXMuZGF0YS5zdHlsZVN0ci5zcGxpdCgnLCcpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKGl0ZW0gIT0gJycpIHsKICAgICAgICAgICAgICB2bS50eXBlcy5wdXNoKGl0ZW0pOwoKICAgICAgICAgICAgICBpZiAoaXRlbSA9PSAnSW4gUmVwZWF0JyB8fCBpdGVtID09ICdDeWNsaWMgZ3JhcGgnKSB7CiAgICAgICAgICAgICAgICB2bS5vbnRlbnRfZGF0YXMuaXNSZXBlYXQgPSAxOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGl0ZW0uaW5kZXhPZignU2ltcGxlIGxheWVyZWQnKSA+PSAwIHx8IGl0ZW0gPT0gJ0xheWVyZWQgZmlsZScgfHwgaXRlbSA9PSAnQ29sb3Igc2VwYXJhdGlvbicpIHsKICAgICAgICAgICAgICAgIHZtLm9udGVudF9kYXRhcy5pc0xheWVyID0gMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChyZXMuZGF0YS5pbWdTaXplKSB7CiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5pbWdTaXplID09ICfnn6Lph4/lm74nKSB7CiAgICAgICAgICAgICAgdm0uaW1nU2l6ZSA9ICdWZWN0b3IgaW1hZ2UnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciB3cCA9IDMwMCwKICAgICAgICAgICAgICAgICAgaHAgPSAzMDA7CiAgICAgICAgICAgICAgdmFyIHcgPSAnJywKICAgICAgICAgICAgICAgICAgaCA9ICcnLAogICAgICAgICAgICAgICAgICBpbWdTaXplLAogICAgICAgICAgICAgICAgICB3aDsKCiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmltZ1NpemUuaW5kZXhPZignY20nKSA+PSAwKSB7CiAgICAgICAgICAgICAgICBpbWdTaXplID0gcmVzLmRhdGEuaW1nU2l6ZS5yZXBsYWNlKCdjbScsICcnKTsKICAgICAgICAgICAgICAgIGltZ1NpemUgPSBpbWdTaXplLnJlcGxhY2UoJ2NtJywgJycpOwogICAgICAgICAgICAgICAgd2ggPSBpbWdTaXplLnNwbGl0KCIqIik7CgogICAgICAgICAgICAgICAgaWYgKHdoWzBdKSB7CiAgICAgICAgICAgICAgICAgIHcgPSBNYXRoLnJvdW5kKHdoWzBdIC8gMjU0ICogMTAwICogd3ApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh3aFsxXSkgewogICAgICAgICAgICAgICAgICBoID0gTWF0aC5yb3VuZCh3aFsxXSAvIDI1NCAqIDEwMCAqIHdwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaW1nU2l6ZSA9IHJlcy5kYXRhLmltZ1NpemUucmVwbGFjZSgn5YOP57SgJywgJycpOwogICAgICAgICAgICAgICAgaW1nU2l6ZSA9IGltZ1NpemUucmVwbGFjZSgn5YOP57SgJywgJycpOwogICAgICAgICAgICAgICAgd2ggPSBpbWdTaXplLnNwbGl0KCIqIik7CiAgICAgICAgICAgICAgICB3ID0gd2hbMF07CiAgICAgICAgICAgICAgICBoID0gd2hbMV07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAodyAmJiBoKSB7CiAgICAgICAgICAgICAgICB2bS5pbWdTaXplID0gdyArICcqJyArIGg7CiAgICAgICAgICAgICAgICB2YXIgdzMgPSAnJywKICAgICAgICAgICAgICAgICAgICB3NiA9ICcnLAogICAgICAgICAgICAgICAgICAgIGgzID0gJycsCiAgICAgICAgICAgICAgICAgICAgaDYgPSAnJzsKCiAgICAgICAgICAgICAgICBpZiAodykgewogICAgICAgICAgICAgICAgICB3MyA9IE1hdGgucm91bmQodyAqIDI1NCAvIDMwMCkgLyAxMDA7CiAgICAgICAgICAgICAgICAgIHc2ID0gTWF0aC5yb3VuZCh3ICogMjU0IC8gNjAwKSAvIDEwMDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoaCkgewogICAgICAgICAgICAgICAgICBoMyA9IE1hdGgucm91bmQoaCAqIDI1NCAvIDMwMCkgLyAxMDA7CiAgICAgICAgICAgICAgICAgIGg2ID0gTWF0aC5yb3VuZChoICogMjU0IC8gNjAwKSAvIDEwMDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2bS5wcmludFNpemUxID0gdzMgKyAnKicgKyBoMyArICdjbSgzMDBkcGkpJzsKICAgICAgICAgICAgICAgIHZtLnByaW50U2l6ZTIgPSB3NiArICcqJyArIGg2ICsgJ2NtKDYwMGRwaSknOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2bS5pbWdTaXplID0gcmVzLmRhdGEuaW1nU2l6ZTsKICAgICAgICAgICAgICAgIHZtLnByaW50U2l6ZTEgPSAnJzsKICAgICAgICAgICAgICAgIHZtLnByaW50U2l6ZTIgPSAnJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZtLmltZ1NpemUgPSAnJzsKICAgICAgICAgICAgdm0ucHJpbnRTaXplMSA9ICcnOwogICAgICAgICAgICB2bS5wcmludFNpemUyID0gJyc7CiAgICAgICAgICB9CgogICAgICAgICAgdm0uY2F0ZWdvcmllcyA9IFtdOwogICAgICAgICAgcmVzLmRhdGEucHJvZHVjdEZpY2F0aW9uU3RyLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpZiAoaXRlbSAhPSAnJykgdm0uY2F0ZWdvcmllcy5wdXNoKGl0ZW0pOwogICAgICAgICAgfSk7CiAgICAgICAgICB2bS50YWdzID0gW107CiAgICAgICAgICByZXMuZGF0YS5sYWJlbC5zcGxpdCgnLCcpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKGl0ZW0gIT0gJycpIHZtLnRhZ3MucHVzaChpdGVtKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmVzLmRhdGEuZW50aXR5U3RyLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpZiAoaXRlbSAhPSAnJykgdm0udGFncy5wdXNoKGl0ZW0pOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXMuZGF0YS5zY2VuZVN0ci5zcGxpdCgnLCcpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKGl0ZW0gIT0gJycpIHZtLnRhZ3MucHVzaChpdGVtKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmVzLmRhdGEuc2Vhc29uU3RyLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpZiAoaXRlbSAhPSAnJykgdm0udGFncy5wdXNoKGl0ZW0pOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXMuZGF0YS5mYXNoaW9uU3RyLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpZiAoaXRlbSAhPSAnJykgdm0udGFncy5wdXNoKGl0ZW0pOwogICAgICAgICAgfSk7IC8vIGNvbnNvbGUubG9nKCJyZXMuZGF0YS5pc1JlcGVhdCIsIHJlcy5kYXRhLmlzUmVwZWF0KTsKCiAgICAgICAgICB2bS5pc1JlcGVhdCA9IHJlcy5kYXRhLmlzUmVwZWF0OyAvLyB2bS5jb250ZWVudF9pbWcgPSB2bS4kaW1nU2VydmVyICsgcmVzLmRhdGEuY292ZXI7CgogICAgICAgICAgdm0uY29udGVlbnRfaW1nID0gdm0uJGltZ1NlcnZlciArIHJlcy5kYXRhLmNvdmVyOyAvLyB2bS5pbWcgPSB2bS5jb250ZWVudF9pbWc7CgogICAgICAgICAgdm0ubG9hZEltZyh2bS5jb250ZWVudF9pbWcpOwogICAgICAgICAgdm0ubmFtZUxpc3RbMF0uaW1nID0gdm0uY29udGVlbnRfaW1nOwogICAgICAgICAgdm0ubmFtZUxpc3RbMF0uYmlncHNkLmltZyA9IHZtLmNvbnRlZW50X2ltZzsgLy8gbGV0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgLy8gaW1nLnNldEF0dHJpYnV0ZSgiY3Jvc3NPcmlnaW4iLCAiYW5vbnltb3VzIik7CiAgICAgICAgICAvLyAvLyBpbWcuc2V0QXR0cmlidXRlKCJjcm9zc09yaWdpbiIsICJ1c2UtY3JlZGVudGlhbHMiKTsKICAgICAgICAgIC8vIGltZy5zcmMgPSB2bS5jb250ZWVudF9pbWc7CiAgICAgICAgICAvLyBpbWcub25sb2FkID0gKCkgPT4gewogICAgICAgICAgLy8gICAvLyBjb25zb2xlLmxvZyhpbWcpOwogICAgICAgICAgLy8gICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgICAgICAvLyAgIGxldCBjdHgzID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgICAgICAvLyAgIGxldCBjYW52YXNjbGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgICAgICAvLyAgIGxldCBjdHg0ID0gY2FudmFzY2xpcC5nZXRDb250ZXh0KCIyZCIpOwogICAgICAgICAgLy8gICBjYW52YXNjbGlwLndpZHRoID0gMTIwMDsKICAgICAgICAgIC8vICAgY2FudmFzY2xpcC5oZWlnaHQgPSAxMjAwOwogICAgICAgICAgLy8gICBsZXQgV2lkdGggPSBpbWcud2lkdGggLyAzOwogICAgICAgICAgLy8gICBsZXQgSGVpZ2h0ID0gKGltZy5oZWlnaHQgKiBXaWR0aCkgLyBpbWcud2lkdGg7CiAgICAgICAgICAvLyAgIGNhbnZhcy53aWR0aCA9IFdpZHRoICogMzsKICAgICAgICAgIC8vICAgY2FudmFzLmhlaWdodCA9IEhlaWdodCAqIDM7CiAgICAgICAgICAvLyAgIGN0eDMuZHJhd0ltYWdlKGltZywgMCwgMCwgV2lkdGgsIEhlaWdodCk7CiAgICAgICAgICAvLyAgIGN0eDMuZHJhd0ltYWdlKGltZywgV2lkdGgsIDAsIFdpZHRoLCBIZWlnaHQpOwogICAgICAgICAgLy8gICBjdHgzLmRyYXdJbWFnZShpbWcsIDIgKiBXaWR0aCwgMCwgV2lkdGgsIEhlaWdodCk7CiAgICAgICAgICAvLyAgIGN0eDMuZHJhd0ltYWdlKGltZywgMCwgSGVpZ2h0LCBXaWR0aCwgSGVpZ2h0KTsKICAgICAgICAgIC8vICAgY3R4My5kcmF3SW1hZ2UoaW1nLCBXaWR0aCwgSGVpZ2h0LCBXaWR0aCwgSGVpZ2h0KTsKICAgICAgICAgIC8vICAgY3R4My5kcmF3SW1hZ2UoaW1nLCAyICogV2lkdGgsIEhlaWdodCwgV2lkdGgsIEhlaWdodCk7CiAgICAgICAgICAvLyAgIGN0eDMuZHJhd0ltYWdlKGltZywgMCwgMiAqIEhlaWdodCwgV2lkdGgsIEhlaWdodCk7CiAgICAgICAgICAvLyAgIGN0eDMuZHJhd0ltYWdlKGltZywgV2lkdGgsIDIgKiBIZWlnaHQsIFdpZHRoLCBIZWlnaHQpOwogICAgICAgICAgLy8gICBjdHgzLmRyYXdJbWFnZShpbWcsIDIgKiBXaWR0aCwgMiAqIEhlaWdodCwgV2lkdGgsIEhlaWdodCk7CiAgICAgICAgICAvLyAgIGxldCBzdGFydFggPSAoY2FudmFzLndpZHRoIC0gY2FudmFzY2xpcC53aWR0aCkgLyAyOwogICAgICAgICAgLy8gICBsZXQgc3RhcnRZID0gKGNhbnZhcy5oZWlnaHQgLSBjYW52YXNjbGlwLndpZHRoKSAvIDI7CiAgICAgICAgICAvLyAgIGN0eDQuZHJhd0ltYWdlKAogICAgICAgICAgLy8gICAgIGNhbnZhcywKICAgICAgICAgIC8vICAgICBzdGFydFgsCiAgICAgICAgICAvLyAgICAgc3RhcnRZLAogICAgICAgICAgLy8gICAgIGNhbnZhc2NsaXAud2lkdGgsCiAgICAgICAgICAvLyAgICAgY2FudmFzY2xpcC53aWR0aCwKICAgICAgICAgIC8vICAgICAwLAogICAgICAgICAgLy8gICAgIDAsCiAgICAgICAgICAvLyAgICAgY2FudmFzY2xpcC53aWR0aCwKICAgICAgICAgIC8vICAgICBjYW52YXNjbGlwLndpZHRoCiAgICAgICAgICAvLyAgICk7CiAgICAgICAgICAvLyAgIGxldCBpbWdzID0gY2FudmFzY2xpcC50b0RhdGFVUkwoImltYWdlL3BuZyIpOwogICAgICAgICAgLy8gICB2bS5uYW1lTGlzdFsxXS5pbWcgPSBpbWdzOwogICAgICAgICAgLy8gICB2bS5uYW1lTGlzdFsxXS5iaWdwc2QuaW1nID0gaW1nczsKICAgICAgICAgIC8vICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmQoY2FudmFzKQogICAgICAgICAgLy8gICAvLyBkb2N1bWVudC5ib2R5LmFwcGVuZChjYW52YXNjbGlwKTsKICAgICAgICAgIC8vIH07CgogICAgICAgICAgaWYgKHJlcy5kYXRhLmF0dGFjaExpc3QubGVuZ3RoICE9IDApIHsKICAgICAgICAgICAgdm0uY2FuZGlkYXRlX2ltZ2xpc3QgPSByZXMuZGF0YS5hdHRhY2hMaXN0OwoKICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHZtLmNhbmRpZGF0ZV9pbWdsaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgIHZtLmNhbmRpZGF0ZV9pbWdsaXN0W2luZGV4XS5zcmMgPSB2bS4kaW1nU2VydmVyICsgdm0uY2FuZGlkYXRlX2ltZ2xpc3RbaW5kZXhdLnNyYzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yICh2YXIgX2luZGV4ID0gMDsgX2luZGV4IDwgMjA7IF9pbmRleCsrKSB7CiAgICAgICAgICAgICAgdm0uY2FuZGlkYXRlX2ltZ2xpc3QucHVzaCh2bS5jYW5kaWRhdGVfaW1nbGlzdFswXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczYuc3UgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLwogICAgICAgICAgX3RoaXM2LiRtZXNzYWdlKHJlcy5kZXNjKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaViOaenOWbvuaWsOWinueahG1ldGhvZHPlh73mlbAKICAgIC8vIOiOt+WPluaooeWei+eahOWHveaVsAogICAgZ2V0UFNEOiBmdW5jdGlvbiBnZXRQU0QoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczcuZ2V0TmFtZSgpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfdGhpczcuZ2V0bGlzdCgpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0TmFtZTogZnVuY3Rpb24gZ2V0TmFtZSgpIHsKICAgICAgLy8gY29uc29sZS5sb2coMTExKTsKICAgICAgdmFyIF90aGlzID0gdGhpczsgLy8gYXhpb3Mg5Z+65pys5L2/55SoCgoKICAgICAgYXhpb3MoewogICAgICAgIHVybDogIi9uYW1lLmpzIiAvLyDor7fmsYLnmoTpk77mjqUKCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLm5hbWVMaXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pOyAvLyBheGlvcyh7CiAgICAgIC8vICAgdXJsOiAiLy8xMTYuNjIuNTkuODY6MTA4MTEvbmFtZS5qcyIsIC8vIOivt+axgueahOmTvuaOpQogICAgICAvLyB9KQogICAgICAvLyAgIC50aGVuKChyZXMpID0+IHsKICAgICAgLy8KICAgICAgLy8gICAgIC8vIOaOpeWPl+ivt+axguaIkOWKn+i/lOWbnueahOaVsOaNrgogICAgICAvLyAgICAgLy8gY29uc29sZS5sb2cocmVzKTsKICAgICAgLy8gICAgIF90aGlzLm5hbWVMaXN0ID0gcmVzLmRhdGE7CiAgICAgIC8vICAgfSkKICAgICAgLy8gLmNhdGNoKChlcnIpID0+IHsKICAgICAgLy8gICAvLyDmjqXlj5for7fmsYLlpLHotKXov5Tlm57nmoTmlbDmja4KICAgICAgLy8gICAvLyBjb25zb2xlLmxvZyhlcnIpOwogICAgICAvLyAgIGNvbnNvbGUubG9nKDEpOwogICAgICAvLyB9KTsKICAgIH0sCiAgICAvLyDnrKzkuIDmrKHlpITnkIbmlbDmja4s5Li65LqG6K6p5aSn55qEcHNk5LiO5ZCO5Y+w5o6l5Y+j6L+U5Zue55qE5ZCI5bm2CiAgICBnZXRMaXN0MTogZnVuY3Rpb24gZ2V0TGlzdDEoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMucHNkTGlzdCkgewogICAgICAgIC8vIGxldCBtYXAgPSB7fTsKICAgICAgICB0aGlzLm5hbWVMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgdmFyIGJpZ3BzZDsKCiAgICAgICAgICBpZiAoaXRlbS5iaWdwc2QpIHsKICAgICAgICAgICAgYmlncHNkID0gaXRlbS5iaWdwc2QudGl0bGU7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGJpZ3BzZCA9PT0gX3RoaXM4LnBzZExpc3Rba2V5XS50aXRsZSkgewogICAgICAgICAgICB2YXIgY29weSA9IE9iamVjdC5hc3NpZ24oX3RoaXM4LnBzZExpc3Rba2V5XSwgaXRlbS5iaWdwc2QpOwogICAgICAgICAgICBpdGVtLmJpZ3BzZCA9IGNvcHk7IC8vIGNvbnNvbGUubG9nKGl0ZW0pOwoKICAgICAgICAgICAgX3RoaXM4Lm5ld01vZGVsc0xpc3QucHVzaChpdGVtKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOesrOS6jOasoeWkhOeQhuaVsOaNrizkuLrkuoborqnnrKzkuIDmrKHlvpfliLDnmoTlpKfnmoRwc2TmlbDmja7kuI7ljp/mnKzmnKzlnLDmlbDmja7lkIjlubYKICAgIGdldGxpc3QyOiBmdW5jdGlvbiBnZXRsaXN0MigpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB0aGlzLmdldExpc3QxKCk7CgogICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5uYW1lTGlzdCkgewogICAgICAgIC8vIGxldCBtYXAgPSB7fTsKICAgICAgICB0aGlzLm5ld01vZGVsc0xpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICBpZiAoX3RoaXM5Lm5hbWVMaXN0W2tleV0udGl0bGUgPT0gaXRlbS50aXRsZSkgewogICAgICAgICAgICBfdGhpczkubmFtZUxpc3Rba2V5XSA9IGl0ZW07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnrKzkuInmrKHlpITnkIbmlbDmja4s5Li65LqG5b6X5Yiw5pyA57uI5aSn55qEcHNkIOWSjOWwj+eahHBzZCAg5Lul5ZCO5ZCO5Y+w5Lyg5Zue5p2l55qE5pWw5o2uIOmDveWQiOW5tgogICAgZ2V0bGlzdDogZnVuY3Rpb24gZ2V0bGlzdCgpIHsKICAgICAgdGhpcy5nZXRsaXN0MigpOwogICAgfSwKICAgIC8vIOaViOaenOWbvuaWsOWinuWHveaVsAogICAgLy/lpITnkIbmqKHlnovnmoTlh73mlbAKICAgIHpvb21JbjogZnVuY3Rpb24gem9vbUluKGlTY2FsZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMucmVwYXRGbGFnID0gMzsKICAgICAgY29uc29sZS5sb2coaVNjYWxlKTsgLy8gY29uc29sZS5sb2coIuaJp+ihjOS6huaUvuWkp+e8qeWwjyIpOwoKICAgICAgX3RoaXMuem9vbVBvaW50ID0gbmV3IGZhYnJpYy5Qb2ludChfdGhpcy5jbGlwV2lkdGggLyAyLCBfdGhpcy5jbGlwSGVpZ2h0IC8gMik7IC8vIOS4reW/g+eCuQoKICAgICAgX3RoaXMudmFsdWUgPSBwYXJzZUludChfdGhpcy5pbWdTY2FsZSAqIDEwMCk7CgogICAgICBfdGhpcy5teUNhbnZhcy56b29tVG9Qb2ludChfdGhpcy56b29tUG9pbnQsIF90aGlzLmltZ1NjYWxlKTsKCiAgICAgIHZhciBvYmogPSBfdGhpcy5teUNhbnZhcy5nZXRPYmplY3RzKCk7IC8vIGlmIChfdGhpcy5yZXBhdEZsYWcpIHsKCgogICAgICBpZiAoX3RoaXMucmVwYXRGbGFnID09IDEpIHsKICAgICAgICBvYmouZm9yRWFjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmxlZnQgPj0gKF90aGlzLmNsaXBXaWR0aCAtIHJlcy53aWR0aCAqIHJlcy5zY2FsZVgpIC8gMiAmJiByZXMubGVmdCA8IChfdGhpcy5jbGlwV2lkdGggKyByZXMud2lkdGggKiByZXMuc2NhbGVYKSAvIDIpIHsKICAgICAgICAgICAgX3RoaXMuZmFiT2JqID0gcmVzOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKF90aGlzLnJlcGF0RmxhZyA9PSAyKSB7CiAgICAgICAgb2JqLmZvckVhY2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy50b3AgPj0gKF90aGlzLmNsaXBIZWlnaHQgLSByZXMuaGVpZ2h0ICogcmVzLnNjYWxlWSkgLyAyICYmIHJlcy50b3AgPCAoX3RoaXMuY2xpcEhlaWdodCArIHJlcy5oZWlnaHQgKiByZXMuc2NhbGVZKSAvIDIpIHsKICAgICAgICAgICAgX3RoaXMuZmFiT2JqID0gcmVzOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKF90aGlzLnJlcGF0RmxhZyA9PSAwKSB7CiAgICAgICAgX3RoaXMuZmFiT2JqID0gb2JqWzBdOwogICAgICB9IGVsc2UgaWYgKF90aGlzLnJlcGF0RmxhZyA9PSAzKSB7CiAgICAgICAgb2JqLnNvbWUoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5sZWZ0ID49IChfdGhpcy5jbGlwV2lkdGggLSByZXMud2lkdGggKiByZXMuc2NhbGVYKSAvIDIgJiYgcmVzLmxlZnQgPCAoX3RoaXMuY2xpcFdpZHRoICsgcmVzLndpZHRoICogcmVzLnNjYWxlWCkgLyAyICYmIHJlcy50b3AgPj0gKF90aGlzLmNsaXBIZWlnaHQgLSByZXMuaGVpZ2h0ICogcmVzLnNjYWxlWSkgLyAyICYmIHJlcy50b3AgPCAoX3RoaXMuY2xpcEhlaWdodCArIHJlcy5oZWlnaHQgKiByZXMuc2NhbGVZKSAvIDIpIHsKICAgICAgICAgICAgX3RoaXMuZmFiT2JqID0gcmVzOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIG9iai5mb3JFYWNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAoX3RoaXMucmVwYXRGbGFnID09IDIgfHwgX3RoaXMucmVwYXRGbGFnID09IDApIHsKICAgICAgICAgIHJlcy5sZWZ0ID0gKHJlcy5sZWZ0IC0gX3RoaXMuY2xpcFdpZHRoIC8gMikgLyBpU2NhbGUgKyBfdGhpcy5jbGlwV2lkdGggLyAyOwogICAgICAgIH0KCiAgICAgICAgaWYgKF90aGlzLnJlcGF0RmxhZyA9PSAxIHx8IF90aGlzLnJlcGF0RmxhZyA9PSAwKSB7CiAgICAgICAgICByZXMudG9wID0gKHJlcy50b3AgLSBfdGhpcy5jbGlwV2lkdGggLyAyKSAvIGlTY2FsZSArIF90aGlzLmNsaXBXaWR0aCAvIDI7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5teUNhbnZhcy5yZW1vdmUocmVzKTsKCiAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKHJlcyk7CiAgICAgIH0pOyAvLyDlt6blj7PlgY/np7vovrnnlYwKCiAgICAgIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMiB8fCBfdGhpcy5yZXBhdEZsYWcgPT0gMCkgewogICAgICAgIGlmIChfdGhpcy5mYWJPYmoubGVmdCA8IF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5jbGlwV2lkdGggLyAyIC8gX3RoaXMuaW1nU2NhbGUpIHsKICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0ID0gX3RoaXMuY2xpcFdpZHRoIC8gMiAtIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZTsKICAgICAgICB9IGVsc2UgaWYgKF90aGlzLmZhYk9iai5sZWZ0ID4gX3RoaXMuY2xpcFdpZHRoIC8gMiArIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZSkgewogICAgICAgICAgX3RoaXMuZmFiT2JqLmxlZnQgPSBfdGhpcy5jbGlwV2lkdGggLyAyICsgX3RoaXMuY2xpcFdpZHRoIC8gMiAvIF90aGlzLmltZ1NjYWxlOwogICAgICAgIH0KICAgICAgfSAvLyDkuIrkuIvlgY/np7vovrnnlYwKCgogICAgICBpZiAoX3RoaXMucmVwYXRGbGFnID09IDEgfHwgX3RoaXMucmVwYXRGbGFnID09IDApIHsKICAgICAgICBpZiAoX3RoaXMuZmFiT2JqLnRvcCA8IF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5jbGlwV2lkdGggLyAyIC8gX3RoaXMuaW1nU2NhbGUpIHsKICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgPSBfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuY2xpcFdpZHRoIC8gMiAvIF90aGlzLmltZ1NjYWxlOwogICAgICAgIH0gZWxzZSBpZiAoX3RoaXMuZmFiT2JqLnRvcCA+IF90aGlzLmNsaXBXaWR0aCAvIDIgKyBfdGhpcy5jbGlwV2lkdGggLyAyIC8gX3RoaXMuaW1nU2NhbGUpIHsKICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgPSBfdGhpcy5jbGlwV2lkdGggLyAyICsgX3RoaXMuY2xpcFdpZHRoIC8gMiAvIF90aGlzLmltZ1NjYWxlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgX3RoaXMubXlDYW52YXMucmVtb3ZlKF90aGlzLmZhYk9iaik7CgogICAgICBfdGhpcy5teUNhbnZhcy5hZGQoX3RoaXMuZmFiT2JqKTsKCiAgICAgIHZhciBsZWZ0TnVtID0gMCwKICAgICAgICAgIHJpZ2h0TnVtID0gMCwKICAgICAgICAgIHRvcE51bSA9IDAsCiAgICAgICAgICBib3R0b210TnVtID0gMDsKCiAgICAgIF90aGlzLnJlcGF0R3JvdXAuZm9yRWFjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5sZWZ0IDwgX3RoaXMuZmFiT2JqLmxlZnQgJiYgcmVzLnRvcCA9PSBfdGhpcy5mYWJPYmoudG9wKSB7CiAgICAgICAgICBsZWZ0TnVtKys7CiAgICAgICAgfSBlbHNlIGlmIChyZXMubGVmdCA+IF90aGlzLmZhYk9iai5sZWZ0ICYmIHJlcy50b3AgPT0gX3RoaXMuZmFiT2JqLnRvcCkgewogICAgICAgICAgcmlnaHROdW0rKzsKICAgICAgICB9CgogICAgICAgIGlmIChyZXMudG9wIDwgX3RoaXMuZmFiT2JqLnRvcCAmJiByZXMubGVmdCA9PSBfdGhpcy5mYWJPYmoubGVmdCkgewogICAgICAgICAgdG9wTnVtKys7CiAgICAgICAgfSBlbHNlIGlmIChyZXMudG9wID4gX3RoaXMuZmFiT2JqLnRvcCAmJiByZXMubGVmdCA9PSBfdGhpcy5mYWJPYmoubGVmdCkgewogICAgICAgICAgYm90dG9tdE51bSsrOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBfdGhpcy5sZWZ0TnVtID0gTWF0aC5tYXgoX3RoaXMubGVmdE51bSwgbGVmdE51bSk7CiAgICAgIF90aGlzLnJpZ2h0TnVtID0gTWF0aC5tYXgoX3RoaXMucmlnaHROdW0sIHJpZ2h0TnVtKTsKICAgICAgX3RoaXMudG9wTnVtID0gTWF0aC5tYXgoX3RoaXMudG9wTnVtLCB0b3BOdW0pOwogICAgICBfdGhpcy5ib3R0b210TnVtID0gTWF0aC5tYXgoX3RoaXMuYm90dG9tdE51bSwgYm90dG9tdE51bSk7IC8vIOi+uee8qeaUvui+ueeUu+WbvgoKICAgICAgdmFyIGltZ0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgIGltZ0VsLmNyb3NzT3JpZ2luID0gIkFub255bW91cyI7CiAgICAgIGltZ0VsLnNyYyA9IF90aGlzLmltZy5zcmM7IC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kKGltZ0VsKQoKICAgICAgdmFyIHdpZHRoTnVtTGVmdCA9IE1hdGguY2VpbCgoKF90aGlzLmZhYk9iai5sZWZ0IC0gX3RoaXMuY2xpcFdpZHRoIC8gMikgKiBfdGhpcy5pbWdTY2FsZSArIF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5mYWJPYmoud2lkdGggKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUgLyAyKSAvIChfdGhpcy5mYWJPYmoud2lkdGggKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpKTsKICAgICAgdmFyIHdpZHRoTnVtUmlnaHQgPSBNYXRoLmNlaWwoKChfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuZmFiT2JqLmxlZnQpICogX3RoaXMuaW1nU2NhbGUgKyBfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuZmFiT2JqLndpZHRoICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlIC8gMikgLyAoX3RoaXMuZmFiT2JqLndpZHRoICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlKSk7CiAgICAgIHZhciBoZWlnaHROdW1Ub3AgPSBNYXRoLmNlaWwoKChfdGhpcy5mYWJPYmoudG9wIC0gX3RoaXMuY2xpcFdpZHRoIC8gMikgKiBfdGhpcy5pbWdTY2FsZSArIF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5mYWJPYmouaGVpZ2h0ICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlIC8gMikgLyAoX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkpOwogICAgICB2YXIgaGVpZ2h0TnVtQm90dG9tID0gTWF0aC5jZWlsKCgoX3RoaXMuY2xpcFdpZHRoIC8gMiAtIF90aGlzLmZhYk9iai50b3ApICogX3RoaXMuaW1nU2NhbGUgKyBfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSAvIDIpIC8gKF90aGlzLmZhYk9iai5oZWlnaHQgKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpKTsgLy8gY29uc29sZS5sb2coX3RoaXMucmVwYXRGbGFnKTsKCiAgICAgIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCLmiafooYzkuoYxIik7CiAgICAgICAgaWYgKHdpZHRoTnVtTGVmdCA+IF90aGlzLmxlZnROdW0pIHsKICAgICAgICAgIHZhciB0ID0gX3RoaXMubGVmdE51bSArIDE7CiAgICAgICAgICBfdGhpcy5sZWZ0TnVtID0gd2lkdGhOdW1MZWZ0OwoKICAgICAgICAgIGZvciAodmFyIGxuID0gdDsgbG4gPD0gd2lkdGhOdW1MZWZ0OyBsbisrKSB7CiAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPSBfdGhpcy5mYWJPYmoubGVmdCAtIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBsbjsKICAgICAgICAgICAgX3RoaXMubW92ZXMudG9wID0gX3RoaXMuZmFiT2JqLnRvcDsKICAgICAgICAgICAgdmFyIGltZ3MgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgdG9wOiBfdGhpcy5tb3Zlcy50b3AsCiAgICAgICAgICAgICAgbGVmdDogX3RoaXMubW92ZXMubGVmdCwKICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIgogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChpbWdzKTsKCiAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChpbWdzKTsKCiAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAod2lkdGhOdW1SaWdodCA+IF90aGlzLnJpZ2h0TnVtKSB7CiAgICAgICAgICB2YXIgdDEgPSBfdGhpcy5yaWdodE51bSArIDE7CiAgICAgICAgICBfdGhpcy5yaWdodE51bSA9IHdpZHRoTnVtUmlnaHQ7CgogICAgICAgICAgZm9yICh2YXIgX2xuID0gdDE7IF9sbiA8PSB3aWR0aE51bVJpZ2h0OyBfbG4rKykgewogICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0gX3RoaXMuZmFiT2JqLmxlZnQgKyBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLndpZHRoICogX2xuOwogICAgICAgICAgICBfdGhpcy5tb3Zlcy50b3AgPSBfdGhpcy5mYWJPYmoudG9wOwoKICAgICAgICAgICAgdmFyIF9pbWdzID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoX2ltZ3MpOwoKICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKF9pbWdzKTsKCiAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKF90aGlzLnJlcGF0RmxhZyA9PSAyKSB7CiAgICAgICAgaWYgKGhlaWdodE51bVRvcCA+IF90aGlzLnRvcE51bSkgewogICAgICAgICAgdmFyIF90ID0gX3RoaXMudG9wTnVtICsgMTsKCiAgICAgICAgICBfdGhpcy50b3BOdW0gPSBoZWlnaHROdW1Ub3A7IC8vIGNvbnNvbGUubG9nKCLkuIoiLCBfdGhpcy50b3BOdW0pOwoKICAgICAgICAgIGZvciAodmFyIF9sbjIgPSBfdDsgX2xuMiA8PSBoZWlnaHROdW1Ub3A7IF9sbjIrKykgewogICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0gX3RoaXMuZmFiT2JqLmxlZnQ7CiAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9IF90aGlzLmZhYk9iai50b3AgLSBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIF9sbjI7CgogICAgICAgICAgICB2YXIgX2ltZ3MyID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoX2ltZ3MyKTsKCiAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChfaW1nczIpOwoKICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChoZWlnaHROdW1Cb3R0b20gPiBfdGhpcy5ib3R0b210TnVtKSB7CiAgICAgICAgICB2YXIgX3QyID0gX3RoaXMuYm90dG9tdE51bSArIDE7CgogICAgICAgICAgX3RoaXMuYm90dG9tdE51bSA9IGhlaWdodE51bUJvdHRvbTsKCiAgICAgICAgICBmb3IgKHZhciBfbG4zID0gX3QyOyBfbG4zIDw9IGhlaWdodE51bUJvdHRvbTsgX2xuMysrKSB7CiAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPSBfdGhpcy5mYWJPYmoubGVmdDsKICAgICAgICAgICAgX3RoaXMubW92ZXMudG9wID0gX3RoaXMuZmFiT2JqLnRvcCArIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmouaGVpZ2h0ICogX2xuMzsKCiAgICAgICAgICAgIHZhciBfaW1nczMgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgdG9wOiBfdGhpcy5tb3Zlcy50b3AsCiAgICAgICAgICAgICAgbGVmdDogX3RoaXMubW92ZXMubGVmdCwKICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIgogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChfaW1nczMpOwoKICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKF9pbWdzMyk7CgogICAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCLmiafooYzkuoYzIik7CiAgICAgICAgaWYgKHdpZHRoTnVtTGVmdCA+IF90aGlzLmxlZnROdW0pIHsKICAgICAgICAgIHZhciBfdDMgPSBfdGhpcy5sZWZ0TnVtICsgMTsKCiAgICAgICAgICBfdGhpcy5sZWZ0TnVtID0gd2lkdGhOdW1MZWZ0OwoKICAgICAgICAgIGZvciAodmFyIF9sbjQgPSBfdDM7IF9sbjQgPD0gd2lkdGhOdW1MZWZ0OyBfbG40KyspIHsKICAgICAgICAgICAgZm9yICh2YXIgbG4xID0gX3RoaXMuYm90dG9tdE51bSAqIC0xOyBsbjEgPD0gX3RoaXMudG9wTnVtOyBsbjErKykgewogICAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPSBfdGhpcy5mYWJPYmoubGVmdCAtIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBfbG40OwogICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9IF90aGlzLmZhYk9iai50b3AgLSBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIGxuMTsKCiAgICAgICAgICAgICAgdmFyIF9pbWdzNCA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgICB0b3A6IF90aGlzLm1vdmVzLnRvcCwKICAgICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChfaW1nczQpOwoKICAgICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goX2ltZ3M0KTsKCiAgICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHdpZHRoTnVtUmlnaHQgPiBfdGhpcy5yaWdodE51bSkgewogICAgICAgICAgLy8gY29uc29sZS5sb2coIuWQkeW3piIpOwogICAgICAgICAgdmFyIF90NCA9IF90aGlzLnJpZ2h0TnVtICsgMTsKCiAgICAgICAgICBfdGhpcy5yaWdodE51bSA9IHdpZHRoTnVtUmlnaHQ7CgogICAgICAgICAgZm9yICh2YXIgX2xuNSA9IF90NDsgX2xuNSA8PSB3aWR0aE51bVJpZ2h0OyBfbG41KyspIHsKICAgICAgICAgICAgZm9yICh2YXIgX2xuNiA9IF90aGlzLmJvdHRvbXROdW0gKiAtMTsgX2xuNiA8PSBfdGhpcy50b3BOdW07IF9sbjYrKykgewogICAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPSBfdGhpcy5mYWJPYmoubGVmdCArIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBfbG41OwogICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9IF90aGlzLmZhYk9iai50b3AgLSBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIF9sbjY7CgogICAgICAgICAgICAgIHZhciBfaW1nczUgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgICAgc2NhbGVYOiBfdGhpcy5mYWJPYmouc2NhbGVYLAogICAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgICAgdG9wOiBfdGhpcy5tb3Zlcy50b3AsCiAgICAgICAgICAgICAgICBsZWZ0OiBfdGhpcy5tb3Zlcy5sZWZ0LAogICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIgogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoX2ltZ3M1KTsKCiAgICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKF9pbWdzNSk7CgogICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChoZWlnaHROdW1Ub3AgPiBfdGhpcy50b3BOdW0pIHsKICAgICAgICAgIHZhciBfdDUgPSBfdGhpcy50b3BOdW0gKyAxOwoKICAgICAgICAgIF90aGlzLnRvcE51bSA9IGhlaWdodE51bVRvcDsKCiAgICAgICAgICBmb3IgKHZhciBfbG43ID0gX3Q1OyBfbG43IDw9IGhlaWdodE51bVRvcDsgX2xuNysrKSB7CiAgICAgICAgICAgIGZvciAodmFyIF9sbjggPSBfdGhpcy5yaWdodE51bSAqIC0xOyBfbG44IDw9IF90aGlzLmxlZnROdW07IF9sbjgrKykgewogICAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPSBfdGhpcy5mYWJPYmoubGVmdCAtIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5mYWJPYmoud2lkdGggKiBfbG44OwogICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9IF90aGlzLmZhYk9iai50b3AgLSBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIF9sbjc7CgogICAgICAgICAgICAgIHZhciBfaW1nczYgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgICAgc2NhbGVYOiBfdGhpcy5mYWJPYmouc2NhbGVYLAogICAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgICAgdG9wOiBfdGhpcy5tb3Zlcy50b3AsCiAgICAgICAgICAgICAgICBsZWZ0OiBfdGhpcy5tb3Zlcy5sZWZ0LAogICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIgogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoX2ltZ3M2KTsKCiAgICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKF9pbWdzNik7CgogICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChoZWlnaHROdW1Cb3R0b20gPiBfdGhpcy5ib3R0b210TnVtKSB7CiAgICAgICAgICB2YXIgX3Q2ID0gX3RoaXMuYm90dG9tdE51bSArIDE7CgogICAgICAgICAgX3RoaXMuYm90dG9tdE51bSA9IGhlaWdodE51bUJvdHRvbTsKCiAgICAgICAgICBmb3IgKHZhciBfbG45ID0gX3Q2OyBfbG45IDw9IGhlaWdodE51bUJvdHRvbTsgX2xuOSsrKSB7CiAgICAgICAgICAgIGZvciAodmFyIF9sbjEwID0gX3RoaXMucmlnaHROdW0gKiAtMTsgX2xuMTAgPD0gX3RoaXMubGVmdE51bTsgX2xuMTArKykgewogICAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPSBfdGhpcy5mYWJPYmoubGVmdCAtIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5mYWJPYmoud2lkdGggKiBfbG4xMDsKICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy50b3AgPSBfdGhpcy5mYWJPYmoudG9wICsgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBfbG45OwoKICAgICAgICAgICAgICB2YXIgX2ltZ3M3ID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICAgIHNjYWxlWTogX3RoaXMuZmFiT2JqLnNjYWxlWSwKICAgICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgICAgbGVmdDogX3RoaXMubW92ZXMubGVmdCwKICAgICAgICAgICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKF9pbWdzNyk7CgogICAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChfaW1nczcpOwoKICAgICAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBfdGhpcy5kcmF3SW1hZ2VDbGlwKCk7CiAgICB9LAogICAgLy8g5Yid5aeL5YyWb2Jq5paH5Lu2CiAgICBpbml0T2JqOiBmdW5jdGlvbiBpbml0T2JqKGlkKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5tb2RlbElkID0gaWQ7CiAgICAgIHRoaXMubmFtZUxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChpKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coaSk7CiAgICAgICAgaWYgKGkuaWQgPT09IGlkKSB7CiAgICAgICAgICBpZiAoaS5pZCA9PT0gMCB8fCBpLmlkID09PSAxMDAwMSkgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpKTsKICAgICAgICAgICAgX3RoaXMuY2FudmFzU2hvd0ZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXMxMC5pbWdTaG93RmxhZzEgPSB0cnVlOwogICAgICAgICAgICBfdGhpczEwLmltZ1Nob3dGbGFnMiA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczEwLmltZ1Nob3dGbGFnMyA9IGZhbHNlOyAvLyB0aGlzLnNsaWRlRmxhZyA9IGZhbHNlOwogICAgICAgICAgICAvLyBfdGhpcy5uYW1lTGlzdFsxXS5pbWcKICAgICAgICAgICAgLy8gX3RoaXMuaW5pdENhbnZhcy5zZXRab29tKDEpOwoKICAgICAgICAgICAgdmFyIHNjYWxlID0gMTsKCiAgICAgICAgICAgIGlmIChfdGhpcy5pbWdQeFdpZHRoID4gX3RoaXMuaW1nUHhIZWlnaHQpIHsKICAgICAgICAgICAgICBzY2FsZSA9IF90aGlzLmNhbGN1bGF0ZVdpZHRoIC8gX3RoaXMuaW1nUHhXaWR0aCAvIF90aGlzLmtNdWx0aXBsZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzY2FsZSA9IF90aGlzLmNhbGN1bGF0ZUhlaWh0IC8gX3RoaXMuaW1nUHhIZWlnaHQgLyBfdGhpcy5rTXVsdGlwbGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpLmlkID09PSAwKSB7CiAgICAgICAgICAgICAgX3RoaXMxMC5tYXhTY2FsZSA9IDQwMDsKICAgICAgICAgICAgICB2YXIgaW1nMSA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgICBoYXNDb250cm9sczogZmFsc2UsCiAgICAgICAgICAgICAgICBzY2FsZVg6IHNjYWxlLAogICAgICAgICAgICAgICAgc2NhbGVZOiBzY2FsZSwKICAgICAgICAgICAgICAgIGFuZ2xlOiAwLAogICAgICAgICAgICAgICAgLy8gb3BhY2l0eTowLAogICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgIHRvcDogX3RoaXMuY2xpcFdpZHRoIC8gMiwKICAgICAgICAgICAgICAgIGxlZnQ6IF90aGlzLmNsaXBIZWlnaHQgLyAyCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHZhciBvYmogPSBfdGhpcy5pbml0Q2FudmFzLmdldE9iamVjdHMoKTsKCiAgICAgICAgICAgICAgb2JqLmZvckVhY2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgX3RoaXMuaW5pdENhbnZhcy5yZW1vdmUocmVzKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXMuaW5pdENhbnZhcy5hZGQoaW1nMSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMxMC5tYXhTY2FsZSA9IDIwMDsKICAgICAgICAgICAgICBmYWJyaWMuSW1hZ2UuZnJvbVVSTChfdGhpcy5uYW1lTGlzdFsxXS5pbWcsIGZ1bmN0aW9uIChvaW1nKSB7CiAgICAgICAgICAgICAgICBvaW1nLmhhc0NvbnRyb2xzID0gZmFsc2U7CiAgICAgICAgICAgICAgICBvaW1nLnNjYWxlWCA9IHNjYWxlIC8gMjsKICAgICAgICAgICAgICAgIG9pbWcuc2NhbGVZID0gc2NhbGUgLyAyOwogICAgICAgICAgICAgICAgb2ltZy5hbmdsZSA9IDA7IC8vIG9wYWNpdHk6MCwKCiAgICAgICAgICAgICAgICBvaW1nLm9yaWdpblggPSAiY2VudGVyIjsKICAgICAgICAgICAgICAgIG9pbWcub3JpZ2luWSA9ICJjZW50ZXIiOwogICAgICAgICAgICAgICAgb2ltZy50b3AgPSBfdGhpcy5jbGlwV2lkdGggLyAyOwogICAgICAgICAgICAgICAgb2ltZy5sZWZ0ID0gX3RoaXMuY2xpcEhlaWdodCAvIDI7CgogICAgICAgICAgICAgICAgdmFyIG9iaiA9IF90aGlzLmluaXRDYW52YXMuZ2V0T2JqZWN0cygpOwoKICAgICAgICAgICAgICAgIG9iai5mb3JFYWNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdENhbnZhcy5yZW1vdmUocmVzKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzLmluaXRDYW52YXMuYWRkKG9pbWcpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpcy52YWx1ZXMgPSAxMDA7CgogICAgICAgICAgICBfdGhpcy5zbGlkZXJIYW5kbGVyKF90aGlzLnZhbHVlcyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczEwLm1heFNjYWxlID0gMjAwOwogICAgICAgICAgICBfdGhpcy5jYW52YXNTaG93RmxhZyA9IHRydWU7CiAgICAgICAgICAgIF90aGlzLmltZ1Nob3dGbGFnMSA9IGZhbHNlOwogICAgICAgICAgICBfdGhpcy5pbWdTaG93RmxhZzIgPSB0cnVlOwogICAgICAgICAgICBfdGhpcy5pbWdTaG93RmxhZzMgPSBmYWxzZTsgLy8gaWYgKHRoaXMuaXNSZXBlYXQgPT0gMCkgewogICAgICAgICAgICAvLyAgIHRoaXMucmVwYXRGbGFnID0gMDsKICAgICAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICAgICAgLy8gICB0aGlzLnJlcGF0RmxhZyA9IDM7CiAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgIGlmIChpLmlkID09PSAxMDAwMSkgewogICAgICAgICAgICAgIF90aGlzMTAucmVwYXRGbGFnID0gMzsKICAgICAgICAgICAgICBfdGhpcy5tb2RlbEltZyA9IGkuYmlncHNkLmltZzsKICAgICAgICAgICAgICBfdGhpczEwLm9iai5uYW1lID0gaS5uYW1lOwogICAgICAgICAgICAgIF90aGlzMTAub2JqLm1vZGVsU2l6ZSA9IGkubW9kZWxTaXplOwogICAgICAgICAgICAgIF90aGlzMTAub2JqLmJpZ3BzZCA9IGkuYmlncHNkOwoKICAgICAgICAgICAgICBpZiAoaS5tb2RlbFNpemUuaW5kZXhPZigiY20iKSAhPSAtMSkgewogICAgICAgICAgICAgICAgdmFyIHN0ciA9IGkubW9kZWxTaXplOwogICAgICAgICAgICAgICAgdmFyIHJlZzEgPSBuZXcgUmVnRXhwKCJjbSIsICJnIik7CiAgICAgICAgICAgICAgICBpLm1vZGVsU2l6ZSA9IHN0ci5yZXBsYWNlKHJlZzEsICIiKTsKICAgICAgICAgICAgICAgIF90aGlzMTAubW9kZWxBcnJheSA9IGkubW9kZWxTaXplLnNwbGl0KCIqIik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMTAubW9kZWxBcnJheSA9IGkubW9kZWxTaXplLnNwbGl0KCIqIik7CiAgICAgICAgICAgICAgfSAvLyBmYWJyaWMuanMg6YeN572u5aSn5bCP5L2N572uCgoKICAgICAgICAgICAgICBfdGhpczEwLm15Q2FudmFzLnNldFpvb20oMSk7CgogICAgICAgICAgICAgIF90aGlzMTAubXlDYW52YXMuYWJzb2x1dGVQYW4oewogICAgICAgICAgICAgICAgeDogMCwKICAgICAgICAgICAgICAgIHk6IDAKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXMxMC5kcmF3TGluZSgpOwoKICAgICAgICAgICAgICBfdGhpczEwLnN3aXRjaEltZ1Nob3coKTsgLy8gdGhpcy5pbWdTY2FsZSA9IDE7CiAgICAgICAgICAgICAgLy8gdGhpcy5sb2FkaW5nKHRoaXMuaW1nKTsKCgogICAgICAgICAgICAgIF90aGlzMTAubG9hZGluZyhfdGhpczEwLmltZywgdHJ1ZSk7CgogICAgICAgICAgICAgIF90aGlzMTAuaW1nU2hvd0ZsYWcyID0gdHJ1ZTsKICAgICAgICAgICAgICBfdGhpczEwLmltZ1Nob3dGbGFnMyA9IGZhbHNlOyAvLyB0aGlzLnNsaWRlRmxhZyA9IHRydWU7CgogICAgICAgICAgICAgIF90aGlzLnZhbHVlcyA9IDEwMDsgLy8gX3RoaXMudmFsdWVzID0gMTAwOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzMTAucmVwYXRGbGFnID0gMzsKICAgICAgICAgICAgICBfdGhpcy5tb2RlbEltZyA9IGkuYmlncHNkLmltZzsKICAgICAgICAgICAgICBfdGhpczEwLm9iai5uYW1lID0gaS5uYW1lOwogICAgICAgICAgICAgIF90aGlzMTAub2JqLm1vZGVsU2l6ZSA9IGkubW9kZWxTaXplOwogICAgICAgICAgICAgIF90aGlzMTAub2JqLmJpZ3BzZCA9IGkuYmlncHNkOwoKICAgICAgICAgICAgICBpZiAoaS5tb2RlbFNpemUuaW5kZXhPZigiY20iKSAhPSAtMSkgewogICAgICAgICAgICAgICAgdmFyIF9zdHIgPSBpLm1vZGVsU2l6ZTsKCiAgICAgICAgICAgICAgICB2YXIgX3JlZyA9IG5ldyBSZWdFeHAoImNtIiwgImciKTsKCiAgICAgICAgICAgICAgICBpLm1vZGVsU2l6ZSA9IF9zdHIucmVwbGFjZShfcmVnLCAiIik7CiAgICAgICAgICAgICAgICBfdGhpczEwLm1vZGVsQXJyYXkgPSBpLm1vZGVsU2l6ZS5zcGxpdCgiKiIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpczEwLm1vZGVsQXJyYXkgPSBpLm1vZGVsU2l6ZS5zcGxpdCgiKiIpOwogICAgICAgICAgICAgIH0gLy8gZmFicmljLmpzIOmHjee9ruWkp+Wwj+S9jee9rgoKCiAgICAgICAgICAgICAgX3RoaXMxMC5teUNhbnZhcy5zZXRab29tKDEpOwoKICAgICAgICAgICAgICBfdGhpczEwLm15Q2FudmFzLmFic29sdXRlUGFuKHsKICAgICAgICAgICAgICAgIHg6IDAsCiAgICAgICAgICAgICAgICB5OiAwCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIF90aGlzMTAuZHJhd0xpbmUoKTsKCiAgICAgICAgICAgICAgX3RoaXMxMC5zd2l0Y2hJbWdTaG93KCk7CgogICAgICAgICAgICAgIF90aGlzMTAubG9hZGluZyhfdGhpczEwLmltZyk7CgogICAgICAgICAgICAgIF90aGlzMTAuaW1nU2hvd0ZsYWcyID0gdHJ1ZTsKICAgICAgICAgICAgICBfdGhpczEwLmltZ1Nob3dGbGFnMyA9IGZhbHNlOyAvLyB0aGlzLnNsaWRlRmxhZyA9IHRydWU7CgogICAgICAgICAgICAgIF90aGlzLnZhbHVlcyA9IDEwMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yid5aeL5YyW5Zu+54mHCiAgICBpbml0OiBmdW5jdGlvbiBpbml0KGltZywgaW1nQXJyYXksIGZsYWcsIGltZ1NuKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5pbWdBcnJheSA9IGltZ0FycmF5OwogICAgICB0aGlzLmltZ1NuID0gaW1nU247CiAgICAgIF90aGlzLnJlcGF0RmxhZyA9IDA7CiAgICAgIF90aGlzLmltZ1ggPSAwOwogICAgICBfdGhpcy5pbWdZID0gMDsgLy8gdGhpcy5sb2FkSW1nKGltZyk7CiAgICB9LAogICAgLy8g5ou/5Yiw5Zu+54mH5pS+5ZyoY2FudmFz5LiKCiAgICBsb2FkSW1nOiBmdW5jdGlvbiBsb2FkSW1nKGltZ3MpIHsKICAgICAgLy8gICDojrflj5Z0aGlzCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7IC8vIGNvbnNvbGUubG9nKHRoaXMuaW1nKTsKCgogICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgIGltZy5zZXRBdHRyaWJ1dGUoImNyb3NzT3JpZ2luIiwgImFub255bW91cyIpOwogICAgICBpbWcuc3JjID0gaW1nczsKCiAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHczMDAgPSBNYXRoLnJvdW5kKGltZy53aWR0aCAqIDI1NCAvIDMwMCkgLyAxMDA7CiAgICAgICAgdmFyIGgzMDAgPSBNYXRoLnJvdW5kKGltZy5oZWlnaHQgKiAyNTQgLyAzMDApIC8gMTAwOwogICAgICAgIF90aGlzLmltZ0FycmF5ID0gW3czMDAsIGgzMDBdOwogICAgICAgIF90aGlzLmltZ1B4V2lkdGggPSBfdGhpcy5pbWcud2lkdGg7CiAgICAgICAgX3RoaXMuaW1nUHhIZWlnaHQgPSBfdGhpcy5pbWcuaGVpZ2h0OyAvLyDosIPnlKjliIfmjaLlm77niYflsZXnpLrnmoTmlrnms5UgLOm7mOiupOWbvueJh+WvueWOn+WwuuWvuAogICAgICAgIC8vIF90aGlzLmltZ1Nob3dDaGFuZ2UoX3RoaXMuaW1nU2hvd0ZsYWcpOwoKICAgICAgICBfdGhpcy5pbWdTY2FsZSA9IDE7IC8vIGZhYnJpYy5qcyDph43nva7lpKflsI/kvY3nva4KICAgICAgICAvLyB0aGlzLm15Q2FudmFzLnNldFpvb20oMSk7CiAgICAgICAgLy8gdGhpcy5teUNhbnZhcy5hYnNvbHV0ZVBhbih7IHg6IDAsIHk6IDAgfSk7CiAgICAgICAgLy8KICAgICAgICAvLyBsZXQgb2JqID0gX3RoaXMubXlDYW52YXMuZ2V0T2JqZWN0cygpOwogICAgICAgIC8vIG9iai5mb3JFYWNoKChyZXMpID0+IHsKICAgICAgICAvLyAgIF90aGlzLm15Q2FudmFzLnJlbW92ZShyZXMpOwogICAgICAgIC8vIH0pOwoKICAgICAgICBfdGhpcy5zd2l0Y2hJbWdTaG93KCk7IC8vIF90aGlzLmRyYXdJbWFnZSgpOwoKCiAgICAgICAgdmFyIHNjYWxlID0gMTsKCiAgICAgICAgaWYgKF90aGlzLmltZ1B4V2lkdGggPiBfdGhpcy5pbWdQeEhlaWdodCkgewogICAgICAgICAgc2NhbGUgPSBfdGhpcy5jYWxjdWxhdGVXaWR0aCAvIF90aGlzLmltZ1B4V2lkdGggLyBfdGhpcy5rTXVsdGlwbGU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNjYWxlID0gX3RoaXMuY2FsY3VsYXRlSGVpaHQgLyBfdGhpcy5pbWdQeEhlaWdodCAvIF90aGlzLmtNdWx0aXBsZTsKICAgICAgICB9CgogICAgICAgIHZhciBpbWcxID0gbmV3IGZhYnJpYy5JbWFnZShpbWcsIHsKICAgICAgICAgIGhhc0NvbnRyb2xzOiBmYWxzZSwKICAgICAgICAgIHNjYWxlWDogc2NhbGUsCiAgICAgICAgICBzY2FsZVk6IHNjYWxlLAogICAgICAgICAgYW5nbGU6IDAsCiAgICAgICAgICAvLyBvcGFjaXR5OjAsCiAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgdG9wOiBfdGhpcy5jbGlwV2lkdGggLyAyLAogICAgICAgICAgbGVmdDogX3RoaXMuY2xpcEhlaWdodCAvIDIKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXMuaW5pdENhbnZhcy5hZGQoaW1nMSk7CgogICAgICAgIHZhciBpbWdzID0gbmV3IGZhYnJpYy5JbWFnZShpbWcsIHsKICAgICAgICAgIHNjYWxlWDogc2NhbGUsCiAgICAgICAgICBzY2FsZVk6IHNjYWxlLAogICAgICAgICAgYW5nbGU6IDAsCiAgICAgICAgICAvLyBvcGFjaXR5OjAsCiAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgdG9wOiBfdGhpcy5jbGlwV2lkdGggLyAyLAogICAgICAgICAgbGVmdDogX3RoaXMuY2xpcEhlaWdodCAvIDIKICAgICAgICB9KTsKICAgICAgICBfdGhpcy5mYWJPYmogPSBpbWdzOyAvLyBjb25zb2xlLmxvZyhpbWcpOwoKICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgICAgdmFyIGN0eDMgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsgLy8gbGV0IGNhbnZhc2NsaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKICAgICAgICAvLyBsZXQgY3R4NCA9IGNhbnZhc2NsaXAuZ2V0Q29udGV4dCgiMmQiKTsKCiAgICAgICAgdmFyIHd3ID0gODAwLAogICAgICAgICAgICBoaCA9IDgwMCAqIGltZy5oZWlnaHQgLyBpbWcud2lkdGg7IC8vIGxldCB3dzM9d3csaGg9aGg7CiAgICAgICAgLy8gY2FudmFzY2xpcC53aWR0aCA9IHd3OwogICAgICAgIC8vIGNhbnZhc2NsaXAuaGVpZ2h0ID0gaGg7CiAgICAgICAgLy8gbGV0IEhlaWdodCA9IChpbWcuaGVpZ2h0ICogV2lkdGgpIC8gaW1nLndpZHRoOwogICAgICAgIC8vIGxldCBXaWR0aCA9IGltZy53aWR0aCAvIDM7CgogICAgICAgIGNhbnZhcy53aWR0aCA9IHd3ICogMzsKICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGggKiAzOwogICAgICAgIGN0eDMuZHJhd0ltYWdlKGltZywgMCwgMCwgd3csIGhoKTsKICAgICAgICBjdHgzLmRyYXdJbWFnZShpbWcsIHd3LCAwLCB3dywgaGgpOwogICAgICAgIGN0eDMuZHJhd0ltYWdlKGltZywgMiAqIHd3LCAwLCB3dywgaGgpOwogICAgICAgIGN0eDMuZHJhd0ltYWdlKGltZywgMCwgaGgsIHd3LCBoaCk7CiAgICAgICAgY3R4My5kcmF3SW1hZ2UoaW1nLCB3dywgaGgsIHd3LCBoaCk7CiAgICAgICAgY3R4My5kcmF3SW1hZ2UoaW1nLCAyICogd3csIGhoLCB3dywgaGgpOwogICAgICAgIGN0eDMuZHJhd0ltYWdlKGltZywgMCwgMiAqIGhoLCB3dywgaGgpOwogICAgICAgIGN0eDMuZHJhd0ltYWdlKGltZywgd3csIDIgKiBoaCwgd3csIGhoKTsKICAgICAgICBjdHgzLmRyYXdJbWFnZShpbWcsIDIgKiB3dywgMiAqIGhoLCB3dywgaGgpOyAvLyBsZXQgc3RhcnRYID0gKGNhbnZhcy53aWR0aCAtIGNhbnZhc2NsaXAud2lkdGgpIC8gMjsKICAgICAgICAvLyBsZXQgc3RhcnRZID0gKGNhbnZhcy5oZWlnaHQgLSBjYW52YXNjbGlwLndpZHRoKSAvIDI7CiAgICAgICAgLy8gY3R4NC5kcmF3SW1hZ2UoCiAgICAgICAgLy8gICAgIGNhbnZhcywKICAgICAgICAvLyAgICAgc3RhcnRYLAogICAgICAgIC8vICAgICBzdGFydFksCiAgICAgICAgLy8gICAgIGNhbnZhc2NsaXAud2lkdGgsCiAgICAgICAgLy8gICAgIGNhbnZhc2NsaXAud2lkdGgsCiAgICAgICAgLy8gICAgIDAsCiAgICAgICAgLy8gICAgIDAsCiAgICAgICAgLy8gICAgIGNhbnZhc2NsaXAud2lkdGgsCiAgICAgICAgLy8gICAgIGNhbnZhc2NsaXAud2lkdGgKICAgICAgICAvLyApOwoKICAgICAgICB2YXIgaW1nczEgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKTsKICAgICAgICBfdGhpcy5uYW1lTGlzdFsxXS5pbWcgPSBpbWdzMTsKICAgICAgICBfdGhpcy5uYW1lTGlzdFsxXS5iaWdwc2QuaW1nID0gaW1nczE7IC8vIGNvbnNvbGUubG9nKF90aGlzLmltZykKICAgICAgICAvLyBjb25zb2xlLmxvZygi5omn6KGM5LqG5Yqg6L295Zu+54mH55qE5Ye95pWwIik7CgogICAgICAgIF90aGlzLnNlbGVjdEFsaWtlQnlJZCgpOwogICAgICB9OwoKICAgICAgX3RoaXMuaW1nID0gaW1nOwogICAgfSwKICAgIGxvYWRpbmc6IGZ1bmN0aW9uIGxvYWRpbmcoaW1nLCBmbGFnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdzMwMCA9IE1hdGgucm91bmQoaW1nLndpZHRoICogMjU0IC8gMzAwKSAvIDEwMDsKICAgICAgdmFyIGgzMDAgPSBNYXRoLnJvdW5kKGltZy5oZWlnaHQgKiAyNTQgLyAzMDApIC8gMTAwOwogICAgICBfdGhpcy5pbWdBcnJheSA9IFt3MzAwLCBoMzAwXTsKICAgICAgX3RoaXMuaW1nUHhXaWR0aCA9IF90aGlzLmltZy53aWR0aDsKICAgICAgX3RoaXMuaW1nUHhIZWlnaHQgPSBfdGhpcy5pbWcuaGVpZ2h0OwogICAgICBfdGhpcy5pbWdTY2FsZSA9IDE7IC8vIGZhYnJpYy5qcyDph43nva7lpKflsI/kvY3nva4KCiAgICAgIHRoaXMubXlDYW52YXMuc2V0Wm9vbSgxKTsKICAgICAgdGhpcy5teUNhbnZhcy5hYnNvbHV0ZVBhbih7CiAgICAgICAgeDogMCwKICAgICAgICB5OiAwCiAgICAgIH0pOwoKICAgICAgdmFyIG9iaiA9IF90aGlzLm15Q2FudmFzLmdldE9iamVjdHMoKTsKCiAgICAgIG9iai5mb3JFYWNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5teUNhbnZhcy5yZW1vdmUocmVzKTsKICAgICAgfSk7CgogICAgICBfdGhpcy5zd2l0Y2hJbWdTaG93KCk7CgogICAgICBfdGhpcy5kcmF3SW1hZ2UoZmxhZyk7CiAgICB9LAogICAgLy8g55S75Zu+CiAgICBkcmF3SW1hZ2U6IGZ1bmN0aW9uIGRyYXdJbWFnZShmbGFnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7IC8vIGNvbnNvbGUubG9nKF90aGlzLnJlcGF0RmxhZyk7CgoKICAgICAgdmFyIHNjYWxlID0gMTsKCiAgICAgIGlmIChfdGhpcy5pbWdQeFdpZHRoID4gX3RoaXMuaW1nUHhIZWlnaHQpIHsKICAgICAgICBzY2FsZSA9IF90aGlzLmNhbGN1bGF0ZVdpZHRoIC8gX3RoaXMuaW1nUHhXaWR0aCAvIF90aGlzLmtNdWx0aXBsZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzY2FsZSA9IF90aGlzLmNhbGN1bGF0ZUhlaWh0IC8gX3RoaXMuaW1nUHhIZWlnaHQgLyBfdGhpcy5rTXVsdGlwbGU7CiAgICAgIH0KCiAgICAgIGlmIChmbGFnKSB7CiAgICAgICAgdGhpcy5pbWdTY2FsZSA9IDEgLyAzOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW1nU2NhbGUgPSAxOwogICAgICB9IC8vIGNvbnNvbGUubG9nKGZsYWcsIHNjYWxlKTsKCgogICAgICB2YXIgb2JqcyA9IF90aGlzLm15Q2FudmFzLmdldE9iamVjdHMoKTsKCiAgICAgIGlmIChvYmpzLmxlbmd0aCA+IDApIHsKICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLmZvckVhY2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXMubXlDYW52YXMucmVtb3ZlKHJlcyk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChfdGhpcy5yZXBhdEZsYWcpIHsKICAgICAgICAvLyDlubPpk7rnmoTlm77niYcKICAgICAgICBfdGhpcy53aWR0aE51bSA9IE1hdGguZmxvb3IoX3RoaXMuY2xpcFdpZHRoIC8gKF90aGlzLmltZ1NjYWxlICogX3RoaXMuZmFiT2JqLndpZHRoICogX3RoaXMuZmFiT2JqLnNjYWxlWCkpOwogICAgICAgIF90aGlzLmhlaWdodE51bSA9IE1hdGguZmxvb3IoX3RoaXMuY2xpcEhlaWdodCAvIChfdGhpcy5pbWdTY2FsZSAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBfdGhpcy5mYWJPYmouc2NhbGVZKSk7CiAgICAgICAgdmFyIHdpZHRoTnVtTGVmdCA9IE1hdGguY2VpbCgoKF90aGlzLmZhYk9iai5sZWZ0IC0gX3RoaXMuY2xpcFdpZHRoIC8gMikgKiBfdGhpcy5pbWdTY2FsZSArIF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5mYWJPYmoud2lkdGggKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUgLyAyKSAvIChfdGhpcy5mYWJPYmoud2lkdGggKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpKTsKICAgICAgICB2YXIgd2lkdGhOdW1SaWdodCA9IE1hdGguY2VpbCgoKF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5mYWJPYmoubGVmdCkgKiBfdGhpcy5pbWdTY2FsZSArIF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5mYWJPYmoud2lkdGggKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUgLyAyKSAvIChfdGhpcy5mYWJPYmoud2lkdGggKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpKTsKICAgICAgICB2YXIgaGVpZ2h0TnVtVG9wID0gTWF0aC5jZWlsKCgoX3RoaXMuZmFiT2JqLnRvcCAtIF90aGlzLmNsaXBXaWR0aCAvIDIpICogX3RoaXMuaW1nU2NhbGUgKyBfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSAvIDIpIC8gKF90aGlzLmZhYk9iai5oZWlnaHQgKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpKTsKICAgICAgICB2YXIgaGVpZ2h0TnVtQm90dG0gPSBNYXRoLmNlaWwoKChfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuZmFiT2JqLnRvcCkgKiBfdGhpcy5pbWdTY2FsZSArIF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5mYWJPYmouaGVpZ2h0ICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlIC8gMikgLyAoX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkpOwogICAgICAgIF90aGlzLmxlZnROdW0gPSB3aWR0aE51bUxlZnQ7CiAgICAgICAgX3RoaXMucmlnaHROdW0gPSB3aWR0aE51bVJpZ2h0OwogICAgICAgIF90aGlzLnRvcE51bSA9IGhlaWdodE51bVRvcDsKICAgICAgICBfdGhpcy5ib3R0b210TnVtID0gaGVpZ2h0TnVtQm90dG07CiAgICAgICAgX3RoaXMuYXJyQ3Jvc3MxID0gW107IC8v5bmz6ZO65LmL5ZCO55qE5pWw57uECgogICAgICAgIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMSkgewogICAgICAgICAgLy8g5qiq5ZCR5bmz6ZO655qE5pivIOacgOS4remXtOaYr+e6teWQkeeahOaVsOe7hCwx5LiqLOWJqeS4i+eahOWFqOaYr+aoquWQkeeahOaVsOe7hAogICAgICAgICAgX3RoaXMuYXJyQ3Jvc3MxID0gW107CgogICAgICAgICAgaWYgKF90aGlzLnJlcGF0R3JvdXAubGVuZ3RoID4gMCkgewogICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLmZvckVhY2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLnJlbW92ZShyZXMpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAgPSBbXTsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKHZhciBhID0gMTsgYSA8PSB3aWR0aE51bUxlZnQ7IGErKykgewogICAgICAgICAgICBfdGhpcy5hcnJDcm9zczEucHVzaChbX3RoaXMuZmFiT2JqLnRvcCwgX3RoaXMuZmFiT2JqLmxlZnQgLSBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLndpZHRoICogYV0pOwogICAgICAgICAgfQoKICAgICAgICAgIGZvciAodmFyIF9hID0gMTsgX2EgPD0gd2lkdGhOdW1SaWdodDsgX2ErKykgewogICAgICAgICAgICBfdGhpcy5hcnJDcm9zczEucHVzaChbX3RoaXMuZmFiT2JqLnRvcCwgX3RoaXMuZmFiT2JqLmxlZnQgKyBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLndpZHRoICogX2FdKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgaW1ncyA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICB0b3A6IF90aGlzLmZhYk9iai50b3AsCiAgICAgICAgICAgIGxlZnQ6IF90aGlzLmZhYk9iai5sZWZ0LAogICAgICAgICAgICBuYW1lOiAwLAogICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChpbWdzKTsKCiAgICAgICAgICBfdGhpcy5mYWJPYmogPSBpbWdzOwoKICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChpbWdzKTsKCiAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwoKICAgICAgICAgIF90aGlzLmFyckNyb3NzMS5mb3JFYWNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgdmFyIGltZ3MgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgdG9wOiByZXNbMF0sCiAgICAgICAgICAgICAgbGVmdDogcmVzWzFdLAogICAgICAgICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKGltZ3MpOwoKICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKGltZ3MpOwoKICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoX3RoaXMucmVwYXRGbGFnID09IDIpIHsKICAgICAgICAgIF90aGlzLmFyckNyb3NzMSA9IFtdOwoKICAgICAgICAgIGlmIChfdGhpcy5yZXBhdEdyb3VwLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5mb3JFYWNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5yZW1vdmUocmVzKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwID0gW107CiAgICAgICAgICB9IC8vIOerluWQkeW5s+mTuiAg5Lit6Ze05piv5qiq5ZCR55qE5pWw57uELOWPquacieS4gOS4qizliankuIvnmoTlhajmmK/nq5blkJHnmoTmlbDnu4QKCgogICAgICAgICAgZm9yICh2YXIgX2EyID0gMTsgX2EyIDw9IGhlaWdodE51bVRvcDsgX2EyKyspIHsKICAgICAgICAgICAgX3RoaXMuYXJyQ3Jvc3MxLnB1c2goW190aGlzLmZhYk9iai50b3AgLSBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIF9hMiwgX3RoaXMuZmFiT2JqLmxlZnRdKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKHZhciBfYTMgPSAxOyBfYTMgPD0gaGVpZ2h0TnVtQm90dG07IF9hMysrKSB7CiAgICAgICAgICAgIF90aGlzLmFyckNyb3NzMS5wdXNoKFtfdGhpcy5mYWJPYmoudG9wICsgX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBfYTMsIF90aGlzLmZhYk9iai5sZWZ0XSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIF9pbWdzOCA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICB0b3A6IF90aGlzLmZhYk9iai50b3AsCiAgICAgICAgICAgIGxlZnQ6IF90aGlzLmZhYk9iai5sZWZ0LAogICAgICAgICAgICBuYW1lOiAwLAogICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChfaW1nczgpOwoKICAgICAgICAgIF90aGlzLmZhYk9iaiA9IF9pbWdzODsKCiAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goX2ltZ3M4KTsKCiAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwoKICAgICAgICAgIF90aGlzLmFyckNyb3NzMS5mb3JFYWNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgdmFyIGltZ3MgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgdG9wOiByZXNbMF0sCiAgICAgICAgICAgICAgbGVmdDogcmVzWzFdLAogICAgICAgICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKGltZ3MpOwoKICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKGltZ3MpOwoKICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoX3RoaXMucmVwYXRGbGFnID09IDMpIHsKICAgICAgICAgIF90aGlzLmFyclZlcnRpY2FsID0gW107CgogICAgICAgICAgaWYgKF90aGlzLnJlcGF0R3JvdXAubGVuZ3RoID4gMCkgewogICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLmZvckVhY2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLnJlbW92ZShyZXMpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAgPSBbXTsKICAgICAgICAgIH0gLy8g56ys5LiA6YOo5YiGIOW3puS4iuinkueahOmDqOWIhiDnlKjliLDnmoTmmK8gd2lkdGhOdW1sZWZ0IOWSjCBoZWlnaHROdW10b3AKCgogICAgICAgICAgZm9yICh2YXIgX2E0ID0gMTsgX2E0IDw9IHdpZHRoTnVtTGVmdDsgX2E0KyspIHsKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPD0gaGVpZ2h0TnVtVG9wOyBqKyspIHsKICAgICAgICAgICAgICBfdGhpcy5hcnJWZXJ0aWNhbC5wdXNoKFtfdGhpcy5mYWJPYmoudG9wIC0gX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBqLCBfdGhpcy5mYWJPYmoubGVmdCAtIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBfYTRdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyDnrKzkuozpg6jliIYg5Y+z5LiK6KeS55qE6YOo5YiGIOeUqOWIsOeahOaYryB3aWR0aE51bVJpZ2h05ZKMIGhlaWdodE51bVRvcAoKCiAgICAgICAgICBmb3IgKHZhciBfYTUgPSAxOyBfYTUgPD0gd2lkdGhOdW1SaWdodDsgX2E1KyspIHsKICAgICAgICAgICAgZm9yICh2YXIgX2ogPSAxOyBfaiA8PSBoZWlnaHROdW1Ub3A7IF9qKyspIHsKICAgICAgICAgICAgICBfdGhpcy5hcnJWZXJ0aWNhbC5wdXNoKFtfdGhpcy5mYWJPYmoudG9wIC0gX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBfaiwgX3RoaXMuZmFiT2JqLmxlZnQgKyBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLndpZHRoICogX2E1XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8g56ys5LiJ6YOo5YiGIOW3puS4i+inkiDnlKjliLDnmoTpg6jliIbmmK8gd2lkdGhOdW1sZWZ0IOWSjCBoZWlnaHROdW1Cb3R0bQoKCiAgICAgICAgICBmb3IgKHZhciBfYTYgPSAxOyBfYTYgPD0gd2lkdGhOdW1MZWZ0OyBfYTYrKykgewogICAgICAgICAgICBmb3IgKHZhciBfajIgPSAxOyBfajIgPD0gaGVpZ2h0TnVtQm90dG07IF9qMisrKSB7CiAgICAgICAgICAgICAgX3RoaXMuYXJyVmVydGljYWwucHVzaChbX3RoaXMuZmFiT2JqLnRvcCArIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5mYWJPYmouaGVpZ2h0ICogX2oyLCBfdGhpcy5mYWJPYmoubGVmdCAtIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBfYTZdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyDnrKzlm5vpg6jliIYgIOWPs+S4i+inkiDnlKjliLDnmoTpg6jliIbmmK8gd2lkdGhOdW1SaWdodCDlkowgaGVpZ2h0TnVtQm90dG0KCgogICAgICAgICAgZm9yICh2YXIgX2E3ID0gMTsgX2E3IDw9IHdpZHRoTnVtUmlnaHQ7IF9hNysrKSB7CiAgICAgICAgICAgIGZvciAodmFyIF9qMyA9IDE7IF9qMyA8PSBoZWlnaHROdW1Cb3R0bTsgX2ozKyspIHsKICAgICAgICAgICAgICBfdGhpcy5hcnJWZXJ0aWNhbC5wdXNoKFtfdGhpcy5mYWJPYmoudG9wICsgX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBfajMsIF90aGlzLmZhYk9iai5sZWZ0ICsgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai53aWR0aCAqIF9hN10pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIOW3pui+ueeahOmDqOWIhgoKCiAgICAgICAgICBmb3IgKHZhciBfYTggPSAxOyBfYTggPD0gd2lkdGhOdW1MZWZ0OyBfYTgrKykgewogICAgICAgICAgICBfdGhpcy5hcnJWZXJ0aWNhbC5wdXNoKFtfdGhpcy5mYWJPYmoudG9wLCBfdGhpcy5mYWJPYmoubGVmdCAtIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBfYThdKTsKICAgICAgICAgIH0gLy8g5Y+z6L6555qE6YOo5YiGCgoKICAgICAgICAgIGZvciAodmFyIF9hOSA9IDE7IF9hOSA8PSB3aWR0aE51bVJpZ2h0OyBfYTkrKykgewogICAgICAgICAgICBfdGhpcy5hcnJWZXJ0aWNhbC5wdXNoKFtfdGhpcy5mYWJPYmoudG9wLCBfdGhpcy5mYWJPYmoubGVmdCArIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBfYTldKTsKICAgICAgICAgIH0gLy8g5LiK6Z2i55qE6YOo5YiGCgoKICAgICAgICAgIGZvciAodmFyIF9hMTAgPSAxOyBfYTEwIDw9IGhlaWdodE51bVRvcDsgX2ExMCsrKSB7CiAgICAgICAgICAgIF90aGlzLmFyclZlcnRpY2FsLnB1c2goW190aGlzLmZhYk9iai50b3AgLSBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIF9hMTAsIF90aGlzLmZhYk9iai5sZWZ0XSk7CiAgICAgICAgICB9IC8vIOS4i+mdoueahOmDqOWIhgoKCiAgICAgICAgICBmb3IgKHZhciBfYTExID0gMTsgX2ExMSA8PSBoZWlnaHROdW1Cb3R0bTsgX2ExMSsrKSB7CiAgICAgICAgICAgIF90aGlzLmFyclZlcnRpY2FsLnB1c2goW190aGlzLmZhYk9iai50b3AgKyBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIF9hMTEsIF90aGlzLmZhYk9iai5sZWZ0XSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIF9pbWdzOSA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICB0b3A6IF90aGlzLmZhYk9iai50b3AsCiAgICAgICAgICAgIGxlZnQ6IF90aGlzLmZhYk9iai5sZWZ0LAogICAgICAgICAgICBuYW1lOiAwLAogICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChfaW1nczkpOwoKICAgICAgICAgIF90aGlzLmZhYk9iaiA9IF9pbWdzOTsKCiAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goX2ltZ3M5KTsKCiAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwoKICAgICAgICAgIF90aGlzLmFyclZlcnRpY2FsLmZvckVhY2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICB2YXIgaW1ncyA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgc2NhbGVYOiBfdGhpcy5mYWJPYmouc2NhbGVYLAogICAgICAgICAgICAgIHNjYWxlWTogX3RoaXMuZmFiT2JqLnNjYWxlWSwKICAgICAgICAgICAgICB0b3A6IHJlc1swXSwKICAgICAgICAgICAgICBsZWZ0OiByZXNbMV0sCiAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoaW1ncyk7CgogICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goaW1ncyk7CgogICAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIGNvbnNvbGUubG9nKF90aGlzLmNsaXBXaWR0aCk7CiAgICAgICAgX3RoaXMuZmFiT2JqID0gbnVsbDsgLy8g5rKh5pyJ5bmz6ZO655qE5Zu+54mHCgogICAgICAgIGlmIChfdGhpcy5yZXBhdEdyb3VwLmxlbmd0aCA+IDApIHsKICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAuZm9yRWFjaChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLnJlbW92ZShyZXMpOwogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMucmVwYXRHcm91cCA9IFtdOwogICAgICAgIH0KCiAgICAgICAgdmFyIF9pbWdzMTAgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgc2NhbGVYOiBzY2FsZSwKICAgICAgICAgIHNjYWxlWTogc2NhbGUsCiAgICAgICAgICBhbmdsZTogMCwKICAgICAgICAgIC8vIG9wYWNpdHk6MCwKICAgICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgICAgb3JpZ2luWTogImNlbnRlciIsCiAgICAgICAgICB0b3A6IF90aGlzLmNsaXBXaWR0aCAvIDIsCiAgICAgICAgICBsZWZ0OiBfdGhpcy5jbGlwSGVpZ2h0IC8gMgogICAgICAgIH0pOwoKICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoX2ltZ3MxMCk7CgogICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChfaW1nczEwKTsKCiAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKF9pbWdzMTApOwoKICAgICAgICBfdGhpcy5mYWJPYmogPSBfaW1nczEwOwogICAgICB9CgogICAgICB0aGlzLmRyYXdJbWFnZUNsaXAoKTsKICAgIH0sCiAgICAvLyDoo4HliIdjYW52YXMKICAgIGRyYXdJbWFnZUNsaXA6IGZ1bmN0aW9uIGRyYXdJbWFnZUNsaXAoKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBNdWx0aXBsZSwgX3RoaXMsIGJhc2U2NCwgaW1nVG9DdXQ7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBNdWx0aXBsZSA9IDM7CiAgICAgICAgICAgICAgICBfdGhpcyA9IF90aGlzMTE7CgogICAgICAgICAgICAgICAgX3RoaXMxMS5pbWdDYW52YXMuc2V0V2lkdGgoX3RoaXMuY2xpcFdpZHRoICogTXVsdGlwbGUpOwoKICAgICAgICAgICAgICAgIF90aGlzMTEuaW1nQ2FudmFzLnNldEhlaWdodChfdGhpcy5jbGlwSGVpZ2h0ICogTXVsdGlwbGUpOwoKICAgICAgICAgICAgICAgIF90aGlzLmltZ0NhbnZhcy5jbGVhcigpOwoKICAgICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmdldE9iamVjdHMoKS5mb3JFYWNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgdmFyIGltZ3MgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgICAgICAgIHNjYWxlWDogcmVzLnNjYWxlWCAqIE11bHRpcGxlLAogICAgICAgICAgICAgICAgICAgIHNjYWxlWTogcmVzLnNjYWxlWSAqIE11bHRpcGxlLAogICAgICAgICAgICAgICAgICAgIHRvcDogcmVzLnRvcCAqIE11bHRpcGxlLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IHJlcy5sZWZ0ICogTXVsdGlwbGUsCiAgICAgICAgICAgICAgICAgICAgLy8gYW5nbGU6IGluZGV4ICogMTAsCiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5pbWdDYW52YXMuYWRkKGltZ3MpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXMuem9vbVBvaW50ID0gbmV3IGZhYnJpYy5Qb2ludChfdGhpcy5pbWdDYW52YXMud2lkdGggLyAyLCBfdGhpcy5pbWdDYW52YXMuaGVpZ2h0IC8gMik7IC8vIOS4reW/g+eCuQoKICAgICAgICAgICAgICAgIF90aGlzLmltZ0NhbnZhcy56b29tVG9Qb2ludChfdGhpcy56b29tUG9pbnQsIF90aGlzLmltZ1NjYWxlKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5pbWdDYW52YXMucmVuZGVyQWxsKCk7IC8vIGNvbnNvbGUubG9nKF90aGlzLmltZ0NhbnZhcykKCgogICAgICAgICAgICAgICAgYmFzZTY0ID0gX3RoaXMuaW1nQ2FudmFzLnRvRGF0YVVSTCh7CiAgICAgICAgICAgICAgICAgIGZvcm1hdDogInBuZyIsCiAgICAgICAgICAgICAgICAgIHF1YWxpdHk6IDEsCiAgICAgICAgICAgICAgICAgIGxlZnQ6IF90aGlzLmJlZ2luLnggKiBNdWx0aXBsZSwKICAgICAgICAgICAgICAgICAgdG9wOiBfdGhpcy5iZWdpbi55ICogTXVsdGlwbGUsCiAgICAgICAgICAgICAgICAgIHdpZHRoOiBfdGhpcy5pbWdDYW52YXMud2lkdGggLSBfdGhpcy5iZWdpbi54ICogTXVsdGlwbGUgKiAyLAogICAgICAgICAgICAgICAgICBoZWlnaHQ6IF90aGlzLmltZ0NhbnZhcy5oZWlnaHQgLSBfdGhpcy5iZWdpbi55ICogTXVsdGlwbGUgKiAyCiAgICAgICAgICAgICAgICB9KTsgLy8gY29uc29sZS5sb2coYmFzZTY0KQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coX3RoaXMuYmVnaW4ueCAqIE11bHRpcGxlKTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKF90aGlzLmJlZ2luLnkgKiBNdWx0aXBsZSk7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhfdGhpcy5pbWdDYW52YXMud2lkdGggLSBfdGhpcy5iZWdpbi54ICogTXVsdGlwbGUgKiAyKTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKF90aGlzLmltZ0NhbnZhcy5oZWlnaHQgLSBfdGhpcy5iZWdpbi55ICogTXVsdGlwbGUgKiAyKTsKCiAgICAgICAgICAgICAgICBpbWdUb0N1dCA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICAgICAgaW1nVG9DdXQuc3JjID0gYmFzZTY0OwogICAgICAgICAgICAgICAgX3RoaXMuY2xpcEltZyA9IGJhc2U2NDsgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmQoaW1nVG9DdXQpCgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTEub2JqICYmIF90aGlzMTEub2JqLmJpZ3BzZCAmJiBfdGhpczExLm9iai5iaWdwc2Quc2t1KSB7CiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCB0aGlzLm9iai5iaWdwc2QubmFtZS50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlTWluaU1hcChfdGhpczExLm9iai5iaWdwc2Quc2t1LCBiYXNlNjQsIF90aGlzMTEub2JqLmJpZ3BzZC5uYW1lLnRvU3RyaW5nKCkpOyAvLyB0aGlzLmltZ1Nob3dGbGFnMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAvLyB0aGlzLmNhbnZhc1Nob3dGbGFnID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDnlLvnur/nmoTlh73mlbAg5bCB6KOFCiAgICBkcmF3TGluZTogZnVuY3Rpb24gZHJhd0xpbmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7IC8vIOWFiOaxguWHuuebkuWtkOeahOWuveWSjOmrmAoKCiAgICAgIHZhciBtb2RlbEhlaWdodCA9IHRoaXMubW9kZWxBcnJheVsxXTsgLy92YXIKCiAgICAgIHZhciBtb2RlbFdpZHRoID0gdGhpcy5tb2RlbEFycmF5WzBdOyAvL3ZhcgoKICAgICAgaWYgKG1vZGVsSGVpZ2h0ID49IG1vZGVsV2lkdGgpIHsKICAgICAgICB0aGlzLmJveEhlaWdodCA9IF90aGlzLmJveE1heCAqIF90aGlzLmtNdWx0aXBsZTsKICAgICAgICB0aGlzLmJveFdpZHRoID0gTWF0aC5yb3VuZCh0aGlzLmJveEhlaWdodCAqIG1vZGVsV2lkdGggLyBtb2RlbEhlaWdodCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5ib3hXaWR0aCA9IF90aGlzLmJveE1heCAqIF90aGlzLmtNdWx0aXBsZTsKICAgICAgICB0aGlzLmJveEhlaWdodCA9IE1hdGgucm91bmQodGhpcy5ib3hXaWR0aCAqIG1vZGVsSGVpZ2h0IC8gbW9kZWxXaWR0aCk7CiAgICAgIH0KCiAgICAgIF90aGlzLmNsaXBYID0gKF90aGlzLmNsaXBXaWR0aCAqIF90aGlzLmtNdWx0aXBsZSAtIF90aGlzLmJveFdpZHRoKSAvIDI7CiAgICAgIF90aGlzLmNsaXBZID0gKHRoaXMuY2xpcEhlaWdodCAqIF90aGlzLmtNdWx0aXBsZSAtIF90aGlzLmJveEhlaWdodCkgLyAyOwogICAgICB2YXIgbW92ZVRvRnVuY3Rpb24gPSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLm1vdmVUbzsKICAgICAgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5tb3ZlVG9Mb2NhdGlvbiA9IHt9OyAvLyDph43mlrDlrprkuYltb3ZlVG/mlrnms5UKCiAgICAgIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUubW92ZVRvID0gZnVuY3Rpb24gKHgsIHkpIHsKICAgICAgICB0aGlzLm1vdmVUb0xvY2F0aW9uLnggPSB4OwogICAgICAgIHRoaXMubW92ZVRvTG9jYXRpb24ueSA9IHk7CiAgICAgICAgbW92ZVRvRnVuY3Rpb24uYXBwbHkodGhpcywgW3gsIHldKTsKICAgICAgfTsKCiAgICAgIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuZGFzaGVkTGluZVRvID0gZnVuY3Rpb24gKHgsIHksIGRhc2hlZExlbmd0aCkgewogICAgICAgIGRhc2hlZExlbmd0aCA9IGRhc2hlZExlbmd0aCA9PT0gdW5kZWZpbmVkID8gNSA6IGRhc2hlZExlbmd0aDsKICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5tb3ZlVG9Mb2NhdGlvbi54OwogICAgICAgIHZhciBzdGFydFkgPSB0aGlzLm1vdmVUb0xvY2F0aW9uLnk7CiAgICAgICAgdmFyIGRlbHRhWCA9IHggLSBzdGFydFg7CiAgICAgICAgdmFyIGRlbHRhWSA9IHkgLSBzdGFydFk7CiAgICAgICAgdmFyIG51bWJlckRhc2ggPSBNYXRoLmZsb29yKE1hdGguc3FydChkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVkpIC8gZGFzaGVkTGVuZ3RoKTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJEYXNoOyBpKyspIHsKICAgICAgICAgIHRoaXNbaSAlIDIgPT09IDAgPyAibW92ZVRvIiA6ICJsaW5lVG8iXShzdGFydFggKyBkZWx0YVggLyBudW1iZXJEYXNoICogaSwgc3RhcnRZICsgZGVsdGFZIC8gbnVtYmVyRGFzaCAqIGkpOyAvL+etieWQjOS6jnRoaXMubW92ZVRvKHgsIHkp5oiW6ICFIHRoaXMuTGluZVRvKHgsIHkpCiAgICAgICAgfQoKICAgICAgICB0aGlzLm1vdmVUbyh4LCB5KTsgLy/ov57nu63nu5jliLbomZrnur/ml7bvvIzotbfngrnku47lvZPliY3ngrnlvIDlp4sKICAgICAgfTsKCiAgICAgIHZhciBjb250YWluZXJXaWR0aCA9IHRoaXMuY2xpcFdpZHRoICogX3RoaXMua011bHRpcGxlLAogICAgICAgICAgY29udGFpbmVySGVpZ2h0ID0gdGhpcy5jbGlwSGVpZ2h0ICogX3RoaXMua011bHRpcGxlOwogICAgICB2YXIgb25lWCwgb25lWSwgdHdvWCwgdHdvWSwgdGhyZWVYLCB0aHJlZVksIGZvdXJYLCBmb3VyWTsKICAgICAgdmFyIGxpbmVCb3hXaWR0aCA9IF90aGlzLmJveFdpZHRoIC8gX3RoaXMua011bHRpcGxlOwogICAgICB2YXIgbGluZUJveEhlaWdodCA9IF90aGlzLmJveEhlaWdodCAvIF90aGlzLmtNdWx0aXBsZTsKICAgICAgX3RoaXMuYmVnaW4ueCA9IChjb250YWluZXJXaWR0aCAtIHRoaXMuYm94V2lkdGgpIC8gMiAvIF90aGlzLmtNdWx0aXBsZTsKICAgICAgX3RoaXMuYmVnaW4ueSA9IChjb250YWluZXJIZWlnaHQgLSB0aGlzLmJveEhlaWdodCkgLyAyIC8gX3RoaXMua011bHRpcGxlOwogICAgICBvbmVYID0gX3RoaXMuYmVnaW4ueCArIGxpbmVCb3hXaWR0aDsKICAgICAgb25lWSA9IF90aGlzLmJlZ2luLnk7CiAgICAgIHR3b1ggPSBfdGhpcy5iZWdpbi54ICsgbGluZUJveFdpZHRoOwogICAgICB0d29ZID0gX3RoaXMuYmVnaW4ueSArIGxpbmVCb3hIZWlnaHQ7CiAgICAgIHRocmVlWCA9IF90aGlzLmJlZ2luLng7CiAgICAgIHRocmVlWSA9IF90aGlzLmJlZ2luLnkgKyBsaW5lQm94SGVpZ2h0OwogICAgICBmb3VyWCA9IF90aGlzLmJlZ2luLng7CiAgICAgIGZvdXJZID0gX3RoaXMuYmVnaW4ueTsKCiAgICAgIF90aGlzLmN0eExpbmUuY2xlYXJSZWN0KDAsIDAsIGNvbnRhaW5lcldpZHRoLCBjb250YWluZXJIZWlnaHQpOwoKICAgICAgX3RoaXMuY3R4TGluZS5iZWdpblBhdGgoKTsKCiAgICAgIF90aGlzLmN0eExpbmUubW92ZVRvKF90aGlzLmJlZ2luLngsIF90aGlzLmJlZ2luLnkpOwoKICAgICAgX3RoaXMuY3R4TGluZS5kYXNoZWRMaW5lVG8ob25lWCwgb25lWSk7CgogICAgICBfdGhpcy5jdHhMaW5lLmRhc2hlZExpbmVUbyh0d29YLCB0d29ZKTsKCiAgICAgIF90aGlzLmN0eExpbmUuZGFzaGVkTGluZVRvKHRocmVlWCwgdGhyZWVZKTsKCiAgICAgIF90aGlzLmN0eExpbmUuZGFzaGVkTGluZVRvKGZvdXJYLCBmb3VyWSk7CgogICAgICBfdGhpcy5jdHhMaW5lLmNsb3NlUGF0aCgpOwoKICAgICAgX3RoaXMuY3R4TGluZS5saW5lV2lkdGggPSA0OwogICAgICBfdGhpcy5jdHhMaW5lLnN0cm9rZVN0eWxlID0gInJlZCI7CgogICAgICBfdGhpcy5jdHhMaW5lLnN0cm9rZSgpOwogICAgfSwKICAgIC8vIOS4remXtOmDqOWIhuS7jmJhYnlsb27nu4Tku7bov4Hnp7vliLBob21lNgogICAgdXBkYXRlTWluaU1hcDogZnVuY3Rpb24gdXBkYXRlTWluaU1hcChza3UsIGltZywgbmFtZSkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgX3RoaXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcyA9IF90aGlzMTI7CgogICAgICAgICAgICAgICAgaWYgKCEoc2t1ICE9IF90aGlzMTIuc2t1KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLnNrdSA9IHNrdTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICAvLyBfdGhpcy5jYW52YXNTaG93RmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgIC8vIF90aGlzLmltZ1Nob3dGbGFnMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBfdGhpcy4kcmVmcy5mb3hjb250YWluZXIuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICAgIHZhciBkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICAgIGQuc2V0QXR0cmlidXRlKCJpZCIsICJjb250YWluZXIiKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRyZWZzLmZveGNvbnRhaW5lci5hcHBlbmRDaGlsZChkKTsKCiAgICAgICAgICAgICAgICAgIHZhciBmb3hwc2RPYmogPSBuZXcgZm94cHNkKCJjb250YWluZXIiLCB7CiAgICAgICAgICAgICAgICAgICAgcHNkU2t1czogW3NrdV0sCiAgICAgICAgICAgICAgICAgICAgZ29vZHNTa3U6ICIxNjQxMzU3NDMzODMzNTYwOTM3IiwKICAgICAgICAgICAgICAgICAgICAvL+ivt+WLv+eUqOS6jueUn+S6p+eOr+WigyDvvIzmtYvor5V0b2tlbuS8muS4jeWumuacn+i9ruaNogogICAgICAgICAgICAgICAgICAgIHRva2VuOiAiQmFzaWMgNTNkNDA3MmM4NzEzOTY3NWQ2NDZiNGQ0MjhlNmJiMDA0OGVlN2RiN2U3NzE2ZmQwOTBjZmRiZmQ2OTJjZThmOSIsCiAgICAgICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiBvbmxvYWQoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZveHBzZE9iaik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfdGhpcy5mb3hwc2RPYmogPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5mb3hwc2RPYmouY29tbWFuZCh7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FudmFzOiBlbGVDYW52YXMsCiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IGltZywKICAgICAgICAgICAgICAgICAgICAvL+S8oOWkmuS4quihqOekuuabv+aNouWkmuS4quWbvuWxgu+8jOS9v+eUqOiLseaWh+mAl+WPt+malOW8gAogICAgICAgICAgICAgICAgICAgIGxheWVyczogbmFtZQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FudmFzU2hvd0ZsYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmltZ1Nob3dGbGFnMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmltZ1Nob3dGbGFnMiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW1nU2hvd0ZsYWczID0gZmFsc2U7IC8vIF90aGlzLnNsaWRlRmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgaWYgKF90aGlzLmZveHBzZE9iaiAmJiBfdGhpcy5mb3hwc2RPYmoubG9hZCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5mb3hwc2RPYmouY29tbWFuZCh7CiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IGltZywKICAgICAgICAgICAgICAgICAgICAvL+S8oOWkmuS4quihqOekuuabv+aNouWkmuS4quWbvuWxgu+8jOS9v+eUqOiLseaWh+mAl+WPt+malOW8gAogICAgICAgICAgICAgICAgICAgIGxheWVyczogbmFtZQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FudmFzU2hvd0ZsYWcgPSB0cnVlOyAvLyBfdGhpcy5zbGlkZUZsYWcgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbWdTaG93RmxhZzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbWdTaG93RmxhZzIgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmltZ1Nob3dGbGFnMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOS4remXtOmDqOWIhuS7jmJhYnlsb27nu4Tku7bov4Hnp7vliLBob21lNgogICAgLy8g5Zu+54mH5Zyo6Ieq6YCC5bqU5ZKM5Y6f5bC65a+45LmL6Ze06L2s5o2i55qEIOWHveaVsOWwgeijhQogICAgc3dpdGNoSW1nU2hvdzogZnVuY3Rpb24gc3dpdGNoSW1nU2hvdygpIHsKICAgICAgLy8gZmxhZyAx6Ieq6YCC5bqUIDLljp/lsLrlr7gKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB3MzAwID0gX3RoaXMuaW1nQXJyYXlbMF07CiAgICAgIHZhciBoMzAwID0gX3RoaXMuaW1nQXJyYXlbMV07CiAgICAgIHZhciBtb2RlbEhlaWdodCA9IF90aGlzLm1vZGVsQXJyYXlbMV07IC8vdmFyCgogICAgICB2YXIgbW9kZWxXaWR0aCA9IF90aGlzLm1vZGVsQXJyYXlbMF07IC8vdmFyCgogICAgICB2YXIgcndpZHRoLCB3aGVpZ2h0OwoKICAgICAgaWYgKF90aGlzLmltZ1Nob3dGbGFnID09IDEpIHsKICAgICAgICBfdGhpcy5pbWdNb3ZlWCA9IDA7CiAgICAgICAgX3RoaXMuaW1nTW92ZVkgPSAwOyAvLyDliKTmlq0g5Zu+54mH55qE5a695bqm5ZKM6auY5bqm5ZOq5Liq5pu05YC85pu05aSnCgogICAgICAgIGlmIChfdGhpcy5pbWdQeFdpZHRoID4gX3RoaXMuaW1nUHhIZWlnaHQpIHsKICAgICAgICAgIF90aGlzLmltZ1NjYWxlID0gMTsKICAgICAgICAgIF90aGlzLmltZ0luaXRXaWR0aCA9IE1hdGguZmxvb3IoX3RoaXMua011bHRpcGxlICogX3RoaXMuY2xpcFdpZHRoKTsKICAgICAgICAgIF90aGlzLmltZ0luaXRIZWlnaHQgPSBNYXRoLmZsb29yKF90aGlzLmtNdWx0aXBsZSAqIF90aGlzLmNsaXBIZWlnaHQgLyB0aGlzLmltZ1B4V2lkdGggKiBfdGhpcy5pbWdQeEhlaWdodCk7CiAgICAgICAgICBfdGhpcy5pbWdJbml0WCA9IDA7CiAgICAgICAgICBfdGhpcy5pbWdJbml0WSA9IE1hdGguZmxvb3IoKF90aGlzLmNsaXBIZWlnaHQgKiBfdGhpcy5rTXVsdGlwbGUgLSBfdGhpcy5pbWdJbml0SGVpZ2h0KSAvIDIpOwogICAgICAgICAgX3RoaXMudmFsdWUgPSBwYXJzZUludChfdGhpcy5pbWdTY2FsZSAqIDEwMCk7CiAgICAgICAgICBfdGhpcy5vbGRWYWx1ZSA9IF90aGlzLnZhbHVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDpq5jluqblpKfkuo7lrr3luqYKICAgICAgICAgIF90aGlzLmltZ0luaXRIZWlnaHQgPSBfdGhpcy5rTXVsdGlwbGUgKiBfdGhpcy5jbGlwSGVpZ2h0OwogICAgICAgICAgX3RoaXMuaW1nSW5pdFdpZHRoID0gTWF0aC5mbG9vcihfdGhpcy5rTXVsdGlwbGUgKiBfdGhpcy5jbGlwV2lkdGggLyB0aGlzLmltZ1B4SGVpZ2h0ICogX3RoaXMuaW1nUHhXaWR0aCk7CiAgICAgICAgICBfdGhpcy5pbWdJbml0WSA9IDA7CiAgICAgICAgICBfdGhpcy5pbWdJbml0WCA9IE1hdGguZmxvb3IoKF90aGlzLmNsaXBXaWR0aCAqIF90aGlzLmtNdWx0aXBsZSAtIF90aGlzLmltZ0luaXRXaWR0aCkgLyAyKTsKICAgICAgICAgIF90aGlzLmltZ1NjYWxlID0gMTsKICAgICAgICAgIF90aGlzLnZhbHVlID0gcGFyc2VJbnQoX3RoaXMuaW1nU2NhbGUgKiAxMDApOwogICAgICAgICAgX3RoaXMub2xkVmFsdWUgPSBfdGhpcy52YWx1ZTsKICAgICAgICB9CgogICAgICAgIF90aGlzLmNhbGN1bGF0ZVdpZHRoID0gX3RoaXMuaW1nSW5pdFdpZHRoOwogICAgICAgIF90aGlzLmNhbGN1bGF0ZUhlaWh0ID0gX3RoaXMuaW1nSW5pdEhlaWdodDsKICAgICAgfSBlbHNlIGlmIChfdGhpcy5pbWdTaG93RmxhZyA9PSAyKSB7CiAgICAgICAgX3RoaXMuaW1nTW92ZVggPSAwOwogICAgICAgIF90aGlzLmltZ01vdmVZID0gMDsKICAgICAgICBfdGhpcy5pbWdJbml0V2lkdGggPSBNYXRoLmZsb29yKF90aGlzLmJveFdpZHRoICogKF90aGlzLmltZ0FycmF5WzBdIC8gX3RoaXMubW9kZWxBcnJheVswXSkpOwogICAgICAgIF90aGlzLmltZ0luaXRIZWlnaHQgPSBNYXRoLmZsb29yKF90aGlzLmJveEhlaWdodCAqIChfdGhpcy5pbWdBcnJheVsxXSAvIF90aGlzLm1vZGVsQXJyYXlbMV0pKTsKICAgICAgICBfdGhpcy5jYWxjdWxhdGVXaWR0aCA9IF90aGlzLmltZ0luaXRXaWR0aDsKICAgICAgICBfdGhpcy5jYWxjdWxhdGVIZWlodCA9IF90aGlzLmltZ0luaXRIZWlnaHQ7CgogICAgICAgIGlmIChfdGhpcy5pbWcud2lkdGggPiBfdGhpcy5pbWcuaGVpZ2h0KSB7CiAgICAgICAgICBfdGhpcy5pbWdTY2FsZSA9IDE7CiAgICAgICAgICBfdGhpcy52YWx1ZSA9IHBhcnNlSW50KF90aGlzLmltZ1NjYWxlICogMTAwKTsKICAgICAgICAgIF90aGlzLm9sZFZhbHVlID0gX3RoaXMudmFsdWU7IC8vIOaUueWwuuWvuOavlAoKICAgICAgICAgIHJ3aWR0aCA9IHczMDAgLyBtb2RlbFdpZHRoICogdGhpcy5ib3hXaWR0aDsKICAgICAgICAgIHdoZWlnaHQgPSBoMzAwIC8gbW9kZWxIZWlnaHQgKiB0aGlzLmJveEhlaWdodDsKICAgICAgICAgIF90aGlzLmltZ0luZm8uaGVpZ2h0ID0gd2hlaWdodCAqIF90aGlzLmtNdWx0aXBsZTsKICAgICAgICAgIF90aGlzLmltZ0luZm8ud2lkdGggPSByd2lkdGggKiBfdGhpcy5rTXVsdGlwbGU7CiAgICAgICAgICBfdGhpcy5pbWdYID0gKF90aGlzLmNsaXBXaWR0aCAqIF90aGlzLmtNdWx0aXBsZSAtIF90aGlzLmltZ0luZm8ud2lkdGgpIC8gMjsKICAgICAgICAgIF90aGlzLmltZ1kgPSAoX3RoaXMuY2xpcEhlaWdodCAqIF90aGlzLmtNdWx0aXBsZSAtIF90aGlzLmltZ0luZm8uaGVpZ2h0KSAvIDI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLmltZ1NjYWxlID0gMTsKICAgICAgICAgIF90aGlzLnZhbHVlID0gcGFyc2VJbnQoX3RoaXMuaW1nU2NhbGUgKiAxMDApOwogICAgICAgICAgX3RoaXMub2xkVmFsdWUgPSBfdGhpcy52YWx1ZTsgLy8g5pS55bC65a+45q+UCgogICAgICAgICAgcndpZHRoID0gdzMwMCAvIG1vZGVsV2lkdGggKiB0aGlzLmJveFdpZHRoOwogICAgICAgICAgd2hlaWdodCA9IGgzMDAgLyBtb2RlbEhlaWdodCAqIHRoaXMuYm94SGVpZ2h0OwogICAgICAgICAgX3RoaXMuaW1nSW5mby5oZWlnaHQgPSB3aGVpZ2h0ICogX3RoaXMua011bHRpcGxlOwogICAgICAgICAgX3RoaXMuaW1nSW5mby53aWR0aCA9IHJ3aWR0aCAqIF90aGlzLmtNdWx0aXBsZTsKICAgICAgICAgIF90aGlzLmltZ1ggPSAoX3RoaXMuY2xpcFdpZHRoICogX3RoaXMua011bHRpcGxlIC0gX3RoaXMuaW1nSW5mby53aWR0aCkgLyAyOwogICAgICAgICAgX3RoaXMuaW1nWSA9IChfdGhpcy5jbGlwSGVpZ2h0ICogX3RoaXMua011bHRpcGxlIC0gX3RoaXMuaW1nSW5mby5oZWlnaHQpIC8gMjsKICAgICAgICB9CgogICAgICAgIF90aGlzLmRyYXdJbWFnZSgpOwogICAgICB9IC8vICBfdGhpcy5kcmF3SW1hZ2UoKTsKCiAgICB9LAogICAgc3dpdGNoUGljdHVyZTogZnVuY3Rpb24gc3dpdGNoUGljdHVyZSgpIHsKICAgICAgLy8gY29uc29sZS5sb2coIjEyMyIpOwogICAgICB0aGlzLmltZ1Nob3dGbGFnMSA9IHRydWU7CiAgICAgIHRoaXMuY2FudmFzU2hvd0ZsYWcgPSBmYWxzZTsgLy8gdGhpcy5zbGlkZUZsYWcgPSBmYWxzZTsKCiAgICAgIHRoaXMuaW1nU2hvd0ZsYWcyID0gZmFsc2U7CiAgICAgIHRoaXMuaW1nU2hvd0ZsYWczID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDov5Tlm57mjInpkq4KICAgIHJldHVybk9iajogZnVuY3Rpb24gcmV0dXJuT2JqKCkgewogICAgICB0aGlzLmltZ1Nob3dGbGFnMSA9IGZhbHNlOwogICAgICB0aGlzLmNhbnZhc1Nob3dGbGFnID0gdHJ1ZTsgLy8gdGhpcy5zbGlkZUZsYWcgPSB0cnVlOwoKICAgICAgdGhpcy5pbWdTaG93RmxhZzIgPSB0cnVlOwogICAgICB0aGlzLmltZ1Nob3dGbGFnMyA9IGZhbHNlOyAvLyB0aGlzLmltZ1Nob3dGbGFnMyA9IHRydWUKICAgICAgLy8gY29uc29sZS5sb2coIueCueWHu+S6hui/lOWbniIpOwogICAgfSwKICAgIC8vIHNsaWRlciBjaGFuZ2Xkuovku7YKICAgIHNsaWRlcklucHV0OiBmdW5jdGlvbiBzbGlkZXJJbnB1dCh2KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXMubW9kZWxJZCA9PSAwIHx8IF90aGlzLm1vZGVsSWQgPT0gMTAwMDEpIHsKICAgICAgICBfdGhpcy5zbGlkZXJIYW5kbGVyKHYpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSwKICAgIHNsaWRlckNoYW5nZTogZnVuY3Rpb24gc2xpZGVyQ2hhbmdlKHYpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpcy5tb2RlbElkID09IDAgfHwgX3RoaXMubW9kZWxJZCA9PSAxMDAwMSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5zbGlkZXJIYW5kbGVyKHYpOwogICAgICB9CiAgICB9LAogICAgc2xpZGVySGFuZGxlcjogZnVuY3Rpb24gc2xpZGVySGFuZGxlcih2KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7IC8vIGlmICh0aGlzLmlzUmVwZWF0ID09IDApIHsKICAgICAgLy8gICB0aGlzLnJlcGF0RmxhZyA9IDA7CiAgICAgIC8vIH0gZWxzZSB7CiAgICAgIC8vICAgdGhpcy5yZXBhdEZsYWcgPSAzOwogICAgICAvLyB9CgoKICAgICAgaWYgKF90aGlzLm1vZGVsSWQgPT0gMCB8fCBfdGhpcy5tb2RlbElkID09IDEwMDAxKSB7CiAgICAgICAgdmFyIHpwb2ludCA9IG5ldyBmYWJyaWMuUG9pbnQoX3RoaXMuY2xpcFdpZHRoIC8gMiwgX3RoaXMuY2xpcEhlaWdodCAvIDIpOyAvLyDkuK3lv4PngrkKCiAgICAgICAgX3RoaXMuaW5pdENhbnZhcy56b29tVG9Qb2ludCh6cG9pbnQsIHYgLyAxMDApOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLmltZ1NjYWxlID0gdiAvIDEwMDsKCiAgICAgICAgaWYgKF90aGlzLm1vZGVsSWQgPT0gMTAwMDEpIHsKICAgICAgICAgIF90aGlzLmltZ1NjYWxlID0gX3RoaXMuaW1nU2NhbGUgLyAzOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMuem9vbUluKE1hdGgucm91bmQodiAqIDEpIC8gMTAwKTsKICAgICAgfQogICAgfSwKICAgIGdvczogZnVuY3Rpb24gZ29zKGl0ZW0pIHsKICAgICAgLy8gdGhpcy4kc3RvcmUuc3RhdGUub3B0aW9uID0gaXRlbQogICAgICAvLyB0aGlzLiRzdG9yZS5zdGF0ZS5ibGFuayA9ICJzY3JlZW4iOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9zdG9yZScsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHE6IGl0ZW0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGxvYWRDYW52YXM6IGZ1bmN0aW9uIGxvYWRDYW52YXMoKSB7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLk5hdmlnYXRpb25faW4gPSAiTmF2aWdhdGlvbl91cCI7CiAgICAgIHRoaXMuY29udGVudEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImNlbnRlckltZyIpWzBdOyAvLyDmlYjmnpzlm77mlrDlop5tb3VudGVkCgogICAgICB2YXIgX3RoaXMgPSB0aGlzOyAvLyBsZXQgYXJyID0gW107CiAgICAgIC8vIOeUu+i9ruW7k+e6vwogICAgICAvLyAgZGVidWdnZXI7CgoKICAgICAgdGhpcy5saW5lQ2FudmFzID0gdGhpcy4kcmVmcy5saW5lQ2FudmFzOwogICAgICB0aGlzLmN0eExpbmUgPSB0aGlzLmxpbmVDYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsgLy8g5aSn55qEY2FudmFzCgogICAgICB0aGlzLm15Q2FudmFzID0gbmV3IGZhYnJpYy5DYW52YXMoImNhbnZhc0JveCIsIHsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICIjZmZmIiwKICAgICAgICBpc0RyYXdpbmdNb2RlOiBmYWxzZQogICAgICB9KTsKICAgICAgdmFyIGNvbG9yID0gInJnYmEoMCwwLDAsMCkiOwogICAgICB0aGlzLm15Q2FudmFzLnNldEJhY2tncm91bmRDb2xvcihjb2xvcik7IC8vIOW/hemhu+mHjeaWsOa4suafk+eUu+W4g++8jOS7peaYvuekuuaWsOeahOiDjOaZrwoKICAgICAgdGhpcy5teUNhbnZhcy5yZW5kZXJBbGwoKTsKICAgICAgdGhpcy5teUNhbnZhcy5zZXRXaWR0aChfdGhpcy5jbGlwV2lkdGgpOwogICAgICB0aGlzLm15Q2FudmFzLnNldEhlaWdodChfdGhpcy5jbGlwSGVpZ2h0KTsKICAgICAgdGhpcy5teUNhbnZhcy5vbih7CiAgICAgICAgLy8g6byg5qCH5rua5Yqo57yp5pS+CiAgICAgICAgIm1vdXNlOndoZWVsIjogZnVuY3Rpb24gbW91c2VXaGVlbChlKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0ICYmIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIGxldCBvYmpzID0gX3RoaXMubXlDYW52YXMuZ2V0T2JqZWN0cygpOwoKICAgICAgICAgIGlmICgoX3RoaXMuaW1nU2NhbGUgPiAwLjIgfHwgZXZlbnQuZGVsdGFZIDwgMCkgJiYgKF90aGlzLmltZ1NjYWxlIDwgMiB8fCBldmVudC5kZWx0YVkgPiAwKSkgewogICAgICAgICAgICBfdGhpcy5pbWdTY2FsZSA9IChldmVudC5kZWx0YVkgPiAwID8gLTAuMSA6IDAuMSkgKyBfdGhpcy5teUNhbnZhcy5nZXRab29tKCk7IC8vIGNvbnNvbGUubG9nKF90aGlzLm15Q2FudmFzLmdldFpvb20oKSk7CgogICAgICAgICAgICBfdGhpcy5pbWdTY2FsZSA9IE1hdGgubWF4KDAuMiwgX3RoaXMuaW1nU2NhbGUpOyAvL+acgOWwj+S4uuWOn+adpeeahDIvMTAKCiAgICAgICAgICAgIF90aGlzLmltZ1NjYWxlID0gTWF0aC5taW4oMiwgX3RoaXMuaW1nU2NhbGUpOyAvL+acgOWkp+aYr+WOn+adpeeahDLlgI0KCiAgICAgICAgICAgIF90aGlzLmltZ1NjYWxlID0gTWF0aC5yb3VuZChfdGhpcy5pbWdTY2FsZSAqIDEwMDAwKSAvIDEwMDAwOwogICAgICAgICAgICB2YXIgaVNjYWxlID0gMTsKCiAgICAgICAgICAgIGlmIChldmVudC5kZWx0YVkgPiAwKSB7CiAgICAgICAgICAgICAgLy8g57yp5bCPICDmu5rkuYvlkI4g5rua5LmL5YmNCiAgICAgICAgICAgICAgaVNjYWxlID0gX3RoaXMuaW1nU2NhbGUgLyAoX3RoaXMuaW1nU2NhbGUgKyAwLjEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIOaUvuWkpwogICAgICAgICAgICAgIGlTY2FsZSA9IF90aGlzLmltZ1NjYWxlIC8gKF90aGlzLmltZ1NjYWxlIC0gMC4xKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMudmFsdWVzID0gX3RoaXMuaW1nU2NhbGUgKiAxMDA7IC8vIF90aGlzLnJlcGF0RmxhZyA9IDM7CiAgICAgICAgICAgIC8vIGlmICh0aGlzLmlzUmVwZWF0ID09IDApIHsKICAgICAgICAgICAgLy8gICB0aGlzLnJlcGF0RmxhZyA9IDA7CiAgICAgICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgICAgIC8vICAgdGhpcy5yZXBhdEZsYWcgPSAzOwogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGlTY2FsZSk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucmVwYXRGbGFnKTsKCiAgICAgICAgICAgIF90aGlzLnpvb21JbihpU2NhbGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7IC8vIOm8oOagh+enu+WKqOS6i+S7tgoKICAgICAgdmFyIGF4LCBheTsKCiAgICAgIF90aGlzLm15Q2FudmFzLm9uKCJvYmplY3Q6bW92aW5nIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAvLyBfdGhpcy5yZXBhdEZsYWcgPSAzOwogICAgICAgIC8vIGlmICh0aGlzLmlzUmVwZWF0ID09IDApIHsKICAgICAgICAvLyAgIHRoaXMucmVwYXRGbGFnID0gMDsKICAgICAgICAvLyB9IGVsc2UgewogICAgICAgIC8vICAgdGhpcy5yZXBhdEZsYWcgPSAzOwogICAgICAgIC8vIH0KICAgICAgICAvLyDlt6blj7PlgY/np7sKICAgICAgICBpZiAoZS50YXJnZXQubGVmdCA8IF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5jbGlwV2lkdGggLyAyIC8gX3RoaXMuaW1nU2NhbGUpIHsKICAgICAgICAgIC8vCiAgICAgICAgICBlLnRhcmdldC5sZWZ0ID0gX3RoaXMuY2xpcFdpZHRoIC8gMiAtIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZTsKICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmxlZnQgPiBfdGhpcy5jbGlwV2lkdGggLyAyICsgX3RoaXMuY2xpcFdpZHRoIC8gMiAvIF90aGlzLmltZ1NjYWxlKSB7CiAgICAgICAgICBlLnRhcmdldC5sZWZ0ID0gX3RoaXMuY2xpcFdpZHRoIC8gMiArIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZTsKICAgICAgICB9IC8vIOS4iuS4i+WBj+enuwoKCiAgICAgICAgaWYgKGUudGFyZ2V0LnRvcCA8IF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5jbGlwV2lkdGggLyAyIC8gX3RoaXMuaW1nU2NhbGUpIHsKICAgICAgICAgIC8vCiAgICAgICAgICBlLnRhcmdldC50b3AgPSBfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuY2xpcFdpZHRoIC8gMiAvIF90aGlzLmltZ1NjYWxlOwogICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQudG9wID4gX3RoaXMuY2xpcFdpZHRoIC8gMiArIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZSkgewogICAgICAgICAgZS50YXJnZXQudG9wID0gX3RoaXMuY2xpcFdpZHRoIC8gMiArIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZTsKICAgICAgICB9CgogICAgICAgIGlmIChfdGhpcy5kYXRhMSAmJiBfdGhpcy5kYXRhMS5sZW5ndGggPj0gMSkgewogICAgICAgICAgYXggPSBlLnRhcmdldC5sZWZ0IC0gX3RoaXMubW92ZXh5LmxlZnQ7CiAgICAgICAgICBheSA9IGUudGFyZ2V0LnRvcCAtIF90aGlzLm1vdmV4eS50b3A7CgogICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5mb3JFYWNoKGZ1bmN0aW9uIChyZXMsIGluZGV4KSB7CiAgICAgICAgICAgIHJlcy5sZWZ0ID0gX3RoaXMuZGF0YTFbaW5kZXhdLmxlZnQgKyBheDsKICAgICAgICAgICAgcmVzLnRvcCA9IF90aGlzLmRhdGExW2luZGV4XS50b3AgKyBheTsKCiAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLnJlbW92ZShyZXMpOwoKICAgICAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKHJlcyk7CiAgICAgICAgICB9KTsgLy8gbGV0IHRpbWVOb3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgIC8vIGlmICh0aW1lTm93IC0gX3RoaXMudGltZU91dCA8IDEwMCkgewogICAgICAgICAgLy8gICByZXR1cm47CiAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgLy8gICBfdGhpcy50aW1lT3V0ID0gdGltZU5vdzsKICAgICAgICAgIC8vIH0KCgogICAgICAgICAgX3RoaXMuZmFiT2JqID0gZS50YXJnZXQ7CiAgICAgICAgICB2YXIgd2lkdGhOdW1MZWZ0ID0gTWF0aC5jZWlsKCgoX3RoaXMuZmFiT2JqLmxlZnQgLSBfdGhpcy5jbGlwV2lkdGggLyAyKSAqIF90aGlzLmltZ1NjYWxlICsgX3RoaXMuY2xpcFdpZHRoIC8gMiAtIF90aGlzLmZhYk9iai53aWR0aCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSAvIDIpIC8gKF90aGlzLmZhYk9iai53aWR0aCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkpOwogICAgICAgICAgdmFyIHdpZHRoTnVtUmlnaHQgPSBNYXRoLmNlaWwoKChfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuZmFiT2JqLmxlZnQpICogX3RoaXMuaW1nU2NhbGUgKyBfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuZmFiT2JqLndpZHRoICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlIC8gMikgLyAoX3RoaXMuZmFiT2JqLndpZHRoICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlKSk7CiAgICAgICAgICB2YXIgaGVpZ2h0TnVtVG9wID0gTWF0aC5jZWlsKCgoX3RoaXMuZmFiT2JqLnRvcCAtIF90aGlzLmNsaXBXaWR0aCAvIDIpICogX3RoaXMuaW1nU2NhbGUgKyBfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSAvIDIpIC8gKF90aGlzLmZhYk9iai5oZWlnaHQgKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpKTsKICAgICAgICAgIHZhciBoZWlnaHROdW1Cb3R0b20gPSBNYXRoLmNlaWwoKChfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuZmFiT2JqLnRvcCkgKiBfdGhpcy5pbWdTY2FsZSArIF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5mYWJPYmouaGVpZ2h0ICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlIC8gMikgLyAoX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkpOwogICAgICAgICAgX3RoaXMubGVmdE51bSA9IDA7CiAgICAgICAgICBfdGhpcy5yaWdodE51bSA9IDA7CiAgICAgICAgICBfdGhpcy50b3BOdW0gPSAwOwogICAgICAgICAgX3RoaXMuYm90dG9tdE51bSA9IDA7CgogICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5mb3JFYWNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKHJlcy5sZWZ0IDwgZS50YXJnZXQubGVmdCAmJiByZXMudG9wID09IGUudGFyZ2V0LnRvcCkgewogICAgICAgICAgICAgIF90aGlzLmxlZnROdW0gPSBfdGhpcy5sZWZ0TnVtICsgMTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMubGVmdCA+IGUudGFyZ2V0LmxlZnQgJiYgcmVzLnRvcCA9PSBlLnRhcmdldC50b3ApIHsKICAgICAgICAgICAgICBfdGhpcy5yaWdodE51bSA9IF90aGlzLnJpZ2h0TnVtICsgMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHJlcy50b3AgPCBlLnRhcmdldC50b3AgJiYgcmVzLmxlZnQgPT0gZS50YXJnZXQubGVmdCkgewogICAgICAgICAgICAgIF90aGlzLnRvcE51bSA9IF90aGlzLnRvcE51bSArIDE7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLnRvcCA+IGUudGFyZ2V0LnRvcCAmJiByZXMubGVmdCA9PSBlLnRhcmdldC5sZWZ0KSB7CiAgICAgICAgICAgICAgX3RoaXMuYm90dG9tdE51bSA9IF90aGlzLmJvdHRvbXROdW0gKyAxOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICB2YXIgaW1nRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgICAgICAgIGltZ0VsLmNyb3NzT3JpZ2luID0gIkFub255bW91cyI7CiAgICAgICAgICBpbWdFbC5zcmMgPSBfdGhpcy5pbWcuc3JjOwoKICAgICAgICAgIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMSkgewogICAgICAgICAgICBpZiAod2lkdGhOdW1MZWZ0ID4gX3RoaXMubGVmdE51bSkgewogICAgICAgICAgICAgIHZhciB0ID0gX3RoaXMubGVmdE51bSArIDE7CiAgICAgICAgICAgICAgX3RoaXMubGVmdE51bSA9IHdpZHRoTnVtTGVmdDsKCiAgICAgICAgICAgICAgZm9yICh2YXIgbG4gPSB0OyBsbiA8PSB3aWR0aE51bUxlZnQ7IGxuKyspIHsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPSBfdGhpcy5mYWJPYmoubGVmdCAtIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBsbjsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9IF90aGlzLmZhYk9iai50b3A7CiAgICAgICAgICAgICAgICB2YXIgaW1ncyA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgICAgICB0b3A6IF90aGlzLm1vdmVzLnRvcCwKICAgICAgICAgICAgICAgICAgbGVmdDogX3RoaXMubW92ZXMubGVmdCwKICAgICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoaW1ncyk7CgogICAgICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKGltZ3MpOwoKICAgICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkubGVmdCA9IGUudGFyZ2V0LmxlZnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkudG9wID0gZS50YXJnZXQudG9wOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICh3aWR0aE51bVJpZ2h0ID4gX3RoaXMucmlnaHROdW0pIHsKICAgICAgICAgICAgICB2YXIgdDEgPSBfdGhpcy5yaWdodE51bSArIDE7CiAgICAgICAgICAgICAgX3RoaXMucmlnaHROdW0gPSB3aWR0aE51bVJpZ2h0OwoKICAgICAgICAgICAgICBmb3IgKHZhciBfbG4xMSA9IHQxOyBfbG4xMSA8PSB3aWR0aE51bVJpZ2h0OyBfbG4xMSsrKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0gX3RoaXMuZmFiT2JqLmxlZnQgKyBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLndpZHRoICogX2xuMTE7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy50b3AgPSBfdGhpcy5mYWJPYmoudG9wOwoKICAgICAgICAgICAgICAgIHZhciBfaW1nczExID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICAgICAgc2NhbGVYOiBfdGhpcy5mYWJPYmouc2NhbGVYLAogICAgICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgICAgICBsZWZ0OiBfdGhpcy5tb3Zlcy5sZWZ0LAogICAgICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChfaW1nczExKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goX2ltZ3MxMSk7CgogICAgICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmV4eS5sZWZ0ID0gZS50YXJnZXQubGVmdDsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmV4eS50b3AgPSBlLnRhcmdldC50b3A7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLnJlcGF0RmxhZyA9PSAyKSB7CiAgICAgICAgICAgIGlmIChoZWlnaHROdW1Ub3AgPiBfdGhpcy50b3BOdW0pIHsKICAgICAgICAgICAgICB2YXIgX3Q3ID0gX3RoaXMudG9wTnVtICsgMTsKCiAgICAgICAgICAgICAgX3RoaXMudG9wTnVtID0gaGVpZ2h0TnVtVG9wOwoKICAgICAgICAgICAgICBmb3IgKHZhciBfbG4xMiA9IF90NzsgX2xuMTIgPD0gaGVpZ2h0TnVtVG9wOyBfbG4xMisrKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0gX3RoaXMuZmFiT2JqLmxlZnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy50b3AgPSBfdGhpcy5mYWJPYmoudG9wIC0gX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBfbG4xMjsKCiAgICAgICAgICAgICAgICB2YXIgX2ltZ3MxMiA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgICAgICB0b3A6IF90aGlzLm1vdmVzLnRvcCwKICAgICAgICAgICAgICAgICAgbGVmdDogX3RoaXMubW92ZXMubGVmdCwKICAgICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoX2ltZ3MxMik7CgogICAgICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKF9pbWdzMTIpOwoKICAgICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkubGVmdCA9IGUudGFyZ2V0LmxlZnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkudG9wID0gZS50YXJnZXQudG9wOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChoZWlnaHROdW1Cb3R0b20gPiBfdGhpcy5ib3R0b210TnVtKSB7CiAgICAgICAgICAgICAgdmFyIF90OCA9IF90aGlzLmJvdHRvbXROdW0gKyAxOwoKICAgICAgICAgICAgICBfdGhpcy5ib3R0b210TnVtID0gaGVpZ2h0TnVtQm90dG9tOwoKICAgICAgICAgICAgICBmb3IgKHZhciBfbG4xMyA9IF90ODsgX2xuMTMgPD0gaGVpZ2h0TnVtQm90dG9tOyBfbG4xMysrKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0gX3RoaXMuZmFiT2JqLmxlZnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy50b3AgPSBfdGhpcy5mYWJPYmoudG9wICsgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBfbG4xMzsKCiAgICAgICAgICAgICAgICB2YXIgX2ltZ3MxMyA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgICAgICB0b3A6IF90aGlzLm1vdmVzLnRvcCwKICAgICAgICAgICAgICAgICAgbGVmdDogX3RoaXMubW92ZXMubGVmdCwKICAgICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoX2ltZ3MxMyk7CgogICAgICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKF9pbWdzMTMpOwoKICAgICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkubGVmdCA9IGUudGFyZ2V0LmxlZnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkudG9wID0gZS50YXJnZXQudG9wOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMykgewogICAgICAgICAgICAvLyBsZXQgc2poID0gX3RoaXMubGVmdE51bSArIDEgKyBfdGhpcy5yaWdodE51bTsKICAgICAgICAgICAgLy8gbGV0IHNocyA9IF90aGlzLnRvcE51bSArIDEgKyBfdGhpcy5ib3R0b210TnVtOwogICAgICAgICAgICBpZiAod2lkdGhOdW1MZWZ0ID4gX3RoaXMubGVmdE51bSkgewogICAgICAgICAgICAgIHZhciBfdDkgPSBfdGhpcy5sZWZ0TnVtICsgMTsKCiAgICAgICAgICAgICAgX3RoaXMubGVmdE51bSA9IHdpZHRoTnVtTGVmdDsKCiAgICAgICAgICAgICAgZm9yICh2YXIgX2xuMTQgPSBfdDk7IF9sbjE0IDw9IHdpZHRoTnVtTGVmdDsgX2xuMTQrKykgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbG4xID0gX3RoaXMuYm90dG9tdE51bSAqIC0xOyBsbjEgPD0gX3RoaXMudG9wTnVtOyBsbjErKykgewogICAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0gX3RoaXMuZmFiT2JqLmxlZnQgLSBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLndpZHRoICogX2xuMTQ7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9IF90aGlzLmZhYk9iai50b3AgLSBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIGxuMTsKCiAgICAgICAgICAgICAgICAgIHZhciBfaW1nczE0ID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoX2ltZ3MxNCk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goX2ltZ3MxNCk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwogICAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkubGVmdCA9IGUudGFyZ2V0LmxlZnQ7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1vdmV4eS50b3AgPSBlLnRhcmdldC50b3A7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHdpZHRoTnVtUmlnaHQgPiBfdGhpcy5yaWdodE51bSkgewogICAgICAgICAgICAgIHZhciBfdDEwID0gX3RoaXMucmlnaHROdW0gKyAxOwoKICAgICAgICAgICAgICBfdGhpcy5yaWdodE51bSA9IHdpZHRoTnVtUmlnaHQ7CgogICAgICAgICAgICAgIGZvciAodmFyIF9sbjE1ID0gX3QxMDsgX2xuMTUgPD0gd2lkdGhOdW1SaWdodDsgX2xuMTUrKykgewogICAgICAgICAgICAgICAgZm9yICh2YXIgX2xuMTYgPSBfdGhpcy5ib3R0b210TnVtICogLTE7IF9sbjE2IDw9IF90aGlzLnRvcE51bTsgX2xuMTYrKykgewogICAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0gX3RoaXMuZmFiT2JqLmxlZnQgKyBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLndpZHRoICogX2xuMTU7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9IF90aGlzLmZhYk9iai50b3AgLSBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIF9sbjE2OwoKICAgICAgICAgICAgICAgICAgdmFyIF9pbWdzMTUgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgICAgICAgdG9wOiBfdGhpcy5tb3Zlcy50b3AsCiAgICAgICAgICAgICAgICAgICAgbGVmdDogX3RoaXMubW92ZXMubGVmdCwKICAgICAgICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIgogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChfaW1nczE1KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChfaW1nczE1KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1vdmV4eS5sZWZ0ID0gZS50YXJnZXQubGVmdDsKICAgICAgICAgICAgICAgICAgX3RoaXMubW92ZXh5LnRvcCA9IGUudGFyZ2V0LnRvcDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChoZWlnaHROdW1Ub3AgPiBfdGhpcy50b3BOdW0pIHsKICAgICAgICAgICAgICB2YXIgX3QxMSA9IF90aGlzLnRvcE51bSArIDE7CgogICAgICAgICAgICAgIF90aGlzLnRvcE51bSA9IGhlaWdodE51bVRvcDsKCiAgICAgICAgICAgICAgZm9yICh2YXIgX2xuMTcgPSBfdDExOyBfbG4xNyA8PSBoZWlnaHROdW1Ub3A7IF9sbjE3KyspIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIF9sbjE4ID0gX3RoaXMucmlnaHROdW0gKiAtMTsgX2xuMTggPD0gX3RoaXMubGVmdE51bTsgX2xuMTgrKykgewogICAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0gX3RoaXMuZmFiT2JqLmxlZnQgLSBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLndpZHRoICogX2xuMTg7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9IF90aGlzLmZhYk9iai50b3AgLSBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIF9sbjE3OwoKICAgICAgICAgICAgICAgICAgdmFyIF9pbWdzMTYgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgICAgICAgdG9wOiBfdGhpcy5tb3Zlcy50b3AsCiAgICAgICAgICAgICAgICAgICAgbGVmdDogX3RoaXMubW92ZXMubGVmdCwKICAgICAgICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIgogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChfaW1nczE2KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChfaW1nczE2KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1vdmV4eS5sZWZ0ID0gZS50YXJnZXQubGVmdDsKICAgICAgICAgICAgICAgICAgX3RoaXMubW92ZXh5LnRvcCA9IGUudGFyZ2V0LnRvcDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGVpZ2h0TnVtQm90dG9tID4gX3RoaXMuYm90dG9tdE51bSkgewogICAgICAgICAgICAgIHZhciBfdDEyID0gX3RoaXMuYm90dG9tdE51bSArIDE7CgogICAgICAgICAgICAgIF90aGlzLmJvdHRvbXROdW0gPSBoZWlnaHROdW1Cb3R0b207CgogICAgICAgICAgICAgIGZvciAodmFyIF9sbjE5ID0gX3QxMjsgX2xuMTkgPD0gaGVpZ2h0TnVtQm90dG9tOyBfbG4xOSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBfbG4yMCA9IF90aGlzLnJpZ2h0TnVtICogLTE7IF9sbjIwIDw9IF90aGlzLmxlZnROdW07IF9sbjIwKyspIHsKICAgICAgICAgICAgICAgICAgX3RoaXMubW92ZXMubGVmdCA9IF90aGlzLmZhYk9iai5sZWZ0IC0gX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai53aWR0aCAqIF9sbjIwOwogICAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy50b3AgPSBfdGhpcy5mYWJPYmoudG9wICsgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBfbG4xOTsKCiAgICAgICAgICAgICAgICAgIHZhciBfaW1nczE3ID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoX2ltZ3MxNyk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goX2ltZ3MxNyk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwogICAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkubGVmdCA9IGUudGFyZ2V0LmxlZnQ7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1vdmV4eS50b3AgPSBlLnRhcmdldC50b3A7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLmZhYk9iaiA9IGUudGFyZ2V0OwogICAgICAgICAgX3RoaXMubW92ZU9iaiA9IHsKICAgICAgICAgICAgbGVmdDogX3RoaXMuZmFiT2JqLmxlZnQgLSBfdGhpcy5jbGlwV2lkdGggLyAyICogX3RoaXMuaW1nU2NhbGUsCiAgICAgICAgICAgIHRvcDogX3RoaXMuZmFiT2JqLnRvcCAtIF90aGlzLmNsaXBXaWR0aCAvIDIgKiBfdGhpcy5pbWdTY2FsZQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIF90aGlzLmRyYXdJbWFnZUNsaXAoKTsKICAgICAgfSk7IC8vIF90aGlzLm15Q2FudmFzLm9uKCJvYmplY3Q6bW92ZWQiLCBmdW5jdGlvbiAoZSkge30pOwogICAgICAvLyAvLyDpvKDmoIfngrnlh7vkuovku7YKCgogICAgICBfdGhpcy5teUNhbnZhcy5vbigibW91c2U6ZG93biIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgLy8gICDlvZNlLnRhcmdldCDmmK9udWxsIOaIluiAhXVuZGVmaW5lZOaXtiDmmK/msqHpgInkuK0g5YiG57uECiAgICAgICAgaWYgKGUudGFyZ2V0ICE9IG51bGwpIHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJkb3duIik7CiAgICAgICAgICAvLyBfdGhpcy5yZXBhdEZsYWcgPSAzOwogICAgICAgICAgLy8gaWYgKHRoaXMuaXNSZXBlYXQgPT0gMCkgewogICAgICAgICAgLy8gICB0aGlzLnJlcGF0RmxhZyA9IDA7CiAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgLy8gICB0aGlzLnJlcGF0RmxhZyA9IDM7CiAgICAgICAgICAvLyB9CiAgICAgICAgICBlLnRhcmdldC5oYXNDb250cm9scyA9IGZhbHNlOwogICAgICAgICAgZS50YXJnZXQuaGFzQm9yZGVycyA9IGZhbHNlOwogICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgIF90aGlzLm1vdmV4eS5sZWZ0ID0gZS50YXJnZXQubGVmdDsKICAgICAgICAgIF90aGlzLm1vdmV4eS50b3AgPSBlLnRhcmdldC50b3A7CiAgICAgICAgICBfdGhpcy50aW1lT3V0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHRoaXMuaW1nQ2FudmFzID0gbmV3IGZhYnJpYy5DYW52YXMoImNhbnZhc0JveDEiLCB7CiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAiI2ZmZiIsCiAgICAgICAgaXNEcmF3aW5nTW9kZTogZmFsc2UKICAgICAgfSk7CiAgICAgIHRoaXMuaW5pdENhbnZhcyA9IG5ldyBmYWJyaWMuQ2FudmFzKCJjYW52YXNCb3gzIiwgewogICAgICAgIGJhY2tncm91bmRDb2xvcjogIiNmZmYiLAogICAgICAgIGlzRHJhd2luZ01vZGU6IGZhbHNlCiAgICAgIH0pOwogICAgICB0aGlzLmluaXRDYW52YXMuc2V0V2lkdGgodGhpcy5jbGlwV2lkdGgpOwogICAgICB0aGlzLmluaXRDYW52YXMuc2V0SGVpZ2h0KHRoaXMuY2xpcEhlaWdodCk7IC8vIOaViOaenOWbvuaWsOWinm1vdW50ZWQKICAgIH0sCiAgICBzZXRBc1Bvc2l0aW9uOiBmdW5jdGlvbiBzZXRBc1Bvc2l0aW9uKCkgewogICAgICB2YXIgc2Nyb2xsdG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKCiAgICAgIGlmIChzY3JvbGx0b3AgPiAxMDgwKSB7CiAgICAgICAgLy8g5Yiw5LqG5bqV6YOo5LmL5ZCO5oOz5YGa55qE5pON5L2cLOWmguWIsOS6huW6lemDqOS5i+WQjuWKoOi9vQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImFzIilbMF0uc3R5bGUucG9zaXRpb24gPSAiZml4ZWQiOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImFzIilbMF0uc3R5bGUudG9wID0gIjZyZW0iOwogICAgICB9IGVsc2UgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImFzIilbMF0uc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgICB9CiAgICB9IC8vIOWkhOeQhuaooeWei+eahOWHveaVsAogICAgLy8g5pWI5p6c5Zu+5paw5aKe5Ye95pWwCiAgICAvLyDmlYjmnpzlm77mlrDlop7nmoRtZXRob2Rz5Ye95pWwCgogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIC8vIOmmluWFiOWIpOaWreS4gOS4i+eUqOaIt+acieayoeacieeZu+mZhgogICAgLy8gaWYgKGxvY2FsU3RvcmFnZS51c2VyID09PSAiIikgewogICAgLy8gICAvLyDmsqHmnInnmbvpmYbnmoTml7blgJnlsIbotK3nianovabkv6Hmga/lrZjliLDmnKzlnLDnmoQgbG9jYWxTdG9yYWdlLnNob3BwaW5nX2NhcuW9k+S4rQogICAgLy8gICAvLyDpppbpgInliKTmlq3kuIDkuItsb2NhbFN0b3JhZ2Uuc2hvcHBpbmdfY2Fy5pyJ5rKh5pyJ5aOw5piOCiAgICAvLwogICAgLy8gICBpZiAoIWxvY2FsU3RvcmFnZS5zc2hvcHBpbmdfY2FyKSB7CiAgICAvLyAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NzaG9wcGluZ19jYXInLCBbXSk7CiAgICAvLyAgIH0KICAgIC8vIH0KICAgIC8vIGlmICghbG9jYWxTdG9yYWdlLnRva2VuKSB7CiAgICAvLyAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7CiAgICAvLyB9CiAgICB2YXIgdm0gPSB0aGlzOyAvLyB0aGlzLnJxKHsKICAgIC8vICAgdXJsOiAiL2FwaS9wZXJzb25hbC9zZWxlY3RCb29rbWFya1NpbXBsZSIsCiAgICAvLyAgIG1ldGhvZDogInBvc3QiLAogICAgLy8gICBwYXJhbToge30sCiAgICAvLyAgIG9uRXJyb3I6IGZ1bmN0aW9uICgpIHt9LAogICAgLy8gICB2bSwKICAgIC8vIH0pLnRoZW4oKHJlcykgPT4gewogICAgLy8gICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7CiAgICAvLyAgICAgdm0uQ29sbGVjdGlvbkxpc3QgPSByZXMuZGF0YTsKICAgIC8vICAgICAvLwogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIC8vCiAgICAvLyAgICAgLy8gdGhpcy4kbWVzc2FnZShyZXMuZGVzYyk7CiAgICAvLyAgIH0KICAgIC8vIH0pOwoKICAgIHRoaXMuc3UgPSBmYWxzZTsgLy8g5pWI5p6c5Zu+55qEY3JlYXRlZAoKICAgIHRoaXMuZ2V0UFNEKCk7IC8vIOaViOaenOWbvueahGNyZWF0ZWQKCiAgICBjb25zb2xlLmxvZygiY3JlYXRlZCIpOwogIH0sCiAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7CiAgICAvLyDplIDmr4F2bee7hOS7tgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX3RoaXMuc2V0QXNQb3NpdGlvbiwgZmFsc2UpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMubG9ja2luZyA9IGZhbHNlOyAvLyB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoewogICAgLy8gICBtZXNzYWdlOifkuIvovb3miJDlip/vvIEnLAogICAgLy8gICBkdXJhdGlvbjozMDAwMAogICAgLy8gfSk7CgogICAgdmFyIHBzID0gdGhpcy4kcm91dGUucGF0aC5zcGxpdCgnLycpOwogICAgdGhpcy5wcm9kdWN0SWQgPSBwc1twcy5sZW5ndGggLSAxXTsgLy8gY29uc29sZS5sb2codGhpcy4kcm91dGUucGF0aCk7CiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRyb3V0ZSk7CiAgICAvLyBjb25zb2xlLmxvZygnbW91dGVkJykKICAgIC8vIGxvY2FsU3RvcmFnZS5wcm9kdWN0SWQ9dGhpcy5wcm9kdWN0SWQ9dGhpcy4kcm91dGUucXVlcnkuaWQ7CgogICAgdGhpcy5jYW5kaWRhdGUoKTsKICAgIHRoaXMubG9hZENhbnZhcygpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIF90aGlzLnNldEFzUG9zaXRpb24sIGZhbHNlKTsKICB9IC8vIGJlZm9yZVVwZGF0ZSgpewogIC8vICAgY29uc29sZS5sb2coImJlZm9yZVVwZGF0ZSIpCiAgLy8KICAvLyB9LAogIC8vIHVwZGF0ZWQoKXsKICAvLyAgIGNvbnNvbGUubG9nKCJ1cGRhdGVkIikKICAvLwogIC8vIH0KCn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,qCAAnB;AACA,SAAQC,YAAR,EAAqBC,QAArB,QAAoC,cAApC;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAOC,IAAP,MAAiB,gBAAjB,C,CACA;AAEA;AACA;;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE;AACVP,IAAAA,MAAM,EAANA,MADU;AAEVG,IAAAA,IAAI,EAAJA,IAFU;AAGVC,IAAAA,IAAI,EAAJA,IAHU;AAIVC,IAAAA,MAAM,EAANA,MAJU,CAKV;;AALU,GADC;AAQbG,EAAAA,IARa,kBAQN;AACL,WAAO;AACLC,MAAAA,OAAO,EAAC,KADH;AAELC,MAAAA,GAAG,EAAE,KAFA;AAGLC,MAAAA,SAAS,EAAE,EAHN;AAILC,MAAAA,SAAS,EAAE,IAJN;AAKLC,MAAAA,QAAQ,EAAE,KALL;AAMLC,MAAAA,IAAI,EAAE,IAND;AAOL;AACAC,MAAAA,EAAE,EAAE,KARC;AASLC,MAAAA,CAAC,EAAE,IATE;AAULC,MAAAA,WAAW,EAAE,CAVR;AAWLC,MAAAA,YAAY,EAAE,EAXT;AAYLC,MAAAA,QAAQ,EAAE,EAZL;AAaLC,MAAAA,UAAU,EAAE,CAbP;AAcLC,MAAAA,UAAU,EAAE,CAdP;AAeLC,MAAAA,QAAQ,EAAE,GAfL;AAgBLC,MAAAA,QAAQ,EAAC,CAhBJ;AAkBLC,MAAAA,OAAO,EAAC,EAlBH;AAmBLC,MAAAA,UAAU,EAAE,EAnBP;AAoBLC,MAAAA,UAAU,EAAE,EApBP;AAsBLC,MAAAA,iBAAiB,EAAE,CAAC,IAAD,EAAO,KAAP,EAAc,KAAd,CAtBd;AAsBoC;AACzCC,MAAAA,iBAAiB,EAAE,EAvBd;AAwBLC,MAAAA,YAAY,EAAE,EAxBT;AAyBLC,MAAAA,aAAa,EAAE,EAzBV;AA0BLC,MAAAA,MAAM,EAAE,GA1BH;AA2BLC,MAAAA,YAAY,EAAE,EA3BT;AA4BLC,MAAAA,GAAG,EAAE,CAACC,OAAO,CAAC,sBAAD,CAAR,EAAkCA,OAAO,CAAC,oBAAD,CAAzC,CA5BA;AA6BLC,MAAAA,EAAE,EAAE,CAACD,OAAO,CAAC,sBAAD,CAAR,EAAkCA,OAAO,CAAC,wBAAD,CAAzC,EAAqEA,OAAO,CAAC,sBAAD,CAA5E,CA7BC;AA8BLE,MAAAA,MAAM,EAAEF,OAAO,CAAC,yBAAD,CA9BV;AA+BLG,MAAAA,KAAK,EAAE,CAACH,OAAO,CAAC,oBAAD,CAAR,EAAgCA,OAAO,CAAC,oBAAD,CAAvC,CA/BF;AAgCLI,MAAAA,EAAE,EAAE,CAACJ,OAAO,CAAC,oBAAD,CAAR,EAAgCA,OAAO,CAAC,oBAAD,CAAvC,CAhCC;AAiCLK,MAAAA,UAAU,EAAEL,OAAO,CAAC,wBAAD,CAjCd;AAkCLM,MAAAA,EAAE,EAAE,CAACN,OAAO,CAAC,uBAAD,CAAR,EAAmCA,OAAO,CAAC,uBAAD,CAA1C,EAAqEA,OAAO,CAAC,uBAAD,CAA5E,EAAuGA,OAAO,CAAC,uBAAD,CAA9G,CAlCC;AAmCL;AACA;AACAO,MAAAA,IAAI,EAAE,EArCD;AAsCLC,MAAAA,OAAO,EAAE,EAtCJ;AAsCQ;AACbC,MAAAA,UAAU,EAAE,EAvCP;AAuCW;AAChBC,MAAAA,aAAa,EAAE,EAxCV;AAwCc;AACnBC,MAAAA,UAAU,EAAE,EAzCP;AAyCW;AAChBC,MAAAA,QAAQ,EAAE,EA1CL;AA0CS;AACdC,MAAAA,WAAW,EAAE,EA3CR;AA2CY;AACjB;AACAC,MAAAA,SAAS,EAAE,CA7CN;AA8CLC,MAAAA,QAAQ,EAAE,CA9CL;AA+CLC,MAAAA,OAAO,EAAE,CA/CJ;AAgDLC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE;AAAX,OAhDF;AAiDLC,MAAAA,UAAU,EAAE,IAjDP;AAkDLC,MAAAA,WAAW,EAAE,IAlDR;AAmDLC,MAAAA,cAAc,EAAE,IAnDX;AAoDLC,MAAAA,UAAU,EAAE,EApDP;AAqDLC,MAAAA,QAAQ,EAAE,EArDL;AAsDLC,MAAAA,KAAK,EAAE,IAtDF;AAsDQ;AACbC,MAAAA,KAAK,EAAE,IAvDF;AAuDQ;AACbC,MAAAA,QAAQ,EAAE,IAxDL;AAwDW;AAChBC,MAAAA,SAAS,EAAE,IAzDN;AAyDY;AACjBC,MAAAA,cAAc,EAAE,IA1DX;AA2DLC,MAAAA,WAAW,EAAE,CA3DR;AA2DW;AAChBC,MAAAA,GAAG,EAAE,EA5DA;AA6DLC,MAAAA,SAAS,EAAE,GA7DN;AA6DW;AAChBC,MAAAA,UAAU,EAAE,GA9DP;AA8DY;AACjBC,MAAAA,MAAM,EAAE,GA/DH;AAgELC,MAAAA,SAAS,EAAE,CAhEN;AAgES;AACdC,MAAAA,GAAG,EAAE,IAjEA;AAkELC,MAAAA,UAAU,EAAE,IAlEP;AAmELC,MAAAA,QAAQ,EAAE,IAnEL;AAoELC,MAAAA,KAAK,EAAE,IApEF;AAoEQ;AACbC,MAAAA,IAAI,EAAE,CArED;AAsELC,MAAAA,MAAM,EAAE,IAtEH;AAsES;AACdC,MAAAA,SAAS,EAAE,IAvEN;AAwELC,MAAAA,UAAU,EAAE,EAxEP;AAwEW;AAChBC,MAAAA,KAAK,EAAE,IAzEF;AA0ELC,MAAAA,KAAK,EAAE,IA1EF;AA2ELC,MAAAA,OAAO,EAAE,IA3EJ;AA4ELC,MAAAA,SAAS,EAAE,EA5EN;AA4EU;AACfC,MAAAA,WAAW,EAAE,EA7ER;AA8ELC,MAAAA,MAAM,EAAE,EA9EH;AA8EO;AACZC,MAAAA,QAAQ,EAAE,CA/EL;AA+EQ;AACbC,MAAAA,SAAS,EAAE,CAhFN;AAgFS;AACdC,MAAAA,KAAK,EAAE,EAjFF;AAkFLC,MAAAA,OAAO,EAAE,CAlFJ;AAmFLC,MAAAA,QAAQ,EAAE,CAnFL;AAoFLC,MAAAA,MAAM,EAAE,CApFH;AAqFLC,MAAAA,UAAU,EAAE,CArFP;AAsFLC,MAAAA,MAAM,EAAE,EAtFH;AAuFLC,MAAAA,OAAO,EAAE,CAvFJ;AAwFLC,MAAAA,MAAM,EAAE,IAxFH;AAyFLC,MAAAA,OAAO,EAAE,IAzFJ;AA0FLC,MAAAA,SAAS,EAAE,IA1FN;AA2FLC,MAAAA,GAAG,EAAE,IA3FA;AA4FLC,MAAAA,OAAO,EAAE,IA5FJ;AA6FLC,MAAAA,YAAY,EAAE,IA7FT;AA8FLC,MAAAA,cAAc,EAAE,KA9FX;AA+FLC,MAAAA,YAAY,EAAE,KA/FT;AAgGLC,MAAAA,YAAY,EAAE,KAhGT;AAiGLC,MAAAA,QAAQ,EAAE,IAjGL;AAkGLC,MAAAA,SAAS,EAAE,IAlGN;AAmGLC,MAAAA,KAAK,EAAE,EAnGF;AAoGLC,MAAAA,UAAU,EAAE,EApGP;AAqGLC,MAAAA,IAAI,EAAE,EArGD;AAsGLC,MAAAA,UAAU,EAAE,CAtGP,CAuGL;AACA;;AAxGK,KAAP;AA0GD,GAnHY;AAoHbC,EAAAA,KAAK,EAAE;AACL,6BAAyB;AACvBC,MAAAA,OADuB,qBACb;AACR,aAAKC,UAAL;AACD;AAHsB,KADpB;AAMLC,IAAAA,KANK,mBAMG,CACP,CAPI;AAQL3F,IAAAA,UARK,wBAQQ,CACZ,CATI,CAUL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AApBK,GApHM;AA0Ib4F,EAAAA,OAAO,EAAE;AACPC,IAAAA,GADO,iBACD;AACJC,MAAAA,QAAQ,CAACC,sBAAT,CAAgC,IAAhC,EAAsC,CAAtC,EAAyCC,KAAzC,CAA+CC,QAA/C,GAA0D,UAA1D;AACD,KAHM;AAIPC,IAAAA,GAJO,iBAID;AACJ,UAAI,KAAK3G,SAAL,IAAkB,EAAtB,EAA0B;AACxB,eAAO,KAAK4G,QAAL,CAAc,kBAAd,CAAP;AACD;AAEF,KATM;AAUPC,IAAAA,MAVO,oBAUE;AACP,WAAK9G,GAAL,GAAW,IAAX;AACD,KAZM;AAaP+G,IAAAA,OAbO,qBAaG;AACR,WAAK/G,GAAL,GAAW,KAAX;AACD,KAfM;AAgBP;AACAgH,IAAAA,MAjBO,kBAiBAC,EAjBA,EAiBI;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAYF,EAAZ;AACD,KAnBM;AAoBP;AACAG,IAAAA,aArBO,2BAqBS;AAAA;;AAEd,UAAIC,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAR;;AAEA,UAAIJ,CAAC,IAAIA,CAAC,CAACK,IAAF,CAAO,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACzH,SAAL,IAAkB,MAAI,CAACA,SAA3B;AAAA,OAAX,CAAT,EAA2D;AACzD,aAAK2G,QAAL,CAAc,eAAd;AACD,OAFD,MAEO;AAEL,YAAI,CAACQ,CAAL,EAAQ;AACNA,UAAAA,CAAC,GAAG,EAAJ;AACD;;AAED,YAAIO,CAAC,GAAG;AACN1H,UAAAA,SAAS,EAAE,KAAKA,SADV;AACoB;AAC1B2H,UAAAA,OAAO,EAAE,KAAKtH,WAFR;AAEqB;AAC3B0F,UAAAA,UAAU,EAAE;AAHN,SAAR;AAMAoB,QAAAA,CAAC,CAACS,IAAF,CAAOF,CAAP;AACAJ,QAAAA,YAAY,CAACO,OAAb,CAAqB,eAArB,EAAsCT,IAAI,CAACU,SAAL,CAAeX,CAAf,CAAtC;AACA,aAAK/F,YAAL,CAAkB2G,KAAlB,GAA0B,CAA1B;AAEA,aAAKlI,OAAL,GAAa,KAAb;AACD;AACF,KA7CM;AA8CP;AACAmI,IAAAA,aA/CO,2BA+CS;AAAA;;AACd,UAAIC,EAAE,GAAG,IAAT;AAEA,UAAGA,EAAE,CAACpI,OAAN,EAAc;AACdoI,MAAAA,EAAE,CAACpI,OAAH,GAAW,IAAX;AAEAqI,MAAAA,IAAI,CAAC,OAAD,EAAU,aAAV,EAAyB;AAC3BC,QAAAA,QAAQ,EAAE,KADiB;AAE3BC,QAAAA,KAAK,EAAE,CAAC;AACNC,UAAAA,OAAO,EAAE,KAAKjH,YAAL,CAAkBpB,SADrB;AAENsI,UAAAA,SAAS,EAAE,KAAKlH,YAAL,CAAkByC,KAFvB;AAGN0E,UAAAA,KAAK,EAAE,KAAKjI,YAHN;AAIN6H,UAAAA,QAAQ,EAAE,KAJJ;AAKNK,UAAAA,QAAQ,EAAE;AALJ,SAAD,CAFoB;AAS3BrC,QAAAA,KAAK,EAAE,KAAK7F;AATe,OAAzB,CAAJ,CANc,CAkBd;;AACA,UAAI,CAACgH,YAAY,CAACmB,IAAlB,EAAwB;AACtB;AACA;AACA,aAAKvB,aAAL,GAHsB,CAItB;AAEA;AACD,OAPD,MAOO;AACL,aAAKwB,EAAL,CAAQ;AACNC,UAAAA,GAAG,EAAE,gBADC;AAENC,UAAAA,MAAM,EAAE,MAFF;AAGNC,UAAAA,KAAK,EAAE;AACL7I,YAAAA,SAAS,EAAE,KAAKoB,YAAL,CAAkBpB,SADxB;AAEL2H,YAAAA,OAAO,EAAE,KAAKtH;AAFT,WAHD;AAONyI,UAAAA,OAAO,EAAE,mBAAY;AACnBb,YAAAA,EAAE,CAACpI,OAAH,GAAW,KAAX;AACD,WATK;AAUNoI,UAAAA,EAAE,EAAFA;AAVM,SAAR,EAWGc,IAXH,CAWQ,UAACC,GAAD,EAAS;AACf,cAAIA,GAAG,CAACC,IAAJ,IAAY,GAAhB,EAAqB;AACnB;AACA,gBAAI,CAACD,GAAG,CAACP,IAAT,EAAe;AACbR,cAAAA,EAAE,CAACf,aAAH;AACD,aAFD,MAEO;AACLe,cAAAA,EAAE,CAAC7G,YAAH,CAAgB2G,KAAhB,GAAwB,CAAxB;AACD;AAEF,WARD,MAQO,IAAIiB,GAAG,CAACC,IAAJ,IAAY,GAAZ,IAAmBD,GAAG,CAACC,IAAJ,IAAY,GAAnC,EAAwC;AAC7ChB,YAAAA,EAAE,CAACf,aAAH,GAD6C,CAE7C;AACA;AACA;AACA;AACA;AACD,WAPM,MAOA;AACL,YAAA,MAAI,CAACP,QAAL,CAAcqC,GAAG,CAACE,IAAlB,EADK,CAEL;;AACD;;AACDjB,UAAAA,EAAE,CAACpI,OAAH,GAAW,KAAX;AACD,SAhCD;AAiCD;AACF,KA5GM;AA6GPsJ,IAAAA,cA7GO,4BA6GU;AACf,WAAKC,OAAL,CAAaxB,IAAb,CAAkB,cAAlB;AACD,KA/GM;AAgHPyB,IAAAA,IAhHO,gBAgHFC,EAhHE,EAgHE;AAEP,WAAKC,KAAL,CAAWF,IAAX,CAAgBA,IAAhB,CAAqBC,EAArB;AACD,KAnHM;AAoHPE,IAAAA,OApHO,mBAoHCC,CApHD,EAoHIC,CApHJ,EAoHO;AACZ;AACA;AAEA,UAAMC,QAAQ,GAAG,KAAKP,OAAL,CAAaQ,OAAb,CAAqB;AACpCC,QAAAA,IAAI,EAAE,aAAaJ;AADiB,OAArB,CAAjB;AAIAK,MAAAA,MAAM,CAACC,IAAP,CAAYJ,QAAQ,CAACK,IAArB,EAA2B,OAA3B,EARY,CAUZ;AACA;AACA;AACA;AACA;AAGA;AACA;AACD,KAvIM;AAwIPC,IAAAA,YAxIO,wBAwIMX,EAxIN,EAwIU;AAAA;;AACf,UAAMY,KAAK,GAAG,IAAd;;AAEAA,MAAAA,KAAK,CAACxB,EAAN,CAAS;AACPC,QAAAA,GAAG,EAAE,sBADE;AAEPC,QAAAA,MAAM,EAAE,MAFD;AAGPC,QAAAA,KAAK,EAAE;AACL9B,UAAAA,EAAE,EAAEmD,KAAK,CAAC9I,YAAN,CAAmBpB;AADlB,SAHA;AAMP8I,QAAAA,OAAO,EAAE,mBAAY,CACpB,CAPM;AAQPoB,QAAAA,KAAK,EAALA;AARO,OAAT,EASGnB,IATH,CASQ,UAACC,GAAD,EAAS;AACf,YAAIA,GAAG,CAACC,IAAJ,IAAY,GAAhB,EAAqB;AACnB;AAEAD,UAAAA,GAAG,CAACpJ,IAAJ,GAAWoJ,GAAG,CAACpJ,IAAJ,CAASuK,OAAT,CAAiB,OAAjB,EAA0B,QAA1B,CAAX;AAEA,cAAIC,GAAG,GAAG,YAAV;AACA,cAAIC,GAAG,GAAGD,GAAG,CAACE,IAAJ,CAAStB,GAAG,CAACpJ,IAAb,EAAmB,CAAnB,CAAV;;AAEA,cAAG,SAAOyK,GAAG,CAACE,WAAJ,EAAV,EAA4B;AAE1B,gBAAIC,GAAG,GAAGlE,QAAQ,CAACmE,aAAT,CAAuB,GAAvB,CAAV;AACAD,YAAAA,GAAG,CAACE,YAAJ,CAAiB,MAAjB,EAAyB1B,GAAG,CAACpJ,IAA7B,EAH0B,CAGU;;AACpC4K,YAAAA,GAAG,CAACE,YAAJ,CAAiB,UAAjB,EAA6BR,KAAK,CAAC9I,YAAN,CAAmByC,KAAnB,GAA2B,GAA3B,GAAiCwG,GAA9D,EAJ0B,CAIyC;;AAEnEG,YAAAA,GAAG,CAACE,YAAJ,CAAiB,QAAjB,EAA2B,OAA3B;AACAF,YAAAA,GAAG,CAACG,KAAJ;AAED,WATD,MASM;AACJrL,YAAAA,QAAQ,CAAC4K,KAAD,EAAQlB,GAAG,CAACpJ,IAAZ,EAAkBsK,KAAK,CAAC9I,YAAN,CAAmByC,KAAnB,GAA2B,GAA3B,GAAiCwG,GAAnD,CAAR;AACD,WAnBkB,CAqBnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACD,SAnCD,MAmCO;AACL,UAAA,MAAI,CAAC1D,QAAL,CAAcqC,GAAG,CAACE,IAAlB,EADK,CAEL;;AACD;AACF,OAjDD;AAmDD,KA9LM;AA+LPhD,IAAAA,UA/LO,wBA+LM;AACX,UAAI,KAAK9F,CAAL,IAAU,IAAV,IAAkB,KAAKA,CAAL,CAAOwK,MAAP,GAAgB,CAAtC,EACEvL,YAAY,CAAC,KAAKe,CAAN,EAAS,IAAT,CAAZ;AACH,KAlMM;AAmMP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAyK,IAAAA,eAxQO,6BAwQW;AAAA;;AAChB;AACA,UAAI5C,EAAE,GAAG,IAAT;AACA,WAAKS,EAAL,CAAQ;AACNC,QAAAA,GAAG,EAAE,8BADC;AAENC,QAAAA,MAAM,EAAE,MAFF;AAGNC,QAAAA,KAAK,EAAE;AACL7I,UAAAA,SAAS,EAAEiI,EAAE,CAACjI;AADT,SAHD;AAMN8I,QAAAA,OAAO,EAAE,mBAAY,CACpB,CAPK;AAQNb,QAAAA,EAAE,EAAFA;AARM,OAAR,EASGc,IATH,CASQ,UAACC,GAAD,EAAS;AACf,YAAIA,GAAG,CAACC,IAAJ,IAAY,GAAhB,EAAqB;AACnBhB,UAAAA,EAAE,CAAC7H,CAAH,GAAO4I,GAAG,CAACpJ,IAAX;;AAEA,cAAIqI,EAAE,CAAC7H,CAAH,IAAQ0K,SAAZ,EAAuB;AACrB,YAAA,MAAI,CAACvK,QAAL,GAAgB,IAAhB;AACA,YAAA,MAAI,CAACC,UAAL,GAAkB,CAAlB;AACD,WAHD,MAGO;AACL;AACAnB,YAAAA,YAAY,CAAC4I,EAAE,CAAC7H,CAAJ,EAAO6H,EAAP,CAAZ;AACD;AACF,SAVD,MAUO;AACL;AACA,UAAA,MAAI,CAACtB,QAAL,CAAcqC,GAAG,CAACE,IAAlB;AACD;AACF,OAxBD;AAyBD,KApSM;AAqSP;AACA6B,IAAAA,kBAtSO,8BAsSYtB,CAtSZ,EAsSe;AACpB,WAAKpJ,WAAL,GAAmBoJ,CAAnB;AACA,WAAKuB,SAAL,GAFoB,CAGpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KAjTM;AAkTP;AACAC,IAAAA,eAnTO,2BAmTSC,GAnTT,EAmTc;AACnB,UAAI,KAAKhK,aAAL,IAAsB,EAA1B,EAA8B;AAC5B;AACA,aAAKA,aAAL,GAAqB,KAAKD,YAA1B;AACD,OAJkB,CAMnB;;;AACA,WAAKA,YAAL,GAAoBiK,GAApB;AACD,KA3TM;AA6TP;AACAC,IAAAA,kBA9TO,gCA8Tc;AACnB;AACA,UAAIC,SAAS,GAAG,KAAKnK,YAArB;AACA,WAAKA,YAAL,GAAoB,KAAKC,aAAzB;AACA,WAAKA,aAAL,GAAqBkK,SAArB;AACD,KAnUM;AAoUPJ,IAAAA,SApUO,uBAoUK;AACV,UAAMd,KAAK,GAAG,IAAd;;AACA,UAAI7J,WAAW,GAAG6J,KAAK,CAAC7J,WAAxB;AACA,UAAIkI,KAAK,GAAG2B,KAAK,CAAC9I,YAAN,CAAmBmH,KAA/B;AACA,UAAI8C,SAAS,GAAGnB,KAAK,CAAC9I,YAAN,CAAmBiK,SAAnC;;AAEA,UAAIhL,WAAW,IAAI,CAAnB,EAAsB;AACpB6J,QAAAA,KAAK,CAAC5J,YAAN,GAAqB+K,SAArB;AACD,OAFD,MAEO,IAAIhL,WAAW,IAAI,CAAnB,EAAsB;AAC3B6J,QAAAA,KAAK,CAAC5J,YAAN,GAAqBiI,KAArB;AACD,OAFM,MAEA,IAAIlI,WAAW,IAAI,CAAnB,EAAsB;AAC3B6J,QAAAA,KAAK,CAAC5J,YAAN,GAAqBgL,IAAI,CAACC,KAAL,CAAWhD,KAAK,GAAG,GAAR,GAAc,GAAzB,IAAgC,GAArD;AACD,OAFM,MAEA,IAAIlI,WAAW,IAAI,CAAnB,EAAsB;AAC3B6J,QAAAA,KAAK,CAAC5J,YAAN,GAAqBgL,IAAI,CAACC,KAAL,CAAWhD,KAAK,GAAG,GAAR,GAAc,GAAzB,IAAgC,GAArD;AACD;AACF,KAnVM;AAoVP;AACAiD,IAAAA,SArVO,uBAqVK;AAAA;;AACV,UAAIvD,EAAE,GAAG,IAAT;AACA,WAAKS,EAAL,CAAQ;AACNC,QAAAA,GAAG,EAAE,yBADC;AAENC,QAAAA,MAAM,EAAE,MAFF;AAGNC,QAAAA,KAAK,EAAE;AACL7I,UAAAA,SAAS,EAAEiI,EAAE,CAACjI;AADT,SAHD;AAMN8I,QAAAA,OAAO,EAAE,mBAAY,CACpB,CAPK;AAQNb,QAAAA,EAAE,EAAFA;AARM,OAAR,EASGc,IATH,CASQ,UAACC,GAAD,EAAS;AACff,QAAAA,EAAE,CAAC7F,SAAH,GAAe,CAAf;;AACA,YAAI4G,GAAG,CAACC,IAAJ,IAAY,GAAhB,EAAqB;AACnB;AACAhB,UAAAA,EAAE,CAAC7G,YAAH,GAAkB4H,GAAG,CAACpJ,IAAtB,CAFmB,CAInB;;AACA,cAAIoJ,GAAG,CAACP,IAAJ,IAAYO,GAAG,CAACP,IAAJ,CAAS1B,EAAzB,EAA6B,CAE5B,CAFD,MAEO;AAEL,gBAAII,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAR;;AACA,gBAAIJ,CAAC,IAAIA,CAAC,CAACyD,MAAF,GAAW,CAApB,EAAuB;AACrB,kBAAIzD,CAAC,CAACK,IAAF,CAAO,UAAAC,IAAI;AAAA,uBAAIA,IAAI,CAACzH,SAAL,IAAkBiI,EAAE,CAACjI,SAAzB;AAAA,eAAX,CAAJ,EAAoD;AAClDiI,gBAAAA,EAAE,CAAC7G,YAAH,CAAgB2G,KAAhB,GAAwB,CAAxB;AACD,eAHoB,CAIrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAED;AAEF;;AAED,cAAIE,EAAE,CAAC7G,YAAH,CAAgBqK,KAAhB,GAAwB,CAA5B,EAA+B;AAC7BxD,YAAAA,EAAE,CAAC5H,WAAH,GAAiB,CAAjB;AACD,WAFD,MAEO;AACL4H,YAAAA,EAAE,CAAC5H,WAAH,GAAiB,CAAjB;AACD,WA9BkB,CAgCnB;;;AACA,cAAI4H,EAAE,CAAC7G,YAAH,CAAgBsK,QAAhB,IAA4B,CAAhC,EAAmC;AACjCzD,YAAAA,EAAE,CAAC5H,WAAH,GAAiB,CAAjB;AACD,WAnCkB,CAoCnB;AACA;AACA;;;AAEA,UAAA,MAAI,CAAC2K,SAAL;;AAEA/C,UAAAA,EAAE,CAACrC,KAAH,GAAW,EAAX;AACAqC,UAAAA,EAAE,CAAC7G,YAAH,CAAgBiB,QAAhB,GAAyB,CAAzB;AACA4F,UAAAA,EAAE,CAAC7G,YAAH,CAAgBuK,OAAhB,GAAwB,CAAxB;AAEA3C,UAAAA,GAAG,CAACpJ,IAAJ,CAASgM,QAAT,CAAkBC,KAAlB,CAAwB,GAAxB,EAA6BC,OAA7B,CAAqC,UAAArE,IAAI,EAAI;AAC3C,gBAAIA,IAAI,IAAI,EAAZ,EAAgB;AACdQ,cAAAA,EAAE,CAACrC,KAAH,CAASgC,IAAT,CAAcH,IAAd;;AAEA,kBAAGA,IAAI,IAAE,WAAN,IAAqBA,IAAI,IAAE,cAA9B,EAA6C;AAC3CQ,gBAAAA,EAAE,CAAC7G,YAAH,CAAgBiB,QAAhB,GAAyB,CAAzB;AACD;;AACD,kBAAGoF,IAAI,CAACsE,OAAL,CAAa,gBAAb,KAAgC,CAAhC,IAAqCtE,IAAI,IAAE,cAA3C,IAA6DA,IAAI,IAAE,kBAAtE,EAAyF;AACvFQ,gBAAAA,EAAE,CAAC7G,YAAH,CAAgBuK,OAAhB,GAAwB,CAAxB;AACD;AACF;AACF,WAXD;;AAaA,cAAG3C,GAAG,CAACpJ,IAAJ,CAASgB,OAAZ,EAAoB;AAElB,gBAAGoI,GAAG,CAACpJ,IAAJ,CAASgB,OAAT,IAAkB,KAArB,EAA2B;AACzBqH,cAAAA,EAAE,CAACrH,OAAH,GAAW,cAAX;AACD,aAFD,MAEK;AACH,kBAAIoL,EAAE,GAAC,GAAP;AAAA,kBAAWC,EAAE,GAAC,GAAd;AACA,kBAAIC,CAAC,GAAC,EAAN;AAAA,kBAASC,CAAC,GAAC,EAAX;AAAA,kBAAcvL,OAAd;AAAA,kBAAsBwL,EAAtB;;AAEA,kBAAGpD,GAAG,CAACpJ,IAAJ,CAASgB,OAAT,CAAiBmL,OAAjB,CAAyB,IAAzB,KAAgC,CAAnC,EAAqC;AACnCnL,gBAAAA,OAAO,GAACoI,GAAG,CAACpJ,IAAJ,CAASgB,OAAT,CAAiBuJ,OAAjB,CAAyB,IAAzB,EAA8B,EAA9B,CAAR;AACAvJ,gBAAAA,OAAO,GAACA,OAAO,CAACuJ,OAAR,CAAgB,IAAhB,EAAqB,EAArB,CAAR;AACAiC,gBAAAA,EAAE,GAACxL,OAAO,CAACiL,KAAR,CAAc,GAAd,CAAH;;AACA,oBAAGO,EAAE,CAAC,CAAD,CAAL,EAAS;AACPF,kBAAAA,CAAC,GAACZ,IAAI,CAACC,KAAL,CAAWa,EAAE,CAAC,CAAD,CAAF,GAAM,GAAN,GAAU,GAAV,GAAcJ,EAAzB,CAAF;AACD;;AACD,oBAAGI,EAAE,CAAC,CAAD,CAAL,EAAS;AACPD,kBAAAA,CAAC,GAACb,IAAI,CAACC,KAAL,CAAWa,EAAE,CAAC,CAAD,CAAF,GAAM,GAAN,GAAU,GAAV,GAAcJ,EAAzB,CAAF;AACD;AAEF,eAXD,MAWK;AACHpL,gBAAAA,OAAO,GAACoI,GAAG,CAACpJ,IAAJ,CAASgB,OAAT,CAAiBuJ,OAAjB,CAAyB,IAAzB,EAA8B,EAA9B,CAAR;AACAvJ,gBAAAA,OAAO,GAACA,OAAO,CAACuJ,OAAR,CAAgB,IAAhB,EAAqB,EAArB,CAAR;AACAiC,gBAAAA,EAAE,GAACxL,OAAO,CAACiL,KAAR,CAAc,GAAd,CAAH;AACAK,gBAAAA,CAAC,GAACE,EAAE,CAAC,CAAD,CAAJ;AACAD,gBAAAA,CAAC,GAACC,EAAE,CAAC,CAAD,CAAJ;AACD;;AACD,kBAAGF,CAAC,IAAIC,CAAR,EAAW;AACTlE,gBAAAA,EAAE,CAACrH,OAAH,GAAWsL,CAAC,GAAG,GAAJ,GAAUC,CAArB;AAEA,oBAAIE,EAAE,GAAC,EAAP;AAAA,oBAAUC,EAAE,GAAC,EAAb;AAAA,oBAAgBC,EAAE,GAAC,EAAnB;AAAA,oBAAsBC,EAAE,GAAC,EAAzB;;AACA,oBAAGN,CAAH,EAAK;AACHG,kBAAAA,EAAE,GAACf,IAAI,CAACC,KAAL,CAAWW,CAAC,GAAC,GAAF,GAAM,GAAjB,IAAsB,GAAzB;AACAI,kBAAAA,EAAE,GAAChB,IAAI,CAACC,KAAL,CAAWW,CAAC,GAAC,GAAF,GAAM,GAAjB,IAAsB,GAAzB;AACD;;AACD,oBAAGC,CAAH,EAAK;AACHI,kBAAAA,EAAE,GAACjB,IAAI,CAACC,KAAL,CAAWY,CAAC,GAAC,GAAF,GAAM,GAAjB,IAAsB,GAAzB;AACAK,kBAAAA,EAAE,GAAClB,IAAI,CAACC,KAAL,CAAWY,CAAC,GAAC,GAAF,GAAM,GAAjB,IAAsB,GAAzB;AACD;;AAEDlE,gBAAAA,EAAE,CAACpH,UAAH,GAAcwL,EAAE,GAAC,GAAH,GAAOE,EAAP,GAAU,YAAxB;AACAtE,gBAAAA,EAAE,CAACnH,UAAH,GAAcwL,EAAE,GAAC,GAAH,GAAOE,EAAP,GAAU,YAAxB;AACD,eAfD,MAeM;AACJvE,gBAAAA,EAAE,CAACrH,OAAH,GAAWoI,GAAG,CAACpJ,IAAJ,CAASgB,OAApB;AACAqH,gBAAAA,EAAE,CAACpH,UAAH,GAAc,EAAd;AACAoH,gBAAAA,EAAE,CAACnH,UAAH,GAAc,EAAd;AACD;AAEF;AAEF,WAjDD,MAiDK;AACHmH,YAAAA,EAAE,CAACrH,OAAH,GAAW,EAAX;AACAqH,YAAAA,EAAE,CAACpH,UAAH,GAAc,EAAd;AACAoH,YAAAA,EAAE,CAACnH,UAAH,GAAc,EAAd;AACD;;AAGDmH,UAAAA,EAAE,CAACpC,UAAH,GAAgB,EAAhB;AACAmD,UAAAA,GAAG,CAACpJ,IAAJ,CAAS6M,kBAAT,CAA4BZ,KAA5B,CAAkC,GAAlC,EAAuCC,OAAvC,CAA+C,UAAArE,IAAI,EAAI;AACrD,gBAAIA,IAAI,IAAI,EAAZ,EACEQ,EAAE,CAACpC,UAAH,CAAc+B,IAAd,CAAmBH,IAAnB;AACH,WAHD;AAKAQ,UAAAA,EAAE,CAACnC,IAAH,GAAU,EAAV;AACAkD,UAAAA,GAAG,CAACpJ,IAAJ,CAAS8M,KAAT,CAAeb,KAAf,CAAqB,GAArB,EAA0BC,OAA1B,CAAkC,UAAArE,IAAI,EAAI;AACxC,gBAAIA,IAAI,IAAI,EAAZ,EACEQ,EAAE,CAACnC,IAAH,CAAQ8B,IAAR,CAAaH,IAAb;AACH,WAHD;AAIAuB,UAAAA,GAAG,CAACpJ,IAAJ,CAAS+M,SAAT,CAAmBd,KAAnB,CAAyB,GAAzB,EAA8BC,OAA9B,CAAsC,UAAArE,IAAI,EAAI;AAC5C,gBAAIA,IAAI,IAAI,EAAZ,EACEQ,EAAE,CAACnC,IAAH,CAAQ8B,IAAR,CAAaH,IAAb;AACH,WAHD;AAIAuB,UAAAA,GAAG,CAACpJ,IAAJ,CAASgN,QAAT,CAAkBf,KAAlB,CAAwB,GAAxB,EAA6BC,OAA7B,CAAqC,UAAArE,IAAI,EAAI;AAC3C,gBAAIA,IAAI,IAAI,EAAZ,EACEQ,EAAE,CAACnC,IAAH,CAAQ8B,IAAR,CAAaH,IAAb;AACH,WAHD;AAIAuB,UAAAA,GAAG,CAACpJ,IAAJ,CAASiN,SAAT,CAAmBhB,KAAnB,CAAyB,GAAzB,EAA8BC,OAA9B,CAAsC,UAAArE,IAAI,EAAI;AAC5C,gBAAIA,IAAI,IAAI,EAAZ,EACEQ,EAAE,CAACnC,IAAH,CAAQ8B,IAAR,CAAaH,IAAb;AACH,WAHD;AAIAuB,UAAAA,GAAG,CAACpJ,IAAJ,CAASkN,UAAT,CAAoBjB,KAApB,CAA0B,GAA1B,EAA+BC,OAA/B,CAAuC,UAAArE,IAAI,EAAI;AAC7C,gBAAIA,IAAI,IAAI,EAAZ,EACEQ,EAAE,CAACnC,IAAH,CAAQ8B,IAAR,CAAaH,IAAb;AACH,WAHD,EA1ImB,CAgJnB;;AACAQ,UAAAA,EAAE,CAAC5F,QAAH,GAAc2G,GAAG,CAACpJ,IAAJ,CAASyC,QAAvB,CAjJmB,CAkJnB;;AACA4F,UAAAA,EAAE,CAAChH,YAAH,GAAkBgH,EAAE,CAAC8E,UAAH,GAAgB/D,GAAG,CAACpJ,IAAJ,CAASoN,KAA3C,CAnJmB,CAqJnB;;AACA/E,UAAAA,EAAE,CAACgF,OAAH,CAAWhF,EAAE,CAAChH,YAAd;AACAgH,UAAAA,EAAE,CAAC/F,QAAH,CAAY,CAAZ,EAAewB,GAAf,GAAqBuE,EAAE,CAAChH,YAAxB;AACAgH,UAAAA,EAAE,CAAC/F,QAAH,CAAY,CAAZ,EAAegL,MAAf,CAAsBxJ,GAAtB,GAA4BuE,EAAE,CAAChH,YAA/B,CAxJmB,CA0JnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,cAAI+H,GAAG,CAACpJ,IAAJ,CAASuN,UAAT,CAAoBvC,MAApB,IAA8B,CAAlC,EAAqC;AACnC3C,YAAAA,EAAE,CAACjH,iBAAH,GAAuBgI,GAAG,CAACpJ,IAAJ,CAASuN,UAAhC;;AAEA,iBAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGnF,EAAE,CAACjH,iBAAH,CAAqB4J,MAAjD,EAAyDwC,KAAK,EAA9D,EAAkE;AAChEnF,cAAAA,EAAE,CAACjH,iBAAH,CAAqBoM,KAArB,EAA4BlC,GAA5B,GACEjD,EAAE,CAAC8E,UAAH,GAAgB9E,EAAE,CAACjH,iBAAH,CAAqBoM,KAArB,EAA4BlC,GAD9C;AAED;;AACD,iBAAK,IAAIkC,MAAK,GAAG,CAAjB,EAAoBA,MAAK,GAAG,EAA5B,EAAgCA,MAAK,EAArC,EAAyC;AACvCnF,cAAAA,EAAE,CAACjH,iBAAH,CAAqB4G,IAArB,CAA0BK,EAAE,CAACjH,iBAAH,CAAqB,CAArB,CAA1B;AACD;AACF;;AACD,UAAA,MAAI,CAACb,EAAL,GAAU,IAAV;AACD,SApND,MAoNO;AACL;AACA,UAAA,MAAI,CAACwG,QAAL,CAAcqC,GAAG,CAACE,IAAlB;AACD;AACF,OAnOD;AAoOD,KA3jBM;AA6jBP;AACA;AACMmE,IAAAA,MA/jBC,oBA+jBQ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEP,MAAI,CAACC,OAAL,EAFO;;AAAA;AAGb,gBAAA,MAAI,CAACC,OAAL;;AAHa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAId,KAnkBM;AAokBPD,IAAAA,OApkBO,qBAokBG;AACR;AACA,UAAIpD,KAAK,GAAG,IAAZ,CAFQ,CAGR;;;AACA/K,MAAAA,KAAK,CAAC;AACJwJ,QAAAA,GAAG,EAAE,UADD,CACa;;AADb,OAAD,CAAL,CAEGI,IAFH,CAEQ,UAACC,GAAD,EAAS;AACfkB,QAAAA,KAAK,CAAChI,QAAN,GAAiB8G,GAAG,CAACpJ,IAArB;AACD,OAJD,EAJQ,CAUR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KA5lBM;AA6lBP;AACA4N,IAAAA,QA9lBO,sBA8lBI;AAAA;;AACT,WAAK,IAAIC,GAAT,IAAgB,KAAK3L,OAArB,EAA8B;AAC5B;AACA,aAAKI,QAAL,CAAcwL,GAAd,CAAkB,UAACjG,IAAD,EAAU;AAC1B,cAAIyF,MAAJ;;AACA,cAAIzF,IAAI,CAACyF,MAAT,EAAiB;AACfA,YAAAA,MAAM,GAAGzF,IAAI,CAACyF,MAAL,CAAYS,KAArB;AACD;;AACD,cAAIT,MAAM,KAAK,MAAI,CAACpL,OAAL,CAAa2L,GAAb,EAAkBE,KAAjC,EAAwC;AACtC,gBAAIC,IAAI,GAAGC,MAAM,CAACC,MAAP,CAAc,MAAI,CAAChM,OAAL,CAAa2L,GAAb,CAAd,EAAiChG,IAAI,CAACyF,MAAtC,CAAX;AACAzF,YAAAA,IAAI,CAACyF,MAAL,GAAcU,IAAd,CAFsC,CAGtC;;AACA,YAAA,MAAI,CAAC5L,aAAL,CAAmB4F,IAAnB,CAAwBH,IAAxB;AACD;AACF,SAXD;AAYD;AACF,KA9mBM;AA+mBP;AACAsG,IAAAA,QAhnBO,sBAgnBI;AAAA;;AACT,WAAKP,QAAL;;AACA,WAAK,IAAIC,GAAT,IAAgB,KAAKvL,QAArB,EAA+B;AAC7B;AACA,aAAKF,aAAL,CAAmB0L,GAAnB,CAAuB,UAACjG,IAAD,EAAU;AAC/B,cAAI,MAAI,CAACvF,QAAL,CAAcuL,GAAd,EAAmBE,KAAnB,IAA4BlG,IAAI,CAACkG,KAArC,EAA4C;AAC1C,YAAA,MAAI,CAACzL,QAAL,CAAcuL,GAAd,IAAqBhG,IAArB;AACD;AACF,SAJD;AAKD;AACF,KA1nBM;AA2nBP;AACA8F,IAAAA,OA5nBO,qBA4nBG;AACR,WAAKQ,QAAL;AACD,KA9nBM;AA+nBP;AACA;AACAC,IAAAA,MAjoBO,kBAioBAC,MAjoBA,EAioBQ;AACb,UAAI/D,KAAK,GAAG,IAAZ;;AAEAA,MAAAA,KAAK,CAAC9H,SAAN,GAAkB,CAAlB;AACA4E,MAAAA,OAAO,CAACC,GAAR,CAAYgH,MAAZ,EAJa,CAMb;;AACA/D,MAAAA,KAAK,CAAClG,SAAN,GAAkB,IAAIvE,MAAM,CAACyO,KAAX,CAChBhE,KAAK,CAAC5G,SAAN,GAAkB,CADF,EAEhB4G,KAAK,CAAC3G,UAAN,GAAmB,CAFH,CAAlB,CAPa,CAUV;;AACH2G,MAAAA,KAAK,CAAC/D,KAAN,GAAcgI,QAAQ,CAACjE,KAAK,CAACkE,QAAN,GAAiB,GAAlB,CAAtB;;AACAlE,MAAAA,KAAK,CAACtG,QAAN,CAAeyK,WAAf,CAA2BnE,KAAK,CAAClG,SAAjC,EAA4CkG,KAAK,CAACkE,QAAlD;;AACA,UAAI/K,GAAG,GAAG6G,KAAK,CAACtG,QAAN,CAAe0K,UAAf,EAAV,CAba,CAcb;;;AACA,UAAIpE,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AACxBiB,QAAAA,GAAG,CAACyI,OAAJ,CAAY,UAAC9C,GAAD,EAAS;AACnB,cACEA,GAAG,CAACuF,IAAJ,IAAY,CAACrE,KAAK,CAAC5G,SAAN,GAAkB0F,GAAG,CAACwF,KAAJ,GAAYxF,GAAG,CAACyF,MAAnC,IAA6C,CAAzD,IACAzF,GAAG,CAACuF,IAAJ,GAAW,CAACrE,KAAK,CAAC5G,SAAN,GAAkB0F,GAAG,CAACwF,KAAJ,GAAYxF,GAAG,CAACyF,MAAnC,IAA6C,CAF1D,EAGE;AACAvE,YAAAA,KAAK,CAACnG,MAAN,GAAeiF,GAAf;AACD;AACF,SAPD;AAQD,OATD,MASO,IAAIkB,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AAC/BiB,QAAAA,GAAG,CAACyI,OAAJ,CAAY,UAAC9C,GAAD,EAAS;AACnB,cACEA,GAAG,CAAC0F,GAAJ,IAAW,CAACxE,KAAK,CAAC3G,UAAN,GAAmByF,GAAG,CAAC2F,MAAJ,GAAa3F,GAAG,CAAC4F,MAArC,IAA+C,CAA1D,IACA5F,GAAG,CAAC0F,GAAJ,GAAU,CAACxE,KAAK,CAAC3G,UAAN,GAAmByF,GAAG,CAAC2F,MAAJ,GAAa3F,GAAG,CAAC4F,MAArC,IAA+C,CAF3D,EAGE;AACA1E,YAAAA,KAAK,CAACnG,MAAN,GAAeiF,GAAf;AACD;AACF,SAPD;AAQD,OATM,MASA,IAAIkB,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AAC/B8H,QAAAA,KAAK,CAACnG,MAAN,GAAeV,GAAG,CAAC,CAAD,CAAlB;AACD,OAFM,MAEA,IAAI6G,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AAC/BiB,QAAAA,GAAG,CAACmE,IAAJ,CAAS,UAACwB,GAAD,EAAS;AAChB,cACEA,GAAG,CAACuF,IAAJ,IAAY,CAACrE,KAAK,CAAC5G,SAAN,GAAkB0F,GAAG,CAACwF,KAAJ,GAAYxF,GAAG,CAACyF,MAAnC,IAA6C,CAAzD,IACAzF,GAAG,CAACuF,IAAJ,GAAW,CAACrE,KAAK,CAAC5G,SAAN,GAAkB0F,GAAG,CAACwF,KAAJ,GAAYxF,GAAG,CAACyF,MAAnC,IAA6C,CADxD,IAEAzF,GAAG,CAAC0F,GAAJ,IAAW,CAACxE,KAAK,CAAC3G,UAAN,GAAmByF,GAAG,CAAC2F,MAAJ,GAAa3F,GAAG,CAAC4F,MAArC,IAA+C,CAF1D,IAGA5F,GAAG,CAAC0F,GAAJ,GAAU,CAACxE,KAAK,CAAC3G,UAAN,GAAmByF,GAAG,CAAC2F,MAAJ,GAAa3F,GAAG,CAAC4F,MAArC,IAA+C,CAJ3D,EAKE;AACA1E,YAAAA,KAAK,CAACnG,MAAN,GAAeiF,GAAf;AACA,mBAAO,KAAP;AACD;;AACD,iBAAO,IAAP;AACD,SAXD;AAYD;;AACD3F,MAAAA,GAAG,CAACyI,OAAJ,CAAY,UAAC9C,GAAD,EAAS;AACnB,YAAIkB,KAAK,CAAC9H,SAAN,IAAmB,CAAnB,IAAwB8H,KAAK,CAAC9H,SAAN,IAAmB,CAA/C,EAAkD;AAChD4G,UAAAA,GAAG,CAACuF,IAAJ,GACE,CAACvF,GAAG,CAACuF,IAAJ,GAAWrE,KAAK,CAAC5G,SAAN,GAAkB,CAA9B,IAAmC2K,MAAnC,GAA4C/D,KAAK,CAAC5G,SAAN,GAAkB,CADhE;AAED;;AACD,YAAI4G,KAAK,CAAC9H,SAAN,IAAmB,CAAnB,IAAwB8H,KAAK,CAAC9H,SAAN,IAAmB,CAA/C,EAAkD;AAChD4G,UAAAA,GAAG,CAAC0F,GAAJ,GACE,CAAC1F,GAAG,CAAC0F,GAAJ,GAAUxE,KAAK,CAAC5G,SAAN,GAAkB,CAA7B,IAAkC2K,MAAlC,GAA2C/D,KAAK,CAAC5G,SAAN,GAAkB,CAD/D;AAED;;AACD4G,QAAAA,KAAK,CAACtG,QAAN,CAAeiL,MAAf,CAAsB7F,GAAtB;;AACAkB,QAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmB9F,GAAnB;AACD,OAXD,EAjDa,CA6Db;;AACA,UAAIkB,KAAK,CAAC9H,SAAN,IAAmB,CAAnB,IAAwB8H,KAAK,CAAC9H,SAAN,IAAmB,CAA/C,EAAkD;AAChD,YACE8H,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QAFpD,EAGE;AACAlE,UAAAA,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACErE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QADpD;AAED,SAND,MAMO,IACLlE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QAF7C,EAGL;AACAlE,UAAAA,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACErE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QADpD;AAED;AACF,OA5EY,CA6Eb;;;AACA,UAAIlE,KAAK,CAAC9H,SAAN,IAAmB,CAAnB,IAAwB8H,KAAK,CAAC9H,SAAN,IAAmB,CAA/C,EAAkD;AAChD,YACE8H,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QAFpD,EAGE;AACAlE,UAAAA,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACExE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QADpD;AAED,SAND,MAMO,IACLlE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QAF7C,EAGL;AACAlE,UAAAA,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACExE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QADpD;AAED;AACF;;AACDlE,MAAAA,KAAK,CAACtG,QAAN,CAAeiL,MAAf,CAAsB3E,KAAK,CAACnG,MAA5B;;AACAmG,MAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmB5E,KAAK,CAACnG,MAAzB;;AACA,UAAIY,OAAO,GAAG,CAAd;AAAA,UACEC,QAAQ,GAAG,CADb;AAAA,UAEEC,MAAM,GAAG,CAFX;AAAA,UAGEC,UAAU,GAAG,CAHf;;AAIAoF,MAAAA,KAAK,CAACjG,UAAN,CAAiB6H,OAAjB,CAAyB,UAAC9C,GAAD,EAAS;AAChC,YAAIA,GAAG,CAACuF,IAAJ,GAAWrE,KAAK,CAACnG,MAAN,CAAawK,IAAxB,IAAgCvF,GAAG,CAAC0F,GAAJ,IAAWxE,KAAK,CAACnG,MAAN,CAAa2K,GAA5D,EAAiE;AAC/D/J,UAAAA,OAAO;AACR,SAFD,MAEO,IACLqE,GAAG,CAACuF,IAAJ,GAAWrE,KAAK,CAACnG,MAAN,CAAawK,IAAxB,IACAvF,GAAG,CAAC0F,GAAJ,IAAWxE,KAAK,CAACnG,MAAN,CAAa2K,GAFnB,EAGL;AACA9J,UAAAA,QAAQ;AACT;;AACD,YAAIoE,GAAG,CAAC0F,GAAJ,GAAUxE,KAAK,CAACnG,MAAN,CAAa2K,GAAvB,IAA8B1F,GAAG,CAACuF,IAAJ,IAAYrE,KAAK,CAACnG,MAAN,CAAawK,IAA3D,EAAiE;AAC/D1J,UAAAA,MAAM;AACP,SAFD,MAEO,IACLmE,GAAG,CAAC0F,GAAJ,GAAUxE,KAAK,CAACnG,MAAN,CAAa2K,GAAvB,IACA1F,GAAG,CAACuF,IAAJ,IAAYrE,KAAK,CAACnG,MAAN,CAAawK,IAFpB,EAGL;AACAzJ,UAAAA,UAAU;AACX;AACF,OAjBD;;AAkBAoF,MAAAA,KAAK,CAACvF,OAAN,GAAgB2G,IAAI,CAACyD,GAAL,CAAS7E,KAAK,CAACvF,OAAf,EAAwBA,OAAxB,CAAhB;AACAuF,MAAAA,KAAK,CAACtF,QAAN,GAAiB0G,IAAI,CAACyD,GAAL,CAAS7E,KAAK,CAACtF,QAAf,EAAyBA,QAAzB,CAAjB;AACAsF,MAAAA,KAAK,CAACrF,MAAN,GAAeyG,IAAI,CAACyD,GAAL,CAAS7E,KAAK,CAACrF,MAAf,EAAuBA,MAAvB,CAAf;AACAqF,MAAAA,KAAK,CAACpF,UAAN,GAAmBwG,IAAI,CAACyD,GAAL,CAAS7E,KAAK,CAACpF,UAAf,EAA2BA,UAA3B,CAAnB,CAxHa,CAyHb;;AACA,UAAMkK,KAAK,GAAG1I,QAAQ,CAACmE,aAAT,CAAuB,KAAvB,CAAd;AACAuE,MAAAA,KAAK,CAACC,WAAN,GAAoB,WAApB;AACAD,MAAAA,KAAK,CAAC9D,GAAN,GAAYhB,KAAK,CAACxG,GAAN,CAAUwH,GAAtB,CA5Ha,CA6Hb;;AAEA,UAAIgE,YAAY,GAAG5D,IAAI,CAAC6D,IAAL,CACjB,CAAC,CAACjF,KAAK,CAACnG,MAAN,CAAawK,IAAb,GAAoBrE,KAAK,CAAC5G,SAAN,GAAkB,CAAvC,IAA4C4G,KAAK,CAACkE,QAAlD,GACClE,KAAK,CAAC5G,SAAN,GAAkB,CADnB,GAEE4G,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAAlD,GAA8D,CAFhE,KAGGlE,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAHpD,CADiB,CAAnB;AAMA,UAAIgB,aAAa,GAAG9D,IAAI,CAAC6D,IAAL,CAClB,CAAC,CAACjF,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACnG,MAAN,CAAawK,IAApC,IAA4CrE,KAAK,CAACkE,QAAlD,GACClE,KAAK,CAAC5G,SAAN,GAAkB,CADnB,GAEE4G,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAAlD,GAA8D,CAFhE,KAGGlE,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAHpD,CADkB,CAApB;AAMA,UAAIiB,YAAY,GAAG/D,IAAI,CAAC6D,IAAL,CACjB,CAAC,CAACjF,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GAAmBxE,KAAK,CAAC5G,SAAN,GAAkB,CAAtC,IAA2C4G,KAAK,CAACkE,QAAjD,GACClE,KAAK,CAAC5G,SAAN,GAAkB,CADnB,GAEE4G,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAAnD,GAA+D,CAFjE,KAGGlE,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAHrD,CADiB,CAAnB;AAMA,UAAIkB,eAAe,GAAGhE,IAAI,CAAC6D,IAAL,CACpB,CAAC,CAACjF,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACnG,MAAN,CAAa2K,GAApC,IAA2CxE,KAAK,CAACkE,QAAjD,GACClE,KAAK,CAAC5G,SAAN,GAAkB,CADnB,GAEE4G,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAAnD,GAA+D,CAFjE,KAGGlE,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAHrD,CADoB,CAAtB,CAjJa,CAuJb;;AACA,UAAIlE,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AACxB;AACA,YAAI8M,YAAY,GAAGhF,KAAK,CAACvF,OAAzB,EAAkC;AAChC,cAAI4K,CAAC,GAAGrF,KAAK,CAACvF,OAAN,GAAgB,CAAxB;AACAuF,UAAAA,KAAK,CAACvF,OAAN,GAAgBuK,YAAhB;;AACA,eAAK,IAAIM,EAAE,GAAGD,CAAd,EAAiBC,EAAE,IAAIN,YAAvB,EAAqCM,EAAE,EAAvC,EAA2C;AACzCtF,YAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACErE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GAAoBrE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CgB,EADjE;AAEAtF,YAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GAAkBxE,KAAK,CAACnG,MAAN,CAAa2K,GAA/B;AACA,gBAAIe,IAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,cAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,cAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,cAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,cAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,cAAAA,OAAO,EAAE,QAL4B;AAMrCC,cAAAA,OAAO,EAAE;AAN4B,aAA5B,CAAX;;AAQA1F,YAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,IAAnB;;AACAvF,YAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,IAAtB;;AACAvF,YAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACD;AACF;;AACD,YAAImL,aAAa,GAAGlF,KAAK,CAACtF,QAA1B,EAAoC;AAClC,cAAIiL,EAAE,GAAG3F,KAAK,CAACtF,QAAN,GAAiB,CAA1B;AACAsF,UAAAA,KAAK,CAACtF,QAAN,GAAiBwK,aAAjB;;AACA,eAAK,IAAII,GAAE,GAAGK,EAAd,EAAkBL,GAAE,IAAIJ,aAAxB,EAAuCI,GAAE,EAAzC,EAA6C;AAC3CtF,YAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACErE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GAAoBrE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CgB,GADjE;AAEAtF,YAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GAAkBxE,KAAK,CAACnG,MAAN,CAAa2K,GAA/B;;AACA,gBAAIe,KAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,cAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,cAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,cAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,cAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,cAAAA,OAAO,EAAE,QAL4B;AAMrCC,cAAAA,OAAO,EAAE;AAN4B,aAA5B,CAAX;;AAQA1F,YAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,KAAnB;;AACAvF,YAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,KAAtB;;AACAvF,YAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACD;AACF;AACF,OA1CD,MA0CO,IAAIiG,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AAC/B,YAAIiN,YAAY,GAAGnF,KAAK,CAACrF,MAAzB,EAAiC;AAC/B,cAAI0K,EAAC,GAAGrF,KAAK,CAACrF,MAAN,GAAe,CAAvB;;AACAqF,UAAAA,KAAK,CAACrF,MAAN,GAAewK,YAAf,CAF+B,CAG/B;;AACA,eAAK,IAAIG,IAAE,GAAGD,EAAd,EAAiBC,IAAE,IAAIH,YAAvB,EAAqCG,IAAE,EAAvC,EAA2C;AACzCtF,YAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GAAmBrE,KAAK,CAACnG,MAAN,CAAawK,IAAhC;AACArE,YAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACExE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GAAmBxE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4Ca,IADjE;;AAEA,gBAAIC,MAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,cAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,cAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,cAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,cAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,cAAAA,OAAO,EAAE,QAL4B;AAMrCC,cAAAA,OAAO,EAAE;AAN4B,aAA5B,CAAX;;AAQA1F,YAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,MAAnB;;AACAvF,YAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,MAAtB;;AACAvF,YAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACD;AACF;;AACD,YAAIqL,eAAe,GAAGpF,KAAK,CAACpF,UAA5B,EAAwC;AACtC,cAAI+K,GAAE,GAAG3F,KAAK,CAACpF,UAAN,GAAmB,CAA5B;;AACAoF,UAAAA,KAAK,CAACpF,UAAN,GAAmBwK,eAAnB;;AACA,eAAK,IAAIE,IAAE,GAAGK,GAAd,EAAkBL,IAAE,IAAIF,eAAxB,EAAyCE,IAAE,EAA3C,EAA+C;AAC7CtF,YAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GAAmBrE,KAAK,CAACnG,MAAN,CAAawK,IAAhC;AACArE,YAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACExE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GAAmBxE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4Ca,IADjE;;AAEA,gBAAIC,MAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,cAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,cAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,cAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,cAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,cAAAA,OAAO,EAAE,QAL4B;AAMrCC,cAAAA,OAAO,EAAE;AAN4B,aAA5B,CAAX;;AAQA1F,YAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,MAAnB;;AACAvF,YAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,MAAtB;;AACAvF,YAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACD;AACF;AACF,OA1CM,MA0CA,IAAIiG,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AAC/B;AACA,YAAI8M,YAAY,GAAGhF,KAAK,CAACvF,OAAzB,EAAkC;AAChC,cAAI4K,GAAC,GAAGrF,KAAK,CAACvF,OAAN,GAAgB,CAAxB;;AACAuF,UAAAA,KAAK,CAACvF,OAAN,GAAgBuK,YAAhB;;AACA,eAAK,IAAIM,IAAE,GAAGD,GAAd,EAAiBC,IAAE,IAAIN,YAAvB,EAAqCM,IAAE,EAAvC,EAA2C;AACzC,iBAAK,IAAIM,GAAG,GAAG5F,KAAK,CAACpF,UAAN,GAAmB,CAAC,CAAnC,EAAsCgL,GAAG,IAAI5F,KAAK,CAACrF,MAAnD,EAA2DiL,GAAG,EAA9D,EAAkE;AAChE5F,cAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACErE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CgB,IAF7C;AAGAtF,cAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACExE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4CmB,GAF9C;;AAGA,kBAAIL,MAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,gBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,gBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,gBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,gBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,gBAAAA,OAAO,EAAE,QAL4B;AAMrCC,gBAAAA,OAAO,EAAE;AAN4B,eAA5B,CAAX;;AAQA1F,cAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,MAAnB;;AACAvF,cAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,MAAtB;;AACAvF,cAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACD;AACF;AACF;;AACD,YAAImL,aAAa,GAAGlF,KAAK,CAACtF,QAA1B,EAAoC;AAClC;AACA,cAAIiL,GAAE,GAAG3F,KAAK,CAACtF,QAAN,GAAiB,CAA1B;;AACAsF,UAAAA,KAAK,CAACtF,QAAN,GAAiBwK,aAAjB;;AACA,eAAK,IAAII,IAAE,GAAGK,GAAd,EAAkBL,IAAE,IAAIJ,aAAxB,EAAuCI,IAAE,EAAzC,EAA6C;AAC3C,iBAAK,IAAIM,IAAG,GAAG5F,KAAK,CAACpF,UAAN,GAAmB,CAAC,CAAnC,EAAsCgL,IAAG,IAAI5F,KAAK,CAACrF,MAAnD,EAA2DiL,IAAG,EAA9D,EAAkE;AAChE5F,cAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACErE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CgB,IAF7C;AAGAtF,cAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACExE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4CmB,IAF9C;;AAGA,kBAAIL,MAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,gBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,gBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,gBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,gBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,gBAAAA,OAAO,EAAE,QAL4B;AAMrCC,gBAAAA,OAAO,EAAE;AAN4B,eAA5B,CAAX;;AAQA1F,cAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,MAAnB;;AACAvF,cAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,MAAtB;;AACAvF,cAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACD;AACF;AACF;;AACD,YAAIoL,YAAY,GAAGnF,KAAK,CAACrF,MAAzB,EAAiC;AAC/B,cAAI0K,GAAC,GAAGrF,KAAK,CAACrF,MAAN,GAAe,CAAvB;;AACAqF,UAAAA,KAAK,CAACrF,MAAN,GAAewK,YAAf;;AACA,eAAK,IAAIG,IAAE,GAAGD,GAAd,EAAiBC,IAAE,IAAIH,YAAvB,EAAqCG,IAAE,EAAvC,EAA2C;AACzC,iBAAK,IAAIM,IAAG,GAAG5F,KAAK,CAACtF,QAAN,GAAiB,CAAC,CAAjC,EAAoCkL,IAAG,IAAI5F,KAAK,CAACvF,OAAjD,EAA0DmL,IAAG,EAA7D,EAAiE;AAC/D5F,cAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACErE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CsB,IAF7C;AAGA5F,cAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACExE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4Ca,IAF9C;;AAGA,kBAAIC,MAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,gBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,gBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,gBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,gBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,gBAAAA,OAAO,EAAE,QAL4B;AAMrCC,gBAAAA,OAAO,EAAE;AAN4B,eAA5B,CAAX;;AAQA1F,cAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,MAAnB;;AACAvF,cAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,MAAtB;;AACAvF,cAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACD;AACF;AACF;;AACD,YAAIqL,eAAe,GAAGpF,KAAK,CAACpF,UAA5B,EAAwC;AACtC,cAAI+K,GAAE,GAAG3F,KAAK,CAACpF,UAAN,GAAmB,CAA5B;;AACAoF,UAAAA,KAAK,CAACpF,UAAN,GAAmBwK,eAAnB;;AACA,eAAK,IAAIE,IAAE,GAAGK,GAAd,EAAkBL,IAAE,IAAIF,eAAxB,EAAyCE,IAAE,EAA3C,EAA+C;AAC7C,iBAAK,IAAIM,KAAG,GAAG5F,KAAK,CAACtF,QAAN,GAAiB,CAAC,CAAjC,EAAoCkL,KAAG,IAAI5F,KAAK,CAACvF,OAAjD,EAA0DmL,KAAG,EAA7D,EAAiE;AAC/D5F,cAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACErE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CsB,KAF7C;AAIA5F,cAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACExE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4Ca,IAF9C;;AAIA,kBAAIC,MAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,gBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,gBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,gBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,gBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,gBAAAA,OAAO,EAAE,QAL4B;AAMrCC,gBAAAA,OAAO,EAAE;AAN4B,eAA5B,CAAX;;AAQA1F,cAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,MAAnB;;AACAvF,cAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,MAAtB;;AACAvF,cAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACD;AACF;AACF;AACF;;AACDiG,MAAAA,KAAK,CAAC6F,aAAN;AACD,KAx9BM;AAy9BP;AACAC,IAAAA,OA19BO,mBA09BCjJ,EA19BD,EA09BK;AAAA;;AACV,UAAImD,KAAK,GAAG,IAAZ;;AACAA,MAAAA,KAAK,CAAC5H,OAAN,GAAgByE,EAAhB;AACA,WAAK7E,QAAL,CAAc+N,SAAd,CAAwB,UAACC,CAAD,EAAO;AAC7B;AACA,YAAIA,CAAC,CAACnJ,EAAF,KAASA,EAAb,EAAiB;AACf,cAAImJ,CAAC,CAACnJ,EAAF,KAAS,CAAT,IAAcmJ,CAAC,CAACnJ,EAAF,KAAS,KAA3B,EAAkC;AAChC;AACAmD,YAAAA,KAAK,CAAC3E,cAAN,GAAuB,KAAvB;AACA,YAAA,OAAI,CAACD,YAAL,GAAoB,IAApB;AACA,YAAA,OAAI,CAACE,YAAL,GAAoB,KAApB;AACA,YAAA,OAAI,CAACC,YAAL,GAAoB,KAApB,CALgC,CAMhC;AAEA;AAEA;;AAEA,gBAAI0K,KAAK,GAAG,CAAZ;;AACA,gBAAIjG,KAAK,CAACxH,UAAN,GAAmBwH,KAAK,CAACvH,WAA7B,EAA0C;AACxCwN,cAAAA,KAAK,GAAGjG,KAAK,CAACtH,cAAN,GAAuBsH,KAAK,CAACxH,UAA7B,GAA0CwH,KAAK,CAACzG,SAAxD;AACD,aAFD,MAEO;AACL0M,cAAAA,KAAK,GAAGjG,KAAK,CAAC/G,cAAN,GAAuB+G,KAAK,CAACvH,WAA7B,GAA2CuH,KAAK,CAACzG,SAAzD;AACD;;AAED,gBAAIyM,CAAC,CAACnJ,EAAF,KAAS,CAAb,EAAgB;AACd,cAAA,OAAI,CAACrG,QAAL,GAAgB,GAAhB;AACA,kBAAI0P,IAAI,GAAG,IAAI3Q,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC2M,gBAAAA,WAAW,EAAE,KADwB;AAErC5B,gBAAAA,MAAM,EAAE0B,KAF6B;AAGrCvB,gBAAAA,MAAM,EAAEuB,KAH6B;AAIrCG,gBAAAA,KAAK,EAAE,CAJ8B;AAKrC;AACAX,gBAAAA,OAAO,EAAE,QAN4B;AAOrCC,gBAAAA,OAAO,EAAE,QAP4B;AAQrClB,gBAAAA,GAAG,EAAExE,KAAK,CAAC5G,SAAN,GAAkB,CARc;AASrCiL,gBAAAA,IAAI,EAAErE,KAAK,CAAC3G,UAAN,GAAmB;AATY,eAA5B,CAAX;;AAYA,kBAAIF,GAAG,GAAG6G,KAAK,CAACvG,UAAN,CAAiB2K,UAAjB,EAAV;;AACAjL,cAAAA,GAAG,CAACyI,OAAJ,CAAY,UAAC9C,GAAD,EAAS;AACnBkB,gBAAAA,KAAK,CAACvG,UAAN,CAAiBkL,MAAjB,CAAwB7F,GAAxB;AACD,eAFD;;AAIAkB,cAAAA,KAAK,CAACvG,UAAN,CAAiBmL,GAAjB,CAAqBsB,IAArB;AACD,aApBD,MAoBO;AACL,cAAA,OAAI,CAAC1P,QAAL,GAAgB,GAAhB;AACAjB,cAAAA,MAAM,CAACiQ,KAAP,CAAaa,OAAb,CAAqBrG,KAAK,CAAChI,QAAN,CAAe,CAAf,EAAkBwB,GAAvC,EAA4C,UAAU8M,IAAV,EAAgB;AAC1DA,gBAAAA,IAAI,CAACH,WAAL,GAAmB,KAAnB;AACAG,gBAAAA,IAAI,CAAC/B,MAAL,GAAc0B,KAAK,GAAG,CAAtB;AACAK,gBAAAA,IAAI,CAAC5B,MAAL,GAAcuB,KAAK,GAAG,CAAtB;AACAK,gBAAAA,IAAI,CAACF,KAAL,GAAa,CAAb,CAJ0D,CAK1D;;AACAE,gBAAAA,IAAI,CAACb,OAAL,GAAe,QAAf;AACAa,gBAAAA,IAAI,CAACZ,OAAL,GAAe,QAAf;AACAY,gBAAAA,IAAI,CAAC9B,GAAL,GAAWxE,KAAK,CAAC5G,SAAN,GAAkB,CAA7B;AACAkN,gBAAAA,IAAI,CAACjC,IAAL,GAAYrE,KAAK,CAAC3G,UAAN,GAAmB,CAA/B;;AAEA,oBAAIF,GAAG,GAAG6G,KAAK,CAACvG,UAAN,CAAiB2K,UAAjB,EAAV;;AACAjL,gBAAAA,GAAG,CAACyI,OAAJ,CAAY,UAAC9C,GAAD,EAAS;AACnBkB,kBAAAA,KAAK,CAACvG,UAAN,CAAiBkL,MAAjB,CAAwB7F,GAAxB;AACD,iBAFD;;AAIAkB,gBAAAA,KAAK,CAACvG,UAAN,CAAiBmL,GAAjB,CAAqB0B,IAArB;AACD,eAjBD;AAkBD;;AAEDtG,YAAAA,KAAK,CAAC/I,MAAN,GAAe,GAAf;;AACA+I,YAAAA,KAAK,CAACuG,aAAN,CAAoBvG,KAAK,CAAC/I,MAA1B;AAED,WAhED,MAgEO;AACL,YAAA,OAAI,CAACT,QAAL,GAAgB,GAAhB;AACAwJ,YAAAA,KAAK,CAAC3E,cAAN,GAAuB,IAAvB;AACA2E,YAAAA,KAAK,CAAC5E,YAAN,GAAqB,KAArB;AACA4E,YAAAA,KAAK,CAAC1E,YAAN,GAAqB,IAArB;AACA0E,YAAAA,KAAK,CAACzE,YAAN,GAAqB,KAArB,CALK,CAOL;AACA;AACA;AACA;AACA;;AACA,gBAAIyK,CAAC,CAACnJ,EAAF,KAAS,KAAb,EAAoB;AAClB,cAAA,OAAI,CAAC3E,SAAL,GAAiB,CAAjB;AACA8H,cAAAA,KAAK,CAACxE,QAAN,GAAiBwK,CAAC,CAAChD,MAAF,CAASxJ,GAA1B;AACA,cAAA,OAAI,CAACL,GAAL,CAASqN,IAAT,GAAgBR,CAAC,CAACQ,IAAlB;AACA,cAAA,OAAI,CAACrN,GAAL,CAASsN,SAAT,GAAqBT,CAAC,CAACS,SAAvB;AACA,cAAA,OAAI,CAACtN,GAAL,CAAS6J,MAAT,GAAkBgD,CAAC,CAAChD,MAApB;;AACA,kBAAIgD,CAAC,CAACS,SAAF,CAAY5E,OAAZ,CAAoB,IAApB,KAA6B,CAAC,CAAlC,EAAqC;AACnC,oBAAI6E,GAAG,GAAGV,CAAC,CAACS,SAAZ;AACA,oBAAIE,IAAI,GAAG,IAAIC,MAAJ,CAAW,IAAX,EAAiB,GAAjB,CAAX;AACAZ,gBAAAA,CAAC,CAACS,SAAF,GAAcC,GAAG,CAACzG,OAAJ,CAAY0G,IAAZ,EAAkB,EAAlB,CAAd;AACA,gBAAA,OAAI,CAAChO,UAAL,GAAkBqN,CAAC,CAACS,SAAF,CAAY9E,KAAZ,CAAkB,GAAlB,CAAlB;AACD,eALD,MAKO;AACL,gBAAA,OAAI,CAAChJ,UAAL,GAAkBqN,CAAC,CAACS,SAAF,CAAY9E,KAAZ,CAAkB,GAAlB,CAAlB;AACD,eAbiB,CAclB;;;AACA,cAAA,OAAI,CAACjI,QAAL,CAAcmN,OAAd,CAAsB,CAAtB;;AACA,cAAA,OAAI,CAACnN,QAAL,CAAcoN,WAAd,CAA0B;AAAExO,gBAAAA,CAAC,EAAE,CAAL;AAAQC,gBAAAA,CAAC,EAAE;AAAX,eAA1B;;AACA,cAAA,OAAI,CAACwO,QAAL;;AACA,cAAA,OAAI,CAACC,aAAL,GAlBkB,CAoBlB;AACA;;;AACA,cAAA,OAAI,CAACC,OAAL,CAAa,OAAI,CAACzN,GAAlB,EAAuB,IAAvB;;AACA,cAAA,OAAI,CAAC8B,YAAL,GAAoB,IAApB;AACA,cAAA,OAAI,CAACC,YAAL,GAAoB,KAApB,CAxBkB,CAyBlB;;AACAyE,cAAAA,KAAK,CAAC/I,MAAN,GAAe,GAAf,CA1BkB,CA2BlB;AACD,aA5BD,MA4BO;AACL,cAAA,OAAI,CAACiB,SAAL,GAAiB,CAAjB;AACA8H,cAAAA,KAAK,CAACxE,QAAN,GAAiBwK,CAAC,CAAChD,MAAF,CAASxJ,GAA1B;AACA,cAAA,OAAI,CAACL,GAAL,CAASqN,IAAT,GAAgBR,CAAC,CAACQ,IAAlB;AACA,cAAA,OAAI,CAACrN,GAAL,CAASsN,SAAT,GAAqBT,CAAC,CAACS,SAAvB;AACA,cAAA,OAAI,CAACtN,GAAL,CAAS6J,MAAT,GAAkBgD,CAAC,CAAChD,MAApB;;AACA,kBAAIgD,CAAC,CAACS,SAAF,CAAY5E,OAAZ,CAAoB,IAApB,KAA6B,CAAC,CAAlC,EAAqC;AACnC,oBAAI6E,IAAG,GAAGV,CAAC,CAACS,SAAZ;;AACA,oBAAIE,IAAI,GAAG,IAAIC,MAAJ,CAAW,IAAX,EAAiB,GAAjB,CAAX;;AACAZ,gBAAAA,CAAC,CAACS,SAAF,GAAcC,IAAG,CAACzG,OAAJ,CAAY0G,IAAZ,EAAkB,EAAlB,CAAd;AACA,gBAAA,OAAI,CAAChO,UAAL,GAAkBqN,CAAC,CAACS,SAAF,CAAY9E,KAAZ,CAAkB,GAAlB,CAAlB;AACD,eALD,MAKO;AACL,gBAAA,OAAI,CAAChJ,UAAL,GAAkBqN,CAAC,CAACS,SAAF,CAAY9E,KAAZ,CAAkB,GAAlB,CAAlB;AACD,eAbI,CAcL;;;AACA,cAAA,OAAI,CAACjI,QAAL,CAAcmN,OAAd,CAAsB,CAAtB;;AACA,cAAA,OAAI,CAACnN,QAAL,CAAcoN,WAAd,CAA0B;AAAExO,gBAAAA,CAAC,EAAE,CAAL;AAAQC,gBAAAA,CAAC,EAAE;AAAX,eAA1B;;AACA,cAAA,OAAI,CAACwO,QAAL;;AACA,cAAA,OAAI,CAACC,aAAL;;AACA,cAAA,OAAI,CAACC,OAAL,CAAa,OAAI,CAACzN,GAAlB;;AACA,cAAA,OAAI,CAAC8B,YAAL,GAAoB,IAApB;AACA,cAAA,OAAI,CAACC,YAAL,GAAoB,KAApB,CArBK,CAsBL;;AACAyE,cAAAA,KAAK,CAAC/I,MAAN,GAAe,GAAf;AACD;AACF;AACF;AACF,OAtID;AAuID,KApmCM;AAqmCP;AACAiQ,IAAAA,IAtmCO,gBAsmCF1N,GAtmCE,EAsmCGZ,QAtmCH,EAsmCauO,IAtmCb,EAsmCmBxN,KAtmCnB,EAsmC0B;AAC/B,UAAIqG,KAAK,GAAG,IAAZ;;AACAA,MAAAA,KAAK,CAACpH,QAAN,GAAiBA,QAAjB;AACA,WAAKe,KAAL,GAAaA,KAAb;AACAqG,MAAAA,KAAK,CAAC9H,SAAN,GAAkB,CAAlB;AACA8H,MAAAA,KAAK,CAACoH,IAAN,GAAa,CAAb;AACApH,MAAAA,KAAK,CAACqH,IAAN,GAAa,CAAb,CAN+B,CAO/B;AACD,KA9mCM;AA+mCP;AACAtE,IAAAA,OAhnCO,mBAgnCCwC,IAhnCD,EAgnCO;AAEZ;AACA,UAAIvF,KAAK,GAAG,IAAZ,CAHY,CAIZ;;;AACA,UAAIxG,GAAG,GAAG,IAAIgM,KAAJ,EAAV;AACAhM,MAAAA,GAAG,CAACgH,YAAJ,CAAiB,aAAjB,EAAgC,WAAhC;AACAhH,MAAAA,GAAG,CAACwH,GAAJ,GAAUuE,IAAV;;AACA/L,MAAAA,GAAG,CAAC8N,MAAJ,GAAa,YAAM;AAEjB,YAAIC,IAAI,GAAGnG,IAAI,CAACC,KAAL,CAAY7H,GAAG,CAAC8K,KAAJ,GAAY,GAAb,GAAoB,GAA/B,IAAsC,GAAjD;AACA,YAAIkD,IAAI,GAAGpG,IAAI,CAACC,KAAL,CAAY7H,GAAG,CAACiL,MAAJ,GAAa,GAAd,GAAqB,GAAhC,IAAuC,GAAlD;AACAzE,QAAAA,KAAK,CAACpH,QAAN,GAAiB,CAAC2O,IAAD,EAAOC,IAAP,CAAjB;AACAxH,QAAAA,KAAK,CAACxH,UAAN,GAAmBwH,KAAK,CAACxG,GAAN,CAAU8K,KAA7B;AACAtE,QAAAA,KAAK,CAACvH,WAAN,GAAoBuH,KAAK,CAACxG,GAAN,CAAUiL,MAA9B,CANiB,CAOjB;AACA;;AACAzE,QAAAA,KAAK,CAACkE,QAAN,GAAiB,CAAjB,CATiB,CAUjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAlE,QAAAA,KAAK,CAACgH,aAAN,GAlBiB,CAmBjB;;;AAEA,YAAIf,KAAK,GAAG,CAAZ;;AACA,YAAIjG,KAAK,CAACxH,UAAN,GAAmBwH,KAAK,CAACvH,WAA7B,EAA0C;AACxCwN,UAAAA,KAAK,GAAGjG,KAAK,CAACtH,cAAN,GAAuBsH,KAAK,CAACxH,UAA7B,GAA0CwH,KAAK,CAACzG,SAAxD;AACD,SAFD,MAEO;AACL0M,UAAAA,KAAK,GAAGjG,KAAK,CAAC/G,cAAN,GAAuB+G,KAAK,CAACvH,WAA7B,GAA2CuH,KAAK,CAACzG,SAAzD;AACD;;AAED,YAAI2M,IAAI,GAAG,IAAI3Q,MAAM,CAACiQ,KAAX,CAAiBhM,GAAjB,EAAsB;AAC/B2M,UAAAA,WAAW,EAAE,KADkB;AAE/B5B,UAAAA,MAAM,EAAE0B,KAFuB;AAG/BvB,UAAAA,MAAM,EAAEuB,KAHuB;AAI/BG,UAAAA,KAAK,EAAE,CAJwB;AAK/B;AACAX,UAAAA,OAAO,EAAE,QANsB;AAO/BC,UAAAA,OAAO,EAAE,QAPsB;AAQ/BlB,UAAAA,GAAG,EAAExE,KAAK,CAAC5G,SAAN,GAAkB,CARQ;AAS/BiL,UAAAA,IAAI,EAAErE,KAAK,CAAC3G,UAAN,GAAmB;AATM,SAAtB,CAAX;;AAWA2G,QAAAA,KAAK,CAACvG,UAAN,CAAiBmL,GAAjB,CAAqBsB,IAArB;;AAEA,YAAIX,IAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBhM,GAAjB,EAAsB;AAC/B+K,UAAAA,MAAM,EAAE0B,KADuB;AAE/BvB,UAAAA,MAAM,EAAEuB,KAFuB;AAG/BG,UAAAA,KAAK,EAAE,CAHwB;AAI/B;AACAX,UAAAA,OAAO,EAAE,QALsB;AAM/BC,UAAAA,OAAO,EAAE,QANsB;AAO/BlB,UAAAA,GAAG,EAAExE,KAAK,CAAC5G,SAAN,GAAkB,CAPQ;AAQ/BiL,UAAAA,IAAI,EAAErE,KAAK,CAAC3G,UAAN,GAAmB;AARM,SAAtB,CAAX;AAUA2G,QAAAA,KAAK,CAACnG,MAAN,GAAe0L,IAAf,CAnDiB,CAqDjB;;AACA,YAAIxK,MAAM,GAAGqB,QAAQ,CAACmE,aAAT,CAAuB,QAAvB,CAAb;AACA,YAAIkH,IAAI,GAAG1M,MAAM,CAAC2M,UAAP,CAAkB,IAAlB,CAAX,CAvDiB,CAwDjB;AACA;;AACA,YAAIC,EAAE,GAAG,GAAT;AAAA,YAAcC,EAAE,GAAI,MAAMpO,GAAG,CAACiL,MAAX,GAAqBjL,GAAG,CAAC8K,KAA5C,CA1DiB,CA2DjB;AACA;AACA;AACA;AACA;;AACAvJ,QAAAA,MAAM,CAACuJ,KAAP,GAAeqD,EAAE,GAAG,CAApB;AACA5M,QAAAA,MAAM,CAAC0J,MAAP,GAAgBmD,EAAE,GAAG,CAArB;AACAH,QAAAA,IAAI,CAACI,SAAL,CAAerO,GAAf,EAAoB,CAApB,EAAuB,CAAvB,EAA0BmO,EAA1B,EAA8BC,EAA9B;AACAH,QAAAA,IAAI,CAACI,SAAL,CAAerO,GAAf,EAAoBmO,EAApB,EAAwB,CAAxB,EAA2BA,EAA3B,EAA+BC,EAA/B;AACAH,QAAAA,IAAI,CAACI,SAAL,CAAerO,GAAf,EAAoB,IAAImO,EAAxB,EAA4B,CAA5B,EAA+BA,EAA/B,EAAmCC,EAAnC;AACAH,QAAAA,IAAI,CAACI,SAAL,CAAerO,GAAf,EAAoB,CAApB,EAAuBoO,EAAvB,EAA2BD,EAA3B,EAA+BC,EAA/B;AACAH,QAAAA,IAAI,CAACI,SAAL,CAAerO,GAAf,EAAoBmO,EAApB,EAAwBC,EAAxB,EAA4BD,EAA5B,EAAgCC,EAAhC;AACAH,QAAAA,IAAI,CAACI,SAAL,CAAerO,GAAf,EAAoB,IAAImO,EAAxB,EAA4BC,EAA5B,EAAgCD,EAAhC,EAAoCC,EAApC;AACAH,QAAAA,IAAI,CAACI,SAAL,CAAerO,GAAf,EAAoB,CAApB,EAAuB,IAAIoO,EAA3B,EAA+BD,EAA/B,EAAmCC,EAAnC;AACAH,QAAAA,IAAI,CAACI,SAAL,CAAerO,GAAf,EAAoBmO,EAApB,EAAwB,IAAIC,EAA5B,EAAgCD,EAAhC,EAAoCC,EAApC;AACAH,QAAAA,IAAI,CAACI,SAAL,CAAerO,GAAf,EAAoB,IAAImO,EAAxB,EAA4B,IAAIC,EAAhC,EAAoCD,EAApC,EAAwCC,EAAxC,EA1EiB,CA2EjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,YAAIE,KAAK,GAAG/M,MAAM,CAACgN,SAAP,CAAiB,WAAjB,CAAZ;AACA/H,QAAAA,KAAK,CAAChI,QAAN,CAAe,CAAf,EAAkBwB,GAAlB,GAAwBsO,KAAxB;AACA9H,QAAAA,KAAK,CAAChI,QAAN,CAAe,CAAf,EAAkBgL,MAAlB,CAAyBxJ,GAAzB,GAA+BsO,KAA/B,CA1FiB,CA6FjB;AACA;;AAEA9H,QAAAA,KAAK,CAACW,eAAN;AACD,OAjGD;;AAkGAX,MAAAA,KAAK,CAACxG,GAAN,GAAYA,GAAZ;AACD,KA3tCM;AA4tCPyN,IAAAA,OA5tCO,mBA4tCCzN,GA5tCD,EA4tCM2N,IA5tCN,EA4tCY;AACjB,UAAInH,KAAK,GAAG,IAAZ;;AAEA,UAAIuH,IAAI,GAAGnG,IAAI,CAACC,KAAL,CAAY7H,GAAG,CAAC8K,KAAJ,GAAY,GAAb,GAAoB,GAA/B,IAAsC,GAAjD;AACA,UAAIkD,IAAI,GAAGpG,IAAI,CAACC,KAAL,CAAY7H,GAAG,CAACiL,MAAJ,GAAa,GAAd,GAAqB,GAAhC,IAAuC,GAAlD;AACAzE,MAAAA,KAAK,CAACpH,QAAN,GAAiB,CAAC2O,IAAD,EAAOC,IAAP,CAAjB;AACAxH,MAAAA,KAAK,CAACxH,UAAN,GAAmBwH,KAAK,CAACxG,GAAN,CAAU8K,KAA7B;AACAtE,MAAAA,KAAK,CAACvH,WAAN,GAAoBuH,KAAK,CAACxG,GAAN,CAAUiL,MAA9B;AACAzE,MAAAA,KAAK,CAACkE,QAAN,GAAiB,CAAjB,CARiB,CASjB;;AACA,WAAKxK,QAAL,CAAcmN,OAAd,CAAsB,CAAtB;AACA,WAAKnN,QAAL,CAAcoN,WAAd,CAA0B;AAAExO,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE;AAAX,OAA1B;;AAEA,UAAIY,GAAG,GAAG6G,KAAK,CAACtG,QAAN,CAAe0K,UAAf,EAAV;;AACAjL,MAAAA,GAAG,CAACyI,OAAJ,CAAY,UAAC9C,GAAD,EAAS;AACnBkB,QAAAA,KAAK,CAACtG,QAAN,CAAeiL,MAAf,CAAsB7F,GAAtB;AACD,OAFD;;AAGAkB,MAAAA,KAAK,CAACgH,aAAN;;AACAhH,MAAAA,KAAK,CAAC6H,SAAN,CAAgBV,IAAhB;AACD,KA/uCM;AAgvCP;AACAU,IAAAA,SAjvCO,qBAivCGV,IAjvCH,EAivCS;AACd,UAAInH,KAAK,GAAG,IAAZ,CADc,CAEd;;;AACA,UAAIiG,KAAK,GAAG,CAAZ;;AACA,UAAIjG,KAAK,CAACxH,UAAN,GAAmBwH,KAAK,CAACvH,WAA7B,EAA0C;AACxCwN,QAAAA,KAAK,GAAGjG,KAAK,CAACtH,cAAN,GAAuBsH,KAAK,CAACxH,UAA7B,GAA0CwH,KAAK,CAACzG,SAAxD;AACD,OAFD,MAEO;AACL0M,QAAAA,KAAK,GAAGjG,KAAK,CAAC/G,cAAN,GAAuB+G,KAAK,CAACvH,WAA7B,GAA2CuH,KAAK,CAACzG,SAAzD;AACD;;AACD,UAAI4N,IAAJ,EAAU;AACR,aAAKjD,QAAL,GAAgB,IAAI,CAApB;AACD,OAFD,MAEO;AACL,aAAKA,QAAL,GAAgB,CAAhB;AACD,OAba,CAcd;;;AACA,UAAM8D,IAAI,GAAGhI,KAAK,CAACtG,QAAN,CAAe0K,UAAf,EAAb;;AACA,UAAI4D,IAAI,CAACtH,MAAL,GAAc,CAAlB,EAAqB;AACnBV,QAAAA,KAAK,CAACjG,UAAN,CAAiB6H,OAAjB,CAAyB,UAAC9C,GAAD,EAAS;AAChCkB,UAAAA,KAAK,CAACtG,QAAN,CAAeiL,MAAf,CAAsB7F,GAAtB;AACD,SAFD;AAGD;;AACD,UAAIkB,KAAK,CAAC9H,SAAV,EAAqB;AACnB;AACA8H,QAAAA,KAAK,CAAC1F,QAAN,GAAiB8G,IAAI,CAAC6G,KAAL,CACfjI,KAAK,CAAC5G,SAAN,IACG4G,KAAK,CAACkE,QAAN,GAAiBlE,KAAK,CAACnG,MAAN,CAAayK,KAA9B,GAAsCtE,KAAK,CAACnG,MAAN,CAAa0K,MADtD,CADe,CAAjB;AAIAvE,QAAAA,KAAK,CAACzF,SAAN,GAAkB6G,IAAI,CAAC6G,KAAL,CAChBjI,KAAK,CAAC3G,UAAN,IACG2G,KAAK,CAACkE,QAAN,GAAiBlE,KAAK,CAACnG,MAAN,CAAa4K,MAA9B,GAAuCzE,KAAK,CAACnG,MAAN,CAAa6K,MADvD,CADgB,CAAlB;AAIA,YAAIM,YAAY,GAAG5D,IAAI,CAAC6D,IAAL,CACjB,CAAC,CAACjF,KAAK,CAACnG,MAAN,CAAawK,IAAb,GAAoBrE,KAAK,CAAC5G,SAAN,GAAkB,CAAvC,IAA4C4G,KAAK,CAACkE,QAAlD,GACClE,KAAK,CAAC5G,SAAN,GAAkB,CADnB,GAEE4G,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAAlD,GAA8D,CAFhE,KAGGlE,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAHpD,CADiB,CAAnB;AAMA,YAAIgB,aAAa,GAAG9D,IAAI,CAAC6D,IAAL,CAClB,CAAC,CAACjF,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACnG,MAAN,CAAawK,IAApC,IAA4CrE,KAAK,CAACkE,QAAlD,GACClE,KAAK,CAAC5G,SAAN,GAAkB,CADnB,GAEE4G,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAAlD,GAA8D,CAFhE,KAGGlE,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAHpD,CADkB,CAApB;AAOA,YAAIiB,YAAY,GAAG/D,IAAI,CAAC6D,IAAL,CACjB,CAAC,CAACjF,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GAAmBxE,KAAK,CAAC5G,SAAN,GAAkB,CAAtC,IAA2C4G,KAAK,CAACkE,QAAjD,GACClE,KAAK,CAAC5G,SAAN,GAAkB,CADnB,GAEE4G,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAAnD,GAA+D,CAFjE,KAGGlE,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAHrD,CADiB,CAAnB;AAMA,YAAIgE,cAAc,GAAG9G,IAAI,CAAC6D,IAAL,CACnB,CAAC,CAACjF,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACnG,MAAN,CAAa2K,GAApC,IAA2CxE,KAAK,CAACkE,QAAjD,GACClE,KAAK,CAAC5G,SAAN,GAAkB,CADnB,GAEE4G,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAAnD,GAA+D,CAFjE,KAGGlE,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAHrD,CADmB,CAArB;AAMAlE,QAAAA,KAAK,CAACvF,OAAN,GAAgBuK,YAAhB;AACAhF,QAAAA,KAAK,CAACtF,QAAN,GAAiBwK,aAAjB;AACAlF,QAAAA,KAAK,CAACrF,MAAN,GAAewK,YAAf;AACAnF,QAAAA,KAAK,CAACpF,UAAN,GAAmBsN,cAAnB;AACAlI,QAAAA,KAAK,CAAC7F,SAAN,GAAkB,EAAlB,CAvCmB,CAuCG;;AACtB,YAAI6F,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AACxB;AACA8H,UAAAA,KAAK,CAAC7F,SAAN,GAAkB,EAAlB;;AACA,cAAI6F,KAAK,CAACjG,UAAN,CAAiB2G,MAAjB,GAA0B,CAA9B,EAAiC;AAC/BV,YAAAA,KAAK,CAACjG,UAAN,CAAiB6H,OAAjB,CAAyB,UAAC9C,GAAD,EAAS;AAChCkB,cAAAA,KAAK,CAACtG,QAAN,CAAeiL,MAAf,CAAsB7F,GAAtB;AACD,aAFD;;AAGAkB,YAAAA,KAAK,CAACjG,UAAN,GAAmB,EAAnB;AACD;;AACD,eAAK,IAAIwF,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIyF,YAArB,EAAmCzF,CAAC,EAApC,EAAwC;AACtCS,YAAAA,KAAK,CAAC7F,SAAN,CAAgBuD,IAAhB,CAAqB,CACnBsC,KAAK,CAACnG,MAAN,CAAa2K,GADM,EAEnBxE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GAAoBrE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2C/E,CAF5C,CAArB;AAID;;AACD,eAAK,IAAIA,EAAC,GAAG,CAAb,EAAgBA,EAAC,IAAI2F,aAArB,EAAoC3F,EAAC,EAArC,EAAyC;AACvCS,YAAAA,KAAK,CAAC7F,SAAN,CAAgBuD,IAAhB,CAAqB,CACnBsC,KAAK,CAACnG,MAAN,CAAa2K,GADM,EAEnBxE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GAAoBrE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2C/E,EAF5C,CAArB;AAID;;AACD,cAAIgG,IAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,YAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,YAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,YAAAA,GAAG,EAAExE,KAAK,CAACnG,MAAN,CAAa2K,GAHmB;AAIrCH,YAAAA,IAAI,EAAErE,KAAK,CAACnG,MAAN,CAAawK,IAJkB;AAKrCmC,YAAAA,IAAI,EAAE,CAL+B;AAMrCf,YAAAA,OAAO,EAAE,QAN4B;AAOrCC,YAAAA,OAAO,EAAE;AAP4B,WAA5B,CAAX;;AASA1F,UAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,IAAnB;;AACAvF,UAAAA,KAAK,CAACnG,MAAN,GAAe0L,IAAf;;AACAvF,UAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,IAAtB;;AACAvF,UAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;;AAEAiG,UAAAA,KAAK,CAAC7F,SAAN,CAAgByH,OAAhB,CAAwB,UAAC9C,GAAD,EAAS;AAC/B,gBAAIyG,IAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,cAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,cAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,cAAAA,GAAG,EAAE1F,GAAG,CAAC,CAAD,CAH6B;AAIrCuF,cAAAA,IAAI,EAAEvF,GAAG,CAAC,CAAD,CAJ4B;AAKrC2G,cAAAA,OAAO,EAAE,QAL4B;AAMrCC,cAAAA,OAAO,EAAE;AAN4B,aAA5B,CAAX;;AAQA1F,YAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,IAAnB;;AACAvF,YAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,IAAtB;;AACAvF,YAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACD,WAZD;AAaD,SAhDD,MAgDO,IAAIiG,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AAC/B8H,UAAAA,KAAK,CAAC7F,SAAN,GAAkB,EAAlB;;AACA,cAAI6F,KAAK,CAACjG,UAAN,CAAiB2G,MAAjB,GAA0B,CAA9B,EAAiC;AAC/BV,YAAAA,KAAK,CAACjG,UAAN,CAAiB6H,OAAjB,CAAyB,UAAC9C,GAAD,EAAS;AAChCkB,cAAAA,KAAK,CAACtG,QAAN,CAAeiL,MAAf,CAAsB7F,GAAtB;AACD,aAFD;;AAGAkB,YAAAA,KAAK,CAACjG,UAAN,GAAmB,EAAnB;AACD,WAP8B,CAQ/B;;;AACA,eAAK,IAAIwF,GAAC,GAAG,CAAb,EAAgBA,GAAC,IAAI4F,YAArB,EAAmC5F,GAAC,EAApC,EAAwC;AACtCS,YAAAA,KAAK,CAAC7F,SAAN,CAAgBuD,IAAhB,CAAqB,CACnBsC,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GAAmBxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4ClF,GAD5C,EAEnBS,KAAK,CAACnG,MAAN,CAAawK,IAFM,CAArB;AAID;;AACD,eAAK,IAAI9E,GAAC,GAAG,CAAb,EAAgBA,GAAC,IAAI2I,cAArB,EAAqC3I,GAAC,EAAtC,EAA0C;AACxCS,YAAAA,KAAK,CAAC7F,SAAN,CAAgBuD,IAAhB,CAAqB,CACnBsC,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GAAmBxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4ClF,GAD5C,EAEnBS,KAAK,CAACnG,MAAN,CAAawK,IAFM,CAArB;AAID;;AACD,cAAIkB,MAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,YAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,YAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,YAAAA,GAAG,EAAExE,KAAK,CAACnG,MAAN,CAAa2K,GAHmB;AAIrCH,YAAAA,IAAI,EAAErE,KAAK,CAACnG,MAAN,CAAawK,IAJkB;AAKrCmC,YAAAA,IAAI,EAAE,CAL+B;AAMrCf,YAAAA,OAAO,EAAE,QAN4B;AAOrCC,YAAAA,OAAO,EAAE;AAP4B,WAA5B,CAAX;;AASA1F,UAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,MAAnB;;AACAvF,UAAAA,KAAK,CAACnG,MAAN,GAAe0L,MAAf;;AACAvF,UAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,MAAtB;;AACAvF,UAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;;AACAiG,UAAAA,KAAK,CAAC7F,SAAN,CAAgByH,OAAhB,CAAwB,UAAC9C,GAAD,EAAS;AAC/B,gBAAIyG,IAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,cAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,cAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,cAAAA,GAAG,EAAE1F,GAAG,CAAC,CAAD,CAH6B;AAIrCuF,cAAAA,IAAI,EAAEvF,GAAG,CAAC,CAAD,CAJ4B;AAKrC2G,cAAAA,OAAO,EAAE,QAL4B;AAMrCC,cAAAA,OAAO,EAAE;AAN4B,aAA5B,CAAX;;AAQA1F,YAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,IAAnB;;AACAvF,YAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,IAAtB;;AACAvF,YAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACD,WAZD;AAaD,SA/CM,MA+CA,IAAIiG,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AAC/B8H,UAAAA,KAAK,CAAC5F,WAAN,GAAoB,EAApB;;AACA,cAAI4F,KAAK,CAACjG,UAAN,CAAiB2G,MAAjB,GAA0B,CAA9B,EAAiC;AAC/BV,YAAAA,KAAK,CAACjG,UAAN,CAAiB6H,OAAjB,CAAyB,UAAC9C,GAAD,EAAS;AAChCkB,cAAAA,KAAK,CAACtG,QAAN,CAAeiL,MAAf,CAAsB7F,GAAtB;AACD,aAFD;;AAGAkB,YAAAA,KAAK,CAACjG,UAAN,GAAmB,EAAnB;AACD,WAP8B,CAS/B;;;AACA,eAAK,IAAIwF,GAAC,GAAG,CAAb,EAAgBA,GAAC,IAAIyF,YAArB,EAAmCzF,GAAC,EAApC,EAAwC;AACtC,iBAAK,IAAI4I,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIhD,YAArB,EAAmCgD,CAAC,EAApC,EAAwC;AACtCnI,cAAAA,KAAK,CAAC5F,WAAN,CAAkBsD,IAAlB,CAAuB,CACrBsC,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4C0D,CAFvB,EAGrBnI,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2C/E,GAJtB,CAAvB;AAMD;AACF,WAnB8B,CAoB/B;;;AACA,eAAK,IAAIA,GAAC,GAAG,CAAb,EAAgBA,GAAC,IAAI2F,aAArB,EAAoC3F,GAAC,EAArC,EAAyC;AACvC,iBAAK,IAAI4I,EAAC,GAAG,CAAb,EAAgBA,EAAC,IAAIhD,YAArB,EAAmCgD,EAAC,EAApC,EAAwC;AACtCnI,cAAAA,KAAK,CAAC5F,WAAN,CAAkBsD,IAAlB,CAAuB,CACrBsC,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4C0D,EAFvB,EAGrBnI,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2C/E,GAJtB,CAAvB;AAMD;AACF,WA9B8B,CA+B/B;;;AACA,eAAK,IAAIA,GAAC,GAAG,CAAb,EAAgBA,GAAC,IAAIyF,YAArB,EAAmCzF,GAAC,EAApC,EAAwC;AACtC,iBAAK,IAAI4I,GAAC,GAAG,CAAb,EAAgBA,GAAC,IAAID,cAArB,EAAqCC,GAAC,EAAtC,EAA0C;AACxCnI,cAAAA,KAAK,CAAC5F,WAAN,CAAkBsD,IAAlB,CAAuB,CACrBsC,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4C0D,GAFvB,EAGrBnI,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2C/E,GAJtB,CAAvB;AAMD;AACF,WAzC8B,CA0C/B;;;AACA,eAAK,IAAIA,GAAC,GAAG,CAAb,EAAgBA,GAAC,IAAI2F,aAArB,EAAoC3F,GAAC,EAArC,EAAyC;AACvC,iBAAK,IAAI4I,GAAC,GAAG,CAAb,EAAgBA,GAAC,IAAID,cAArB,EAAqCC,GAAC,EAAtC,EAA0C;AACxCnI,cAAAA,KAAK,CAAC5F,WAAN,CAAkBsD,IAAlB,CAAuB,CACrBsC,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4C0D,GAFvB,EAGrBnI,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2C/E,GAJtB,CAAvB;AAMD;AACF,WApD8B,CAqD/B;;;AACA,eAAK,IAAIA,GAAC,GAAG,CAAb,EAAgBA,GAAC,IAAIyF,YAArB,EAAmCzF,GAAC,EAApC,EAAwC;AACtCS,YAAAA,KAAK,CAAC5F,WAAN,CAAkBsD,IAAlB,CAAuB,CACrBsC,KAAK,CAACnG,MAAN,CAAa2K,GADQ,EAErBxE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GAAoBrE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2C/E,GAF1C,CAAvB;AAID,WA3D8B,CA4D/B;;;AACA,eAAK,IAAIA,GAAC,GAAG,CAAb,EAAgBA,GAAC,IAAI2F,aAArB,EAAoC3F,GAAC,EAArC,EAAyC;AACvCS,YAAAA,KAAK,CAAC5F,WAAN,CAAkBsD,IAAlB,CAAuB,CACrBsC,KAAK,CAACnG,MAAN,CAAa2K,GADQ,EAErBxE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GAAoBrE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2C/E,GAF1C,CAAvB;AAID,WAlE8B,CAmE/B;;;AACA,eAAK,IAAIA,IAAC,GAAG,CAAb,EAAgBA,IAAC,IAAI4F,YAArB,EAAmC5F,IAAC,EAApC,EAAwC;AACtCS,YAAAA,KAAK,CAAC5F,WAAN,CAAkBsD,IAAlB,CAAuB,CACrBsC,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GAAmBxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4ClF,IAD1C,EAErBS,KAAK,CAACnG,MAAN,CAAawK,IAFQ,CAAvB;AAID,WAzE8B,CA0E/B;;;AACA,eAAK,IAAI9E,IAAC,GAAG,CAAb,EAAgBA,IAAC,IAAI2I,cAArB,EAAqC3I,IAAC,EAAtC,EAA0C;AACxCS,YAAAA,KAAK,CAAC5F,WAAN,CAAkBsD,IAAlB,CAAuB,CACrBsC,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GAAmBxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4ClF,IAD1C,EAErBS,KAAK,CAACnG,MAAN,CAAawK,IAFQ,CAAvB;AAID;;AACD,cAAIkB,MAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,YAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,YAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,YAAAA,GAAG,EAAExE,KAAK,CAACnG,MAAN,CAAa2K,GAHmB;AAIrCH,YAAAA,IAAI,EAAErE,KAAK,CAACnG,MAAN,CAAawK,IAJkB;AAKrCmC,YAAAA,IAAI,EAAE,CAL+B;AAMrCf,YAAAA,OAAO,EAAE,QAN4B;AAOrCC,YAAAA,OAAO,EAAE;AAP4B,WAA5B,CAAX;;AASA1F,UAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,MAAnB;;AACAvF,UAAAA,KAAK,CAACnG,MAAN,GAAe0L,MAAf;;AACAvF,UAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,MAAtB;;AACAvF,UAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;;AAEAiG,UAAAA,KAAK,CAAC5F,WAAN,CAAkBwH,OAAlB,CAA0B,UAAC9C,GAAD,EAAS;AACjC,gBAAIyG,IAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,cAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,cAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,cAAAA,GAAG,EAAE1F,GAAG,CAAC,CAAD,CAH6B;AAIrCuF,cAAAA,IAAI,EAAEvF,GAAG,CAAC,CAAD,CAJ4B;AAKrC2G,cAAAA,OAAO,EAAE,QAL4B;AAMrCC,cAAAA,OAAO,EAAE;AAN4B,aAA5B,CAAX;;AAQA1F,YAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,IAAnB;;AACAvF,YAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,IAAtB;;AACAvF,YAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACD,WAZD;AAaD;AACF,OApPD,MAoPO;AACL;AACAiG,QAAAA,KAAK,CAACnG,MAAN,GAAe,IAAf,CAFK,CAGL;;AACA,YAAImG,KAAK,CAACjG,UAAN,CAAiB2G,MAAjB,GAA0B,CAA9B,EAAiC;AAC/BV,UAAAA,KAAK,CAACjG,UAAN,CAAiB6H,OAAjB,CAAyB,UAAC9C,GAAD,EAAS;AAChCkB,YAAAA,KAAK,CAACtG,QAAN,CAAeiL,MAAf,CAAsB7F,GAAtB;AACD,WAFD;;AAGAkB,UAAAA,KAAK,CAACjG,UAAN,GAAmB,EAAnB;AACD;;AACD,YAAIwL,OAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,UAAAA,MAAM,EAAE0B,KAD6B;AAErCvB,UAAAA,MAAM,EAAEuB,KAF6B;AAGrCG,UAAAA,KAAK,EAAE,CAH8B;AAIrC;AACAX,UAAAA,OAAO,EAAE,QAL4B;AAMrCC,UAAAA,OAAO,EAAE,QAN4B;AAOrClB,UAAAA,GAAG,EAAExE,KAAK,CAAC5G,SAAN,GAAkB,CAPc;AAQrCiL,UAAAA,IAAI,EAAErE,KAAK,CAAC3G,UAAN,GAAmB;AARY,SAA5B,CAAX;;AAUA2G,QAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,OAAnB;;AACAvF,QAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,OAAnB;;AACAvF,QAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,OAAtB;;AACAvF,QAAAA,KAAK,CAACnG,MAAN,GAAe0L,OAAf;AACD;;AACD,WAAKM,aAAL;AACD,KAphDM;AAqhDP;AACMA,IAAAA,aAthDC,2BAshDe;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAChBuC,gBAAAA,QADgB,GACL,CADK;AAEhBpI,gBAAAA,KAFgB,GAER,OAFQ;;AAGpB,gBAAA,OAAI,CAACqI,SAAL,CAAeC,QAAf,CAAwBtI,KAAK,CAAC5G,SAAN,GAAkBgP,QAA1C;;AACA,gBAAA,OAAI,CAACC,SAAL,CAAeE,SAAf,CAAyBvI,KAAK,CAAC3G,UAAN,GAAmB+O,QAA5C;;AACApI,gBAAAA,KAAK,CAACqI,SAAN,CAAgBG,KAAhB;;AACAxI,gBAAAA,KAAK,CAACtG,QAAN,CAAe0K,UAAf,GAA4BxC,OAA5B,CAAoC,UAAC9C,GAAD,EAAS;AAC3C,sBAAIyG,IAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,oBAAAA,MAAM,EAAEzF,GAAG,CAACyF,MAAJ,GAAa6D,QADgB;AAErC1D,oBAAAA,MAAM,EAAE5F,GAAG,CAAC4F,MAAJ,GAAa0D,QAFgB;AAGrC5D,oBAAAA,GAAG,EAAE1F,GAAG,CAAC0F,GAAJ,GAAU4D,QAHsB;AAIrC/D,oBAAAA,IAAI,EAAEvF,GAAG,CAACuF,IAAJ,GAAW+D,QAJoB;AAKrC;AACA3C,oBAAAA,OAAO,EAAE,QAN4B;AAOrCC,oBAAAA,OAAO,EAAE;AAP4B,mBAA5B,CAAX;;AASA1F,kBAAAA,KAAK,CAACqI,SAAN,CAAgBzD,GAAhB,CAAoBW,IAApB;AACD,iBAXD;;AAYAvF,gBAAAA,KAAK,CAAClG,SAAN,GAAkB,IAAIvE,MAAM,CAACyO,KAAX,CAChBhE,KAAK,CAACqI,SAAN,CAAgB/D,KAAhB,GAAwB,CADR,EAEhBtE,KAAK,CAACqI,SAAN,CAAgB5D,MAAhB,GAAyB,CAFT,CAAlB,CAlBoB,CAqBjB;;AACHzE,gBAAAA,KAAK,CAACqI,SAAN,CAAgBlE,WAAhB,CAA4BnE,KAAK,CAAClG,SAAlC,EAA6CkG,KAAK,CAACkE,QAAnD;;AACAlE,gBAAAA,KAAK,CAACqI,SAAN,CAAgBI,SAAhB,GAvBoB,CAyBpB;;;AACMC,gBAAAA,MA1Bc,GA0BL1I,KAAK,CAACqI,SAAN,CAAgBN,SAAhB,CAA0B;AACvCY,kBAAAA,MAAM,EAAE,KAD+B;AAEvCC,kBAAAA,OAAO,EAAE,CAF8B;AAGvCvE,kBAAAA,IAAI,EAAErE,KAAK,CAAC3H,KAAN,CAAYC,CAAZ,GAAgB8P,QAHiB;AAIvC5D,kBAAAA,GAAG,EAAExE,KAAK,CAAC3H,KAAN,CAAYE,CAAZ,GAAgB6P,QAJkB;AAKvC9D,kBAAAA,KAAK,EAAEtE,KAAK,CAACqI,SAAN,CAAgB/D,KAAhB,GAAwBtE,KAAK,CAAC3H,KAAN,CAAYC,CAAZ,GAAgB8P,QAAhB,GAA2B,CALnB;AAMvC3D,kBAAAA,MAAM,EAAEzE,KAAK,CAACqI,SAAN,CAAgB5D,MAAhB,GAAyBzE,KAAK,CAAC3H,KAAN,CAAYE,CAAZ,GAAgB6P,QAAhB,GAA2B;AANrB,iBAA1B,CA1BK,EAkCpB;AACA;AACA;AACA;AACA;;AACIS,gBAAAA,QAvCgB,GAuCL,IAAIrD,KAAJ,EAvCK;AAwCpBqD,gBAAAA,QAAQ,CAAC7H,GAAT,GAAe0H,MAAf;AACA1I,gBAAAA,KAAK,CAAChF,OAAN,GAAgB0N,MAAhB,CAzCoB,CA0CpB;;AACA,oBAAI,OAAI,CAACvP,GAAL,IAAY,OAAI,CAACA,GAAL,CAAS6J,MAArB,IAA+B,OAAI,CAAC7J,GAAL,CAAS6J,MAAT,CAAgB9H,GAAnD,EAAwD;AACtD;AACA8E,kBAAAA,KAAK,CAAC8I,aAAN,CACE,OAAI,CAAC3P,GAAL,CAAS6J,MAAT,CAAgB9H,GADlB,EAEEwN,MAFF,EAGE,OAAI,CAACvP,GAAL,CAAS6J,MAAT,CAAgBwD,IAAhB,CAAqBuC,QAArB,EAHF,EAFsD,CAOtD;AACA;;AACD;;AApDmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqDrB,KA3kDM;AA4kDP;AACAhC,IAAAA,QA7kDO,sBA6kDI;AACT,UAAI/G,KAAK,GAAG,IAAZ,CADS,CAET;;;AACA,UAAIgJ,WAAW,GAAG,KAAKrQ,UAAL,CAAgB,CAAhB,CAAlB,CAHS,CAG6B;;AACtC,UAAIsQ,UAAU,GAAG,KAAKtQ,UAAL,CAAgB,CAAhB,CAAjB,CAJS,CAI4B;;AACrC,UAAIqQ,WAAW,IAAIC,UAAnB,EAA+B;AAC7B,aAAKjQ,SAAL,GAAiBgH,KAAK,CAAC1G,MAAN,GAAe0G,KAAK,CAACzG,SAAtC;AACA,aAAKR,QAAL,GAAgBqI,IAAI,CAACC,KAAL,CAAY,KAAKrI,SAAL,GAAiBiQ,UAAlB,GAAgCD,WAA3C,CAAhB;AACD,OAHD,MAGO;AACL,aAAKjQ,QAAL,GAAgBiH,KAAK,CAAC1G,MAAN,GAAe0G,KAAK,CAACzG,SAArC;AACA,aAAKP,SAAL,GAAiBoI,IAAI,CAACC,KAAL,CAAY,KAAKtI,QAAL,GAAgBiQ,WAAjB,GAAgCC,UAA3C,CAAjB;AACD;;AAEDjJ,MAAAA,KAAK,CAACnH,KAAN,GAAc,CAACmH,KAAK,CAAC5G,SAAN,GAAkB4G,KAAK,CAACzG,SAAxB,GAAoCyG,KAAK,CAACjH,QAA3C,IAAuD,CAArE;AACAiH,MAAAA,KAAK,CAAClH,KAAN,GAAc,CAAC,KAAKO,UAAL,GAAkB2G,KAAK,CAACzG,SAAxB,GAAoCyG,KAAK,CAAChH,SAA3C,IAAwD,CAAtE;AAEA,UAAIkQ,cAAc,GAAGC,wBAAwB,CAACC,SAAzB,CAAmCC,MAAxD;AACAF,MAAAA,wBAAwB,CAACC,SAAzB,CAAmCE,cAAnC,GAAoD,EAApD,CAjBS,CAkBT;;AACAH,MAAAA,wBAAwB,CAACC,SAAzB,CAAmCC,MAAnC,GAA4C,UAAU/Q,CAAV,EAAaC,CAAb,EAAgB;AAC1D,aAAK+Q,cAAL,CAAoBhR,CAApB,GAAwBA,CAAxB;AACA,aAAKgR,cAAL,CAAoB/Q,CAApB,GAAwBA,CAAxB;AACA2Q,QAAAA,cAAc,CAACK,KAAf,CAAqB,IAArB,EAA2B,CAACjR,CAAD,EAAIC,CAAJ,CAA3B;AACD,OAJD;;AAKA4Q,MAAAA,wBAAwB,CAACC,SAAzB,CAAmCI,YAAnC,GAAkD,UAChDlR,CADgD,EAEhDC,CAFgD,EAGhDkR,YAHgD,EAIhD;AACAA,QAAAA,YAAY,GAAGA,YAAY,KAAK7I,SAAjB,GAA6B,CAA7B,GAAiC6I,YAAhD;AACA,YAAIC,MAAM,GAAG,KAAKJ,cAAL,CAAoBhR,CAAjC;AACA,YAAIqR,MAAM,GAAG,KAAKL,cAAL,CAAoB/Q,CAAjC;AACA,YAAIqR,MAAM,GAAGtR,CAAC,GAAGoR,MAAjB;AACA,YAAIG,MAAM,GAAGtR,CAAC,GAAGoR,MAAjB;AACA,YAAIG,UAAU,GAAG1I,IAAI,CAAC6G,KAAL,CACf7G,IAAI,CAAC2I,IAAL,CAAUH,MAAM,GAAGA,MAAT,GAAkBC,MAAM,GAAGA,MAArC,IAA+CJ,YADhC,CAAjB;;AAGA,aAAK,IAAIzD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8D,UAApB,EAAgC9D,CAAC,EAAjC,EAAqC;AACnC,eAAKA,CAAC,GAAG,CAAJ,KAAU,CAAV,GAAc,QAAd,GAAyB,QAA9B,EACE0D,MAAM,GAAIE,MAAM,GAAGE,UAAV,GAAwB9D,CADnC,EAEE2D,MAAM,GAAIE,MAAM,GAAGC,UAAV,GAAwB9D,CAFnC,EADmC,CAIhC;AACJ;;AACD,aAAKqD,MAAL,CAAY/Q,CAAZ,EAAeC,CAAf,EAfA,CAemB;AACpB,OApBD;;AAsBA,UAAIyR,cAAc,GAAG,KAAK5Q,SAAL,GAAiB4G,KAAK,CAACzG,SAA5C;AAAA,UACE0Q,eAAe,GAAG,KAAK5Q,UAAL,GAAkB2G,KAAK,CAACzG,SAD5C;AAEA,UAAI2Q,IAAJ,EAAUC,IAAV,EAAgBC,IAAhB,EAAsBC,IAAtB,EAA4BC,MAA5B,EAAoCC,MAApC,EAA4CC,KAA5C,EAAmDC,KAAnD;AACA,UAAIC,YAAY,GAAG1K,KAAK,CAACjH,QAAN,GAAiBiH,KAAK,CAACzG,SAA1C;AACA,UAAIoR,aAAa,GAAG3K,KAAK,CAAChH,SAAN,GAAkBgH,KAAK,CAACzG,SAA5C;AACAyG,MAAAA,KAAK,CAAC3H,KAAN,CAAYC,CAAZ,GAAgB,CAAC0R,cAAc,GAAG,KAAKjR,QAAvB,IAAmC,CAAnC,GAAuCiH,KAAK,CAACzG,SAA7D;AACAyG,MAAAA,KAAK,CAAC3H,KAAN,CAAYE,CAAZ,GAAgB,CAAC0R,eAAe,GAAG,KAAKjR,SAAxB,IAAqC,CAArC,GAAyCgH,KAAK,CAACzG,SAA/D;AACA2Q,MAAAA,IAAI,GAAGlK,KAAK,CAAC3H,KAAN,CAAYC,CAAZ,GAAgBoS,YAAvB;AACAP,MAAAA,IAAI,GAAGnK,KAAK,CAAC3H,KAAN,CAAYE,CAAnB;AACA6R,MAAAA,IAAI,GAAGpK,KAAK,CAAC3H,KAAN,CAAYC,CAAZ,GAAgBoS,YAAvB;AACAL,MAAAA,IAAI,GAAGrK,KAAK,CAAC3H,KAAN,CAAYE,CAAZ,GAAgBoS,aAAvB;AACAL,MAAAA,MAAM,GAAGtK,KAAK,CAAC3H,KAAN,CAAYC,CAArB;AACAiS,MAAAA,MAAM,GAAGvK,KAAK,CAAC3H,KAAN,CAAYE,CAAZ,GAAgBoS,aAAzB;AACAH,MAAAA,KAAK,GAAGxK,KAAK,CAAC3H,KAAN,CAAYC,CAApB;AACAmS,MAAAA,KAAK,GAAGzK,KAAK,CAAC3H,KAAN,CAAYE,CAApB;;AAEAyH,MAAAA,KAAK,CAAC7E,OAAN,CAAcyP,SAAd,CAAwB,CAAxB,EAA2B,CAA3B,EAA8BZ,cAA9B,EAA8CC,eAA9C;;AACAjK,MAAAA,KAAK,CAAC7E,OAAN,CAAc0P,SAAd;;AACA7K,MAAAA,KAAK,CAAC7E,OAAN,CAAckO,MAAd,CAAqBrJ,KAAK,CAAC3H,KAAN,CAAYC,CAAjC,EAAoC0H,KAAK,CAAC3H,KAAN,CAAYE,CAAhD;;AACAyH,MAAAA,KAAK,CAAC7E,OAAN,CAAcqO,YAAd,CAA2BU,IAA3B,EAAiCC,IAAjC;;AACAnK,MAAAA,KAAK,CAAC7E,OAAN,CAAcqO,YAAd,CAA2BY,IAA3B,EAAiCC,IAAjC;;AACArK,MAAAA,KAAK,CAAC7E,OAAN,CAAcqO,YAAd,CAA2Bc,MAA3B,EAAmCC,MAAnC;;AACAvK,MAAAA,KAAK,CAAC7E,OAAN,CAAcqO,YAAd,CAA2BgB,KAA3B,EAAkCC,KAAlC;;AACAzK,MAAAA,KAAK,CAAC7E,OAAN,CAAc2P,SAAd;;AACA9K,MAAAA,KAAK,CAAC7E,OAAN,CAAc4P,SAAd,GAA0B,CAA1B;AACA/K,MAAAA,KAAK,CAAC7E,OAAN,CAAc6P,WAAd,GAA4B,KAA5B;;AACAhL,MAAAA,KAAK,CAAC7E,OAAN,CAAc8P,MAAd;AACD,KAtpDM;AAupDP;AACMnC,IAAAA,aAxpDC,yBAwpDa5N,GAxpDb,EAwpDkB1B,GAxpDlB,EAwpDuBgN,IAxpDvB,EAwpD6B;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAC9BxG,gBAAAA,KAD8B,GACtB,OADsB;;AAAA,sBAE9B9E,GAAG,IAAI,OAAI,CAACA,GAFkB;AAAA;AAAA;AAAA;;AAGhC8E,gBAAAA,KAAK,CAAC9E,GAAN,GAAYA,GAAZ;AAHgC;AAAA,uBAIR,IAAIgQ,OAAJ,CAAY,UAACxL,OAAD,EAAa;AAC/C;AACA;AAEAM,kBAAAA,KAAK,CAACX,KAAN,CAAY8L,YAAZ,CAAyBC,SAAzB,GAAqC,EAArC;AACA,sBAAIC,CAAC,GAAGjP,QAAQ,CAACmE,aAAT,CAAuB,KAAvB,CAAR;AACA8K,kBAAAA,CAAC,CAAC7K,YAAF,CAAe,IAAf,EAAqB,WAArB;;AACAR,kBAAAA,KAAK,CAACX,KAAN,CAAY8L,YAAZ,CAAyBG,WAAzB,CAAqCD,CAArC;;AAEA,sBAAIpQ,SAAS,GAAG,IAAIzF,MAAJ,CAAW,WAAX,EAAwB;AACtC+V,oBAAAA,OAAO,EAAE,CAACrQ,GAAD,CAD6B;AAEtCsQ,oBAAAA,QAAQ,EAAE,qBAF4B;AAGtC;AACAC,oBAAAA,KAAK,EACH,wEALoC;AAMtCnE,oBAAAA,MAAM,EAAE,kBAAY;AAClB5H,sBAAAA,OAAO,CAACzE,SAAD,CAAP;AACD;AARqC,mBAAxB,CAAhB;AAUD,iBAnBuB,CAJQ;;AAAA;AAIhC+E,gBAAAA,KAAK,CAAC/E,SAJ0B;AAwBhCyQ,gBAAAA,UAAU,CAAC,YAAY;AACrB1L,kBAAAA,KAAK,CAAC/E,SAAN,CAAgB0Q,OAAhB,CAAwB;AACtB;AACAC,oBAAAA,KAAK,EAAEpS,GAFe;AAGtB;AACAqS,oBAAAA,MAAM,EAAErF;AAJc,mBAAxB;;AAOAxG,kBAAAA,KAAK,CAAC8L,SAAN,CAAgB,YAAM;AACpB9L,oBAAAA,KAAK,CAAC3E,cAAN,GAAuB,IAAvB;AACA2E,oBAAAA,KAAK,CAAC5E,YAAN,GAAqB,KAArB;AACA4E,oBAAAA,KAAK,CAAC1E,YAAN,GAAqB,IAArB;AACA0E,oBAAAA,KAAK,CAACzE,YAAN,GAAqB,KAArB,CAJoB,CAKpB;AACD,mBAND;AAOD,iBAfS,EAeP,GAfO,CAAV;AAxBgC;AAAA;;AAAA;AAyChC,oBAAIyE,KAAK,CAAC/E,SAAN,IAAmB+E,KAAK,CAAC/E,SAAN,CAAgB8Q,IAAvC,EAA6C;AAC3C/L,kBAAAA,KAAK,CAAC/E,SAAN,CAAgB0Q,OAAhB,CAAwB;AACtBC,oBAAAA,KAAK,EAAEpS,GADe;AAEtB;AACAqS,oBAAAA,MAAM,EAAErF;AAHc,mBAAxB;;AAMAxG,kBAAAA,KAAK,CAAC8L,SAAN,CAAgB,YAAM;AACpB9L,oBAAAA,KAAK,CAAC3E,cAAN,GAAuB,IAAvB,CADoB,CAEpB;;AACA2E,oBAAAA,KAAK,CAAC5E,YAAN,GAAqB,KAArB;AACA4E,oBAAAA,KAAK,CAAC1E,YAAN,GAAqB,IAArB;AACA0E,oBAAAA,KAAK,CAACzE,YAAN,GAAqB,KAArB;AACD,mBAND;AAOD;;AAvD+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyDnC,KAjtDM;AAktDP;AACA;AACAyL,IAAAA,aAptDO,2BAotDS;AACd;AACA,UAAIhH,KAAK,GAAG,IAAZ;;AACA,UAAIuH,IAAI,GAAGvH,KAAK,CAACpH,QAAN,CAAe,CAAf,CAAX;AACA,UAAI4O,IAAI,GAAGxH,KAAK,CAACpH,QAAN,CAAe,CAAf,CAAX;AACA,UAAIoQ,WAAW,GAAGhJ,KAAK,CAACrH,UAAN,CAAiB,CAAjB,CAAlB,CALc,CAKyB;;AACvC,UAAIsQ,UAAU,GAAGjJ,KAAK,CAACrH,UAAN,CAAiB,CAAjB,CAAjB,CANc,CAMwB;;AACtC,UAAIqT,MAAJ,EAAYC,OAAZ;;AACA,UAAIjM,KAAK,CAAC9G,WAAN,IAAqB,CAAzB,EAA4B;AAC1B8G,QAAAA,KAAK,CAACkM,QAAN,GAAiB,CAAjB;AACAlM,QAAAA,KAAK,CAACmM,QAAN,GAAiB,CAAjB,CAF0B,CAG1B;;AACA,YAAInM,KAAK,CAACxH,UAAN,GAAmBwH,KAAK,CAACvH,WAA7B,EAA0C;AACxCuH,UAAAA,KAAK,CAACkE,QAAN,GAAiB,CAAjB;AACAlE,UAAAA,KAAK,CAACoM,YAAN,GAAqBhL,IAAI,CAAC6G,KAAL,CAAWjI,KAAK,CAACzG,SAAN,GAAkByG,KAAK,CAAC5G,SAAnC,CAArB;AACA4G,UAAAA,KAAK,CAACqM,aAAN,GAAsBjL,IAAI,CAAC6G,KAAL,CAClBjI,KAAK,CAACzG,SAAN,GAAkByG,KAAK,CAAC3G,UAAzB,GAAuC,KAAKb,UAA7C,GACEwH,KAAK,CAACvH,WAFY,CAAtB;AAIAuH,UAAAA,KAAK,CAACsM,QAAN,GAAiB,CAAjB;AACAtM,UAAAA,KAAK,CAACuM,QAAN,GAAiBnL,IAAI,CAAC6G,KAAL,CACf,CAACjI,KAAK,CAAC3G,UAAN,GAAmB2G,KAAK,CAACzG,SAAzB,GAAqCyG,KAAK,CAACqM,aAA5C,IAA6D,CAD9C,CAAjB;AAIArM,UAAAA,KAAK,CAAC/D,KAAN,GAAcgI,QAAQ,CAACjE,KAAK,CAACkE,QAAN,GAAiB,GAAlB,CAAtB;AACAlE,UAAAA,KAAK,CAACwM,QAAN,GAAiBxM,KAAK,CAAC/D,KAAvB;AACD,SAdD,MAcO;AACL;AACA+D,UAAAA,KAAK,CAACqM,aAAN,GAAsBrM,KAAK,CAACzG,SAAN,GAAkByG,KAAK,CAAC3G,UAA9C;AACA2G,UAAAA,KAAK,CAACoM,YAAN,GAAqBhL,IAAI,CAAC6G,KAAL,CACjBjI,KAAK,CAACzG,SAAN,GAAkByG,KAAK,CAAC5G,SAAzB,GAAsC,KAAKX,WAA5C,GACEuH,KAAK,CAACxH,UAFW,CAArB;AAIAwH,UAAAA,KAAK,CAACuM,QAAN,GAAiB,CAAjB;AACAvM,UAAAA,KAAK,CAACsM,QAAN,GAAiBlL,IAAI,CAAC6G,KAAL,CACb,CAACjI,KAAK,CAAC5G,SAAN,GAAkB4G,KAAK,CAACzG,SAAxB,GAAoCyG,KAAK,CAACoM,YAA3C,IAA2D,CAD9C,CAAjB;AAIApM,UAAAA,KAAK,CAACkE,QAAN,GAAiB,CAAjB;AACAlE,UAAAA,KAAK,CAAC/D,KAAN,GAAcgI,QAAQ,CAACjE,KAAK,CAACkE,QAAN,GAAiB,GAAlB,CAAtB;AACAlE,UAAAA,KAAK,CAACwM,QAAN,GAAiBxM,KAAK,CAAC/D,KAAvB;AACD;;AACD+D,QAAAA,KAAK,CAACtH,cAAN,GAAuBsH,KAAK,CAACoM,YAA7B;AACApM,QAAAA,KAAK,CAAC/G,cAAN,GAAuB+G,KAAK,CAACqM,aAA7B;AACD,OApCD,MAoCO,IAAIrM,KAAK,CAAC9G,WAAN,IAAqB,CAAzB,EAA4B;AACjC8G,QAAAA,KAAK,CAACkM,QAAN,GAAiB,CAAjB;AACAlM,QAAAA,KAAK,CAACmM,QAAN,GAAiB,CAAjB;AAEAnM,QAAAA,KAAK,CAACoM,YAAN,GAAqBhL,IAAI,CAAC6G,KAAL,CACjBjI,KAAK,CAACjH,QAAN,IAAkBiH,KAAK,CAACpH,QAAN,CAAe,CAAf,IAAoBoH,KAAK,CAACrH,UAAN,CAAiB,CAAjB,CAAtC,CADiB,CAArB;AAGAqH,QAAAA,KAAK,CAACqM,aAAN,GAAsBjL,IAAI,CAAC6G,KAAL,CAClBjI,KAAK,CAAChH,SAAN,IAAmBgH,KAAK,CAACpH,QAAN,CAAe,CAAf,IAAoBoH,KAAK,CAACrH,UAAN,CAAiB,CAAjB,CAAvC,CADkB,CAAtB;AAGAqH,QAAAA,KAAK,CAACtH,cAAN,GAAuBsH,KAAK,CAACoM,YAA7B;AACApM,QAAAA,KAAK,CAAC/G,cAAN,GAAuB+G,KAAK,CAACqM,aAA7B;;AACA,YAAIrM,KAAK,CAACxG,GAAN,CAAU8K,KAAV,GAAkBtE,KAAK,CAACxG,GAAN,CAAUiL,MAAhC,EAAwC;AACtCzE,UAAAA,KAAK,CAACkE,QAAN,GAAiB,CAAjB;AACAlE,UAAAA,KAAK,CAAC/D,KAAN,GAAcgI,QAAQ,CAACjE,KAAK,CAACkE,QAAN,GAAiB,GAAlB,CAAtB;AACAlE,UAAAA,KAAK,CAACwM,QAAN,GAAiBxM,KAAK,CAAC/D,KAAvB,CAHsC,CAItC;;AACA+P,UAAAA,MAAM,GAAIzE,IAAI,GAAG0B,UAAR,GAAsB,KAAKlQ,QAApC;AACAkT,UAAAA,OAAO,GAAIzE,IAAI,GAAGwB,WAAR,GAAuB,KAAKhQ,SAAtC;AACAgH,UAAAA,KAAK,CAACyM,OAAN,CAAchI,MAAd,GAAuBwH,OAAO,GAAGjM,KAAK,CAACzG,SAAvC;AACAyG,UAAAA,KAAK,CAACyM,OAAN,CAAcnI,KAAd,GAAsB0H,MAAM,GAAGhM,KAAK,CAACzG,SAArC;AACAyG,UAAAA,KAAK,CAACoH,IAAN,GACE,CAACpH,KAAK,CAAC5G,SAAN,GAAkB4G,KAAK,CAACzG,SAAxB,GAAoCyG,KAAK,CAACyM,OAAN,CAAcnI,KAAnD,IAA4D,CAD9D;AAEAtE,UAAAA,KAAK,CAACqH,IAAN,GACE,CAACrH,KAAK,CAAC3G,UAAN,GAAmB2G,KAAK,CAACzG,SAAzB,GAAqCyG,KAAK,CAACyM,OAAN,CAAchI,MAApD,IAA8D,CADhE;AAED,SAbD,MAaO;AACLzE,UAAAA,KAAK,CAACkE,QAAN,GAAiB,CAAjB;AACAlE,UAAAA,KAAK,CAAC/D,KAAN,GAAcgI,QAAQ,CAACjE,KAAK,CAACkE,QAAN,GAAiB,GAAlB,CAAtB;AACAlE,UAAAA,KAAK,CAACwM,QAAN,GAAiBxM,KAAK,CAAC/D,KAAvB,CAHK,CAKL;;AACA+P,UAAAA,MAAM,GAAIzE,IAAI,GAAG0B,UAAR,GAAsB,KAAKlQ,QAApC;AAEAkT,UAAAA,OAAO,GAAIzE,IAAI,GAAGwB,WAAR,GAAuB,KAAKhQ,SAAtC;AAEAgH,UAAAA,KAAK,CAACyM,OAAN,CAAchI,MAAd,GAAuBwH,OAAO,GAAGjM,KAAK,CAACzG,SAAvC;AACAyG,UAAAA,KAAK,CAACyM,OAAN,CAAcnI,KAAd,GAAsB0H,MAAM,GAAGhM,KAAK,CAACzG,SAArC;AACAyG,UAAAA,KAAK,CAACoH,IAAN,GACE,CAACpH,KAAK,CAAC5G,SAAN,GAAkB4G,KAAK,CAACzG,SAAxB,GAAoCyG,KAAK,CAACyM,OAAN,CAAcnI,KAAnD,IAA4D,CAD9D;AAEAtE,UAAAA,KAAK,CAACqH,IAAN,GACE,CAACrH,KAAK,CAAC3G,UAAN,GAAmB2G,KAAK,CAACzG,SAAzB,GAAqCyG,KAAK,CAACyM,OAAN,CAAchI,MAApD,IAA8D,CADhE;AAED;;AACDzE,QAAAA,KAAK,CAAC6H,SAAN;AACD,OAvFa,CAwFd;;AACD,KA7yDM;AA8yDP6E,IAAAA,aA9yDO,2BA8yDS;AACd;AACA,WAAKtR,YAAL,GAAoB,IAApB;AACA,WAAKC,cAAL,GAAsB,KAAtB,CAHc,CAId;;AACA,WAAKC,YAAL,GAAoB,KAApB;AACA,WAAKC,YAAL,GAAoB,IAApB;AACD,KArzDM;AAszDP;AACAoR,IAAAA,SAvzDO,uBAuzDK;AACV,WAAKvR,YAAL,GAAoB,KAApB;AACA,WAAKC,cAAL,GAAsB,IAAtB,CAFU,CAGV;;AACA,WAAKC,YAAL,GAAoB,IAApB;AACA,WAAKC,YAAL,GAAoB,KAApB,CALU,CAMV;AACA;AACD,KA/zDM;AAg0DP;AACAqR,IAAAA,WAj0DO,uBAi0DKC,CAj0DL,EAi0DQ;AACb,UAAM7M,KAAK,GAAG,IAAd;;AAEA,UAAIA,KAAK,CAAC5H,OAAN,IAAiB,CAAjB,IAAsB4H,KAAK,CAAC5H,OAAN,IAAiB,KAA3C,EAAkD;AAChD4H,QAAAA,KAAK,CAACuG,aAAN,CAAoBsG,CAApB;AACD,OAFD,MAEO;AACL;AACD;AACF,KAz0DM;AA00DPC,IAAAA,YA10DO,wBA00DMD,CA10DN,EA00DS;AACd,UAAM7M,KAAK,GAAG,IAAd;;AAEA,UAAIA,KAAK,CAAC5H,OAAN,IAAiB,CAAjB,IAAsB4H,KAAK,CAAC5H,OAAN,IAAiB,KAA3C,EAAkD;AAChD;AACD,OAFD,MAEO;AACL4H,QAAAA,KAAK,CAACuG,aAAN,CAAoBsG,CAApB;AACD;AACF,KAl1DM;AAm1DPtG,IAAAA,aAn1DO,yBAm1DOsG,CAn1DP,EAm1DU;AACf,UAAM7M,KAAK,GAAG,IAAd,CADe,CAEf;AACA;AACA;AACA;AACA;;;AAEA,UAAIA,KAAK,CAAC5H,OAAN,IAAiB,CAAjB,IAAsB4H,KAAK,CAAC5H,OAAN,IAAiB,KAA3C,EAAkD;AAEhD,YAAI2U,MAAM,GAAG,IAAIxX,MAAM,CAACyO,KAAX,CACThE,KAAK,CAAC5G,SAAN,GAAkB,CADT,EAET4G,KAAK,CAAC3G,UAAN,GAAmB,CAFV,CAAb,CAFgD,CAK7C;;AACH2G,QAAAA,KAAK,CAACvG,UAAN,CAAiB0K,WAAjB,CAA6B4I,MAA7B,EAAqCF,CAAC,GAAG,GAAzC;AAED,OARD,MAQO;AACL7M,QAAAA,KAAK,CAACkE,QAAN,GAAiB2I,CAAC,GAAG,GAArB;;AACA,YAAI7M,KAAK,CAAC5H,OAAN,IAAiB,KAArB,EAA4B;AAC1B4H,UAAAA,KAAK,CAACkE,QAAN,GAAiBlE,KAAK,CAACkE,QAAN,GAAiB,CAAlC;AACD;;AACDlE,QAAAA,KAAK,CAAC8D,MAAN,CAAa1C,IAAI,CAACC,KAAL,CAAWwL,CAAC,GAAG,CAAf,IAAoB,GAAjC;AACD;AACF,KA12DM;AA22DPG,IAAAA,GA32DO,eA22DHzP,IA32DG,EA22DG;AACR;AACA;AAEA,WAAK2B,OAAL,CAAaxB,IAAb,CAAkB;AAChBiC,QAAAA,IAAI,EAAE,QADU;AAEhBsN,QAAAA,KAAK,EAAE;AAACC,UAAAA,CAAC,EAAE3P;AAAJ;AAFS,OAAlB;AAKD,KAp3DM;AAq3DP4P,IAAAA,UAr3DO,wBAq3DM;AACX,WAAKC,MAAL,CAAY7V,KAAZ,CAAkB8V,aAAlB,GAAkC,eAAlC;AACA,WAAKC,UAAL,GAAkBlR,QAAQ,CAACC,sBAAT,CAAgC,WAAhC,EAA6C,CAA7C,CAAlB,CAFW,CAIX;;AAEA,UAAM2D,KAAK,GAAG,IAAd,CANW,CAOX;AACA;AACA;;;AACA,WAAKuN,UAAL,GAAkB,KAAKlO,KAAL,CAAWkO,UAA7B;AACA,WAAKpS,OAAL,GAAe,KAAKoS,UAAL,CAAgB7F,UAAhB,CAA2B,IAA3B,CAAf,CAXW,CAYX;;AACA,WAAKhO,QAAL,GAAgB,IAAInE,MAAM,CAACiY,MAAX,CAAkB,WAAlB,EAA+B;AAC7CC,QAAAA,eAAe,EAAE,MAD4B;AAE7CC,QAAAA,aAAa,EAAE;AAF8B,OAA/B,CAAhB;AAKA,UAAMC,KAAK,GAAG,eAAd;AACA,WAAKjU,QAAL,CAAckU,kBAAd,CAAiCD,KAAjC,EAnBW,CAoBX;;AACA,WAAKjU,QAAL,CAAc+O,SAAd;AAEA,WAAK/O,QAAL,CAAc4O,QAAd,CAAuBtI,KAAK,CAAC5G,SAA7B;AACA,WAAKM,QAAL,CAAc6O,SAAd,CAAwBvI,KAAK,CAAC3G,UAA9B;AAEA,WAAKK,QAAL,CAAcmU,EAAd,CAAiB;AACf;AACA,uBAAe,oBAACC,CAAD,EAAO;AACpB;AACAC,UAAAA,KAAK,CAACC,cAAN,IAAwBD,KAAK,CAACC,cAAN,EAAxB,CAFoB,CAGpB;;AACA,cACI,CAAChO,KAAK,CAACkE,QAAN,GAAiB,GAAjB,IAAwB6J,KAAK,CAAClE,MAAN,GAAe,CAAxC,MACC7J,KAAK,CAACkE,QAAN,GAAiB,CAAjB,IAAsB6J,KAAK,CAAClE,MAAN,GAAe,CADtC,CADJ,EAGE;AACA7J,YAAAA,KAAK,CAACkE,QAAN,GACI,CAAC6J,KAAK,CAAClE,MAAN,GAAe,CAAf,GAAmB,CAAC,GAApB,GAA0B,GAA3B,IAAkC7J,KAAK,CAACtG,QAAN,CAAeuU,OAAf,EADtC,CADA,CAGA;;AACAjO,YAAAA,KAAK,CAACkE,QAAN,GAAiB9C,IAAI,CAACyD,GAAL,CAAS,GAAT,EAAc7E,KAAK,CAACkE,QAApB,CAAjB,CAJA,CAIgD;;AAChDlE,YAAAA,KAAK,CAACkE,QAAN,GAAiB9C,IAAI,CAAC8M,GAAL,CAAS,CAAT,EAAYlO,KAAK,CAACkE,QAAlB,CAAjB,CALA,CAK8C;;AAC9ClE,YAAAA,KAAK,CAACkE,QAAN,GAAiB9C,IAAI,CAACC,KAAL,CAAWrB,KAAK,CAACkE,QAAN,GAAiB,KAA5B,IAAqC,KAAtD;AACA,gBAAIH,MAAM,GAAG,CAAb;;AACA,gBAAIgK,KAAK,CAAClE,MAAN,GAAe,CAAnB,EAAsB;AACpB;AACA9F,cAAAA,MAAM,GAAG/D,KAAK,CAACkE,QAAN,IAAkBlE,KAAK,CAACkE,QAAN,GAAiB,GAAnC,CAAT;AACD,aAHD,MAGO;AACL;AACAH,cAAAA,MAAM,GAAG/D,KAAK,CAACkE,QAAN,IAAkBlE,KAAK,CAACkE,QAAN,GAAiB,GAAnC,CAAT;AACD;;AACDlE,YAAAA,KAAK,CAAC/I,MAAN,GAAe+I,KAAK,CAACkE,QAAN,GAAiB,GAAhC,CAfA,CAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAlE,YAAAA,KAAK,CAAC8D,MAAN,CAAaC,MAAb;AACD;AACF;AAnCc,OAAjB,EA1BW,CAgEX;;AACA,UAAIoK,EAAJ,EAAQC,EAAR;;AACApO,MAAAA,KAAK,CAACtG,QAAN,CAAemU,EAAf,CAAkB,eAAlB,EAAmC,UAAUC,CAAV,EAAa;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YACIA,CAAC,CAACO,MAAF,CAAShK,IAAT,GACArE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QAFtD,EAGE;AACA;AACA4J,UAAAA,CAAC,CAACO,MAAF,CAAShK,IAAT,GACIrE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QADtD;AAED,SAPD,MAOO,IACH4J,CAAC,CAACO,MAAF,CAAShK,IAAT,GACArE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QAF/C,EAGL;AACA4J,UAAAA,CAAC,CAACO,MAAF,CAAShK,IAAT,GACIrE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QADtD;AAED,SArB6C,CAsB9C;;;AACA,YACI4J,CAAC,CAACO,MAAF,CAAS7J,GAAT,GACAxE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QAFtD,EAGE;AACA;AACA4J,UAAAA,CAAC,CAACO,MAAF,CAAS7J,GAAT,GACIxE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QADtD;AAED,SAPD,MAOO,IACH4J,CAAC,CAACO,MAAF,CAAS7J,GAAT,GACAxE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QAF/C,EAGL;AACA4J,UAAAA,CAAC,CAACO,MAAF,CAAS7J,GAAT,GACIxE,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACkE,QADtD;AAED;;AACD,YAAIlE,KAAK,CAAC/F,KAAN,IAAe+F,KAAK,CAAC/F,KAAN,CAAYyG,MAAZ,IAAsB,CAAzC,EAA4C;AAC1CyN,UAAAA,EAAE,GAAGL,CAAC,CAACO,MAAF,CAAShK,IAAT,GAAgBrE,KAAK,CAACnF,MAAN,CAAawJ,IAAlC;AACA+J,UAAAA,EAAE,GAAGN,CAAC,CAACO,MAAF,CAAS7J,GAAT,GAAexE,KAAK,CAACnF,MAAN,CAAa2J,GAAjC;;AACAxE,UAAAA,KAAK,CAACjG,UAAN,CAAiB6H,OAAjB,CAAyB,UAAC9C,GAAD,EAAMoE,KAAN,EAAgB;AACvCpE,YAAAA,GAAG,CAACuF,IAAJ,GAAWrE,KAAK,CAAC/F,KAAN,CAAYiJ,KAAZ,EAAmBmB,IAAnB,GAA0B8J,EAArC;AACArP,YAAAA,GAAG,CAAC0F,GAAJ,GAAUxE,KAAK,CAAC/F,KAAN,CAAYiJ,KAAZ,EAAmBsB,GAAnB,GAAyB4J,EAAnC;;AACApO,YAAAA,KAAK,CAACtG,QAAN,CAAeiL,MAAf,CAAsB7F,GAAtB;;AACAkB,YAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmB9F,GAAnB;AACD,WALD,EAH0C,CAS1C;AACA;AACA;AACA;AACA;AACA;;;AAEAkB,UAAAA,KAAK,CAACnG,MAAN,GAAeiU,CAAC,CAACO,MAAjB;AACA,cAAIrJ,YAAY,GAAG5D,IAAI,CAAC6D,IAAL,CACf,CAAC,CAACjF,KAAK,CAACnG,MAAN,CAAawK,IAAb,GAAoBrE,KAAK,CAAC5G,SAAN,GAAkB,CAAvC,IAA4C4G,KAAK,CAACkE,QAAlD,GACGlE,KAAK,CAAC5G,SAAN,GAAkB,CADrB,GAEI4G,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAAlD,GAA8D,CAFlE,KAGClE,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAHlD,CADe,CAAnB;AAMA,cAAIgB,aAAa,GAAG9D,IAAI,CAAC6D,IAAL,CAChB,CAAC,CAACjF,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACnG,MAAN,CAAawK,IAApC,IAA4CrE,KAAK,CAACkE,QAAlD,GACGlE,KAAK,CAAC5G,SAAN,GAAkB,CADrB,GAEI4G,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAAlD,GAA8D,CAFlE,KAGClE,KAAK,CAACnG,MAAN,CAAayK,KAAb,GAAqBtE,KAAK,CAACnG,MAAN,CAAa0K,MAAlC,GAA2CvE,KAAK,CAACkE,QAHlD,CADgB,CAApB;AAMA,cAAIiB,YAAY,GAAG/D,IAAI,CAAC6D,IAAL,CACf,CAAC,CAACjF,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GAAmBxE,KAAK,CAAC5G,SAAN,GAAkB,CAAtC,IAA2C4G,KAAK,CAACkE,QAAjD,GACGlE,KAAK,CAAC5G,SAAN,GAAkB,CADrB,GAEI4G,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAAnD,GAA+D,CAFnE,KAGClE,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAHnD,CADe,CAAnB;AAMA,cAAIkB,eAAe,GAAGhE,IAAI,CAAC6D,IAAL,CAClB,CAAC,CAACjF,KAAK,CAAC5G,SAAN,GAAkB,CAAlB,GAAsB4G,KAAK,CAACnG,MAAN,CAAa2K,GAApC,IAA2CxE,KAAK,CAACkE,QAAjD,GACGlE,KAAK,CAAC5G,SAAN,GAAkB,CADrB,GAEI4G,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAAnD,GAA+D,CAFnE,KAGClE,KAAK,CAACnG,MAAN,CAAa4K,MAAb,GAAsBzE,KAAK,CAACnG,MAAN,CAAa0K,MAAnC,GAA4CvE,KAAK,CAACkE,QAHnD,CADkB,CAAtB;AAMAlE,UAAAA,KAAK,CAACvF,OAAN,GAAgB,CAAhB;AACAuF,UAAAA,KAAK,CAACtF,QAAN,GAAiB,CAAjB;AACAsF,UAAAA,KAAK,CAACrF,MAAN,GAAe,CAAf;AACAqF,UAAAA,KAAK,CAACpF,UAAN,GAAmB,CAAnB;;AACAoF,UAAAA,KAAK,CAACjG,UAAN,CAAiB6H,OAAjB,CAAyB,UAAC9C,GAAD,EAAS;AAChC,gBAAIA,GAAG,CAACuF,IAAJ,GAAWyJ,CAAC,CAACO,MAAF,CAAShK,IAApB,IAA4BvF,GAAG,CAAC0F,GAAJ,IAAWsJ,CAAC,CAACO,MAAF,CAAS7J,GAApD,EAAyD;AACvDxE,cAAAA,KAAK,CAACvF,OAAN,GAAgBuF,KAAK,CAACvF,OAAN,GAAgB,CAAhC;AACD,aAFD,MAEO,IAAIqE,GAAG,CAACuF,IAAJ,GAAWyJ,CAAC,CAACO,MAAF,CAAShK,IAApB,IAA4BvF,GAAG,CAAC0F,GAAJ,IAAWsJ,CAAC,CAACO,MAAF,CAAS7J,GAApD,EAAyD;AAC9DxE,cAAAA,KAAK,CAACtF,QAAN,GAAiBsF,KAAK,CAACtF,QAAN,GAAiB,CAAlC;AACD;;AACD,gBAAIoE,GAAG,CAAC0F,GAAJ,GAAUsJ,CAAC,CAACO,MAAF,CAAS7J,GAAnB,IAA0B1F,GAAG,CAACuF,IAAJ,IAAYyJ,CAAC,CAACO,MAAF,CAAShK,IAAnD,EAAyD;AACvDrE,cAAAA,KAAK,CAACrF,MAAN,GAAeqF,KAAK,CAACrF,MAAN,GAAe,CAA9B;AACD,aAFD,MAEO,IAAImE,GAAG,CAAC0F,GAAJ,GAAUsJ,CAAC,CAACO,MAAF,CAAS7J,GAAnB,IAA0B1F,GAAG,CAACuF,IAAJ,IAAYyJ,CAAC,CAACO,MAAF,CAAShK,IAAnD,EAAyD;AAC9DrE,cAAAA,KAAK,CAACpF,UAAN,GAAmBoF,KAAK,CAACpF,UAAN,GAAmB,CAAtC;AACD;AACF,WAXD;;AAaA,cAAMkK,KAAK,GAAG1I,QAAQ,CAACmE,aAAT,CAAuB,KAAvB,CAAd;AACAuE,UAAAA,KAAK,CAACC,WAAN,GAAoB,WAApB;AACAD,UAAAA,KAAK,CAAC9D,GAAN,GAAYhB,KAAK,CAACxG,GAAN,CAAUwH,GAAtB;;AACA,cAAIhB,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AACxB,gBAAI8M,YAAY,GAAGhF,KAAK,CAACvF,OAAzB,EAAkC;AAChC,kBAAI4K,CAAC,GAAGrF,KAAK,CAACvF,OAAN,GAAgB,CAAxB;AACAuF,cAAAA,KAAK,CAACvF,OAAN,GAAgBuK,YAAhB;;AACA,mBAAK,IAAIM,EAAE,GAAGD,CAAd,EAAiBC,EAAE,IAAIN,YAAvB,EAAqCM,EAAE,EAAvC,EAA2C;AACzCtF,gBAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACIrE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CgB,EAF/C;AAGAtF,gBAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GAAkBxE,KAAK,CAACnG,MAAN,CAAa2K,GAA/B;AACA,oBAAIe,IAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,kBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,kBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,kBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,kBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,kBAAAA,OAAO,EAAE,QAL4B;AAMrCC,kBAAAA,OAAO,EAAE;AAN4B,iBAA5B,CAAX;;AAQA1F,gBAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,IAAnB;;AACAvF,gBAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,IAAtB;;AACAvF,gBAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACAiG,gBAAAA,KAAK,CAACnF,MAAN,CAAawJ,IAAb,GAAoByJ,CAAC,CAACO,MAAF,CAAShK,IAA7B;AACArE,gBAAAA,KAAK,CAACnF,MAAN,CAAa2J,GAAb,GAAmBsJ,CAAC,CAACO,MAAF,CAAS7J,GAA5B;AACD;AACF,aAtBD,MAsBO,IAAIU,aAAa,GAAGlF,KAAK,CAACtF,QAA1B,EAAoC;AACzC,kBAAIiL,EAAE,GAAG3F,KAAK,CAACtF,QAAN,GAAiB,CAA1B;AACAsF,cAAAA,KAAK,CAACtF,QAAN,GAAiBwK,aAAjB;;AACA,mBAAK,IAAII,KAAE,GAAGK,EAAd,EAAkBL,KAAE,IAAIJ,aAAxB,EAAuCI,KAAE,EAAzC,EAA6C;AAC3CtF,gBAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACIrE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CgB,KAF/C;AAGAtF,gBAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GAAkBxE,KAAK,CAACnG,MAAN,CAAa2K,GAA/B;;AACA,oBAAIe,OAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,kBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,kBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,kBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,kBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,kBAAAA,OAAO,EAAE,QAL4B;AAMrCC,kBAAAA,OAAO,EAAE;AAN4B,iBAA5B,CAAX;;AAQA1F,gBAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,OAAnB;;AACAvF,gBAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,OAAtB;;AACAvF,gBAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACAiG,gBAAAA,KAAK,CAACnF,MAAN,CAAawJ,IAAb,GAAoByJ,CAAC,CAACO,MAAF,CAAShK,IAA7B;AACArE,gBAAAA,KAAK,CAACnF,MAAN,CAAa2J,GAAb,GAAmBsJ,CAAC,CAACO,MAAF,CAAS7J,GAA5B;AACD;AACF;AACF,WA9CD,MA8CO,IAAIxE,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AAC/B,gBAAIiN,YAAY,GAAGnF,KAAK,CAACrF,MAAzB,EAAiC;AAC/B,kBAAI0K,GAAC,GAAGrF,KAAK,CAACrF,MAAN,GAAe,CAAvB;;AACAqF,cAAAA,KAAK,CAACrF,MAAN,GAAewK,YAAf;;AACA,mBAAK,IAAIG,KAAE,GAAGD,GAAd,EAAiBC,KAAE,IAAIH,YAAvB,EAAqCG,KAAE,EAAvC,EAA2C;AACzCtF,gBAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GAAmBrE,KAAK,CAACnG,MAAN,CAAawK,IAAhC;AACArE,gBAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACIxE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4Ca,KAFhD;;AAGA,oBAAIC,OAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,kBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,kBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,kBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,kBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,kBAAAA,OAAO,EAAE,QAL4B;AAMrCC,kBAAAA,OAAO,EAAE;AAN4B,iBAA5B,CAAX;;AAQA1F,gBAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,OAAnB;;AACAvF,gBAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,OAAtB;;AACAvF,gBAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACAiG,gBAAAA,KAAK,CAACnF,MAAN,CAAawJ,IAAb,GAAoByJ,CAAC,CAACO,MAAF,CAAShK,IAA7B;AACArE,gBAAAA,KAAK,CAACnF,MAAN,CAAa2J,GAAb,GAAmBsJ,CAAC,CAACO,MAAF,CAAS7J,GAA5B;AACD;AACF,aAtBD,MAsBO,IAAIY,eAAe,GAAGpF,KAAK,CAACpF,UAA5B,EAAwC;AAC7C,kBAAI+K,GAAE,GAAG3F,KAAK,CAACpF,UAAN,GAAmB,CAA5B;;AACAoF,cAAAA,KAAK,CAACpF,UAAN,GAAmBwK,eAAnB;;AACA,mBAAK,IAAIE,KAAE,GAAGK,GAAd,EAAkBL,KAAE,IAAIF,eAAxB,EAAyCE,KAAE,EAA3C,EAA+C;AAC7CtF,gBAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GAAmBrE,KAAK,CAACnG,MAAN,CAAawK,IAAhC;AACArE,gBAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACIxE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4Ca,KAFhD;;AAGA,oBAAIC,OAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,kBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,kBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,kBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,kBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,kBAAAA,OAAO,EAAE,QAL4B;AAMrCC,kBAAAA,OAAO,EAAE;AAN4B,iBAA5B,CAAX;;AAQA1F,gBAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,OAAnB;;AACAvF,gBAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,OAAtB;;AACAvF,gBAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACAiG,gBAAAA,KAAK,CAACnF,MAAN,CAAawJ,IAAb,GAAoByJ,CAAC,CAACO,MAAF,CAAShK,IAA7B;AACArE,gBAAAA,KAAK,CAACnF,MAAN,CAAa2J,GAAb,GAAmBsJ,CAAC,CAACO,MAAF,CAAS7J,GAA5B;AACD;AACF;AACF,WA9CM,MA8CA,IAAIxE,KAAK,CAAC9H,SAAN,IAAmB,CAAvB,EAA0B;AAC/B;AACA;AACA,gBAAI8M,YAAY,GAAGhF,KAAK,CAACvF,OAAzB,EAAkC;AAChC,kBAAI4K,GAAC,GAAGrF,KAAK,CAACvF,OAAN,GAAgB,CAAxB;;AACAuF,cAAAA,KAAK,CAACvF,OAAN,GAAgBuK,YAAhB;;AACA,mBAAK,IAAIM,KAAE,GAAGD,GAAd,EAAiBC,KAAE,IAAIN,YAAvB,EAAqCM,KAAE,EAAvC,EAA2C;AACzC,qBACI,IAAIM,GAAG,GAAG5F,KAAK,CAACpF,UAAN,GAAmB,CAAC,CADlC,EAEIgL,GAAG,IAAI5F,KAAK,CAACrF,MAFjB,EAGIiL,GAAG,EAHP,EAIE;AACA5F,kBAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACIrE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CgB,KAF/C;AAGAtF,kBAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACIxE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4CmB,GAFhD;;AAGA,sBAAIL,OAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,oBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,oBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,oBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,oBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,oBAAAA,OAAO,EAAE,QAL4B;AAMrCC,oBAAAA,OAAO,EAAE;AAN4B,mBAA5B,CAAX;;AAQA1F,kBAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,OAAnB;;AACAvF,kBAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,OAAtB;;AACAvF,kBAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACAiG,kBAAAA,KAAK,CAACnF,MAAN,CAAawJ,IAAb,GAAoByJ,CAAC,CAACO,MAAF,CAAShK,IAA7B;AACArE,kBAAAA,KAAK,CAACnF,MAAN,CAAa2J,GAAb,GAAmBsJ,CAAC,CAACO,MAAF,CAAS7J,GAA5B;AACD;AACF;AACF,aA9BD,MA8BO,IAAIU,aAAa,GAAGlF,KAAK,CAACtF,QAA1B,EAAoC;AACzC,kBAAIiL,IAAE,GAAG3F,KAAK,CAACtF,QAAN,GAAiB,CAA1B;;AACAsF,cAAAA,KAAK,CAACtF,QAAN,GAAiBwK,aAAjB;;AACA,mBAAK,IAAII,KAAE,GAAGK,IAAd,EAAkBL,KAAE,IAAIJ,aAAxB,EAAuCI,KAAE,EAAzC,EAA6C;AAC3C,qBACI,IAAIM,KAAG,GAAG5F,KAAK,CAACpF,UAAN,GAAmB,CAAC,CADlC,EAEIgL,KAAG,IAAI5F,KAAK,CAACrF,MAFjB,EAGIiL,KAAG,EAHP,EAIE;AACA5F,kBAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACIrE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CgB,KAF/C;AAGAtF,kBAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACIxE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4CmB,KAFhD;;AAGA,sBAAIL,OAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,oBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,oBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,oBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,oBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,oBAAAA,OAAO,EAAE,QAL4B;AAMrCC,oBAAAA,OAAO,EAAE;AAN4B,mBAA5B,CAAX;;AAQA1F,kBAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,OAAnB;;AACAvF,kBAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,OAAtB;;AACAvF,kBAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACAiG,kBAAAA,KAAK,CAACnF,MAAN,CAAawJ,IAAb,GAAoByJ,CAAC,CAACO,MAAF,CAAShK,IAA7B;AACArE,kBAAAA,KAAK,CAACnF,MAAN,CAAa2J,GAAb,GAAmBsJ,CAAC,CAACO,MAAF,CAAS7J,GAA5B;AACD;AACF;AACF;;AACD,gBAAIW,YAAY,GAAGnF,KAAK,CAACrF,MAAzB,EAAiC;AAC/B,kBAAI0K,IAAC,GAAGrF,KAAK,CAACrF,MAAN,GAAe,CAAvB;;AACAqF,cAAAA,KAAK,CAACrF,MAAN,GAAewK,YAAf;;AACA,mBAAK,IAAIG,KAAE,GAAGD,IAAd,EAAiBC,KAAE,IAAIH,YAAvB,EAAqCG,KAAE,EAAvC,EAA2C;AACzC,qBAAK,IAAIM,KAAG,GAAG5F,KAAK,CAACtF,QAAN,GAAiB,CAAC,CAAjC,EAAoCkL,KAAG,IAAI5F,KAAK,CAACvF,OAAjD,EAA0DmL,KAAG,EAA7D,EAAiE;AAC/D5F,kBAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACIrE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CsB,KAF/C;AAGA5F,kBAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACIxE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4Ca,KAFhD;;AAGA,sBAAIC,OAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,oBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,oBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,oBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,oBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,oBAAAA,OAAO,EAAE,QAL4B;AAMrCC,oBAAAA,OAAO,EAAE;AAN4B,mBAA5B,CAAX;;AAQA1F,kBAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,OAAnB;;AACAvF,kBAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,OAAtB;;AACAvF,kBAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACAiG,kBAAAA,KAAK,CAACnF,MAAN,CAAawJ,IAAb,GAAoByJ,CAAC,CAACO,MAAF,CAAShK,IAA7B;AACArE,kBAAAA,KAAK,CAACnF,MAAN,CAAa2J,GAAb,GAAmBsJ,CAAC,CAACO,MAAF,CAAS7J,GAA5B;AACD;AACF;AACF,aA1BD,MA0BO,IAAIY,eAAe,GAAGpF,KAAK,CAACpF,UAA5B,EAAwC;AAC7C,kBAAI+K,IAAE,GAAG3F,KAAK,CAACpF,UAAN,GAAmB,CAA5B;;AACAoF,cAAAA,KAAK,CAACpF,UAAN,GAAmBwK,eAAnB;;AACA,mBAAK,IAAIE,KAAE,GAAGK,IAAd,EAAkBL,KAAE,IAAIF,eAAxB,EAAyCE,KAAE,EAA3C,EAA+C;AAC7C,qBAAK,IAAIM,KAAG,GAAG5F,KAAK,CAACtF,QAAN,GAAiB,CAAC,CAAjC,EAAoCkL,KAAG,IAAI5F,KAAK,CAACvF,OAAjD,EAA0DmL,KAAG,EAA7D,EAAiE;AAC/D5F,kBAAAA,KAAK,CAACxF,KAAN,CAAY6J,IAAZ,GACIrE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GACArE,KAAK,CAACnG,MAAN,CAAa0K,MAAb,GAAsBvE,KAAK,CAACnG,MAAN,CAAayK,KAAnC,GAA2CsB,KAF/C;AAIA5F,kBAAAA,KAAK,CAACxF,KAAN,CAAYgK,GAAZ,GACIxE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GACAxE,KAAK,CAACnG,MAAN,CAAa6K,MAAb,GAAsB1E,KAAK,CAACnG,MAAN,CAAa4K,MAAnC,GAA4Ca,KAFhD;;AAGA,sBAAIC,OAAI,GAAG,IAAIhQ,MAAM,CAACiQ,KAAX,CAAiBxF,KAAK,CAACxG,GAAvB,EAA4B;AACrC+K,oBAAAA,MAAM,EAAEvE,KAAK,CAACnG,MAAN,CAAa0K,MADgB;AAErCG,oBAAAA,MAAM,EAAE1E,KAAK,CAACnG,MAAN,CAAa6K,MAFgB;AAGrCF,oBAAAA,GAAG,EAAExE,KAAK,CAACxF,KAAN,CAAYgK,GAHoB;AAIrCH,oBAAAA,IAAI,EAAErE,KAAK,CAACxF,KAAN,CAAY6J,IAJmB;AAKrCoB,oBAAAA,OAAO,EAAE,QAL4B;AAMrCC,oBAAAA,OAAO,EAAE;AAN4B,mBAA5B,CAAX;;AAQA1F,kBAAAA,KAAK,CAACtG,QAAN,CAAekL,GAAf,CAAmBW,OAAnB;;AACAvF,kBAAAA,KAAK,CAACjG,UAAN,CAAiB2D,IAAjB,CAAsB6H,OAAtB;;AACAvF,kBAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACAiG,kBAAAA,KAAK,CAACnF,MAAN,CAAawJ,IAAb,GAAoByJ,CAAC,CAACO,MAAF,CAAShK,IAA7B;AACArE,kBAAAA,KAAK,CAACnF,MAAN,CAAa2J,GAAb,GAAmBsJ,CAAC,CAACO,MAAF,CAAS7J,GAA5B;AACD;AACF;AACF;AACF;AACF,SAhRD,MAgRO;AACLxE,UAAAA,KAAK,CAACnG,MAAN,GAAeiU,CAAC,CAACO,MAAjB;AACArO,UAAAA,KAAK,CAAC9F,OAAN,GAAgB;AACdmK,YAAAA,IAAI,EAAErE,KAAK,CAACnG,MAAN,CAAawK,IAAb,GAAqBrE,KAAK,CAAC5G,SAAN,GAAkB,CAAnB,GAAwB4G,KAAK,CAACkE,QAD1C;AAEdM,YAAAA,GAAG,EAAExE,KAAK,CAACnG,MAAN,CAAa2K,GAAb,GAAoBxE,KAAK,CAAC5G,SAAN,GAAkB,CAAnB,GAAwB4G,KAAK,CAACkE;AAFxC,WAAhB;AAID;;AACDlE,QAAAA,KAAK,CAAC6F,aAAN;AACD,OA7TD,EAlEW,CAiYX;AAEA;;;AACA7F,MAAAA,KAAK,CAACtG,QAAN,CAAemU,EAAf,CAAkB,YAAlB,EAAgC,UAAUC,CAAV,EAAa;AAC3C;AACA,YAAIA,CAAC,CAACO,MAAF,IAAY,IAAhB,EAAsB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACAP,UAAAA,CAAC,CAACO,MAAF,CAASlI,WAAT,GAAuB,KAAvB;AACA2H,UAAAA,CAAC,CAACO,MAAF,CAASC,UAAT,GAAsB,KAAtB;AACAtO,UAAAA,KAAK,CAAC/F,KAAN,GAAciD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACU,SAAL,CAAeoC,KAAK,CAACjG,UAArB,CAAX,CAAd;AACAiG,UAAAA,KAAK,CAACnF,MAAN,CAAawJ,IAAb,GAAoByJ,CAAC,CAACO,MAAF,CAAShK,IAA7B;AACArE,UAAAA,KAAK,CAACnF,MAAN,CAAa2J,GAAb,GAAmBsJ,CAAC,CAACO,MAAF,CAAS7J,GAA5B;AACAxE,UAAAA,KAAK,CAAClF,OAAN,GAAgB,IAAIyT,IAAJ,GAAWC,OAAX,EAAhB;AACD;AACF,OAjBD;;AAkBA,WAAKnG,SAAL,GAAiB,IAAI9S,MAAM,CAACiY,MAAX,CAAkB,YAAlB,EAAgC;AAC/CC,QAAAA,eAAe,EAAE,MAD8B;AAE/CC,QAAAA,aAAa,EAAE;AAFgC,OAAhC,CAAjB;AAMA,WAAKjU,UAAL,GAAkB,IAAIlE,MAAM,CAACiY,MAAX,CAAkB,YAAlB,EAAgC;AAChDC,QAAAA,eAAe,EAAE,MAD+B;AAEhDC,QAAAA,aAAa,EAAE;AAFiC,OAAhC,CAAlB;AAKA,WAAKjU,UAAL,CAAgB6O,QAAhB,CAAyB,KAAKlP,SAA9B;AACA,WAAKK,UAAL,CAAgB8O,SAAhB,CAA0B,KAAKlP,UAA/B,EAlaW,CAoaX;AACD,KA1xEM;AA2xEPoV,IAAAA,aA3xEO,2BA2xES;AAEd,UAAIC,SAAS,GACTtS,QAAQ,CAACuS,eAAT,CAAyBC,SAAzB,IAAsCxS,QAAQ,CAACyS,IAAT,CAAcD,SADxD;;AAGA,UAAIF,SAAS,GAAG,IAAhB,EAAsB;AACpB;AACAtS,QAAAA,QAAQ,CAACC,sBAAT,CAAgC,IAAhC,EAAsC,CAAtC,EAAyCC,KAAzC,CAA+CC,QAA/C,GAA0D,OAA1D;AACAH,QAAAA,QAAQ,CAACC,sBAAT,CAAgC,IAAhC,EAAsC,CAAtC,EAAyCC,KAAzC,CAA+CkI,GAA/C,GAAqD,MAArD;AAED,OALD,MAKO;AACLpI,QAAAA,QAAQ,CAACC,sBAAT,CAAgC,IAAhC,EAAsC,CAAtC,EAAyCC,KAAzC,CAA+CC,QAA/C,GAA0D,UAA1D;AACD;AACF,KAxyEM,CAyyEP;AACA;AAEA;;AA5yEO,GA1II;AAw7EbuS,EAAAA,OAx7Ea,qBAw7EH;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAI/Q,EAAE,GAAG,IAAT,CAbQ,CAeR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAAK9H,EAAL,GAAU,KAAV,CA9BQ,CAgCR;;AACA,SAAKkN,MAAL,GAjCQ,CAkCR;;AAGArG,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACD,GA99EY;AAg+EbgS,EAAAA,SAh+Ea,uBAg+ED;AAAE;AACZ,QAAM/O,KAAK,GAAC,IAAZ;;AAEAJ,IAAAA,MAAM,CAACoP,mBAAP,CAA2B,QAA3B,EAAqChP,KAAK,CAACyO,aAA3C,EAA0D,KAA1D;AACD,GAp+EY;AAq+EbQ,EAAAA,OAr+Ea,qBAq+EH;AACR,QAAMjP,KAAK,GAAC,IAAZ;;AACAA,IAAAA,KAAK,CAACrK,OAAN,GAAc,KAAd,CAFQ,CAGR;AACA;AACA;AACA;;AAEA,QAAIuZ,EAAE,GAAG,KAAKC,MAAL,CAAYxP,IAAZ,CAAiBgC,KAAjB,CAAuB,GAAvB,CAAT;AACA,SAAK7L,SAAL,GAAiBoZ,EAAE,CAACA,EAAE,CAACxO,MAAH,GAAY,CAAb,CAAnB,CATQ,CAUR;AACA;AACA;AACA;;AACA,SAAKY,SAAL;AACA,SAAK6L,UAAL;AAEAvN,IAAAA,MAAM,CAACwP,gBAAP,CAAwB,QAAxB,EAAkCpP,KAAK,CAACyO,aAAxC,EAAuD,KAAvD;AACD,GAv/EY,CAw/Eb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA//Ea,CAAf","names":["components","Bottom","Cell","Shou","fabric","data","locking","con","textarea1","productId","downLoad","duan","su","p","licenseType","licensePrice","linelist","consHeight","listnumber","maxScale","progress","imgSize","printSize1","printSize2","content_list_boll","candidate_imglist","conteent_img","conteent_img2","values","ontent_datas","why","gx","wonder","state","ab","blankImage","ku","list","psdList","newPsdList","newModelsList","modelsList","nameList","newNameList","repatFlag","isRepeat","modelId","begin","x","y","imgPxWidth","imgPxHeight","calculateWidth","modelArray","imgArray","clipX","clipY","boxWidth","boxHeight","calculateHeiht","imgShowFlag","obj","clipWidth","clipHeight","boxMax","kMultiple","img","initCanvas","myCanvas","imgSn","zoom","fabObj","zoomPoint","repatGroup","group","data1","moveObj","arrCross1","arrVertical","addArr","widthNum","heightNum","moves","leftNum","rightNum","topNum","bottomtNum","movexy","timeOut","canvas","clipImg","foxpsdObj","sku","ctxLine","imgShowFlag1","canvasShowFlag","imgShowFlag2","imgShowFlag3","modelImg","slideFlag","types","categories","tags","productNum","watch","handler","value","methods","mis","document","sub","closeb","closebs","cancel","id","console","addOutlineCar","m","imgType","localStorage","addShopingCar","vm","gtag","currency","items","item_id","item_name","price","quantity","url","method","param","onError","then","addShopingCars","shou","pd","details","a","b","path","window","thisDownload","_this","res","ele","download","changeSize","sorting_list","selectAlikeById","content_list_bools","candidate_click","src","content_img2_click","calcPrice","candidate","wh","w","h","w3","w6","h3","h6","getPSD","getName","axios","getList1","bigpsd","item","getlist2","getlist","zoomIn","iScale","imgEl","scaleX","scaleY","top","left","originX","originY","initObj","scale","hasControls","angle","oimg","i","init","flag","loadImg","imgs","ctx3","loading","drawImage","name","drawImageClip","Multiple","base64","format","quality","width","height","imgToCut","drawLine","CanvasRenderingContext2D","moveToFunction","dashedLength","Math","startX","startY","containerHeight","oneX","oneY","twoX","twoY","threeX","threeY","fourX","fourY","updateMiniMap","d","psdSkus","goodsSku","token","onload","resolve","setTimeout","image","layers","switchImgShow","rwidth","wheight","switchPicture","returnObj","sliderInput","v","sliderChange","sliderHandler","gos","query","q","loadCanvas","backgroundColor","isDrawingMode","event","e","ax","ay","ln1","setAsPosition","created","destroyed","mounted"],"sourceRoot":"src/components/Details","sources":["detail.vue"],"sourcesContent":["<template>\n  <div class=\"bodys\">\n    <a class=\"as\" @click=\"mis\" href=\"#\"><img :src=\"why[1]\" alt=\"\"/></a>\n\n\n    <Shou ref=\"shou\"/>\n\n    <div class=\"title\">\n      <div class=\"problems\">\n        <!-- <img :src=\"why[0]\" alt=\"\" @click=\"closeb\"> -->\n        <div class=\"cons\" v-if=\"con\">\n          <div class=\"title\">Why report problems</div>\n          <div class=\"text\">Please describe the problems you have encountered. You can also report trademark or\n            copyright violations\n          </div>\n          <div>\n            <el-input type=\"textarea\" :autosize=\"{ minRows: 7, maxRows: 7 }\" v-model=\"textarea1\">\n            </el-input>\n          </div>\n          <div class=\"button\">\n            <button @click=\"closebs\">cancel</button>\n            <button @click=\"sub\">Report</button>\n          </div>\n        </div>\n      </div>\n      <div class=\"div_left\">\n        <div class=\"left\">\n\n          <div class=\"model\">Model</div>\n          <div class=\"imgsList\">\n            <div class=\"imglist\" v-for=\"(item, index) in nameList\" :key=\"index\" @click=\"initObj(item.id)\">\n              <!-- :src=\"item.img\" -->\n              <img :src=\"item.img\" :default-img=\"item.img\" alt=\" \"/>\n            </div>\n          </div>\n        </div>\n\n\n        <!-- <Temp @showSend1=\"initObj\"> </Temp> -->\n        <!-- <div\n          class=\"imglist\"\n          v-for=\"(item, index) in candidate_imglist\"\n          :key=\"index\"\n        >\n          <img @click=\"candidate_click(item.src)\" :src=\"item.src\" alt=\" \" />\n        </div> -->\n      </div>\n      <div class=\"div_content\">\n        <div class=\"comtent\">\n          <div class=\"content_img\">\n            <div class=\"content_img1\" v-show=\"imgShowFlag1\" style=\"background-color: yellow\">\n              <!-- 中心图片 -->\n              <!--              <img class=\"centerImg\" :src=\"conteent_img\" alt=\"\" />-->\n\n              <canvas id=\"canvasBox3\" :width=\"clipWidth * kMultiple\" :height=\"clipHeight * kMultiple\" :style=\"{\n                width: clipWidth + 'px',\n                height: clipHeight + 'px',\n              }\">\n              </canvas>\n            </div>\n            <div class=\"babylon-container\" v-show=\"canvasShowFlag\">\n              <div class=\"canvas-clip\" ref=\"canvasClip\" :style=\"{ width: clipWidth + 'px', height: clipHeight + 'px' }\">\n                <img src=\"../../../public/img/waterMark1.png\" alt=\"\" class=\"markImg1\"/>\n                <div class=\"markDiv\">\n                  <canvas ref=\"lineCanvas\" :width=\"clipWidth\" :height=\"clipHeight\"></canvas>\n                </div>\n                <div class=\"canvas-contsiner\">\n                  <canvas id=\"canvasBox\" ref=\"bargraphCanvas\" :width=\"clipWidth * kMultiple\"\n                          :height=\"clipHeight * kMultiple\" :style=\"{\n                      width: clipWidth + 'px',\n                      height: clipHeight + 'px',\n                    }\">\n                  </canvas>\n                </div>\n                <div style=\"display: none\">\n                  <canvas id=\"canvasBox1\" style=\"display: none\" ref=\"bargraphCanvas\" :width=\"clipWidth * kMultiple\"\n                          :height=\"clipHeight * kMultiple\" :style=\"{\n                      width: clipWidth + 'px',\n                      height: clipHeight + 'px',\n                    }\">\n                  </canvas>\n                </div>\n              </div>\n            </div>\n            <div ref=\"foxcontainer\" style=\"position: absolute;\n              top: 0;\n              left: 0;\n              width:6rem;\n              height:6rem;\n              z-index:1;\n            \">\n              <div id=\"container\"></div>\n            </div>\n            <!-- <div class=\"content_img1\">\n            <img class=\"centerImg\" :src=\"conteent_img\" alt=\"\" />\n          </div>\n          <div\n            v-show=\"conteent_img2 != ''\"\n            class=\"content_img2\"\n            @click=\"content_img2_click\"\n          >\n            <img :src=\"conteent_img2\" alt=\" \" />\n          </div> -->\n            <div class=\"ordinary-picture\" @click=\"switchPicture\" v-show=\"imgShowFlag2\">\n              <img :src=\"conteent_img\" alt=\"\" />\n            </div>\n            <div class=\"ordinary-picture\" @click=\"returnObj\" v-show=\"imgShowFlag3\">\n              <img :src=\"modelImg\" alt=\"\" />\n            </div>\n          </div>\n          <div class=\"slider content-silder\" v-show=\"slideFlag\">\n            <el-slider v-model=\"values\" show-input :min=\"20\" :max=\"maxScale\" @input=\"sliderInput\"\n                       @change=\"sliderChange\">\n            </el-slider>\n            <!-- <div class=\"inputext\">\n            <input v-model=\"values\" type=\"text\" /><span class=\"inputspan\"\n              >%</span\n            >\n          </div> -->\n          </div>\n        </div>\n      </div>\n\n      <div class=\"rigth\">\n        <div class=\"text\">\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Pattern Name</div>\n            <div class=\"spans_2\">{{ ontent_datas.tags }}</div>\n          </div>\n          <div class=\"title_name title_one\">\n            <div class=\"spans_1\">Pattern ID</div>\n            <div class=\"spans_2\">{{ ontent_datas.imgSn }}</div>\n          </div>\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Included Files</div>\n            <div class=\"spans_2\">{{ ontent_datas.format }}</div>\n          </div>\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Size</div>\n            <div class=\"spans_2\">{{ imgSize }}</div>\n          </div>\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Print Size</div>\n            <div class=\"spans_2\">{{ printSize1}}</div>\n          </div>\n          <div class=\"title_name\" v-if=\"printSize2\">\n            <div class=\"spans_1\">&nbsp;</div>\n            <div class=\"spans_2\">{{ printSize2}}</div>\n          </div>\n          <!--          <div class=\"title_name\">-->\n          <!--            <div class=\"spans_1\">Resolution</div>-->\n          <!--            <div class=\"spans_2\">{{ ontent_datas.power }}</div>-->\n          <!--          </div>-->\n          <div class=\"title_name\">\n            <div class=\"spans_1\">In Repeat + Seamless Tile</div>\n            <div class=\"spans_2\">\n\n              <img :src=\"ontent_datas.isRepeat>0?state[1]:state[0]\" alt=\"\" />\n            </div>\n          </div>\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Layered Photoshop PSD</div>\n            <div class=\"spans_2\">\n              <img :src=\"ontent_datas.isLayer>0?state[1]:state[0]\" alt=\"\" />\n            </div>\n          </div>\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Vector AI Or EPS</div>\n            <div class=\"spans_2\">\n              <img :src=\"ontent_datas.isVector>0?state[1]:state[0]\" alt=\"\" />\n            </div>\n          </div>\n        </div>\n        <div class=\"in_2\">\n          <span v-for=\"(item, index) in ku\" :key=\"index\">\n            <img :src=\"item\" v-if=\"index==0 || (index==2 && ontent_datas.isRepeat>0)\n            || (index == 3 && ontent_datas.isLayer > 0) || (index == 1 && ontent_datas.isLarge >0)\" alt=\"\">\n          </span>\n          <!--              <img :src=\"item\" v-for=\"(item, index) in ku\" :key=\"index\" alt=\"\">-->\n        </div>\n        <div class=\"option\">\n          <div class=\"title\">\n            <div class=\"one\">License Type</div>\n            <div class=\"two\"><a href=\"/html/Comparison.html\" target=\"_blank\">Compare Licenses</a></div>\n            <i class=\"el-icon-warning-outline\"></i>\n          </div>\n          <div class=\"content\">\n            <div v-show=\"ontent_datas.isBuyout <= 0\">\n              <div v-show=\"duan\">\n                <!--                <div class=\"content_list\" @click=\"content_list_bools(1)\" v-if=\"ontent_datas.isUse > 0\">-->\n                <!--                  <div class=\"content_list_bolls lusk\">-->\n                <!--                    <img v-show=\"licenseType != 1\" :src=\"ab[0]\" alt=\"\"/>-->\n                <!--                    <img v-show=\"licenseType == 1\" :src=\"ab[1]\" alt=\"\"/>-->\n                <!--                  </div>-->\n\n                <!--                  <div class=\"con_idv lusk\">-->\n                <!--                    <div>Personal (JPEG Only)</div>-->\n\n                <!--                  </div>-->\n                <!--                </div>-->\n                <!-- 2 -->\n                <div class=\"content_list\" @click=\"content_list_bools(4)\" v-if=\"ontent_datas.isUse > 0\">\n                  <div class=\"content_list_bolls lusk\">\n                    <img v-show=\"licenseType != 4\" :src=\"ab[0]\" alt=\"\"/>\n                    <img v-show=\"licenseType == 4\" :src=\"ab[1]\" alt=\"\"/>\n                  </div>\n\n                  <div class=\"con_idv \">\n                    <div>Commercial (layered file/JPEG)</div>\n\n                  </div>\n                </div>\n                <!-- 3 -->\n                <div class=\"content_list\" @click=\"content_list_bools(5)\" v-if=\"ontent_datas.isUse > 0\">\n                  <div class=\"content_list_bolls lusk\">\n                    <img v-show=\"licenseType != 5\" :src=\"ab[0]\" alt=\"\"/>\n                    <img v-show=\"licenseType == 5\" :src=\"ab[1]\" alt=\"\"/>\n                  </div>\n\n                  <div class=\"con_idv\">\n                    <div>Commercial Unlimited (layered file/JPEG)</div>\n                    <!-- <div>Unlimited end products for sale</div> -->\n                  </div>\n                </div>\n              </div>\n              <div v-show=\"!duan\">\n                <div class=\"content_list\" @click=\"content_list_bools(4)\" v-if=\"ontent_datas.isUse > 0\">\n                  <div class=\"content_list_bolls\">\n                    <img v-show=\"licenseType != 4\" :src=\"ab[0]\" alt=\"\" />\n                    <img v-show=\"licenseType == 4\" :src=\"ab[1]\" alt=\"\" />\n                  </div>\n\n                  <div class=\"con_idv\">\n                    <div>Commercial (Layered PSD + JPEG)</div>\n                    <div>Up to 500 end products for sale</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <!-- 1 -->\n\n\n            <div class=\"content_list\" @click=\"content_list_bools(3)\" v-if=\"ontent_datas.isBuyout > 0\">\n              <div class=\"content_list_bolls \">\n                <img v-show=\"licenseType != 3\" :src=\"ab[0]\" alt=\"\"/>\n                <img v-show=\"licenseType == 3\" :src=\"ab[1]\" alt=\"\"/>\n              </div>\n\n              <div class=\"con_idv\">\n                <div>Commercial (Layered PSD + JPEG)</div>\n                <div>Up to 500 end products for sale</div>\n              </div>\n              <div class=\"wonder\">\n                <img :src=\"wonder\" alt=\"\" />\n                <div class=\"wonder_text\">\n                  <div class=\"demo2\">\n                    <em>&#9670;</em>\n                    <span>&#9670;</span>\n                    <div class=\"texts\">\n                      This product is a buyout picture, and will be automatically removed from the shelf after\n                      purchase\n                      You can't return the goods after purchase. Please contact customer service if there is any\n                      quality\n                      problem. Please confirm the follow-up operation\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"price\">\n          <div>Price</div>\n          <div>${{ licensePrice }}</div>\n        </div>\n        <div class=\"operlist\">\n\n          <div v-show=\"ontent_datas.hasCollection==0\" class=\"operlist_2 btn_1\" @click=\"shou(ontent_datas)\">\n            <img class=\"gx1\" :src=\"gx[1]\" alt=\"\"/>\n            Collect\n          </div>\n          <div v-show=\"ontent_datas.hasCollection > 0\" class=\"operlist_2  btn_12\" @click=\"shou(ontent_datas)\">\n            Collect\n          </div>\n\n          <button v-show=\"ontent_datas.isBuy == 2\" class=\"operlist_2 bag  downs\"\n                  @click.prevent=\"thisDownload(ontent_datas)\">\n            Download\n            File\n            <svg class=\"download\" width=\"0.2rem\" height=\"0.2rem\" viewBox=\"0 0 20 20\" fill=\"\"\n                 xmlns=\"http://www.w3.org/2000/svg\">\n              <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                    d=\"M6.7569 6.32977C7.0467 6.32977 7.2819 6.56618 7.2819 6.85747C7.2819 7.14876 7.0467 7.38516 6.7569 7.38516H6.0982C4.9684 7.38516 4.05 8.30758 4.05 9.44248V12.8795C4.05 14.0187 4.9712 14.9446 6.1045 14.9446H13.9025C15.0309 14.9446 15.95 14.0208 15.95 12.8866V9.45022C15.95 8.3111 15.0281 7.38516 13.8962 7.38516H13.2438C12.954 7.38516 12.7188 7.14876 12.7188 6.85747C12.7188 6.56618 12.954 6.32977 13.2438 6.32977H13.8962C15.6077 6.32977 17 7.72993 17 9.45022V12.8866C17 14.6034 15.6098 16 13.9025 16H6.1045C4.393 16 3 14.6005 3 12.8795V9.44248C3 7.72571 4.3895 6.32977 6.0982 6.32977H6.7569ZM10.0006 3C10.2904 3 10.5256 3.23641 10.5256 3.5277L10.525 10.7227L11.6701 9.56737C11.8745 9.36051 12.2063 9.36051 12.4121 9.56596C12.6172 9.77141 12.6179 10.1056 12.4135 10.3125L10.377 12.3674C10.3571 12.388 10.3356 12.4069 10.3126 12.424L10.3723 12.3719C10.3497 12.3949 10.3253 12.4155 10.2992 12.4337C10.2834 12.4447 10.2672 12.4547 10.2506 12.4638C10.2425 12.4682 10.2341 12.4725 10.2255 12.4766C10.2103 12.4839 10.1946 12.4904 10.1786 12.4963C10.1705 12.4991 10.1625 12.5018 10.1544 12.5043C10.1347 12.5104 10.1144 12.5154 10.0937 12.5191C10.0891 12.5199 10.0848 12.5206 10.0806 12.5213C10.0639 12.5239 10.0464 12.5257 10.0288 12.5266C10.0193 12.5271 10.0099 12.5274 10.0006 12.5274L9.9727 12.5253L9.92935 12.5226C9.92626 12.5222 9.92318 12.5217 9.92011 12.5212L10.0006 12.5274C9.96928 12.5274 9.93824 12.5246 9.90781 12.5191C9.88676 12.5154 9.86653 12.5104 9.8468 12.5044C9.83891 12.5019 9.83117 12.4993 9.82349 12.4965C9.8074 12.4908 9.79152 12.4842 9.77605 12.4768C9.76665 12.4723 9.7573 12.4675 9.7481 12.4624C9.73517 12.4553 9.72271 12.4477 9.71059 12.4396C9.7023 12.4341 9.694 12.4282 9.68587 12.422C9.66587 12.407 9.647 12.3905 9.62938 12.3728L9.62886 12.3719L7.58766 10.3125C7.38326 10.1056 7.38396 9.77141 7.58906 9.56596C7.79486 9.36051 8.12666 9.36051 8.33106 9.56737L9.475 10.7227L9.47556 3.5277C9.47556 3.23641 9.71076 3 10.0006 3Z\"\n                    fill=\"#222222\"/>\n            </svg>\n            <div style=\"background-color: green;position: absolute;top:0;left:0;height:0.46rem;opacity: 0.4;\"\n                 :style=\"{width:progress+'%'}\"></div>\n          </button>\n          <div v-show=\"ontent_datas.isBuy == 1\" class=\"operlist_2 bag btn_x\" @click.prevent=\"addShopingCars\">\n            View Cart<img class=\"gx1\" :src=\"gx[2]\" alt=\"\"/>\n          </div>\n          <!--          -->\n          <div v-show=\"ontent_datas.isBuy == 0\" class=\"operlist_2 btn_x\" @click.prevent=\"addShopingCar\">\n            <img class=\"gx1\" :src=\"gx[0]\" alt=\"\"/>Add To Bag\n          </div>\n\n          <!--          <div class=\"tipstext\" v-if=\"ontent_datas.isBuy==1\">Item Added To Your Cart!</div>-->\n        </div>\n      </div>\n\n\n    </div>\n    <div class=\"middle\">\n      <div style=\"display: table\">\n        <div style=\"display: table-row\">\n          <div class=\"titles\">\n            Product Types\n          </div>\n          <div class=\"contents\">\n            <template v-for=\"(item, index) in types\">\n              {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"\n                                           @click=\"gos(item)\">{{\n                item\n              }}</a>\n            </template>\n          </div>\n        </div>\n        <div style=\"display: table-row\">\n          <div class=\"titles\">\n            Categories\n          </div>\n          <div class=\"contents\">\n            <template v-for=\"(item, index) in categories\">\n              {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"\n                                           @click=\"gos(item)\">{{\n                item\n              }}</a>\n            </template>\n          </div>\n        </div>\n        <div style=\"display: table-row\">\n          <div class=\"titles\">\n            Tags\n          </div>\n          <div class=\"contents\">\n            <template v-for=\"(item, index) in tags\">\n              {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"\n                                           @click=\"gos(item)\">{{\n                item\n              }}</a>\n            </template>\n          </div>\n        </div>\n      </div>\n      <!--      <div>-->\n      <!--        <div class=\"titles\">-->\n      <!--          <ul>-->\n      <!--            <li>Product Types</li>-->\n      <!--            <li>Categories</li>-->\n      <!--            <li>Tags</li>-->\n      <!--          </ul>-->\n      <!--        </div>-->\n      <!--        <div class=\"contents\">-->\n      <!--          <ul>-->\n      <!--            <li>-->\n      <!--              <template v-for=\"(item, index) in types\">-->\n      <!--                {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"-->\n      <!--                                             @click=\"gos(item)\">{{-->\n      <!--                  item-->\n      <!--                }}</a>-->\n      <!--              </template>-->\n      <!--            </li>-->\n      <!--            <li>-->\n      <!--              <template v-for=\"(item, index) in categories\">-->\n      <!--                {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"-->\n      <!--                                             @click=\"gos(item)\">{{-->\n      <!--                  item-->\n      <!--                }}</a>-->\n      <!--              </template>-->\n      <!--            </li>-->\n      <!--            <li class=\"bulues\">-->\n      <!--              <template v-for=\"(item, index) in tags\">-->\n      <!--                {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"-->\n      <!--                                             @click=\"gos(item)\">{{-->\n      <!--                  item-->\n      <!--                }}</a>-->\n      <!--              </template>-->\n\n      <!--              &lt;!&ndash;            African、 Blue、 Blue and white、 Exotic、 Hand drawn、 Landscape、&ndash;&gt;-->\n      <!--              &lt;!&ndash;            Oriental、 Resort、 Spring/summer、 Summer、 Surf wear、&ndash;&gt;-->\n      <!--            </li>-->\n      <!--          </ul>-->\n      <!--        </div>-->\n      <!--      </div>-->\n    </div>\n    <div class=\"Related\">Popular recommendations</div>\n    <Cell :style=\"{  marginTop: '0.16rem ' }\" :linelist=\"linelist\" @shou=\"shou\" :consHeight=\"consHeight\"\n          :deleteIcon=\"false\"/>\n    <div class=\"Related\">Related Designs</div>\n    <Cell :style=\"{  marginTop: '0.16rem ' }\" :linelist=\"linelist\" @shou=\"shou\" :consHeight=\"consHeight\"\n          :deleteIcon=\"false\"/>\n    <!--    <div class=\"contents\" :style=\"{ height: consHeight + 'px' }\">-->\n    <!-- 行 -->\n    <!--      <Cell :item=\"item\" @shou=\"shou\" :idx=\"index\" v-for=\"(item, index) in linelist\" :key=\"index\" />-->\n    <!--      <div class=\"numberlist\" :class=\"'numberlist' + index\" v-for=\"(item, index) in linelist\" :key=\"index\" :style=\"{-->\n    <!--        left: item.left + 'px',-->\n    <!--        top: item.top + 'px',-->\n    <!--        width: item.width + 'px',-->\n    <!--      }\">-->\n    <!--        <Cell :item=\"item\" @shou=\"shou\"/>-->\n    <!--      </div>-->\n    <!--    </div>-->\n    <Bottom/>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Bottom from \"@/components/BottomNavigation/index\";\nimport {sorting_list,download} from \"@/utils/util\";\nimport Cell from \"../Screen/Cell\";\nimport Shou from \"../Screen/Shou\";\n// import fabric from 'fabric'\n\n// import Temp from \"./Temp.vue\";\n// import Utils from \"../../assets/js/util\";\nimport { fabric } from \"fabric\";\nimport foxpsd from \"../../static/js/foxpsd\";\n\nexport default {\n  components: {\n    Bottom,\n    Cell,\n    Shou,\n    fabric,\n    // Temp,\n  },\n  data() {\n    return {\n      locking:false,\n      con: false,\n      textarea1: \"\",\n      productId: null,\n      downLoad: false,\n      duan: true,\n      // Collect: true,\n      su: false,\n      p: null,\n      licenseType: 0,\n      licensePrice: '',\n      linelist: [],\n      consHeight: 0,\n      listnumber: 0,\n      maxScale: 400,\n      progress:0,\n\n      imgSize:'',\n      printSize1: '',\n      printSize2: '',\n\n      content_list_boll: [true, false, false], //控制每一个选项的选中和晴空\n      candidate_imglist: [],\n      conteent_img: \"\",\n      conteent_img2: \"\",\n      values: 100,\n      ontent_datas: \"\",\n      why: [require(\"@/assets/img/why.svg\"), require(\"@/assets/img/<.svg\")],\n      gx: [require(\"@/assets/img/gox.svg\"), require(\"@/assets/img/xingx.svg\"), require(\"@/assets/img/oks.svg\")],\n      wonder: require(\"@/assets/img/wonder.png\"),\n      state: [require(\"@/assets/img/x.png\"), require(\"@/assets/img/d.png\")],\n      ab: [require(\"@/assets/img/a.png\"), require(\"@/assets/img/b.png\")],\n      blankImage: require(\"@/assets/img/blank.svg\"),\n      ku: [require(\"@/assets/img/ku_1.svg\"), require(\"@/assets/img/ku_2.svg\"), require(\"@/assets/img/ku_4.svg\"), require(\"@/assets/img/ku_3.svg\")],\n      // 效果图的data的数据\n      // 获取模型的data\n      list: [],\n      psdList: [], //从后台接口拿到的psd列表\n      newPsdList: [], //对比后的psd列表\n      newModelsList: [], // 第一次拿到的  大图的详细\n      modelsList: [], //第二次处理\n      nameList: [], // 从接口拿到的 图层的列表\n      newNameList: [], // 对比后的图层列表\n      // 效果图新增\n      repatFlag: 3,\n      isRepeat: 0,\n      modelId: 0,\n      begin: { x: 0, y: 0 },\n      imgPxWidth: null,\n      imgPxHeight: null,\n      calculateWidth: null,\n      modelArray: [],\n      imgArray: [],\n      clipX: null, //裁切的坐标x\n      clipY: null, //裁切的坐标y\n      boxWidth: null, // 盒子的宽度\n      boxHeight: null, // 盒子的高度\n      calculateHeiht: null,\n      imgShowFlag: 1, // 默认显示自适应的尺寸\n      obj: {},\n      clipWidth: 600, //clip 裁切出来的方块区域\n      clipHeight: 600, //clip 裁切出来的方块区域\n      boxMax: 600,\n      kMultiple: 3, //\n      img: null,\n      initCanvas: null,\n      myCanvas: null,\n      imgSn: null, //图片的编号\n      zoom: 1,\n      fabObj: null, // 用fabric.js new 出来的对象\n      zoomPoint: null,\n      repatGroup: [], // 平铺之后的group数组\n      group: null,\n      data1: null,\n      moveObj: null,\n      arrCross1: [], // 平铺之后的数据\n      arrVertical: [],\n      addArr: [], //缩放之后新增的数组\n      widthNum: 0, // 直接平铺的横向数量\n      heightNum: 0, //直接平铺的竖向数量\n      moves: {},\n      leftNum: 0,\n      rightNum: 0,\n      topNum: 0,\n      bottomtNum: 0,\n      movexy: {},\n      timeOut: 0,\n      canvas: null,\n      clipImg: null,\n      foxpsdObj: null,\n      sku: null,\n      ctxLine: null,\n      imgShowFlag1: true,\n      canvasShowFlag: false,\n      imgShowFlag2: false,\n      imgShowFlag3: false,\n      modelImg: null,\n      slideFlag: true,\n      types: [],\n      categories: [],\n      tags: [],\n      productNum: 0,\n      // 效果图新增\n      // 效果图的data数据\n    };\n  },\n  watch: {\n    '$store.state.fontRate': {\n      handler() {\n        this.changeSize();\n      },\n    },\n    value() {\n    },\n    consHeight() {\n    },\n    // productId() {\n    //   this.candidate();\n    // },\n    // values() {\n    //   // console.log(this.values);\n    //   this.value = this.values;\n    //   // this.zoomIn(this.values)\n    //   // this.contentImg.style.height = 600 * (this.values / 100) + \"px\";\n    //   // this.contentImg.style.width = 600 * (this.values / 100) + \"px\";\n    //   // console.log(this.contentImg.style.height);\n    // },\n  },\n  methods: {\n    mis() {\n      document.getElementsByClassName(\"as\")[0].style.position = \"absolute\"\n    },\n    sub() {\n      if (this.textarea1 == \"\") {\n        return this.$message(\"Cannot be empty！\")\n      }\n\n    },\n    closeb() {\n      this.con = true\n    },\n    closebs() {\n      this.con = false\n    },\n    //点击取消收藏按钮\n    cancel(id) {\n      console.log(id);\n    },\n    // 添加到离线购物车\n    addOutlineCar() {\n\n      let m = JSON.parse(localStorage.getItem('sshopping_car'));\n\n      if (m && m.some(item => item.productId == this.productId)) {\n        this.$message(\"Product exist\");\n      } else {\n\n        if (!m) {\n          m = [];\n        }\n\n        let s = {\n          productId: this.productId,//直接把这张图的所有详细信息保存起来，到购物车我们再根据我们需要显示\n          imgType: this.licenseType, //授权类型\n          productNum: 1\n        };\n\n        m.push(s)\n        localStorage.setItem('sshopping_car', JSON.stringify(m));\n        this.ontent_datas.isBuy = 1;\n\n        this.locking=false;\n      }\n    },\n    // 添加到购物车\n    addShopingCar() {\n      let vm = this;\n\n      if(vm.locking)return;\n      vm.locking=true;\n\n      gtag('event', 'add_to_cart', {\n        currency: 'USD',\n        items: [{\n          item_id: this.ontent_datas.productId,\n          item_name: this.ontent_datas.imgSn,\n          price: this.licensePrice,\n          currency: 'USD',\n          quantity: 1\n        }],\n        value: this.licensePrice\n      });\n\n      // 首先判断一下用户有没有登陆\n      if (!localStorage.user) {\n        // 没有登陆的时候将购物车信息存到本地的 localStorage.shopping_car当中\n        // 首选判断一下localStorage.shopping_car有没有声明\n        this.addOutlineCar();\n        // console.log(JSON.parse(localStorage.getItem('sshopping_car')));\n\n        // this.Bag = false;\n      } else {\n        this.rq({\n          url: \"/api/cart/save\",\n          method: \"post\",\n          param: {\n            productId: this.ontent_datas.productId,\n            imgType: this.licenseType,\n          },\n          onError: function () {\n            vm.locking=false;\n          },\n          vm,\n        }).then((res) => {\n          if (res.code == 200) {\n            // this.$message(\"添加成功\");\n            if (!res.user) {\n              vm.addOutlineCar();\n            } else {\n              vm.ontent_datas.isBuy = 1;\n            }\n\n          } else if (res.code == 601 || res.code == 680) {\n            vm.addOutlineCar();\n            //   this.Bag = false;\n            // this.$store.state.login = true;\n            // this.$store.state.logins = true\n            // this.$store.state.ForgetPwd = false\n            // this.$store.state.Sign = false\n          } else {\n            this.$message(res.desc);\n            //\n          }\n          vm.locking=false;\n        });\n      }\n    },\n    addShopingCars() {\n      this.$router.push(\"/shoppingcar\")\n    },\n    shou(pd) {\n\n      this.$refs.shou.shou(pd);\n    },\n    details(a, b) {\n      // localStorage.productId = this.productId=a;\n      // localStorage.imgSn = b;\n\n      const routeUrl = this.$router.resolve({\n        path: \"/detail/\" + a\n      });\n\n      window.open(routeUrl.href, \"_self\");\n\n      // console.log(\"push\")\n      // this.$router.push({\n      //   path: \"/details\",\n      //   query: { id: a },\n      // });\n\n\n      // this.$store.state.blank = \"details\";\n      // this.$router.push(\"/blank\");\n    },\n    thisDownload(pd) {\n      const _this = this;\n\n      _this.rq({\n        url: \"/api/product/downUrl\",\n        method: \"post\",\n        param: {\n          id: _this.ontent_datas.productId,\n        },\n        onError: function () {\n        },\n        _this,\n      }).then((res) => {\n        if (res.code == 200) {\n          // this.$message(\"添加成功\");\n\n          res.data = res.data.replace('http:', 'https:');\n\n          let reg = /\\.(\\w*?)\\?/\n          let ext = reg.exec(res.data)[1];\n\n          if('zip'==ext.toLowerCase()){\n\n            let ele = document.createElement('a');\n            ele.setAttribute('href', res.data); //设置下载文件的url地址\n            ele.setAttribute('download', _this.ontent_datas.imgSn + '.' + ext);//用于设置下载文件的文件名\n\n            ele.setAttribute(\"target\", \"_self\");\n            ele.click();\n\n          }else {\n            download(_this, res.data, _this.ontent_datas.imgSn + '.' + ext);\n          }\n\n          // let xhr = new XMLHttpRequest();\n          // xhr.responseType = 'blob';\n          // xhr.open('GET', res.data, true);\n          // xhr.onload = function(){\n          //     let res1 = xhr.response;\n          //     if(res1){\n          //         const link = document.createElement(\"a\");\n          //         link.href = URL.createObjectURL(res1);\n          //         link.download = _this.ontent_datas.imgSn + '.' + ext;\n          //         link.click();\n          //         URL.revokeObjectURL(link.href);\n          //     }\n          // }\n          // xhr.send();\n        } else {\n          this.$message(res.desc);\n          //\n        }\n      });\n\n    },\n    changeSize() {\n      if (this.p != null && this.p.length > 0)\n        sorting_list(this.p, this);\n    },\n    // sorting_list(x) {\n    //   // 声明一个数组，用来记录每一列的高度\n    //\n    //   let paddingwidth = 0.2;\n    //\n    //   let paddingWidth=0.1 * this.$store.state.fontRate;\n    //   let imgContainerWidth = document.documentElement.clientWidth - paddingwidth * this.$store.state.fontRate;\n    //\n    //   if (imgContainerWidth > 2380) {\n    //     this.listnumber = 10\n    //   } else if (imgContainerWidth > 2140) {\n    //     this.listnumber = 9\n    //   } else if (imgContainerWidth > 1900) {\n    //     this.listnumber = 8\n    //   } else if (imgContainerWidth > 1660) {\n    //     this.listnumber = 7\n    //   } else if (imgContainerWidth > 1420) {\n    //     this.listnumber = 6\n    //   } else if (imgContainerWidth > 1180) {\n    //     this.listnumber = 5\n    //   } else if (imgContainerWidth > 940) {\n    //     this.listnumber = 4\n    //   } else if (imgContainerWidth > 700) {\n    //     this.listnumber = 3\n    //   } else {\n    //     this.listnumber = 2\n    //   }\n    //\n    //   let imgWidth = Math.round(imgContainerWidth / this.listnumber * 100) / 100;\n    //\n    //   let Height_array = [];\n    //\n    //\n    //   for (let index = 0; index < x.length; index++) {\n    //     // 拿到宽度\n    //     x[index].width = imgWidth;\n    //\n    //     x[index].height = imgWidth * (x[index].imgHeight / x[index].imgWeight);\n    //     if (index < this.listnumber) {\n    //       x[index].top = 0;\n    //       x[index].left = (index % (this.listnumber + 1)) * (x[index].width);\n    //       // 每一列的高度是当前图片的高度   图片的高度是高宽比*256+bottom\n    //\n    //       Height_array.push(\n    //           (x[index].imgHeight / x[index].imgWeight) * x[index].width + 56\n    //       );\n    //     } else {\n    //       let min = Height_array.minindex(Height_array); //拿到最短列的下标\n    //\n    //       // console.log(Height_array);\n    //       // console.log(Height_array[min]);\n    //       // 当前的图片的top 就是最低列的高度\n    //       x[index].top = Height_array[min];\n    //       // 当前图片的left 是最低列的下标*(256 + 16)\n    //       x[index].left = min * (x[index].width);\n    //       // 然后最低列的高度此时就是最低列的高度加上当前图片的高度\n    //       Height_array[min] =\n    //           Height_array[min] +\n    //           (x[index].imgHeight / x[index].imgWeight) * x[index].width +\n    //           56;\n    //     }\n    //   }\n    //   // 这里获取列的最大值复制给付元素\n    //   this.consHeight = Height_array.max(Height_array);\n    //\n    //   this.linelist = \"\";\n    //\n    //   window.linelist = this.linelist = x;\n    // },\n    selectAlikeById() {\n      // this.linelist=null;\n      let vm = this;\n      this.rq({\n        url: \"/api/product/selectAlikeById\",\n        method: \"post\",\n        param: {\n          productId: vm.productId\n        },\n        onError: function () {\n        },\n        vm,\n      }).then((res) => {\n        if (res.code == 200) {\n          vm.p = res.data;\n\n          if (vm.p == undefined) {\n            this.linelist = null;\n            this.consHeight = 0;\n          } else {\n            //   获取宽度\n            sorting_list(vm.p, vm);\n          }\n        } else {\n          //\n          this.$message(res.desc);\n        }\n      });\n    },\n    //   License Type 单选 👈\n    content_list_bools(a) {\n      this.licenseType = a;\n      this.calcPrice()\n      // for (let index = 0; index < this.content_list_boll.length; index++) {\n      //   this.content_list_boll[index] = false;\n      // }\n      // this.content_list_boll[a] = true; //由于数组更新没有办法触发dom更新，所以给数组进行重新负值吧\n      //\n      // let x = this.content_list_boll;\n      // this.content_list_boll = [];\n      // this.content_list_boll = x;\n    },\n    //   点击备选图 👈\n    candidate_click(src) {\n      if (this.conteent_img2 == \"\") {\n        // 首先将content图片给 旁边的小图片\n        this.conteent_img2 = this.conteent_img;\n      }\n\n      // 然后将src给content\n      this.conteent_img = src;\n    },\n\n    // 小图片和大图片的呼唤👈\n    content_img2_click() {\n      // 声明一个变量，作为临时数据存放\n      let ImgMaxSrc = this.conteent_img;\n      this.conteent_img = this.conteent_img2;\n      this.conteent_img2 = ImgMaxSrc;\n    },\n    calcPrice() {\n      const _this = this;\n      let licenseType = _this.licenseType;\n      let price = _this.ontent_datas.price;\n      let priceOnce = _this.ontent_datas.priceOnce;\n\n      if (licenseType == 3) {\n        _this.licensePrice = priceOnce;\n      } else if (licenseType == 5) {\n        _this.licensePrice = price;\n      } else if (licenseType == 4) {\n        _this.licensePrice = Math.round(price * 0.8 * 100) / 100;\n      } else if (licenseType == 1) {\n        _this.licensePrice = Math.round(price * 0.5 * 100) / 100;\n      }\n    },\n    //   获取备选图 👈\n    candidate() {\n      let vm = this;\n      this.rq({\n        url: \"/api/product/selectById\",\n        method: \"post\",\n        param: {\n          productId: vm.productId,\n        },\n        onError: function () {\n        },\n        vm,\n      }).then((res) => {\n        vm.repatFlag = 0;\n        if (res.code == 200) {\n          //   vm.p = res.data.aaData;\n          vm.ontent_datas = res.data;\n\n          // 首先判断用户是否登陆\n          if (res.user && res.user.id) {\n\n          } else {\n\n            let m = JSON.parse(localStorage.getItem('sshopping_car'));\n            if (m && m.length > 0) {\n              if (m.some(item => item.productId == vm.productId)) {\n                vm.ontent_datas.isBuy = 1;\n              }\n              // let s = JSON.parse(localStorage.sshopping_car)\n              // for (let index = 0; index < s.length; index++) {\n              //   if (s[index].imgSn === vm.ontent_datas.imgSn) {\n              //     vm.Bag = false\n              //   }\n              //\n              // }\n\n            }\n\n          }\n\n          if (vm.ontent_datas.isUse > 0) {\n            vm.licenseType = 5;\n          } else {\n            vm.licenseType = 3;\n          }\n\n          // 可以买断\n          if (vm.ontent_datas.isBuyout == 1) {\n            vm.licenseType = 3;\n          }\n          // if (vm.ontent_datas.hasCollection > 0) {\n          //   this.Collect = false\n          // }\n\n          this.calcPrice();\n\n          vm.types = [];\n          vm.ontent_datas.isRepeat=0;\n          vm.ontent_datas.isLayer=0;\n\n          res.data.styleStr.split(',').forEach(item => {\n            if (item != '') {\n              vm.types.push(item)\n\n              if(item=='In Repeat' || item=='Cyclic graph'){\n                vm.ontent_datas.isRepeat=1;\n              }\n              if(item.indexOf('Simple layered')>=0 || item=='Layered file' || item=='Color separation'){\n                vm.ontent_datas.isLayer=1;\n              }\n            }\n          });\n\n          if(res.data.imgSize){\n\n            if(res.data.imgSize=='矢量图'){\n              vm.imgSize='Vector image';\n            }else{\n              let wp=300,hp=300;\n              let w='',h='',imgSize,wh;\n\n              if(res.data.imgSize.indexOf('cm')>=0){\n                imgSize=res.data.imgSize.replace('cm','');\n                imgSize=imgSize.replace('cm','');\n                wh=imgSize.split(\"*\");\n                if(wh[0]){\n                  w=Math.round(wh[0]/254*100*wp);\n                }\n                if(wh[1]){\n                  h=Math.round(wh[1]/254*100*wp);\n                }\n\n              }else{\n                imgSize=res.data.imgSize.replace('像素','');\n                imgSize=imgSize.replace('像素','');\n                wh=imgSize.split(\"*\");\n                w=wh[0];\n                h=wh[1];\n              }\n              if(w && h) {\n                vm.imgSize=w + '*' + h ;\n\n                let w3='',w6='',h3='',h6='';\n                if(w){\n                  w3=Math.round(w*254/300)/100;\n                  w6=Math.round(w*254/600)/100;\n                }\n                if(h){\n                  h3=Math.round(h*254/300)/100;\n                  h6=Math.round(h*254/600)/100;\n                }\n\n                vm.printSize1=w3+'*'+h3+'cm(300dpi)';\n                vm.printSize2=w6+'*'+h6+'cm(600dpi)';\n              }else {\n                vm.imgSize=res.data.imgSize;\n                vm.printSize1='';\n                vm.printSize2='';\n              }\n\n            }\n\n          }else{\n            vm.imgSize='';\n            vm.printSize1='';\n            vm.printSize2='';\n          }\n\n\n          vm.categories = [];\n          res.data.productFicationStr.split(',').forEach(item => {\n            if (item != '')\n              vm.categories.push(item)\n          });\n\n          vm.tags = [];\n          res.data.label.split(',').forEach(item => {\n            if (item != '')\n              vm.tags.push(item)\n          });\n          res.data.entityStr.split(',').forEach(item => {\n            if (item != '')\n              vm.tags.push(item)\n          });\n          res.data.sceneStr.split(',').forEach(item => {\n            if (item != '')\n              vm.tags.push(item)\n          });\n          res.data.seasonStr.split(',').forEach(item => {\n            if (item != '')\n              vm.tags.push(item)\n          });\n          res.data.fashionStr.split(',').forEach(item => {\n            if (item != '')\n              vm.tags.push(item)\n          });\n\n\n          // console.log(\"res.data.isRepeat\", res.data.isRepeat);\n          vm.isRepeat = res.data.isRepeat;\n          // vm.conteent_img = vm.$imgServer + res.data.cover;\n          vm.conteent_img = vm.$imgServer + res.data.cover;\n\n          // vm.img = vm.conteent_img;\n          vm.loadImg(vm.conteent_img);\n          vm.nameList[0].img = vm.conteent_img;\n          vm.nameList[0].bigpsd.img = vm.conteent_img;\n\n          // let img = new Image();\n          // img.setAttribute(\"crossOrigin\", \"anonymous\");\n          // // img.setAttribute(\"crossOrigin\", \"use-credentials\");\n          // img.src = vm.conteent_img;\n          // img.onload = () => {\n          //   // console.log(img);\n          //   let canvas = document.createElement(\"canvas\");\n          //   let ctx3 = canvas.getContext(\"2d\");\n          //   let canvasclip = document.createElement(\"canvas\");\n          //   let ctx4 = canvasclip.getContext(\"2d\");\n          //   canvasclip.width = 1200;\n          //   canvasclip.height = 1200;\n          //   let Width = img.width / 3;\n          //   let Height = (img.height * Width) / img.width;\n          //   canvas.width = Width * 3;\n          //   canvas.height = Height * 3;\n          //   ctx3.drawImage(img, 0, 0, Width, Height);\n          //   ctx3.drawImage(img, Width, 0, Width, Height);\n          //   ctx3.drawImage(img, 2 * Width, 0, Width, Height);\n          //   ctx3.drawImage(img, 0, Height, Width, Height);\n          //   ctx3.drawImage(img, Width, Height, Width, Height);\n          //   ctx3.drawImage(img, 2 * Width, Height, Width, Height);\n          //   ctx3.drawImage(img, 0, 2 * Height, Width, Height);\n          //   ctx3.drawImage(img, Width, 2 * Height, Width, Height);\n          //   ctx3.drawImage(img, 2 * Width, 2 * Height, Width, Height);\n          //   let startX = (canvas.width - canvasclip.width) / 2;\n          //   let startY = (canvas.height - canvasclip.width) / 2;\n          //   ctx4.drawImage(\n          //     canvas,\n          //     startX,\n          //     startY,\n          //     canvasclip.width,\n          //     canvasclip.width,\n          //     0,\n          //     0,\n          //     canvasclip.width,\n          //     canvasclip.width\n          //   );\n          //   let imgs = canvasclip.toDataURL(\"image/png\");\n          //   vm.nameList[1].img = imgs;\n          //   vm.nameList[1].bigpsd.img = imgs;\n          //   // document.body.append(canvas)\n          //   // document.body.append(canvasclip);\n          // };\n\n\n          if (res.data.attachList.length != 0) {\n            vm.candidate_imglist = res.data.attachList;\n\n            for (let index = 0; index < vm.candidate_imglist.length; index++) {\n              vm.candidate_imglist[index].src =\n                vm.$imgServer + vm.candidate_imglist[index].src;\n            }\n            for (let index = 0; index < 20; index++) {\n              vm.candidate_imglist.push(vm.candidate_imglist[0]);\n            }\n          }\n          this.su = true\n        } else {\n          //\n          this.$message(res.desc);\n        }\n      });\n    },\n\n    // 效果图新增的methods函数\n    // 获取模型的函数\n    async getPSD() {\n      // console.log('object');\n      await this.getName();\n      this.getlist();\n    },\n    getName() {\n      // console.log(111);\n      let _this = this;\n      // axios 基本使用\n      axios({\n        url: \"/name.js\", // 请求的链接\n      }).then((res) => {\n        _this.nameList = res.data;\n      });\n\n      // axios({\n      //   url: \"//116.62.59.86:10811/name.js\", // 请求的链接\n      // })\n      //   .then((res) => {\n      //\n      //     // 接受请求成功返回的数据\n      //     // console.log(res);\n      //     _this.nameList = res.data;\n      //   })\n      // .catch((err) => {\n      //   // 接受请求失败返回的数据\n      //   // console.log(err);\n      //   console.log(1);\n      // });\n    },\n    // 第一次处理数据,为了让大的psd与后台接口返回的合并\n    getList1() {\n      for (var key in this.psdList) {\n        // let map = {};\n        this.nameList.map((item) => {\n          let bigpsd;\n          if (item.bigpsd) {\n            bigpsd = item.bigpsd.title;\n          }\n          if (bigpsd === this.psdList[key].title) {\n            let copy = Object.assign(this.psdList[key], item.bigpsd);\n            item.bigpsd = copy;\n            // console.log(item);\n            this.newModelsList.push(item);\n          }\n        });\n      }\n    },\n    // 第二次处理数据,为了让第一次得到的大的psd数据与原本本地数据合并\n    getlist2() {\n      this.getList1();\n      for (var key in this.nameList) {\n        // let map = {};\n        this.newModelsList.map((item) => {\n          if (this.nameList[key].title == item.title) {\n            this.nameList[key] = item;\n          }\n        });\n      }\n    },\n    // 第三次处理数据,为了得到最终大的psd 和小的psd  以后后台传回来的数据 都合并\n    getlist() {\n      this.getlist2();\n    },\n    // 效果图新增函数\n    //处理模型的函数\n    zoomIn(iScale) {\n      let _this = this;\n\n      _this.repatFlag = 3;\n      console.log(iScale);\n\n      // console.log(\"执行了放大缩小\");\n      _this.zoomPoint = new fabric.Point(\n        _this.clipWidth / 2,\n        _this.clipHeight / 2\n      ); // 中心点\n      _this.value = parseInt(_this.imgScale * 100);\n      _this.myCanvas.zoomToPoint(_this.zoomPoint, _this.imgScale);\n      let obj = _this.myCanvas.getObjects();\n      // if (_this.repatFlag) {\n      if (_this.repatFlag == 1) {\n        obj.forEach((res) => {\n          if (\n            res.left >= (_this.clipWidth - res.width * res.scaleX) / 2 &&\n            res.left < (_this.clipWidth + res.width * res.scaleX) / 2\n          ) {\n            _this.fabObj = res;\n          }\n        });\n      } else if (_this.repatFlag == 2) {\n        obj.forEach((res) => {\n          if (\n            res.top >= (_this.clipHeight - res.height * res.scaleY) / 2 &&\n            res.top < (_this.clipHeight + res.height * res.scaleY) / 2\n          ) {\n            _this.fabObj = res;\n          }\n        });\n      } else if (_this.repatFlag == 0) {\n        _this.fabObj = obj[0];\n      } else if (_this.repatFlag == 3) {\n        obj.some((res) => {\n          if (\n            res.left >= (_this.clipWidth - res.width * res.scaleX) / 2 &&\n            res.left < (_this.clipWidth + res.width * res.scaleX) / 2 &&\n            res.top >= (_this.clipHeight - res.height * res.scaleY) / 2 &&\n            res.top < (_this.clipHeight + res.height * res.scaleY) / 2\n          ) {\n            _this.fabObj = res;\n            return false;\n          }\n          return true;\n        });\n      }\n      obj.forEach((res) => {\n        if (_this.repatFlag == 2 || _this.repatFlag == 0) {\n          res.left =\n            (res.left - _this.clipWidth / 2) / iScale + _this.clipWidth / 2;\n        }\n        if (_this.repatFlag == 1 || _this.repatFlag == 0) {\n          res.top =\n            (res.top - _this.clipWidth / 2) / iScale + _this.clipWidth / 2;\n        }\n        _this.myCanvas.remove(res);\n        _this.myCanvas.add(res);\n      });\n      // 左右偏移边界\n      if (_this.repatFlag == 2 || _this.repatFlag == 0) {\n        if (\n          _this.fabObj.left <\n          _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale\n        ) {\n          _this.fabObj.left =\n            _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale;\n        } else if (\n          _this.fabObj.left >\n          _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale\n        ) {\n          _this.fabObj.left =\n            _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale;\n        }\n      }\n      // 上下偏移边界\n      if (_this.repatFlag == 1 || _this.repatFlag == 0) {\n        if (\n          _this.fabObj.top <\n          _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale\n        ) {\n          _this.fabObj.top =\n            _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale;\n        } else if (\n          _this.fabObj.top >\n          _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale\n        ) {\n          _this.fabObj.top =\n            _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale;\n        }\n      }\n      _this.myCanvas.remove(_this.fabObj);\n      _this.myCanvas.add(_this.fabObj);\n      let leftNum = 0,\n        rightNum = 0,\n        topNum = 0,\n        bottomtNum = 0;\n      _this.repatGroup.forEach((res) => {\n        if (res.left < _this.fabObj.left && res.top == _this.fabObj.top) {\n          leftNum++;\n        } else if (\n          res.left > _this.fabObj.left &&\n          res.top == _this.fabObj.top\n        ) {\n          rightNum++;\n        }\n        if (res.top < _this.fabObj.top && res.left == _this.fabObj.left) {\n          topNum++;\n        } else if (\n          res.top > _this.fabObj.top &&\n          res.left == _this.fabObj.left\n        ) {\n          bottomtNum++;\n        }\n      });\n      _this.leftNum = Math.max(_this.leftNum, leftNum);\n      _this.rightNum = Math.max(_this.rightNum, rightNum);\n      _this.topNum = Math.max(_this.topNum, topNum);\n      _this.bottomtNum = Math.max(_this.bottomtNum, bottomtNum);\n      // 边缩放边画图\n      const imgEl = document.createElement(\"img\");\n      imgEl.crossOrigin = \"Anonymous\";\n      imgEl.src = _this.img.src;\n      // document.body.append(imgEl)\n\n      let widthNumLeft = Math.ceil(\n        ((_this.fabObj.left - _this.clipWidth / 2) * _this.imgScale +\n          _this.clipWidth / 2 -\n          (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n          (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n      );\n      let widthNumRight = Math.ceil(\n        ((_this.clipWidth / 2 - _this.fabObj.left) * _this.imgScale +\n          _this.clipWidth / 2 -\n          (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n          (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n      );\n      let heightNumTop = Math.ceil(\n        ((_this.fabObj.top - _this.clipWidth / 2) * _this.imgScale +\n          _this.clipWidth / 2 -\n          (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n          (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n      );\n      let heightNumBottom = Math.ceil(\n        ((_this.clipWidth / 2 - _this.fabObj.top) * _this.imgScale +\n          _this.clipWidth / 2 -\n          (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n          (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n      );\n      // console.log(_this.repatFlag);\n      if (_this.repatFlag == 1) {\n        // console.log(\"执行了1\");\n        if (widthNumLeft > _this.leftNum) {\n          let t = _this.leftNum + 1;\n          _this.leftNum = widthNumLeft;\n          for (let ln = t; ln <= widthNumLeft; ln++) {\n            _this.moves.left =\n              _this.fabObj.left - _this.fabObj.scaleY * _this.fabObj.width * ln;\n            _this.moves.top = _this.fabObj.top;\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: _this.moves.top,\n              left: _this.moves.left,\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          }\n        }\n        if (widthNumRight > _this.rightNum) {\n          let t1 = _this.rightNum + 1;\n          _this.rightNum = widthNumRight;\n          for (let ln = t1; ln <= widthNumRight; ln++) {\n            _this.moves.left =\n              _this.fabObj.left + _this.fabObj.scaleY * _this.fabObj.width * ln;\n            _this.moves.top = _this.fabObj.top;\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: _this.moves.top,\n              left: _this.moves.left,\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          }\n        }\n      } else if (_this.repatFlag == 2) {\n        if (heightNumTop > _this.topNum) {\n          let t = _this.topNum + 1;\n          _this.topNum = heightNumTop;\n          // console.log(\"上\", _this.topNum);\n          for (let ln = t; ln <= heightNumTop; ln++) {\n            _this.moves.left = _this.fabObj.left;\n            _this.moves.top =\n              _this.fabObj.top - _this.fabObj.scaleY * _this.fabObj.height * ln;\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: _this.moves.top,\n              left: _this.moves.left,\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          }\n        }\n        if (heightNumBottom > _this.bottomtNum) {\n          let t1 = _this.bottomtNum + 1;\n          _this.bottomtNum = heightNumBottom;\n          for (let ln = t1; ln <= heightNumBottom; ln++) {\n            _this.moves.left = _this.fabObj.left;\n            _this.moves.top =\n              _this.fabObj.top + _this.fabObj.scaleY * _this.fabObj.height * ln;\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: _this.moves.top,\n              left: _this.moves.left,\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          }\n        }\n      } else if (_this.repatFlag == 3) {\n        // console.log(\"执行了3\");\n        if (widthNumLeft > _this.leftNum) {\n          let t = _this.leftNum + 1;\n          _this.leftNum = widthNumLeft;\n          for (let ln = t; ln <= widthNumLeft; ln++) {\n            for (let ln1 = _this.bottomtNum * -1; ln1 <= _this.topNum; ln1++) {\n              _this.moves.left =\n                _this.fabObj.left -\n                _this.fabObj.scaleY * _this.fabObj.width * ln;\n              _this.moves.top =\n                _this.fabObj.top -\n                _this.fabObj.scaleX * _this.fabObj.height * ln1;\n              let imgs = new fabric.Image(_this.img, {\n                scaleX: _this.fabObj.scaleX,\n                scaleY: _this.fabObj.scaleY,\n                top: _this.moves.top,\n                left: _this.moves.left,\n                originX: \"center\",\n                originY: \"center\",\n              });\n              _this.myCanvas.add(imgs);\n              _this.repatGroup.push(imgs);\n              _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n            }\n          }\n        }\n        if (widthNumRight > _this.rightNum) {\n          // console.log(\"向左\");\n          let t1 = _this.rightNum + 1;\n          _this.rightNum = widthNumRight;\n          for (let ln = t1; ln <= widthNumRight; ln++) {\n            for (let ln1 = _this.bottomtNum * -1; ln1 <= _this.topNum; ln1++) {\n              _this.moves.left =\n                _this.fabObj.left +\n                _this.fabObj.scaleY * _this.fabObj.width * ln;\n              _this.moves.top =\n                _this.fabObj.top -\n                _this.fabObj.scaleX * _this.fabObj.height * ln1;\n              let imgs = new fabric.Image(_this.img, {\n                scaleX: _this.fabObj.scaleX,\n                scaleY: _this.fabObj.scaleY,\n                top: _this.moves.top,\n                left: _this.moves.left,\n                originX: \"center\",\n                originY: \"center\",\n              });\n              _this.myCanvas.add(imgs);\n              _this.repatGroup.push(imgs);\n              _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n            }\n          }\n        }\n        if (heightNumTop > _this.topNum) {\n          let t = _this.topNum + 1;\n          _this.topNum = heightNumTop;\n          for (let ln = t; ln <= heightNumTop; ln++) {\n            for (let ln1 = _this.rightNum * -1; ln1 <= _this.leftNum; ln1++) {\n              _this.moves.left =\n                _this.fabObj.left -\n                _this.fabObj.scaleX * _this.fabObj.width * ln1;\n              _this.moves.top =\n                _this.fabObj.top -\n                _this.fabObj.scaleY * _this.fabObj.height * ln;\n              let imgs = new fabric.Image(_this.img, {\n                scaleX: _this.fabObj.scaleX,\n                scaleY: _this.fabObj.scaleY,\n                top: _this.moves.top,\n                left: _this.moves.left,\n                originX: \"center\",\n                originY: \"center\",\n              });\n              _this.myCanvas.add(imgs);\n              _this.repatGroup.push(imgs);\n              _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n            }\n          }\n        }\n        if (heightNumBottom > _this.bottomtNum) {\n          let t1 = _this.bottomtNum + 1;\n          _this.bottomtNum = heightNumBottom;\n          for (let ln = t1; ln <= heightNumBottom; ln++) {\n            for (let ln1 = _this.rightNum * -1; ln1 <= _this.leftNum; ln1++) {\n              _this.moves.left =\n                _this.fabObj.left -\n                _this.fabObj.scaleX * _this.fabObj.width * ln1;\n\n              _this.moves.top =\n                _this.fabObj.top +\n                _this.fabObj.scaleY * _this.fabObj.height * ln;\n\n              let imgs = new fabric.Image(_this.img, {\n                scaleX: _this.fabObj.scaleX,\n                scaleY: _this.fabObj.scaleY,\n                top: _this.moves.top,\n                left: _this.moves.left,\n                originX: \"center\",\n                originY: \"center\",\n              });\n              _this.myCanvas.add(imgs);\n              _this.repatGroup.push(imgs);\n              _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n            }\n          }\n        }\n      }\n      _this.drawImageClip();\n    },\n    // 初始化obj文件\n    initObj(id) {\n      let _this = this;\n      _this.modelId = id;\n      this.nameList.findIndex((i) => {\n        // console.log(i);\n        if (i.id === id) {\n          if (i.id === 0 || i.id === 10001) {\n            // console.log(i);\n            _this.canvasShowFlag = false;\n            this.imgShowFlag1 = true;\n            this.imgShowFlag2 = false;\n            this.imgShowFlag3 = false;\n            // this.slideFlag = false;\n\n            // _this.nameList[1].img\n\n            // _this.initCanvas.setZoom(1);\n\n            let scale = 1;\n            if (_this.imgPxWidth > _this.imgPxHeight) {\n              scale = _this.calculateWidth / _this.imgPxWidth / _this.kMultiple;\n            } else {\n              scale = _this.calculateHeiht / _this.imgPxHeight / _this.kMultiple;\n            }\n\n            if (i.id === 0) {\n              this.maxScale = 400;\n              let img1 = new fabric.Image(_this.img, {\n                hasControls: false,\n                scaleX: scale,\n                scaleY: scale,\n                angle: 0,\n                // opacity:0,\n                originX: \"center\",\n                originY: \"center\",\n                top: _this.clipWidth / 2,\n                left: _this.clipHeight / 2,\n              });\n\n              let obj = _this.initCanvas.getObjects();\n              obj.forEach((res) => {\n                _this.initCanvas.remove(res);\n              });\n\n              _this.initCanvas.add(img1);\n            } else {\n              this.maxScale = 200;\n              fabric.Image.fromURL(_this.nameList[1].img, function (oimg) {\n                oimg.hasControls = false;\n                oimg.scaleX = scale / 2;\n                oimg.scaleY = scale / 2;\n                oimg.angle = 0;\n                // opacity:0,\n                oimg.originX = \"center\";\n                oimg.originY = \"center\";\n                oimg.top = _this.clipWidth / 2;\n                oimg.left = _this.clipHeight / 2;\n\n                let obj = _this.initCanvas.getObjects();\n                obj.forEach((res) => {\n                  _this.initCanvas.remove(res);\n                });\n\n                _this.initCanvas.add(oimg);\n              });\n            }\n\n            _this.values = 100;\n            _this.sliderHandler(_this.values);\n\n          } else {\n            this.maxScale = 200;\n            _this.canvasShowFlag = true;\n            _this.imgShowFlag1 = false;\n            _this.imgShowFlag2 = true;\n            _this.imgShowFlag3 = false;\n\n            // if (this.isRepeat == 0) {\n            //   this.repatFlag = 0;\n            // } else {\n            //   this.repatFlag = 3;\n            // }\n            if (i.id === 10001) {\n              this.repatFlag = 3;\n              _this.modelImg = i.bigpsd.img;\n              this.obj.name = i.name;\n              this.obj.modelSize = i.modelSize;\n              this.obj.bigpsd = i.bigpsd;\n              if (i.modelSize.indexOf(\"cm\") != -1) {\n                var str = i.modelSize;\n                let reg1 = new RegExp(\"cm\", \"g\");\n                i.modelSize = str.replace(reg1, \"\");\n                this.modelArray = i.modelSize.split(\"*\");\n              } else {\n                this.modelArray = i.modelSize.split(\"*\");\n              }\n              // fabric.js 重置大小位置\n              this.myCanvas.setZoom(1);\n              this.myCanvas.absolutePan({ x: 0, y: 0 });\n              this.drawLine();\n              this.switchImgShow();\n\n              // this.imgScale = 1;\n              // this.loading(this.img);\n              this.loading(this.img, true);\n              this.imgShowFlag2 = true;\n              this.imgShowFlag3 = false;\n              // this.slideFlag = true;\n              _this.values = 100;\n              // _this.values = 100;\n            } else {\n              this.repatFlag = 3;\n              _this.modelImg = i.bigpsd.img;\n              this.obj.name = i.name;\n              this.obj.modelSize = i.modelSize;\n              this.obj.bigpsd = i.bigpsd;\n              if (i.modelSize.indexOf(\"cm\") != -1) {\n                let str = i.modelSize;\n                let reg1 = new RegExp(\"cm\", \"g\");\n                i.modelSize = str.replace(reg1, \"\");\n                this.modelArray = i.modelSize.split(\"*\");\n              } else {\n                this.modelArray = i.modelSize.split(\"*\");\n              }\n              // fabric.js 重置大小位置\n              this.myCanvas.setZoom(1);\n              this.myCanvas.absolutePan({ x: 0, y: 0 });\n              this.drawLine();\n              this.switchImgShow();\n              this.loading(this.img);\n              this.imgShowFlag2 = true;\n              this.imgShowFlag3 = false;\n              // this.slideFlag = true;\n              _this.values = 100;\n            }\n          }\n        }\n      });\n    },\n    // 初始化图片\n    init(img, imgArray, flag, imgSn) {\n      var _this = this;\n      _this.imgArray = imgArray;\n      this.imgSn = imgSn;\n      _this.repatFlag = 0;\n      _this.imgX = 0;\n      _this.imgY = 0;\n      // this.loadImg(img);\n    },\n    // 拿到图片放在canvas上\n    loadImg(imgs) {\n\n      //   获取this\n      var _this = this;\n      // console.log(this.img);\n      var img = new Image();\n      img.setAttribute(\"crossOrigin\", \"anonymous\");\n      img.src = imgs;\n      img.onload = () => {\n\n        let w300 = Math.round((img.width * 254) / 300) / 100;\n        let h300 = Math.round((img.height * 254) / 300) / 100;\n        _this.imgArray = [w300, h300];\n        _this.imgPxWidth = _this.img.width;\n        _this.imgPxHeight = _this.img.height;\n        // 调用切换图片展示的方法 ,默认图片对原尺寸\n        // _this.imgShowChange(_this.imgShowFlag);\n        _this.imgScale = 1;\n        // fabric.js 重置大小位置\n        // this.myCanvas.setZoom(1);\n        // this.myCanvas.absolutePan({ x: 0, y: 0 });\n        //\n        // let obj = _this.myCanvas.getObjects();\n        // obj.forEach((res) => {\n        //   _this.myCanvas.remove(res);\n        // });\n        _this.switchImgShow();\n        // _this.drawImage();\n\n        let scale = 1;\n        if (_this.imgPxWidth > _this.imgPxHeight) {\n          scale = _this.calculateWidth / _this.imgPxWidth / _this.kMultiple;\n        } else {\n          scale = _this.calculateHeiht / _this.imgPxHeight / _this.kMultiple;\n        }\n\n        let img1 = new fabric.Image(img, {\n          hasControls: false,\n          scaleX: scale,\n          scaleY: scale,\n          angle: 0,\n          // opacity:0,\n          originX: \"center\",\n          originY: \"center\",\n          top: _this.clipWidth / 2,\n          left: _this.clipHeight / 2,\n        });\n        _this.initCanvas.add(img1);\n\n        let imgs = new fabric.Image(img, {\n          scaleX: scale,\n          scaleY: scale,\n          angle: 0,\n          // opacity:0,\n          originX: \"center\",\n          originY: \"center\",\n          top: _this.clipWidth / 2,\n          left: _this.clipHeight / 2,\n        });\n        _this.fabObj = imgs;\n\n        // console.log(img);\n        let canvas = document.createElement(\"canvas\");\n        let ctx3 = canvas.getContext(\"2d\");\n        // let canvasclip = document.createElement(\"canvas\");\n        // let ctx4 = canvasclip.getContext(\"2d\");\n        let ww = 800, hh = (800 * img.height) / img.width;\n        // let ww3=ww,hh=hh;\n        // canvasclip.width = ww;\n        // canvasclip.height = hh;\n        // let Height = (img.height * Width) / img.width;\n        // let Width = img.width / 3;\n        canvas.width = ww * 3;\n        canvas.height = hh * 3;\n        ctx3.drawImage(img, 0, 0, ww, hh);\n        ctx3.drawImage(img, ww, 0, ww, hh);\n        ctx3.drawImage(img, 2 * ww, 0, ww, hh);\n        ctx3.drawImage(img, 0, hh, ww, hh);\n        ctx3.drawImage(img, ww, hh, ww, hh);\n        ctx3.drawImage(img, 2 * ww, hh, ww, hh);\n        ctx3.drawImage(img, 0, 2 * hh, ww, hh);\n        ctx3.drawImage(img, ww, 2 * hh, ww, hh);\n        ctx3.drawImage(img, 2 * ww, 2 * hh, ww, hh);\n        // let startX = (canvas.width - canvasclip.width) / 2;\n        // let startY = (canvas.height - canvasclip.width) / 2;\n        // ctx4.drawImage(\n        //     canvas,\n        //     startX,\n        //     startY,\n        //     canvasclip.width,\n        //     canvasclip.width,\n        //     0,\n        //     0,\n        //     canvasclip.width,\n        //     canvasclip.width\n        // );\n        let imgs1 = canvas.toDataURL(\"image/png\");\n        _this.nameList[1].img = imgs1;\n        _this.nameList[1].bigpsd.img = imgs1;\n\n\n        // console.log(_this.img)\n        // console.log(\"执行了加载图片的函数\");\n\n        _this.selectAlikeById();\n      };\n      _this.img = img;\n    },\n    loading(img, flag) {\n      var _this = this;\n\n      let w300 = Math.round((img.width * 254) / 300) / 100;\n      let h300 = Math.round((img.height * 254) / 300) / 100;\n      _this.imgArray = [w300, h300];\n      _this.imgPxWidth = _this.img.width;\n      _this.imgPxHeight = _this.img.height;\n      _this.imgScale = 1;\n      // fabric.js 重置大小位置\n      this.myCanvas.setZoom(1);\n      this.myCanvas.absolutePan({ x: 0, y: 0 });\n\n      let obj = _this.myCanvas.getObjects();\n      obj.forEach((res) => {\n        _this.myCanvas.remove(res);\n      });\n      _this.switchImgShow();\n      _this.drawImage(flag);\n    },\n    // 画图\n    drawImage(flag) {\n      var _this = this;\n      // console.log(_this.repatFlag);\n      let scale = 1;\n      if (_this.imgPxWidth > _this.imgPxHeight) {\n        scale = _this.calculateWidth / _this.imgPxWidth / _this.kMultiple;\n      } else {\n        scale = _this.calculateHeiht / _this.imgPxHeight / _this.kMultiple;\n      }\n      if (flag) {\n        this.imgScale = 1 / 3;\n      } else {\n        this.imgScale = 1;\n      }\n      // console.log(flag, scale);\n      const objs = _this.myCanvas.getObjects();\n      if (objs.length > 0) {\n        _this.repatGroup.forEach((res) => {\n          _this.myCanvas.remove(res);\n        });\n      }\n      if (_this.repatFlag) {\n        // 平铺的图片\n        _this.widthNum = Math.floor(\n          _this.clipWidth /\n            (_this.imgScale * _this.fabObj.width * _this.fabObj.scaleX)\n        );\n        _this.heightNum = Math.floor(\n          _this.clipHeight /\n            (_this.imgScale * _this.fabObj.height * _this.fabObj.scaleY)\n        );\n        let widthNumLeft = Math.ceil(\n          ((_this.fabObj.left - _this.clipWidth / 2) * _this.imgScale +\n            _this.clipWidth / 2 -\n            (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n            (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n        );\n        let widthNumRight = Math.ceil(\n          ((_this.clipWidth / 2 - _this.fabObj.left) * _this.imgScale +\n            _this.clipWidth / 2 -\n            (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n            (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n        );\n\n        let heightNumTop = Math.ceil(\n          ((_this.fabObj.top - _this.clipWidth / 2) * _this.imgScale +\n            _this.clipWidth / 2 -\n            (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n            (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n        );\n        let heightNumBottm = Math.ceil(\n          ((_this.clipWidth / 2 - _this.fabObj.top) * _this.imgScale +\n            _this.clipWidth / 2 -\n            (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n            (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n        );\n        _this.leftNum = widthNumLeft;\n        _this.rightNum = widthNumRight;\n        _this.topNum = heightNumTop;\n        _this.bottomtNum = heightNumBottm;\n        _this.arrCross1 = []; //平铺之后的数组\n        if (_this.repatFlag == 1) {\n          // 横向平铺的是 最中间是纵向的数组,1个,剩下的全是横向的数组\n          _this.arrCross1 = [];\n          if (_this.repatGroup.length > 0) {\n            _this.repatGroup.forEach((res) => {\n              _this.myCanvas.remove(res);\n            });\n            _this.repatGroup = [];\n          }\n          for (let a = 1; a <= widthNumLeft; a++) {\n            _this.arrCross1.push([\n              _this.fabObj.top,\n              _this.fabObj.left - _this.fabObj.scaleY * _this.fabObj.width * a,\n            ]);\n          }\n          for (let a = 1; a <= widthNumRight; a++) {\n            _this.arrCross1.push([\n              _this.fabObj.top,\n              _this.fabObj.left + _this.fabObj.scaleY * _this.fabObj.width * a,\n            ]);\n          }\n          let imgs = new fabric.Image(_this.img, {\n            scaleX: _this.fabObj.scaleX,\n            scaleY: _this.fabObj.scaleY,\n            top: _this.fabObj.top,\n            left: _this.fabObj.left,\n            name: 0,\n            originX: \"center\",\n            originY: \"center\",\n          });\n          _this.myCanvas.add(imgs);\n          _this.fabObj = imgs;\n          _this.repatGroup.push(imgs);\n          _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n\n          _this.arrCross1.forEach((res) => {\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: res[0],\n              left: res[1],\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          });\n        } else if (_this.repatFlag == 2) {\n          _this.arrCross1 = [];\n          if (_this.repatGroup.length > 0) {\n            _this.repatGroup.forEach((res) => {\n              _this.myCanvas.remove(res);\n            });\n            _this.repatGroup = [];\n          }\n          // 竖向平铺  中间是横向的数组,只有一个,剩下的全是竖向的数组\n          for (let a = 1; a <= heightNumTop; a++) {\n            _this.arrCross1.push([\n              _this.fabObj.top - _this.fabObj.scaleX * _this.fabObj.height * a,\n              _this.fabObj.left,\n            ]);\n          }\n          for (let a = 1; a <= heightNumBottm; a++) {\n            _this.arrCross1.push([\n              _this.fabObj.top + _this.fabObj.scaleX * _this.fabObj.height * a,\n              _this.fabObj.left,\n            ]);\n          }\n          let imgs = new fabric.Image(_this.img, {\n            scaleX: _this.fabObj.scaleX,\n            scaleY: _this.fabObj.scaleY,\n            top: _this.fabObj.top,\n            left: _this.fabObj.left,\n            name: 0,\n            originX: \"center\",\n            originY: \"center\",\n          });\n          _this.myCanvas.add(imgs);\n          _this.fabObj = imgs;\n          _this.repatGroup.push(imgs);\n          _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          _this.arrCross1.forEach((res) => {\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: res[0],\n              left: res[1],\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          });\n        } else if (_this.repatFlag == 3) {\n          _this.arrVertical = [];\n          if (_this.repatGroup.length > 0) {\n            _this.repatGroup.forEach((res) => {\n              _this.myCanvas.remove(res);\n            });\n            _this.repatGroup = [];\n          }\n\n          // 第一部分 左上角的部分 用到的是 widthNumleft 和 heightNumtop\n          for (let a = 1; a <= widthNumLeft; a++) {\n            for (let j = 1; j <= heightNumTop; j++) {\n              _this.arrVertical.push([\n                _this.fabObj.top -\n                _this.fabObj.scaleX * _this.fabObj.height * j,\n                _this.fabObj.left -\n                _this.fabObj.scaleY * _this.fabObj.width * a,\n              ]);\n            }\n          }\n          // 第二部分 右上角的部分 用到的是 widthNumRight和 heightNumTop\n          for (let a = 1; a <= widthNumRight; a++) {\n            for (let j = 1; j <= heightNumTop; j++) {\n              _this.arrVertical.push([\n                _this.fabObj.top -\n                _this.fabObj.scaleX * _this.fabObj.height * j,\n                _this.fabObj.left +\n                _this.fabObj.scaleY * _this.fabObj.width * a,\n              ]);\n            }\n          }\n          // 第三部分 左下角 用到的部分是 widthNumleft 和 heightNumBottm\n          for (let a = 1; a <= widthNumLeft; a++) {\n            for (let j = 1; j <= heightNumBottm; j++) {\n              _this.arrVertical.push([\n                _this.fabObj.top +\n                _this.fabObj.scaleX * _this.fabObj.height * j,\n                _this.fabObj.left -\n                _this.fabObj.scaleY * _this.fabObj.width * a,\n              ]);\n            }\n          }\n          // 第四部分  右下角 用到的部分是 widthNumRight 和 heightNumBottm\n          for (let a = 1; a <= widthNumRight; a++) {\n            for (let j = 1; j <= heightNumBottm; j++) {\n              _this.arrVertical.push([\n                _this.fabObj.top +\n                _this.fabObj.scaleX * _this.fabObj.height * j,\n                _this.fabObj.left +\n                _this.fabObj.scaleY * _this.fabObj.width * a,\n              ]);\n            }\n          }\n          // 左边的部分\n          for (let a = 1; a <= widthNumLeft; a++) {\n            _this.arrVertical.push([\n              _this.fabObj.top,\n              _this.fabObj.left - _this.fabObj.scaleY * _this.fabObj.width * a,\n            ]);\n          }\n          // 右边的部分\n          for (let a = 1; a <= widthNumRight; a++) {\n            _this.arrVertical.push([\n              _this.fabObj.top,\n              _this.fabObj.left + _this.fabObj.scaleY * _this.fabObj.width * a,\n            ]);\n          }\n          // 上面的部分\n          for (let a = 1; a <= heightNumTop; a++) {\n            _this.arrVertical.push([\n              _this.fabObj.top - _this.fabObj.scaleX * _this.fabObj.height * a,\n              _this.fabObj.left,\n            ]);\n          }\n          // 下面的部分\n          for (let a = 1; a <= heightNumBottm; a++) {\n            _this.arrVertical.push([\n              _this.fabObj.top + _this.fabObj.scaleX * _this.fabObj.height * a,\n              _this.fabObj.left,\n            ]);\n          }\n          let imgs = new fabric.Image(_this.img, {\n            scaleX: _this.fabObj.scaleX,\n            scaleY: _this.fabObj.scaleY,\n            top: _this.fabObj.top,\n            left: _this.fabObj.left,\n            name: 0,\n            originX: \"center\",\n            originY: \"center\",\n          });\n          _this.myCanvas.add(imgs);\n          _this.fabObj = imgs;\n          _this.repatGroup.push(imgs);\n          _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n\n          _this.arrVertical.forEach((res) => {\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: res[0],\n              left: res[1],\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          });\n        }\n      } else {\n        // console.log(_this.clipWidth);\n        _this.fabObj = null;\n        // 没有平铺的图片\n        if (_this.repatGroup.length > 0) {\n          _this.repatGroup.forEach((res) => {\n            _this.myCanvas.remove(res);\n          });\n          _this.repatGroup = [];\n        }\n        let imgs = new fabric.Image(_this.img, {\n          scaleX: scale,\n          scaleY: scale,\n          angle: 0,\n          // opacity:0,\n          originX: \"center\",\n          originY: \"center\",\n          top: _this.clipWidth / 2,\n          left: _this.clipHeight / 2,\n        });\n        _this.myCanvas.add(imgs);\n        _this.myCanvas.add(imgs);\n        _this.repatGroup.push(imgs);\n        _this.fabObj = imgs;\n      }\n      this.drawImageClip();\n    },\n    // 裁切canvas\n    async drawImageClip() {\n      let Multiple = 3;\n      let _this = this;\n      this.imgCanvas.setWidth(_this.clipWidth * Multiple);\n      this.imgCanvas.setHeight(_this.clipHeight * Multiple);\n      _this.imgCanvas.clear();\n      _this.myCanvas.getObjects().forEach((res) => {\n        let imgs = new fabric.Image(_this.img, {\n          scaleX: res.scaleX * Multiple,\n          scaleY: res.scaleY * Multiple,\n          top: res.top * Multiple,\n          left: res.left * Multiple,\n          // angle: index * 10,\n          originX: \"center\",\n          originY: \"center\",\n        });\n        _this.imgCanvas.add(imgs);\n      });\n      _this.zoomPoint = new fabric.Point(\n        _this.imgCanvas.width / 2,\n        _this.imgCanvas.height / 2\n      ); // 中心点\n      _this.imgCanvas.zoomToPoint(_this.zoomPoint, _this.imgScale);\n      _this.imgCanvas.renderAll();\n\n      // console.log(_this.imgCanvas)\n      const base64 = _this.imgCanvas.toDataURL({\n        format: \"png\",\n        quality: 1,\n        left: _this.begin.x * Multiple,\n        top: _this.begin.y * Multiple,\n        width: _this.imgCanvas.width - _this.begin.x * Multiple * 2,\n        height: _this.imgCanvas.height - _this.begin.y * Multiple * 2,\n      });\n      // console.log(base64)\n      // console.log(_this.begin.x * Multiple);\n      // console.log(_this.begin.y * Multiple);\n      // console.log(_this.imgCanvas.width - _this.begin.x * Multiple * 2);\n      // console.log(_this.imgCanvas.height - _this.begin.y * Multiple * 2);\n      var imgToCut = new Image();\n      imgToCut.src = base64;\n      _this.clipImg = base64;\n      // document.body.append(imgToCut)\n      if (this.obj && this.obj.bigpsd && this.obj.bigpsd.sku) {\n        // console.log( this.obj.bigpsd.name.toString());\n        _this.updateMiniMap(\n          this.obj.bigpsd.sku,\n          base64,\n          this.obj.bigpsd.name.toString()\n        );\n        // this.imgShowFlag1 = false;\n        // this.canvasShowFlag = true;\n      }\n    },\n    // 画线的函数 封装\n    drawLine() {\n      let _this = this;\n      // 先求出盒子的宽和高\n      let modelHeight = this.modelArray[1]; //var\n      let modelWidth = this.modelArray[0]; //var\n      if (modelHeight >= modelWidth) {\n        this.boxHeight = _this.boxMax * _this.kMultiple;\n        this.boxWidth = Math.round((this.boxHeight * modelWidth) / modelHeight);\n      } else {\n        this.boxWidth = _this.boxMax * _this.kMultiple;\n        this.boxHeight = Math.round((this.boxWidth * modelHeight) / modelWidth);\n      }\n\n      _this.clipX = (_this.clipWidth * _this.kMultiple - _this.boxWidth) / 2;\n      _this.clipY = (this.clipHeight * _this.kMultiple - _this.boxHeight) / 2;\n\n      let moveToFunction = CanvasRenderingContext2D.prototype.moveTo;\n      CanvasRenderingContext2D.prototype.moveToLocation = {};\n      // 重新定义moveTo方法\n      CanvasRenderingContext2D.prototype.moveTo = function (x, y) {\n        this.moveToLocation.x = x;\n        this.moveToLocation.y = y;\n        moveToFunction.apply(this, [x, y]);\n      };\n      CanvasRenderingContext2D.prototype.dashedLineTo = function (\n        x,\n        y,\n        dashedLength\n      ) {\n        dashedLength = dashedLength === undefined ? 5 : dashedLength;\n        var startX = this.moveToLocation.x;\n        var startY = this.moveToLocation.y;\n        var deltaX = x - startX;\n        var deltaY = y - startY;\n        var numberDash = Math.floor(\n          Math.sqrt(deltaX * deltaX + deltaY * deltaY) / dashedLength\n        );\n        for (var i = 0; i < numberDash; i++) {\n          this[i % 2 === 0 ? \"moveTo\" : \"lineTo\"](\n            startX + (deltaX / numberDash) * i,\n            startY + (deltaY / numberDash) * i\n          ); //等同于this.moveTo(x, y)或者 this.LineTo(x, y)\n        }\n        this.moveTo(x, y); //连续绘制虚线时，起点从当前点开始\n      };\n\n      let containerWidth = this.clipWidth * _this.kMultiple,\n        containerHeight = this.clipHeight * _this.kMultiple;\n      let oneX, oneY, twoX, twoY, threeX, threeY, fourX, fourY;\n      let lineBoxWidth = _this.boxWidth / _this.kMultiple;\n      let lineBoxHeight = _this.boxHeight / _this.kMultiple;\n      _this.begin.x = (containerWidth - this.boxWidth) / 2 / _this.kMultiple;\n      _this.begin.y = (containerHeight - this.boxHeight) / 2 / _this.kMultiple;\n      oneX = _this.begin.x + lineBoxWidth;\n      oneY = _this.begin.y;\n      twoX = _this.begin.x + lineBoxWidth;\n      twoY = _this.begin.y + lineBoxHeight;\n      threeX = _this.begin.x;\n      threeY = _this.begin.y + lineBoxHeight;\n      fourX = _this.begin.x;\n      fourY = _this.begin.y;\n\n      _this.ctxLine.clearRect(0, 0, containerWidth, containerHeight);\n      _this.ctxLine.beginPath();\n      _this.ctxLine.moveTo(_this.begin.x, _this.begin.y);\n      _this.ctxLine.dashedLineTo(oneX, oneY);\n      _this.ctxLine.dashedLineTo(twoX, twoY);\n      _this.ctxLine.dashedLineTo(threeX, threeY);\n      _this.ctxLine.dashedLineTo(fourX, fourY);\n      _this.ctxLine.closePath();\n      _this.ctxLine.lineWidth = 4;\n      _this.ctxLine.strokeStyle = \"red\";\n      _this.ctxLine.stroke();\n    },\n    // 中间部分从babylon组件迁移到home6\n    async updateMiniMap(sku, img, name) {\n      let _this = this;\n      if (sku != this.sku) {\n        _this.sku = sku;\n        _this.foxpsdObj = await new Promise((resolve) => {\n          // _this.canvasShowFlag = true;\n          // _this.imgShowFlag1 = false;\n\n          _this.$refs.foxcontainer.innerHTML = \"\";\n          let d = document.createElement(\"div\");\n          d.setAttribute(\"id\", \"container\");\n          _this.$refs.foxcontainer.appendChild(d);\n\n          let foxpsdObj = new foxpsd(\"container\", {\n            psdSkus: [sku],\n            goodsSku: \"1641357433833560937\",\n            //请勿用于生产环境 ，测试token会不定期轮换\n            token:\n              \"Basic 53d4072c87139675d646b4d428e6bb0048ee7db7e7716fd090cfdbfd692ce8f9\",\n            onload: function () {\n              resolve(foxpsdObj);\n            },\n          });\n        });\n        setTimeout(function () {\n          _this.foxpsdObj.command({\n            // canvas: eleCanvas,\n            image: img,\n            //传多个表示替换多个图层，使用英文逗号隔开\n            layers: name,\n          });\n\n          _this.$nextTick(() => {\n            _this.canvasShowFlag = true;\n            _this.imgShowFlag1 = false;\n            _this.imgShowFlag2 = true;\n            _this.imgShowFlag3 = false;\n            // _this.slideFlag = true;\n          });\n        }, 500);\n      } else {\n        if (_this.foxpsdObj && _this.foxpsdObj.load) {\n          _this.foxpsdObj.command({\n            image: img,\n            //传多个表示替换多个图层，使用英文逗号隔开\n            layers: name,\n          });\n\n          _this.$nextTick(() => {\n            _this.canvasShowFlag = true;\n            // _this.slideFlag = true;\n            _this.imgShowFlag1 = false;\n            _this.imgShowFlag2 = true;\n            _this.imgShowFlag3 = false;\n          });\n        }\n      }\n    },\n    // 中间部分从babylon组件迁移到home6\n    // 图片在自适应和原尺寸之间转换的 函数封装\n    switchImgShow() {\n      // flag 1自适应 2原尺寸\n      let _this = this;\n      let w300 = _this.imgArray[0];\n      let h300 = _this.imgArray[1];\n      let modelHeight = _this.modelArray[1]; //var\n      let modelWidth = _this.modelArray[0]; //var\n      let rwidth, wheight;\n      if (_this.imgShowFlag == 1) {\n        _this.imgMoveX = 0;\n        _this.imgMoveY = 0;\n        // 判断 图片的宽度和高度哪个更值更大\n        if (_this.imgPxWidth > _this.imgPxHeight) {\n          _this.imgScale = 1;\n          _this.imgInitWidth = Math.floor(_this.kMultiple * _this.clipWidth);\n          _this.imgInitHeight = Math.floor(\n            ((_this.kMultiple * _this.clipHeight) / this.imgPxWidth) *\n              _this.imgPxHeight\n          );\n          _this.imgInitX = 0;\n          _this.imgInitY = Math.floor(\n            (_this.clipHeight * _this.kMultiple - _this.imgInitHeight) / 2\n          );\n\n          _this.value = parseInt(_this.imgScale * 100);\n          _this.oldValue = _this.value;\n        } else {\n          // 高度大于宽度\n          _this.imgInitHeight = _this.kMultiple * _this.clipHeight;\n          _this.imgInitWidth = Math.floor(\n            ((_this.kMultiple * _this.clipWidth) / this.imgPxHeight) *\n              _this.imgPxWidth\n          );\n          _this.imgInitY = 0;\n          _this.imgInitX = Math.floor(\n              (_this.clipWidth * _this.kMultiple - _this.imgInitWidth) / 2\n          );\n\n          _this.imgScale = 1;\n          _this.value = parseInt(_this.imgScale * 100);\n          _this.oldValue = _this.value;\n        }\n        _this.calculateWidth = _this.imgInitWidth;\n        _this.calculateHeiht = _this.imgInitHeight;\n      } else if (_this.imgShowFlag == 2) {\n        _this.imgMoveX = 0;\n        _this.imgMoveY = 0;\n\n        _this.imgInitWidth = Math.floor(\n            _this.boxWidth * (_this.imgArray[0] / _this.modelArray[0])\n        );\n        _this.imgInitHeight = Math.floor(\n            _this.boxHeight * (_this.imgArray[1] / _this.modelArray[1])\n        );\n        _this.calculateWidth = _this.imgInitWidth;\n        _this.calculateHeiht = _this.imgInitHeight;\n        if (_this.img.width > _this.img.height) {\n          _this.imgScale = 1;\n          _this.value = parseInt(_this.imgScale * 100);\n          _this.oldValue = _this.value;\n          // 改尺寸比\n          rwidth = (w300 / modelWidth) * this.boxWidth;\n          wheight = (h300 / modelHeight) * this.boxHeight;\n          _this.imgInfo.height = wheight * _this.kMultiple;\n          _this.imgInfo.width = rwidth * _this.kMultiple;\n          _this.imgX =\n            (_this.clipWidth * _this.kMultiple - _this.imgInfo.width) / 2;\n          _this.imgY =\n            (_this.clipHeight * _this.kMultiple - _this.imgInfo.height) / 2;\n        } else {\n          _this.imgScale = 1;\n          _this.value = parseInt(_this.imgScale * 100);\n          _this.oldValue = _this.value;\n\n          // 改尺寸比\n          rwidth = (w300 / modelWidth) * this.boxWidth;\n\n          wheight = (h300 / modelHeight) * this.boxHeight;\n\n          _this.imgInfo.height = wheight * _this.kMultiple;\n          _this.imgInfo.width = rwidth * _this.kMultiple;\n          _this.imgX =\n            (_this.clipWidth * _this.kMultiple - _this.imgInfo.width) / 2;\n          _this.imgY =\n            (_this.clipHeight * _this.kMultiple - _this.imgInfo.height) / 2;\n        }\n        _this.drawImage();\n      }\n      //  _this.drawImage();\n    },\n    switchPicture() {\n      // console.log(\"123\");\n      this.imgShowFlag1 = true;\n      this.canvasShowFlag = false;\n      // this.slideFlag = false;\n      this.imgShowFlag2 = false;\n      this.imgShowFlag3 = true;\n    },\n    // 返回按钮\n    returnObj() {\n      this.imgShowFlag1 = false;\n      this.canvasShowFlag = true;\n      // this.slideFlag = true;\n      this.imgShowFlag2 = true;\n      this.imgShowFlag3 = false;\n      // this.imgShowFlag3 = true\n      // console.log(\"点击了返回\");\n    },\n    // slider change事件\n    sliderInput(v) {\n      const _this = this;\n\n      if (_this.modelId == 0 || _this.modelId == 10001) {\n        _this.sliderHandler(v);\n      } else {\n        return;\n      }\n    },\n    sliderChange(v) {\n      const _this = this;\n\n      if (_this.modelId == 0 || _this.modelId == 10001) {\n        return;\n      } else {\n        _this.sliderHandler(v);\n      }\n    },\n    sliderHandler(v) {\n      const _this = this;\n      // if (this.isRepeat == 0) {\n      //   this.repatFlag = 0;\n      // } else {\n      //   this.repatFlag = 3;\n      // }\n\n      if (_this.modelId == 0 || _this.modelId == 10001) {\n\n        let zpoint = new fabric.Point(\n            _this.clipWidth / 2,\n            _this.clipHeight / 2\n        ); // 中心点\n        _this.initCanvas.zoomToPoint(zpoint, v / 100);\n\n      } else {\n        _this.imgScale = v / 100;\n        if (_this.modelId == 10001) {\n          _this.imgScale = _this.imgScale / 3;\n        }\n        _this.zoomIn(Math.round(v * 1) / 100);\n      }\n    },\n    gos(item) {\n      // this.$store.state.option = item\n      // this.$store.state.blank = \"screen\";\n\n      this.$router.push({\n        path: '/store',\n        query: {q: item}\n      });\n\n    },\n    loadCanvas() {\n      this.$store.state.Navigation_in = \"Navigation_up\";\n      this.contentImg = document.getElementsByClassName(\"centerImg\")[0];\n\n      // 效果图新增mounted\n\n      const _this = this;\n      // let arr = [];\n      // 画轮廓线\n      //  debugger;\n      this.lineCanvas = this.$refs.lineCanvas;\n      this.ctxLine = this.lineCanvas.getContext(\"2d\");\n      // 大的canvas\n      this.myCanvas = new fabric.Canvas(\"canvasBox\", {\n        backgroundColor: \"#fff\",\n        isDrawingMode: false,\n      });\n\n      const color = \"rgba(0,0,0,0)\";\n      this.myCanvas.setBackgroundColor(color);\n      // 必须重新渲染画布，以显示新的背景\n      this.myCanvas.renderAll();\n\n      this.myCanvas.setWidth(_this.clipWidth);\n      this.myCanvas.setHeight(_this.clipHeight);\n\n      this.myCanvas.on({\n        // 鼠标滚动缩放\n        \"mouse:wheel\": (e) => {\n          // console.log(e);\n          event.preventDefault && event.preventDefault();\n          // let objs = _this.myCanvas.getObjects();\n          if (\n              (_this.imgScale > 0.2 || event.deltaY < 0) &&\n              (_this.imgScale < 2 || event.deltaY > 0)\n          ) {\n            _this.imgScale =\n                (event.deltaY > 0 ? -0.1 : 0.1) + _this.myCanvas.getZoom();\n            // console.log(_this.myCanvas.getZoom());\n            _this.imgScale = Math.max(0.2, _this.imgScale); //最小为原来的2/10\n            _this.imgScale = Math.min(2, _this.imgScale); //最大是原来的2倍\n            _this.imgScale = Math.round(_this.imgScale * 10000) / 10000;\n            let iScale = 1;\n            if (event.deltaY > 0) {\n              // 缩小  滚之后 滚之前\n              iScale = _this.imgScale / (_this.imgScale + 0.1);\n            } else {\n              // 放大\n              iScale = _this.imgScale / (_this.imgScale - 0.1);\n            }\n            _this.values = _this.imgScale * 100;\n            // _this.repatFlag = 3;\n            // if (this.isRepeat == 0) {\n            //   this.repatFlag = 0;\n            // } else {\n            //   this.repatFlag = 3;\n            // }\n            // console.log(iScale);\n            // console.log(this.repatFlag);\n            _this.zoomIn(iScale);\n          }\n        },\n      });\n\n      // 鼠标移动事件\n      let ax, ay;\n      _this.myCanvas.on(\"object:moving\", function (e) {\n        // _this.repatFlag = 3;\n        // if (this.isRepeat == 0) {\n        //   this.repatFlag = 0;\n        // } else {\n        //   this.repatFlag = 3;\n        // }\n        // 左右偏移\n        if (\n            e.target.left <\n            _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale\n        ) {\n          //\n          e.target.left =\n              _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale;\n        } else if (\n            e.target.left >\n            _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale\n        ) {\n          e.target.left =\n              _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale;\n        }\n        // 上下偏移\n        if (\n            e.target.top <\n            _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale\n        ) {\n          //\n          e.target.top =\n              _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale;\n        } else if (\n            e.target.top >\n            _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale\n        ) {\n          e.target.top =\n              _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale;\n        }\n        if (_this.data1 && _this.data1.length >= 1) {\n          ax = e.target.left - _this.movexy.left;\n          ay = e.target.top - _this.movexy.top;\n          _this.repatGroup.forEach((res, index) => {\n            res.left = _this.data1[index].left + ax;\n            res.top = _this.data1[index].top + ay;\n            _this.myCanvas.remove(res);\n            _this.myCanvas.add(res);\n          });\n          // let timeNow = new Date().getTime();\n          // if (timeNow - _this.timeOut < 100) {\n          //   return;\n          // } else {\n          //   _this.timeOut = timeNow;\n          // }\n\n          _this.fabObj = e.target;\n          let widthNumLeft = Math.ceil(\n              ((_this.fabObj.left - _this.clipWidth / 2) * _this.imgScale +\n                  _this.clipWidth / 2 -\n                  (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n              (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n          );\n          let widthNumRight = Math.ceil(\n              ((_this.clipWidth / 2 - _this.fabObj.left) * _this.imgScale +\n                  _this.clipWidth / 2 -\n                  (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n              (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n          );\n          let heightNumTop = Math.ceil(\n              ((_this.fabObj.top - _this.clipWidth / 2) * _this.imgScale +\n                  _this.clipWidth / 2 -\n                  (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n              (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n          );\n          let heightNumBottom = Math.ceil(\n              ((_this.clipWidth / 2 - _this.fabObj.top) * _this.imgScale +\n                  _this.clipWidth / 2 -\n                  (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n              (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n          );\n          _this.leftNum = 0;\n          _this.rightNum = 0;\n          _this.topNum = 0;\n          _this.bottomtNum = 0;\n          _this.repatGroup.forEach((res) => {\n            if (res.left < e.target.left && res.top == e.target.top) {\n              _this.leftNum = _this.leftNum + 1;\n            } else if (res.left > e.target.left && res.top == e.target.top) {\n              _this.rightNum = _this.rightNum + 1;\n            }\n            if (res.top < e.target.top && res.left == e.target.left) {\n              _this.topNum = _this.topNum + 1;\n            } else if (res.top > e.target.top && res.left == e.target.left) {\n              _this.bottomtNum = _this.bottomtNum + 1;\n            }\n          });\n\n          const imgEl = document.createElement(\"img\");\n          imgEl.crossOrigin = \"Anonymous\";\n          imgEl.src = _this.img.src;\n          if (_this.repatFlag == 1) {\n            if (widthNumLeft > _this.leftNum) {\n              let t = _this.leftNum + 1;\n              _this.leftNum = widthNumLeft;\n              for (let ln = t; ln <= widthNumLeft; ln++) {\n                _this.moves.left =\n                    _this.fabObj.left -\n                    _this.fabObj.scaleY * _this.fabObj.width * ln;\n                _this.moves.top = _this.fabObj.top;\n                let imgs = new fabric.Image(_this.img, {\n                  scaleX: _this.fabObj.scaleX,\n                  scaleY: _this.fabObj.scaleY,\n                  top: _this.moves.top,\n                  left: _this.moves.left,\n                  originX: \"center\",\n                  originY: \"center\",\n                });\n                _this.myCanvas.add(imgs);\n                _this.repatGroup.push(imgs);\n                _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                _this.movexy.left = e.target.left;\n                _this.movexy.top = e.target.top;\n              }\n            } else if (widthNumRight > _this.rightNum) {\n              let t1 = _this.rightNum + 1;\n              _this.rightNum = widthNumRight;\n              for (let ln = t1; ln <= widthNumRight; ln++) {\n                _this.moves.left =\n                    _this.fabObj.left +\n                    _this.fabObj.scaleY * _this.fabObj.width * ln;\n                _this.moves.top = _this.fabObj.top;\n                let imgs = new fabric.Image(_this.img, {\n                  scaleX: _this.fabObj.scaleX,\n                  scaleY: _this.fabObj.scaleY,\n                  top: _this.moves.top,\n                  left: _this.moves.left,\n                  originX: \"center\",\n                  originY: \"center\",\n                });\n                _this.myCanvas.add(imgs);\n                _this.repatGroup.push(imgs);\n                _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                _this.movexy.left = e.target.left;\n                _this.movexy.top = e.target.top;\n              }\n            }\n          } else if (_this.repatFlag == 2) {\n            if (heightNumTop > _this.topNum) {\n              let t = _this.topNum + 1;\n              _this.topNum = heightNumTop;\n              for (let ln = t; ln <= heightNumTop; ln++) {\n                _this.moves.left = _this.fabObj.left;\n                _this.moves.top =\n                    _this.fabObj.top -\n                    _this.fabObj.scaleY * _this.fabObj.height * ln;\n                let imgs = new fabric.Image(_this.img, {\n                  scaleX: _this.fabObj.scaleX,\n                  scaleY: _this.fabObj.scaleY,\n                  top: _this.moves.top,\n                  left: _this.moves.left,\n                  originX: \"center\",\n                  originY: \"center\",\n                });\n                _this.myCanvas.add(imgs);\n                _this.repatGroup.push(imgs);\n                _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                _this.movexy.left = e.target.left;\n                _this.movexy.top = e.target.top;\n              }\n            } else if (heightNumBottom > _this.bottomtNum) {\n              let t1 = _this.bottomtNum + 1;\n              _this.bottomtNum = heightNumBottom;\n              for (let ln = t1; ln <= heightNumBottom; ln++) {\n                _this.moves.left = _this.fabObj.left;\n                _this.moves.top =\n                    _this.fabObj.top +\n                    _this.fabObj.scaleY * _this.fabObj.height * ln;\n                let imgs = new fabric.Image(_this.img, {\n                  scaleX: _this.fabObj.scaleX,\n                  scaleY: _this.fabObj.scaleY,\n                  top: _this.moves.top,\n                  left: _this.moves.left,\n                  originX: \"center\",\n                  originY: \"center\",\n                });\n                _this.myCanvas.add(imgs);\n                _this.repatGroup.push(imgs);\n                _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                _this.movexy.left = e.target.left;\n                _this.movexy.top = e.target.top;\n              }\n            }\n          } else if (_this.repatFlag == 3) {\n            // let sjh = _this.leftNum + 1 + _this.rightNum;\n            // let shs = _this.topNum + 1 + _this.bottomtNum;\n            if (widthNumLeft > _this.leftNum) {\n              let t = _this.leftNum + 1;\n              _this.leftNum = widthNumLeft;\n              for (let ln = t; ln <= widthNumLeft; ln++) {\n                for (\n                    let ln1 = _this.bottomtNum * -1;\n                    ln1 <= _this.topNum;\n                    ln1++\n                ) {\n                  _this.moves.left =\n                      _this.fabObj.left -\n                      _this.fabObj.scaleY * _this.fabObj.width * ln;\n                  _this.moves.top =\n                      _this.fabObj.top -\n                      _this.fabObj.scaleX * _this.fabObj.height * ln1;\n                  let imgs = new fabric.Image(_this.img, {\n                    scaleX: _this.fabObj.scaleX,\n                    scaleY: _this.fabObj.scaleY,\n                    top: _this.moves.top,\n                    left: _this.moves.left,\n                    originX: \"center\",\n                    originY: \"center\",\n                  });\n                  _this.myCanvas.add(imgs);\n                  _this.repatGroup.push(imgs);\n                  _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                  _this.movexy.left = e.target.left;\n                  _this.movexy.top = e.target.top;\n                }\n              }\n            } else if (widthNumRight > _this.rightNum) {\n              let t1 = _this.rightNum + 1;\n              _this.rightNum = widthNumRight;\n              for (let ln = t1; ln <= widthNumRight; ln++) {\n                for (\n                    let ln1 = _this.bottomtNum * -1;\n                    ln1 <= _this.topNum;\n                    ln1++\n                ) {\n                  _this.moves.left =\n                      _this.fabObj.left +\n                      _this.fabObj.scaleY * _this.fabObj.width * ln;\n                  _this.moves.top =\n                      _this.fabObj.top -\n                      _this.fabObj.scaleX * _this.fabObj.height * ln1;\n                  let imgs = new fabric.Image(_this.img, {\n                    scaleX: _this.fabObj.scaleX,\n                    scaleY: _this.fabObj.scaleY,\n                    top: _this.moves.top,\n                    left: _this.moves.left,\n                    originX: \"center\",\n                    originY: \"center\",\n                  });\n                  _this.myCanvas.add(imgs);\n                  _this.repatGroup.push(imgs);\n                  _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                  _this.movexy.left = e.target.left;\n                  _this.movexy.top = e.target.top;\n                }\n              }\n            }\n            if (heightNumTop > _this.topNum) {\n              let t = _this.topNum + 1;\n              _this.topNum = heightNumTop;\n              for (let ln = t; ln <= heightNumTop; ln++) {\n                for (let ln1 = _this.rightNum * -1; ln1 <= _this.leftNum; ln1++) {\n                  _this.moves.left =\n                      _this.fabObj.left -\n                      _this.fabObj.scaleX * _this.fabObj.width * ln1;\n                  _this.moves.top =\n                      _this.fabObj.top -\n                      _this.fabObj.scaleY * _this.fabObj.height * ln;\n                  let imgs = new fabric.Image(_this.img, {\n                    scaleX: _this.fabObj.scaleX,\n                    scaleY: _this.fabObj.scaleY,\n                    top: _this.moves.top,\n                    left: _this.moves.left,\n                    originX: \"center\",\n                    originY: \"center\",\n                  });\n                  _this.myCanvas.add(imgs);\n                  _this.repatGroup.push(imgs);\n                  _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                  _this.movexy.left = e.target.left;\n                  _this.movexy.top = e.target.top;\n                }\n              }\n            } else if (heightNumBottom > _this.bottomtNum) {\n              let t1 = _this.bottomtNum + 1;\n              _this.bottomtNum = heightNumBottom;\n              for (let ln = t1; ln <= heightNumBottom; ln++) {\n                for (let ln1 = _this.rightNum * -1; ln1 <= _this.leftNum; ln1++) {\n                  _this.moves.left =\n                      _this.fabObj.left -\n                      _this.fabObj.scaleX * _this.fabObj.width * ln1;\n\n                  _this.moves.top =\n                      _this.fabObj.top +\n                      _this.fabObj.scaleY * _this.fabObj.height * ln;\n                  let imgs = new fabric.Image(_this.img, {\n                    scaleX: _this.fabObj.scaleX,\n                    scaleY: _this.fabObj.scaleY,\n                    top: _this.moves.top,\n                    left: _this.moves.left,\n                    originX: \"center\",\n                    originY: \"center\",\n                  });\n                  _this.myCanvas.add(imgs);\n                  _this.repatGroup.push(imgs);\n                  _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                  _this.movexy.left = e.target.left;\n                  _this.movexy.top = e.target.top;\n                }\n              }\n            }\n          }\n        } else {\n          _this.fabObj = e.target;\n          _this.moveObj = {\n            left: _this.fabObj.left - (_this.clipWidth / 2) * _this.imgScale,\n            top: _this.fabObj.top - (_this.clipWidth / 2) * _this.imgScale,\n          };\n        }\n        _this.drawImageClip();\n      });\n\n      // _this.myCanvas.on(\"object:moved\", function (e) {});\n\n      // // 鼠标点击事件\n      _this.myCanvas.on(\"mouse:down\", function (e) {\n        //   当e.target 是null 或者undefined时 是没选中 分组\n        if (e.target != null) {\n          // console.log(\"down\");\n          // _this.repatFlag = 3;\n          // if (this.isRepeat == 0) {\n          //   this.repatFlag = 0;\n          // } else {\n          //   this.repatFlag = 3;\n          // }\n          e.target.hasControls = false;\n          e.target.hasBorders = false;\n          _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          _this.movexy.left = e.target.left;\n          _this.movexy.top = e.target.top;\n          _this.timeOut = new Date().getTime();\n        }\n      });\n      this.imgCanvas = new fabric.Canvas(\"canvasBox1\", {\n        backgroundColor: \"#fff\",\n        isDrawingMode: false,\n      });\n\n\n      this.initCanvas = new fabric.Canvas(\"canvasBox3\", {\n        backgroundColor: \"#fff\",\n        isDrawingMode: false,\n      });\n\n      this.initCanvas.setWidth(this.clipWidth);\n      this.initCanvas.setHeight(this.clipHeight);\n\n      // 效果图新增mounted\n    },\n    setAsPosition() {\n\n      let scrolltop =\n          document.documentElement.scrollTop || document.body.scrollTop;\n\n      if (scrolltop > 1080) {\n        // 到了底部之后想做的操作,如到了底部之后加载\n        document.getElementsByClassName(\"as\")[0].style.position = \"fixed\"\n        document.getElementsByClassName(\"as\")[0].style.top = \"6rem\"\n\n      } else {\n        document.getElementsByClassName(\"as\")[0].style.position = \"absolute\"\n      }\n    }\n    // 处理模型的函数\n    // 效果图新增函数\n\n    // 效果图新增的methods函数\n  },\n  created() {\n    // 首先判断一下用户有没有登陆\n    // if (localStorage.user === \"\") {\n    //   // 没有登陆的时候将购物车信息存到本地的 localStorage.shopping_car当中\n    //   // 首选判断一下localStorage.shopping_car有没有声明\n    //\n    //   if (!localStorage.sshopping_car) {\n    //     localStorage.setItem('sshopping_car', []);\n    //   }\n    // }\n    // if (!localStorage.token) {\n    //   this.$router.push(\"/\");\n    // }\n    let vm = this;\n\n    // this.rq({\n    //   url: \"/api/personal/selectBookmarkSimple\",\n    //   method: \"post\",\n    //   param: {},\n    //   onError: function () {},\n    //   vm,\n    // }).then((res) => {\n    //   if (res.code == 200) {\n    //     vm.CollectionList = res.data;\n    //     //\n    //   } else {\n    //     //\n    //     // this.$message(res.desc);\n    //   }\n    // });\n    this.su = false;\n\n    // 效果图的created\n    this.getPSD();\n    // 效果图的created\n\n\n    console.log(\"created\")\n  },\n\n  destroyed() { // 销毁vm组件\n    const _this=this;\n\n    window.removeEventListener('scroll', _this.setAsPosition, false);\n  },\n  mounted() {\n    const _this=this;\n    _this.locking=false;\n    // this.$message.success({\n    //   message:'下载成功！',\n    //   duration:30000\n    // });\n\n    let ps = this.$route.path.split('/');\n    this.productId = ps[ps.length - 1];\n    // console.log(this.$route.path);\n    // console.log(this.$route);\n    // console.log('mouted')\n    // localStorage.productId=this.productId=this.$route.query.id;\n    this.candidate();\n    this.loadCanvas()\n\n    window.addEventListener('scroll', _this.setAsPosition, false);\n  },\n  // beforeUpdate(){\n  //   console.log(\"beforeUpdate\")\n  //\n  // },\n  // updated(){\n  //   console.log(\"updated\")\n  //\n  // }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.bodys {\n  background: #f7f9fd;\n\n  //height: 1080px;\n\n  .as {\n    z-index: 9;\n    position: absolute;\n    right: 0rem;\n    top: 13.9rem;\n  }\n}\n\n.title {\n  padding-top: 0.2rem;\n  .problems {\n    position: absolute;\n    top: 7.3rem;\n    right: 0.08rem;\n    width: 0.48rem;\n    height: 0.48rem;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n\n    .cons {\n      padding-top: 0.24rem;\n      padding-left: 0.24rem;\n      padding-right: 0.24rem;\n      width: 4.48rem;\n      height: 3.38rem;\n      background: #fff;\n      position: absolute;\n      right: 0.6rem;\n      bottom: 0;\n      z-index: 10;\n      box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.1);\n      border-radius: 0.14rem;\n      color: #000;\n\n      .title {\n        font-family: 'PingFang SC';\n        font-style: normal;\n        font-weight: 500;\n        font-size: 0.20rem;\n        line-height: 0.28rem;\n\n      }\n\n      .text {\n        font-family: 'PingFang SC';\n        font-style: normal;\n        font-weight: 400;\n        font-size: 0.14rem;\n        line-height: 0.20rem;\n\n      }\n\n      .button {\n        justify-content: space-between;\n        display: flex;\n        padding-top: 0.16rem;\n\n        button {\n          width: 0.99rem;\n          height: 0.42rem;\n          text-align: center;\n\n          border: 1px solid #373ACB;\n          border-radius: 0.21rem;\n          background: #fff;\n        }\n\n        button + button {\n          color: #fafafa;\n          background: #373ACB;\n        }\n      }\n\n    }\n  }\n\n  display: flex;\n  /*margin-left: 1.73rem;*/\n  /*margin-right: 1.73rem;*/\n  /*border-radius: 0.14rem;*/\n  text-align: center;\n\n\n  //   overflow: hidden;\n  > div {\n    display: inline-block;\n    vertical-align: top;\n    text-align: left;\n  }\n\n  .div_left {\n    padding-left: 1.97rem;\n\n    .left {\n      border-radius: 0.14rem;\n      overflow: hidden;\n      width: 3.18rem;\n      height: 7.3rem;\n      left: 0px;\n      top: 0px;\n      position: relative;\n      background: #fff;\n      box-sizing: border-box;\n      // padding-left: 0.1rem;\n      padding-top: 0.24rem;\n      overflow: auto;\n\n      .model {\n        transform-origin: -50% -50%;\n\n        width: 0.8rem;\n        height: 0.22rem;\n        font-family: \"PingFang SC\";\n        font-style: normal;\n        font-weight: 700;\n        font-size: 16px;\n        transform: rotateZ(90deg);\n        position: absolute;\n        top: 0rem;\n        left: 0.22rem;\n        text-align: center;\n        background: #222222;\n        color: #fff;\n        line-height: 0.22rem;\n        border-radius: 0 0.04rem;\n        transform-origin: 0% 0%;\n      }\n\n      .imglist {\n        width: 1.3rem;\n        height: 1.3rem;\n        float: left;\n        margin-bottom: 0.08rem;\n\n        // margin-top: 0.08rem;\n        img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n        }\n      }\n\n      .imgsList {\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: space-between;\n        width: 2.68rem;\n        margin: 0 auto;\n      }\n\n      .imglist:nth-child(2n) {\n        // margin-right: 0.08rem;\n      }\n    }\n  }\n\n  .div_content {\n    padding-left: 0.82rem;\n    padding-right: 0.58rem;\n\n    .comtent {\n      width: 6.52rem;\n      height: 6rem;\n\n\n      .content_img {\n        width: 6.52rem;\n        height: 100%;\n        display: flex;\n        position: relative;\n        margin-bottom: 0.16rem;\n\n        .content_img1 {\n          width: 6rem;\n          height: 6rem;\n          position: absolute;\n          z-index: 2;\n          left: 0;\n          overflow: hidden;\n\n          img {\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            width: 100%;\n            height: 100%;\n            transform: translateX(-50%) translateY(-50%);\n            object-fit: cover;\n          }\n        }\n\n        .content_img2 {\n          width: 0.5rem;\n          height: 0.5rem;\n          font-size: 0.14rem;\n\n          img {\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n          }\n        }\n      }\n\n      .slider {\n        font-size: 0.14rem;\n      }\n\n      // .slider {\n      //   margin-top: 0.24rem;\n      //   width: 418px;\n\n      //   left: 50%;\n      //   position: absolute;\n      //   transform: translateX(-50%);\n      //   //   底部文字\n      //   .text {\n      //     div {\n      //       float: left;\n      //       color: #fff;\n      //       font-family: Source Han Sans SC-Regular, Source Han Sans SC;\n      //       font-size: 12px;\n      //     }\n      //     .bfb2 {\n      //       margin-left: 95px;\n      //     }\n      //     .bfb3 {\n      //       margin-left: 90px;\n      //     }\n      //   }\n      //   //   右边输入框\n      //   .inputext {\n      //     position: absolute;\n      //     left: 315px;\n      //     top: 0.01rem;\n      //     border: 1px solid #000;\n      //     border-radius: 5px;\n      //     .inputspan {\n      //       position: absolute;\n      //       line-height: 0.36rem;\n      //       color: #000;\n      //       left: 0.49rem;\n      //       font-size: 16px;\n      //     }\n      //     input {\n      //       font-size: 16px;\n      //       width: 0.83rem;\n      //       height: 0.36rem;\n      //       background: #f1f1f1;\n      //       border-radius: 5px;\n      //       color: #000;\n      //       border: none;\n      //       padding-right: 0.35rem;\n      //       box-sizing: border-box;\n      //       text-align: right;\n      //     }\n      //   }\n      //   //  左边按钮\n      //   /deep/ .el-input-number__decrease {\n      //     position: absolute;\n      //     left: -387px;\n      //     top: 0.04rem;\n\n      //     height: 0.2rem;\n      //     width: 0.2rem;\n      //     background-color: rgba(0, 0, 0, 0);\n      //     border: 1px solid #666;\n      //     border-radius: 0%;\n\n      //     i {\n      //       color: #666;\n\n      //       font-size: 16px;\n\n      //       font-weight: bold;\n      //       position: absolute;\n      //       left: calc(50% - 8px);\n      //       top: calc(50% - 8px);\n      //     }\n      //   }\n\n      //   //   右边按钮\n      //   /deep/.el-input-number__increase {\n      //     position: absolute;\n      //     top: 0.04rem;\n      //     left: -100px;\n      //     height: 0.2rem;\n      //     width: 0.2rem;\n      //     background-color: rgba(0, 0, 0, 0);\n      //     border: 1px solid #666;\n      //     border-radius: 0%;\n      //     i {\n      //       color: #666;\n      //       font-size: 16px;\n      //       font-weight: bold;\n      //       position: absolute;\n      //       left: calc(50% - 8px);\n      //       top: calc(50% - 8px);\n      //     }\n      //   }\n      //   //   输入显示框背景颜色\n      //   /deep/ .el-input__inner {\n      //     color: #000;\n      //     background-color: #f1f1f1 !important;\n      //     border-radius: 5px;\n      //     border: 1px solid #000 !important;\n      //   }\n      //   //   输入显示框\n      //   /deep/ .el-input--small {\n      //     display: none;\n      //     top: 3px;\n      //     left: -50px;\n      //     border-radius: 5px;\n      //   }\n      //   /deep/.el-slider__runway {\n      //     background-color: #666666 !important;\n      //     height: 2px;\n      //   }\n      //   //   隐藏蓝色进度条\n      //   /deep/ .el-slider__bar {\n      //     background-color: rgba(0, 0, 0, 0);\n      //   }\n      //   //   滑块按钮\n      //   /deep/ .el-slider__button {\n      //     width: 0.1rem;\n      //     height: 0.26rem;\n      //     background-color: #666666 !important;\n      //     // box-shadow: 0px 2px 5px 1px rgba(120, 128, 172, 0.2);\n      //     border-radius: 0.8rem;\n      //     opacity: 1;\n      //     border: none;\n      //   }\n      //   /deep/ .el-slider__input {\n      //     width: 56px;\n      //   }\n      //   /deep/ .el-input-number .el-input__inner {\n      //     padding: 0px !important;\n      //   }\n      // }\n    }\n\n  }\n\n\n  .rigth {\n\n    min-width: 4.19rem;\n    width: 4.19rem;\n    // height: 7.4rem;\n    background: #fff;\n    // margin-left: 0.58rem;\n    border-radius: 0.14rem;\n    // overflow: hidden;\n    box-sizing: border-box;\n    padding-left: 0.24rem;\n    padding-right: 0.24rem;\n\n    .text {\n      padding-bottom: 0.1rem;\n      border-bottom: 1px dashed #f1f1f1;\n\n      .title_name {\n        display: flex;\n        margin-top: 0.16rem;\n        font-size: 0.14rem;\n        font-family: \"PingFang SC\";\n        font-style: normal;\n        font-weight: 400;\n        font-size: 0.14rem;\n        line-height: 0.2rem;\n        color: #666666;\n        justify-content: space-between\n      }\n\n\n      .spans_1 {\n        white-space: nowrap;\n        padding-right: 0.2rem;\n      }\n\n      .spans_2 {\n\n\n        text-align: right;\n      }\n    }\n\n    .option {\n      margin-top: 0.2rem;\n      width: 100%;\n      padding-bottom: 0.2rem;\n      border-bottom: 1px dashed #f1f1f1;\n\n      .title {\n        margin-left: 0px;\n        display: flex;\n        width: 100%;\n        color: #666;\n        font-family: \"PingFang SC\";\n        font-style: normal;\n        font-weight: 400;\n        font-size: 0.12rem;\n        line-height: 0.17rem;\n\n        .one {\n          color: #222;\n        }\n\n        .two:hover {\n          cursor: pointer;\n          text-decoration: underline\n        }\n\n        .el-icon-warning-outline {\n          font-size: 0.16rem;\n          transform: translateY(10%);\n          margin-left: 0.08rem;\n          color: #666;\n        }\n\n        .el-icon-warning-outline:hover {\n          color: #000;\n        }\n\n        div + div {\n          color: #373ACB;\n          margin-left: 0.08rem;\n        }\n\n      }\n\n      .content {\n        width: 100%;\n\n        .content_list {\n          position: relative;\n          margin-top: 0.16rem;\n          /*width: 3.84rem;*/\n          // height: 0.56rem;\n          background: #f3f7ff;\n          font-size: 0.14rem;\n          padding-top: 0.08rem;\n          display: flex;\n          line-height: 0.22rem;\n          cursor: pointer;\n          justify-content: space-evenly;\n          border-radius: 0.14rem;\n\n          > div {\n            > div {\n              cursor: pointer;\n            }\n          }\n\n          .content_list_bolls {\n            width: 0.3rem;\n            text-align: right;\n            margin-right: 0.08rem;\n            height: 100%;\n            line-height: 0.28rem;\n            box-sizing: border-box;\n            padding-top: 0.1rem;\n            cursor: pointer;\n\n            > img {\n              cursor: pointer;\n            }\n          }\n\n          .lusk {\n            padding-top: 0;\n          }\n\n          .con_idv {\n            width: 100%;\n          }\n\n          //   padding-top: 0.08rem;\n          .wonder {\n            /*line-height: 100%;*/\n            /*//   height: 100%;*/\n            /*margin-top: 0.2rem;*/\n            /*margin-left: 0.33rem;*/\n            width: 0.3rem;\n            height: 0.56rem;\n            line-height: 00.56rem;\n\n            top: 0.2rem;\n          }\n\n          .wonder:hover {\n            .wonder_text {\n              display: block;\n              z-index: 10;\n            }\n          }\n\n          .wonder_text {\n            position: absolute;\n            width: 3.44rem;\n            // height: 1.5rem;\n            // border: 1px solid #000;\n            transform: translateX(-48%) translateY(0.0rem);\n            display: none;\n\n            .demo2 {\n              width: 100%;\n              border: 1px solid #e8ecf5;\n              height: 100%;\n              border-radius: 16px;\n              position: relative;\n              margin-left: auto;\n              margin-right: auto;\n              background: #fff;\n              box-sizing: border-box;\n              padding-top: 0.18rem;\n              padding-left: 0.24rem;\n              padding-right: 0.24rem;\n              padding-bottom: 0.15rem;\n\n              .texts {\n                font-family: \"PingFang SC\";\n                font-style: normal;\n                font-weight: 400;\n                font-size: 0.14rem;\n                line-height: 0.2rem;\n              }\n            }\n\n            .demo2 em,\n            .demo2 span {\n              font-style: normal;\n              font-size: 30px;\n              position: absolute;\n              left: 50%;\n              transform: translateX(-50%);\n              top: -0.3rem;\n              color: #e8ecf5;\n            }\n\n            .demo2 em {\n              z-index: -1;\n            }\n\n            .demo2 span {\n              left: 50%;\n              transform: translateX(-50%) translateY(0.02rem);\n\n              color: white;\n            }\n\n            .trianglem {\n              position: absolute;\n              left: 50%;\n              transform: translateX(-15%) translateY(-50%);\n              // transform: translateY(-50%);\n              // height: 0.1728rem;\n              // width: 0.2rem;\n              // background: red;\n              width: 0px;\n              height: 0px;\n              border: 0.15rem solid #000;\n              border-top-color: transparent;\n              border-left-color: transparent;\n              border-right-color: transparent;\n            }\n          }\n        }\n      }\n    }\n\n    .price {\n      font-family: \"PingFang SC\";\n      font-style: normal;\n      font-weight: 400;\n      font-size: 0.14rem;\n      line-height: 0.41rem;\n      /*width: 3.86rem;*/\n      height: 0.41rem;\n      border-bottom: 1px dashed #f1f1f1;\n\n      > div {\n        display: inline-block;\n        width: 50%;\n      }\n\n      > div:last-child {\n        font-size: 0.18rem;\n        font-weight: bold;\n        text-align: right;\n        padding-right: 0.2rem;\n      }\n    }\n\n    .operlist {\n      width: 100%;\n      height: 1.32rem;\n\n      box-sizing: border-box;\n\n      .operlist_1 {\n        width: 100%;\n        height: 0.36rem;\n        line-height: 0.36rem;\n        margin-top: 0.1rem;\n        display: flex;\n\n        .gx1 {\n          // margin-top: 2px;\n          // margin-right: 7.6px;\n        }\n\n        .gx2 {\n          // margin-top: 5px;\n          // margin-right: 7.6px;\n        }\n\n        button + button {\n          margin-left: 0.24rem;\n        }\n\n        button {\n          width: 1.88rem;\n          //   height: 35px;\n          border: none;\n          line-height: 100%;\n          background: #ffc65a;\n          border-radius: 0.34rem;\n          margin-top: 0px;\n          height: 0.36rem;\n          display: flex;\n          text-align: center;\n          align-items: center;\n          box-sizing: border-box;\n          // padding-left: 0.24rem;\n          // padding-right: 0.24rem;\n          justify-content: center;\n\n          img {\n            color: #fff2c2;\n            margin-right: .04rem;\n          }\n\n          div {\n            line-height: 0.36rem;\n            height: 0.36rem;\n          }\n        }\n\n        .btn2 {\n          padding-left: 0.44rem;\n          padding-right: 0.42rem;\n\n          img {\n            margin-right: .08rem;\n          }\n        }\n      }\n\n      .tipstext {\n        text-align: center;\n        padding-top: 0.08rem;\n      }\n\n      .operlist_2 {\n        margin-top: 0.14rem;\n        width: 100%;\n        height: 0.46rem;\n        background: #373acb;\n        border-radius: 0.24rem;\n        color: #ffffff;\n        font-weight: 400;\n        font-size: 0.16rem;\n        line-height: 0.46rem;\n        text-align: center;\n        position: relative;\n        cursor: pointer;\n        border: 0;\n        display: flex;\n        justify-content: center;\n\n        .download {\n          width: 0.25rem;\n          height: 0.25rem;\n          transform: translateY(25%);\n          fill: currentColor;\n          overflow: hidden;\n        }\n\n        img {\n          width: 0.25rem;\n          transform: translateX(-0.04rem);\n        }\n      }\n\n      .downs {\n        background: #fff;\n        border: 1px solid #373ACB;\n        color: #373ACB;\n        position: relative;\n        overflow: hidden;\n      }\n\n      .btn_x:hover {\n        background: #5F61D5;\n      }\n\n      .btn_x:active {\n        background: #2C2EA2;\n      }\n\n      .bag {\n\n\n        img {\n          color: #fff;\n          transform: translateX(0.08rem);\n        }\n      }\n\n      .btn_1 {\n        color: #222;\n        background: #FFC65A;\n      }\n\n      .btn_1:hover {\n        background: #FFDA95;\n      }\n\n      .btn_1:active {\n        background: #A37E3A;\n      }\n\n      .btn_12 {\n        background: #F1F1F1;\n        color: #222222\n      }\n\n      .btn_12:hover {\n        background: #CCCCCC;\n      }\n\n      .btn_12:active {\n        background: #CCCCCC;\n      }\n\n    }\n\n    // .operlist {\n    //   width: 100%;\n    //   height: 1.32rem;\n\n    //   box-sizing: border-box;\n\n    //   .operlist_1 {\n    //     width: 100%;\n    //     height: 0.36rem;\n    //     line-height: 0.36rem;\n    //     padding-top: 0.1rem;\n    //     display: flex;\n    //     .gx1 {\n    //       margin-top: 2px;\n    //       margin-right: 7.6px;\n    //     }\n    //     .gx2 {\n    //       margin-top: 5px;\n    //       margin-right: 7.6px;\n    //     }\n    //     button + button {\n    //       margin-left: 0.24rem;\n    //     }\n    //     button {\n    //       width: 1.88rem;\n    //       //   height: 35px;\n    //       border: none;\n    //       line-height: 100%;\n    //       background: #ffc65a;\n    //       border-radius: 0.34rem;\n    //       margin-top: 0px;\n    //       height: 30px;\n    //       display: flex;\n    //       text-align: center;\n    //       box-sizing: border-box;\n    //       padding-left: 0.35rem;\n    //       img {\n    //         color: #fff2c2;\n    //       }\n    //       div {\n    //         line-height: 0.36rem;\n    //         height: 0.36rem;\n    //       }\n    //     }\n    //   }\n    //   .operlist_2 {\n    //     margin-top: 0.14rem;\n    //     width: 4rem;\n    //     height: 0.36rem;\n    //     background: #373acb;\n    //     border-radius: 0.24rem;\n    //     color: #ffffff;\n    //     font-weight: 400;\n    //     font-size: 0.16rem;\n    //     line-height: 0.36rem;\n    //     text-align: center;\n    //   }\n    // }\n  }\n}\n\n.middle {\n  text-align: center;\n  min-width: 1020px;\n\n  > div {\n    margin: 0.2rem auto 0;\n    width: 16.18rem;\n    height: 1.51rem;\n    background: #fff;\n    border-radius: 0.14rem;\n    margin-left: 50%;\n    transform: translateX(-50%);\n    box-sizing: border-box;\n    padding-left: 2.05rem;\n    padding-top: 0.2rem;\n    padding-right: 3.68rem;\n    padding-bottom: 0.25rem;\n    display: flex;\n    text-align: left;\n\n    ul {\n      li {\n        list-style-type: none;\n        margin-top: 0.15rem;\n      }\n    }\n\n    .titles {\n      display: table-cell;\n      width: 18%;\n      font-size: 0.14rem;\n      line-height: 0.2rem;\n      text-align: right;\n      padding-right:0.15rem;\n    }\n\n    .contents {\n      display: table-cell;\n      font-size: 0.14rem;\n      line-height: 0.2rem;\n      margin-left: 0.16rem;\n\n      .bulues {\n        color: #6467fd;\n      }\n    }\n  }\n}\n\n.in_2 {\n  //display: flex;\n  width: 3.56rem;\n  height: 0.86rem;\n  margin-top: 0.16rem;\n  background: #F8F8F8;\n  border-radius: 0.08rem;\n  >span{\n    margin-left: 0.04rem;\n    display: inline-block;\n    vertical-align: top;\n    margin-top: 0.15rem;\n    img {\n      width: 0.84rem;\n    }\n  }\n}\n\n.Related {\n  width: 100%;\n  font-family: \"PingFang SC\";\n  font-style: normal;\n  font-weight: 700;\n  font-size: 20px;\n  line-height: 28px;\n  text-align: center;\n  margin-top: 0.53rem;\n  // padding-left: 0.14rem;\n  margin-bottom: 0.14rem;\n}\n\n//.contents {\n//  // overflow-y: auto;\n//  // overflow-x: hidden;\n//  /*width: 83.7vw;*/\n//  //  height: 80vh;\n//  position: relative;\n//  margin: 0 0.2rem;\n//\n//  .numberlist {\n//    position: absolute;\n//    padding: 0 0.1rem;\n//    cursor: pointer;\n//  }\n//}\n\n/deep/ .el-slider__button-wrapper {\n  z-index: 1 !important;\n}\n\n.canvas-clip {\n  width: 3rem;\n  height: 3rem;\n  // background: #000;\n  // position: relative;\n  // top: 50%;\n  // left: 50%;\n  // transform: scale(1) translate(-50%, -50%);\n  // margin-left: 26px;\n  position: absolute;\n  z-index: 99;\n  margin-bottom: 30px;\n  left: 0;\n  top: 0;\n\n  .markImg1 {\n    display: none;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: 888;\n    left: 0;\n    top: 0;\n    // box-shadow: 0 0 8px rgb(0 0 0 / 12%);\n    pointer-events: none;\n    // display: none;\n  }\n\n  .markImg2 {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: scale(1) translate(-50%, -50%);\n    z-index: 2;\n    pointer-events: none;\n  }\n\n\n}\n\n.babylon-container {\n  // margin-bottom: 24px;\n  position: relative;\n  // width: 650px;\n  // height: 650px;\n  width: 6rem;\n  height: 6rem;\n}\n\n.markDiv {\n  width: 300px;\n  height: 300px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: scale(1) translate(-50%, -50%);\n  z-index: 2;\n  pointer-events: none;\n  display: none;\n}\n\n#container {\n  // width: 650px;\n  // height: 650px;\n  width: 6rem;\n  height: 6rem;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  img {\n    // width: 100%;\n    height: 100%;\n    width: auto;\n    // object-fit: cover;\n  }\n}\n\n.canvas-container canvas {\n  opacity: 0;\n}\n\n#canvasBox3 {\n  opacity: 100;\n}\n\n.ordinary-picture {\n  width: 0.5rem;\n  height: 0.5rem;\n  // margin-left: 2px;\n  position: absolute;\n  z-index: 9;\n  right: 0;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n}\n\n/deep/ .el-textarea__inner {\n  background: #f1f1f1;\n}\n</style>>\n\n"]}]}