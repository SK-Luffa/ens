{"remainingRequest":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/src/components/Details/detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/src/components/Details/detail.vue","mtime":1666323437801},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/babel-loader/lib/index.js","mtime":1665559060757},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/cache-loader/dist/cjs.js","mtime":1665559060439},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/vue-loader/lib/index.js","mtime":1665559060829}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBCb3R0b20gZnJvbSAiQC9jb21wb25lbnRzL0JvdHRvbU5hdmlnYXRpb24vaW5kZXgiOwppbXBvcnQge3NvcnRpbmdfbGlzdCxkb3dubG9hZH0gZnJvbSAiQC91dGlscy91dGlsIjsKaW1wb3J0IENlbGwgZnJvbSAiLi4vU2NyZWVuL0NlbGwiOwppbXBvcnQgU2hvdSBmcm9tICIuLi9TY3JlZW4vU2hvdSI7Ci8vIGltcG9ydCBmYWJyaWMgZnJvbSAnZmFicmljJwoKLy8gaW1wb3J0IFRlbXAgZnJvbSAiLi9UZW1wLnZ1ZSI7Ci8vIGltcG9ydCBVdGlscyBmcm9tICIuLi8uLi9hc3NldHMvanMvdXRpbCI7CmltcG9ydCB7IGZhYnJpYyB9IGZyb20gImZhYnJpYyI7CmltcG9ydCBmb3hwc2QgZnJvbSAiLi4vLi4vc3RhdGljL2pzL2ZveHBzZCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQm90dG9tLAogICAgQ2VsbCwKICAgIFNob3UsCiAgICBmYWJyaWMsCiAgICAvLyBUZW1wLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvY2tpbmc6ZmFsc2UsCiAgICAgIGNvbjogZmFsc2UsCiAgICAgIHRleHRhcmVhMTogIiIsCiAgICAgIHByb2R1Y3RJZDogbnVsbCwKICAgICAgZG93bkxvYWQ6IGZhbHNlLAogICAgICBkdWFuOiB0cnVlLAogICAgICAvLyBDb2xsZWN0OiB0cnVlLAogICAgICBzdTogZmFsc2UsCiAgICAgIHA6IG51bGwsCiAgICAgIGxpY2Vuc2VUeXBlOiAwLAogICAgICBsaWNlbnNlUHJpY2U6ICcnLAogICAgICBsaW5lbGlzdDogW10sCiAgICAgIGNvbnNIZWlnaHQ6IDAsCiAgICAgIGxpc3RudW1iZXI6IDAsCiAgICAgIG1heFNjYWxlOiA0MDAsCiAgICAgIHByb2dyZXNzOjAsCgogICAgICBpbWdTaXplOicnLAogICAgICBwcmludFNpemUxOiAnJywKICAgICAgcHJpbnRTaXplMjogJycsCgogICAgICBjb250ZW50X2xpc3RfYm9sbDogW3RydWUsIGZhbHNlLCBmYWxzZV0sIC8v5o6n5Yi25q+P5LiA5Liq6YCJ6aG555qE6YCJ5Lit5ZKM5pm056m6CiAgICAgIGNhbmRpZGF0ZV9pbWdsaXN0OiBbXSwKICAgICAgY29udGVlbnRfaW1nOiAiIiwKICAgICAgY29udGVlbnRfaW1nMjogIiIsCiAgICAgIHZhbHVlczogMTAwLAogICAgICBvbnRlbnRfZGF0YXM6ICIiLAogICAgICB3aHk6IFtyZXF1aXJlKCJAL2Fzc2V0cy9pbWcvd2h5LnN2ZyIpLCByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvPC5zdmciKV0sCiAgICAgIGd4OiBbcmVxdWlyZSgiQC9hc3NldHMvaW1nL2dveC5zdmciKSwgcmVxdWlyZSgiQC9hc3NldHMvaW1nL3hpbmd4LnN2ZyIpLCByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvb2tzLnN2ZyIpXSwKICAgICAgd29uZGVyOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvd29uZGVyLnBuZyIpLAogICAgICBzdGF0ZTogW3JlcXVpcmUoIkAvYXNzZXRzL2ltZy94LnBuZyIpLCByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvZC5wbmciKV0sCiAgICAgIGFiOiBbcmVxdWlyZSgiQC9hc3NldHMvaW1nL2EucG5nIiksIHJlcXVpcmUoIkAvYXNzZXRzL2ltZy9iLnBuZyIpXSwKICAgICAgYmxhbmtJbWFnZTogcmVxdWlyZSgiQC9hc3NldHMvaW1nL2JsYW5rLnN2ZyIpLAogICAgICBrdTogW3JlcXVpcmUoIkAvYXNzZXRzL2ltZy9rdV8xLnN2ZyIpLCByZXF1aXJlKCJAL2Fzc2V0cy9pbWcva3VfMi5zdmciKSwgcmVxdWlyZSgiQC9hc3NldHMvaW1nL2t1XzQuc3ZnIiksIHJlcXVpcmUoIkAvYXNzZXRzL2ltZy9rdV8zLnN2ZyIpXSwKICAgICAgLy8g5pWI5p6c5Zu+55qEZGF0YeeahOaVsOaNrgogICAgICAvLyDojrflj5bmqKHlnovnmoRkYXRhCiAgICAgIGxpc3Q6IFtdLAogICAgICBwc2RMaXN0OiBbXSwgLy/ku47lkI7lj7DmjqXlj6Pmi7/liLDnmoRwc2TliJfooagKICAgICAgbmV3UHNkTGlzdDogW10sIC8v5a+55q+U5ZCO55qEcHNk5YiX6KGoCiAgICAgIG5ld01vZGVsc0xpc3Q6IFtdLCAvLyDnrKzkuIDmrKHmi7/liLDnmoQgIOWkp+WbvueahOivpue7hgogICAgICBtb2RlbHNMaXN0OiBbXSwgLy/nrKzkuozmrKHlpITnkIYKICAgICAgbmFtZUxpc3Q6IFtdLCAvLyDku47mjqXlj6Pmi7/liLDnmoQg5Zu+5bGC55qE5YiX6KGoCiAgICAgIG5ld05hbWVMaXN0OiBbXSwgLy8g5a+55q+U5ZCO55qE5Zu+5bGC5YiX6KGoCiAgICAgIC8vIOaViOaenOWbvuaWsOWingogICAgICByZXBhdEZsYWc6IDMsCiAgICAgIGlzUmVwZWF0OiAwLAogICAgICBtb2RlbElkOiAwLAogICAgICBiZWdpbjogeyB4OiAwLCB5OiAwIH0sCiAgICAgIGltZ1B4V2lkdGg6IG51bGwsCiAgICAgIGltZ1B4SGVpZ2h0OiBudWxsLAogICAgICBjYWxjdWxhdGVXaWR0aDogbnVsbCwKICAgICAgbW9kZWxBcnJheTogW10sCiAgICAgIGltZ0FycmF5OiBbXSwKICAgICAgY2xpcFg6IG51bGwsIC8v6KOB5YiH55qE5Z2Q5qCHeAogICAgICBjbGlwWTogbnVsbCwgLy/oo4HliIfnmoTlnZDmoId5CiAgICAgIGJveFdpZHRoOiBudWxsLCAvLyDnm5LlrZDnmoTlrr3luqYKICAgICAgYm94SGVpZ2h0OiBudWxsLCAvLyDnm5LlrZDnmoTpq5jluqYKICAgICAgY2FsY3VsYXRlSGVpaHQ6IG51bGwsCiAgICAgIGltZ1Nob3dGbGFnOiAxLCAvLyDpu5jorqTmmL7npLroh6rpgILlupTnmoTlsLrlr7gKICAgICAgb2JqOiB7fSwKICAgICAgY2xpcFdpZHRoOiA2MDAsIC8vY2xpcCDoo4HliIflh7rmnaXnmoTmlrnlnZfljLrln58KICAgICAgY2xpcEhlaWdodDogNjAwLCAvL2NsaXAg6KOB5YiH5Ye65p2l55qE5pa55Z2X5Yy65Z+fCiAgICAgIGJveE1heDogNjAwLAogICAgICBrTXVsdGlwbGU6IDMsIC8vCiAgICAgIGltZzogbnVsbCwKICAgICAgaW5pdENhbnZhczogbnVsbCwKICAgICAgbXlDYW52YXM6IG51bGwsCiAgICAgIGltZ1NuOiBudWxsLCAvL+WbvueJh+eahOe8luWPtwogICAgICB6b29tOiAxLAogICAgICBmYWJPYmo6IG51bGwsIC8vIOeUqGZhYnJpYy5qcyBuZXcg5Ye65p2l55qE5a+56LGhCiAgICAgIHpvb21Qb2ludDogbnVsbCwKICAgICAgcmVwYXRHcm91cDogW10sIC8vIOW5s+mTuuS5i+WQjueahGdyb3Vw5pWw57uECiAgICAgIGdyb3VwOiBudWxsLAogICAgICBkYXRhMTogbnVsbCwKICAgICAgbW92ZU9iajogbnVsbCwKICAgICAgYXJyQ3Jvc3MxOiBbXSwgLy8g5bmz6ZO65LmL5ZCO55qE5pWw5o2uCiAgICAgIGFyclZlcnRpY2FsOiBbXSwKICAgICAgYWRkQXJyOiBbXSwgLy/nvKnmlL7kuYvlkI7mlrDlop7nmoTmlbDnu4QKICAgICAgd2lkdGhOdW06IDAsIC8vIOebtOaOpeW5s+mTuueahOaoquWQkeaVsOmHjwogICAgICBoZWlnaHROdW06IDAsIC8v55u05o6l5bmz6ZO655qE56uW5ZCR5pWw6YePCiAgICAgIG1vdmVzOiB7fSwKICAgICAgbGVmdE51bTogMCwKICAgICAgcmlnaHROdW06IDAsCiAgICAgIHRvcE51bTogMCwKICAgICAgYm90dG9tdE51bTogMCwKICAgICAgbW92ZXh5OiB7fSwKICAgICAgdGltZU91dDogMCwKICAgICAgY2FudmFzOiBudWxsLAogICAgICBjbGlwSW1nOiBudWxsLAogICAgICBmb3hwc2RPYmo6IG51bGwsCiAgICAgIHNrdTogbnVsbCwKICAgICAgY3R4TGluZTogbnVsbCwKICAgICAgaW1nU2hvd0ZsYWcxOiB0cnVlLAogICAgICBjYW52YXNTaG93RmxhZzogZmFsc2UsCiAgICAgIGltZ1Nob3dGbGFnMjogZmFsc2UsCiAgICAgIGltZ1Nob3dGbGFnMzogZmFsc2UsCiAgICAgIG1vZGVsSW1nOiBudWxsLAogICAgICBzbGlkZUZsYWc6IHRydWUsCiAgICAgIHR5cGVzOiBbXSwKICAgICAgY2F0ZWdvcmllczogW10sCiAgICAgIHRhZ3M6IFtdLAogICAgICBwcm9kdWN0TnVtOiAwLAogICAgICAvLyDmlYjmnpzlm77mlrDlop4KICAgICAgLy8g5pWI5p6c5Zu+55qEZGF0YeaVsOaNrgogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICAnJHN0b3JlLnN0YXRlLmZvbnRSYXRlJzogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuY2hhbmdlU2l6ZSgpOwogICAgICB9LAogICAgfSwKICAgIHZhbHVlKCkgewogICAgfSwKICAgIGNvbnNIZWlnaHQoKSB7CiAgICB9LAogICAgLy8gcHJvZHVjdElkKCkgewogICAgLy8gICB0aGlzLmNhbmRpZGF0ZSgpOwogICAgLy8gfSwKICAgIC8vIHZhbHVlcygpIHsKICAgIC8vICAgLy8gY29uc29sZS5sb2codGhpcy52YWx1ZXMpOwogICAgLy8gICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZXM7CiAgICAvLyAgIC8vIHRoaXMuem9vbUluKHRoaXMudmFsdWVzKQogICAgLy8gICAvLyB0aGlzLmNvbnRlbnRJbWcuc3R5bGUuaGVpZ2h0ID0gNjAwICogKHRoaXMudmFsdWVzIC8gMTAwKSArICJweCI7CiAgICAvLyAgIC8vIHRoaXMuY29udGVudEltZy5zdHlsZS53aWR0aCA9IDYwMCAqICh0aGlzLnZhbHVlcyAvIDEwMCkgKyAicHgiOwogICAgLy8gICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbnRlbnRJbWcuc3R5bGUuaGVpZ2h0KTsKICAgIC8vIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBtaXMoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImFzIilbMF0uc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiCiAgICB9LAogICAgc3ViKCkgewogICAgICBpZiAodGhpcy50ZXh0YXJlYTEgPT0gIiIpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZSgiQ2Fubm90IGJlIGVtcHR577yBIikKICAgICAgfQoKICAgIH0sCiAgICBjbG9zZWIoKSB7CiAgICAgIHRoaXMuY29uID0gdHJ1ZQogICAgfSwKICAgIGNsb3NlYnMoKSB7CiAgICAgIHRoaXMuY29uID0gZmFsc2UKICAgIH0sCiAgICAvL+eCueWHu+WPlua2iOaUtuiXj+aMiemSrgogICAgY2FuY2VsKGlkKSB7CiAgICAgIGNvbnNvbGUubG9nKGlkKTsKICAgIH0sCiAgICAvLyDmt7vliqDliLDnprvnur/otK3nianovaYKICAgIGFkZE91dGxpbmVDYXIoKSB7CgogICAgICBsZXQgbSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NzaG9wcGluZ19jYXInKSk7CgogICAgICBpZiAobSAmJiBtLnNvbWUoaXRlbSA9PiBpdGVtLnByb2R1Y3RJZCA9PSB0aGlzLnByb2R1Y3RJZCkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKCJQcm9kdWN0IGV4aXN0Iik7CiAgICAgIH0gZWxzZSB7CgogICAgICAgIGlmICghbSkgewogICAgICAgICAgbSA9IFtdOwogICAgICAgIH0KCiAgICAgICAgbGV0IHMgPSB7CiAgICAgICAgICBwcm9kdWN0SWQ6IHRoaXMucHJvZHVjdElkLC8v55u05o6l5oqK6L+Z5byg5Zu+55qE5omA5pyJ6K+m57uG5L+h5oGv5L+d5a2Y6LW35p2l77yM5Yiw6LSt54mp6L2m5oiR5Lus5YaN5qC55o2u5oiR5Lus6ZyA6KaB5pi+56S6CiAgICAgICAgICBpbWdUeXBlOiB0aGlzLmxpY2Vuc2VUeXBlLCAvL+aOiOadg+exu+WeiwogICAgICAgICAgcHJvZHVjdE51bTogMQogICAgICAgIH07CgogICAgICAgIG0ucHVzaChzKQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzc2hvcHBpbmdfY2FyJywgSlNPTi5zdHJpbmdpZnkobSkpOwogICAgICAgIHRoaXMub250ZW50X2RhdGFzLmlzQnV5ID0gMTsKCiAgICAgICAgdGhpcy5sb2NraW5nPWZhbHNlOwogICAgICB9CiAgICB9LAogICAgLy8g5re75Yqg5Yiw6LSt54mp6L2mCiAgICBhZGRTaG9waW5nQ2FyKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwoKICAgICAgaWYodm0ubG9ja2luZylyZXR1cm47CiAgICAgIHZtLmxvY2tpbmc9dHJ1ZTsKCiAgICAgIGd0YWcoJ2V2ZW50JywgJ2FkZF90b19jYXJ0JywgewogICAgICAgIGN1cnJlbmN5OiAnVVNEJywKICAgICAgICBpdGVtczogW3sKICAgICAgICAgIGl0ZW1faWQ6IHRoaXMub250ZW50X2RhdGFzLnByb2R1Y3RJZCwKICAgICAgICAgIGl0ZW1fbmFtZTogdGhpcy5vbnRlbnRfZGF0YXMuaW1nU24sCiAgICAgICAgICBwcmljZTogdGhpcy5saWNlbnNlUHJpY2UsCiAgICAgICAgICBjdXJyZW5jeTogJ1VTRCcsCiAgICAgICAgICBxdWFudGl0eTogMQogICAgICAgIH1dLAogICAgICAgIHZhbHVlOiB0aGlzLmxpY2Vuc2VQcmljZQogICAgICB9KTsKCiAgICAgIC8vIOmmluWFiOWIpOaWreS4gOS4i+eUqOaIt+acieayoeacieeZu+mZhgogICAgICBpZiAoIWxvY2FsU3RvcmFnZS51c2VyKSB7CiAgICAgICAgLy8g5rKh5pyJ55m76ZmG55qE5pe25YCZ5bCG6LSt54mp6L2m5L+h5oGv5a2Y5Yiw5pys5Zyw55qEIGxvY2FsU3RvcmFnZS5zaG9wcGluZ19jYXLlvZPkuK0KICAgICAgICAvLyDpppbpgInliKTmlq3kuIDkuItsb2NhbFN0b3JhZ2Uuc2hvcHBpbmdfY2Fy5pyJ5rKh5pyJ5aOw5piOCiAgICAgICAgdGhpcy5hZGRPdXRsaW5lQ2FyKCk7CiAgICAgICAgLy8gY29uc29sZS5sb2coSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3Nob3BwaW5nX2NhcicpKSk7CgogICAgICAgIC8vIHRoaXMuQmFnID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5ycSh7CiAgICAgICAgICB1cmw6ICIvYXBpL2NhcnQvc2F2ZSIsCiAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgIHBhcmFtOiB7CiAgICAgICAgICAgIHByb2R1Y3RJZDogdGhpcy5vbnRlbnRfZGF0YXMucHJvZHVjdElkLAogICAgICAgICAgICBpbWdUeXBlOiB0aGlzLmxpY2Vuc2VUeXBlLAogICAgICAgICAgfSwKICAgICAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdm0ubG9ja2luZz1mYWxzZTsKICAgICAgICAgIH0sCiAgICAgICAgICB2bSwKICAgICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgLy8gdGhpcy4kbWVzc2FnZSgi5re75Yqg5oiQ5YqfIik7CiAgICAgICAgICAgIGlmICghcmVzLnVzZXIpIHsKICAgICAgICAgICAgICB2bS5hZGRPdXRsaW5lQ2FyKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdm0ub250ZW50X2RhdGFzLmlzQnV5ID0gMTsKICAgICAgICAgICAgfQoKICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgPT0gNjAxIHx8IHJlcy5jb2RlID09IDY4MCkgewogICAgICAgICAgICB2bS5hZGRPdXRsaW5lQ2FyKCk7CiAgICAgICAgICAgIC8vICAgdGhpcy5CYWcgPSBmYWxzZTsKICAgICAgICAgICAgLy8gdGhpcy4kc3RvcmUuc3RhdGUubG9naW4gPSB0cnVlOwogICAgICAgICAgICAvLyB0aGlzLiRzdG9yZS5zdGF0ZS5sb2dpbnMgPSB0cnVlCiAgICAgICAgICAgIC8vIHRoaXMuJHN0b3JlLnN0YXRlLkZvcmdldFB3ZCA9IGZhbHNlCiAgICAgICAgICAgIC8vIHRoaXMuJHN0b3JlLnN0YXRlLlNpZ24gPSBmYWxzZQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZShyZXMuZGVzYyk7CiAgICAgICAgICAgIC8vCiAgICAgICAgICB9CiAgICAgICAgICB2bS5sb2NraW5nPWZhbHNlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYWRkU2hvcGluZ0NhcnMoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvc2hvcHBpbmdjYXIiKQogICAgfSwKICAgIHNob3UocGQpIHsKCiAgICAgIHRoaXMuJHJlZnMuc2hvdS5zaG91KHBkKTsKICAgIH0sCiAgICBkZXRhaWxzKGEsIGIpIHsKICAgICAgLy8gbG9jYWxTdG9yYWdlLnByb2R1Y3RJZCA9IHRoaXMucHJvZHVjdElkPWE7CiAgICAgIC8vIGxvY2FsU3RvcmFnZS5pbWdTbiA9IGI7CgogICAgICBjb25zdCByb3V0ZVVybCA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsKICAgICAgICBwYXRoOiAiL2RldGFpbC8iICsgYQogICAgICB9KTsKCiAgICAgIHdpbmRvdy5vcGVuKHJvdXRlVXJsLmhyZWYsICJfc2VsZiIpOwoKICAgICAgLy8gY29uc29sZS5sb2coInB1c2giKQogICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgIC8vICAgcGF0aDogIi9kZXRhaWxzIiwKICAgICAgLy8gICBxdWVyeTogeyBpZDogYSB9LAogICAgICAvLyB9KTsKCgogICAgICAvLyB0aGlzLiRzdG9yZS5zdGF0ZS5ibGFuayA9ICJkZXRhaWxzIjsKICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goIi9ibGFuayIpOwogICAgfSwKICAgIHRoaXNEb3dubG9hZChwZCkgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5ycSh7CiAgICAgICAgdXJsOiAiL2FwaS9wcm9kdWN0L2Rvd25VcmwiLAogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHBhcmFtOiB7CiAgICAgICAgICBpZDogX3RoaXMub250ZW50X2RhdGFzLnByb2R1Y3RJZCwKICAgICAgICB9LAogICAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICB9LAogICAgICAgIF90aGlzLAogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAvLyB0aGlzLiRtZXNzYWdlKCLmt7vliqDmiJDlip8iKTsKCiAgICAgICAgICByZXMuZGF0YSA9IHJlcy5kYXRhLnJlcGxhY2UoJ2h0dHA6JywgJ2h0dHBzOicpOwoKICAgICAgICAgIGxldCByZWcgPSAvXC4oXHcqPylcPy8KICAgICAgICAgIGxldCBleHQgPSByZWcuZXhlYyhyZXMuZGF0YSlbMV07CgogICAgICAgICAgaWYoJ3ppcCc9PWV4dC50b0xvd2VyQ2FzZSgpKXsKCiAgICAgICAgICAgIGxldCBlbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCByZXMuZGF0YSk7IC8v6K6+572u5LiL6L295paH5Lu255qEdXJs5Zyw5Z2ACiAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgX3RoaXMub250ZW50X2RhdGFzLmltZ1NuICsgJy4nICsgZXh0KTsvL+eUqOS6juiuvue9ruS4i+i9veaWh+S7tueahOaWh+S7tuWQjQoKICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwgIl9zZWxmIik7CiAgICAgICAgICAgIGVsZS5jbGljaygpOwoKICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgZG93bmxvYWQoX3RoaXMsIHJlcy5kYXRhLCBfdGhpcy5vbnRlbnRfZGF0YXMuaW1nU24gKyAnLicgKyBleHQpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgIC8vIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7CiAgICAgICAgICAvLyB4aHIub3BlbignR0VUJywgcmVzLmRhdGEsIHRydWUpOwogICAgICAgICAgLy8geGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAvLyAgICAgbGV0IHJlczEgPSB4aHIucmVzcG9uc2U7CiAgICAgICAgICAvLyAgICAgaWYocmVzMSl7CiAgICAgICAgICAvLyAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICAvLyAgICAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwocmVzMSk7CiAgICAgICAgICAvLyAgICAgICAgIGxpbmsuZG93bmxvYWQgPSBfdGhpcy5vbnRlbnRfZGF0YXMuaW1nU24gKyAnLicgKyBleHQ7CiAgICAgICAgICAvLyAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICAgIC8vICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChsaW5rLmhyZWYpOwogICAgICAgICAgLy8gICAgIH0KICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIHhoci5zZW5kKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UocmVzLmRlc2MpOwogICAgICAgICAgLy8KICAgICAgICB9CiAgICAgIH0pOwoKICAgIH0sCiAgICBjaGFuZ2VTaXplKCkgewogICAgICBpZiAodGhpcy5wICE9IG51bGwgJiYgdGhpcy5wLmxlbmd0aCA+IDApCiAgICAgICAgc29ydGluZ19saXN0KHRoaXMucCwgdGhpcyk7CiAgICB9LAogICAgLy8gc29ydGluZ19saXN0KHgpIHsKICAgIC8vICAgLy8g5aOw5piO5LiA5Liq5pWw57uE77yM55So5p2l6K6w5b2V5q+P5LiA5YiX55qE6auY5bqmCiAgICAvLwogICAgLy8gICBsZXQgcGFkZGluZ3dpZHRoID0gMC4yOwogICAgLy8KICAgIC8vICAgbGV0IHBhZGRpbmdXaWR0aD0wLjEgKiB0aGlzLiRzdG9yZS5zdGF0ZS5mb250UmF0ZTsKICAgIC8vICAgbGV0IGltZ0NvbnRhaW5lcldpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIC0gcGFkZGluZ3dpZHRoICogdGhpcy4kc3RvcmUuc3RhdGUuZm9udFJhdGU7CiAgICAvLwogICAgLy8gICBpZiAoaW1nQ29udGFpbmVyV2lkdGggPiAyMzgwKSB7CiAgICAvLyAgICAgdGhpcy5saXN0bnVtYmVyID0gMTAKICAgIC8vICAgfSBlbHNlIGlmIChpbWdDb250YWluZXJXaWR0aCA+IDIxNDApIHsKICAgIC8vICAgICB0aGlzLmxpc3RudW1iZXIgPSA5CiAgICAvLyAgIH0gZWxzZSBpZiAoaW1nQ29udGFpbmVyV2lkdGggPiAxOTAwKSB7CiAgICAvLyAgICAgdGhpcy5saXN0bnVtYmVyID0gOAogICAgLy8gICB9IGVsc2UgaWYgKGltZ0NvbnRhaW5lcldpZHRoID4gMTY2MCkgewogICAgLy8gICAgIHRoaXMubGlzdG51bWJlciA9IDcKICAgIC8vICAgfSBlbHNlIGlmIChpbWdDb250YWluZXJXaWR0aCA+IDE0MjApIHsKICAgIC8vICAgICB0aGlzLmxpc3RudW1iZXIgPSA2CiAgICAvLyAgIH0gZWxzZSBpZiAoaW1nQ29udGFpbmVyV2lkdGggPiAxMTgwKSB7CiAgICAvLyAgICAgdGhpcy5saXN0bnVtYmVyID0gNQogICAgLy8gICB9IGVsc2UgaWYgKGltZ0NvbnRhaW5lcldpZHRoID4gOTQwKSB7CiAgICAvLyAgICAgdGhpcy5saXN0bnVtYmVyID0gNAogICAgLy8gICB9IGVsc2UgaWYgKGltZ0NvbnRhaW5lcldpZHRoID4gNzAwKSB7CiAgICAvLyAgICAgdGhpcy5saXN0bnVtYmVyID0gMwogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIHRoaXMubGlzdG51bWJlciA9IDIKICAgIC8vICAgfQogICAgLy8KICAgIC8vICAgbGV0IGltZ1dpZHRoID0gTWF0aC5yb3VuZChpbWdDb250YWluZXJXaWR0aCAvIHRoaXMubGlzdG51bWJlciAqIDEwMCkgLyAxMDA7CiAgICAvLwogICAgLy8gICBsZXQgSGVpZ2h0X2FycmF5ID0gW107CiAgICAvLwogICAgLy8KICAgIC8vICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHgubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAvLyAgICAgLy8g5ou/5Yiw5a695bqmCiAgICAvLyAgICAgeFtpbmRleF0ud2lkdGggPSBpbWdXaWR0aDsKICAgIC8vCiAgICAvLyAgICAgeFtpbmRleF0uaGVpZ2h0ID0gaW1nV2lkdGggKiAoeFtpbmRleF0uaW1nSGVpZ2h0IC8geFtpbmRleF0uaW1nV2VpZ2h0KTsKICAgIC8vICAgICBpZiAoaW5kZXggPCB0aGlzLmxpc3RudW1iZXIpIHsKICAgIC8vICAgICAgIHhbaW5kZXhdLnRvcCA9IDA7CiAgICAvLyAgICAgICB4W2luZGV4XS5sZWZ0ID0gKGluZGV4ICUgKHRoaXMubGlzdG51bWJlciArIDEpKSAqICh4W2luZGV4XS53aWR0aCk7CiAgICAvLyAgICAgICAvLyDmr4/kuIDliJfnmoTpq5jluqbmmK/lvZPliY3lm77niYfnmoTpq5jluqYgICDlm77niYfnmoTpq5jluqbmmK/pq5jlrr3mr5QqMjU2K2JvdHRvbQogICAgLy8KICAgIC8vICAgICAgIEhlaWdodF9hcnJheS5wdXNoKAogICAgLy8gICAgICAgICAgICh4W2luZGV4XS5pbWdIZWlnaHQgLyB4W2luZGV4XS5pbWdXZWlnaHQpICogeFtpbmRleF0ud2lkdGggKyA1NgogICAgLy8gICAgICAgKTsKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgbGV0IG1pbiA9IEhlaWdodF9hcnJheS5taW5pbmRleChIZWlnaHRfYXJyYXkpOyAvL+aLv+WIsOacgOefreWIl+eahOS4i+aghwogICAgLy8KICAgIC8vICAgICAgIC8vIGNvbnNvbGUubG9nKEhlaWdodF9hcnJheSk7CiAgICAvLyAgICAgICAvLyBjb25zb2xlLmxvZyhIZWlnaHRfYXJyYXlbbWluXSk7CiAgICAvLyAgICAgICAvLyDlvZPliY3nmoTlm77niYfnmoR0b3Ag5bCx5piv5pyA5L2O5YiX55qE6auY5bqmCiAgICAvLyAgICAgICB4W2luZGV4XS50b3AgPSBIZWlnaHRfYXJyYXlbbWluXTsKICAgIC8vICAgICAgIC8vIOW9k+WJjeWbvueJh+eahGxlZnQg5piv5pyA5L2O5YiX55qE5LiL5qCHKigyNTYgKyAxNikKICAgIC8vICAgICAgIHhbaW5kZXhdLmxlZnQgPSBtaW4gKiAoeFtpbmRleF0ud2lkdGgpOwogICAgLy8gICAgICAgLy8g54S25ZCO5pyA5L2O5YiX55qE6auY5bqm5q2k5pe25bCx5piv5pyA5L2O5YiX55qE6auY5bqm5Yqg5LiK5b2T5YmN5Zu+54mH55qE6auY5bqmCiAgICAvLyAgICAgICBIZWlnaHRfYXJyYXlbbWluXSA9CiAgICAvLyAgICAgICAgICAgSGVpZ2h0X2FycmF5W21pbl0gKwogICAgLy8gICAgICAgICAgICh4W2luZGV4XS5pbWdIZWlnaHQgLyB4W2luZGV4XS5pbWdXZWlnaHQpICogeFtpbmRleF0ud2lkdGggKwogICAgLy8gICAgICAgICAgIDU2OwogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gICAvLyDov5nph4zojrflj5bliJfnmoTmnIDlpKflgLzlpI3liLbnu5nku5jlhYPntKAKICAgIC8vICAgdGhpcy5jb25zSGVpZ2h0ID0gSGVpZ2h0X2FycmF5Lm1heChIZWlnaHRfYXJyYXkpOwogICAgLy8KICAgIC8vICAgdGhpcy5saW5lbGlzdCA9ICIiOwogICAgLy8KICAgIC8vICAgd2luZG93LmxpbmVsaXN0ID0gdGhpcy5saW5lbGlzdCA9IHg7CiAgICAvLyB9LAogICAgc2VsZWN0QWxpa2VCeUlkKCkgewogICAgICAvLyB0aGlzLmxpbmVsaXN0PW51bGw7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHRoaXMucnEoewogICAgICAgIHVybDogIi9hcGkvcHJvZHVjdC9zZWxlY3RBbGlrZUJ5SWQiLAogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHBhcmFtOiB7CiAgICAgICAgICBwcm9kdWN0SWQ6IHZtLnByb2R1Y3RJZAogICAgICAgIH0sCiAgICAgICAgb25FcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgIH0sCiAgICAgICAgdm0sCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsKICAgICAgICAgIHZtLnAgPSByZXMuZGF0YTsKCiAgICAgICAgICBpZiAodm0ucCA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgdGhpcy5saW5lbGlzdCA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuY29uc0hlaWdodCA9IDA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyAgIOiOt+WPluWuveW6pgogICAgICAgICAgICBzb3J0aW5nX2xpc3Qodm0ucCwgdm0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLwogICAgICAgICAgdGhpcy4kbWVzc2FnZShyZXMuZGVzYyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyAgIExpY2Vuc2UgVHlwZSDljZXpgIkg8J+RiAogICAgY29udGVudF9saXN0X2Jvb2xzKGEpIHsKICAgICAgdGhpcy5saWNlbnNlVHlwZSA9IGE7CiAgICAgIHRoaXMuY2FsY1ByaWNlKCkKICAgICAgLy8gZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuY29udGVudF9saXN0X2JvbGwubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIC8vICAgdGhpcy5jb250ZW50X2xpc3RfYm9sbFtpbmRleF0gPSBmYWxzZTsKICAgICAgLy8gfQogICAgICAvLyB0aGlzLmNvbnRlbnRfbGlzdF9ib2xsW2FdID0gdHJ1ZTsgLy/nlLHkuo7mlbDnu4Tmm7TmlrDmsqHmnInlip7ms5Xop6blj5Fkb23mm7TmlrDvvIzmiYDku6Xnu5nmlbDnu4Tov5vooYzph43mlrDotJ/lgLzlkKcKICAgICAgLy8KICAgICAgLy8gbGV0IHggPSB0aGlzLmNvbnRlbnRfbGlzdF9ib2xsOwogICAgICAvLyB0aGlzLmNvbnRlbnRfbGlzdF9ib2xsID0gW107CiAgICAgIC8vIHRoaXMuY29udGVudF9saXN0X2JvbGwgPSB4OwogICAgfSwKICAgIC8vICAg54K55Ye75aSH6YCJ5Zu+IPCfkYgKICAgIGNhbmRpZGF0ZV9jbGljayhzcmMpIHsKICAgICAgaWYgKHRoaXMuY29udGVlbnRfaW1nMiA9PSAiIikgewogICAgICAgIC8vIOmmluWFiOWwhmNvbnRlbnTlm77niYfnu5kg5peB6L6555qE5bCP5Zu+54mHCiAgICAgICAgdGhpcy5jb250ZWVudF9pbWcyID0gdGhpcy5jb250ZWVudF9pbWc7CiAgICAgIH0KCiAgICAgIC8vIOeEtuWQjuWwhnNyY+e7mWNvbnRlbnQKICAgICAgdGhpcy5jb250ZWVudF9pbWcgPSBzcmM7CiAgICB9LAoKICAgIC8vIOWwj+WbvueJh+WSjOWkp+WbvueJh+eahOWRvOWUpPCfkYgKICAgIGNvbnRlbnRfaW1nMl9jbGljaygpIHsKICAgICAgLy8g5aOw5piO5LiA5Liq5Y+Y6YeP77yM5L2c5Li65Li05pe25pWw5o2u5a2Y5pS+CiAgICAgIGxldCBJbWdNYXhTcmMgPSB0aGlzLmNvbnRlZW50X2ltZzsKICAgICAgdGhpcy5jb250ZWVudF9pbWcgPSB0aGlzLmNvbnRlZW50X2ltZzI7CiAgICAgIHRoaXMuY29udGVlbnRfaW1nMiA9IEltZ01heFNyYzsKICAgIH0sCiAgICBjYWxjUHJpY2UoKSB7CiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsKICAgICAgbGV0IGxpY2Vuc2VUeXBlID0gX3RoaXMubGljZW5zZVR5cGU7CiAgICAgIGxldCBwcmljZSA9IF90aGlzLm9udGVudF9kYXRhcy5wcmljZTsKICAgICAgbGV0IHByaWNlT25jZSA9IF90aGlzLm9udGVudF9kYXRhcy5wcmljZU9uY2U7CgogICAgICBpZiAobGljZW5zZVR5cGUgPT0gMykgewogICAgICAgIF90aGlzLmxpY2Vuc2VQcmljZSA9IHByaWNlT25jZTsKICAgICAgfSBlbHNlIGlmIChsaWNlbnNlVHlwZSA9PSA1KSB7CiAgICAgICAgX3RoaXMubGljZW5zZVByaWNlID0gcHJpY2U7CiAgICAgIH0gZWxzZSBpZiAobGljZW5zZVR5cGUgPT0gNCkgewogICAgICAgIF90aGlzLmxpY2Vuc2VQcmljZSA9IE1hdGgucm91bmQocHJpY2UgKiAwLjggKiAxMDApIC8gMTAwOwogICAgICB9IGVsc2UgaWYgKGxpY2Vuc2VUeXBlID09IDEpIHsKICAgICAgICBfdGhpcy5saWNlbnNlUHJpY2UgPSBNYXRoLnJvdW5kKHByaWNlICogMC41ICogMTAwKSAvIDEwMDsKICAgICAgfQogICAgfSwKICAgIC8vICAg6I635Y+W5aSH6YCJ5Zu+IPCfkYgKICAgIGNhbmRpZGF0ZSgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgdGhpcy5ycSh7CiAgICAgICAgdXJsOiAiL2FwaS9wcm9kdWN0L3NlbGVjdEJ5SWQiLAogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHBhcmFtOiB7CiAgICAgICAgICBwcm9kdWN0SWQ6IHZtLnByb2R1Y3RJZCwKICAgICAgICB9LAogICAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICB9LAogICAgICAgIHZtLAogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICB2bS5yZXBhdEZsYWcgPSAwOwogICAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsKICAgICAgICAgIC8vICAgdm0ucCA9IHJlcy5kYXRhLmFhRGF0YTsKICAgICAgICAgIHZtLm9udGVudF9kYXRhcyA9IHJlcy5kYXRhOwoKICAgICAgICAgIC8vIOmmluWFiOWIpOaWreeUqOaIt+aYr+WQpueZu+mZhgogICAgICAgICAgaWYgKHJlcy51c2VyICYmIHJlcy51c2VyLmlkKSB7CgogICAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICAgIGxldCBtID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3Nob3BwaW5nX2NhcicpKTsKICAgICAgICAgICAgaWYgKG0gJiYgbS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgaWYgKG0uc29tZShpdGVtID0+IGl0ZW0ucHJvZHVjdElkID09IHZtLnByb2R1Y3RJZCkpIHsKICAgICAgICAgICAgICAgIHZtLm9udGVudF9kYXRhcy5pc0J1eSA9IDE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIGxldCBzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc3Nob3BwaW5nX2NhcikKICAgICAgICAgICAgICAvLyBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAvLyAgIGlmIChzW2luZGV4XS5pbWdTbiA9PT0gdm0ub250ZW50X2RhdGFzLmltZ1NuKSB7CiAgICAgICAgICAgICAgLy8gICAgIHZtLkJhZyA9IGZhbHNlCiAgICAgICAgICAgICAgLy8gICB9CiAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAvLyB9CgogICAgICAgICAgICB9CgogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2bS5vbnRlbnRfZGF0YXMuaXNVc2UgPiAwKSB7CiAgICAgICAgICAgIHZtLmxpY2Vuc2VUeXBlID0gNTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZtLmxpY2Vuc2VUeXBlID0gMzsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDlj6/ku6XkubDmlq0KICAgICAgICAgIGlmICh2bS5vbnRlbnRfZGF0YXMuaXNCdXlvdXQgPT0gMSkgewogICAgICAgICAgICB2bS5saWNlbnNlVHlwZSA9IDM7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBpZiAodm0ub250ZW50X2RhdGFzLmhhc0NvbGxlY3Rpb24gPiAwKSB7CiAgICAgICAgICAvLyAgIHRoaXMuQ29sbGVjdCA9IGZhbHNlCiAgICAgICAgICAvLyB9CgogICAgICAgICAgdGhpcy5jYWxjUHJpY2UoKTsKCiAgICAgICAgICB2bS50eXBlcyA9IFtdOwogICAgICAgICAgdm0ub250ZW50X2RhdGFzLmlzUmVwZWF0PTA7CiAgICAgICAgICB2bS5vbnRlbnRfZGF0YXMuaXNMYXllcj0wOwoKICAgICAgICAgIHJlcy5kYXRhLnN0eWxlU3RyLnNwbGl0KCcsJykuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgaWYgKGl0ZW0gIT0gJycpIHsKICAgICAgICAgICAgICB2bS50eXBlcy5wdXNoKGl0ZW0pCgogICAgICAgICAgICAgIGlmKGl0ZW09PSdJbiBSZXBlYXQnIHx8IGl0ZW09PSdDeWNsaWMgZ3JhcGgnKXsKICAgICAgICAgICAgICAgIHZtLm9udGVudF9kYXRhcy5pc1JlcGVhdD0xOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZihpdGVtLmluZGV4T2YoJ1NpbXBsZSBsYXllcmVkJyk+PTAgfHwgaXRlbT09J0xheWVyZWQgZmlsZScgfHwgaXRlbT09J0NvbG9yIHNlcGFyYXRpb24nKXsKICAgICAgICAgICAgICAgIHZtLm9udGVudF9kYXRhcy5pc0xheWVyPTE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZihyZXMuZGF0YS5pbWdTaXplKXsKCiAgICAgICAgICAgIGlmKHJlcy5kYXRhLmltZ1NpemU9PSfnn6Lph4/lm74nKXsKICAgICAgICAgICAgICB2bS5pbWdTaXplPSdWZWN0b3IgaW1hZ2UnOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICBsZXQgd3A9MzAwLGhwPTMwMDsKICAgICAgICAgICAgICBsZXQgdz0nJyxoPScnLGltZ1NpemUsd2g7CgogICAgICAgICAgICAgIGlmKHJlcy5kYXRhLmltZ1NpemUuaW5kZXhPZignY20nKT49MCl7CiAgICAgICAgICAgICAgICBpbWdTaXplPXJlcy5kYXRhLmltZ1NpemUucmVwbGFjZSgnY20nLCcnKTsKICAgICAgICAgICAgICAgIGltZ1NpemU9aW1nU2l6ZS5yZXBsYWNlKCdjbScsJycpOwogICAgICAgICAgICAgICAgd2g9aW1nU2l6ZS5zcGxpdCgiKiIpOwogICAgICAgICAgICAgICAgaWYod2hbMF0pewogICAgICAgICAgICAgICAgICB3PU1hdGgucm91bmQod2hbMF0vMjU0KjEwMCp3cCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZih3aFsxXSl7CiAgICAgICAgICAgICAgICAgIGg9TWF0aC5yb3VuZCh3aFsxXS8yNTQqMTAwKndwKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBpbWdTaXplPXJlcy5kYXRhLmltZ1NpemUucmVwbGFjZSgn5YOP57SgJywnJyk7CiAgICAgICAgICAgICAgICBpbWdTaXplPWltZ1NpemUucmVwbGFjZSgn5YOP57SgJywnJyk7CiAgICAgICAgICAgICAgICB3aD1pbWdTaXplLnNwbGl0KCIqIik7CiAgICAgICAgICAgICAgICB3PXdoWzBdOwogICAgICAgICAgICAgICAgaD13aFsxXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYodyAmJiBoKSB7CiAgICAgICAgICAgICAgICB2bS5pbWdTaXplPXcgKyAnKicgKyBoIDsKCiAgICAgICAgICAgICAgICBsZXQgdzM9JycsdzY9JycsaDM9JycsaDY9Jyc7CiAgICAgICAgICAgICAgICBpZih3KXsKICAgICAgICAgICAgICAgICAgdzM9TWF0aC5yb3VuZCh3KjI1NC8zMDApLzEwMDsKICAgICAgICAgICAgICAgICAgdzY9TWF0aC5yb3VuZCh3KjI1NC82MDApLzEwMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGgpewogICAgICAgICAgICAgICAgICBoMz1NYXRoLnJvdW5kKGgqMjU0LzMwMCkvMTAwOwogICAgICAgICAgICAgICAgICBoNj1NYXRoLnJvdW5kKGgqMjU0LzYwMCkvMTAwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZtLnByaW50U2l6ZTE9dzMrJyonK2gzKydjbSgzMDBkcGkpJzsKICAgICAgICAgICAgICAgIHZtLnByaW50U2l6ZTI9dzYrJyonK2g2KydjbSg2MDBkcGkpJzsKICAgICAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgICAgICB2bS5pbWdTaXplPXJlcy5kYXRhLmltZ1NpemU7CiAgICAgICAgICAgICAgICB2bS5wcmludFNpemUxPScnOwogICAgICAgICAgICAgICAgdm0ucHJpbnRTaXplMj0nJzsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CgogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHZtLmltZ1NpemU9Jyc7CiAgICAgICAgICAgIHZtLnByaW50U2l6ZTE9Jyc7CiAgICAgICAgICAgIHZtLnByaW50U2l6ZTI9Jyc7CiAgICAgICAgICB9CgoKICAgICAgICAgIHZtLmNhdGVnb3JpZXMgPSBbXTsKICAgICAgICAgIHJlcy5kYXRhLnByb2R1Y3RGaWNhdGlvblN0ci5zcGxpdCgnLCcpLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIGlmIChpdGVtICE9ICcnKQogICAgICAgICAgICAgIHZtLmNhdGVnb3JpZXMucHVzaChpdGVtKQogICAgICAgICAgfSk7CgogICAgICAgICAgdm0udGFncyA9IFtdOwogICAgICAgICAgcmVzLmRhdGEubGFiZWwuc3BsaXQoJywnKS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpZiAoaXRlbSAhPSAnJykKICAgICAgICAgICAgICB2bS50YWdzLnB1c2goaXRlbSkKICAgICAgICAgIH0pOwogICAgICAgICAgcmVzLmRhdGEuZW50aXR5U3RyLnNwbGl0KCcsJykuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgaWYgKGl0ZW0gIT0gJycpCiAgICAgICAgICAgICAgdm0udGFncy5wdXNoKGl0ZW0pCiAgICAgICAgICB9KTsKICAgICAgICAgIHJlcy5kYXRhLnNjZW5lU3RyLnNwbGl0KCcsJykuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgaWYgKGl0ZW0gIT0gJycpCiAgICAgICAgICAgICAgdm0udGFncy5wdXNoKGl0ZW0pCiAgICAgICAgICB9KTsKICAgICAgICAgIHJlcy5kYXRhLnNlYXNvblN0ci5zcGxpdCgnLCcpLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIGlmIChpdGVtICE9ICcnKQogICAgICAgICAgICAgIHZtLnRhZ3MucHVzaChpdGVtKQogICAgICAgICAgfSk7CiAgICAgICAgICByZXMuZGF0YS5mYXNoaW9uU3RyLnNwbGl0KCcsJykuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgaWYgKGl0ZW0gIT0gJycpCiAgICAgICAgICAgICAgdm0udGFncy5wdXNoKGl0ZW0pCiAgICAgICAgICB9KTsKCgogICAgICAgICAgLy8gY29uc29sZS5sb2coInJlcy5kYXRhLmlzUmVwZWF0IiwgcmVzLmRhdGEuaXNSZXBlYXQpOwogICAgICAgICAgdm0uaXNSZXBlYXQgPSByZXMuZGF0YS5pc1JlcGVhdDsKICAgICAgICAgIC8vIHZtLmNvbnRlZW50X2ltZyA9IHZtLiRpbWdTZXJ2ZXIgKyByZXMuZGF0YS5jb3ZlcjsKICAgICAgICAgIHZtLmNvbnRlZW50X2ltZyA9IHZtLiRpbWdTZXJ2ZXIgKyByZXMuZGF0YS5jb3ZlcjsKCiAgICAgICAgICAvLyB2bS5pbWcgPSB2bS5jb250ZWVudF9pbWc7CiAgICAgICAgICB2bS5sb2FkSW1nKHZtLmNvbnRlZW50X2ltZyk7CiAgICAgICAgICB2bS5uYW1lTGlzdFswXS5pbWcgPSB2bS5jb250ZWVudF9pbWc7CiAgICAgICAgICB2bS5uYW1lTGlzdFswXS5iaWdwc2QuaW1nID0gdm0uY29udGVlbnRfaW1nOwoKICAgICAgICAgIC8vIGxldCBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgIC8vIGltZy5zZXRBdHRyaWJ1dGUoImNyb3NzT3JpZ2luIiwgImFub255bW91cyIpOwogICAgICAgICAgLy8gLy8gaW1nLnNldEF0dHJpYnV0ZSgiY3Jvc3NPcmlnaW4iLCAidXNlLWNyZWRlbnRpYWxzIik7CiAgICAgICAgICAvLyBpbWcuc3JjID0gdm0uY29udGVlbnRfaW1nOwogICAgICAgICAgLy8gaW1nLm9ubG9hZCA9ICgpID0+IHsKICAgICAgICAgIC8vICAgLy8gY29uc29sZS5sb2coaW1nKTsKICAgICAgICAgIC8vICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogICAgICAgICAgLy8gICBsZXQgY3R4MyA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgICAgICAgLy8gICBsZXQgY2FudmFzY2xpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogICAgICAgICAgLy8gICBsZXQgY3R4NCA9IGNhbnZhc2NsaXAuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgICAgIC8vICAgY2FudmFzY2xpcC53aWR0aCA9IDEyMDA7CiAgICAgICAgICAvLyAgIGNhbnZhc2NsaXAuaGVpZ2h0ID0gMTIwMDsKICAgICAgICAgIC8vICAgbGV0IFdpZHRoID0gaW1nLndpZHRoIC8gMzsKICAgICAgICAgIC8vICAgbGV0IEhlaWdodCA9IChpbWcuaGVpZ2h0ICogV2lkdGgpIC8gaW1nLndpZHRoOwogICAgICAgICAgLy8gICBjYW52YXMud2lkdGggPSBXaWR0aCAqIDM7CiAgICAgICAgICAvLyAgIGNhbnZhcy5oZWlnaHQgPSBIZWlnaHQgKiAzOwogICAgICAgICAgLy8gICBjdHgzLmRyYXdJbWFnZShpbWcsIDAsIDAsIFdpZHRoLCBIZWlnaHQpOwogICAgICAgICAgLy8gICBjdHgzLmRyYXdJbWFnZShpbWcsIFdpZHRoLCAwLCBXaWR0aCwgSGVpZ2h0KTsKICAgICAgICAgIC8vICAgY3R4My5kcmF3SW1hZ2UoaW1nLCAyICogV2lkdGgsIDAsIFdpZHRoLCBIZWlnaHQpOwogICAgICAgICAgLy8gICBjdHgzLmRyYXdJbWFnZShpbWcsIDAsIEhlaWdodCwgV2lkdGgsIEhlaWdodCk7CiAgICAgICAgICAvLyAgIGN0eDMuZHJhd0ltYWdlKGltZywgV2lkdGgsIEhlaWdodCwgV2lkdGgsIEhlaWdodCk7CiAgICAgICAgICAvLyAgIGN0eDMuZHJhd0ltYWdlKGltZywgMiAqIFdpZHRoLCBIZWlnaHQsIFdpZHRoLCBIZWlnaHQpOwogICAgICAgICAgLy8gICBjdHgzLmRyYXdJbWFnZShpbWcsIDAsIDIgKiBIZWlnaHQsIFdpZHRoLCBIZWlnaHQpOwogICAgICAgICAgLy8gICBjdHgzLmRyYXdJbWFnZShpbWcsIFdpZHRoLCAyICogSGVpZ2h0LCBXaWR0aCwgSGVpZ2h0KTsKICAgICAgICAgIC8vICAgY3R4My5kcmF3SW1hZ2UoaW1nLCAyICogV2lkdGgsIDIgKiBIZWlnaHQsIFdpZHRoLCBIZWlnaHQpOwogICAgICAgICAgLy8gICBsZXQgc3RhcnRYID0gKGNhbnZhcy53aWR0aCAtIGNhbnZhc2NsaXAud2lkdGgpIC8gMjsKICAgICAgICAgIC8vICAgbGV0IHN0YXJ0WSA9IChjYW52YXMuaGVpZ2h0IC0gY2FudmFzY2xpcC53aWR0aCkgLyAyOwogICAgICAgICAgLy8gICBjdHg0LmRyYXdJbWFnZSgKICAgICAgICAgIC8vICAgICBjYW52YXMsCiAgICAgICAgICAvLyAgICAgc3RhcnRYLAogICAgICAgICAgLy8gICAgIHN0YXJ0WSwKICAgICAgICAgIC8vICAgICBjYW52YXNjbGlwLndpZHRoLAogICAgICAgICAgLy8gICAgIGNhbnZhc2NsaXAud2lkdGgsCiAgICAgICAgICAvLyAgICAgMCwKICAgICAgICAgIC8vICAgICAwLAogICAgICAgICAgLy8gICAgIGNhbnZhc2NsaXAud2lkdGgsCiAgICAgICAgICAvLyAgICAgY2FudmFzY2xpcC53aWR0aAogICAgICAgICAgLy8gICApOwogICAgICAgICAgLy8gICBsZXQgaW1ncyA9IGNhbnZhc2NsaXAudG9EYXRhVVJMKCJpbWFnZS9wbmciKTsKICAgICAgICAgIC8vICAgdm0ubmFtZUxpc3RbMV0uaW1nID0gaW1nczsKICAgICAgICAgIC8vICAgdm0ubmFtZUxpc3RbMV0uYmlncHNkLmltZyA9IGltZ3M7CiAgICAgICAgICAvLyAgIC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kKGNhbnZhcykKICAgICAgICAgIC8vICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmQoY2FudmFzY2xpcCk7CiAgICAgICAgICAvLyB9OwoKCiAgICAgICAgICBpZiAocmVzLmRhdGEuYXR0YWNoTGlzdC5sZW5ndGggIT0gMCkgewogICAgICAgICAgICB2bS5jYW5kaWRhdGVfaW1nbGlzdCA9IHJlcy5kYXRhLmF0dGFjaExpc3Q7CgogICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdm0uY2FuZGlkYXRlX2ltZ2xpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgdm0uY2FuZGlkYXRlX2ltZ2xpc3RbaW5kZXhdLnNyYyA9CiAgICAgICAgICAgICAgICB2bS4kaW1nU2VydmVyICsgdm0uY2FuZGlkYXRlX2ltZ2xpc3RbaW5kZXhdLnNyYzsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgMjA7IGluZGV4KyspIHsKICAgICAgICAgICAgICB2bS5jYW5kaWRhdGVfaW1nbGlzdC5wdXNoKHZtLmNhbmRpZGF0ZV9pbWdsaXN0WzBdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5zdSA9IHRydWUKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UocmVzLmRlc2MpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOaViOaenOWbvuaWsOWinueahG1ldGhvZHPlh73mlbAKICAgIC8vIOiOt+WPluaooeWei+eahOWHveaVsAogICAgYXN5bmMgZ2V0UFNEKCkgewogICAgICAvLyBjb25zb2xlLmxvZygnb2JqZWN0Jyk7CiAgICAgIGF3YWl0IHRoaXMuZ2V0TmFtZSgpOwogICAgICB0aGlzLmdldGxpc3QoKTsKICAgIH0sCiAgICBnZXROYW1lKCkgewogICAgICAvLyBjb25zb2xlLmxvZygxMTEpOwogICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICAvLyBheGlvcyDln7rmnKzkvb/nlKgKICAgICAgYXhpb3MoewogICAgICAgIHVybDogIi9uYW1lLmpzIiwgLy8g6K+35rGC55qE6ZO+5o6lCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIF90aGlzLm5hbWVMaXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pOwoKICAgICAgLy8gYXhpb3MoewogICAgICAvLyAgIHVybDogIi8vMTE2LjYyLjU5Ljg2OjEwODExL25hbWUuanMiLCAvLyDor7fmsYLnmoTpk77mjqUKICAgICAgLy8gfSkKICAgICAgLy8gICAudGhlbigocmVzKSA9PiB7CiAgICAgIC8vCiAgICAgIC8vICAgICAvLyDmjqXlj5for7fmsYLmiJDlip/ov5Tlm57nmoTmlbDmja4KICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIC8vICAgICBfdGhpcy5uYW1lTGlzdCA9IHJlcy5kYXRhOwogICAgICAvLyAgIH0pCiAgICAgIC8vIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgIC8vICAgLy8g5o6l5Y+X6K+35rGC5aSx6LSl6L+U5Zue55qE5pWw5o2uCiAgICAgIC8vICAgLy8gY29uc29sZS5sb2coZXJyKTsKICAgICAgLy8gICBjb25zb2xlLmxvZygxKTsKICAgICAgLy8gfSk7CiAgICB9LAogICAgLy8g56ys5LiA5qyh5aSE55CG5pWw5o2uLOS4uuS6huiuqeWkp+eahHBzZOS4juWQjuWPsOaOpeWPo+i/lOWbnueahOWQiOW5tgogICAgZ2V0TGlzdDEoKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnBzZExpc3QpIHsKICAgICAgICAvLyBsZXQgbWFwID0ge307CiAgICAgICAgdGhpcy5uYW1lTGlzdC5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgIGxldCBiaWdwc2Q7CiAgICAgICAgICBpZiAoaXRlbS5iaWdwc2QpIHsKICAgICAgICAgICAgYmlncHNkID0gaXRlbS5iaWdwc2QudGl0bGU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoYmlncHNkID09PSB0aGlzLnBzZExpc3Rba2V5XS50aXRsZSkgewogICAgICAgICAgICBsZXQgY29weSA9IE9iamVjdC5hc3NpZ24odGhpcy5wc2RMaXN0W2tleV0sIGl0ZW0uYmlncHNkKTsKICAgICAgICAgICAgaXRlbS5iaWdwc2QgPSBjb3B5OwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpdGVtKTsKICAgICAgICAgICAgdGhpcy5uZXdNb2RlbHNMaXN0LnB1c2goaXRlbSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnrKzkuozmrKHlpITnkIbmlbDmja4s5Li65LqG6K6p56ys5LiA5qyh5b6X5Yiw55qE5aSn55qEcHNk5pWw5o2u5LiO5Y6f5pys5pys5Zyw5pWw5o2u5ZCI5bm2CiAgICBnZXRsaXN0MigpIHsKICAgICAgdGhpcy5nZXRMaXN0MSgpOwogICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5uYW1lTGlzdCkgewogICAgICAgIC8vIGxldCBtYXAgPSB7fTsKICAgICAgICB0aGlzLm5ld01vZGVsc0xpc3QubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICBpZiAodGhpcy5uYW1lTGlzdFtrZXldLnRpdGxlID09IGl0ZW0udGl0bGUpIHsKICAgICAgICAgICAgdGhpcy5uYW1lTGlzdFtrZXldID0gaXRlbTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOesrOS4ieasoeWkhOeQhuaVsOaNrizkuLrkuoblvpfliLDmnIDnu4jlpKfnmoRwc2Qg5ZKM5bCP55qEcHNkICDku6XlkI7lkI7lj7DkvKDlm57mnaXnmoTmlbDmja4g6YO95ZCI5bm2CiAgICBnZXRsaXN0KCkgewogICAgICB0aGlzLmdldGxpc3QyKCk7CiAgICB9LAogICAgLy8g5pWI5p6c5Zu+5paw5aKe5Ye95pWwCiAgICAvL+WkhOeQhuaooeWei+eahOWHveaVsAogICAgem9vbUluKGlTY2FsZSkgewogICAgICBsZXQgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMucmVwYXRGbGFnID0gMzsKICAgICAgY29uc29sZS5sb2coaVNjYWxlKTsKCiAgICAgIC8vIGNvbnNvbGUubG9nKCLmiafooYzkuobmlL7lpKfnvKnlsI8iKTsKICAgICAgX3RoaXMuem9vbVBvaW50ID0gbmV3IGZhYnJpYy5Qb2ludCgKICAgICAgICBfdGhpcy5jbGlwV2lkdGggLyAyLAogICAgICAgIF90aGlzLmNsaXBIZWlnaHQgLyAyCiAgICAgICk7IC8vIOS4reW/g+eCuQogICAgICBfdGhpcy52YWx1ZSA9IHBhcnNlSW50KF90aGlzLmltZ1NjYWxlICogMTAwKTsKICAgICAgX3RoaXMubXlDYW52YXMuem9vbVRvUG9pbnQoX3RoaXMuem9vbVBvaW50LCBfdGhpcy5pbWdTY2FsZSk7CiAgICAgIGxldCBvYmogPSBfdGhpcy5teUNhbnZhcy5nZXRPYmplY3RzKCk7CiAgICAgIC8vIGlmIChfdGhpcy5yZXBhdEZsYWcpIHsKICAgICAgaWYgKF90aGlzLnJlcGF0RmxhZyA9PSAxKSB7CiAgICAgICAgb2JqLmZvckVhY2goKHJlcykgPT4gewogICAgICAgICAgaWYgKAogICAgICAgICAgICByZXMubGVmdCA+PSAoX3RoaXMuY2xpcFdpZHRoIC0gcmVzLndpZHRoICogcmVzLnNjYWxlWCkgLyAyICYmCiAgICAgICAgICAgIHJlcy5sZWZ0IDwgKF90aGlzLmNsaXBXaWR0aCArIHJlcy53aWR0aCAqIHJlcy5zY2FsZVgpIC8gMgogICAgICAgICAgKSB7CiAgICAgICAgICAgIF90aGlzLmZhYk9iaiA9IHJlczsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMikgewogICAgICAgIG9iai5mb3JFYWNoKChyZXMpID0+IHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgcmVzLnRvcCA+PSAoX3RoaXMuY2xpcEhlaWdodCAtIHJlcy5oZWlnaHQgKiByZXMuc2NhbGVZKSAvIDIgJiYKICAgICAgICAgICAgcmVzLnRvcCA8IChfdGhpcy5jbGlwSGVpZ2h0ICsgcmVzLmhlaWdodCAqIHJlcy5zY2FsZVkpIC8gMgogICAgICAgICAgKSB7CiAgICAgICAgICAgIF90aGlzLmZhYk9iaiA9IHJlczsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMCkgewogICAgICAgIF90aGlzLmZhYk9iaiA9IG9ialswXTsKICAgICAgfSBlbHNlIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMykgewogICAgICAgIG9iai5zb21lKChyZXMpID0+IHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgcmVzLmxlZnQgPj0gKF90aGlzLmNsaXBXaWR0aCAtIHJlcy53aWR0aCAqIHJlcy5zY2FsZVgpIC8gMiAmJgogICAgICAgICAgICByZXMubGVmdCA8IChfdGhpcy5jbGlwV2lkdGggKyByZXMud2lkdGggKiByZXMuc2NhbGVYKSAvIDIgJiYKICAgICAgICAgICAgcmVzLnRvcCA+PSAoX3RoaXMuY2xpcEhlaWdodCAtIHJlcy5oZWlnaHQgKiByZXMuc2NhbGVZKSAvIDIgJiYKICAgICAgICAgICAgcmVzLnRvcCA8IChfdGhpcy5jbGlwSGVpZ2h0ICsgcmVzLmhlaWdodCAqIHJlcy5zY2FsZVkpIC8gMgogICAgICAgICAgKSB7CiAgICAgICAgICAgIF90aGlzLmZhYk9iaiA9IHJlczsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgb2JqLmZvckVhY2goKHJlcykgPT4gewogICAgICAgIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMiB8fCBfdGhpcy5yZXBhdEZsYWcgPT0gMCkgewogICAgICAgICAgcmVzLmxlZnQgPQogICAgICAgICAgICAocmVzLmxlZnQgLSBfdGhpcy5jbGlwV2lkdGggLyAyKSAvIGlTY2FsZSArIF90aGlzLmNsaXBXaWR0aCAvIDI7CiAgICAgICAgfQogICAgICAgIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMSB8fCBfdGhpcy5yZXBhdEZsYWcgPT0gMCkgewogICAgICAgICAgcmVzLnRvcCA9CiAgICAgICAgICAgIChyZXMudG9wIC0gX3RoaXMuY2xpcFdpZHRoIC8gMikgLyBpU2NhbGUgKyBfdGhpcy5jbGlwV2lkdGggLyAyOwogICAgICAgIH0KICAgICAgICBfdGhpcy5teUNhbnZhcy5yZW1vdmUocmVzKTsKICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQocmVzKTsKICAgICAgfSk7CiAgICAgIC8vIOW3puWPs+WBj+enu+i+ueeVjAogICAgICBpZiAoX3RoaXMucmVwYXRGbGFnID09IDIgfHwgX3RoaXMucmVwYXRGbGFnID09IDApIHsKICAgICAgICBpZiAoCiAgICAgICAgICBfdGhpcy5mYWJPYmoubGVmdCA8CiAgICAgICAgICBfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuY2xpcFdpZHRoIC8gMiAvIF90aGlzLmltZ1NjYWxlCiAgICAgICAgKSB7CiAgICAgICAgICBfdGhpcy5mYWJPYmoubGVmdCA9CiAgICAgICAgICAgIF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5jbGlwV2lkdGggLyAyIC8gX3RoaXMuaW1nU2NhbGU7CiAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0ID4KICAgICAgICAgIF90aGlzLmNsaXBXaWR0aCAvIDIgKyBfdGhpcy5jbGlwV2lkdGggLyAyIC8gX3RoaXMuaW1nU2NhbGUKICAgICAgICApIHsKICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0ID0KICAgICAgICAgICAgX3RoaXMuY2xpcFdpZHRoIC8gMiArIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgLy8g5LiK5LiL5YGP56e76L6555WMCiAgICAgIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMSB8fCBfdGhpcy5yZXBhdEZsYWcgPT0gMCkgewogICAgICAgIGlmICgKICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgPAogICAgICAgICAgX3RoaXMuY2xpcFdpZHRoIC8gMiAtIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZQogICAgICAgICkgewogICAgICAgICAgX3RoaXMuZmFiT2JqLnRvcCA9CiAgICAgICAgICAgIF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5jbGlwV2lkdGggLyAyIC8gX3RoaXMuaW1nU2NhbGU7CiAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgPgogICAgICAgICAgX3RoaXMuY2xpcFdpZHRoIC8gMiArIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZQogICAgICAgICkgewogICAgICAgICAgX3RoaXMuZmFiT2JqLnRvcCA9CiAgICAgICAgICAgIF90aGlzLmNsaXBXaWR0aCAvIDIgKyBfdGhpcy5jbGlwV2lkdGggLyAyIC8gX3RoaXMuaW1nU2NhbGU7CiAgICAgICAgfQogICAgICB9CiAgICAgIF90aGlzLm15Q2FudmFzLnJlbW92ZShfdGhpcy5mYWJPYmopOwogICAgICBfdGhpcy5teUNhbnZhcy5hZGQoX3RoaXMuZmFiT2JqKTsKICAgICAgbGV0IGxlZnROdW0gPSAwLAogICAgICAgIHJpZ2h0TnVtID0gMCwKICAgICAgICB0b3BOdW0gPSAwLAogICAgICAgIGJvdHRvbXROdW0gPSAwOwogICAgICBfdGhpcy5yZXBhdEdyb3VwLmZvckVhY2goKHJlcykgPT4gewogICAgICAgIGlmIChyZXMubGVmdCA8IF90aGlzLmZhYk9iai5sZWZ0ICYmIHJlcy50b3AgPT0gX3RoaXMuZmFiT2JqLnRvcCkgewogICAgICAgICAgbGVmdE51bSsrOwogICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICByZXMubGVmdCA+IF90aGlzLmZhYk9iai5sZWZ0ICYmCiAgICAgICAgICByZXMudG9wID09IF90aGlzLmZhYk9iai50b3AKICAgICAgICApIHsKICAgICAgICAgIHJpZ2h0TnVtKys7CiAgICAgICAgfQogICAgICAgIGlmIChyZXMudG9wIDwgX3RoaXMuZmFiT2JqLnRvcCAmJiByZXMubGVmdCA9PSBfdGhpcy5mYWJPYmoubGVmdCkgewogICAgICAgICAgdG9wTnVtKys7CiAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgIHJlcy50b3AgPiBfdGhpcy5mYWJPYmoudG9wICYmCiAgICAgICAgICByZXMubGVmdCA9PSBfdGhpcy5mYWJPYmoubGVmdAogICAgICAgICkgewogICAgICAgICAgYm90dG9tdE51bSsrOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIF90aGlzLmxlZnROdW0gPSBNYXRoLm1heChfdGhpcy5sZWZ0TnVtLCBsZWZ0TnVtKTsKICAgICAgX3RoaXMucmlnaHROdW0gPSBNYXRoLm1heChfdGhpcy5yaWdodE51bSwgcmlnaHROdW0pOwogICAgICBfdGhpcy50b3BOdW0gPSBNYXRoLm1heChfdGhpcy50b3BOdW0sIHRvcE51bSk7CiAgICAgIF90aGlzLmJvdHRvbXROdW0gPSBNYXRoLm1heChfdGhpcy5ib3R0b210TnVtLCBib3R0b210TnVtKTsKICAgICAgLy8g6L6557yp5pS+6L6555S75Zu+CiAgICAgIGNvbnN0IGltZ0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgIGltZ0VsLmNyb3NzT3JpZ2luID0gIkFub255bW91cyI7CiAgICAgIGltZ0VsLnNyYyA9IF90aGlzLmltZy5zcmM7CiAgICAgIC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kKGltZ0VsKQoKICAgICAgbGV0IHdpZHRoTnVtTGVmdCA9IE1hdGguY2VpbCgKICAgICAgICAoKF90aGlzLmZhYk9iai5sZWZ0IC0gX3RoaXMuY2xpcFdpZHRoIC8gMikgKiBfdGhpcy5pbWdTY2FsZSArCiAgICAgICAgICBfdGhpcy5jbGlwV2lkdGggLyAyIC0KICAgICAgICAgIChfdGhpcy5mYWJPYmoud2lkdGggKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpIC8gMikgLwogICAgICAgICAgKF90aGlzLmZhYk9iai53aWR0aCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkKICAgICAgKTsKICAgICAgbGV0IHdpZHRoTnVtUmlnaHQgPSBNYXRoLmNlaWwoCiAgICAgICAgKChfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuZmFiT2JqLmxlZnQpICogX3RoaXMuaW1nU2NhbGUgKwogICAgICAgICAgX3RoaXMuY2xpcFdpZHRoIC8gMiAtCiAgICAgICAgICAoX3RoaXMuZmFiT2JqLndpZHRoICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlKSAvIDIpIC8KICAgICAgICAgIChfdGhpcy5mYWJPYmoud2lkdGggKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpCiAgICAgICk7CiAgICAgIGxldCBoZWlnaHROdW1Ub3AgPSBNYXRoLmNlaWwoCiAgICAgICAgKChfdGhpcy5mYWJPYmoudG9wIC0gX3RoaXMuY2xpcFdpZHRoIC8gMikgKiBfdGhpcy5pbWdTY2FsZSArCiAgICAgICAgICBfdGhpcy5jbGlwV2lkdGggLyAyIC0KICAgICAgICAgIChfdGhpcy5mYWJPYmouaGVpZ2h0ICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlKSAvIDIpIC8KICAgICAgICAgIChfdGhpcy5mYWJPYmouaGVpZ2h0ICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlKQogICAgICApOwogICAgICBsZXQgaGVpZ2h0TnVtQm90dG9tID0gTWF0aC5jZWlsKAogICAgICAgICgoX3RoaXMuY2xpcFdpZHRoIC8gMiAtIF90aGlzLmZhYk9iai50b3ApICogX3RoaXMuaW1nU2NhbGUgKwogICAgICAgICAgX3RoaXMuY2xpcFdpZHRoIC8gMiAtCiAgICAgICAgICAoX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkgLyAyKSAvCiAgICAgICAgICAoX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkKICAgICAgKTsKICAgICAgLy8gY29uc29sZS5sb2coX3RoaXMucmVwYXRGbGFnKTsKICAgICAgaWYgKF90aGlzLnJlcGF0RmxhZyA9PSAxKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coIuaJp+ihjOS6hjEiKTsKICAgICAgICBpZiAod2lkdGhOdW1MZWZ0ID4gX3RoaXMubGVmdE51bSkgewogICAgICAgICAgbGV0IHQgPSBfdGhpcy5sZWZ0TnVtICsgMTsKICAgICAgICAgIF90aGlzLmxlZnROdW0gPSB3aWR0aE51bUxlZnQ7CiAgICAgICAgICBmb3IgKGxldCBsbiA9IHQ7IGxuIDw9IHdpZHRoTnVtTGVmdDsgbG4rKykgewogICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0KICAgICAgICAgICAgICBfdGhpcy5mYWJPYmoubGVmdCAtIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBsbjsKICAgICAgICAgICAgX3RoaXMubW92ZXMudG9wID0gX3RoaXMuZmFiT2JqLnRvcDsKICAgICAgICAgICAgbGV0IGltZ3MgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgdG9wOiBfdGhpcy5tb3Zlcy50b3AsCiAgICAgICAgICAgICAgbGVmdDogX3RoaXMubW92ZXMubGVmdCwKICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChpbWdzKTsKICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKGltZ3MpOwogICAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAod2lkdGhOdW1SaWdodCA+IF90aGlzLnJpZ2h0TnVtKSB7CiAgICAgICAgICBsZXQgdDEgPSBfdGhpcy5yaWdodE51bSArIDE7CiAgICAgICAgICBfdGhpcy5yaWdodE51bSA9IHdpZHRoTnVtUmlnaHQ7CiAgICAgICAgICBmb3IgKGxldCBsbiA9IHQxOyBsbiA8PSB3aWR0aE51bVJpZ2h0OyBsbisrKSB7CiAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPQogICAgICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0ICsgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai53aWR0aCAqIGxuOwogICAgICAgICAgICBfdGhpcy5tb3Zlcy50b3AgPSBfdGhpcy5mYWJPYmoudG9wOwogICAgICAgICAgICBsZXQgaW1ncyA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgc2NhbGVYOiBfdGhpcy5mYWJPYmouc2NhbGVYLAogICAgICAgICAgICAgIHNjYWxlWTogX3RoaXMuZmFiT2JqLnNjYWxlWSwKICAgICAgICAgICAgICB0b3A6IF90aGlzLm1vdmVzLnRvcCwKICAgICAgICAgICAgICBsZWZ0OiBfdGhpcy5tb3Zlcy5sZWZ0LAogICAgICAgICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKGltZ3MpOwogICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goaW1ncyk7CiAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKF90aGlzLnJlcGF0RmxhZyA9PSAyKSB7CiAgICAgICAgaWYgKGhlaWdodE51bVRvcCA+IF90aGlzLnRvcE51bSkgewogICAgICAgICAgbGV0IHQgPSBfdGhpcy50b3BOdW0gKyAxOwogICAgICAgICAgX3RoaXMudG9wTnVtID0gaGVpZ2h0TnVtVG9wOwogICAgICAgICAgLy8gY29uc29sZS5sb2coIuS4iiIsIF90aGlzLnRvcE51bSk7CiAgICAgICAgICBmb3IgKGxldCBsbiA9IHQ7IGxuIDw9IGhlaWdodE51bVRvcDsgbG4rKykgewogICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0gX3RoaXMuZmFiT2JqLmxlZnQ7CiAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9CiAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnRvcCAtIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmouaGVpZ2h0ICogbG47CiAgICAgICAgICAgIGxldCBpbWdzID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoaW1ncyk7CiAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChpbWdzKTsKICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGhlaWdodE51bUJvdHRvbSA+IF90aGlzLmJvdHRvbXROdW0pIHsKICAgICAgICAgIGxldCB0MSA9IF90aGlzLmJvdHRvbXROdW0gKyAxOwogICAgICAgICAgX3RoaXMuYm90dG9tdE51bSA9IGhlaWdodE51bUJvdHRvbTsKICAgICAgICAgIGZvciAobGV0IGxuID0gdDE7IGxuIDw9IGhlaWdodE51bUJvdHRvbTsgbG4rKykgewogICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0gX3RoaXMuZmFiT2JqLmxlZnQ7CiAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9CiAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnRvcCArIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmouaGVpZ2h0ICogbG47CiAgICAgICAgICAgIGxldCBpbWdzID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoaW1ncyk7CiAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChpbWdzKTsKICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoX3RoaXMucmVwYXRGbGFnID09IDMpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygi5omn6KGM5LqGMyIpOwogICAgICAgIGlmICh3aWR0aE51bUxlZnQgPiBfdGhpcy5sZWZ0TnVtKSB7CiAgICAgICAgICBsZXQgdCA9IF90aGlzLmxlZnROdW0gKyAxOwogICAgICAgICAgX3RoaXMubGVmdE51bSA9IHdpZHRoTnVtTGVmdDsKICAgICAgICAgIGZvciAobGV0IGxuID0gdDsgbG4gPD0gd2lkdGhOdW1MZWZ0OyBsbisrKSB7CiAgICAgICAgICAgIGZvciAobGV0IGxuMSA9IF90aGlzLmJvdHRvbXROdW0gKiAtMTsgbG4xIDw9IF90aGlzLnRvcE51bTsgbG4xKyspIHsKICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0KICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0IC0KICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBsbjsKICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy50b3AgPQogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnRvcCAtCiAgICAgICAgICAgICAgICBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIGxuMTsKICAgICAgICAgICAgICBsZXQgaW1ncyA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgICB0b3A6IF90aGlzLm1vdmVzLnRvcCwKICAgICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChpbWdzKTsKICAgICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goaW1ncyk7CiAgICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAod2lkdGhOdW1SaWdodCA+IF90aGlzLnJpZ2h0TnVtKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygi5ZCR5bemIik7CiAgICAgICAgICBsZXQgdDEgPSBfdGhpcy5yaWdodE51bSArIDE7CiAgICAgICAgICBfdGhpcy5yaWdodE51bSA9IHdpZHRoTnVtUmlnaHQ7CiAgICAgICAgICBmb3IgKGxldCBsbiA9IHQxOyBsbiA8PSB3aWR0aE51bVJpZ2h0OyBsbisrKSB7CiAgICAgICAgICAgIGZvciAobGV0IGxuMSA9IF90aGlzLmJvdHRvbXROdW0gKiAtMTsgbG4xIDw9IF90aGlzLnRvcE51bTsgbG4xKyspIHsKICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0KICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0ICsKICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBsbjsKICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy50b3AgPQogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnRvcCAtCiAgICAgICAgICAgICAgICBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIGxuMTsKICAgICAgICAgICAgICBsZXQgaW1ncyA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgICB0b3A6IF90aGlzLm1vdmVzLnRvcCwKICAgICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChpbWdzKTsKICAgICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goaW1ncyk7CiAgICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoaGVpZ2h0TnVtVG9wID4gX3RoaXMudG9wTnVtKSB7CiAgICAgICAgICBsZXQgdCA9IF90aGlzLnRvcE51bSArIDE7CiAgICAgICAgICBfdGhpcy50b3BOdW0gPSBoZWlnaHROdW1Ub3A7CiAgICAgICAgICBmb3IgKGxldCBsbiA9IHQ7IGxuIDw9IGhlaWdodE51bVRvcDsgbG4rKykgewogICAgICAgICAgICBmb3IgKGxldCBsbjEgPSBfdGhpcy5yaWdodE51bSAqIC0xOyBsbjEgPD0gX3RoaXMubGVmdE51bTsgbG4xKyspIHsKICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0KICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0IC0KICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5mYWJPYmoud2lkdGggKiBsbjE7CiAgICAgICAgICAgICAgX3RoaXMubW92ZXMudG9wID0KICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgLQogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBsbjsKICAgICAgICAgICAgICBsZXQgaW1ncyA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgICB0b3A6IF90aGlzLm1vdmVzLnRvcCwKICAgICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChpbWdzKTsKICAgICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goaW1ncyk7CiAgICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoaGVpZ2h0TnVtQm90dG9tID4gX3RoaXMuYm90dG9tdE51bSkgewogICAgICAgICAgbGV0IHQxID0gX3RoaXMuYm90dG9tdE51bSArIDE7CiAgICAgICAgICBfdGhpcy5ib3R0b210TnVtID0gaGVpZ2h0TnVtQm90dG9tOwogICAgICAgICAgZm9yIChsZXQgbG4gPSB0MTsgbG4gPD0gaGVpZ2h0TnVtQm90dG9tOyBsbisrKSB7CiAgICAgICAgICAgIGZvciAobGV0IGxuMSA9IF90aGlzLnJpZ2h0TnVtICogLTE7IGxuMSA8PSBfdGhpcy5sZWZ0TnVtOyBsbjErKykgewogICAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPQogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLmxlZnQgLQogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai53aWR0aCAqIGxuMTsKCiAgICAgICAgICAgICAgX3RoaXMubW92ZXMudG9wID0KICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgKwogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBsbjsKCiAgICAgICAgICAgICAgbGV0IGltZ3MgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgICAgc2NhbGVYOiBfdGhpcy5mYWJPYmouc2NhbGVYLAogICAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgICAgdG9wOiBfdGhpcy5tb3Zlcy50b3AsCiAgICAgICAgICAgICAgICBsZWZ0OiBfdGhpcy5tb3Zlcy5sZWZ0LAogICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIiwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoaW1ncyk7CiAgICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKGltZ3MpOwogICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgX3RoaXMuZHJhd0ltYWdlQ2xpcCgpOwogICAgfSwKICAgIC8vIOWIneWni+WMlm9iauaWh+S7tgogICAgaW5pdE9iaihpZCkgewogICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpcy5tb2RlbElkID0gaWQ7CiAgICAgIHRoaXMubmFtZUxpc3QuZmluZEluZGV4KChpKSA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2coaSk7CiAgICAgICAgaWYgKGkuaWQgPT09IGlkKSB7CiAgICAgICAgICBpZiAoaS5pZCA9PT0gMCB8fCBpLmlkID09PSAxMDAwMSkgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpKTsKICAgICAgICAgICAgX3RoaXMuY2FudmFzU2hvd0ZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5pbWdTaG93RmxhZzEgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmltZ1Nob3dGbGFnMiA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmltZ1Nob3dGbGFnMyA9IGZhbHNlOwogICAgICAgICAgICAvLyB0aGlzLnNsaWRlRmxhZyA9IGZhbHNlOwoKICAgICAgICAgICAgLy8gX3RoaXMubmFtZUxpc3RbMV0uaW1nCgogICAgICAgICAgICAvLyBfdGhpcy5pbml0Q2FudmFzLnNldFpvb20oMSk7CgogICAgICAgICAgICBsZXQgc2NhbGUgPSAxOwogICAgICAgICAgICBpZiAoX3RoaXMuaW1nUHhXaWR0aCA+IF90aGlzLmltZ1B4SGVpZ2h0KSB7CiAgICAgICAgICAgICAgc2NhbGUgPSBfdGhpcy5jYWxjdWxhdGVXaWR0aCAvIF90aGlzLmltZ1B4V2lkdGggLyBfdGhpcy5rTXVsdGlwbGU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc2NhbGUgPSBfdGhpcy5jYWxjdWxhdGVIZWlodCAvIF90aGlzLmltZ1B4SGVpZ2h0IC8gX3RoaXMua011bHRpcGxlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaS5pZCA9PT0gMCkgewogICAgICAgICAgICAgIHRoaXMubWF4U2NhbGUgPSA0MDA7CiAgICAgICAgICAgICAgbGV0IGltZzEgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgICAgaGFzQ29udHJvbHM6IGZhbHNlLAogICAgICAgICAgICAgICAgc2NhbGVYOiBzY2FsZSwKICAgICAgICAgICAgICAgIHNjYWxlWTogc2NhbGUsCiAgICAgICAgICAgICAgICBhbmdsZTogMCwKICAgICAgICAgICAgICAgIC8vIG9wYWNpdHk6MCwKICAgICAgICAgICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIsCiAgICAgICAgICAgICAgICB0b3A6IF90aGlzLmNsaXBXaWR0aCAvIDIsCiAgICAgICAgICAgICAgICBsZWZ0OiBfdGhpcy5jbGlwSGVpZ2h0IC8gMiwKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgbGV0IG9iaiA9IF90aGlzLmluaXRDYW52YXMuZ2V0T2JqZWN0cygpOwogICAgICAgICAgICAgIG9iai5mb3JFYWNoKChyZXMpID0+IHsKICAgICAgICAgICAgICAgIF90aGlzLmluaXRDYW52YXMucmVtb3ZlKHJlcyk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIF90aGlzLmluaXRDYW52YXMuYWRkKGltZzEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMubWF4U2NhbGUgPSAyMDA7CiAgICAgICAgICAgICAgZmFicmljLkltYWdlLmZyb21VUkwoX3RoaXMubmFtZUxpc3RbMV0uaW1nLCBmdW5jdGlvbiAob2ltZykgewogICAgICAgICAgICAgICAgb2ltZy5oYXNDb250cm9scyA9IGZhbHNlOwogICAgICAgICAgICAgICAgb2ltZy5zY2FsZVggPSBzY2FsZSAvIDI7CiAgICAgICAgICAgICAgICBvaW1nLnNjYWxlWSA9IHNjYWxlIC8gMjsKICAgICAgICAgICAgICAgIG9pbWcuYW5nbGUgPSAwOwogICAgICAgICAgICAgICAgLy8gb3BhY2l0eTowLAogICAgICAgICAgICAgICAgb2ltZy5vcmlnaW5YID0gImNlbnRlciI7CiAgICAgICAgICAgICAgICBvaW1nLm9yaWdpblkgPSAiY2VudGVyIjsKICAgICAgICAgICAgICAgIG9pbWcudG9wID0gX3RoaXMuY2xpcFdpZHRoIC8gMjsKICAgICAgICAgICAgICAgIG9pbWcubGVmdCA9IF90aGlzLmNsaXBIZWlnaHQgLyAyOwoKICAgICAgICAgICAgICAgIGxldCBvYmogPSBfdGhpcy5pbml0Q2FudmFzLmdldE9iamVjdHMoKTsKICAgICAgICAgICAgICAgIG9iai5mb3JFYWNoKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdENhbnZhcy5yZW1vdmUocmVzKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzLmluaXRDYW52YXMuYWRkKG9pbWcpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpcy52YWx1ZXMgPSAxMDA7CiAgICAgICAgICAgIF90aGlzLnNsaWRlckhhbmRsZXIoX3RoaXMudmFsdWVzKTsKCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLm1heFNjYWxlID0gMjAwOwogICAgICAgICAgICBfdGhpcy5jYW52YXNTaG93RmxhZyA9IHRydWU7CiAgICAgICAgICAgIF90aGlzLmltZ1Nob3dGbGFnMSA9IGZhbHNlOwogICAgICAgICAgICBfdGhpcy5pbWdTaG93RmxhZzIgPSB0cnVlOwogICAgICAgICAgICBfdGhpcy5pbWdTaG93RmxhZzMgPSBmYWxzZTsKCiAgICAgICAgICAgIC8vIGlmICh0aGlzLmlzUmVwZWF0ID09IDApIHsKICAgICAgICAgICAgLy8gICB0aGlzLnJlcGF0RmxhZyA9IDA7CiAgICAgICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgICAgIC8vICAgdGhpcy5yZXBhdEZsYWcgPSAzOwogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIGlmIChpLmlkID09PSAxMDAwMSkgewogICAgICAgICAgICAgIHRoaXMucmVwYXRGbGFnID0gMzsKICAgICAgICAgICAgICBfdGhpcy5tb2RlbEltZyA9IGkuYmlncHNkLmltZzsKICAgICAgICAgICAgICB0aGlzLm9iai5uYW1lID0gaS5uYW1lOwogICAgICAgICAgICAgIHRoaXMub2JqLm1vZGVsU2l6ZSA9IGkubW9kZWxTaXplOwogICAgICAgICAgICAgIHRoaXMub2JqLmJpZ3BzZCA9IGkuYmlncHNkOwogICAgICAgICAgICAgIGlmIChpLm1vZGVsU2l6ZS5pbmRleE9mKCJjbSIpICE9IC0xKSB7CiAgICAgICAgICAgICAgICB2YXIgc3RyID0gaS5tb2RlbFNpemU7CiAgICAgICAgICAgICAgICBsZXQgcmVnMSA9IG5ldyBSZWdFeHAoImNtIiwgImciKTsKICAgICAgICAgICAgICAgIGkubW9kZWxTaXplID0gc3RyLnJlcGxhY2UocmVnMSwgIiIpOwogICAgICAgICAgICAgICAgdGhpcy5tb2RlbEFycmF5ID0gaS5tb2RlbFNpemUuc3BsaXQoIioiKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5tb2RlbEFycmF5ID0gaS5tb2RlbFNpemUuc3BsaXQoIioiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gZmFicmljLmpzIOmHjee9ruWkp+Wwj+S9jee9rgogICAgICAgICAgICAgIHRoaXMubXlDYW52YXMuc2V0Wm9vbSgxKTsKICAgICAgICAgICAgICB0aGlzLm15Q2FudmFzLmFic29sdXRlUGFuKHsgeDogMCwgeTogMCB9KTsKICAgICAgICAgICAgICB0aGlzLmRyYXdMaW5lKCk7CiAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hJbWdTaG93KCk7CgogICAgICAgICAgICAgIC8vIHRoaXMuaW1nU2NhbGUgPSAxOwogICAgICAgICAgICAgIC8vIHRoaXMubG9hZGluZyh0aGlzLmltZyk7CiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nKHRoaXMuaW1nLCB0cnVlKTsKICAgICAgICAgICAgICB0aGlzLmltZ1Nob3dGbGFnMiA9IHRydWU7CiAgICAgICAgICAgICAgdGhpcy5pbWdTaG93RmxhZzMgPSBmYWxzZTsKICAgICAgICAgICAgICAvLyB0aGlzLnNsaWRlRmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgX3RoaXMudmFsdWVzID0gMTAwOwogICAgICAgICAgICAgIC8vIF90aGlzLnZhbHVlcyA9IDEwMDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnJlcGF0RmxhZyA9IDM7CiAgICAgICAgICAgICAgX3RoaXMubW9kZWxJbWcgPSBpLmJpZ3BzZC5pbWc7CiAgICAgICAgICAgICAgdGhpcy5vYmoubmFtZSA9IGkubmFtZTsKICAgICAgICAgICAgICB0aGlzLm9iai5tb2RlbFNpemUgPSBpLm1vZGVsU2l6ZTsKICAgICAgICAgICAgICB0aGlzLm9iai5iaWdwc2QgPSBpLmJpZ3BzZDsKICAgICAgICAgICAgICBpZiAoaS5tb2RlbFNpemUuaW5kZXhPZigiY20iKSAhPSAtMSkgewogICAgICAgICAgICAgICAgbGV0IHN0ciA9IGkubW9kZWxTaXplOwogICAgICAgICAgICAgICAgbGV0IHJlZzEgPSBuZXcgUmVnRXhwKCJjbSIsICJnIik7CiAgICAgICAgICAgICAgICBpLm1vZGVsU2l6ZSA9IHN0ci5yZXBsYWNlKHJlZzEsICIiKTsKICAgICAgICAgICAgICAgIHRoaXMubW9kZWxBcnJheSA9IGkubW9kZWxTaXplLnNwbGl0KCIqIik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMubW9kZWxBcnJheSA9IGkubW9kZWxTaXplLnNwbGl0KCIqIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIGZhYnJpYy5qcyDph43nva7lpKflsI/kvY3nva4KICAgICAgICAgICAgICB0aGlzLm15Q2FudmFzLnNldFpvb20oMSk7CiAgICAgICAgICAgICAgdGhpcy5teUNhbnZhcy5hYnNvbHV0ZVBhbih7IHg6IDAsIHk6IDAgfSk7CiAgICAgICAgICAgICAgdGhpcy5kcmF3TGluZSgpOwogICAgICAgICAgICAgIHRoaXMuc3dpdGNoSW1nU2hvdygpOwogICAgICAgICAgICAgIHRoaXMubG9hZGluZyh0aGlzLmltZyk7CiAgICAgICAgICAgICAgdGhpcy5pbWdTaG93RmxhZzIgPSB0cnVlOwogICAgICAgICAgICAgIHRoaXMuaW1nU2hvd0ZsYWczID0gZmFsc2U7CiAgICAgICAgICAgICAgLy8gdGhpcy5zbGlkZUZsYWcgPSB0cnVlOwogICAgICAgICAgICAgIF90aGlzLnZhbHVlcyA9IDEwMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yid5aeL5YyW5Zu+54mHCiAgICBpbml0KGltZywgaW1nQXJyYXksIGZsYWcsIGltZ1NuKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLmltZ0FycmF5ID0gaW1nQXJyYXk7CiAgICAgIHRoaXMuaW1nU24gPSBpbWdTbjsKICAgICAgX3RoaXMucmVwYXRGbGFnID0gMDsKICAgICAgX3RoaXMuaW1nWCA9IDA7CiAgICAgIF90aGlzLmltZ1kgPSAwOwogICAgICAvLyB0aGlzLmxvYWRJbWcoaW1nKTsKICAgIH0sCiAgICAvLyDmi7/liLDlm77niYfmlL7lnKhjYW52YXPkuIoKICAgIGxvYWRJbWcoaW1ncykgewoKICAgICAgLy8gICDojrflj5Z0aGlzCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaW1nKTsKICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwogICAgICBpbWcuc2V0QXR0cmlidXRlKCJjcm9zc09yaWdpbiIsICJhbm9ueW1vdXMiKTsKICAgICAgaW1nLnNyYyA9IGltZ3M7CiAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7CgogICAgICAgIGxldCB3MzAwID0gTWF0aC5yb3VuZCgoaW1nLndpZHRoICogMjU0KSAvIDMwMCkgLyAxMDA7CiAgICAgICAgbGV0IGgzMDAgPSBNYXRoLnJvdW5kKChpbWcuaGVpZ2h0ICogMjU0KSAvIDMwMCkgLyAxMDA7CiAgICAgICAgX3RoaXMuaW1nQXJyYXkgPSBbdzMwMCwgaDMwMF07CiAgICAgICAgX3RoaXMuaW1nUHhXaWR0aCA9IF90aGlzLmltZy53aWR0aDsKICAgICAgICBfdGhpcy5pbWdQeEhlaWdodCA9IF90aGlzLmltZy5oZWlnaHQ7CiAgICAgICAgLy8g6LCD55So5YiH5o2i5Zu+54mH5bGV56S655qE5pa55rOVICzpu5jorqTlm77niYflr7nljp/lsLrlr7gKICAgICAgICAvLyBfdGhpcy5pbWdTaG93Q2hhbmdlKF90aGlzLmltZ1Nob3dGbGFnKTsKICAgICAgICBfdGhpcy5pbWdTY2FsZSA9IDE7CiAgICAgICAgLy8gZmFicmljLmpzIOmHjee9ruWkp+Wwj+S9jee9rgogICAgICAgIC8vIHRoaXMubXlDYW52YXMuc2V0Wm9vbSgxKTsKICAgICAgICAvLyB0aGlzLm15Q2FudmFzLmFic29sdXRlUGFuKHsgeDogMCwgeTogMCB9KTsKICAgICAgICAvLwogICAgICAgIC8vIGxldCBvYmogPSBfdGhpcy5teUNhbnZhcy5nZXRPYmplY3RzKCk7CiAgICAgICAgLy8gb2JqLmZvckVhY2goKHJlcykgPT4gewogICAgICAgIC8vICAgX3RoaXMubXlDYW52YXMucmVtb3ZlKHJlcyk7CiAgICAgICAgLy8gfSk7CiAgICAgICAgX3RoaXMuc3dpdGNoSW1nU2hvdygpOwogICAgICAgIC8vIF90aGlzLmRyYXdJbWFnZSgpOwoKICAgICAgICBsZXQgc2NhbGUgPSAxOwogICAgICAgIGlmIChfdGhpcy5pbWdQeFdpZHRoID4gX3RoaXMuaW1nUHhIZWlnaHQpIHsKICAgICAgICAgIHNjYWxlID0gX3RoaXMuY2FsY3VsYXRlV2lkdGggLyBfdGhpcy5pbWdQeFdpZHRoIC8gX3RoaXMua011bHRpcGxlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzY2FsZSA9IF90aGlzLmNhbGN1bGF0ZUhlaWh0IC8gX3RoaXMuaW1nUHhIZWlnaHQgLyBfdGhpcy5rTXVsdGlwbGU7CiAgICAgICAgfQoKICAgICAgICBsZXQgaW1nMSA9IG5ldyBmYWJyaWMuSW1hZ2UoaW1nLCB7CiAgICAgICAgICBoYXNDb250cm9sczogZmFsc2UsCiAgICAgICAgICBzY2FsZVg6IHNjYWxlLAogICAgICAgICAgc2NhbGVZOiBzY2FsZSwKICAgICAgICAgIGFuZ2xlOiAwLAogICAgICAgICAgLy8gb3BhY2l0eTowLAogICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIiwKICAgICAgICAgIHRvcDogX3RoaXMuY2xpcFdpZHRoIC8gMiwKICAgICAgICAgIGxlZnQ6IF90aGlzLmNsaXBIZWlnaHQgLyAyLAogICAgICAgIH0pOwogICAgICAgIF90aGlzLmluaXRDYW52YXMuYWRkKGltZzEpOwoKICAgICAgICBsZXQgaW1ncyA9IG5ldyBmYWJyaWMuSW1hZ2UoaW1nLCB7CiAgICAgICAgICBzY2FsZVg6IHNjYWxlLAogICAgICAgICAgc2NhbGVZOiBzY2FsZSwKICAgICAgICAgIGFuZ2xlOiAwLAogICAgICAgICAgLy8gb3BhY2l0eTowLAogICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIiwKICAgICAgICAgIHRvcDogX3RoaXMuY2xpcFdpZHRoIC8gMiwKICAgICAgICAgIGxlZnQ6IF90aGlzLmNsaXBIZWlnaHQgLyAyLAogICAgICAgIH0pOwogICAgICAgIF90aGlzLmZhYk9iaiA9IGltZ3M7CgogICAgICAgIC8vIGNvbnNvbGUubG9nKGltZyk7CiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogICAgICAgIGxldCBjdHgzID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgICAgLy8gbGV0IGNhbnZhc2NsaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKICAgICAgICAvLyBsZXQgY3R4NCA9IGNhbnZhc2NsaXAuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgICBsZXQgd3cgPSA4MDAsIGhoID0gKDgwMCAqIGltZy5oZWlnaHQpIC8gaW1nLndpZHRoOwogICAgICAgIC8vIGxldCB3dzM9d3csaGg9aGg7CiAgICAgICAgLy8gY2FudmFzY2xpcC53aWR0aCA9IHd3OwogICAgICAgIC8vIGNhbnZhc2NsaXAuaGVpZ2h0ID0gaGg7CiAgICAgICAgLy8gbGV0IEhlaWdodCA9IChpbWcuaGVpZ2h0ICogV2lkdGgpIC8gaW1nLndpZHRoOwogICAgICAgIC8vIGxldCBXaWR0aCA9IGltZy53aWR0aCAvIDM7CiAgICAgICAgY2FudmFzLndpZHRoID0gd3cgKiAzOwogICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoaCAqIDM7CiAgICAgICAgY3R4My5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3dywgaGgpOwogICAgICAgIGN0eDMuZHJhd0ltYWdlKGltZywgd3csIDAsIHd3LCBoaCk7CiAgICAgICAgY3R4My5kcmF3SW1hZ2UoaW1nLCAyICogd3csIDAsIHd3LCBoaCk7CiAgICAgICAgY3R4My5kcmF3SW1hZ2UoaW1nLCAwLCBoaCwgd3csIGhoKTsKICAgICAgICBjdHgzLmRyYXdJbWFnZShpbWcsIHd3LCBoaCwgd3csIGhoKTsKICAgICAgICBjdHgzLmRyYXdJbWFnZShpbWcsIDIgKiB3dywgaGgsIHd3LCBoaCk7CiAgICAgICAgY3R4My5kcmF3SW1hZ2UoaW1nLCAwLCAyICogaGgsIHd3LCBoaCk7CiAgICAgICAgY3R4My5kcmF3SW1hZ2UoaW1nLCB3dywgMiAqIGhoLCB3dywgaGgpOwogICAgICAgIGN0eDMuZHJhd0ltYWdlKGltZywgMiAqIHd3LCAyICogaGgsIHd3LCBoaCk7CiAgICAgICAgLy8gbGV0IHN0YXJ0WCA9IChjYW52YXMud2lkdGggLSBjYW52YXNjbGlwLndpZHRoKSAvIDI7CiAgICAgICAgLy8gbGV0IHN0YXJ0WSA9IChjYW52YXMuaGVpZ2h0IC0gY2FudmFzY2xpcC53aWR0aCkgLyAyOwogICAgICAgIC8vIGN0eDQuZHJhd0ltYWdlKAogICAgICAgIC8vICAgICBjYW52YXMsCiAgICAgICAgLy8gICAgIHN0YXJ0WCwKICAgICAgICAvLyAgICAgc3RhcnRZLAogICAgICAgIC8vICAgICBjYW52YXNjbGlwLndpZHRoLAogICAgICAgIC8vICAgICBjYW52YXNjbGlwLndpZHRoLAogICAgICAgIC8vICAgICAwLAogICAgICAgIC8vICAgICAwLAogICAgICAgIC8vICAgICBjYW52YXNjbGlwLndpZHRoLAogICAgICAgIC8vICAgICBjYW52YXNjbGlwLndpZHRoCiAgICAgICAgLy8gKTsKICAgICAgICBsZXQgaW1nczEgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKTsKICAgICAgICBfdGhpcy5uYW1lTGlzdFsxXS5pbWcgPSBpbWdzMTsKICAgICAgICBfdGhpcy5uYW1lTGlzdFsxXS5iaWdwc2QuaW1nID0gaW1nczE7CgoKICAgICAgICAvLyBjb25zb2xlLmxvZyhfdGhpcy5pbWcpCiAgICAgICAgLy8gY29uc29sZS5sb2coIuaJp+ihjOS6huWKoOi9veWbvueJh+eahOWHveaVsCIpOwoKICAgICAgICBfdGhpcy5zZWxlY3RBbGlrZUJ5SWQoKTsKICAgICAgfTsKICAgICAgX3RoaXMuaW1nID0gaW1nOwogICAgfSwKICAgIGxvYWRpbmcoaW1nLCBmbGFnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBsZXQgdzMwMCA9IE1hdGgucm91bmQoKGltZy53aWR0aCAqIDI1NCkgLyAzMDApIC8gMTAwOwogICAgICBsZXQgaDMwMCA9IE1hdGgucm91bmQoKGltZy5oZWlnaHQgKiAyNTQpIC8gMzAwKSAvIDEwMDsKICAgICAgX3RoaXMuaW1nQXJyYXkgPSBbdzMwMCwgaDMwMF07CiAgICAgIF90aGlzLmltZ1B4V2lkdGggPSBfdGhpcy5pbWcud2lkdGg7CiAgICAgIF90aGlzLmltZ1B4SGVpZ2h0ID0gX3RoaXMuaW1nLmhlaWdodDsKICAgICAgX3RoaXMuaW1nU2NhbGUgPSAxOwogICAgICAvLyBmYWJyaWMuanMg6YeN572u5aSn5bCP5L2N572uCiAgICAgIHRoaXMubXlDYW52YXMuc2V0Wm9vbSgxKTsKICAgICAgdGhpcy5teUNhbnZhcy5hYnNvbHV0ZVBhbih7IHg6IDAsIHk6IDAgfSk7CgogICAgICBsZXQgb2JqID0gX3RoaXMubXlDYW52YXMuZ2V0T2JqZWN0cygpOwogICAgICBvYmouZm9yRWFjaCgocmVzKSA9PiB7CiAgICAgICAgX3RoaXMubXlDYW52YXMucmVtb3ZlKHJlcyk7CiAgICAgIH0pOwogICAgICBfdGhpcy5zd2l0Y2hJbWdTaG93KCk7CiAgICAgIF90aGlzLmRyYXdJbWFnZShmbGFnKTsKICAgIH0sCiAgICAvLyDnlLvlm74KICAgIGRyYXdJbWFnZShmbGFnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIC8vIGNvbnNvbGUubG9nKF90aGlzLnJlcGF0RmxhZyk7CiAgICAgIGxldCBzY2FsZSA9IDE7CiAgICAgIGlmIChfdGhpcy5pbWdQeFdpZHRoID4gX3RoaXMuaW1nUHhIZWlnaHQpIHsKICAgICAgICBzY2FsZSA9IF90aGlzLmNhbGN1bGF0ZVdpZHRoIC8gX3RoaXMuaW1nUHhXaWR0aCAvIF90aGlzLmtNdWx0aXBsZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzY2FsZSA9IF90aGlzLmNhbGN1bGF0ZUhlaWh0IC8gX3RoaXMuaW1nUHhIZWlnaHQgLyBfdGhpcy5rTXVsdGlwbGU7CiAgICAgIH0KICAgICAgaWYgKGZsYWcpIHsKICAgICAgICB0aGlzLmltZ1NjYWxlID0gMSAvIDM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pbWdTY2FsZSA9IDE7CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coZmxhZywgc2NhbGUpOwogICAgICBjb25zdCBvYmpzID0gX3RoaXMubXlDYW52YXMuZ2V0T2JqZWN0cygpOwogICAgICBpZiAob2Jqcy5sZW5ndGggPiAwKSB7CiAgICAgICAgX3RoaXMucmVwYXRHcm91cC5mb3JFYWNoKChyZXMpID0+IHsKICAgICAgICAgIF90aGlzLm15Q2FudmFzLnJlbW92ZShyZXMpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5yZXBhdEZsYWcpIHsKICAgICAgICAvLyDlubPpk7rnmoTlm77niYcKICAgICAgICBfdGhpcy53aWR0aE51bSA9IE1hdGguZmxvb3IoCiAgICAgICAgICBfdGhpcy5jbGlwV2lkdGggLwogICAgICAgICAgICAoX3RoaXMuaW1nU2NhbGUgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBfdGhpcy5mYWJPYmouc2NhbGVYKQogICAgICAgICk7CiAgICAgICAgX3RoaXMuaGVpZ2h0TnVtID0gTWF0aC5mbG9vcigKICAgICAgICAgIF90aGlzLmNsaXBIZWlnaHQgLwogICAgICAgICAgICAoX3RoaXMuaW1nU2NhbGUgKiBfdGhpcy5mYWJPYmouaGVpZ2h0ICogX3RoaXMuZmFiT2JqLnNjYWxlWSkKICAgICAgICApOwogICAgICAgIGxldCB3aWR0aE51bUxlZnQgPSBNYXRoLmNlaWwoCiAgICAgICAgICAoKF90aGlzLmZhYk9iai5sZWZ0IC0gX3RoaXMuY2xpcFdpZHRoIC8gMikgKiBfdGhpcy5pbWdTY2FsZSArCiAgICAgICAgICAgIF90aGlzLmNsaXBXaWR0aCAvIDIgLQogICAgICAgICAgICAoX3RoaXMuZmFiT2JqLndpZHRoICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlKSAvIDIpIC8KICAgICAgICAgICAgKF90aGlzLmZhYk9iai53aWR0aCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkKICAgICAgICApOwogICAgICAgIGxldCB3aWR0aE51bVJpZ2h0ID0gTWF0aC5jZWlsKAogICAgICAgICAgKChfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuZmFiT2JqLmxlZnQpICogX3RoaXMuaW1nU2NhbGUgKwogICAgICAgICAgICBfdGhpcy5jbGlwV2lkdGggLyAyIC0KICAgICAgICAgICAgKF90aGlzLmZhYk9iai53aWR0aCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkgLyAyKSAvCiAgICAgICAgICAgIChfdGhpcy5mYWJPYmoud2lkdGggKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpCiAgICAgICAgKTsKCiAgICAgICAgbGV0IGhlaWdodE51bVRvcCA9IE1hdGguY2VpbCgKICAgICAgICAgICgoX3RoaXMuZmFiT2JqLnRvcCAtIF90aGlzLmNsaXBXaWR0aCAvIDIpICogX3RoaXMuaW1nU2NhbGUgKwogICAgICAgICAgICBfdGhpcy5jbGlwV2lkdGggLyAyIC0KICAgICAgICAgICAgKF90aGlzLmZhYk9iai5oZWlnaHQgKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpIC8gMikgLwogICAgICAgICAgICAoX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkKICAgICAgICApOwogICAgICAgIGxldCBoZWlnaHROdW1Cb3R0bSA9IE1hdGguY2VpbCgKICAgICAgICAgICgoX3RoaXMuY2xpcFdpZHRoIC8gMiAtIF90aGlzLmZhYk9iai50b3ApICogX3RoaXMuaW1nU2NhbGUgKwogICAgICAgICAgICBfdGhpcy5jbGlwV2lkdGggLyAyIC0KICAgICAgICAgICAgKF90aGlzLmZhYk9iai5oZWlnaHQgKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpIC8gMikgLwogICAgICAgICAgICAoX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkKICAgICAgICApOwogICAgICAgIF90aGlzLmxlZnROdW0gPSB3aWR0aE51bUxlZnQ7CiAgICAgICAgX3RoaXMucmlnaHROdW0gPSB3aWR0aE51bVJpZ2h0OwogICAgICAgIF90aGlzLnRvcE51bSA9IGhlaWdodE51bVRvcDsKICAgICAgICBfdGhpcy5ib3R0b210TnVtID0gaGVpZ2h0TnVtQm90dG07CiAgICAgICAgX3RoaXMuYXJyQ3Jvc3MxID0gW107IC8v5bmz6ZO65LmL5ZCO55qE5pWw57uECiAgICAgICAgaWYgKF90aGlzLnJlcGF0RmxhZyA9PSAxKSB7CiAgICAgICAgICAvLyDmqKrlkJHlubPpk7rnmoTmmK8g5pyA5Lit6Ze05piv57q15ZCR55qE5pWw57uELDHkuKos5Ymp5LiL55qE5YWo5piv5qiq5ZCR55qE5pWw57uECiAgICAgICAgICBfdGhpcy5hcnJDcm9zczEgPSBbXTsKICAgICAgICAgIGlmIChfdGhpcy5yZXBhdEdyb3VwLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5mb3JFYWNoKChyZXMpID0+IHsKICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5yZW1vdmUocmVzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAgPSBbXTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAobGV0IGEgPSAxOyBhIDw9IHdpZHRoTnVtTGVmdDsgYSsrKSB7CiAgICAgICAgICAgIF90aGlzLmFyckNyb3NzMS5wdXNoKFsKICAgICAgICAgICAgICBfdGhpcy5mYWJPYmoudG9wLAogICAgICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0IC0gX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai53aWR0aCAqIGEsCiAgICAgICAgICAgIF0pOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgYSA9IDE7IGEgPD0gd2lkdGhOdW1SaWdodDsgYSsrKSB7CiAgICAgICAgICAgIF90aGlzLmFyckNyb3NzMS5wdXNoKFsKICAgICAgICAgICAgICBfdGhpcy5mYWJPYmoudG9wLAogICAgICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0ICsgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai53aWR0aCAqIGEsCiAgICAgICAgICAgIF0pOwogICAgICAgICAgfQogICAgICAgICAgbGV0IGltZ3MgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgIHNjYWxlWTogX3RoaXMuZmFiT2JqLnNjYWxlWSwKICAgICAgICAgICAgdG9wOiBfdGhpcy5mYWJPYmoudG9wLAogICAgICAgICAgICBsZWZ0OiBfdGhpcy5mYWJPYmoubGVmdCwKICAgICAgICAgICAgbmFtZTogMCwKICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoaW1ncyk7CiAgICAgICAgICBfdGhpcy5mYWJPYmogPSBpbWdzOwogICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKGltZ3MpOwogICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKCiAgICAgICAgICBfdGhpcy5hcnJDcm9zczEuZm9yRWFjaCgocmVzKSA9PiB7CiAgICAgICAgICAgIGxldCBpbWdzID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgIHRvcDogcmVzWzBdLAogICAgICAgICAgICAgIGxlZnQ6IHJlc1sxXSwKICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChpbWdzKTsKICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKGltZ3MpOwogICAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMikgewogICAgICAgICAgX3RoaXMuYXJyQ3Jvc3MxID0gW107CiAgICAgICAgICBpZiAoX3RoaXMucmVwYXRHcm91cC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAuZm9yRWFjaCgocmVzKSA9PiB7CiAgICAgICAgICAgICAgX3RoaXMubXlDYW52YXMucmVtb3ZlKHJlcyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwID0gW107CiAgICAgICAgICB9CiAgICAgICAgICAvLyDnq5blkJHlubPpk7ogIOS4remXtOaYr+aoquWQkeeahOaVsOe7hCzlj6rmnInkuIDkuKos5Ymp5LiL55qE5YWo5piv56uW5ZCR55qE5pWw57uECiAgICAgICAgICBmb3IgKGxldCBhID0gMTsgYSA8PSBoZWlnaHROdW1Ub3A7IGErKykgewogICAgICAgICAgICBfdGhpcy5hcnJDcm9zczEucHVzaChbCiAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnRvcCAtIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5mYWJPYmouaGVpZ2h0ICogYSwKICAgICAgICAgICAgICBfdGhpcy5mYWJPYmoubGVmdCwKICAgICAgICAgICAgXSk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBhID0gMTsgYSA8PSBoZWlnaHROdW1Cb3R0bTsgYSsrKSB7CiAgICAgICAgICAgIF90aGlzLmFyckNyb3NzMS5wdXNoKFsKICAgICAgICAgICAgICBfdGhpcy5mYWJPYmoudG9wICsgX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBhLAogICAgICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0LAogICAgICAgICAgICBdKTsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBpbWdzID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgc2NhbGVYOiBfdGhpcy5mYWJPYmouc2NhbGVYLAogICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgIHRvcDogX3RoaXMuZmFiT2JqLnRvcCwKICAgICAgICAgICAgbGVmdDogX3RoaXMuZmFiT2JqLmxlZnQsCiAgICAgICAgICAgIG5hbWU6IDAsCiAgICAgICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIiwKICAgICAgICAgIH0pOwogICAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKGltZ3MpOwogICAgICAgICAgX3RoaXMuZmFiT2JqID0gaW1nczsKICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChpbWdzKTsKICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICBfdGhpcy5hcnJDcm9zczEuZm9yRWFjaCgocmVzKSA9PiB7CiAgICAgICAgICAgIGxldCBpbWdzID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgIHRvcDogcmVzWzBdLAogICAgICAgICAgICAgIGxlZnQ6IHJlc1sxXSwKICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChpbWdzKTsKICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKGltZ3MpOwogICAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMykgewogICAgICAgICAgX3RoaXMuYXJyVmVydGljYWwgPSBbXTsKICAgICAgICAgIGlmIChfdGhpcy5yZXBhdEdyb3VwLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5mb3JFYWNoKChyZXMpID0+IHsKICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5yZW1vdmUocmVzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAgPSBbXTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDnrKzkuIDpg6jliIYg5bem5LiK6KeS55qE6YOo5YiGIOeUqOWIsOeahOaYryB3aWR0aE51bWxlZnQg5ZKMIGhlaWdodE51bXRvcAogICAgICAgICAgZm9yIChsZXQgYSA9IDE7IGEgPD0gd2lkdGhOdW1MZWZ0OyBhKyspIHsKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gaGVpZ2h0TnVtVG9wOyBqKyspIHsKICAgICAgICAgICAgICBfdGhpcy5hcnJWZXJ0aWNhbC5wdXNoKFsKICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgLQogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBqLAogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLmxlZnQgLQogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai53aWR0aCAqIGEsCiAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIOesrOS6jOmDqOWIhiDlj7PkuIrop5LnmoTpg6jliIYg55So5Yiw55qE5pivIHdpZHRoTnVtUmlnaHTlkowgaGVpZ2h0TnVtVG9wCiAgICAgICAgICBmb3IgKGxldCBhID0gMTsgYSA8PSB3aWR0aE51bVJpZ2h0OyBhKyspIHsKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gaGVpZ2h0TnVtVG9wOyBqKyspIHsKICAgICAgICAgICAgICBfdGhpcy5hcnJWZXJ0aWNhbC5wdXNoKFsKICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgLQogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBqLAogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLmxlZnQgKwogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai53aWR0aCAqIGEsCiAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIOesrOS4iemDqOWIhiDlt6bkuIvop5Ig55So5Yiw55qE6YOo5YiG5pivIHdpZHRoTnVtbGVmdCDlkowgaGVpZ2h0TnVtQm90dG0KICAgICAgICAgIGZvciAobGV0IGEgPSAxOyBhIDw9IHdpZHRoTnVtTGVmdDsgYSsrKSB7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDw9IGhlaWdodE51bUJvdHRtOyBqKyspIHsKICAgICAgICAgICAgICBfdGhpcy5hcnJWZXJ0aWNhbC5wdXNoKFsKICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgKwogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBqLAogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLmxlZnQgLQogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai53aWR0aCAqIGEsCiAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIOesrOWbm+mDqOWIhiAg5Y+z5LiL6KeSIOeUqOWIsOeahOmDqOWIhuaYryB3aWR0aE51bVJpZ2h0IOWSjCBoZWlnaHROdW1Cb3R0bQogICAgICAgICAgZm9yIChsZXQgYSA9IDE7IGEgPD0gd2lkdGhOdW1SaWdodDsgYSsrKSB7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDw9IGhlaWdodE51bUJvdHRtOyBqKyspIHsKICAgICAgICAgICAgICBfdGhpcy5hcnJWZXJ0aWNhbC5wdXNoKFsKICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgKwogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBqLAogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLmxlZnQgKwogICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai53aWR0aCAqIGEsCiAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIOW3pui+ueeahOmDqOWIhgogICAgICAgICAgZm9yIChsZXQgYSA9IDE7IGEgPD0gd2lkdGhOdW1MZWZ0OyBhKyspIHsKICAgICAgICAgICAgX3RoaXMuYXJyVmVydGljYWwucHVzaChbCiAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnRvcCwKICAgICAgICAgICAgICBfdGhpcy5mYWJPYmoubGVmdCAtIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBhLAogICAgICAgICAgICBdKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIOWPs+i+ueeahOmDqOWIhgogICAgICAgICAgZm9yIChsZXQgYSA9IDE7IGEgPD0gd2lkdGhOdW1SaWdodDsgYSsrKSB7CiAgICAgICAgICAgIF90aGlzLmFyclZlcnRpY2FsLnB1c2goWwogICAgICAgICAgICAgIF90aGlzLmZhYk9iai50b3AsCiAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLmxlZnQgKyBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLndpZHRoICogYSwKICAgICAgICAgICAgXSk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyDkuIrpnaLnmoTpg6jliIYKICAgICAgICAgIGZvciAobGV0IGEgPSAxOyBhIDw9IGhlaWdodE51bVRvcDsgYSsrKSB7CiAgICAgICAgICAgIF90aGlzLmFyclZlcnRpY2FsLnB1c2goWwogICAgICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgLSBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIGEsCiAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLmxlZnQsCiAgICAgICAgICAgIF0pOwogICAgICAgICAgfQogICAgICAgICAgLy8g5LiL6Z2i55qE6YOo5YiGCiAgICAgICAgICBmb3IgKGxldCBhID0gMTsgYSA8PSBoZWlnaHROdW1Cb3R0bTsgYSsrKSB7CiAgICAgICAgICAgIF90aGlzLmFyclZlcnRpY2FsLnB1c2goWwogICAgICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgKyBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIGEsCiAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLmxlZnQsCiAgICAgICAgICAgIF0pOwogICAgICAgICAgfQogICAgICAgICAgbGV0IGltZ3MgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgIHNjYWxlWTogX3RoaXMuZmFiT2JqLnNjYWxlWSwKICAgICAgICAgICAgdG9wOiBfdGhpcy5mYWJPYmoudG9wLAogICAgICAgICAgICBsZWZ0OiBfdGhpcy5mYWJPYmoubGVmdCwKICAgICAgICAgICAgbmFtZTogMCwKICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoaW1ncyk7CiAgICAgICAgICBfdGhpcy5mYWJPYmogPSBpbWdzOwogICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKGltZ3MpOwogICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKCiAgICAgICAgICBfdGhpcy5hcnJWZXJ0aWNhbC5mb3JFYWNoKChyZXMpID0+IHsKICAgICAgICAgICAgbGV0IGltZ3MgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgdG9wOiByZXNbMF0sCiAgICAgICAgICAgICAgbGVmdDogcmVzWzFdLAogICAgICAgICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKGltZ3MpOwogICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goaW1ncyk7CiAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coX3RoaXMuY2xpcFdpZHRoKTsKICAgICAgICBfdGhpcy5mYWJPYmogPSBudWxsOwogICAgICAgIC8vIOayoeacieW5s+mTuueahOWbvueJhwogICAgICAgIGlmIChfdGhpcy5yZXBhdEdyb3VwLmxlbmd0aCA+IDApIHsKICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAuZm9yRWFjaCgocmVzKSA9PiB7CiAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLnJlbW92ZShyZXMpOwogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwID0gW107CiAgICAgICAgfQogICAgICAgIGxldCBpbWdzID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgIHNjYWxlWDogc2NhbGUsCiAgICAgICAgICBzY2FsZVk6IHNjYWxlLAogICAgICAgICAgYW5nbGU6IDAsCiAgICAgICAgICAvLyBvcGFjaXR5OjAsCiAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgdG9wOiBfdGhpcy5jbGlwV2lkdGggLyAyLAogICAgICAgICAgbGVmdDogX3RoaXMuY2xpcEhlaWdodCAvIDIsCiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKGltZ3MpOwogICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChpbWdzKTsKICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goaW1ncyk7CiAgICAgICAgX3RoaXMuZmFiT2JqID0gaW1nczsKICAgICAgfQogICAgICB0aGlzLmRyYXdJbWFnZUNsaXAoKTsKICAgIH0sCiAgICAvLyDoo4HliIdjYW52YXMKICAgIGFzeW5jIGRyYXdJbWFnZUNsaXAoKSB7CiAgICAgIGxldCBNdWx0aXBsZSA9IDM7CiAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMuaW1nQ2FudmFzLnNldFdpZHRoKF90aGlzLmNsaXBXaWR0aCAqIE11bHRpcGxlKTsKICAgICAgdGhpcy5pbWdDYW52YXMuc2V0SGVpZ2h0KF90aGlzLmNsaXBIZWlnaHQgKiBNdWx0aXBsZSk7CiAgICAgIF90aGlzLmltZ0NhbnZhcy5jbGVhcigpOwogICAgICBfdGhpcy5teUNhbnZhcy5nZXRPYmplY3RzKCkuZm9yRWFjaCgocmVzKSA9PiB7CiAgICAgICAgbGV0IGltZ3MgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgc2NhbGVYOiByZXMuc2NhbGVYICogTXVsdGlwbGUsCiAgICAgICAgICBzY2FsZVk6IHJlcy5zY2FsZVkgKiBNdWx0aXBsZSwKICAgICAgICAgIHRvcDogcmVzLnRvcCAqIE11bHRpcGxlLAogICAgICAgICAgbGVmdDogcmVzLmxlZnQgKiBNdWx0aXBsZSwKICAgICAgICAgIC8vIGFuZ2xlOiBpbmRleCAqIDEwLAogICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIiwKICAgICAgICB9KTsKICAgICAgICBfdGhpcy5pbWdDYW52YXMuYWRkKGltZ3MpOwogICAgICB9KTsKICAgICAgX3RoaXMuem9vbVBvaW50ID0gbmV3IGZhYnJpYy5Qb2ludCgKICAgICAgICBfdGhpcy5pbWdDYW52YXMud2lkdGggLyAyLAogICAgICAgIF90aGlzLmltZ0NhbnZhcy5oZWlnaHQgLyAyCiAgICAgICk7IC8vIOS4reW/g+eCuQogICAgICBfdGhpcy5pbWdDYW52YXMuem9vbVRvUG9pbnQoX3RoaXMuem9vbVBvaW50LCBfdGhpcy5pbWdTY2FsZSk7CiAgICAgIF90aGlzLmltZ0NhbnZhcy5yZW5kZXJBbGwoKTsKCiAgICAgIC8vIGNvbnNvbGUubG9nKF90aGlzLmltZ0NhbnZhcykKICAgICAgY29uc3QgYmFzZTY0ID0gX3RoaXMuaW1nQ2FudmFzLnRvRGF0YVVSTCh7CiAgICAgICAgZm9ybWF0OiAicG5nIiwKICAgICAgICBxdWFsaXR5OiAxLAogICAgICAgIGxlZnQ6IF90aGlzLmJlZ2luLnggKiBNdWx0aXBsZSwKICAgICAgICB0b3A6IF90aGlzLmJlZ2luLnkgKiBNdWx0aXBsZSwKICAgICAgICB3aWR0aDogX3RoaXMuaW1nQ2FudmFzLndpZHRoIC0gX3RoaXMuYmVnaW4ueCAqIE11bHRpcGxlICogMiwKICAgICAgICBoZWlnaHQ6IF90aGlzLmltZ0NhbnZhcy5oZWlnaHQgLSBfdGhpcy5iZWdpbi55ICogTXVsdGlwbGUgKiAyLAogICAgICB9KTsKICAgICAgLy8gY29uc29sZS5sb2coYmFzZTY0KQogICAgICAvLyBjb25zb2xlLmxvZyhfdGhpcy5iZWdpbi54ICogTXVsdGlwbGUpOwogICAgICAvLyBjb25zb2xlLmxvZyhfdGhpcy5iZWdpbi55ICogTXVsdGlwbGUpOwogICAgICAvLyBjb25zb2xlLmxvZyhfdGhpcy5pbWdDYW52YXMud2lkdGggLSBfdGhpcy5iZWdpbi54ICogTXVsdGlwbGUgKiAyKTsKICAgICAgLy8gY29uc29sZS5sb2coX3RoaXMuaW1nQ2FudmFzLmhlaWdodCAtIF90aGlzLmJlZ2luLnkgKiBNdWx0aXBsZSAqIDIpOwogICAgICB2YXIgaW1nVG9DdXQgPSBuZXcgSW1hZ2UoKTsKICAgICAgaW1nVG9DdXQuc3JjID0gYmFzZTY0OwogICAgICBfdGhpcy5jbGlwSW1nID0gYmFzZTY0OwogICAgICAvLyBkb2N1bWVudC5ib2R5LmFwcGVuZChpbWdUb0N1dCkKICAgICAgaWYgKHRoaXMub2JqICYmIHRoaXMub2JqLmJpZ3BzZCAmJiB0aGlzLm9iai5iaWdwc2Quc2t1KSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coIHRoaXMub2JqLmJpZ3BzZC5uYW1lLnRvU3RyaW5nKCkpOwogICAgICAgIF90aGlzLnVwZGF0ZU1pbmlNYXAoCiAgICAgICAgICB0aGlzLm9iai5iaWdwc2Quc2t1LAogICAgICAgICAgYmFzZTY0LAogICAgICAgICAgdGhpcy5vYmouYmlncHNkLm5hbWUudG9TdHJpbmcoKQogICAgICAgICk7CiAgICAgICAgLy8gdGhpcy5pbWdTaG93RmxhZzEgPSBmYWxzZTsKICAgICAgICAvLyB0aGlzLmNhbnZhc1Nob3dGbGFnID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8vIOeUu+e6v+eahOWHveaVsCDlsIHoo4UKICAgIGRyYXdMaW5lKCkgewogICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICAvLyDlhYjmsYLlh7rnm5LlrZDnmoTlrr3lkozpq5gKICAgICAgbGV0IG1vZGVsSGVpZ2h0ID0gdGhpcy5tb2RlbEFycmF5WzFdOyAvL3ZhcgogICAgICBsZXQgbW9kZWxXaWR0aCA9IHRoaXMubW9kZWxBcnJheVswXTsgLy92YXIKICAgICAgaWYgKG1vZGVsSGVpZ2h0ID49IG1vZGVsV2lkdGgpIHsKICAgICAgICB0aGlzLmJveEhlaWdodCA9IF90aGlzLmJveE1heCAqIF90aGlzLmtNdWx0aXBsZTsKICAgICAgICB0aGlzLmJveFdpZHRoID0gTWF0aC5yb3VuZCgodGhpcy5ib3hIZWlnaHQgKiBtb2RlbFdpZHRoKSAvIG1vZGVsSGVpZ2h0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmJveFdpZHRoID0gX3RoaXMuYm94TWF4ICogX3RoaXMua011bHRpcGxlOwogICAgICAgIHRoaXMuYm94SGVpZ2h0ID0gTWF0aC5yb3VuZCgodGhpcy5ib3hXaWR0aCAqIG1vZGVsSGVpZ2h0KSAvIG1vZGVsV2lkdGgpOwogICAgICB9CgogICAgICBfdGhpcy5jbGlwWCA9IChfdGhpcy5jbGlwV2lkdGggKiBfdGhpcy5rTXVsdGlwbGUgLSBfdGhpcy5ib3hXaWR0aCkgLyAyOwogICAgICBfdGhpcy5jbGlwWSA9ICh0aGlzLmNsaXBIZWlnaHQgKiBfdGhpcy5rTXVsdGlwbGUgLSBfdGhpcy5ib3hIZWlnaHQpIC8gMjsKCiAgICAgIGxldCBtb3ZlVG9GdW5jdGlvbiA9IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUubW92ZVRvOwogICAgICBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLm1vdmVUb0xvY2F0aW9uID0ge307CiAgICAgIC8vIOmHjeaWsOWumuS5iW1vdmVUb+aWueazlQogICAgICBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLm1vdmVUbyA9IGZ1bmN0aW9uICh4LCB5KSB7CiAgICAgICAgdGhpcy5tb3ZlVG9Mb2NhdGlvbi54ID0geDsKICAgICAgICB0aGlzLm1vdmVUb0xvY2F0aW9uLnkgPSB5OwogICAgICAgIG1vdmVUb0Z1bmN0aW9uLmFwcGx5KHRoaXMsIFt4LCB5XSk7CiAgICAgIH07CiAgICAgIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuZGFzaGVkTGluZVRvID0gZnVuY3Rpb24gKAogICAgICAgIHgsCiAgICAgICAgeSwKICAgICAgICBkYXNoZWRMZW5ndGgKICAgICAgKSB7CiAgICAgICAgZGFzaGVkTGVuZ3RoID0gZGFzaGVkTGVuZ3RoID09PSB1bmRlZmluZWQgPyA1IDogZGFzaGVkTGVuZ3RoOwogICAgICAgIHZhciBzdGFydFggPSB0aGlzLm1vdmVUb0xvY2F0aW9uLng7CiAgICAgICAgdmFyIHN0YXJ0WSA9IHRoaXMubW92ZVRvTG9jYXRpb24ueTsKICAgICAgICB2YXIgZGVsdGFYID0geCAtIHN0YXJ0WDsKICAgICAgICB2YXIgZGVsdGFZID0geSAtIHN0YXJ0WTsKICAgICAgICB2YXIgbnVtYmVyRGFzaCA9IE1hdGguZmxvb3IoCiAgICAgICAgICBNYXRoLnNxcnQoZGVsdGFYICogZGVsdGFYICsgZGVsdGFZICogZGVsdGFZKSAvIGRhc2hlZExlbmd0aAogICAgICAgICk7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJEYXNoOyBpKyspIHsKICAgICAgICAgIHRoaXNbaSAlIDIgPT09IDAgPyAibW92ZVRvIiA6ICJsaW5lVG8iXSgKICAgICAgICAgICAgc3RhcnRYICsgKGRlbHRhWCAvIG51bWJlckRhc2gpICogaSwKICAgICAgICAgICAgc3RhcnRZICsgKGRlbHRhWSAvIG51bWJlckRhc2gpICogaQogICAgICAgICAgKTsgLy/nrYnlkIzkuo50aGlzLm1vdmVUbyh4LCB5KeaIluiAhSB0aGlzLkxpbmVUbyh4LCB5KQogICAgICAgIH0KICAgICAgICB0aGlzLm1vdmVUbyh4LCB5KTsgLy/ov57nu63nu5jliLbomZrnur/ml7bvvIzotbfngrnku47lvZPliY3ngrnlvIDlp4sKICAgICAgfTsKCiAgICAgIGxldCBjb250YWluZXJXaWR0aCA9IHRoaXMuY2xpcFdpZHRoICogX3RoaXMua011bHRpcGxlLAogICAgICAgIGNvbnRhaW5lckhlaWdodCA9IHRoaXMuY2xpcEhlaWdodCAqIF90aGlzLmtNdWx0aXBsZTsKICAgICAgbGV0IG9uZVgsIG9uZVksIHR3b1gsIHR3b1ksIHRocmVlWCwgdGhyZWVZLCBmb3VyWCwgZm91clk7CiAgICAgIGxldCBsaW5lQm94V2lkdGggPSBfdGhpcy5ib3hXaWR0aCAvIF90aGlzLmtNdWx0aXBsZTsKICAgICAgbGV0IGxpbmVCb3hIZWlnaHQgPSBfdGhpcy5ib3hIZWlnaHQgLyBfdGhpcy5rTXVsdGlwbGU7CiAgICAgIF90aGlzLmJlZ2luLnggPSAoY29udGFpbmVyV2lkdGggLSB0aGlzLmJveFdpZHRoKSAvIDIgLyBfdGhpcy5rTXVsdGlwbGU7CiAgICAgIF90aGlzLmJlZ2luLnkgPSAoY29udGFpbmVySGVpZ2h0IC0gdGhpcy5ib3hIZWlnaHQpIC8gMiAvIF90aGlzLmtNdWx0aXBsZTsKICAgICAgb25lWCA9IF90aGlzLmJlZ2luLnggKyBsaW5lQm94V2lkdGg7CiAgICAgIG9uZVkgPSBfdGhpcy5iZWdpbi55OwogICAgICB0d29YID0gX3RoaXMuYmVnaW4ueCArIGxpbmVCb3hXaWR0aDsKICAgICAgdHdvWSA9IF90aGlzLmJlZ2luLnkgKyBsaW5lQm94SGVpZ2h0OwogICAgICB0aHJlZVggPSBfdGhpcy5iZWdpbi54OwogICAgICB0aHJlZVkgPSBfdGhpcy5iZWdpbi55ICsgbGluZUJveEhlaWdodDsKICAgICAgZm91clggPSBfdGhpcy5iZWdpbi54OwogICAgICBmb3VyWSA9IF90aGlzLmJlZ2luLnk7CgogICAgICBfdGhpcy5jdHhMaW5lLmNsZWFyUmVjdCgwLCAwLCBjb250YWluZXJXaWR0aCwgY29udGFpbmVySGVpZ2h0KTsKICAgICAgX3RoaXMuY3R4TGluZS5iZWdpblBhdGgoKTsKICAgICAgX3RoaXMuY3R4TGluZS5tb3ZlVG8oX3RoaXMuYmVnaW4ueCwgX3RoaXMuYmVnaW4ueSk7CiAgICAgIF90aGlzLmN0eExpbmUuZGFzaGVkTGluZVRvKG9uZVgsIG9uZVkpOwogICAgICBfdGhpcy5jdHhMaW5lLmRhc2hlZExpbmVUbyh0d29YLCB0d29ZKTsKICAgICAgX3RoaXMuY3R4TGluZS5kYXNoZWRMaW5lVG8odGhyZWVYLCB0aHJlZVkpOwogICAgICBfdGhpcy5jdHhMaW5lLmRhc2hlZExpbmVUbyhmb3VyWCwgZm91clkpOwogICAgICBfdGhpcy5jdHhMaW5lLmNsb3NlUGF0aCgpOwogICAgICBfdGhpcy5jdHhMaW5lLmxpbmVXaWR0aCA9IDQ7CiAgICAgIF90aGlzLmN0eExpbmUuc3Ryb2tlU3R5bGUgPSAicmVkIjsKICAgICAgX3RoaXMuY3R4TGluZS5zdHJva2UoKTsKICAgIH0sCiAgICAvLyDkuK3pl7Tpg6jliIbku45iYWJ5bG9u57uE5Lu26L+B56e75YiwaG9tZTYKICAgIGFzeW5jIHVwZGF0ZU1pbmlNYXAoc2t1LCBpbWcsIG5hbWUpIHsKICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgaWYgKHNrdSAhPSB0aGlzLnNrdSkgewogICAgICAgIF90aGlzLnNrdSA9IHNrdTsKICAgICAgICBfdGhpcy5mb3hwc2RPYmogPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgLy8gX3RoaXMuY2FudmFzU2hvd0ZsYWcgPSB0cnVlOwogICAgICAgICAgLy8gX3RoaXMuaW1nU2hvd0ZsYWcxID0gZmFsc2U7CgogICAgICAgICAgX3RoaXMuJHJlZnMuZm94Y29udGFpbmVyLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgbGV0IGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgIGQuc2V0QXR0cmlidXRlKCJpZCIsICJjb250YWluZXIiKTsKICAgICAgICAgIF90aGlzLiRyZWZzLmZveGNvbnRhaW5lci5hcHBlbmRDaGlsZChkKTsKCiAgICAgICAgICBsZXQgZm94cHNkT2JqID0gbmV3IGZveHBzZCgiY29udGFpbmVyIiwgewogICAgICAgICAgICBwc2RTa3VzOiBbc2t1XSwKICAgICAgICAgICAgZ29vZHNTa3U6ICIxNjQxMzU3NDMzODMzNTYwOTM3IiwKICAgICAgICAgICAgLy/or7fli7/nlKjkuo7nlJ/kuqfnjq/looMg77yM5rWL6K+VdG9rZW7kvJrkuI3lrprmnJ/ova7mjaIKICAgICAgICAgICAgdG9rZW46CiAgICAgICAgICAgICAgIkJhc2ljIDUzZDQwNzJjODcxMzk2NzVkNjQ2YjRkNDI4ZTZiYjAwNDhlZTdkYjdlNzcxNmZkMDkwY2ZkYmZkNjkyY2U4ZjkiLAogICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXNvbHZlKGZveHBzZE9iaik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLmZveHBzZE9iai5jb21tYW5kKHsKICAgICAgICAgICAgLy8gY2FudmFzOiBlbGVDYW52YXMsCiAgICAgICAgICAgIGltYWdlOiBpbWcsCiAgICAgICAgICAgIC8v5Lyg5aSa5Liq6KGo56S65pu/5o2i5aSa5Liq5Zu+5bGC77yM5L2/55So6Iux5paH6YCX5Y+36ZqU5byACiAgICAgICAgICAgIGxheWVyczogbmFtZSwKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIF90aGlzLmNhbnZhc1Nob3dGbGFnID0gdHJ1ZTsKICAgICAgICAgICAgX3RoaXMuaW1nU2hvd0ZsYWcxID0gZmFsc2U7CiAgICAgICAgICAgIF90aGlzLmltZ1Nob3dGbGFnMiA9IHRydWU7CiAgICAgICAgICAgIF90aGlzLmltZ1Nob3dGbGFnMyA9IGZhbHNlOwogICAgICAgICAgICAvLyBfdGhpcy5zbGlkZUZsYWcgPSB0cnVlOwogICAgICAgICAgfSk7CiAgICAgICAgfSwgNTAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoX3RoaXMuZm94cHNkT2JqICYmIF90aGlzLmZveHBzZE9iai5sb2FkKSB7CiAgICAgICAgICBfdGhpcy5mb3hwc2RPYmouY29tbWFuZCh7CiAgICAgICAgICAgIGltYWdlOiBpbWcsCiAgICAgICAgICAgIC8v5Lyg5aSa5Liq6KGo56S65pu/5o2i5aSa5Liq5Zu+5bGC77yM5L2/55So6Iux5paH6YCX5Y+36ZqU5byACiAgICAgICAgICAgIGxheWVyczogbmFtZSwKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIF90aGlzLmNhbnZhc1Nob3dGbGFnID0gdHJ1ZTsKICAgICAgICAgICAgLy8gX3RoaXMuc2xpZGVGbGFnID0gdHJ1ZTsKICAgICAgICAgICAgX3RoaXMuaW1nU2hvd0ZsYWcxID0gZmFsc2U7CiAgICAgICAgICAgIF90aGlzLmltZ1Nob3dGbGFnMiA9IHRydWU7CiAgICAgICAgICAgIF90aGlzLmltZ1Nob3dGbGFnMyA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5Lit6Ze06YOo5YiG5LuOYmFieWxvbue7hOS7tui/geenu+WIsGhvbWU2CiAgICAvLyDlm77niYflnKjoh6rpgILlupTlkozljp/lsLrlr7jkuYvpl7TovazmjaLnmoQg5Ye95pWw5bCB6KOFCiAgICBzd2l0Y2hJbWdTaG93KCkgewogICAgICAvLyBmbGFnIDHoh6rpgILlupQgMuWOn+WwuuWvuAogICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICBsZXQgdzMwMCA9IF90aGlzLmltZ0FycmF5WzBdOwogICAgICBsZXQgaDMwMCA9IF90aGlzLmltZ0FycmF5WzFdOwogICAgICBsZXQgbW9kZWxIZWlnaHQgPSBfdGhpcy5tb2RlbEFycmF5WzFdOyAvL3ZhcgogICAgICBsZXQgbW9kZWxXaWR0aCA9IF90aGlzLm1vZGVsQXJyYXlbMF07IC8vdmFyCiAgICAgIGxldCByd2lkdGgsIHdoZWlnaHQ7CiAgICAgIGlmIChfdGhpcy5pbWdTaG93RmxhZyA9PSAxKSB7CiAgICAgICAgX3RoaXMuaW1nTW92ZVggPSAwOwogICAgICAgIF90aGlzLmltZ01vdmVZID0gMDsKICAgICAgICAvLyDliKTmlq0g5Zu+54mH55qE5a695bqm5ZKM6auY5bqm5ZOq5Liq5pu05YC85pu05aSnCiAgICAgICAgaWYgKF90aGlzLmltZ1B4V2lkdGggPiBfdGhpcy5pbWdQeEhlaWdodCkgewogICAgICAgICAgX3RoaXMuaW1nU2NhbGUgPSAxOwogICAgICAgICAgX3RoaXMuaW1nSW5pdFdpZHRoID0gTWF0aC5mbG9vcihfdGhpcy5rTXVsdGlwbGUgKiBfdGhpcy5jbGlwV2lkdGgpOwogICAgICAgICAgX3RoaXMuaW1nSW5pdEhlaWdodCA9IE1hdGguZmxvb3IoCiAgICAgICAgICAgICgoX3RoaXMua011bHRpcGxlICogX3RoaXMuY2xpcEhlaWdodCkgLyB0aGlzLmltZ1B4V2lkdGgpICoKICAgICAgICAgICAgICBfdGhpcy5pbWdQeEhlaWdodAogICAgICAgICAgKTsKICAgICAgICAgIF90aGlzLmltZ0luaXRYID0gMDsKICAgICAgICAgIF90aGlzLmltZ0luaXRZID0gTWF0aC5mbG9vcigKICAgICAgICAgICAgKF90aGlzLmNsaXBIZWlnaHQgKiBfdGhpcy5rTXVsdGlwbGUgLSBfdGhpcy5pbWdJbml0SGVpZ2h0KSAvIDIKICAgICAgICAgICk7CgogICAgICAgICAgX3RoaXMudmFsdWUgPSBwYXJzZUludChfdGhpcy5pbWdTY2FsZSAqIDEwMCk7CiAgICAgICAgICBfdGhpcy5vbGRWYWx1ZSA9IF90aGlzLnZhbHVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDpq5jluqblpKfkuo7lrr3luqYKICAgICAgICAgIF90aGlzLmltZ0luaXRIZWlnaHQgPSBfdGhpcy5rTXVsdGlwbGUgKiBfdGhpcy5jbGlwSGVpZ2h0OwogICAgICAgICAgX3RoaXMuaW1nSW5pdFdpZHRoID0gTWF0aC5mbG9vcigKICAgICAgICAgICAgKChfdGhpcy5rTXVsdGlwbGUgKiBfdGhpcy5jbGlwV2lkdGgpIC8gdGhpcy5pbWdQeEhlaWdodCkgKgogICAgICAgICAgICAgIF90aGlzLmltZ1B4V2lkdGgKICAgICAgICAgICk7CiAgICAgICAgICBfdGhpcy5pbWdJbml0WSA9IDA7CiAgICAgICAgICBfdGhpcy5pbWdJbml0WCA9IE1hdGguZmxvb3IoCiAgICAgICAgICAgICAgKF90aGlzLmNsaXBXaWR0aCAqIF90aGlzLmtNdWx0aXBsZSAtIF90aGlzLmltZ0luaXRXaWR0aCkgLyAyCiAgICAgICAgICApOwoKICAgICAgICAgIF90aGlzLmltZ1NjYWxlID0gMTsKICAgICAgICAgIF90aGlzLnZhbHVlID0gcGFyc2VJbnQoX3RoaXMuaW1nU2NhbGUgKiAxMDApOwogICAgICAgICAgX3RoaXMub2xkVmFsdWUgPSBfdGhpcy52YWx1ZTsKICAgICAgICB9CiAgICAgICAgX3RoaXMuY2FsY3VsYXRlV2lkdGggPSBfdGhpcy5pbWdJbml0V2lkdGg7CiAgICAgICAgX3RoaXMuY2FsY3VsYXRlSGVpaHQgPSBfdGhpcy5pbWdJbml0SGVpZ2h0OwogICAgICB9IGVsc2UgaWYgKF90aGlzLmltZ1Nob3dGbGFnID09IDIpIHsKICAgICAgICBfdGhpcy5pbWdNb3ZlWCA9IDA7CiAgICAgICAgX3RoaXMuaW1nTW92ZVkgPSAwOwoKICAgICAgICBfdGhpcy5pbWdJbml0V2lkdGggPSBNYXRoLmZsb29yKAogICAgICAgICAgICBfdGhpcy5ib3hXaWR0aCAqIChfdGhpcy5pbWdBcnJheVswXSAvIF90aGlzLm1vZGVsQXJyYXlbMF0pCiAgICAgICAgKTsKICAgICAgICBfdGhpcy5pbWdJbml0SGVpZ2h0ID0gTWF0aC5mbG9vcigKICAgICAgICAgICAgX3RoaXMuYm94SGVpZ2h0ICogKF90aGlzLmltZ0FycmF5WzFdIC8gX3RoaXMubW9kZWxBcnJheVsxXSkKICAgICAgICApOwogICAgICAgIF90aGlzLmNhbGN1bGF0ZVdpZHRoID0gX3RoaXMuaW1nSW5pdFdpZHRoOwogICAgICAgIF90aGlzLmNhbGN1bGF0ZUhlaWh0ID0gX3RoaXMuaW1nSW5pdEhlaWdodDsKICAgICAgICBpZiAoX3RoaXMuaW1nLndpZHRoID4gX3RoaXMuaW1nLmhlaWdodCkgewogICAgICAgICAgX3RoaXMuaW1nU2NhbGUgPSAxOwogICAgICAgICAgX3RoaXMudmFsdWUgPSBwYXJzZUludChfdGhpcy5pbWdTY2FsZSAqIDEwMCk7CiAgICAgICAgICBfdGhpcy5vbGRWYWx1ZSA9IF90aGlzLnZhbHVlOwogICAgICAgICAgLy8g5pS55bC65a+45q+UCiAgICAgICAgICByd2lkdGggPSAodzMwMCAvIG1vZGVsV2lkdGgpICogdGhpcy5ib3hXaWR0aDsKICAgICAgICAgIHdoZWlnaHQgPSAoaDMwMCAvIG1vZGVsSGVpZ2h0KSAqIHRoaXMuYm94SGVpZ2h0OwogICAgICAgICAgX3RoaXMuaW1nSW5mby5oZWlnaHQgPSB3aGVpZ2h0ICogX3RoaXMua011bHRpcGxlOwogICAgICAgICAgX3RoaXMuaW1nSW5mby53aWR0aCA9IHJ3aWR0aCAqIF90aGlzLmtNdWx0aXBsZTsKICAgICAgICAgIF90aGlzLmltZ1ggPQogICAgICAgICAgICAoX3RoaXMuY2xpcFdpZHRoICogX3RoaXMua011bHRpcGxlIC0gX3RoaXMuaW1nSW5mby53aWR0aCkgLyAyOwogICAgICAgICAgX3RoaXMuaW1nWSA9CiAgICAgICAgICAgIChfdGhpcy5jbGlwSGVpZ2h0ICogX3RoaXMua011bHRpcGxlIC0gX3RoaXMuaW1nSW5mby5oZWlnaHQpIC8gMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuaW1nU2NhbGUgPSAxOwogICAgICAgICAgX3RoaXMudmFsdWUgPSBwYXJzZUludChfdGhpcy5pbWdTY2FsZSAqIDEwMCk7CiAgICAgICAgICBfdGhpcy5vbGRWYWx1ZSA9IF90aGlzLnZhbHVlOwoKICAgICAgICAgIC8vIOaUueWwuuWvuOavlAogICAgICAgICAgcndpZHRoID0gKHczMDAgLyBtb2RlbFdpZHRoKSAqIHRoaXMuYm94V2lkdGg7CgogICAgICAgICAgd2hlaWdodCA9IChoMzAwIC8gbW9kZWxIZWlnaHQpICogdGhpcy5ib3hIZWlnaHQ7CgogICAgICAgICAgX3RoaXMuaW1nSW5mby5oZWlnaHQgPSB3aGVpZ2h0ICogX3RoaXMua011bHRpcGxlOwogICAgICAgICAgX3RoaXMuaW1nSW5mby53aWR0aCA9IHJ3aWR0aCAqIF90aGlzLmtNdWx0aXBsZTsKICAgICAgICAgIF90aGlzLmltZ1ggPQogICAgICAgICAgICAoX3RoaXMuY2xpcFdpZHRoICogX3RoaXMua011bHRpcGxlIC0gX3RoaXMuaW1nSW5mby53aWR0aCkgLyAyOwogICAgICAgICAgX3RoaXMuaW1nWSA9CiAgICAgICAgICAgIChfdGhpcy5jbGlwSGVpZ2h0ICogX3RoaXMua011bHRpcGxlIC0gX3RoaXMuaW1nSW5mby5oZWlnaHQpIC8gMjsKICAgICAgICB9CiAgICAgICAgX3RoaXMuZHJhd0ltYWdlKCk7CiAgICAgIH0KICAgICAgLy8gIF90aGlzLmRyYXdJbWFnZSgpOwogICAgfSwKICAgIHN3aXRjaFBpY3R1cmUoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCIxMjMiKTsKICAgICAgdGhpcy5pbWdTaG93RmxhZzEgPSB0cnVlOwogICAgICB0aGlzLmNhbnZhc1Nob3dGbGFnID0gZmFsc2U7CiAgICAgIC8vIHRoaXMuc2xpZGVGbGFnID0gZmFsc2U7CiAgICAgIHRoaXMuaW1nU2hvd0ZsYWcyID0gZmFsc2U7CiAgICAgIHRoaXMuaW1nU2hvd0ZsYWczID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDov5Tlm57mjInpkq4KICAgIHJldHVybk9iaigpIHsKICAgICAgdGhpcy5pbWdTaG93RmxhZzEgPSBmYWxzZTsKICAgICAgdGhpcy5jYW52YXNTaG93RmxhZyA9IHRydWU7CiAgICAgIC8vIHRoaXMuc2xpZGVGbGFnID0gdHJ1ZTsKICAgICAgdGhpcy5pbWdTaG93RmxhZzIgPSB0cnVlOwogICAgICB0aGlzLmltZ1Nob3dGbGFnMyA9IGZhbHNlOwogICAgICAvLyB0aGlzLmltZ1Nob3dGbGFnMyA9IHRydWUKICAgICAgLy8gY29uc29sZS5sb2coIueCueWHu+S6hui/lOWbniIpOwogICAgfSwKICAgIC8vIHNsaWRlciBjaGFuZ2Xkuovku7YKICAgIHNsaWRlcklucHV0KHYpIHsKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLm1vZGVsSWQgPT0gMCB8fCBfdGhpcy5tb2RlbElkID09IDEwMDAxKSB7CiAgICAgICAgX3RoaXMuc2xpZGVySGFuZGxlcih2KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0sCiAgICBzbGlkZXJDaGFuZ2UodikgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXMubW9kZWxJZCA9PSAwIHx8IF90aGlzLm1vZGVsSWQgPT0gMTAwMDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXMuc2xpZGVySGFuZGxlcih2KTsKICAgICAgfQogICAgfSwKICAgIHNsaWRlckhhbmRsZXIodikgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7CiAgICAgIC8vIGlmICh0aGlzLmlzUmVwZWF0ID09IDApIHsKICAgICAgLy8gICB0aGlzLnJlcGF0RmxhZyA9IDA7CiAgICAgIC8vIH0gZWxzZSB7CiAgICAgIC8vICAgdGhpcy5yZXBhdEZsYWcgPSAzOwogICAgICAvLyB9CgogICAgICBpZiAoX3RoaXMubW9kZWxJZCA9PSAwIHx8IF90aGlzLm1vZGVsSWQgPT0gMTAwMDEpIHsKCiAgICAgICAgbGV0IHpwb2ludCA9IG5ldyBmYWJyaWMuUG9pbnQoCiAgICAgICAgICAgIF90aGlzLmNsaXBXaWR0aCAvIDIsCiAgICAgICAgICAgIF90aGlzLmNsaXBIZWlnaHQgLyAyCiAgICAgICAgKTsgLy8g5Lit5b+D54K5CiAgICAgICAgX3RoaXMuaW5pdENhbnZhcy56b29tVG9Qb2ludCh6cG9pbnQsIHYgLyAxMDApOwoKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5pbWdTY2FsZSA9IHYgLyAxMDA7CiAgICAgICAgaWYgKF90aGlzLm1vZGVsSWQgPT0gMTAwMDEpIHsKICAgICAgICAgIF90aGlzLmltZ1NjYWxlID0gX3RoaXMuaW1nU2NhbGUgLyAzOwogICAgICAgIH0KICAgICAgICBfdGhpcy56b29tSW4oTWF0aC5yb3VuZCh2ICogMSkgLyAxMDApOwogICAgICB9CiAgICB9LAogICAgZ29zKGl0ZW0pIHsKICAgICAgLy8gdGhpcy4kc3RvcmUuc3RhdGUub3B0aW9uID0gaXRlbQogICAgICAvLyB0aGlzLiRzdG9yZS5zdGF0ZS5ibGFuayA9ICJzY3JlZW4iOwoKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvc3RvcmUnLAogICAgICAgIHF1ZXJ5OiB7cTogaXRlbX0KICAgICAgfSk7CgogICAgfSwKICAgIGxvYWRDYW52YXMoKSB7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLk5hdmlnYXRpb25faW4gPSAiTmF2aWdhdGlvbl91cCI7CiAgICAgIHRoaXMuY29udGVudEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImNlbnRlckltZyIpWzBdOwoKICAgICAgLy8g5pWI5p6c5Zu+5paw5aKebW91bnRlZAoKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzOwogICAgICAvLyBsZXQgYXJyID0gW107CiAgICAgIC8vIOeUu+i9ruW7k+e6vwogICAgICAvLyAgZGVidWdnZXI7CiAgICAgIHRoaXMubGluZUNhbnZhcyA9IHRoaXMuJHJlZnMubGluZUNhbnZhczsKICAgICAgdGhpcy5jdHhMaW5lID0gdGhpcy5saW5lQ2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgIC8vIOWkp+eahGNhbnZhcwogICAgICB0aGlzLm15Q2FudmFzID0gbmV3IGZhYnJpYy5DYW52YXMoImNhbnZhc0JveCIsIHsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICIjZmZmIiwKICAgICAgICBpc0RyYXdpbmdNb2RlOiBmYWxzZSwKICAgICAgfSk7CgogICAgICBjb25zdCBjb2xvciA9ICJyZ2JhKDAsMCwwLDApIjsKICAgICAgdGhpcy5teUNhbnZhcy5zZXRCYWNrZ3JvdW5kQ29sb3IoY29sb3IpOwogICAgICAvLyDlv4Xpobvph43mlrDmuLLmn5PnlLvluIPvvIzku6XmmL7npLrmlrDnmoTog4zmma8KICAgICAgdGhpcy5teUNhbnZhcy5yZW5kZXJBbGwoKTsKCiAgICAgIHRoaXMubXlDYW52YXMuc2V0V2lkdGgoX3RoaXMuY2xpcFdpZHRoKTsKICAgICAgdGhpcy5teUNhbnZhcy5zZXRIZWlnaHQoX3RoaXMuY2xpcEhlaWdodCk7CgogICAgICB0aGlzLm15Q2FudmFzLm9uKHsKICAgICAgICAvLyDpvKDmoIfmu5rliqjnvKnmlL4KICAgICAgICAibW91c2U6d2hlZWwiOiAoZSkgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgLy8gbGV0IG9ianMgPSBfdGhpcy5teUNhbnZhcy5nZXRPYmplY3RzKCk7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgKF90aGlzLmltZ1NjYWxlID4gMC4yIHx8IGV2ZW50LmRlbHRhWSA8IDApICYmCiAgICAgICAgICAgICAgKF90aGlzLmltZ1NjYWxlIDwgMiB8fCBldmVudC5kZWx0YVkgPiAwKQogICAgICAgICAgKSB7CiAgICAgICAgICAgIF90aGlzLmltZ1NjYWxlID0KICAgICAgICAgICAgICAgIChldmVudC5kZWx0YVkgPiAwID8gLTAuMSA6IDAuMSkgKyBfdGhpcy5teUNhbnZhcy5nZXRab29tKCk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKF90aGlzLm15Q2FudmFzLmdldFpvb20oKSk7CiAgICAgICAgICAgIF90aGlzLmltZ1NjYWxlID0gTWF0aC5tYXgoMC4yLCBfdGhpcy5pbWdTY2FsZSk7IC8v5pyA5bCP5Li65Y6f5p2l55qEMi8xMAogICAgICAgICAgICBfdGhpcy5pbWdTY2FsZSA9IE1hdGgubWluKDIsIF90aGlzLmltZ1NjYWxlKTsgLy/mnIDlpKfmmK/ljp/mnaXnmoQy5YCNCiAgICAgICAgICAgIF90aGlzLmltZ1NjYWxlID0gTWF0aC5yb3VuZChfdGhpcy5pbWdTY2FsZSAqIDEwMDAwKSAvIDEwMDAwOwogICAgICAgICAgICBsZXQgaVNjYWxlID0gMTsKICAgICAgICAgICAgaWYgKGV2ZW50LmRlbHRhWSA+IDApIHsKICAgICAgICAgICAgICAvLyDnvKnlsI8gIOa7muS5i+WQjiDmu5rkuYvliY0KICAgICAgICAgICAgICBpU2NhbGUgPSBfdGhpcy5pbWdTY2FsZSAvIChfdGhpcy5pbWdTY2FsZSArIDAuMSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8g5pS+5aSnCiAgICAgICAgICAgICAgaVNjYWxlID0gX3RoaXMuaW1nU2NhbGUgLyAoX3RoaXMuaW1nU2NhbGUgLSAwLjEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF90aGlzLnZhbHVlcyA9IF90aGlzLmltZ1NjYWxlICogMTAwOwogICAgICAgICAgICAvLyBfdGhpcy5yZXBhdEZsYWcgPSAzOwogICAgICAgICAgICAvLyBpZiAodGhpcy5pc1JlcGVhdCA9PSAwKSB7CiAgICAgICAgICAgIC8vICAgdGhpcy5yZXBhdEZsYWcgPSAwOwogICAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgICAvLyAgIHRoaXMucmVwYXRGbGFnID0gMzsKICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpU2NhbGUpOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnJlcGF0RmxhZyk7CiAgICAgICAgICAgIF90aGlzLnpvb21JbihpU2NhbGUpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgIH0pOwoKICAgICAgLy8g6byg5qCH56e75Yqo5LqL5Lu2CiAgICAgIGxldCBheCwgYXk7CiAgICAgIF90aGlzLm15Q2FudmFzLm9uKCJvYmplY3Q6bW92aW5nIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAvLyBfdGhpcy5yZXBhdEZsYWcgPSAzOwogICAgICAgIC8vIGlmICh0aGlzLmlzUmVwZWF0ID09IDApIHsKICAgICAgICAvLyAgIHRoaXMucmVwYXRGbGFnID0gMDsKICAgICAgICAvLyB9IGVsc2UgewogICAgICAgIC8vICAgdGhpcy5yZXBhdEZsYWcgPSAzOwogICAgICAgIC8vIH0KICAgICAgICAvLyDlt6blj7PlgY/np7sKICAgICAgICBpZiAoCiAgICAgICAgICAgIGUudGFyZ2V0LmxlZnQgPAogICAgICAgICAgICBfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuY2xpcFdpZHRoIC8gMiAvIF90aGlzLmltZ1NjYWxlCiAgICAgICAgKSB7CiAgICAgICAgICAvLwogICAgICAgICAgZS50YXJnZXQubGVmdCA9CiAgICAgICAgICAgICAgX3RoaXMuY2xpcFdpZHRoIC8gMiAtIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZTsKICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICBlLnRhcmdldC5sZWZ0ID4KICAgICAgICAgICAgX3RoaXMuY2xpcFdpZHRoIC8gMiArIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZQogICAgICAgICkgewogICAgICAgICAgZS50YXJnZXQubGVmdCA9CiAgICAgICAgICAgICAgX3RoaXMuY2xpcFdpZHRoIC8gMiArIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZTsKICAgICAgICB9CiAgICAgICAgLy8g5LiK5LiL5YGP56e7CiAgICAgICAgaWYgKAogICAgICAgICAgICBlLnRhcmdldC50b3AgPAogICAgICAgICAgICBfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuY2xpcFdpZHRoIC8gMiAvIF90aGlzLmltZ1NjYWxlCiAgICAgICAgKSB7CiAgICAgICAgICAvLwogICAgICAgICAgZS50YXJnZXQudG9wID0KICAgICAgICAgICAgICBfdGhpcy5jbGlwV2lkdGggLyAyIC0gX3RoaXMuY2xpcFdpZHRoIC8gMiAvIF90aGlzLmltZ1NjYWxlOwogICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgIGUudGFyZ2V0LnRvcCA+CiAgICAgICAgICAgIF90aGlzLmNsaXBXaWR0aCAvIDIgKyBfdGhpcy5jbGlwV2lkdGggLyAyIC8gX3RoaXMuaW1nU2NhbGUKICAgICAgICApIHsKICAgICAgICAgIGUudGFyZ2V0LnRvcCA9CiAgICAgICAgICAgICAgX3RoaXMuY2xpcFdpZHRoIC8gMiArIF90aGlzLmNsaXBXaWR0aCAvIDIgLyBfdGhpcy5pbWdTY2FsZTsKICAgICAgICB9CiAgICAgICAgaWYgKF90aGlzLmRhdGExICYmIF90aGlzLmRhdGExLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgICBheCA9IGUudGFyZ2V0LmxlZnQgLSBfdGhpcy5tb3ZleHkubGVmdDsKICAgICAgICAgIGF5ID0gZS50YXJnZXQudG9wIC0gX3RoaXMubW92ZXh5LnRvcDsKICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAuZm9yRWFjaCgocmVzLCBpbmRleCkgPT4gewogICAgICAgICAgICByZXMubGVmdCA9IF90aGlzLmRhdGExW2luZGV4XS5sZWZ0ICsgYXg7CiAgICAgICAgICAgIHJlcy50b3AgPSBfdGhpcy5kYXRhMVtpbmRleF0udG9wICsgYXk7CiAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLnJlbW92ZShyZXMpOwogICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQocmVzKTsKICAgICAgICAgIH0pOwogICAgICAgICAgLy8gbGV0IHRpbWVOb3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgIC8vIGlmICh0aW1lTm93IC0gX3RoaXMudGltZU91dCA8IDEwMCkgewogICAgICAgICAgLy8gICByZXR1cm47CiAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgLy8gICBfdGhpcy50aW1lT3V0ID0gdGltZU5vdzsKICAgICAgICAgIC8vIH0KCiAgICAgICAgICBfdGhpcy5mYWJPYmogPSBlLnRhcmdldDsKICAgICAgICAgIGxldCB3aWR0aE51bUxlZnQgPSBNYXRoLmNlaWwoCiAgICAgICAgICAgICAgKChfdGhpcy5mYWJPYmoubGVmdCAtIF90aGlzLmNsaXBXaWR0aCAvIDIpICogX3RoaXMuaW1nU2NhbGUgKwogICAgICAgICAgICAgICAgICBfdGhpcy5jbGlwV2lkdGggLyAyIC0KICAgICAgICAgICAgICAgICAgKF90aGlzLmZhYk9iai53aWR0aCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkgLyAyKSAvCiAgICAgICAgICAgICAgKF90aGlzLmZhYk9iai53aWR0aCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkKICAgICAgICAgICk7CiAgICAgICAgICBsZXQgd2lkdGhOdW1SaWdodCA9IE1hdGguY2VpbCgKICAgICAgICAgICAgICAoKF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5mYWJPYmoubGVmdCkgKiBfdGhpcy5pbWdTY2FsZSArCiAgICAgICAgICAgICAgICAgIF90aGlzLmNsaXBXaWR0aCAvIDIgLQogICAgICAgICAgICAgICAgICAoX3RoaXMuZmFiT2JqLndpZHRoICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlKSAvIDIpIC8KICAgICAgICAgICAgICAoX3RoaXMuZmFiT2JqLndpZHRoICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlKQogICAgICAgICAgKTsKICAgICAgICAgIGxldCBoZWlnaHROdW1Ub3AgPSBNYXRoLmNlaWwoCiAgICAgICAgICAgICAgKChfdGhpcy5mYWJPYmoudG9wIC0gX3RoaXMuY2xpcFdpZHRoIC8gMikgKiBfdGhpcy5pbWdTY2FsZSArCiAgICAgICAgICAgICAgICAgIF90aGlzLmNsaXBXaWR0aCAvIDIgLQogICAgICAgICAgICAgICAgICAoX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkgLyAyKSAvCiAgICAgICAgICAgICAgKF90aGlzLmZhYk9iai5oZWlnaHQgKiBfdGhpcy5mYWJPYmouc2NhbGVYICogX3RoaXMuaW1nU2NhbGUpCiAgICAgICAgICApOwogICAgICAgICAgbGV0IGhlaWdodE51bUJvdHRvbSA9IE1hdGguY2VpbCgKICAgICAgICAgICAgICAoKF90aGlzLmNsaXBXaWR0aCAvIDIgLSBfdGhpcy5mYWJPYmoudG9wKSAqIF90aGlzLmltZ1NjYWxlICsKICAgICAgICAgICAgICAgICAgX3RoaXMuY2xpcFdpZHRoIC8gMiAtCiAgICAgICAgICAgICAgICAgIChfdGhpcy5mYWJPYmouaGVpZ2h0ICogX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmltZ1NjYWxlKSAvIDIpIC8KICAgICAgICAgICAgICAoX3RoaXMuZmFiT2JqLmhlaWdodCAqIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5pbWdTY2FsZSkKICAgICAgICAgICk7CiAgICAgICAgICBfdGhpcy5sZWZ0TnVtID0gMDsKICAgICAgICAgIF90aGlzLnJpZ2h0TnVtID0gMDsKICAgICAgICAgIF90aGlzLnRvcE51bSA9IDA7CiAgICAgICAgICBfdGhpcy5ib3R0b210TnVtID0gMDsKICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAuZm9yRWFjaCgocmVzKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXMubGVmdCA8IGUudGFyZ2V0LmxlZnQgJiYgcmVzLnRvcCA9PSBlLnRhcmdldC50b3ApIHsKICAgICAgICAgICAgICBfdGhpcy5sZWZ0TnVtID0gX3RoaXMubGVmdE51bSArIDE7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmxlZnQgPiBlLnRhcmdldC5sZWZ0ICYmIHJlcy50b3AgPT0gZS50YXJnZXQudG9wKSB7CiAgICAgICAgICAgICAgX3RoaXMucmlnaHROdW0gPSBfdGhpcy5yaWdodE51bSArIDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlcy50b3AgPCBlLnRhcmdldC50b3AgJiYgcmVzLmxlZnQgPT0gZS50YXJnZXQubGVmdCkgewogICAgICAgICAgICAgIF90aGlzLnRvcE51bSA9IF90aGlzLnRvcE51bSArIDE7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLnRvcCA+IGUudGFyZ2V0LnRvcCAmJiByZXMubGVmdCA9PSBlLnRhcmdldC5sZWZ0KSB7CiAgICAgICAgICAgICAgX3RoaXMuYm90dG9tdE51bSA9IF90aGlzLmJvdHRvbXROdW0gKyAxOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBjb25zdCBpbWdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgICAgaW1nRWwuY3Jvc3NPcmlnaW4gPSAiQW5vbnltb3VzIjsKICAgICAgICAgIGltZ0VsLnNyYyA9IF90aGlzLmltZy5zcmM7CiAgICAgICAgICBpZiAoX3RoaXMucmVwYXRGbGFnID09IDEpIHsKICAgICAgICAgICAgaWYgKHdpZHRoTnVtTGVmdCA+IF90aGlzLmxlZnROdW0pIHsKICAgICAgICAgICAgICBsZXQgdCA9IF90aGlzLmxlZnROdW0gKyAxOwogICAgICAgICAgICAgIF90aGlzLmxlZnROdW0gPSB3aWR0aE51bUxlZnQ7CiAgICAgICAgICAgICAgZm9yIChsZXQgbG4gPSB0OyBsbiA8PSB3aWR0aE51bUxlZnQ7IGxuKyspIHsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPQogICAgICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0IC0KICAgICAgICAgICAgICAgICAgICBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLndpZHRoICogbG47CiAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy50b3AgPSBfdGhpcy5mYWJPYmoudG9wOwogICAgICAgICAgICAgICAgbGV0IGltZ3MgPSBuZXcgZmFicmljLkltYWdlKF90aGlzLmltZywgewogICAgICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgICAgIHNjYWxlWTogX3RoaXMuZmFiT2JqLnNjYWxlWSwKICAgICAgICAgICAgICAgICAgdG9wOiBfdGhpcy5tb3Zlcy50b3AsCiAgICAgICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKGltZ3MpOwogICAgICAgICAgICAgICAgX3RoaXMucmVwYXRHcm91cC5wdXNoKGltZ3MpOwogICAgICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmV4eS5sZWZ0ID0gZS50YXJnZXQubGVmdDsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmV4eS50b3AgPSBlLnRhcmdldC50b3A7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHdpZHRoTnVtUmlnaHQgPiBfdGhpcy5yaWdodE51bSkgewogICAgICAgICAgICAgIGxldCB0MSA9IF90aGlzLnJpZ2h0TnVtICsgMTsKICAgICAgICAgICAgICBfdGhpcy5yaWdodE51bSA9IHdpZHRoTnVtUmlnaHQ7CiAgICAgICAgICAgICAgZm9yIChsZXQgbG4gPSB0MTsgbG4gPD0gd2lkdGhOdW1SaWdodDsgbG4rKykgewogICAgICAgICAgICAgICAgX3RoaXMubW92ZXMubGVmdCA9CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLmxlZnQgKwogICAgICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBsbjsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9IF90aGlzLmZhYk9iai50b3A7CiAgICAgICAgICAgICAgICBsZXQgaW1ncyA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgICAgIHNjYWxlWDogX3RoaXMuZmFiT2JqLnNjYWxlWCwKICAgICAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgICAgICB0b3A6IF90aGlzLm1vdmVzLnRvcCwKICAgICAgICAgICAgICAgICAgbGVmdDogX3RoaXMubW92ZXMubGVmdCwKICAgICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoaW1ncyk7CiAgICAgICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goaW1ncyk7CiAgICAgICAgICAgICAgICBfdGhpcy5kYXRhMSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMucmVwYXRHcm91cCkpOwogICAgICAgICAgICAgICAgX3RoaXMubW92ZXh5LmxlZnQgPSBlLnRhcmdldC5sZWZ0OwogICAgICAgICAgICAgICAgX3RoaXMubW92ZXh5LnRvcCA9IGUudGFyZ2V0LnRvcDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMucmVwYXRGbGFnID09IDIpIHsKICAgICAgICAgICAgaWYgKGhlaWdodE51bVRvcCA+IF90aGlzLnRvcE51bSkgewogICAgICAgICAgICAgIGxldCB0ID0gX3RoaXMudG9wTnVtICsgMTsKICAgICAgICAgICAgICBfdGhpcy50b3BOdW0gPSBoZWlnaHROdW1Ub3A7CiAgICAgICAgICAgICAgZm9yIChsZXQgbG4gPSB0OyBsbiA8PSBoZWlnaHROdW1Ub3A7IGxuKyspIHsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPSBfdGhpcy5mYWJPYmoubGVmdDsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnRvcCAtCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBsbjsKICAgICAgICAgICAgICAgIGxldCBpbWdzID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICAgICAgc2NhbGVYOiBfdGhpcy5mYWJPYmouc2NhbGVYLAogICAgICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgICAgICBsZWZ0OiBfdGhpcy5tb3Zlcy5sZWZ0LAogICAgICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChpbWdzKTsKICAgICAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChpbWdzKTsKICAgICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkubGVmdCA9IGUudGFyZ2V0LmxlZnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkudG9wID0gZS50YXJnZXQudG9wOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChoZWlnaHROdW1Cb3R0b20gPiBfdGhpcy5ib3R0b210TnVtKSB7CiAgICAgICAgICAgICAgbGV0IHQxID0gX3RoaXMuYm90dG9tdE51bSArIDE7CiAgICAgICAgICAgICAgX3RoaXMuYm90dG9tdE51bSA9IGhlaWdodE51bUJvdHRvbTsKICAgICAgICAgICAgICBmb3IgKGxldCBsbiA9IHQxOyBsbiA8PSBoZWlnaHROdW1Cb3R0b207IGxuKyspIHsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLmxlZnQgPSBfdGhpcy5mYWJPYmoubGVmdDsKICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnRvcCArCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWSAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBsbjsKICAgICAgICAgICAgICAgIGxldCBpbWdzID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICAgICAgc2NhbGVYOiBfdGhpcy5mYWJPYmouc2NhbGVYLAogICAgICAgICAgICAgICAgICBzY2FsZVk6IF90aGlzLmZhYk9iai5zY2FsZVksCiAgICAgICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgICAgICBsZWZ0OiBfdGhpcy5tb3Zlcy5sZWZ0LAogICAgICAgICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF90aGlzLm15Q2FudmFzLmFkZChpbWdzKTsKICAgICAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChpbWdzKTsKICAgICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkubGVmdCA9IGUudGFyZ2V0LmxlZnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkudG9wID0gZS50YXJnZXQudG9wOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5yZXBhdEZsYWcgPT0gMykgewogICAgICAgICAgICAvLyBsZXQgc2poID0gX3RoaXMubGVmdE51bSArIDEgKyBfdGhpcy5yaWdodE51bTsKICAgICAgICAgICAgLy8gbGV0IHNocyA9IF90aGlzLnRvcE51bSArIDEgKyBfdGhpcy5ib3R0b210TnVtOwogICAgICAgICAgICBpZiAod2lkdGhOdW1MZWZ0ID4gX3RoaXMubGVmdE51bSkgewogICAgICAgICAgICAgIGxldCB0ID0gX3RoaXMubGVmdE51bSArIDE7CiAgICAgICAgICAgICAgX3RoaXMubGVmdE51bSA9IHdpZHRoTnVtTGVmdDsKICAgICAgICAgICAgICBmb3IgKGxldCBsbiA9IHQ7IGxuIDw9IHdpZHRoTnVtTGVmdDsgbG4rKykgewogICAgICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgICAgICBsZXQgbG4xID0gX3RoaXMuYm90dG9tdE51bSAqIC0xOwogICAgICAgICAgICAgICAgICAgIGxuMSA8PSBfdGhpcy50b3BOdW07CiAgICAgICAgICAgICAgICAgICAgbG4xKysKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0KICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0IC0KICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmoud2lkdGggKiBsbjsKICAgICAgICAgICAgICAgICAgX3RoaXMubW92ZXMudG9wID0KICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai50b3AgLQogICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnNjYWxlWCAqIF90aGlzLmZhYk9iai5oZWlnaHQgKiBsbjE7CiAgICAgICAgICAgICAgICAgIGxldCBpbWdzID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoaW1ncyk7CiAgICAgICAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChpbWdzKTsKICAgICAgICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgICAgICAgICAgX3RoaXMubW92ZXh5LmxlZnQgPSBlLnRhcmdldC5sZWZ0OwogICAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkudG9wID0gZS50YXJnZXQudG9wOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICh3aWR0aE51bVJpZ2h0ID4gX3RoaXMucmlnaHROdW0pIHsKICAgICAgICAgICAgICBsZXQgdDEgPSBfdGhpcy5yaWdodE51bSArIDE7CiAgICAgICAgICAgICAgX3RoaXMucmlnaHROdW0gPSB3aWR0aE51bVJpZ2h0OwogICAgICAgICAgICAgIGZvciAobGV0IGxuID0gdDE7IGxuIDw9IHdpZHRoTnVtUmlnaHQ7IGxuKyspIHsKICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgICAgbGV0IGxuMSA9IF90aGlzLmJvdHRvbXROdW0gKiAtMTsKICAgICAgICAgICAgICAgICAgICBsbjEgPD0gX3RoaXMudG9wTnVtOwogICAgICAgICAgICAgICAgICAgIGxuMSsrCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMubW92ZXMubGVmdCA9CiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5mYWJPYmoubGVmdCArCiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLndpZHRoICogbG47CiAgICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9CiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5mYWJPYmoudG9wIC0KICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5mYWJPYmouaGVpZ2h0ICogbG4xOwogICAgICAgICAgICAgICAgICBsZXQgaW1ncyA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgICAgICAgc2NhbGVYOiBfdGhpcy5mYWJPYmouc2NhbGVYLAogICAgICAgICAgICAgICAgICAgIHNjYWxlWTogX3RoaXMuZmFiT2JqLnNjYWxlWSwKICAgICAgICAgICAgICAgICAgICB0b3A6IF90aGlzLm1vdmVzLnRvcCwKICAgICAgICAgICAgICAgICAgICBsZWZ0OiBfdGhpcy5tb3Zlcy5sZWZ0LAogICAgICAgICAgICAgICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKGltZ3MpOwogICAgICAgICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goaW1ncyk7CiAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1vdmV4eS5sZWZ0ID0gZS50YXJnZXQubGVmdDsKICAgICAgICAgICAgICAgICAgX3RoaXMubW92ZXh5LnRvcCA9IGUudGFyZ2V0LnRvcDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGhlaWdodE51bVRvcCA+IF90aGlzLnRvcE51bSkgewogICAgICAgICAgICAgIGxldCB0ID0gX3RoaXMudG9wTnVtICsgMTsKICAgICAgICAgICAgICBfdGhpcy50b3BOdW0gPSBoZWlnaHROdW1Ub3A7CiAgICAgICAgICAgICAgZm9yIChsZXQgbG4gPSB0OyBsbiA8PSBoZWlnaHROdW1Ub3A7IGxuKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGxuMSA9IF90aGlzLnJpZ2h0TnVtICogLTE7IGxuMSA8PSBfdGhpcy5sZWZ0TnVtOyBsbjErKykgewogICAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0KICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0IC0KICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5mYWJPYmoud2lkdGggKiBsbjE7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1vdmVzLnRvcCA9CiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5mYWJPYmoudG9wIC0KICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5zY2FsZVkgKiBfdGhpcy5mYWJPYmouaGVpZ2h0ICogbG47CiAgICAgICAgICAgICAgICAgIGxldCBpbWdzID0gbmV3IGZhYnJpYy5JbWFnZShfdGhpcy5pbWcsIHsKICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IF90aGlzLmZhYk9iai5zY2FsZVgsCiAgICAgICAgICAgICAgICAgICAgc2NhbGVZOiBfdGhpcy5mYWJPYmouc2NhbGVZLAogICAgICAgICAgICAgICAgICAgIHRvcDogX3RoaXMubW92ZXMudG9wLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IF90aGlzLm1vdmVzLmxlZnQsCiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWDogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBfdGhpcy5teUNhbnZhcy5hZGQoaW1ncyk7CiAgICAgICAgICAgICAgICAgIF90aGlzLnJlcGF0R3JvdXAucHVzaChpbWdzKTsKICAgICAgICAgICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgICAgICAgICAgX3RoaXMubW92ZXh5LmxlZnQgPSBlLnRhcmdldC5sZWZ0OwogICAgICAgICAgICAgICAgICBfdGhpcy5tb3ZleHkudG9wID0gZS50YXJnZXQudG9wOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChoZWlnaHROdW1Cb3R0b20gPiBfdGhpcy5ib3R0b210TnVtKSB7CiAgICAgICAgICAgICAgbGV0IHQxID0gX3RoaXMuYm90dG9tdE51bSArIDE7CiAgICAgICAgICAgICAgX3RoaXMuYm90dG9tdE51bSA9IGhlaWdodE51bUJvdHRvbTsKICAgICAgICAgICAgICBmb3IgKGxldCBsbiA9IHQxOyBsbiA8PSBoZWlnaHROdW1Cb3R0b207IGxuKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGxuMSA9IF90aGlzLnJpZ2h0TnVtICogLTE7IGxuMSA8PSBfdGhpcy5sZWZ0TnVtOyBsbjErKykgewogICAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy5sZWZ0ID0KICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5sZWZ0IC0KICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhYk9iai5zY2FsZVggKiBfdGhpcy5mYWJPYmoud2lkdGggKiBsbjE7CgogICAgICAgICAgICAgICAgICBfdGhpcy5tb3Zlcy50b3AgPQogICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmFiT2JqLnRvcCArCiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5mYWJPYmouc2NhbGVZICogX3RoaXMuZmFiT2JqLmhlaWdodCAqIGxuOwogICAgICAgICAgICAgICAgICBsZXQgaW1ncyA9IG5ldyBmYWJyaWMuSW1hZ2UoX3RoaXMuaW1nLCB7CiAgICAgICAgICAgICAgICAgICAgc2NhbGVYOiBfdGhpcy5mYWJPYmouc2NhbGVYLAogICAgICAgICAgICAgICAgICAgIHNjYWxlWTogX3RoaXMuZmFiT2JqLnNjYWxlWSwKICAgICAgICAgICAgICAgICAgICB0b3A6IF90aGlzLm1vdmVzLnRvcCwKICAgICAgICAgICAgICAgICAgICBsZWZ0OiBfdGhpcy5tb3Zlcy5sZWZ0LAogICAgICAgICAgICAgICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgX3RoaXMubXlDYW52YXMuYWRkKGltZ3MpOwogICAgICAgICAgICAgICAgICBfdGhpcy5yZXBhdEdyb3VwLnB1c2goaW1ncyk7CiAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGExID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpcy5yZXBhdEdyb3VwKSk7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1vdmV4eS5sZWZ0ID0gZS50YXJnZXQubGVmdDsKICAgICAgICAgICAgICAgICAgX3RoaXMubW92ZXh5LnRvcCA9IGUudGFyZ2V0LnRvcDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuZmFiT2JqID0gZS50YXJnZXQ7CiAgICAgICAgICBfdGhpcy5tb3ZlT2JqID0gewogICAgICAgICAgICBsZWZ0OiBfdGhpcy5mYWJPYmoubGVmdCAtIChfdGhpcy5jbGlwV2lkdGggLyAyKSAqIF90aGlzLmltZ1NjYWxlLAogICAgICAgICAgICB0b3A6IF90aGlzLmZhYk9iai50b3AgLSAoX3RoaXMuY2xpcFdpZHRoIC8gMikgKiBfdGhpcy5pbWdTY2FsZSwKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIF90aGlzLmRyYXdJbWFnZUNsaXAoKTsKICAgICAgfSk7CgogICAgICAvLyBfdGhpcy5teUNhbnZhcy5vbigib2JqZWN0Om1vdmVkIiwgZnVuY3Rpb24gKGUpIHt9KTsKCiAgICAgIC8vIC8vIOm8oOagh+eCueWHu+S6i+S7tgogICAgICBfdGhpcy5teUNhbnZhcy5vbigibW91c2U6ZG93biIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgLy8gICDlvZNlLnRhcmdldCDmmK9udWxsIOaIluiAhXVuZGVmaW5lZOaXtiDmmK/msqHpgInkuK0g5YiG57uECiAgICAgICAgaWYgKGUudGFyZ2V0ICE9IG51bGwpIHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJkb3duIik7CiAgICAgICAgICAvLyBfdGhpcy5yZXBhdEZsYWcgPSAzOwogICAgICAgICAgLy8gaWYgKHRoaXMuaXNSZXBlYXQgPT0gMCkgewogICAgICAgICAgLy8gICB0aGlzLnJlcGF0RmxhZyA9IDA7CiAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgLy8gICB0aGlzLnJlcGF0RmxhZyA9IDM7CiAgICAgICAgICAvLyB9CiAgICAgICAgICBlLnRhcmdldC5oYXNDb250cm9scyA9IGZhbHNlOwogICAgICAgICAgZS50YXJnZXQuaGFzQm9yZGVycyA9IGZhbHNlOwogICAgICAgICAgX3RoaXMuZGF0YTEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLnJlcGF0R3JvdXApKTsKICAgICAgICAgIF90aGlzLm1vdmV4eS5sZWZ0ID0gZS50YXJnZXQubGVmdDsKICAgICAgICAgIF90aGlzLm1vdmV4eS50b3AgPSBlLnRhcmdldC50b3A7CiAgICAgICAgICBfdGhpcy50aW1lT3V0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5pbWdDYW52YXMgPSBuZXcgZmFicmljLkNhbnZhcygiY2FudmFzQm94MSIsIHsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICIjZmZmIiwKICAgICAgICBpc0RyYXdpbmdNb2RlOiBmYWxzZSwKICAgICAgfSk7CgoKICAgICAgdGhpcy5pbml0Q2FudmFzID0gbmV3IGZhYnJpYy5DYW52YXMoImNhbnZhc0JveDMiLCB7CiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAiI2ZmZiIsCiAgICAgICAgaXNEcmF3aW5nTW9kZTogZmFsc2UsCiAgICAgIH0pOwoKICAgICAgdGhpcy5pbml0Q2FudmFzLnNldFdpZHRoKHRoaXMuY2xpcFdpZHRoKTsKICAgICAgdGhpcy5pbml0Q2FudmFzLnNldEhlaWdodCh0aGlzLmNsaXBIZWlnaHQpOwoKICAgICAgLy8g5pWI5p6c5Zu+5paw5aKebW91bnRlZAogICAgfSwKICAgIHNldEFzUG9zaXRpb24oKSB7CgogICAgICBsZXQgc2Nyb2xsdG9wID0KICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CgogICAgICBpZiAoc2Nyb2xsdG9wID4gMTA4MCkgewogICAgICAgIC8vIOWIsOS6huW6lemDqOS5i+WQjuaDs+WBmueahOaTjeS9nCzlpoLliLDkuoblupXpg6jkuYvlkI7liqDovb0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJhcyIpWzBdLnN0eWxlLnBvc2l0aW9uID0gImZpeGVkIgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImFzIilbMF0uc3R5bGUudG9wID0gIjZyZW0iCgogICAgICB9IGVsc2UgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImFzIilbMF0uc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiCiAgICAgIH0KICAgIH0KICAgIC8vIOWkhOeQhuaooeWei+eahOWHveaVsAogICAgLy8g5pWI5p6c5Zu+5paw5aKe5Ye95pWwCgogICAgLy8g5pWI5p6c5Zu+5paw5aKe55qEbWV0aG9kc+WHveaVsAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOmmluWFiOWIpOaWreS4gOS4i+eUqOaIt+acieayoeacieeZu+mZhgogICAgLy8gaWYgKGxvY2FsU3RvcmFnZS51c2VyID09PSAiIikgewogICAgLy8gICAvLyDmsqHmnInnmbvpmYbnmoTml7blgJnlsIbotK3nianovabkv6Hmga/lrZjliLDmnKzlnLDnmoQgbG9jYWxTdG9yYWdlLnNob3BwaW5nX2NhcuW9k+S4rQogICAgLy8gICAvLyDpppbpgInliKTmlq3kuIDkuItsb2NhbFN0b3JhZ2Uuc2hvcHBpbmdfY2Fy5pyJ5rKh5pyJ5aOw5piOCiAgICAvLwogICAgLy8gICBpZiAoIWxvY2FsU3RvcmFnZS5zc2hvcHBpbmdfY2FyKSB7CiAgICAvLyAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NzaG9wcGluZ19jYXInLCBbXSk7CiAgICAvLyAgIH0KICAgIC8vIH0KICAgIC8vIGlmICghbG9jYWxTdG9yYWdlLnRva2VuKSB7CiAgICAvLyAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7CiAgICAvLyB9CiAgICBsZXQgdm0gPSB0aGlzOwoKICAgIC8vIHRoaXMucnEoewogICAgLy8gICB1cmw6ICIvYXBpL3BlcnNvbmFsL3NlbGVjdEJvb2ttYXJrU2ltcGxlIiwKICAgIC8vICAgbWV0aG9kOiAicG9zdCIsCiAgICAvLyAgIHBhcmFtOiB7fSwKICAgIC8vICAgb25FcnJvcjogZnVuY3Rpb24gKCkge30sCiAgICAvLyAgIHZtLAogICAgLy8gfSkudGhlbigocmVzKSA9PiB7CiAgICAvLyAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsKICAgIC8vICAgICB2bS5Db2xsZWN0aW9uTGlzdCA9IHJlcy5kYXRhOwogICAgLy8gICAgIC8vCiAgICAvLyAgIH0gZWxzZSB7CiAgICAvLyAgICAgLy8KICAgIC8vICAgICAvLyB0aGlzLiRtZXNzYWdlKHJlcy5kZXNjKTsKICAgIC8vICAgfQogICAgLy8gfSk7CiAgICB0aGlzLnN1ID0gZmFsc2U7CgogICAgLy8g5pWI5p6c5Zu+55qEY3JlYXRlZAogICAgdGhpcy5nZXRQU0QoKTsKICAgIC8vIOaViOaenOWbvueahGNyZWF0ZWQKCgogICAgY29uc29sZS5sb2coImNyZWF0ZWQiKQogIH0sCgogIGRlc3Ryb3llZCgpIHsgLy8g6ZSA5q+Bdm3nu4Tku7YKICAgIGNvbnN0IF90aGlzPXRoaXM7CgogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIF90aGlzLnNldEFzUG9zaXRpb24sIGZhbHNlKTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zdCBfdGhpcz10aGlzOwogICAgX3RoaXMubG9ja2luZz1mYWxzZTsKICAgIC8vIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyh7CiAgICAvLyAgIG1lc3NhZ2U6J+S4i+i9veaIkOWKn++8gScsCiAgICAvLyAgIGR1cmF0aW9uOjMwMDAwCiAgICAvLyB9KTsKCiAgICBsZXQgcHMgPSB0aGlzLiRyb3V0ZS5wYXRoLnNwbGl0KCcvJyk7CiAgICB0aGlzLnByb2R1Y3RJZCA9IHBzW3BzLmxlbmd0aCAtIDFdOwogICAgLy8gY29uc29sZS5sb2codGhpcy4kcm91dGUucGF0aCk7CiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRyb3V0ZSk7CiAgICAvLyBjb25zb2xlLmxvZygnbW91dGVkJykKICAgIC8vIGxvY2FsU3RvcmFnZS5wcm9kdWN0SWQ9dGhpcy5wcm9kdWN0SWQ9dGhpcy4kcm91dGUucXVlcnkuaWQ7CiAgICB0aGlzLmNhbmRpZGF0ZSgpOwogICAgdGhpcy5sb2FkQ2FudmFzKCkKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX3RoaXMuc2V0QXNQb3NpdGlvbiwgZmFsc2UpOwogIH0sCiAgLy8gYmVmb3JlVXBkYXRlKCl7CiAgLy8gICBjb25zb2xlLmxvZygiYmVmb3JlVXBkYXRlIikKICAvLwogIC8vIH0sCiAgLy8gdXBkYXRlZCgpewogIC8vICAgY29uc29sZS5sb2coInVwZGF0ZWQiKQogIC8vCiAgLy8gfQp9Owo="},{"version":3,"sources":["detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiaA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"src/components/Details","sourcesContent":["<template>\n  <div class=\"bodys\">\n    <a class=\"as\" @click=\"mis\" href=\"#\"><img :src=\"why[1]\" alt=\"\"/></a>\n\n\n    <Shou ref=\"shou\"/>\n\n    <div class=\"title\">\n      <div class=\"problems\">\n        <!-- <img :src=\"why[0]\" alt=\"\" @click=\"closeb\"> -->\n        <div class=\"cons\" v-if=\"con\">\n          <div class=\"title\">Why report problems</div>\n          <div class=\"text\">Please describe the problems you have encountered. You can also report trademark or\n            copyright violations\n          </div>\n          <div>\n            <el-input type=\"textarea\" :autosize=\"{ minRows: 7, maxRows: 7 }\" v-model=\"textarea1\">\n            </el-input>\n          </div>\n          <div class=\"button\">\n            <button @click=\"closebs\">cancel</button>\n            <button @click=\"sub\">Report</button>\n          </div>\n        </div>\n      </div>\n      <div class=\"div_left\">\n        <div class=\"left\">\n\n          <div class=\"model\">Model</div>\n          <div class=\"imgsList\">\n            <div class=\"imglist\" v-for=\"(item, index) in nameList\" :key=\"index\" @click=\"initObj(item.id)\">\n              <!-- :src=\"item.img\" -->\n              <img :src=\"item.img\" :default-img=\"item.img\" alt=\" \"/>\n            </div>\n          </div>\n        </div>\n\n\n        <!-- <Temp @showSend1=\"initObj\"> </Temp> -->\n        <!-- <div\n          class=\"imglist\"\n          v-for=\"(item, index) in candidate_imglist\"\n          :key=\"index\"\n        >\n          <img @click=\"candidate_click(item.src)\" :src=\"item.src\" alt=\" \" />\n        </div> -->\n      </div>\n      <div class=\"div_content\">\n        <div class=\"comtent\">\n          <div class=\"content_img\">\n            <div class=\"content_img1\" v-show=\"imgShowFlag1\" style=\"background-color: yellow\">\n              <!-- 中心图片 -->\n              <!--              <img class=\"centerImg\" :src=\"conteent_img\" alt=\"\" />-->\n\n              <canvas id=\"canvasBox3\" :width=\"clipWidth * kMultiple\" :height=\"clipHeight * kMultiple\" :style=\"{\n                width: clipWidth + 'px',\n                height: clipHeight + 'px',\n              }\">\n              </canvas>\n            </div>\n            <div class=\"babylon-container\" v-show=\"canvasShowFlag\">\n              <div class=\"canvas-clip\" ref=\"canvasClip\" :style=\"{ width: clipWidth + 'px', height: clipHeight + 'px' }\">\n                <img src=\"../../../public/img/waterMark1.png\" alt=\"\" class=\"markImg1\"/>\n                <div class=\"markDiv\">\n                  <canvas ref=\"lineCanvas\" :width=\"clipWidth\" :height=\"clipHeight\"></canvas>\n                </div>\n                <div class=\"canvas-contsiner\">\n                  <canvas id=\"canvasBox\" ref=\"bargraphCanvas\" :width=\"clipWidth * kMultiple\"\n                          :height=\"clipHeight * kMultiple\" :style=\"{\n                      width: clipWidth + 'px',\n                      height: clipHeight + 'px',\n                    }\">\n                  </canvas>\n                </div>\n                <div style=\"display: none\">\n                  <canvas id=\"canvasBox1\" style=\"display: none\" ref=\"bargraphCanvas\" :width=\"clipWidth * kMultiple\"\n                          :height=\"clipHeight * kMultiple\" :style=\"{\n                      width: clipWidth + 'px',\n                      height: clipHeight + 'px',\n                    }\">\n                  </canvas>\n                </div>\n              </div>\n            </div>\n            <div ref=\"foxcontainer\" style=\"position: absolute;\n              top: 0;\n              left: 0;\n              width:6rem;\n              height:6rem;\n              z-index:1;\n            \">\n              <div id=\"container\"></div>\n            </div>\n            <!-- <div class=\"content_img1\">\n            <img class=\"centerImg\" :src=\"conteent_img\" alt=\"\" />\n          </div>\n          <div\n            v-show=\"conteent_img2 != ''\"\n            class=\"content_img2\"\n            @click=\"content_img2_click\"\n          >\n            <img :src=\"conteent_img2\" alt=\" \" />\n          </div> -->\n            <div class=\"ordinary-picture\" @click=\"switchPicture\" v-show=\"imgShowFlag2\">\n              <img :src=\"conteent_img\" alt=\"\" />\n            </div>\n            <div class=\"ordinary-picture\" @click=\"returnObj\" v-show=\"imgShowFlag3\">\n              <img :src=\"modelImg\" alt=\"\" />\n            </div>\n          </div>\n          <div class=\"slider content-silder\" v-show=\"slideFlag\">\n            <el-slider v-model=\"values\" show-input :min=\"20\" :max=\"maxScale\" @input=\"sliderInput\"\n                       @change=\"sliderChange\">\n            </el-slider>\n            <!-- <div class=\"inputext\">\n            <input v-model=\"values\" type=\"text\" /><span class=\"inputspan\"\n              >%</span\n            >\n          </div> -->\n          </div>\n        </div>\n      </div>\n\n      <div class=\"rigth\">\n        <div class=\"text\">\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Pattern Name</div>\n            <div class=\"spans_2\">{{ ontent_datas.tags }}</div>\n          </div>\n          <div class=\"title_name title_one\">\n            <div class=\"spans_1\">Pattern ID</div>\n            <div class=\"spans_2\">{{ ontent_datas.imgSn }}</div>\n          </div>\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Included Files</div>\n            <div class=\"spans_2\">{{ ontent_datas.format }}</div>\n          </div>\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Size</div>\n            <div class=\"spans_2\">{{ imgSize }}</div>\n          </div>\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Print Size</div>\n            <div class=\"spans_2\">{{ printSize1}}</div>\n          </div>\n          <div class=\"title_name\" v-if=\"printSize2\">\n            <div class=\"spans_1\">&nbsp;</div>\n            <div class=\"spans_2\">{{ printSize2}}</div>\n          </div>\n          <!--          <div class=\"title_name\">-->\n          <!--            <div class=\"spans_1\">Resolution</div>-->\n          <!--            <div class=\"spans_2\">{{ ontent_datas.power }}</div>-->\n          <!--          </div>-->\n          <div class=\"title_name\">\n            <div class=\"spans_1\">In Repeat + Seamless Tile</div>\n            <div class=\"spans_2\">\n\n              <img :src=\"ontent_datas.isRepeat>0?state[1]:state[0]\" alt=\"\" />\n            </div>\n          </div>\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Layered Photoshop PSD</div>\n            <div class=\"spans_2\">\n              <img :src=\"ontent_datas.isLayer>0?state[1]:state[0]\" alt=\"\" />\n            </div>\n          </div>\n          <div class=\"title_name\">\n            <div class=\"spans_1\">Vector AI Or EPS</div>\n            <div class=\"spans_2\">\n              <img :src=\"ontent_datas.isVector>0?state[1]:state[0]\" alt=\"\" />\n            </div>\n          </div>\n        </div>\n        <div class=\"in_2\">\n          <span v-for=\"(item, index) in ku\" :key=\"index\">\n            <img :src=\"item\" v-if=\"index==0 || (index==2 && ontent_datas.isRepeat>0)\n            || (index == 3 && ontent_datas.isLayer > 0) || (index == 1 && ontent_datas.isLarge >0)\" alt=\"\">\n          </span>\n          <!--              <img :src=\"item\" v-for=\"(item, index) in ku\" :key=\"index\" alt=\"\">-->\n        </div>\n        <div class=\"option\">\n          <div class=\"title\">\n            <div class=\"one\">License Type</div>\n            <div class=\"two\"><a href=\"/html/Comparison.html\" target=\"_blank\">Compare Licenses</a></div>\n            <i class=\"el-icon-warning-outline\"></i>\n          </div>\n          <div class=\"content\">\n            <div v-show=\"ontent_datas.isBuyout <= 0\">\n              <div v-show=\"duan\">\n                <!--                <div class=\"content_list\" @click=\"content_list_bools(1)\" v-if=\"ontent_datas.isUse > 0\">-->\n                <!--                  <div class=\"content_list_bolls lusk\">-->\n                <!--                    <img v-show=\"licenseType != 1\" :src=\"ab[0]\" alt=\"\"/>-->\n                <!--                    <img v-show=\"licenseType == 1\" :src=\"ab[1]\" alt=\"\"/>-->\n                <!--                  </div>-->\n\n                <!--                  <div class=\"con_idv lusk\">-->\n                <!--                    <div>Personal (JPEG Only)</div>-->\n\n                <!--                  </div>-->\n                <!--                </div>-->\n                <!-- 2 -->\n                <div class=\"content_list\" @click=\"content_list_bools(4)\" v-if=\"ontent_datas.isUse > 0\">\n                  <div class=\"content_list_bolls lusk\">\n                    <img v-show=\"licenseType != 4\" :src=\"ab[0]\" alt=\"\"/>\n                    <img v-show=\"licenseType == 4\" :src=\"ab[1]\" alt=\"\"/>\n                  </div>\n\n                  <div class=\"con_idv \">\n                    <div>Commercial (layered file/JPEG)</div>\n\n                  </div>\n                </div>\n                <!-- 3 -->\n                <div class=\"content_list\" @click=\"content_list_bools(5)\" v-if=\"ontent_datas.isUse > 0\">\n                  <div class=\"content_list_bolls lusk\">\n                    <img v-show=\"licenseType != 5\" :src=\"ab[0]\" alt=\"\"/>\n                    <img v-show=\"licenseType == 5\" :src=\"ab[1]\" alt=\"\"/>\n                  </div>\n\n                  <div class=\"con_idv\">\n                    <div>Commercial Unlimited (layered file/JPEG)</div>\n                    <!-- <div>Unlimited end products for sale</div> -->\n                  </div>\n                </div>\n              </div>\n              <div v-show=\"!duan\">\n                <div class=\"content_list\" @click=\"content_list_bools(4)\" v-if=\"ontent_datas.isUse > 0\">\n                  <div class=\"content_list_bolls\">\n                    <img v-show=\"licenseType != 4\" :src=\"ab[0]\" alt=\"\" />\n                    <img v-show=\"licenseType == 4\" :src=\"ab[1]\" alt=\"\" />\n                  </div>\n\n                  <div class=\"con_idv\">\n                    <div>Commercial (Layered PSD + JPEG)</div>\n                    <div>Up to 500 end products for sale</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <!-- 1 -->\n\n\n            <div class=\"content_list\" @click=\"content_list_bools(3)\" v-if=\"ontent_datas.isBuyout > 0\">\n              <div class=\"content_list_bolls \">\n                <img v-show=\"licenseType != 3\" :src=\"ab[0]\" alt=\"\"/>\n                <img v-show=\"licenseType == 3\" :src=\"ab[1]\" alt=\"\"/>\n              </div>\n\n              <div class=\"con_idv\">\n                <div>Commercial (Layered PSD + JPEG)</div>\n                <div>Up to 500 end products for sale</div>\n              </div>\n              <div class=\"wonder\">\n                <img :src=\"wonder\" alt=\"\" />\n                <div class=\"wonder_text\">\n                  <div class=\"demo2\">\n                    <em>&#9670;</em>\n                    <span>&#9670;</span>\n                    <div class=\"texts\">\n                      This product is a buyout picture, and will be automatically removed from the shelf after\n                      purchase\n                      You can't return the goods after purchase. Please contact customer service if there is any\n                      quality\n                      problem. Please confirm the follow-up operation\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"price\">\n          <div>Price</div>\n          <div>${{ licensePrice }}</div>\n        </div>\n        <div class=\"operlist\">\n\n          <div v-show=\"ontent_datas.hasCollection==0\" class=\"operlist_2 btn_1\" @click=\"shou(ontent_datas)\">\n            <img class=\"gx1\" :src=\"gx[1]\" alt=\"\"/>\n            Collect\n          </div>\n          <div v-show=\"ontent_datas.hasCollection > 0\" class=\"operlist_2  btn_12\" @click=\"shou(ontent_datas)\">\n            Collect\n          </div>\n\n          <button v-show=\"ontent_datas.isBuy == 2\" class=\"operlist_2 bag  downs\"\n                  @click.prevent=\"thisDownload(ontent_datas)\">\n            Download\n            File\n            <svg class=\"download\" width=\"0.2rem\" height=\"0.2rem\" viewBox=\"0 0 20 20\" fill=\"\"\n                 xmlns=\"http://www.w3.org/2000/svg\">\n              <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\n                    d=\"M6.7569 6.32977C7.0467 6.32977 7.2819 6.56618 7.2819 6.85747C7.2819 7.14876 7.0467 7.38516 6.7569 7.38516H6.0982C4.9684 7.38516 4.05 8.30758 4.05 9.44248V12.8795C4.05 14.0187 4.9712 14.9446 6.1045 14.9446H13.9025C15.0309 14.9446 15.95 14.0208 15.95 12.8866V9.45022C15.95 8.3111 15.0281 7.38516 13.8962 7.38516H13.2438C12.954 7.38516 12.7188 7.14876 12.7188 6.85747C12.7188 6.56618 12.954 6.32977 13.2438 6.32977H13.8962C15.6077 6.32977 17 7.72993 17 9.45022V12.8866C17 14.6034 15.6098 16 13.9025 16H6.1045C4.393 16 3 14.6005 3 12.8795V9.44248C3 7.72571 4.3895 6.32977 6.0982 6.32977H6.7569ZM10.0006 3C10.2904 3 10.5256 3.23641 10.5256 3.5277L10.525 10.7227L11.6701 9.56737C11.8745 9.36051 12.2063 9.36051 12.4121 9.56596C12.6172 9.77141 12.6179 10.1056 12.4135 10.3125L10.377 12.3674C10.3571 12.388 10.3356 12.4069 10.3126 12.424L10.3723 12.3719C10.3497 12.3949 10.3253 12.4155 10.2992 12.4337C10.2834 12.4447 10.2672 12.4547 10.2506 12.4638C10.2425 12.4682 10.2341 12.4725 10.2255 12.4766C10.2103 12.4839 10.1946 12.4904 10.1786 12.4963C10.1705 12.4991 10.1625 12.5018 10.1544 12.5043C10.1347 12.5104 10.1144 12.5154 10.0937 12.5191C10.0891 12.5199 10.0848 12.5206 10.0806 12.5213C10.0639 12.5239 10.0464 12.5257 10.0288 12.5266C10.0193 12.5271 10.0099 12.5274 10.0006 12.5274L9.9727 12.5253L9.92935 12.5226C9.92626 12.5222 9.92318 12.5217 9.92011 12.5212L10.0006 12.5274C9.96928 12.5274 9.93824 12.5246 9.90781 12.5191C9.88676 12.5154 9.86653 12.5104 9.8468 12.5044C9.83891 12.5019 9.83117 12.4993 9.82349 12.4965C9.8074 12.4908 9.79152 12.4842 9.77605 12.4768C9.76665 12.4723 9.7573 12.4675 9.7481 12.4624C9.73517 12.4553 9.72271 12.4477 9.71059 12.4396C9.7023 12.4341 9.694 12.4282 9.68587 12.422C9.66587 12.407 9.647 12.3905 9.62938 12.3728L9.62886 12.3719L7.58766 10.3125C7.38326 10.1056 7.38396 9.77141 7.58906 9.56596C7.79486 9.36051 8.12666 9.36051 8.33106 9.56737L9.475 10.7227L9.47556 3.5277C9.47556 3.23641 9.71076 3 10.0006 3Z\"\n                    fill=\"#222222\"/>\n            </svg>\n            <div style=\"background-color: green;position: absolute;top:0;left:0;height:0.46rem;opacity: 0.4;\"\n                 :style=\"{width:progress+'%'}\"></div>\n          </button>\n          <div v-show=\"ontent_datas.isBuy == 1\" class=\"operlist_2 bag btn_x\" @click.prevent=\"addShopingCars\">\n            View Cart<img class=\"gx1\" :src=\"gx[2]\" alt=\"\"/>\n          </div>\n          <!--          -->\n          <div v-show=\"ontent_datas.isBuy == 0\" class=\"operlist_2 btn_x\" @click.prevent=\"addShopingCar\">\n            <img class=\"gx1\" :src=\"gx[0]\" alt=\"\"/>Add To Bag\n          </div>\n\n          <!--          <div class=\"tipstext\" v-if=\"ontent_datas.isBuy==1\">Item Added To Your Cart!</div>-->\n        </div>\n      </div>\n\n\n    </div>\n    <div class=\"middle\">\n      <div style=\"display: table\">\n        <div style=\"display: table-row\">\n          <div class=\"titles\">\n            Product Types\n          </div>\n          <div class=\"contents\">\n            <template v-for=\"(item, index) in types\">\n              {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"\n                                           @click=\"gos(item)\">{{\n                item\n              }}</a>\n            </template>\n          </div>\n        </div>\n        <div style=\"display: table-row\">\n          <div class=\"titles\">\n            Categories\n          </div>\n          <div class=\"contents\">\n            <template v-for=\"(item, index) in categories\">\n              {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"\n                                           @click=\"gos(item)\">{{\n                item\n              }}</a>\n            </template>\n          </div>\n        </div>\n        <div style=\"display: table-row\">\n          <div class=\"titles\">\n            Tags\n          </div>\n          <div class=\"contents\">\n            <template v-for=\"(item, index) in tags\">\n              {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"\n                                           @click=\"gos(item)\">{{\n                item\n              }}</a>\n            </template>\n          </div>\n        </div>\n      </div>\n      <!--      <div>-->\n      <!--        <div class=\"titles\">-->\n      <!--          <ul>-->\n      <!--            <li>Product Types</li>-->\n      <!--            <li>Categories</li>-->\n      <!--            <li>Tags</li>-->\n      <!--          </ul>-->\n      <!--        </div>-->\n      <!--        <div class=\"contents\">-->\n      <!--          <ul>-->\n      <!--            <li>-->\n      <!--              <template v-for=\"(item, index) in types\">-->\n      <!--                {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"-->\n      <!--                                             @click=\"gos(item)\">{{-->\n      <!--                  item-->\n      <!--                }}</a>-->\n      <!--              </template>-->\n      <!--            </li>-->\n      <!--            <li>-->\n      <!--              <template v-for=\"(item, index) in categories\">-->\n      <!--                {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"-->\n      <!--                                             @click=\"gos(item)\">{{-->\n      <!--                  item-->\n      <!--                }}</a>-->\n      <!--              </template>-->\n      <!--            </li>-->\n      <!--            <li class=\"bulues\">-->\n      <!--              <template v-for=\"(item, index) in tags\">-->\n      <!--                {{ index > 0 ? ',' : '' }}<a v-if=\"item != ''\" :key=\"index\" href=\"javascript:void(0)\"-->\n      <!--                                             @click=\"gos(item)\">{{-->\n      <!--                  item-->\n      <!--                }}</a>-->\n      <!--              </template>-->\n\n      <!--              &lt;!&ndash;            African、 Blue、 Blue and white、 Exotic、 Hand drawn、 Landscape、&ndash;&gt;-->\n      <!--              &lt;!&ndash;            Oriental、 Resort、 Spring/summer、 Summer、 Surf wear、&ndash;&gt;-->\n      <!--            </li>-->\n      <!--          </ul>-->\n      <!--        </div>-->\n      <!--      </div>-->\n    </div>\n    <div class=\"Related\">Popular recommendations</div>\n    <Cell :style=\"{  marginTop: '0.16rem ' }\" :linelist=\"linelist\" @shou=\"shou\" :consHeight=\"consHeight\"\n          :deleteIcon=\"false\"/>\n    <div class=\"Related\">Related Designs</div>\n    <Cell :style=\"{  marginTop: '0.16rem ' }\" :linelist=\"linelist\" @shou=\"shou\" :consHeight=\"consHeight\"\n          :deleteIcon=\"false\"/>\n    <!--    <div class=\"contents\" :style=\"{ height: consHeight + 'px' }\">-->\n    <!-- 行 -->\n    <!--      <Cell :item=\"item\" @shou=\"shou\" :idx=\"index\" v-for=\"(item, index) in linelist\" :key=\"index\" />-->\n    <!--      <div class=\"numberlist\" :class=\"'numberlist' + index\" v-for=\"(item, index) in linelist\" :key=\"index\" :style=\"{-->\n    <!--        left: item.left + 'px',-->\n    <!--        top: item.top + 'px',-->\n    <!--        width: item.width + 'px',-->\n    <!--      }\">-->\n    <!--        <Cell :item=\"item\" @shou=\"shou\"/>-->\n    <!--      </div>-->\n    <!--    </div>-->\n    <Bottom/>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Bottom from \"@/components/BottomNavigation/index\";\nimport {sorting_list,download} from \"@/utils/util\";\nimport Cell from \"../Screen/Cell\";\nimport Shou from \"../Screen/Shou\";\n// import fabric from 'fabric'\n\n// import Temp from \"./Temp.vue\";\n// import Utils from \"../../assets/js/util\";\nimport { fabric } from \"fabric\";\nimport foxpsd from \"../../static/js/foxpsd\";\n\nexport default {\n  components: {\n    Bottom,\n    Cell,\n    Shou,\n    fabric,\n    // Temp,\n  },\n  data() {\n    return {\n      locking:false,\n      con: false,\n      textarea1: \"\",\n      productId: null,\n      downLoad: false,\n      duan: true,\n      // Collect: true,\n      su: false,\n      p: null,\n      licenseType: 0,\n      licensePrice: '',\n      linelist: [],\n      consHeight: 0,\n      listnumber: 0,\n      maxScale: 400,\n      progress:0,\n\n      imgSize:'',\n      printSize1: '',\n      printSize2: '',\n\n      content_list_boll: [true, false, false], //控制每一个选项的选中和晴空\n      candidate_imglist: [],\n      conteent_img: \"\",\n      conteent_img2: \"\",\n      values: 100,\n      ontent_datas: \"\",\n      why: [require(\"@/assets/img/why.svg\"), require(\"@/assets/img/<.svg\")],\n      gx: [require(\"@/assets/img/gox.svg\"), require(\"@/assets/img/xingx.svg\"), require(\"@/assets/img/oks.svg\")],\n      wonder: require(\"@/assets/img/wonder.png\"),\n      state: [require(\"@/assets/img/x.png\"), require(\"@/assets/img/d.png\")],\n      ab: [require(\"@/assets/img/a.png\"), require(\"@/assets/img/b.png\")],\n      blankImage: require(\"@/assets/img/blank.svg\"),\n      ku: [require(\"@/assets/img/ku_1.svg\"), require(\"@/assets/img/ku_2.svg\"), require(\"@/assets/img/ku_4.svg\"), require(\"@/assets/img/ku_3.svg\")],\n      // 效果图的data的数据\n      // 获取模型的data\n      list: [],\n      psdList: [], //从后台接口拿到的psd列表\n      newPsdList: [], //对比后的psd列表\n      newModelsList: [], // 第一次拿到的  大图的详细\n      modelsList: [], //第二次处理\n      nameList: [], // 从接口拿到的 图层的列表\n      newNameList: [], // 对比后的图层列表\n      // 效果图新增\n      repatFlag: 3,\n      isRepeat: 0,\n      modelId: 0,\n      begin: { x: 0, y: 0 },\n      imgPxWidth: null,\n      imgPxHeight: null,\n      calculateWidth: null,\n      modelArray: [],\n      imgArray: [],\n      clipX: null, //裁切的坐标x\n      clipY: null, //裁切的坐标y\n      boxWidth: null, // 盒子的宽度\n      boxHeight: null, // 盒子的高度\n      calculateHeiht: null,\n      imgShowFlag: 1, // 默认显示自适应的尺寸\n      obj: {},\n      clipWidth: 600, //clip 裁切出来的方块区域\n      clipHeight: 600, //clip 裁切出来的方块区域\n      boxMax: 600,\n      kMultiple: 3, //\n      img: null,\n      initCanvas: null,\n      myCanvas: null,\n      imgSn: null, //图片的编号\n      zoom: 1,\n      fabObj: null, // 用fabric.js new 出来的对象\n      zoomPoint: null,\n      repatGroup: [], // 平铺之后的group数组\n      group: null,\n      data1: null,\n      moveObj: null,\n      arrCross1: [], // 平铺之后的数据\n      arrVertical: [],\n      addArr: [], //缩放之后新增的数组\n      widthNum: 0, // 直接平铺的横向数量\n      heightNum: 0, //直接平铺的竖向数量\n      moves: {},\n      leftNum: 0,\n      rightNum: 0,\n      topNum: 0,\n      bottomtNum: 0,\n      movexy: {},\n      timeOut: 0,\n      canvas: null,\n      clipImg: null,\n      foxpsdObj: null,\n      sku: null,\n      ctxLine: null,\n      imgShowFlag1: true,\n      canvasShowFlag: false,\n      imgShowFlag2: false,\n      imgShowFlag3: false,\n      modelImg: null,\n      slideFlag: true,\n      types: [],\n      categories: [],\n      tags: [],\n      productNum: 0,\n      // 效果图新增\n      // 效果图的data数据\n    };\n  },\n  watch: {\n    '$store.state.fontRate': {\n      handler() {\n        this.changeSize();\n      },\n    },\n    value() {\n    },\n    consHeight() {\n    },\n    // productId() {\n    //   this.candidate();\n    // },\n    // values() {\n    //   // console.log(this.values);\n    //   this.value = this.values;\n    //   // this.zoomIn(this.values)\n    //   // this.contentImg.style.height = 600 * (this.values / 100) + \"px\";\n    //   // this.contentImg.style.width = 600 * (this.values / 100) + \"px\";\n    //   // console.log(this.contentImg.style.height);\n    // },\n  },\n  methods: {\n    mis() {\n      document.getElementsByClassName(\"as\")[0].style.position = \"absolute\"\n    },\n    sub() {\n      if (this.textarea1 == \"\") {\n        return this.$message(\"Cannot be empty！\")\n      }\n\n    },\n    closeb() {\n      this.con = true\n    },\n    closebs() {\n      this.con = false\n    },\n    //点击取消收藏按钮\n    cancel(id) {\n      console.log(id);\n    },\n    // 添加到离线购物车\n    addOutlineCar() {\n\n      let m = JSON.parse(localStorage.getItem('sshopping_car'));\n\n      if (m && m.some(item => item.productId == this.productId)) {\n        this.$message(\"Product exist\");\n      } else {\n\n        if (!m) {\n          m = [];\n        }\n\n        let s = {\n          productId: this.productId,//直接把这张图的所有详细信息保存起来，到购物车我们再根据我们需要显示\n          imgType: this.licenseType, //授权类型\n          productNum: 1\n        };\n\n        m.push(s)\n        localStorage.setItem('sshopping_car', JSON.stringify(m));\n        this.ontent_datas.isBuy = 1;\n\n        this.locking=false;\n      }\n    },\n    // 添加到购物车\n    addShopingCar() {\n      let vm = this;\n\n      if(vm.locking)return;\n      vm.locking=true;\n\n      gtag('event', 'add_to_cart', {\n        currency: 'USD',\n        items: [{\n          item_id: this.ontent_datas.productId,\n          item_name: this.ontent_datas.imgSn,\n          price: this.licensePrice,\n          currency: 'USD',\n          quantity: 1\n        }],\n        value: this.licensePrice\n      });\n\n      // 首先判断一下用户有没有登陆\n      if (!localStorage.user) {\n        // 没有登陆的时候将购物车信息存到本地的 localStorage.shopping_car当中\n        // 首选判断一下localStorage.shopping_car有没有声明\n        this.addOutlineCar();\n        // console.log(JSON.parse(localStorage.getItem('sshopping_car')));\n\n        // this.Bag = false;\n      } else {\n        this.rq({\n          url: \"/api/cart/save\",\n          method: \"post\",\n          param: {\n            productId: this.ontent_datas.productId,\n            imgType: this.licenseType,\n          },\n          onError: function () {\n            vm.locking=false;\n          },\n          vm,\n        }).then((res) => {\n          if (res.code == 200) {\n            // this.$message(\"添加成功\");\n            if (!res.user) {\n              vm.addOutlineCar();\n            } else {\n              vm.ontent_datas.isBuy = 1;\n            }\n\n          } else if (res.code == 601 || res.code == 680) {\n            vm.addOutlineCar();\n            //   this.Bag = false;\n            // this.$store.state.login = true;\n            // this.$store.state.logins = true\n            // this.$store.state.ForgetPwd = false\n            // this.$store.state.Sign = false\n          } else {\n            this.$message(res.desc);\n            //\n          }\n          vm.locking=false;\n        });\n      }\n    },\n    addShopingCars() {\n      this.$router.push(\"/shoppingcar\")\n    },\n    shou(pd) {\n\n      this.$refs.shou.shou(pd);\n    },\n    details(a, b) {\n      // localStorage.productId = this.productId=a;\n      // localStorage.imgSn = b;\n\n      const routeUrl = this.$router.resolve({\n        path: \"/detail/\" + a\n      });\n\n      window.open(routeUrl.href, \"_self\");\n\n      // console.log(\"push\")\n      // this.$router.push({\n      //   path: \"/details\",\n      //   query: { id: a },\n      // });\n\n\n      // this.$store.state.blank = \"details\";\n      // this.$router.push(\"/blank\");\n    },\n    thisDownload(pd) {\n      const _this = this;\n\n      _this.rq({\n        url: \"/api/product/downUrl\",\n        method: \"post\",\n        param: {\n          id: _this.ontent_datas.productId,\n        },\n        onError: function () {\n        },\n        _this,\n      }).then((res) => {\n        if (res.code == 200) {\n          // this.$message(\"添加成功\");\n\n          res.data = res.data.replace('http:', 'https:');\n\n          let reg = /\\.(\\w*?)\\?/\n          let ext = reg.exec(res.data)[1];\n\n          if('zip'==ext.toLowerCase()){\n\n            let ele = document.createElement('a');\n            ele.setAttribute('href', res.data); //设置下载文件的url地址\n            ele.setAttribute('download', _this.ontent_datas.imgSn + '.' + ext);//用于设置下载文件的文件名\n\n            ele.setAttribute(\"target\", \"_self\");\n            ele.click();\n\n          }else {\n            download(_this, res.data, _this.ontent_datas.imgSn + '.' + ext);\n          }\n\n          // let xhr = new XMLHttpRequest();\n          // xhr.responseType = 'blob';\n          // xhr.open('GET', res.data, true);\n          // xhr.onload = function(){\n          //     let res1 = xhr.response;\n          //     if(res1){\n          //         const link = document.createElement(\"a\");\n          //         link.href = URL.createObjectURL(res1);\n          //         link.download = _this.ontent_datas.imgSn + '.' + ext;\n          //         link.click();\n          //         URL.revokeObjectURL(link.href);\n          //     }\n          // }\n          // xhr.send();\n        } else {\n          this.$message(res.desc);\n          //\n        }\n      });\n\n    },\n    changeSize() {\n      if (this.p != null && this.p.length > 0)\n        sorting_list(this.p, this);\n    },\n    // sorting_list(x) {\n    //   // 声明一个数组，用来记录每一列的高度\n    //\n    //   let paddingwidth = 0.2;\n    //\n    //   let paddingWidth=0.1 * this.$store.state.fontRate;\n    //   let imgContainerWidth = document.documentElement.clientWidth - paddingwidth * this.$store.state.fontRate;\n    //\n    //   if (imgContainerWidth > 2380) {\n    //     this.listnumber = 10\n    //   } else if (imgContainerWidth > 2140) {\n    //     this.listnumber = 9\n    //   } else if (imgContainerWidth > 1900) {\n    //     this.listnumber = 8\n    //   } else if (imgContainerWidth > 1660) {\n    //     this.listnumber = 7\n    //   } else if (imgContainerWidth > 1420) {\n    //     this.listnumber = 6\n    //   } else if (imgContainerWidth > 1180) {\n    //     this.listnumber = 5\n    //   } else if (imgContainerWidth > 940) {\n    //     this.listnumber = 4\n    //   } else if (imgContainerWidth > 700) {\n    //     this.listnumber = 3\n    //   } else {\n    //     this.listnumber = 2\n    //   }\n    //\n    //   let imgWidth = Math.round(imgContainerWidth / this.listnumber * 100) / 100;\n    //\n    //   let Height_array = [];\n    //\n    //\n    //   for (let index = 0; index < x.length; index++) {\n    //     // 拿到宽度\n    //     x[index].width = imgWidth;\n    //\n    //     x[index].height = imgWidth * (x[index].imgHeight / x[index].imgWeight);\n    //     if (index < this.listnumber) {\n    //       x[index].top = 0;\n    //       x[index].left = (index % (this.listnumber + 1)) * (x[index].width);\n    //       // 每一列的高度是当前图片的高度   图片的高度是高宽比*256+bottom\n    //\n    //       Height_array.push(\n    //           (x[index].imgHeight / x[index].imgWeight) * x[index].width + 56\n    //       );\n    //     } else {\n    //       let min = Height_array.minindex(Height_array); //拿到最短列的下标\n    //\n    //       // console.log(Height_array);\n    //       // console.log(Height_array[min]);\n    //       // 当前的图片的top 就是最低列的高度\n    //       x[index].top = Height_array[min];\n    //       // 当前图片的left 是最低列的下标*(256 + 16)\n    //       x[index].left = min * (x[index].width);\n    //       // 然后最低列的高度此时就是最低列的高度加上当前图片的高度\n    //       Height_array[min] =\n    //           Height_array[min] +\n    //           (x[index].imgHeight / x[index].imgWeight) * x[index].width +\n    //           56;\n    //     }\n    //   }\n    //   // 这里获取列的最大值复制给付元素\n    //   this.consHeight = Height_array.max(Height_array);\n    //\n    //   this.linelist = \"\";\n    //\n    //   window.linelist = this.linelist = x;\n    // },\n    selectAlikeById() {\n      // this.linelist=null;\n      let vm = this;\n      this.rq({\n        url: \"/api/product/selectAlikeById\",\n        method: \"post\",\n        param: {\n          productId: vm.productId\n        },\n        onError: function () {\n        },\n        vm,\n      }).then((res) => {\n        if (res.code == 200) {\n          vm.p = res.data;\n\n          if (vm.p == undefined) {\n            this.linelist = null;\n            this.consHeight = 0;\n          } else {\n            //   获取宽度\n            sorting_list(vm.p, vm);\n          }\n        } else {\n          //\n          this.$message(res.desc);\n        }\n      });\n    },\n    //   License Type 单选 👈\n    content_list_bools(a) {\n      this.licenseType = a;\n      this.calcPrice()\n      // for (let index = 0; index < this.content_list_boll.length; index++) {\n      //   this.content_list_boll[index] = false;\n      // }\n      // this.content_list_boll[a] = true; //由于数组更新没有办法触发dom更新，所以给数组进行重新负值吧\n      //\n      // let x = this.content_list_boll;\n      // this.content_list_boll = [];\n      // this.content_list_boll = x;\n    },\n    //   点击备选图 👈\n    candidate_click(src) {\n      if (this.conteent_img2 == \"\") {\n        // 首先将content图片给 旁边的小图片\n        this.conteent_img2 = this.conteent_img;\n      }\n\n      // 然后将src给content\n      this.conteent_img = src;\n    },\n\n    // 小图片和大图片的呼唤👈\n    content_img2_click() {\n      // 声明一个变量，作为临时数据存放\n      let ImgMaxSrc = this.conteent_img;\n      this.conteent_img = this.conteent_img2;\n      this.conteent_img2 = ImgMaxSrc;\n    },\n    calcPrice() {\n      const _this = this;\n      let licenseType = _this.licenseType;\n      let price = _this.ontent_datas.price;\n      let priceOnce = _this.ontent_datas.priceOnce;\n\n      if (licenseType == 3) {\n        _this.licensePrice = priceOnce;\n      } else if (licenseType == 5) {\n        _this.licensePrice = price;\n      } else if (licenseType == 4) {\n        _this.licensePrice = Math.round(price * 0.8 * 100) / 100;\n      } else if (licenseType == 1) {\n        _this.licensePrice = Math.round(price * 0.5 * 100) / 100;\n      }\n    },\n    //   获取备选图 👈\n    candidate() {\n      let vm = this;\n      this.rq({\n        url: \"/api/product/selectById\",\n        method: \"post\",\n        param: {\n          productId: vm.productId,\n        },\n        onError: function () {\n        },\n        vm,\n      }).then((res) => {\n        vm.repatFlag = 0;\n        if (res.code == 200) {\n          //   vm.p = res.data.aaData;\n          vm.ontent_datas = res.data;\n\n          // 首先判断用户是否登陆\n          if (res.user && res.user.id) {\n\n          } else {\n\n            let m = JSON.parse(localStorage.getItem('sshopping_car'));\n            if (m && m.length > 0) {\n              if (m.some(item => item.productId == vm.productId)) {\n                vm.ontent_datas.isBuy = 1;\n              }\n              // let s = JSON.parse(localStorage.sshopping_car)\n              // for (let index = 0; index < s.length; index++) {\n              //   if (s[index].imgSn === vm.ontent_datas.imgSn) {\n              //     vm.Bag = false\n              //   }\n              //\n              // }\n\n            }\n\n          }\n\n          if (vm.ontent_datas.isUse > 0) {\n            vm.licenseType = 5;\n          } else {\n            vm.licenseType = 3;\n          }\n\n          // 可以买断\n          if (vm.ontent_datas.isBuyout == 1) {\n            vm.licenseType = 3;\n          }\n          // if (vm.ontent_datas.hasCollection > 0) {\n          //   this.Collect = false\n          // }\n\n          this.calcPrice();\n\n          vm.types = [];\n          vm.ontent_datas.isRepeat=0;\n          vm.ontent_datas.isLayer=0;\n\n          res.data.styleStr.split(',').forEach(item => {\n            if (item != '') {\n              vm.types.push(item)\n\n              if(item=='In Repeat' || item=='Cyclic graph'){\n                vm.ontent_datas.isRepeat=1;\n              }\n              if(item.indexOf('Simple layered')>=0 || item=='Layered file' || item=='Color separation'){\n                vm.ontent_datas.isLayer=1;\n              }\n            }\n          });\n\n          if(res.data.imgSize){\n\n            if(res.data.imgSize=='矢量图'){\n              vm.imgSize='Vector image';\n            }else{\n              let wp=300,hp=300;\n              let w='',h='',imgSize,wh;\n\n              if(res.data.imgSize.indexOf('cm')>=0){\n                imgSize=res.data.imgSize.replace('cm','');\n                imgSize=imgSize.replace('cm','');\n                wh=imgSize.split(\"*\");\n                if(wh[0]){\n                  w=Math.round(wh[0]/254*100*wp);\n                }\n                if(wh[1]){\n                  h=Math.round(wh[1]/254*100*wp);\n                }\n\n              }else{\n                imgSize=res.data.imgSize.replace('像素','');\n                imgSize=imgSize.replace('像素','');\n                wh=imgSize.split(\"*\");\n                w=wh[0];\n                h=wh[1];\n              }\n              if(w && h) {\n                vm.imgSize=w + '*' + h ;\n\n                let w3='',w6='',h3='',h6='';\n                if(w){\n                  w3=Math.round(w*254/300)/100;\n                  w6=Math.round(w*254/600)/100;\n                }\n                if(h){\n                  h3=Math.round(h*254/300)/100;\n                  h6=Math.round(h*254/600)/100;\n                }\n\n                vm.printSize1=w3+'*'+h3+'cm(300dpi)';\n                vm.printSize2=w6+'*'+h6+'cm(600dpi)';\n              }else {\n                vm.imgSize=res.data.imgSize;\n                vm.printSize1='';\n                vm.printSize2='';\n              }\n\n            }\n\n          }else{\n            vm.imgSize='';\n            vm.printSize1='';\n            vm.printSize2='';\n          }\n\n\n          vm.categories = [];\n          res.data.productFicationStr.split(',').forEach(item => {\n            if (item != '')\n              vm.categories.push(item)\n          });\n\n          vm.tags = [];\n          res.data.label.split(',').forEach(item => {\n            if (item != '')\n              vm.tags.push(item)\n          });\n          res.data.entityStr.split(',').forEach(item => {\n            if (item != '')\n              vm.tags.push(item)\n          });\n          res.data.sceneStr.split(',').forEach(item => {\n            if (item != '')\n              vm.tags.push(item)\n          });\n          res.data.seasonStr.split(',').forEach(item => {\n            if (item != '')\n              vm.tags.push(item)\n          });\n          res.data.fashionStr.split(',').forEach(item => {\n            if (item != '')\n              vm.tags.push(item)\n          });\n\n\n          // console.log(\"res.data.isRepeat\", res.data.isRepeat);\n          vm.isRepeat = res.data.isRepeat;\n          // vm.conteent_img = vm.$imgServer + res.data.cover;\n          vm.conteent_img = vm.$imgServer + res.data.cover;\n\n          // vm.img = vm.conteent_img;\n          vm.loadImg(vm.conteent_img);\n          vm.nameList[0].img = vm.conteent_img;\n          vm.nameList[0].bigpsd.img = vm.conteent_img;\n\n          // let img = new Image();\n          // img.setAttribute(\"crossOrigin\", \"anonymous\");\n          // // img.setAttribute(\"crossOrigin\", \"use-credentials\");\n          // img.src = vm.conteent_img;\n          // img.onload = () => {\n          //   // console.log(img);\n          //   let canvas = document.createElement(\"canvas\");\n          //   let ctx3 = canvas.getContext(\"2d\");\n          //   let canvasclip = document.createElement(\"canvas\");\n          //   let ctx4 = canvasclip.getContext(\"2d\");\n          //   canvasclip.width = 1200;\n          //   canvasclip.height = 1200;\n          //   let Width = img.width / 3;\n          //   let Height = (img.height * Width) / img.width;\n          //   canvas.width = Width * 3;\n          //   canvas.height = Height * 3;\n          //   ctx3.drawImage(img, 0, 0, Width, Height);\n          //   ctx3.drawImage(img, Width, 0, Width, Height);\n          //   ctx3.drawImage(img, 2 * Width, 0, Width, Height);\n          //   ctx3.drawImage(img, 0, Height, Width, Height);\n          //   ctx3.drawImage(img, Width, Height, Width, Height);\n          //   ctx3.drawImage(img, 2 * Width, Height, Width, Height);\n          //   ctx3.drawImage(img, 0, 2 * Height, Width, Height);\n          //   ctx3.drawImage(img, Width, 2 * Height, Width, Height);\n          //   ctx3.drawImage(img, 2 * Width, 2 * Height, Width, Height);\n          //   let startX = (canvas.width - canvasclip.width) / 2;\n          //   let startY = (canvas.height - canvasclip.width) / 2;\n          //   ctx4.drawImage(\n          //     canvas,\n          //     startX,\n          //     startY,\n          //     canvasclip.width,\n          //     canvasclip.width,\n          //     0,\n          //     0,\n          //     canvasclip.width,\n          //     canvasclip.width\n          //   );\n          //   let imgs = canvasclip.toDataURL(\"image/png\");\n          //   vm.nameList[1].img = imgs;\n          //   vm.nameList[1].bigpsd.img = imgs;\n          //   // document.body.append(canvas)\n          //   // document.body.append(canvasclip);\n          // };\n\n\n          if (res.data.attachList.length != 0) {\n            vm.candidate_imglist = res.data.attachList;\n\n            for (let index = 0; index < vm.candidate_imglist.length; index++) {\n              vm.candidate_imglist[index].src =\n                vm.$imgServer + vm.candidate_imglist[index].src;\n            }\n            for (let index = 0; index < 20; index++) {\n              vm.candidate_imglist.push(vm.candidate_imglist[0]);\n            }\n          }\n          this.su = true\n        } else {\n          //\n          this.$message(res.desc);\n        }\n      });\n    },\n\n    // 效果图新增的methods函数\n    // 获取模型的函数\n    async getPSD() {\n      // console.log('object');\n      await this.getName();\n      this.getlist();\n    },\n    getName() {\n      // console.log(111);\n      let _this = this;\n      // axios 基本使用\n      axios({\n        url: \"/name.js\", // 请求的链接\n      }).then((res) => {\n        _this.nameList = res.data;\n      });\n\n      // axios({\n      //   url: \"//116.62.59.86:10811/name.js\", // 请求的链接\n      // })\n      //   .then((res) => {\n      //\n      //     // 接受请求成功返回的数据\n      //     // console.log(res);\n      //     _this.nameList = res.data;\n      //   })\n      // .catch((err) => {\n      //   // 接受请求失败返回的数据\n      //   // console.log(err);\n      //   console.log(1);\n      // });\n    },\n    // 第一次处理数据,为了让大的psd与后台接口返回的合并\n    getList1() {\n      for (var key in this.psdList) {\n        // let map = {};\n        this.nameList.map((item) => {\n          let bigpsd;\n          if (item.bigpsd) {\n            bigpsd = item.bigpsd.title;\n          }\n          if (bigpsd === this.psdList[key].title) {\n            let copy = Object.assign(this.psdList[key], item.bigpsd);\n            item.bigpsd = copy;\n            // console.log(item);\n            this.newModelsList.push(item);\n          }\n        });\n      }\n    },\n    // 第二次处理数据,为了让第一次得到的大的psd数据与原本本地数据合并\n    getlist2() {\n      this.getList1();\n      for (var key in this.nameList) {\n        // let map = {};\n        this.newModelsList.map((item) => {\n          if (this.nameList[key].title == item.title) {\n            this.nameList[key] = item;\n          }\n        });\n      }\n    },\n    // 第三次处理数据,为了得到最终大的psd 和小的psd  以后后台传回来的数据 都合并\n    getlist() {\n      this.getlist2();\n    },\n    // 效果图新增函数\n    //处理模型的函数\n    zoomIn(iScale) {\n      let _this = this;\n\n      _this.repatFlag = 3;\n      console.log(iScale);\n\n      // console.log(\"执行了放大缩小\");\n      _this.zoomPoint = new fabric.Point(\n        _this.clipWidth / 2,\n        _this.clipHeight / 2\n      ); // 中心点\n      _this.value = parseInt(_this.imgScale * 100);\n      _this.myCanvas.zoomToPoint(_this.zoomPoint, _this.imgScale);\n      let obj = _this.myCanvas.getObjects();\n      // if (_this.repatFlag) {\n      if (_this.repatFlag == 1) {\n        obj.forEach((res) => {\n          if (\n            res.left >= (_this.clipWidth - res.width * res.scaleX) / 2 &&\n            res.left < (_this.clipWidth + res.width * res.scaleX) / 2\n          ) {\n            _this.fabObj = res;\n          }\n        });\n      } else if (_this.repatFlag == 2) {\n        obj.forEach((res) => {\n          if (\n            res.top >= (_this.clipHeight - res.height * res.scaleY) / 2 &&\n            res.top < (_this.clipHeight + res.height * res.scaleY) / 2\n          ) {\n            _this.fabObj = res;\n          }\n        });\n      } else if (_this.repatFlag == 0) {\n        _this.fabObj = obj[0];\n      } else if (_this.repatFlag == 3) {\n        obj.some((res) => {\n          if (\n            res.left >= (_this.clipWidth - res.width * res.scaleX) / 2 &&\n            res.left < (_this.clipWidth + res.width * res.scaleX) / 2 &&\n            res.top >= (_this.clipHeight - res.height * res.scaleY) / 2 &&\n            res.top < (_this.clipHeight + res.height * res.scaleY) / 2\n          ) {\n            _this.fabObj = res;\n            return false;\n          }\n          return true;\n        });\n      }\n      obj.forEach((res) => {\n        if (_this.repatFlag == 2 || _this.repatFlag == 0) {\n          res.left =\n            (res.left - _this.clipWidth / 2) / iScale + _this.clipWidth / 2;\n        }\n        if (_this.repatFlag == 1 || _this.repatFlag == 0) {\n          res.top =\n            (res.top - _this.clipWidth / 2) / iScale + _this.clipWidth / 2;\n        }\n        _this.myCanvas.remove(res);\n        _this.myCanvas.add(res);\n      });\n      // 左右偏移边界\n      if (_this.repatFlag == 2 || _this.repatFlag == 0) {\n        if (\n          _this.fabObj.left <\n          _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale\n        ) {\n          _this.fabObj.left =\n            _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale;\n        } else if (\n          _this.fabObj.left >\n          _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale\n        ) {\n          _this.fabObj.left =\n            _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale;\n        }\n      }\n      // 上下偏移边界\n      if (_this.repatFlag == 1 || _this.repatFlag == 0) {\n        if (\n          _this.fabObj.top <\n          _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale\n        ) {\n          _this.fabObj.top =\n            _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale;\n        } else if (\n          _this.fabObj.top >\n          _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale\n        ) {\n          _this.fabObj.top =\n            _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale;\n        }\n      }\n      _this.myCanvas.remove(_this.fabObj);\n      _this.myCanvas.add(_this.fabObj);\n      let leftNum = 0,\n        rightNum = 0,\n        topNum = 0,\n        bottomtNum = 0;\n      _this.repatGroup.forEach((res) => {\n        if (res.left < _this.fabObj.left && res.top == _this.fabObj.top) {\n          leftNum++;\n        } else if (\n          res.left > _this.fabObj.left &&\n          res.top == _this.fabObj.top\n        ) {\n          rightNum++;\n        }\n        if (res.top < _this.fabObj.top && res.left == _this.fabObj.left) {\n          topNum++;\n        } else if (\n          res.top > _this.fabObj.top &&\n          res.left == _this.fabObj.left\n        ) {\n          bottomtNum++;\n        }\n      });\n      _this.leftNum = Math.max(_this.leftNum, leftNum);\n      _this.rightNum = Math.max(_this.rightNum, rightNum);\n      _this.topNum = Math.max(_this.topNum, topNum);\n      _this.bottomtNum = Math.max(_this.bottomtNum, bottomtNum);\n      // 边缩放边画图\n      const imgEl = document.createElement(\"img\");\n      imgEl.crossOrigin = \"Anonymous\";\n      imgEl.src = _this.img.src;\n      // document.body.append(imgEl)\n\n      let widthNumLeft = Math.ceil(\n        ((_this.fabObj.left - _this.clipWidth / 2) * _this.imgScale +\n          _this.clipWidth / 2 -\n          (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n          (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n      );\n      let widthNumRight = Math.ceil(\n        ((_this.clipWidth / 2 - _this.fabObj.left) * _this.imgScale +\n          _this.clipWidth / 2 -\n          (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n          (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n      );\n      let heightNumTop = Math.ceil(\n        ((_this.fabObj.top - _this.clipWidth / 2) * _this.imgScale +\n          _this.clipWidth / 2 -\n          (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n          (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n      );\n      let heightNumBottom = Math.ceil(\n        ((_this.clipWidth / 2 - _this.fabObj.top) * _this.imgScale +\n          _this.clipWidth / 2 -\n          (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n          (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n      );\n      // console.log(_this.repatFlag);\n      if (_this.repatFlag == 1) {\n        // console.log(\"执行了1\");\n        if (widthNumLeft > _this.leftNum) {\n          let t = _this.leftNum + 1;\n          _this.leftNum = widthNumLeft;\n          for (let ln = t; ln <= widthNumLeft; ln++) {\n            _this.moves.left =\n              _this.fabObj.left - _this.fabObj.scaleY * _this.fabObj.width * ln;\n            _this.moves.top = _this.fabObj.top;\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: _this.moves.top,\n              left: _this.moves.left,\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          }\n        }\n        if (widthNumRight > _this.rightNum) {\n          let t1 = _this.rightNum + 1;\n          _this.rightNum = widthNumRight;\n          for (let ln = t1; ln <= widthNumRight; ln++) {\n            _this.moves.left =\n              _this.fabObj.left + _this.fabObj.scaleY * _this.fabObj.width * ln;\n            _this.moves.top = _this.fabObj.top;\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: _this.moves.top,\n              left: _this.moves.left,\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          }\n        }\n      } else if (_this.repatFlag == 2) {\n        if (heightNumTop > _this.topNum) {\n          let t = _this.topNum + 1;\n          _this.topNum = heightNumTop;\n          // console.log(\"上\", _this.topNum);\n          for (let ln = t; ln <= heightNumTop; ln++) {\n            _this.moves.left = _this.fabObj.left;\n            _this.moves.top =\n              _this.fabObj.top - _this.fabObj.scaleY * _this.fabObj.height * ln;\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: _this.moves.top,\n              left: _this.moves.left,\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          }\n        }\n        if (heightNumBottom > _this.bottomtNum) {\n          let t1 = _this.bottomtNum + 1;\n          _this.bottomtNum = heightNumBottom;\n          for (let ln = t1; ln <= heightNumBottom; ln++) {\n            _this.moves.left = _this.fabObj.left;\n            _this.moves.top =\n              _this.fabObj.top + _this.fabObj.scaleY * _this.fabObj.height * ln;\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: _this.moves.top,\n              left: _this.moves.left,\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          }\n        }\n      } else if (_this.repatFlag == 3) {\n        // console.log(\"执行了3\");\n        if (widthNumLeft > _this.leftNum) {\n          let t = _this.leftNum + 1;\n          _this.leftNum = widthNumLeft;\n          for (let ln = t; ln <= widthNumLeft; ln++) {\n            for (let ln1 = _this.bottomtNum * -1; ln1 <= _this.topNum; ln1++) {\n              _this.moves.left =\n                _this.fabObj.left -\n                _this.fabObj.scaleY * _this.fabObj.width * ln;\n              _this.moves.top =\n                _this.fabObj.top -\n                _this.fabObj.scaleX * _this.fabObj.height * ln1;\n              let imgs = new fabric.Image(_this.img, {\n                scaleX: _this.fabObj.scaleX,\n                scaleY: _this.fabObj.scaleY,\n                top: _this.moves.top,\n                left: _this.moves.left,\n                originX: \"center\",\n                originY: \"center\",\n              });\n              _this.myCanvas.add(imgs);\n              _this.repatGroup.push(imgs);\n              _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n            }\n          }\n        }\n        if (widthNumRight > _this.rightNum) {\n          // console.log(\"向左\");\n          let t1 = _this.rightNum + 1;\n          _this.rightNum = widthNumRight;\n          for (let ln = t1; ln <= widthNumRight; ln++) {\n            for (let ln1 = _this.bottomtNum * -1; ln1 <= _this.topNum; ln1++) {\n              _this.moves.left =\n                _this.fabObj.left +\n                _this.fabObj.scaleY * _this.fabObj.width * ln;\n              _this.moves.top =\n                _this.fabObj.top -\n                _this.fabObj.scaleX * _this.fabObj.height * ln1;\n              let imgs = new fabric.Image(_this.img, {\n                scaleX: _this.fabObj.scaleX,\n                scaleY: _this.fabObj.scaleY,\n                top: _this.moves.top,\n                left: _this.moves.left,\n                originX: \"center\",\n                originY: \"center\",\n              });\n              _this.myCanvas.add(imgs);\n              _this.repatGroup.push(imgs);\n              _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n            }\n          }\n        }\n        if (heightNumTop > _this.topNum) {\n          let t = _this.topNum + 1;\n          _this.topNum = heightNumTop;\n          for (let ln = t; ln <= heightNumTop; ln++) {\n            for (let ln1 = _this.rightNum * -1; ln1 <= _this.leftNum; ln1++) {\n              _this.moves.left =\n                _this.fabObj.left -\n                _this.fabObj.scaleX * _this.fabObj.width * ln1;\n              _this.moves.top =\n                _this.fabObj.top -\n                _this.fabObj.scaleY * _this.fabObj.height * ln;\n              let imgs = new fabric.Image(_this.img, {\n                scaleX: _this.fabObj.scaleX,\n                scaleY: _this.fabObj.scaleY,\n                top: _this.moves.top,\n                left: _this.moves.left,\n                originX: \"center\",\n                originY: \"center\",\n              });\n              _this.myCanvas.add(imgs);\n              _this.repatGroup.push(imgs);\n              _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n            }\n          }\n        }\n        if (heightNumBottom > _this.bottomtNum) {\n          let t1 = _this.bottomtNum + 1;\n          _this.bottomtNum = heightNumBottom;\n          for (let ln = t1; ln <= heightNumBottom; ln++) {\n            for (let ln1 = _this.rightNum * -1; ln1 <= _this.leftNum; ln1++) {\n              _this.moves.left =\n                _this.fabObj.left -\n                _this.fabObj.scaleX * _this.fabObj.width * ln1;\n\n              _this.moves.top =\n                _this.fabObj.top +\n                _this.fabObj.scaleY * _this.fabObj.height * ln;\n\n              let imgs = new fabric.Image(_this.img, {\n                scaleX: _this.fabObj.scaleX,\n                scaleY: _this.fabObj.scaleY,\n                top: _this.moves.top,\n                left: _this.moves.left,\n                originX: \"center\",\n                originY: \"center\",\n              });\n              _this.myCanvas.add(imgs);\n              _this.repatGroup.push(imgs);\n              _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n            }\n          }\n        }\n      }\n      _this.drawImageClip();\n    },\n    // 初始化obj文件\n    initObj(id) {\n      let _this = this;\n      _this.modelId = id;\n      this.nameList.findIndex((i) => {\n        // console.log(i);\n        if (i.id === id) {\n          if (i.id === 0 || i.id === 10001) {\n            // console.log(i);\n            _this.canvasShowFlag = false;\n            this.imgShowFlag1 = true;\n            this.imgShowFlag2 = false;\n            this.imgShowFlag3 = false;\n            // this.slideFlag = false;\n\n            // _this.nameList[1].img\n\n            // _this.initCanvas.setZoom(1);\n\n            let scale = 1;\n            if (_this.imgPxWidth > _this.imgPxHeight) {\n              scale = _this.calculateWidth / _this.imgPxWidth / _this.kMultiple;\n            } else {\n              scale = _this.calculateHeiht / _this.imgPxHeight / _this.kMultiple;\n            }\n\n            if (i.id === 0) {\n              this.maxScale = 400;\n              let img1 = new fabric.Image(_this.img, {\n                hasControls: false,\n                scaleX: scale,\n                scaleY: scale,\n                angle: 0,\n                // opacity:0,\n                originX: \"center\",\n                originY: \"center\",\n                top: _this.clipWidth / 2,\n                left: _this.clipHeight / 2,\n              });\n\n              let obj = _this.initCanvas.getObjects();\n              obj.forEach((res) => {\n                _this.initCanvas.remove(res);\n              });\n\n              _this.initCanvas.add(img1);\n            } else {\n              this.maxScale = 200;\n              fabric.Image.fromURL(_this.nameList[1].img, function (oimg) {\n                oimg.hasControls = false;\n                oimg.scaleX = scale / 2;\n                oimg.scaleY = scale / 2;\n                oimg.angle = 0;\n                // opacity:0,\n                oimg.originX = \"center\";\n                oimg.originY = \"center\";\n                oimg.top = _this.clipWidth / 2;\n                oimg.left = _this.clipHeight / 2;\n\n                let obj = _this.initCanvas.getObjects();\n                obj.forEach((res) => {\n                  _this.initCanvas.remove(res);\n                });\n\n                _this.initCanvas.add(oimg);\n              });\n            }\n\n            _this.values = 100;\n            _this.sliderHandler(_this.values);\n\n          } else {\n            this.maxScale = 200;\n            _this.canvasShowFlag = true;\n            _this.imgShowFlag1 = false;\n            _this.imgShowFlag2 = true;\n            _this.imgShowFlag3 = false;\n\n            // if (this.isRepeat == 0) {\n            //   this.repatFlag = 0;\n            // } else {\n            //   this.repatFlag = 3;\n            // }\n            if (i.id === 10001) {\n              this.repatFlag = 3;\n              _this.modelImg = i.bigpsd.img;\n              this.obj.name = i.name;\n              this.obj.modelSize = i.modelSize;\n              this.obj.bigpsd = i.bigpsd;\n              if (i.modelSize.indexOf(\"cm\") != -1) {\n                var str = i.modelSize;\n                let reg1 = new RegExp(\"cm\", \"g\");\n                i.modelSize = str.replace(reg1, \"\");\n                this.modelArray = i.modelSize.split(\"*\");\n              } else {\n                this.modelArray = i.modelSize.split(\"*\");\n              }\n              // fabric.js 重置大小位置\n              this.myCanvas.setZoom(1);\n              this.myCanvas.absolutePan({ x: 0, y: 0 });\n              this.drawLine();\n              this.switchImgShow();\n\n              // this.imgScale = 1;\n              // this.loading(this.img);\n              this.loading(this.img, true);\n              this.imgShowFlag2 = true;\n              this.imgShowFlag3 = false;\n              // this.slideFlag = true;\n              _this.values = 100;\n              // _this.values = 100;\n            } else {\n              this.repatFlag = 3;\n              _this.modelImg = i.bigpsd.img;\n              this.obj.name = i.name;\n              this.obj.modelSize = i.modelSize;\n              this.obj.bigpsd = i.bigpsd;\n              if (i.modelSize.indexOf(\"cm\") != -1) {\n                let str = i.modelSize;\n                let reg1 = new RegExp(\"cm\", \"g\");\n                i.modelSize = str.replace(reg1, \"\");\n                this.modelArray = i.modelSize.split(\"*\");\n              } else {\n                this.modelArray = i.modelSize.split(\"*\");\n              }\n              // fabric.js 重置大小位置\n              this.myCanvas.setZoom(1);\n              this.myCanvas.absolutePan({ x: 0, y: 0 });\n              this.drawLine();\n              this.switchImgShow();\n              this.loading(this.img);\n              this.imgShowFlag2 = true;\n              this.imgShowFlag3 = false;\n              // this.slideFlag = true;\n              _this.values = 100;\n            }\n          }\n        }\n      });\n    },\n    // 初始化图片\n    init(img, imgArray, flag, imgSn) {\n      var _this = this;\n      _this.imgArray = imgArray;\n      this.imgSn = imgSn;\n      _this.repatFlag = 0;\n      _this.imgX = 0;\n      _this.imgY = 0;\n      // this.loadImg(img);\n    },\n    // 拿到图片放在canvas上\n    loadImg(imgs) {\n\n      //   获取this\n      var _this = this;\n      // console.log(this.img);\n      var img = new Image();\n      img.setAttribute(\"crossOrigin\", \"anonymous\");\n      img.src = imgs;\n      img.onload = () => {\n\n        let w300 = Math.round((img.width * 254) / 300) / 100;\n        let h300 = Math.round((img.height * 254) / 300) / 100;\n        _this.imgArray = [w300, h300];\n        _this.imgPxWidth = _this.img.width;\n        _this.imgPxHeight = _this.img.height;\n        // 调用切换图片展示的方法 ,默认图片对原尺寸\n        // _this.imgShowChange(_this.imgShowFlag);\n        _this.imgScale = 1;\n        // fabric.js 重置大小位置\n        // this.myCanvas.setZoom(1);\n        // this.myCanvas.absolutePan({ x: 0, y: 0 });\n        //\n        // let obj = _this.myCanvas.getObjects();\n        // obj.forEach((res) => {\n        //   _this.myCanvas.remove(res);\n        // });\n        _this.switchImgShow();\n        // _this.drawImage();\n\n        let scale = 1;\n        if (_this.imgPxWidth > _this.imgPxHeight) {\n          scale = _this.calculateWidth / _this.imgPxWidth / _this.kMultiple;\n        } else {\n          scale = _this.calculateHeiht / _this.imgPxHeight / _this.kMultiple;\n        }\n\n        let img1 = new fabric.Image(img, {\n          hasControls: false,\n          scaleX: scale,\n          scaleY: scale,\n          angle: 0,\n          // opacity:0,\n          originX: \"center\",\n          originY: \"center\",\n          top: _this.clipWidth / 2,\n          left: _this.clipHeight / 2,\n        });\n        _this.initCanvas.add(img1);\n\n        let imgs = new fabric.Image(img, {\n          scaleX: scale,\n          scaleY: scale,\n          angle: 0,\n          // opacity:0,\n          originX: \"center\",\n          originY: \"center\",\n          top: _this.clipWidth / 2,\n          left: _this.clipHeight / 2,\n        });\n        _this.fabObj = imgs;\n\n        // console.log(img);\n        let canvas = document.createElement(\"canvas\");\n        let ctx3 = canvas.getContext(\"2d\");\n        // let canvasclip = document.createElement(\"canvas\");\n        // let ctx4 = canvasclip.getContext(\"2d\");\n        let ww = 800, hh = (800 * img.height) / img.width;\n        // let ww3=ww,hh=hh;\n        // canvasclip.width = ww;\n        // canvasclip.height = hh;\n        // let Height = (img.height * Width) / img.width;\n        // let Width = img.width / 3;\n        canvas.width = ww * 3;\n        canvas.height = hh * 3;\n        ctx3.drawImage(img, 0, 0, ww, hh);\n        ctx3.drawImage(img, ww, 0, ww, hh);\n        ctx3.drawImage(img, 2 * ww, 0, ww, hh);\n        ctx3.drawImage(img, 0, hh, ww, hh);\n        ctx3.drawImage(img, ww, hh, ww, hh);\n        ctx3.drawImage(img, 2 * ww, hh, ww, hh);\n        ctx3.drawImage(img, 0, 2 * hh, ww, hh);\n        ctx3.drawImage(img, ww, 2 * hh, ww, hh);\n        ctx3.drawImage(img, 2 * ww, 2 * hh, ww, hh);\n        // let startX = (canvas.width - canvasclip.width) / 2;\n        // let startY = (canvas.height - canvasclip.width) / 2;\n        // ctx4.drawImage(\n        //     canvas,\n        //     startX,\n        //     startY,\n        //     canvasclip.width,\n        //     canvasclip.width,\n        //     0,\n        //     0,\n        //     canvasclip.width,\n        //     canvasclip.width\n        // );\n        let imgs1 = canvas.toDataURL(\"image/png\");\n        _this.nameList[1].img = imgs1;\n        _this.nameList[1].bigpsd.img = imgs1;\n\n\n        // console.log(_this.img)\n        // console.log(\"执行了加载图片的函数\");\n\n        _this.selectAlikeById();\n      };\n      _this.img = img;\n    },\n    loading(img, flag) {\n      var _this = this;\n\n      let w300 = Math.round((img.width * 254) / 300) / 100;\n      let h300 = Math.round((img.height * 254) / 300) / 100;\n      _this.imgArray = [w300, h300];\n      _this.imgPxWidth = _this.img.width;\n      _this.imgPxHeight = _this.img.height;\n      _this.imgScale = 1;\n      // fabric.js 重置大小位置\n      this.myCanvas.setZoom(1);\n      this.myCanvas.absolutePan({ x: 0, y: 0 });\n\n      let obj = _this.myCanvas.getObjects();\n      obj.forEach((res) => {\n        _this.myCanvas.remove(res);\n      });\n      _this.switchImgShow();\n      _this.drawImage(flag);\n    },\n    // 画图\n    drawImage(flag) {\n      var _this = this;\n      // console.log(_this.repatFlag);\n      let scale = 1;\n      if (_this.imgPxWidth > _this.imgPxHeight) {\n        scale = _this.calculateWidth / _this.imgPxWidth / _this.kMultiple;\n      } else {\n        scale = _this.calculateHeiht / _this.imgPxHeight / _this.kMultiple;\n      }\n      if (flag) {\n        this.imgScale = 1 / 3;\n      } else {\n        this.imgScale = 1;\n      }\n      // console.log(flag, scale);\n      const objs = _this.myCanvas.getObjects();\n      if (objs.length > 0) {\n        _this.repatGroup.forEach((res) => {\n          _this.myCanvas.remove(res);\n        });\n      }\n      if (_this.repatFlag) {\n        // 平铺的图片\n        _this.widthNum = Math.floor(\n          _this.clipWidth /\n            (_this.imgScale * _this.fabObj.width * _this.fabObj.scaleX)\n        );\n        _this.heightNum = Math.floor(\n          _this.clipHeight /\n            (_this.imgScale * _this.fabObj.height * _this.fabObj.scaleY)\n        );\n        let widthNumLeft = Math.ceil(\n          ((_this.fabObj.left - _this.clipWidth / 2) * _this.imgScale +\n            _this.clipWidth / 2 -\n            (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n            (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n        );\n        let widthNumRight = Math.ceil(\n          ((_this.clipWidth / 2 - _this.fabObj.left) * _this.imgScale +\n            _this.clipWidth / 2 -\n            (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n            (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n        );\n\n        let heightNumTop = Math.ceil(\n          ((_this.fabObj.top - _this.clipWidth / 2) * _this.imgScale +\n            _this.clipWidth / 2 -\n            (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n            (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n        );\n        let heightNumBottm = Math.ceil(\n          ((_this.clipWidth / 2 - _this.fabObj.top) * _this.imgScale +\n            _this.clipWidth / 2 -\n            (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n            (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n        );\n        _this.leftNum = widthNumLeft;\n        _this.rightNum = widthNumRight;\n        _this.topNum = heightNumTop;\n        _this.bottomtNum = heightNumBottm;\n        _this.arrCross1 = []; //平铺之后的数组\n        if (_this.repatFlag == 1) {\n          // 横向平铺的是 最中间是纵向的数组,1个,剩下的全是横向的数组\n          _this.arrCross1 = [];\n          if (_this.repatGroup.length > 0) {\n            _this.repatGroup.forEach((res) => {\n              _this.myCanvas.remove(res);\n            });\n            _this.repatGroup = [];\n          }\n          for (let a = 1; a <= widthNumLeft; a++) {\n            _this.arrCross1.push([\n              _this.fabObj.top,\n              _this.fabObj.left - _this.fabObj.scaleY * _this.fabObj.width * a,\n            ]);\n          }\n          for (let a = 1; a <= widthNumRight; a++) {\n            _this.arrCross1.push([\n              _this.fabObj.top,\n              _this.fabObj.left + _this.fabObj.scaleY * _this.fabObj.width * a,\n            ]);\n          }\n          let imgs = new fabric.Image(_this.img, {\n            scaleX: _this.fabObj.scaleX,\n            scaleY: _this.fabObj.scaleY,\n            top: _this.fabObj.top,\n            left: _this.fabObj.left,\n            name: 0,\n            originX: \"center\",\n            originY: \"center\",\n          });\n          _this.myCanvas.add(imgs);\n          _this.fabObj = imgs;\n          _this.repatGroup.push(imgs);\n          _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n\n          _this.arrCross1.forEach((res) => {\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: res[0],\n              left: res[1],\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          });\n        } else if (_this.repatFlag == 2) {\n          _this.arrCross1 = [];\n          if (_this.repatGroup.length > 0) {\n            _this.repatGroup.forEach((res) => {\n              _this.myCanvas.remove(res);\n            });\n            _this.repatGroup = [];\n          }\n          // 竖向平铺  中间是横向的数组,只有一个,剩下的全是竖向的数组\n          for (let a = 1; a <= heightNumTop; a++) {\n            _this.arrCross1.push([\n              _this.fabObj.top - _this.fabObj.scaleX * _this.fabObj.height * a,\n              _this.fabObj.left,\n            ]);\n          }\n          for (let a = 1; a <= heightNumBottm; a++) {\n            _this.arrCross1.push([\n              _this.fabObj.top + _this.fabObj.scaleX * _this.fabObj.height * a,\n              _this.fabObj.left,\n            ]);\n          }\n          let imgs = new fabric.Image(_this.img, {\n            scaleX: _this.fabObj.scaleX,\n            scaleY: _this.fabObj.scaleY,\n            top: _this.fabObj.top,\n            left: _this.fabObj.left,\n            name: 0,\n            originX: \"center\",\n            originY: \"center\",\n          });\n          _this.myCanvas.add(imgs);\n          _this.fabObj = imgs;\n          _this.repatGroup.push(imgs);\n          _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          _this.arrCross1.forEach((res) => {\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: res[0],\n              left: res[1],\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          });\n        } else if (_this.repatFlag == 3) {\n          _this.arrVertical = [];\n          if (_this.repatGroup.length > 0) {\n            _this.repatGroup.forEach((res) => {\n              _this.myCanvas.remove(res);\n            });\n            _this.repatGroup = [];\n          }\n\n          // 第一部分 左上角的部分 用到的是 widthNumleft 和 heightNumtop\n          for (let a = 1; a <= widthNumLeft; a++) {\n            for (let j = 1; j <= heightNumTop; j++) {\n              _this.arrVertical.push([\n                _this.fabObj.top -\n                _this.fabObj.scaleX * _this.fabObj.height * j,\n                _this.fabObj.left -\n                _this.fabObj.scaleY * _this.fabObj.width * a,\n              ]);\n            }\n          }\n          // 第二部分 右上角的部分 用到的是 widthNumRight和 heightNumTop\n          for (let a = 1; a <= widthNumRight; a++) {\n            for (let j = 1; j <= heightNumTop; j++) {\n              _this.arrVertical.push([\n                _this.fabObj.top -\n                _this.fabObj.scaleX * _this.fabObj.height * j,\n                _this.fabObj.left +\n                _this.fabObj.scaleY * _this.fabObj.width * a,\n              ]);\n            }\n          }\n          // 第三部分 左下角 用到的部分是 widthNumleft 和 heightNumBottm\n          for (let a = 1; a <= widthNumLeft; a++) {\n            for (let j = 1; j <= heightNumBottm; j++) {\n              _this.arrVertical.push([\n                _this.fabObj.top +\n                _this.fabObj.scaleX * _this.fabObj.height * j,\n                _this.fabObj.left -\n                _this.fabObj.scaleY * _this.fabObj.width * a,\n              ]);\n            }\n          }\n          // 第四部分  右下角 用到的部分是 widthNumRight 和 heightNumBottm\n          for (let a = 1; a <= widthNumRight; a++) {\n            for (let j = 1; j <= heightNumBottm; j++) {\n              _this.arrVertical.push([\n                _this.fabObj.top +\n                _this.fabObj.scaleX * _this.fabObj.height * j,\n                _this.fabObj.left +\n                _this.fabObj.scaleY * _this.fabObj.width * a,\n              ]);\n            }\n          }\n          // 左边的部分\n          for (let a = 1; a <= widthNumLeft; a++) {\n            _this.arrVertical.push([\n              _this.fabObj.top,\n              _this.fabObj.left - _this.fabObj.scaleY * _this.fabObj.width * a,\n            ]);\n          }\n          // 右边的部分\n          for (let a = 1; a <= widthNumRight; a++) {\n            _this.arrVertical.push([\n              _this.fabObj.top,\n              _this.fabObj.left + _this.fabObj.scaleY * _this.fabObj.width * a,\n            ]);\n          }\n          // 上面的部分\n          for (let a = 1; a <= heightNumTop; a++) {\n            _this.arrVertical.push([\n              _this.fabObj.top - _this.fabObj.scaleX * _this.fabObj.height * a,\n              _this.fabObj.left,\n            ]);\n          }\n          // 下面的部分\n          for (let a = 1; a <= heightNumBottm; a++) {\n            _this.arrVertical.push([\n              _this.fabObj.top + _this.fabObj.scaleX * _this.fabObj.height * a,\n              _this.fabObj.left,\n            ]);\n          }\n          let imgs = new fabric.Image(_this.img, {\n            scaleX: _this.fabObj.scaleX,\n            scaleY: _this.fabObj.scaleY,\n            top: _this.fabObj.top,\n            left: _this.fabObj.left,\n            name: 0,\n            originX: \"center\",\n            originY: \"center\",\n          });\n          _this.myCanvas.add(imgs);\n          _this.fabObj = imgs;\n          _this.repatGroup.push(imgs);\n          _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n\n          _this.arrVertical.forEach((res) => {\n            let imgs = new fabric.Image(_this.img, {\n              scaleX: _this.fabObj.scaleX,\n              scaleY: _this.fabObj.scaleY,\n              top: res[0],\n              left: res[1],\n              originX: \"center\",\n              originY: \"center\",\n            });\n            _this.myCanvas.add(imgs);\n            _this.repatGroup.push(imgs);\n            _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          });\n        }\n      } else {\n        // console.log(_this.clipWidth);\n        _this.fabObj = null;\n        // 没有平铺的图片\n        if (_this.repatGroup.length > 0) {\n          _this.repatGroup.forEach((res) => {\n            _this.myCanvas.remove(res);\n          });\n          _this.repatGroup = [];\n        }\n        let imgs = new fabric.Image(_this.img, {\n          scaleX: scale,\n          scaleY: scale,\n          angle: 0,\n          // opacity:0,\n          originX: \"center\",\n          originY: \"center\",\n          top: _this.clipWidth / 2,\n          left: _this.clipHeight / 2,\n        });\n        _this.myCanvas.add(imgs);\n        _this.myCanvas.add(imgs);\n        _this.repatGroup.push(imgs);\n        _this.fabObj = imgs;\n      }\n      this.drawImageClip();\n    },\n    // 裁切canvas\n    async drawImageClip() {\n      let Multiple = 3;\n      let _this = this;\n      this.imgCanvas.setWidth(_this.clipWidth * Multiple);\n      this.imgCanvas.setHeight(_this.clipHeight * Multiple);\n      _this.imgCanvas.clear();\n      _this.myCanvas.getObjects().forEach((res) => {\n        let imgs = new fabric.Image(_this.img, {\n          scaleX: res.scaleX * Multiple,\n          scaleY: res.scaleY * Multiple,\n          top: res.top * Multiple,\n          left: res.left * Multiple,\n          // angle: index * 10,\n          originX: \"center\",\n          originY: \"center\",\n        });\n        _this.imgCanvas.add(imgs);\n      });\n      _this.zoomPoint = new fabric.Point(\n        _this.imgCanvas.width / 2,\n        _this.imgCanvas.height / 2\n      ); // 中心点\n      _this.imgCanvas.zoomToPoint(_this.zoomPoint, _this.imgScale);\n      _this.imgCanvas.renderAll();\n\n      // console.log(_this.imgCanvas)\n      const base64 = _this.imgCanvas.toDataURL({\n        format: \"png\",\n        quality: 1,\n        left: _this.begin.x * Multiple,\n        top: _this.begin.y * Multiple,\n        width: _this.imgCanvas.width - _this.begin.x * Multiple * 2,\n        height: _this.imgCanvas.height - _this.begin.y * Multiple * 2,\n      });\n      // console.log(base64)\n      // console.log(_this.begin.x * Multiple);\n      // console.log(_this.begin.y * Multiple);\n      // console.log(_this.imgCanvas.width - _this.begin.x * Multiple * 2);\n      // console.log(_this.imgCanvas.height - _this.begin.y * Multiple * 2);\n      var imgToCut = new Image();\n      imgToCut.src = base64;\n      _this.clipImg = base64;\n      // document.body.append(imgToCut)\n      if (this.obj && this.obj.bigpsd && this.obj.bigpsd.sku) {\n        // console.log( this.obj.bigpsd.name.toString());\n        _this.updateMiniMap(\n          this.obj.bigpsd.sku,\n          base64,\n          this.obj.bigpsd.name.toString()\n        );\n        // this.imgShowFlag1 = false;\n        // this.canvasShowFlag = true;\n      }\n    },\n    // 画线的函数 封装\n    drawLine() {\n      let _this = this;\n      // 先求出盒子的宽和高\n      let modelHeight = this.modelArray[1]; //var\n      let modelWidth = this.modelArray[0]; //var\n      if (modelHeight >= modelWidth) {\n        this.boxHeight = _this.boxMax * _this.kMultiple;\n        this.boxWidth = Math.round((this.boxHeight * modelWidth) / modelHeight);\n      } else {\n        this.boxWidth = _this.boxMax * _this.kMultiple;\n        this.boxHeight = Math.round((this.boxWidth * modelHeight) / modelWidth);\n      }\n\n      _this.clipX = (_this.clipWidth * _this.kMultiple - _this.boxWidth) / 2;\n      _this.clipY = (this.clipHeight * _this.kMultiple - _this.boxHeight) / 2;\n\n      let moveToFunction = CanvasRenderingContext2D.prototype.moveTo;\n      CanvasRenderingContext2D.prototype.moveToLocation = {};\n      // 重新定义moveTo方法\n      CanvasRenderingContext2D.prototype.moveTo = function (x, y) {\n        this.moveToLocation.x = x;\n        this.moveToLocation.y = y;\n        moveToFunction.apply(this, [x, y]);\n      };\n      CanvasRenderingContext2D.prototype.dashedLineTo = function (\n        x,\n        y,\n        dashedLength\n      ) {\n        dashedLength = dashedLength === undefined ? 5 : dashedLength;\n        var startX = this.moveToLocation.x;\n        var startY = this.moveToLocation.y;\n        var deltaX = x - startX;\n        var deltaY = y - startY;\n        var numberDash = Math.floor(\n          Math.sqrt(deltaX * deltaX + deltaY * deltaY) / dashedLength\n        );\n        for (var i = 0; i < numberDash; i++) {\n          this[i % 2 === 0 ? \"moveTo\" : \"lineTo\"](\n            startX + (deltaX / numberDash) * i,\n            startY + (deltaY / numberDash) * i\n          ); //等同于this.moveTo(x, y)或者 this.LineTo(x, y)\n        }\n        this.moveTo(x, y); //连续绘制虚线时，起点从当前点开始\n      };\n\n      let containerWidth = this.clipWidth * _this.kMultiple,\n        containerHeight = this.clipHeight * _this.kMultiple;\n      let oneX, oneY, twoX, twoY, threeX, threeY, fourX, fourY;\n      let lineBoxWidth = _this.boxWidth / _this.kMultiple;\n      let lineBoxHeight = _this.boxHeight / _this.kMultiple;\n      _this.begin.x = (containerWidth - this.boxWidth) / 2 / _this.kMultiple;\n      _this.begin.y = (containerHeight - this.boxHeight) / 2 / _this.kMultiple;\n      oneX = _this.begin.x + lineBoxWidth;\n      oneY = _this.begin.y;\n      twoX = _this.begin.x + lineBoxWidth;\n      twoY = _this.begin.y + lineBoxHeight;\n      threeX = _this.begin.x;\n      threeY = _this.begin.y + lineBoxHeight;\n      fourX = _this.begin.x;\n      fourY = _this.begin.y;\n\n      _this.ctxLine.clearRect(0, 0, containerWidth, containerHeight);\n      _this.ctxLine.beginPath();\n      _this.ctxLine.moveTo(_this.begin.x, _this.begin.y);\n      _this.ctxLine.dashedLineTo(oneX, oneY);\n      _this.ctxLine.dashedLineTo(twoX, twoY);\n      _this.ctxLine.dashedLineTo(threeX, threeY);\n      _this.ctxLine.dashedLineTo(fourX, fourY);\n      _this.ctxLine.closePath();\n      _this.ctxLine.lineWidth = 4;\n      _this.ctxLine.strokeStyle = \"red\";\n      _this.ctxLine.stroke();\n    },\n    // 中间部分从babylon组件迁移到home6\n    async updateMiniMap(sku, img, name) {\n      let _this = this;\n      if (sku != this.sku) {\n        _this.sku = sku;\n        _this.foxpsdObj = await new Promise((resolve) => {\n          // _this.canvasShowFlag = true;\n          // _this.imgShowFlag1 = false;\n\n          _this.$refs.foxcontainer.innerHTML = \"\";\n          let d = document.createElement(\"div\");\n          d.setAttribute(\"id\", \"container\");\n          _this.$refs.foxcontainer.appendChild(d);\n\n          let foxpsdObj = new foxpsd(\"container\", {\n            psdSkus: [sku],\n            goodsSku: \"1641357433833560937\",\n            //请勿用于生产环境 ，测试token会不定期轮换\n            token:\n              \"Basic 53d4072c87139675d646b4d428e6bb0048ee7db7e7716fd090cfdbfd692ce8f9\",\n            onload: function () {\n              resolve(foxpsdObj);\n            },\n          });\n        });\n        setTimeout(function () {\n          _this.foxpsdObj.command({\n            // canvas: eleCanvas,\n            image: img,\n            //传多个表示替换多个图层，使用英文逗号隔开\n            layers: name,\n          });\n\n          _this.$nextTick(() => {\n            _this.canvasShowFlag = true;\n            _this.imgShowFlag1 = false;\n            _this.imgShowFlag2 = true;\n            _this.imgShowFlag3 = false;\n            // _this.slideFlag = true;\n          });\n        }, 500);\n      } else {\n        if (_this.foxpsdObj && _this.foxpsdObj.load) {\n          _this.foxpsdObj.command({\n            image: img,\n            //传多个表示替换多个图层，使用英文逗号隔开\n            layers: name,\n          });\n\n          _this.$nextTick(() => {\n            _this.canvasShowFlag = true;\n            // _this.slideFlag = true;\n            _this.imgShowFlag1 = false;\n            _this.imgShowFlag2 = true;\n            _this.imgShowFlag3 = false;\n          });\n        }\n      }\n    },\n    // 中间部分从babylon组件迁移到home6\n    // 图片在自适应和原尺寸之间转换的 函数封装\n    switchImgShow() {\n      // flag 1自适应 2原尺寸\n      let _this = this;\n      let w300 = _this.imgArray[0];\n      let h300 = _this.imgArray[1];\n      let modelHeight = _this.modelArray[1]; //var\n      let modelWidth = _this.modelArray[0]; //var\n      let rwidth, wheight;\n      if (_this.imgShowFlag == 1) {\n        _this.imgMoveX = 0;\n        _this.imgMoveY = 0;\n        // 判断 图片的宽度和高度哪个更值更大\n        if (_this.imgPxWidth > _this.imgPxHeight) {\n          _this.imgScale = 1;\n          _this.imgInitWidth = Math.floor(_this.kMultiple * _this.clipWidth);\n          _this.imgInitHeight = Math.floor(\n            ((_this.kMultiple * _this.clipHeight) / this.imgPxWidth) *\n              _this.imgPxHeight\n          );\n          _this.imgInitX = 0;\n          _this.imgInitY = Math.floor(\n            (_this.clipHeight * _this.kMultiple - _this.imgInitHeight) / 2\n          );\n\n          _this.value = parseInt(_this.imgScale * 100);\n          _this.oldValue = _this.value;\n        } else {\n          // 高度大于宽度\n          _this.imgInitHeight = _this.kMultiple * _this.clipHeight;\n          _this.imgInitWidth = Math.floor(\n            ((_this.kMultiple * _this.clipWidth) / this.imgPxHeight) *\n              _this.imgPxWidth\n          );\n          _this.imgInitY = 0;\n          _this.imgInitX = Math.floor(\n              (_this.clipWidth * _this.kMultiple - _this.imgInitWidth) / 2\n          );\n\n          _this.imgScale = 1;\n          _this.value = parseInt(_this.imgScale * 100);\n          _this.oldValue = _this.value;\n        }\n        _this.calculateWidth = _this.imgInitWidth;\n        _this.calculateHeiht = _this.imgInitHeight;\n      } else if (_this.imgShowFlag == 2) {\n        _this.imgMoveX = 0;\n        _this.imgMoveY = 0;\n\n        _this.imgInitWidth = Math.floor(\n            _this.boxWidth * (_this.imgArray[0] / _this.modelArray[0])\n        );\n        _this.imgInitHeight = Math.floor(\n            _this.boxHeight * (_this.imgArray[1] / _this.modelArray[1])\n        );\n        _this.calculateWidth = _this.imgInitWidth;\n        _this.calculateHeiht = _this.imgInitHeight;\n        if (_this.img.width > _this.img.height) {\n          _this.imgScale = 1;\n          _this.value = parseInt(_this.imgScale * 100);\n          _this.oldValue = _this.value;\n          // 改尺寸比\n          rwidth = (w300 / modelWidth) * this.boxWidth;\n          wheight = (h300 / modelHeight) * this.boxHeight;\n          _this.imgInfo.height = wheight * _this.kMultiple;\n          _this.imgInfo.width = rwidth * _this.kMultiple;\n          _this.imgX =\n            (_this.clipWidth * _this.kMultiple - _this.imgInfo.width) / 2;\n          _this.imgY =\n            (_this.clipHeight * _this.kMultiple - _this.imgInfo.height) / 2;\n        } else {\n          _this.imgScale = 1;\n          _this.value = parseInt(_this.imgScale * 100);\n          _this.oldValue = _this.value;\n\n          // 改尺寸比\n          rwidth = (w300 / modelWidth) * this.boxWidth;\n\n          wheight = (h300 / modelHeight) * this.boxHeight;\n\n          _this.imgInfo.height = wheight * _this.kMultiple;\n          _this.imgInfo.width = rwidth * _this.kMultiple;\n          _this.imgX =\n            (_this.clipWidth * _this.kMultiple - _this.imgInfo.width) / 2;\n          _this.imgY =\n            (_this.clipHeight * _this.kMultiple - _this.imgInfo.height) / 2;\n        }\n        _this.drawImage();\n      }\n      //  _this.drawImage();\n    },\n    switchPicture() {\n      // console.log(\"123\");\n      this.imgShowFlag1 = true;\n      this.canvasShowFlag = false;\n      // this.slideFlag = false;\n      this.imgShowFlag2 = false;\n      this.imgShowFlag3 = true;\n    },\n    // 返回按钮\n    returnObj() {\n      this.imgShowFlag1 = false;\n      this.canvasShowFlag = true;\n      // this.slideFlag = true;\n      this.imgShowFlag2 = true;\n      this.imgShowFlag3 = false;\n      // this.imgShowFlag3 = true\n      // console.log(\"点击了返回\");\n    },\n    // slider change事件\n    sliderInput(v) {\n      const _this = this;\n\n      if (_this.modelId == 0 || _this.modelId == 10001) {\n        _this.sliderHandler(v);\n      } else {\n        return;\n      }\n    },\n    sliderChange(v) {\n      const _this = this;\n\n      if (_this.modelId == 0 || _this.modelId == 10001) {\n        return;\n      } else {\n        _this.sliderHandler(v);\n      }\n    },\n    sliderHandler(v) {\n      const _this = this;\n      // if (this.isRepeat == 0) {\n      //   this.repatFlag = 0;\n      // } else {\n      //   this.repatFlag = 3;\n      // }\n\n      if (_this.modelId == 0 || _this.modelId == 10001) {\n\n        let zpoint = new fabric.Point(\n            _this.clipWidth / 2,\n            _this.clipHeight / 2\n        ); // 中心点\n        _this.initCanvas.zoomToPoint(zpoint, v / 100);\n\n      } else {\n        _this.imgScale = v / 100;\n        if (_this.modelId == 10001) {\n          _this.imgScale = _this.imgScale / 3;\n        }\n        _this.zoomIn(Math.round(v * 1) / 100);\n      }\n    },\n    gos(item) {\n      // this.$store.state.option = item\n      // this.$store.state.blank = \"screen\";\n\n      this.$router.push({\n        path: '/store',\n        query: {q: item}\n      });\n\n    },\n    loadCanvas() {\n      this.$store.state.Navigation_in = \"Navigation_up\";\n      this.contentImg = document.getElementsByClassName(\"centerImg\")[0];\n\n      // 效果图新增mounted\n\n      const _this = this;\n      // let arr = [];\n      // 画轮廓线\n      //  debugger;\n      this.lineCanvas = this.$refs.lineCanvas;\n      this.ctxLine = this.lineCanvas.getContext(\"2d\");\n      // 大的canvas\n      this.myCanvas = new fabric.Canvas(\"canvasBox\", {\n        backgroundColor: \"#fff\",\n        isDrawingMode: false,\n      });\n\n      const color = \"rgba(0,0,0,0)\";\n      this.myCanvas.setBackgroundColor(color);\n      // 必须重新渲染画布，以显示新的背景\n      this.myCanvas.renderAll();\n\n      this.myCanvas.setWidth(_this.clipWidth);\n      this.myCanvas.setHeight(_this.clipHeight);\n\n      this.myCanvas.on({\n        // 鼠标滚动缩放\n        \"mouse:wheel\": (e) => {\n          // console.log(e);\n          event.preventDefault && event.preventDefault();\n          // let objs = _this.myCanvas.getObjects();\n          if (\n              (_this.imgScale > 0.2 || event.deltaY < 0) &&\n              (_this.imgScale < 2 || event.deltaY > 0)\n          ) {\n            _this.imgScale =\n                (event.deltaY > 0 ? -0.1 : 0.1) + _this.myCanvas.getZoom();\n            // console.log(_this.myCanvas.getZoom());\n            _this.imgScale = Math.max(0.2, _this.imgScale); //最小为原来的2/10\n            _this.imgScale = Math.min(2, _this.imgScale); //最大是原来的2倍\n            _this.imgScale = Math.round(_this.imgScale * 10000) / 10000;\n            let iScale = 1;\n            if (event.deltaY > 0) {\n              // 缩小  滚之后 滚之前\n              iScale = _this.imgScale / (_this.imgScale + 0.1);\n            } else {\n              // 放大\n              iScale = _this.imgScale / (_this.imgScale - 0.1);\n            }\n            _this.values = _this.imgScale * 100;\n            // _this.repatFlag = 3;\n            // if (this.isRepeat == 0) {\n            //   this.repatFlag = 0;\n            // } else {\n            //   this.repatFlag = 3;\n            // }\n            // console.log(iScale);\n            // console.log(this.repatFlag);\n            _this.zoomIn(iScale);\n          }\n        },\n      });\n\n      // 鼠标移动事件\n      let ax, ay;\n      _this.myCanvas.on(\"object:moving\", function (e) {\n        // _this.repatFlag = 3;\n        // if (this.isRepeat == 0) {\n        //   this.repatFlag = 0;\n        // } else {\n        //   this.repatFlag = 3;\n        // }\n        // 左右偏移\n        if (\n            e.target.left <\n            _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale\n        ) {\n          //\n          e.target.left =\n              _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale;\n        } else if (\n            e.target.left >\n            _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale\n        ) {\n          e.target.left =\n              _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale;\n        }\n        // 上下偏移\n        if (\n            e.target.top <\n            _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale\n        ) {\n          //\n          e.target.top =\n              _this.clipWidth / 2 - _this.clipWidth / 2 / _this.imgScale;\n        } else if (\n            e.target.top >\n            _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale\n        ) {\n          e.target.top =\n              _this.clipWidth / 2 + _this.clipWidth / 2 / _this.imgScale;\n        }\n        if (_this.data1 && _this.data1.length >= 1) {\n          ax = e.target.left - _this.movexy.left;\n          ay = e.target.top - _this.movexy.top;\n          _this.repatGroup.forEach((res, index) => {\n            res.left = _this.data1[index].left + ax;\n            res.top = _this.data1[index].top + ay;\n            _this.myCanvas.remove(res);\n            _this.myCanvas.add(res);\n          });\n          // let timeNow = new Date().getTime();\n          // if (timeNow - _this.timeOut < 100) {\n          //   return;\n          // } else {\n          //   _this.timeOut = timeNow;\n          // }\n\n          _this.fabObj = e.target;\n          let widthNumLeft = Math.ceil(\n              ((_this.fabObj.left - _this.clipWidth / 2) * _this.imgScale +\n                  _this.clipWidth / 2 -\n                  (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n              (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n          );\n          let widthNumRight = Math.ceil(\n              ((_this.clipWidth / 2 - _this.fabObj.left) * _this.imgScale +\n                  _this.clipWidth / 2 -\n                  (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale) / 2) /\n              (_this.fabObj.width * _this.fabObj.scaleX * _this.imgScale)\n          );\n          let heightNumTop = Math.ceil(\n              ((_this.fabObj.top - _this.clipWidth / 2) * _this.imgScale +\n                  _this.clipWidth / 2 -\n                  (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n              (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n          );\n          let heightNumBottom = Math.ceil(\n              ((_this.clipWidth / 2 - _this.fabObj.top) * _this.imgScale +\n                  _this.clipWidth / 2 -\n                  (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale) / 2) /\n              (_this.fabObj.height * _this.fabObj.scaleX * _this.imgScale)\n          );\n          _this.leftNum = 0;\n          _this.rightNum = 0;\n          _this.topNum = 0;\n          _this.bottomtNum = 0;\n          _this.repatGroup.forEach((res) => {\n            if (res.left < e.target.left && res.top == e.target.top) {\n              _this.leftNum = _this.leftNum + 1;\n            } else if (res.left > e.target.left && res.top == e.target.top) {\n              _this.rightNum = _this.rightNum + 1;\n            }\n            if (res.top < e.target.top && res.left == e.target.left) {\n              _this.topNum = _this.topNum + 1;\n            } else if (res.top > e.target.top && res.left == e.target.left) {\n              _this.bottomtNum = _this.bottomtNum + 1;\n            }\n          });\n\n          const imgEl = document.createElement(\"img\");\n          imgEl.crossOrigin = \"Anonymous\";\n          imgEl.src = _this.img.src;\n          if (_this.repatFlag == 1) {\n            if (widthNumLeft > _this.leftNum) {\n              let t = _this.leftNum + 1;\n              _this.leftNum = widthNumLeft;\n              for (let ln = t; ln <= widthNumLeft; ln++) {\n                _this.moves.left =\n                    _this.fabObj.left -\n                    _this.fabObj.scaleY * _this.fabObj.width * ln;\n                _this.moves.top = _this.fabObj.top;\n                let imgs = new fabric.Image(_this.img, {\n                  scaleX: _this.fabObj.scaleX,\n                  scaleY: _this.fabObj.scaleY,\n                  top: _this.moves.top,\n                  left: _this.moves.left,\n                  originX: \"center\",\n                  originY: \"center\",\n                });\n                _this.myCanvas.add(imgs);\n                _this.repatGroup.push(imgs);\n                _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                _this.movexy.left = e.target.left;\n                _this.movexy.top = e.target.top;\n              }\n            } else if (widthNumRight > _this.rightNum) {\n              let t1 = _this.rightNum + 1;\n              _this.rightNum = widthNumRight;\n              for (let ln = t1; ln <= widthNumRight; ln++) {\n                _this.moves.left =\n                    _this.fabObj.left +\n                    _this.fabObj.scaleY * _this.fabObj.width * ln;\n                _this.moves.top = _this.fabObj.top;\n                let imgs = new fabric.Image(_this.img, {\n                  scaleX: _this.fabObj.scaleX,\n                  scaleY: _this.fabObj.scaleY,\n                  top: _this.moves.top,\n                  left: _this.moves.left,\n                  originX: \"center\",\n                  originY: \"center\",\n                });\n                _this.myCanvas.add(imgs);\n                _this.repatGroup.push(imgs);\n                _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                _this.movexy.left = e.target.left;\n                _this.movexy.top = e.target.top;\n              }\n            }\n          } else if (_this.repatFlag == 2) {\n            if (heightNumTop > _this.topNum) {\n              let t = _this.topNum + 1;\n              _this.topNum = heightNumTop;\n              for (let ln = t; ln <= heightNumTop; ln++) {\n                _this.moves.left = _this.fabObj.left;\n                _this.moves.top =\n                    _this.fabObj.top -\n                    _this.fabObj.scaleY * _this.fabObj.height * ln;\n                let imgs = new fabric.Image(_this.img, {\n                  scaleX: _this.fabObj.scaleX,\n                  scaleY: _this.fabObj.scaleY,\n                  top: _this.moves.top,\n                  left: _this.moves.left,\n                  originX: \"center\",\n                  originY: \"center\",\n                });\n                _this.myCanvas.add(imgs);\n                _this.repatGroup.push(imgs);\n                _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                _this.movexy.left = e.target.left;\n                _this.movexy.top = e.target.top;\n              }\n            } else if (heightNumBottom > _this.bottomtNum) {\n              let t1 = _this.bottomtNum + 1;\n              _this.bottomtNum = heightNumBottom;\n              for (let ln = t1; ln <= heightNumBottom; ln++) {\n                _this.moves.left = _this.fabObj.left;\n                _this.moves.top =\n                    _this.fabObj.top +\n                    _this.fabObj.scaleY * _this.fabObj.height * ln;\n                let imgs = new fabric.Image(_this.img, {\n                  scaleX: _this.fabObj.scaleX,\n                  scaleY: _this.fabObj.scaleY,\n                  top: _this.moves.top,\n                  left: _this.moves.left,\n                  originX: \"center\",\n                  originY: \"center\",\n                });\n                _this.myCanvas.add(imgs);\n                _this.repatGroup.push(imgs);\n                _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                _this.movexy.left = e.target.left;\n                _this.movexy.top = e.target.top;\n              }\n            }\n          } else if (_this.repatFlag == 3) {\n            // let sjh = _this.leftNum + 1 + _this.rightNum;\n            // let shs = _this.topNum + 1 + _this.bottomtNum;\n            if (widthNumLeft > _this.leftNum) {\n              let t = _this.leftNum + 1;\n              _this.leftNum = widthNumLeft;\n              for (let ln = t; ln <= widthNumLeft; ln++) {\n                for (\n                    let ln1 = _this.bottomtNum * -1;\n                    ln1 <= _this.topNum;\n                    ln1++\n                ) {\n                  _this.moves.left =\n                      _this.fabObj.left -\n                      _this.fabObj.scaleY * _this.fabObj.width * ln;\n                  _this.moves.top =\n                      _this.fabObj.top -\n                      _this.fabObj.scaleX * _this.fabObj.height * ln1;\n                  let imgs = new fabric.Image(_this.img, {\n                    scaleX: _this.fabObj.scaleX,\n                    scaleY: _this.fabObj.scaleY,\n                    top: _this.moves.top,\n                    left: _this.moves.left,\n                    originX: \"center\",\n                    originY: \"center\",\n                  });\n                  _this.myCanvas.add(imgs);\n                  _this.repatGroup.push(imgs);\n                  _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                  _this.movexy.left = e.target.left;\n                  _this.movexy.top = e.target.top;\n                }\n              }\n            } else if (widthNumRight > _this.rightNum) {\n              let t1 = _this.rightNum + 1;\n              _this.rightNum = widthNumRight;\n              for (let ln = t1; ln <= widthNumRight; ln++) {\n                for (\n                    let ln1 = _this.bottomtNum * -1;\n                    ln1 <= _this.topNum;\n                    ln1++\n                ) {\n                  _this.moves.left =\n                      _this.fabObj.left +\n                      _this.fabObj.scaleY * _this.fabObj.width * ln;\n                  _this.moves.top =\n                      _this.fabObj.top -\n                      _this.fabObj.scaleX * _this.fabObj.height * ln1;\n                  let imgs = new fabric.Image(_this.img, {\n                    scaleX: _this.fabObj.scaleX,\n                    scaleY: _this.fabObj.scaleY,\n                    top: _this.moves.top,\n                    left: _this.moves.left,\n                    originX: \"center\",\n                    originY: \"center\",\n                  });\n                  _this.myCanvas.add(imgs);\n                  _this.repatGroup.push(imgs);\n                  _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                  _this.movexy.left = e.target.left;\n                  _this.movexy.top = e.target.top;\n                }\n              }\n            }\n            if (heightNumTop > _this.topNum) {\n              let t = _this.topNum + 1;\n              _this.topNum = heightNumTop;\n              for (let ln = t; ln <= heightNumTop; ln++) {\n                for (let ln1 = _this.rightNum * -1; ln1 <= _this.leftNum; ln1++) {\n                  _this.moves.left =\n                      _this.fabObj.left -\n                      _this.fabObj.scaleX * _this.fabObj.width * ln1;\n                  _this.moves.top =\n                      _this.fabObj.top -\n                      _this.fabObj.scaleY * _this.fabObj.height * ln;\n                  let imgs = new fabric.Image(_this.img, {\n                    scaleX: _this.fabObj.scaleX,\n                    scaleY: _this.fabObj.scaleY,\n                    top: _this.moves.top,\n                    left: _this.moves.left,\n                    originX: \"center\",\n                    originY: \"center\",\n                  });\n                  _this.myCanvas.add(imgs);\n                  _this.repatGroup.push(imgs);\n                  _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                  _this.movexy.left = e.target.left;\n                  _this.movexy.top = e.target.top;\n                }\n              }\n            } else if (heightNumBottom > _this.bottomtNum) {\n              let t1 = _this.bottomtNum + 1;\n              _this.bottomtNum = heightNumBottom;\n              for (let ln = t1; ln <= heightNumBottom; ln++) {\n                for (let ln1 = _this.rightNum * -1; ln1 <= _this.leftNum; ln1++) {\n                  _this.moves.left =\n                      _this.fabObj.left -\n                      _this.fabObj.scaleX * _this.fabObj.width * ln1;\n\n                  _this.moves.top =\n                      _this.fabObj.top +\n                      _this.fabObj.scaleY * _this.fabObj.height * ln;\n                  let imgs = new fabric.Image(_this.img, {\n                    scaleX: _this.fabObj.scaleX,\n                    scaleY: _this.fabObj.scaleY,\n                    top: _this.moves.top,\n                    left: _this.moves.left,\n                    originX: \"center\",\n                    originY: \"center\",\n                  });\n                  _this.myCanvas.add(imgs);\n                  _this.repatGroup.push(imgs);\n                  _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n                  _this.movexy.left = e.target.left;\n                  _this.movexy.top = e.target.top;\n                }\n              }\n            }\n          }\n        } else {\n          _this.fabObj = e.target;\n          _this.moveObj = {\n            left: _this.fabObj.left - (_this.clipWidth / 2) * _this.imgScale,\n            top: _this.fabObj.top - (_this.clipWidth / 2) * _this.imgScale,\n          };\n        }\n        _this.drawImageClip();\n      });\n\n      // _this.myCanvas.on(\"object:moved\", function (e) {});\n\n      // // 鼠标点击事件\n      _this.myCanvas.on(\"mouse:down\", function (e) {\n        //   当e.target 是null 或者undefined时 是没选中 分组\n        if (e.target != null) {\n          // console.log(\"down\");\n          // _this.repatFlag = 3;\n          // if (this.isRepeat == 0) {\n          //   this.repatFlag = 0;\n          // } else {\n          //   this.repatFlag = 3;\n          // }\n          e.target.hasControls = false;\n          e.target.hasBorders = false;\n          _this.data1 = JSON.parse(JSON.stringify(_this.repatGroup));\n          _this.movexy.left = e.target.left;\n          _this.movexy.top = e.target.top;\n          _this.timeOut = new Date().getTime();\n        }\n      });\n      this.imgCanvas = new fabric.Canvas(\"canvasBox1\", {\n        backgroundColor: \"#fff\",\n        isDrawingMode: false,\n      });\n\n\n      this.initCanvas = new fabric.Canvas(\"canvasBox3\", {\n        backgroundColor: \"#fff\",\n        isDrawingMode: false,\n      });\n\n      this.initCanvas.setWidth(this.clipWidth);\n      this.initCanvas.setHeight(this.clipHeight);\n\n      // 效果图新增mounted\n    },\n    setAsPosition() {\n\n      let scrolltop =\n          document.documentElement.scrollTop || document.body.scrollTop;\n\n      if (scrolltop > 1080) {\n        // 到了底部之后想做的操作,如到了底部之后加载\n        document.getElementsByClassName(\"as\")[0].style.position = \"fixed\"\n        document.getElementsByClassName(\"as\")[0].style.top = \"6rem\"\n\n      } else {\n        document.getElementsByClassName(\"as\")[0].style.position = \"absolute\"\n      }\n    }\n    // 处理模型的函数\n    // 效果图新增函数\n\n    // 效果图新增的methods函数\n  },\n  created() {\n    // 首先判断一下用户有没有登陆\n    // if (localStorage.user === \"\") {\n    //   // 没有登陆的时候将购物车信息存到本地的 localStorage.shopping_car当中\n    //   // 首选判断一下localStorage.shopping_car有没有声明\n    //\n    //   if (!localStorage.sshopping_car) {\n    //     localStorage.setItem('sshopping_car', []);\n    //   }\n    // }\n    // if (!localStorage.token) {\n    //   this.$router.push(\"/\");\n    // }\n    let vm = this;\n\n    // this.rq({\n    //   url: \"/api/personal/selectBookmarkSimple\",\n    //   method: \"post\",\n    //   param: {},\n    //   onError: function () {},\n    //   vm,\n    // }).then((res) => {\n    //   if (res.code == 200) {\n    //     vm.CollectionList = res.data;\n    //     //\n    //   } else {\n    //     //\n    //     // this.$message(res.desc);\n    //   }\n    // });\n    this.su = false;\n\n    // 效果图的created\n    this.getPSD();\n    // 效果图的created\n\n\n    console.log(\"created\")\n  },\n\n  destroyed() { // 销毁vm组件\n    const _this=this;\n\n    window.removeEventListener('scroll', _this.setAsPosition, false);\n  },\n  mounted() {\n    const _this=this;\n    _this.locking=false;\n    // this.$message.success({\n    //   message:'下载成功！',\n    //   duration:30000\n    // });\n\n    let ps = this.$route.path.split('/');\n    this.productId = ps[ps.length - 1];\n    // console.log(this.$route.path);\n    // console.log(this.$route);\n    // console.log('mouted')\n    // localStorage.productId=this.productId=this.$route.query.id;\n    this.candidate();\n    this.loadCanvas()\n\n    window.addEventListener('scroll', _this.setAsPosition, false);\n  },\n  // beforeUpdate(){\n  //   console.log(\"beforeUpdate\")\n  //\n  // },\n  // updated(){\n  //   console.log(\"updated\")\n  //\n  // }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.bodys {\n  background: #f7f9fd;\n\n  //height: 1080px;\n\n  .as {\n    z-index: 9;\n    position: absolute;\n    right: 0rem;\n    top: 13.9rem;\n  }\n}\n\n.title {\n  padding-top: 0.2rem;\n  .problems {\n    position: absolute;\n    top: 7.3rem;\n    right: 0.08rem;\n    width: 0.48rem;\n    height: 0.48rem;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n\n    .cons {\n      padding-top: 0.24rem;\n      padding-left: 0.24rem;\n      padding-right: 0.24rem;\n      width: 4.48rem;\n      height: 3.38rem;\n      background: #fff;\n      position: absolute;\n      right: 0.6rem;\n      bottom: 0;\n      z-index: 10;\n      box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.1);\n      border-radius: 0.14rem;\n      color: #000;\n\n      .title {\n        font-family: 'PingFang SC';\n        font-style: normal;\n        font-weight: 500;\n        font-size: 0.20rem;\n        line-height: 0.28rem;\n\n      }\n\n      .text {\n        font-family: 'PingFang SC';\n        font-style: normal;\n        font-weight: 400;\n        font-size: 0.14rem;\n        line-height: 0.20rem;\n\n      }\n\n      .button {\n        justify-content: space-between;\n        display: flex;\n        padding-top: 0.16rem;\n\n        button {\n          width: 0.99rem;\n          height: 0.42rem;\n          text-align: center;\n\n          border: 1px solid #373ACB;\n          border-radius: 0.21rem;\n          background: #fff;\n        }\n\n        button + button {\n          color: #fafafa;\n          background: #373ACB;\n        }\n      }\n\n    }\n  }\n\n  display: flex;\n  /*margin-left: 1.73rem;*/\n  /*margin-right: 1.73rem;*/\n  /*border-radius: 0.14rem;*/\n  text-align: center;\n\n\n  //   overflow: hidden;\n  > div {\n    display: inline-block;\n    vertical-align: top;\n    text-align: left;\n  }\n\n  .div_left {\n    padding-left: 1.97rem;\n\n    .left {\n      border-radius: 0.14rem;\n      overflow: hidden;\n      width: 3.18rem;\n      height: 7.3rem;\n      left: 0px;\n      top: 0px;\n      position: relative;\n      background: #fff;\n      box-sizing: border-box;\n      // padding-left: 0.1rem;\n      padding-top: 0.24rem;\n      overflow: auto;\n\n      .model {\n        transform-origin: -50% -50%;\n\n        width: 0.8rem;\n        height: 0.22rem;\n        font-family: \"PingFang SC\";\n        font-style: normal;\n        font-weight: 700;\n        font-size: 16px;\n        transform: rotateZ(90deg);\n        position: absolute;\n        top: 0rem;\n        left: 0.22rem;\n        text-align: center;\n        background: #222222;\n        color: #fff;\n        line-height: 0.22rem;\n        border-radius: 0 0.04rem;\n        transform-origin: 0% 0%;\n      }\n\n      .imglist {\n        width: 1.3rem;\n        height: 1.3rem;\n        float: left;\n        margin-bottom: 0.08rem;\n\n        // margin-top: 0.08rem;\n        img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n        }\n      }\n\n      .imgsList {\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: space-between;\n        width: 2.68rem;\n        margin: 0 auto;\n      }\n\n      .imglist:nth-child(2n) {\n        // margin-right: 0.08rem;\n      }\n    }\n  }\n\n  .div_content {\n    padding-left: 0.82rem;\n    padding-right: 0.58rem;\n\n    .comtent {\n      width: 6.52rem;\n      height: 6rem;\n\n\n      .content_img {\n        width: 6.52rem;\n        height: 100%;\n        display: flex;\n        position: relative;\n        margin-bottom: 0.16rem;\n\n        .content_img1 {\n          width: 6rem;\n          height: 6rem;\n          position: absolute;\n          z-index: 2;\n          left: 0;\n          overflow: hidden;\n\n          img {\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            width: 100%;\n            height: 100%;\n            transform: translateX(-50%) translateY(-50%);\n            object-fit: cover;\n          }\n        }\n\n        .content_img2 {\n          width: 0.5rem;\n          height: 0.5rem;\n          font-size: 0.14rem;\n\n          img {\n            width: 100%;\n            height: 100%;\n            object-fit: cover;\n          }\n        }\n      }\n\n      .slider {\n        font-size: 0.14rem;\n      }\n\n      // .slider {\n      //   margin-top: 0.24rem;\n      //   width: 418px;\n\n      //   left: 50%;\n      //   position: absolute;\n      //   transform: translateX(-50%);\n      //   //   底部文字\n      //   .text {\n      //     div {\n      //       float: left;\n      //       color: #fff;\n      //       font-family: Source Han Sans SC-Regular, Source Han Sans SC;\n      //       font-size: 12px;\n      //     }\n      //     .bfb2 {\n      //       margin-left: 95px;\n      //     }\n      //     .bfb3 {\n      //       margin-left: 90px;\n      //     }\n      //   }\n      //   //   右边输入框\n      //   .inputext {\n      //     position: absolute;\n      //     left: 315px;\n      //     top: 0.01rem;\n      //     border: 1px solid #000;\n      //     border-radius: 5px;\n      //     .inputspan {\n      //       position: absolute;\n      //       line-height: 0.36rem;\n      //       color: #000;\n      //       left: 0.49rem;\n      //       font-size: 16px;\n      //     }\n      //     input {\n      //       font-size: 16px;\n      //       width: 0.83rem;\n      //       height: 0.36rem;\n      //       background: #f1f1f1;\n      //       border-radius: 5px;\n      //       color: #000;\n      //       border: none;\n      //       padding-right: 0.35rem;\n      //       box-sizing: border-box;\n      //       text-align: right;\n      //     }\n      //   }\n      //   //  左边按钮\n      //   /deep/ .el-input-number__decrease {\n      //     position: absolute;\n      //     left: -387px;\n      //     top: 0.04rem;\n\n      //     height: 0.2rem;\n      //     width: 0.2rem;\n      //     background-color: rgba(0, 0, 0, 0);\n      //     border: 1px solid #666;\n      //     border-radius: 0%;\n\n      //     i {\n      //       color: #666;\n\n      //       font-size: 16px;\n\n      //       font-weight: bold;\n      //       position: absolute;\n      //       left: calc(50% - 8px);\n      //       top: calc(50% - 8px);\n      //     }\n      //   }\n\n      //   //   右边按钮\n      //   /deep/.el-input-number__increase {\n      //     position: absolute;\n      //     top: 0.04rem;\n      //     left: -100px;\n      //     height: 0.2rem;\n      //     width: 0.2rem;\n      //     background-color: rgba(0, 0, 0, 0);\n      //     border: 1px solid #666;\n      //     border-radius: 0%;\n      //     i {\n      //       color: #666;\n      //       font-size: 16px;\n      //       font-weight: bold;\n      //       position: absolute;\n      //       left: calc(50% - 8px);\n      //       top: calc(50% - 8px);\n      //     }\n      //   }\n      //   //   输入显示框背景颜色\n      //   /deep/ .el-input__inner {\n      //     color: #000;\n      //     background-color: #f1f1f1 !important;\n      //     border-radius: 5px;\n      //     border: 1px solid #000 !important;\n      //   }\n      //   //   输入显示框\n      //   /deep/ .el-input--small {\n      //     display: none;\n      //     top: 3px;\n      //     left: -50px;\n      //     border-radius: 5px;\n      //   }\n      //   /deep/.el-slider__runway {\n      //     background-color: #666666 !important;\n      //     height: 2px;\n      //   }\n      //   //   隐藏蓝色进度条\n      //   /deep/ .el-slider__bar {\n      //     background-color: rgba(0, 0, 0, 0);\n      //   }\n      //   //   滑块按钮\n      //   /deep/ .el-slider__button {\n      //     width: 0.1rem;\n      //     height: 0.26rem;\n      //     background-color: #666666 !important;\n      //     // box-shadow: 0px 2px 5px 1px rgba(120, 128, 172, 0.2);\n      //     border-radius: 0.8rem;\n      //     opacity: 1;\n      //     border: none;\n      //   }\n      //   /deep/ .el-slider__input {\n      //     width: 56px;\n      //   }\n      //   /deep/ .el-input-number .el-input__inner {\n      //     padding: 0px !important;\n      //   }\n      // }\n    }\n\n  }\n\n\n  .rigth {\n\n    min-width: 4.19rem;\n    width: 4.19rem;\n    // height: 7.4rem;\n    background: #fff;\n    // margin-left: 0.58rem;\n    border-radius: 0.14rem;\n    // overflow: hidden;\n    box-sizing: border-box;\n    padding-left: 0.24rem;\n    padding-right: 0.24rem;\n\n    .text {\n      padding-bottom: 0.1rem;\n      border-bottom: 1px dashed #f1f1f1;\n\n      .title_name {\n        display: flex;\n        margin-top: 0.16rem;\n        font-size: 0.14rem;\n        font-family: \"PingFang SC\";\n        font-style: normal;\n        font-weight: 400;\n        font-size: 0.14rem;\n        line-height: 0.2rem;\n        color: #666666;\n        justify-content: space-between\n      }\n\n\n      .spans_1 {\n        white-space: nowrap;\n        padding-right: 0.2rem;\n      }\n\n      .spans_2 {\n\n\n        text-align: right;\n      }\n    }\n\n    .option {\n      margin-top: 0.2rem;\n      width: 100%;\n      padding-bottom: 0.2rem;\n      border-bottom: 1px dashed #f1f1f1;\n\n      .title {\n        margin-left: 0px;\n        display: flex;\n        width: 100%;\n        color: #666;\n        font-family: \"PingFang SC\";\n        font-style: normal;\n        font-weight: 400;\n        font-size: 0.12rem;\n        line-height: 0.17rem;\n\n        .one {\n          color: #222;\n        }\n\n        .two:hover {\n          cursor: pointer;\n          text-decoration: underline\n        }\n\n        .el-icon-warning-outline {\n          font-size: 0.16rem;\n          transform: translateY(10%);\n          margin-left: 0.08rem;\n          color: #666;\n        }\n\n        .el-icon-warning-outline:hover {\n          color: #000;\n        }\n\n        div + div {\n          color: #373ACB;\n          margin-left: 0.08rem;\n        }\n\n      }\n\n      .content {\n        width: 100%;\n\n        .content_list {\n          position: relative;\n          margin-top: 0.16rem;\n          /*width: 3.84rem;*/\n          // height: 0.56rem;\n          background: #f3f7ff;\n          font-size: 0.14rem;\n          padding-top: 0.08rem;\n          display: flex;\n          line-height: 0.22rem;\n          cursor: pointer;\n          justify-content: space-evenly;\n          border-radius: 0.14rem;\n\n          > div {\n            > div {\n              cursor: pointer;\n            }\n          }\n\n          .content_list_bolls {\n            width: 0.3rem;\n            text-align: right;\n            margin-right: 0.08rem;\n            height: 100%;\n            line-height: 0.28rem;\n            box-sizing: border-box;\n            padding-top: 0.1rem;\n            cursor: pointer;\n\n            > img {\n              cursor: pointer;\n            }\n          }\n\n          .lusk {\n            padding-top: 0;\n          }\n\n          .con_idv {\n            width: 100%;\n          }\n\n          //   padding-top: 0.08rem;\n          .wonder {\n            /*line-height: 100%;*/\n            /*//   height: 100%;*/\n            /*margin-top: 0.2rem;*/\n            /*margin-left: 0.33rem;*/\n            width: 0.3rem;\n            height: 0.56rem;\n            line-height: 00.56rem;\n\n            top: 0.2rem;\n          }\n\n          .wonder:hover {\n            .wonder_text {\n              display: block;\n              z-index: 10;\n            }\n          }\n\n          .wonder_text {\n            position: absolute;\n            width: 3.44rem;\n            // height: 1.5rem;\n            // border: 1px solid #000;\n            transform: translateX(-48%) translateY(0.0rem);\n            display: none;\n\n            .demo2 {\n              width: 100%;\n              border: 1px solid #e8ecf5;\n              height: 100%;\n              border-radius: 16px;\n              position: relative;\n              margin-left: auto;\n              margin-right: auto;\n              background: #fff;\n              box-sizing: border-box;\n              padding-top: 0.18rem;\n              padding-left: 0.24rem;\n              padding-right: 0.24rem;\n              padding-bottom: 0.15rem;\n\n              .texts {\n                font-family: \"PingFang SC\";\n                font-style: normal;\n                font-weight: 400;\n                font-size: 0.14rem;\n                line-height: 0.2rem;\n              }\n            }\n\n            .demo2 em,\n            .demo2 span {\n              font-style: normal;\n              font-size: 30px;\n              position: absolute;\n              left: 50%;\n              transform: translateX(-50%);\n              top: -0.3rem;\n              color: #e8ecf5;\n            }\n\n            .demo2 em {\n              z-index: -1;\n            }\n\n            .demo2 span {\n              left: 50%;\n              transform: translateX(-50%) translateY(0.02rem);\n\n              color: white;\n            }\n\n            .trianglem {\n              position: absolute;\n              left: 50%;\n              transform: translateX(-15%) translateY(-50%);\n              // transform: translateY(-50%);\n              // height: 0.1728rem;\n              // width: 0.2rem;\n              // background: red;\n              width: 0px;\n              height: 0px;\n              border: 0.15rem solid #000;\n              border-top-color: transparent;\n              border-left-color: transparent;\n              border-right-color: transparent;\n            }\n          }\n        }\n      }\n    }\n\n    .price {\n      font-family: \"PingFang SC\";\n      font-style: normal;\n      font-weight: 400;\n      font-size: 0.14rem;\n      line-height: 0.41rem;\n      /*width: 3.86rem;*/\n      height: 0.41rem;\n      border-bottom: 1px dashed #f1f1f1;\n\n      > div {\n        display: inline-block;\n        width: 50%;\n      }\n\n      > div:last-child {\n        font-size: 0.18rem;\n        font-weight: bold;\n        text-align: right;\n        padding-right: 0.2rem;\n      }\n    }\n\n    .operlist {\n      width: 100%;\n      height: 1.32rem;\n\n      box-sizing: border-box;\n\n      .operlist_1 {\n        width: 100%;\n        height: 0.36rem;\n        line-height: 0.36rem;\n        margin-top: 0.1rem;\n        display: flex;\n\n        .gx1 {\n          // margin-top: 2px;\n          // margin-right: 7.6px;\n        }\n\n        .gx2 {\n          // margin-top: 5px;\n          // margin-right: 7.6px;\n        }\n\n        button + button {\n          margin-left: 0.24rem;\n        }\n\n        button {\n          width: 1.88rem;\n          //   height: 35px;\n          border: none;\n          line-height: 100%;\n          background: #ffc65a;\n          border-radius: 0.34rem;\n          margin-top: 0px;\n          height: 0.36rem;\n          display: flex;\n          text-align: center;\n          align-items: center;\n          box-sizing: border-box;\n          // padding-left: 0.24rem;\n          // padding-right: 0.24rem;\n          justify-content: center;\n\n          img {\n            color: #fff2c2;\n            margin-right: .04rem;\n          }\n\n          div {\n            line-height: 0.36rem;\n            height: 0.36rem;\n          }\n        }\n\n        .btn2 {\n          padding-left: 0.44rem;\n          padding-right: 0.42rem;\n\n          img {\n            margin-right: .08rem;\n          }\n        }\n      }\n\n      .tipstext {\n        text-align: center;\n        padding-top: 0.08rem;\n      }\n\n      .operlist_2 {\n        margin-top: 0.14rem;\n        width: 100%;\n        height: 0.46rem;\n        background: #373acb;\n        border-radius: 0.24rem;\n        color: #ffffff;\n        font-weight: 400;\n        font-size: 0.16rem;\n        line-height: 0.46rem;\n        text-align: center;\n        position: relative;\n        cursor: pointer;\n        border: 0;\n        display: flex;\n        justify-content: center;\n\n        .download {\n          width: 0.25rem;\n          height: 0.25rem;\n          transform: translateY(25%);\n          fill: currentColor;\n          overflow: hidden;\n        }\n\n        img {\n          width: 0.25rem;\n          transform: translateX(-0.04rem);\n        }\n      }\n\n      .downs {\n        background: #fff;\n        border: 1px solid #373ACB;\n        color: #373ACB;\n        position: relative;\n        overflow: hidden;\n      }\n\n      .btn_x:hover {\n        background: #5F61D5;\n      }\n\n      .btn_x:active {\n        background: #2C2EA2;\n      }\n\n      .bag {\n\n\n        img {\n          color: #fff;\n          transform: translateX(0.08rem);\n        }\n      }\n\n      .btn_1 {\n        color: #222;\n        background: #FFC65A;\n      }\n\n      .btn_1:hover {\n        background: #FFDA95;\n      }\n\n      .btn_1:active {\n        background: #A37E3A;\n      }\n\n      .btn_12 {\n        background: #F1F1F1;\n        color: #222222\n      }\n\n      .btn_12:hover {\n        background: #CCCCCC;\n      }\n\n      .btn_12:active {\n        background: #CCCCCC;\n      }\n\n    }\n\n    // .operlist {\n    //   width: 100%;\n    //   height: 1.32rem;\n\n    //   box-sizing: border-box;\n\n    //   .operlist_1 {\n    //     width: 100%;\n    //     height: 0.36rem;\n    //     line-height: 0.36rem;\n    //     padding-top: 0.1rem;\n    //     display: flex;\n    //     .gx1 {\n    //       margin-top: 2px;\n    //       margin-right: 7.6px;\n    //     }\n    //     .gx2 {\n    //       margin-top: 5px;\n    //       margin-right: 7.6px;\n    //     }\n    //     button + button {\n    //       margin-left: 0.24rem;\n    //     }\n    //     button {\n    //       width: 1.88rem;\n    //       //   height: 35px;\n    //       border: none;\n    //       line-height: 100%;\n    //       background: #ffc65a;\n    //       border-radius: 0.34rem;\n    //       margin-top: 0px;\n    //       height: 30px;\n    //       display: flex;\n    //       text-align: center;\n    //       box-sizing: border-box;\n    //       padding-left: 0.35rem;\n    //       img {\n    //         color: #fff2c2;\n    //       }\n    //       div {\n    //         line-height: 0.36rem;\n    //         height: 0.36rem;\n    //       }\n    //     }\n    //   }\n    //   .operlist_2 {\n    //     margin-top: 0.14rem;\n    //     width: 4rem;\n    //     height: 0.36rem;\n    //     background: #373acb;\n    //     border-radius: 0.24rem;\n    //     color: #ffffff;\n    //     font-weight: 400;\n    //     font-size: 0.16rem;\n    //     line-height: 0.36rem;\n    //     text-align: center;\n    //   }\n    // }\n  }\n}\n\n.middle {\n  text-align: center;\n  min-width: 1020px;\n\n  > div {\n    margin: 0.2rem auto 0;\n    width: 16.18rem;\n    height: 1.51rem;\n    background: #fff;\n    border-radius: 0.14rem;\n    margin-left: 50%;\n    transform: translateX(-50%);\n    box-sizing: border-box;\n    padding-left: 2.05rem;\n    padding-top: 0.2rem;\n    padding-right: 3.68rem;\n    padding-bottom: 0.25rem;\n    display: flex;\n    text-align: left;\n\n    ul {\n      li {\n        list-style-type: none;\n        margin-top: 0.15rem;\n      }\n    }\n\n    .titles {\n      display: table-cell;\n      width: 18%;\n      font-size: 0.14rem;\n      line-height: 0.2rem;\n      text-align: right;\n      padding-right:0.15rem;\n    }\n\n    .contents {\n      display: table-cell;\n      font-size: 0.14rem;\n      line-height: 0.2rem;\n      margin-left: 0.16rem;\n\n      .bulues {\n        color: #6467fd;\n      }\n    }\n  }\n}\n\n.in_2 {\n  //display: flex;\n  width: 3.56rem;\n  height: 0.86rem;\n  margin-top: 0.16rem;\n  background: #F8F8F8;\n  border-radius: 0.08rem;\n  >span{\n    margin-left: 0.04rem;\n    display: inline-block;\n    vertical-align: top;\n    margin-top: 0.15rem;\n    img {\n      width: 0.84rem;\n    }\n  }\n}\n\n.Related {\n  width: 100%;\n  font-family: \"PingFang SC\";\n  font-style: normal;\n  font-weight: 700;\n  font-size: 20px;\n  line-height: 28px;\n  text-align: center;\n  margin-top: 0.53rem;\n  // padding-left: 0.14rem;\n  margin-bottom: 0.14rem;\n}\n\n//.contents {\n//  // overflow-y: auto;\n//  // overflow-x: hidden;\n//  /*width: 83.7vw;*/\n//  //  height: 80vh;\n//  position: relative;\n//  margin: 0 0.2rem;\n//\n//  .numberlist {\n//    position: absolute;\n//    padding: 0 0.1rem;\n//    cursor: pointer;\n//  }\n//}\n\n/deep/ .el-slider__button-wrapper {\n  z-index: 1 !important;\n}\n\n.canvas-clip {\n  width: 3rem;\n  height: 3rem;\n  // background: #000;\n  // position: relative;\n  // top: 50%;\n  // left: 50%;\n  // transform: scale(1) translate(-50%, -50%);\n  // margin-left: 26px;\n  position: absolute;\n  z-index: 99;\n  margin-bottom: 30px;\n  left: 0;\n  top: 0;\n\n  .markImg1 {\n    display: none;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: 888;\n    left: 0;\n    top: 0;\n    // box-shadow: 0 0 8px rgb(0 0 0 / 12%);\n    pointer-events: none;\n    // display: none;\n  }\n\n  .markImg2 {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: scale(1) translate(-50%, -50%);\n    z-index: 2;\n    pointer-events: none;\n  }\n\n\n}\n\n.babylon-container {\n  // margin-bottom: 24px;\n  position: relative;\n  // width: 650px;\n  // height: 650px;\n  width: 6rem;\n  height: 6rem;\n}\n\n.markDiv {\n  width: 300px;\n  height: 300px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: scale(1) translate(-50%, -50%);\n  z-index: 2;\n  pointer-events: none;\n  display: none;\n}\n\n#container {\n  // width: 650px;\n  // height: 650px;\n  width: 6rem;\n  height: 6rem;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  img {\n    // width: 100%;\n    height: 100%;\n    width: auto;\n    // object-fit: cover;\n  }\n}\n\n.canvas-container canvas {\n  opacity: 0;\n}\n\n#canvasBox3 {\n  opacity: 100;\n}\n\n.ordinary-picture {\n  width: 0.5rem;\n  height: 0.5rem;\n  // margin-left: 2px;\n  position: absolute;\n  z-index: 9;\n  right: 0;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n}\n\n/deep/ .el-textarea__inner {\n  background: #f1f1f1;\n}\n</style>>\n\n"]}]}