{"remainingRequest":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/src/components/PersonalCenter/OrderForm/Order/InvoiceEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/src/components/PersonalCenter/OrderForm/Order/InvoiceEdit.vue","mtime":1661495438848},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/babel-loader/lib/index.js","mtime":1665559060757},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/cache-loader/dist/cjs.js","mtime":1665559060439},{"path":"/Users/dengzixu/WebstormProjects/vue/pattern100_en_web/en/node_modules/vue-loader/lib/index.js","mtime":1665559060829}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiaW52b2ljZS1lZGl0IiwKICBwcm9wczp7CiAgICAvLyBvcmRlcjp7CiAgICAvLyAgIHR5cGU6T2JqZWN0LAogICAgLy8gICBkZWZhdWx0Ont9LAogICAgLy8gfSwKICAgIC8vIG9yZGVySWQ6IHsKICAgIC8vICAgdHlwZTogTnVtYmVyLAogICAgLy8gICBkZWZhdWx0OiBudWxsLAogICAgLy8gfSwKICAgIC8vIGludm9pY2U6IHsKICAgIC8vICAgdHlwZTogU3RyaW5nLAogICAgLy8gICBkZWZhdWx0OiAnJywKICAgIC8vIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6J0ludm9pY2UgSW5mb3JtYXRpb24nLAogICAgICBvcmRlcjp7fSwKICAgICAgdmlzaWJsZTpmYWxzZSwKICAgICAgbG9ja2luZzpmYWxzZSwKICAgICAgLy8gbmFtZXM6ICIiLAogICAgICAvLyBlbWFpYjogIiIsCiAgICAgIC8vIHJlc3M6ICIiLAogICAgICAvLyBjaXR5OiAiIiwKICAgICAgLy8gcG9zdGFsQ29kZTogIiIsCiAgICAgIC8vIFJlZ2lvbjogIiIsCiAgICAgIC8vIFByb3ZpbmNlOiAnJywKICAgICAgLy8gc3VvOiB0cnVlLAoKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaG93KG9yZGVyKXsKICAgICAgdGhpcy52aXNpYmxlPXRydWU7CiAgICAgIHRoaXMub3JkZXI9b3JkZXI7CgogICAgfSwKICAgIHN1Ym1pdCgpIHsKICAgICAgY29uc3QgX3RoaXMgPXRoaXM7CiAgICAgIGlmKF90aGlzLm9yZGVyLmludm9pY2UpewoKICAgICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBfdGhpcy4kaW1nU2VydmVyK190aGlzLm9yZGVyLmludm9pY2UpOyAvL+iuvue9ruS4i+i9veaWh+S7tueahHVybOWcsOWdgAogICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgX3RoaXMub3JkZXIuaWQgKyAnLnBkZicpOy8v55So5LqO6K6+572u5LiL6L295paH5Lu255qE5paH5Lu25ZCNCgogICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoInRhcmdldCIsICJfYmxhbmsiKTsKCiAgICAgICAgX3RoaXMuY2xvc2UoKTsKICAgICAgICBlbGUuY2xpY2soKTsKCiAgICAgIH1lbHNlewogICAgICAgIGlmKF90aGlzLmxvY2tpbmcpCiAgICAgICAgICByZXR1cm47CiAgICAgICAgX3RoaXMubG9ja2luZz10cnVlOwoKICAgICAgICBpZiAoX3RoaXMub3JkZXIubmFtZSA9PT0gIiIpIHsKICAgICAgICAgIF90aGlzLmxvY2tpbmc9ZmFsc2U7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZSgibmFtZSBmb3JtYXQgZXJyb3IiKQogICAgICAgIH0KICAgICAgICAvLyBkZWJ1Z2dlcgogICAgICAgIGlmIChfdGhpcy5vcmRlci5lbWFpbCA9PT0gIiIpIHsKICAgICAgICAgIF90aGlzLmxvY2tpbmc9ZmFsc2U7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZSgiZW1haWxzIGZvcm1hdCBlcnJvciIpCiAgICAgICAgfQoKICAgICAgICBpZiAoIS9eW2EtekEtWjAtOV8uLV0rQFthLXpBLVowLTktXSsoXFwuW2EtekEtWjAtOS1dKykqXC5bYS16QS1aMC05XXsyLDZ9JC8udGVzdChfdGhpcy5vcmRlci5lbWFpbCkpIHsKICAgICAgICAgIF90aGlzLmxvY2tpbmc9ZmFsc2U7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZSgiRW1haWwgZm9ybWF0IGVycm9yIikKICAgICAgICB9CgogICAgICAgIGlmIChfdGhpcy5vcmRlci5hZGRyZXNzID09PSAiIikgewogICAgICAgICAgX3RoaXMubG9ja2luZz1mYWxzZTsKICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlKCJhZGRyZXNzIGZvcm1hdCBlcnJvciIpCiAgICAgICAgfQoKICAgICAgICBpZiAoX3RoaXMub3JkZXIuY2l0eSA9PT0gIiIpIHsKICAgICAgICAgIF90aGlzLmxvY2tpbmc9ZmFsc2U7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZSgiY2l0eSBmb3JtYXQgZXJyb3IiKQogICAgICAgIH0KCiAgICAgICAgaWYgKF90aGlzLm9yZGVyLnBvc3RDb2RlID09PSAiIikgewogICAgICAgICAgX3RoaXMubG9ja2luZz1mYWxzZTsKICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlKCJwb3N0YWwgY29kZSBmb3JtYXQgZXJyb3IiKQogICAgICAgIH0KCiAgICAgICAgaWYgKF90aGlzLm9yZGVyLmNvdW50cnkgPT09ICIiKSB7CiAgICAgICAgICBfdGhpcy5sb2NraW5nPWZhbHNlOwogICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UoIlJlZ2lvbiBmb3JtYXQgZXJyb3IiKQogICAgICAgIH0KICAgICAgICBpZiAoX3RoaXMub3JkZXIucHJvdmluY2UgPT09ICIiKSB7CiAgICAgICAgICBfdGhpcy5sb2NraW5nPWZhbHNlOwogICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UoIlByb3ZpbmNlIGZvcm1hdCBlcnJvciIpCiAgICAgICAgfQoKICAgICAgICAvLyBsZXQgYz0nJzsKICAgICAgICAvLyBpZih0aGlzLmNpdHkpCiAgICAgICAgLy8gICBjKz10aGlzLmNpdHk7CiAgICAgICAgLy8gaWYodGhpcy5Qcm92aW5jZSl7CiAgICAgICAgLy8gICBpZihjIT0nJykKICAgICAgICAvLyAgICAgYys9JywnOwogICAgICAgIC8vICAgYys9dGhpcy5Qcm92aW5jZTsKICAgICAgICAvLyB9CiAgICAgICAgLy8gaWYodGhpcy5wb3N0YWxDb2RlKXsKICAgICAgICAvLyAgIGlmKGMhPScnKQogICAgICAgIC8vICAgICBjKz0nLCc7CiAgICAgICAgLy8gICBjKz10aGlzLnBvc3RhbENvZGU7CiAgICAgICAgLy8gfQoKICAgICAgICBfdGhpcy5ycSh7CiAgICAgICAgICB1cmw6ICIvYXBpL3Nob3AvZ2V0SW52b2ljZSIsCiAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgIHBhcmFtOiB7CiAgICAgICAgICAgIGlkOl90aGlzLm9yZGVyLmlkLAogICAgICAgICAgICBuYW1lOl90aGlzLm9yZGVyLm5hbWUsCiAgICAgICAgICAgIGVtYWlsOl90aGlzLm9yZGVyLmVtYWlsLAogICAgICAgICAgICBjaXR5Ol90aGlzLm9yZGVyLmNpdHksCiAgICAgICAgICAgIGNvdW50cnk6X3RoaXMub3JkZXIuY291bnRyeSwKICAgICAgICAgICAgYWRkcmVzczpfdGhpcy5vcmRlci5hZGRyZXNzLAogICAgICAgICAgICBwcm92aW5jZTpfdGhpcy5vcmRlci5wcm92aW5jZSwKICAgICAgICAgICAgcG9zdENvZGU6X3RoaXMub3JkZXIucG9zdENvZGUsCiAgICAgICAgICB9LAogICAgICAgICAgb25FcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5sb2NraW5nPWZhbHNlOwogICAgICAgICAgfSwKICAgICAgICAgIF90aGlzLAogICAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgX3RoaXMubG9ja2luZz1mYWxzZTsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgX3RoaXMub3JkZXIuaW52b2ljZT1yZXMuZGF0YTsKICAgICAgICAgICAgbGV0IGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZSgnaHJlZicsIF90aGlzLiRpbWdTZXJ2ZXIrcmVzLmRhdGEpOyAvL+iuvue9ruS4i+i9veaWh+S7tueahHVybOWcsOWdgAogICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIF90aGlzLm9yZGVyLmlkICsgJy5wZGYnKTsvL+eUqOS6juiuvue9ruS4i+i9veaWh+S7tueahOaWh+S7tuWQjQoKICAgICAgICAgICAgZWxlLnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwgIl9ibGFuayIpOwoKICAgICAgICAgICAgX3RoaXMuY2xvc2UoKTsKICAgICAgICAgICAgZWxlLmNsaWNrKCk7CgogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBjbG9zZSgpIHsKICAgICAgY29uc3QgX3RoaXM9dGhpczsKICAgICAgX3RoaXMudmlzaWJsZT1mYWxzZTsKICAgICAgX3RoaXMub3JkZXIgPSB7fTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["InvoiceEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InvoiceEdit.vue","sourceRoot":"src/components/PersonalCenter/OrderForm/Order","sourcesContent":["<template>\n  <el-dialog :title=\"title\"\n             :visible.sync=\"visible\"\n             @close=\"close\"\n             :center=\"true\"\n             custom-class=\"invoice-edit\">\n  <div>\n<!--    <div class=\"contents\">-->\n<!--      <i class=\"el-icon-close\" @click=\"closeb\"></i>-->\n<!--      <div class=\"title\">Enter invoice information</div>-->\n      <div class=\"input\">\n        <div class=\"input_1\">\n          <input class=\"input_1_1\" type=\"text\" v-model=\"order.name\" placeholder=\"Your name\" :disabled=\"order.invoice!=''\">\n          <input class=\"input_1_2\" type=\"text\" v-model=\"order.email\" placeholder=\"Your email\" :disabled=\"order.invoice!=''\">\n        </div>\n        <div class=\"input_1\">\n          <input class=\"input_1_3\" type=\"text\" v-model=\"order.address\" placeholder=\"address\" :disabled=\"order.invoice!=''\">\n        </div>\n        <div class=\"input_1\">\n          <input class=\"input_1_1\" type=\"text\" v-model=\"order.city\" placeholder=\"City\" :disabled=\"order.invoice!=''\">\n          <input class=\"input_1_2\" type=\"text\" v-model=\"order.postCode\" placeholder=\"Zip/postal code\" :disabled=\"order.invoice!=''\">\n        </div>\n        <div class=\"input_1\">\n          <input class=\"input_1_1\" type=\"text\" v-model=\"order.country\" placeholder=\"Country/Region\" :disabled=\"order.invoice!=''\">\n          <input class=\"input_1_2\" type=\"text\" v-model=\"order.province\" placeholder=\"State/Province\" :disabled=\"order.invoice!=''\">\n        </div>\n<!--        <div class=\"input_1 input_2\">-->\n<!--          <button @click=\"close\">Cancel</button>-->\n<!--          <button @click=\"submit\">Submit</button>-->\n\n<!--        </div>-->\n\n      </div>\n\n<!--    </div>-->\n  </div>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"close = false\">Cancel</el-button>\n      <el-button type=\"primary\" @click=\"submit\">Download</el-button>\n    </div>\n  </el-dialog>\n</template>\n<script>\nexport default {\n  name: \"invoice-edit\",\n  props:{\n    // order:{\n    //   type:Object,\n    //   default:{},\n    // },\n    // orderId: {\n    //   type: Number,\n    //   default: null,\n    // },\n    // invoice: {\n    //   type: String,\n    //   default: '',\n    // },\n  },\n  data() {\n    return {\n      title:'Invoice Information',\n      order:{},\n      visible:false,\n      locking:false,\n      // names: \"\",\n      // emaib: \"\",\n      // ress: \"\",\n      // city: \"\",\n      // postalCode: \"\",\n      // Region: \"\",\n      // Province: '',\n      // suo: true,\n\n    };\n  },\n  methods: {\n    show(order){\n      this.visible=true;\n      this.order=order;\n\n    },\n    submit() {\n      const _this =this;\n      if(_this.order.invoice){\n\n        let ele = document.createElement('a');\n        ele.setAttribute('href', _this.$imgServer+_this.order.invoice); //设置下载文件的url地址\n        ele.setAttribute('download', _this.order.id + '.pdf');//用于设置下载文件的文件名\n\n        ele.setAttribute(\"target\", \"_blank\");\n\n        _this.close();\n        ele.click();\n\n      }else{\n        if(_this.locking)\n          return;\n        _this.locking=true;\n\n        if (_this.order.name === \"\") {\n          _this.locking=false;\n          return this.$message(\"name format error\")\n        }\n        // debugger\n        if (_this.order.email === \"\") {\n          _this.locking=false;\n          return this.$message(\"emails format error\")\n        }\n\n        if (!/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\\\.[a-zA-Z0-9-]+)*\\.[a-zA-Z0-9]{2,6}$/.test(_this.order.email)) {\n          _this.locking=false;\n          return this.$message(\"Email format error\")\n        }\n\n        if (_this.order.address === \"\") {\n          _this.locking=false;\n          return this.$message(\"address format error\")\n        }\n\n        if (_this.order.city === \"\") {\n          _this.locking=false;\n          return this.$message(\"city format error\")\n        }\n\n        if (_this.order.postCode === \"\") {\n          _this.locking=false;\n          return this.$message(\"postal code format error\")\n        }\n\n        if (_this.order.country === \"\") {\n          _this.locking=false;\n          return this.$message(\"Region format error\")\n        }\n        if (_this.order.province === \"\") {\n          _this.locking=false;\n          return this.$message(\"Province format error\")\n        }\n\n        // let c='';\n        // if(this.city)\n        //   c+=this.city;\n        // if(this.Province){\n        //   if(c!='')\n        //     c+=',';\n        //   c+=this.Province;\n        // }\n        // if(this.postalCode){\n        //   if(c!='')\n        //     c+=',';\n        //   c+=this.postalCode;\n        // }\n\n        _this.rq({\n          url: \"/api/shop/getInvoice\",\n          method: \"post\",\n          param: {\n            id:_this.order.id,\n            name:_this.order.name,\n            email:_this.order.email,\n            city:_this.order.city,\n            country:_this.order.country,\n            address:_this.order.address,\n            province:_this.order.province,\n            postCode:_this.order.postCode,\n          },\n          onError: function () {\n            _this.locking=false;\n          },\n          _this,\n        }).then((res) => {\n          _this.locking=false;\n          if (res.code == 200) {\n            _this.order.invoice=res.data;\n            let ele = document.createElement('a');\n            ele.setAttribute('href', _this.$imgServer+res.data); //设置下载文件的url地址\n            ele.setAttribute('download', _this.order.id + '.pdf');//用于设置下载文件的文件名\n\n            ele.setAttribute(\"target\", \"_blank\");\n\n            _this.close();\n            ele.click();\n\n          }\n        })\n      }\n    },\n    close() {\n      const _this=this;\n      _this.visible=false;\n      _this.order = {};\n    },\n  },\n};\n</script>\n<style lang=\"less\">\n.invoice-edit.el-dialog {\n\n  width: 7.34rem;\n  border-radius: 0.14rem;\n\n  .el-dialog__body{\n    padding:0 20px 30px;\n  }\n\n  .dialog-footer{\n    text-align: right;\n\n    .el-button{\n\n      height: 0.38rem;\n      line-height: 0.38rem;\n      background: #F1F1F1;\n      color: #222;\n      border-radius: 0.20rem;\n      border: none;\n      padding: 0 0.2rem;\n    }\n    .el-button--primary{\n      background: #373ACB;\n      color: #FFFFFF;\n    }\n    .el-button:hover{\n      opacity: 0.8;\n    }\n  }\n\n\n//  margin-left: 0.5rem;\n//  width: 0.83rem;\n//  height: 0.38rem;\n//  text-align: center;\n//  line-height: 0.38rem;\n//  background: #F1F1F1;\n//  color: #222;\n//  border-radius: 0.20rem;\n//  border: none;\n//}\n//button + button {\n//  background: #373ACB;\n//  color: #FFFFFF;\n//}\n\n\n  .input {\n    padding-top: 0.08rem;\n\n    .input_1 {\n      display: flex;\n      justify-content: space-between;\n      margin-top: 0.16rem;\n\n      input {\n        width: 3rem;\n        height: 0.48rem;\n        padding-left: 0.14rem;\n        padding-right: 0.16rem;\n        gap: 10px;\n        background: #F8F8F8;\n        border: 1px solid #F1F1F1;\n        border-radius: 0.14rem;\n      }\n\n      .input_1_3 {\n        width: 6.20rem;\n      }\n    }\n\n    .input_2 {\n      justify-content: flex-end;\n\n      button:hover {\n        cursor: pointer;\n      }\n\n      button {\n        margin-left: 0.5rem;\n        width: 0.83rem;\n        height: 0.38rem;\n        text-align: center;\n        line-height: 0.38rem;\n        background: #F1F1F1;\n        color: #222;\n        border-radius: 0.20rem;\n        border: none;\n      }\n\n      button + button {\n        background: #373ACB;\n        color: #FFFFFF;\n      }\n    }\n  }\n\n}\n\n</style>\n"]}]}